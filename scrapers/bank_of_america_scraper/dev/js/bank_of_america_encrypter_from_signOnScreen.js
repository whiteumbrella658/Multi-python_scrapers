// https://secure.bankofamerica.com/pa/components/bundles/gzip-compressed/xengine/VIPAA/6.0/script/vipaa-v4-jawr.js - from https://secure.bankofamerica.com/login/sign-in/signOnScreen.go
// but should be another from https://www.bankofamerica.com/smallbusiness/

/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function (e, t) {
    'object' == typeof module && 'object' == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) {
            if (!e.document) {
                throw new Error('jQuery requires a window with a document')
            }
            return t(e)
        }
        : t(e)
}('undefined' != typeof window ? window : this, function (e, t) {
    var n = [],
        r = e.document,
        i = Object.getPrototypeOf,
        o = n.slice,
        a = n.concat,
        s = n.push,
        u = n.indexOf,sid
        l = {},
        c = l.toString,
        f = l.hasOwnProperty,
        p = f.toString,
        d = p.call(Object),
        h = {},
        g = function e(t) {
            return 'function' == typeof t && 'number' != typeof t.nodeType
        },
        y = function e(t) {
            return null != t && t === t.window
        },
        v = {
            type: !0,
            src: !0,
            noModule: !0
        }

    function m(e, t, n) {
        var i,
            o = (t = t || r).createElement('script')
        if (o.text = e, n) {
            for (i in v) {
                n[i] && (o[i] = n[i])
            }
        }
        t.head.appendChild(o).parentNode.removeChild(o)
    }

    function x(e) {
        return null == e ? e + '' : 'object' == typeof e || 'function' == typeof e ? l[c.call(e)] || 'object' : typeof e
    }

    var b = '3.3.1',
        w = function (e, t) {
            return new w.fn.init(e, t)
        },
        T = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g
    w.fn = w.prototype = {
        jquery: '3.3.1',
        constructor: w,
        length: 0,
        toArray: function () {
            return o.call(this)
        },
        get: function (e) {
            return null == e ? o.call(this) : e < 0 ? this[e + this.length] : this[e]
        },
        pushStack: function (e) {
            var t = w.merge(this.constructor(), e)
            return t.prevObject = this,
                t
        },
        each: function (e) {
            return w.each(this, e)
        },
        map: function (e) {
            return this.pushStack(w.map(this, function (t, n) {
                return e.call(t, n, t)
            }))
        },
        slice: function () {
            return this.pushStack(o.apply(this, arguments))
        },
        first: function () {
            return this.eq(0)
        },
        last: function () {
            return this.eq(-1)
        },
        eq: function (e) {
            var t = this.length,
                n = +e + (e < 0 ? t : 0)
            return this.pushStack(n >= 0 && n < t ? [
                this[n]
            ] : [])
        },
        end: function () {
            return this.prevObject || this.constructor()
        },
        push: s,
        sort: n.sort,
        splice: n.splice
    },
        w.extend = w.fn.extend = function () {
            var e,
                t,
                n,
                r,
                i,
                o,
                a = arguments[0] || {},
                s = 1,
                u = arguments.length,
                l = !1
            for ('boolean' == typeof a && (l = a, a = arguments[s] || {}, s++), 'object' == typeof a || g(a) || (a = {}), s === u && (a = this, s--); s < u; s++) {
                if (null != (e = arguments[s])) {
                    for (t in e) {
                        n = a[t],
                        a !== (r = e[t]) && (l && r && (w.isPlainObject(r) || (i = Array.isArray(r))) ? (i ? (i = !1, o = n && Array.isArray(n) ? n : []) : o = n && w.isPlainObject(n) ? n : {}, a[t] = w.extend(l, o, r)) : void 0 !== r && (a[t] = r))
                    }
                }
            }
            return a
        },
        w.extend({
            expando: 'jQuery' + ('3.3.1' + Math.random()).replace(/\D/g, ''),
            isReady: !0,
            error: function (e) {
                throw new Error(e)
            },
            noop: function () {
            },
            isPlainObject: function (e) {
                var t,
                    n
                return !(!e || '[object Object]' !== c.call(e)) && (!(t = i(e)) || 'function' == typeof (n = f.call(t, 'constructor') && t.constructor) && p.call(n) === d)
            },
            isEmptyObject: function (e) {
                var t
                for (t in e) {
                    return !1
                }
                return !0
            },
            globalEval: function (e) {
                m(e)
            },
            each: function (e, t) {
                var n,
                    r = 0
                if (C(e)) {
                    for (n = e.length; r < n; r++) {
                        if (!1 === t.call(e[r], r, e[r])) {
                            break
                        }
                    }
                } else {
                    for (r in e) {
                        if (!1 === t.call(e[r], r, e[r])) {
                            break
                        }
                    }
                }
                return e
            },
            trim: function (e) {
                return null == e ? '' : (e + '').replace(T, '')
            },
            makeArray: function (e, t) {
                var n = t || []
                return null != e && (C(Object(e)) ? w.merge(n, 'string' == typeof e ? [
                    e
                ] : e) : s.call(n, e)),
                    n
            },
            inArray: function (e, t, n) {
                return null == t ? -1 : u.call(t, e, n)
            },
            merge: function (e, t) {
                for (var n = +t.length, r = 0, i = e.length; r < n; r++) {
                    e[i++] = t[r]
                }
                return e.length = i,
                    e
            },
            grep: function (e, t, n) {
                for (var r, i = [], o = 0, a = e.length, s = !n; o < a; o++) {
                    (r = !t(e[o], o)) !== s && i.push(e[o])
                }
                return i
            },
            map: function (e, t, n) {
                var r,
                    i,
                    o = 0,
                    s = []
                if (C(e)) {
                    for (r = e.length; o < r; o++) {
                        null != (i = t(e[o], o, n)) && s.push(i)
                    }
                } else {
                    for (o in e) {
                        null != (i = t(e[o], o, n)) && s.push(i)
                    }
                }
                return a.apply([], s)
            },
            guid: 1,
            support: h
        }),
    'function' == typeof Symbol && (w.fn[Symbol.iterator] = n[Symbol.iterator]),
        w.each('Boolean Number String Function Array Date RegExp Object Error Symbol'.split(' '), function (e, t) {
            l['[object ' + t + ']'] = t.toLowerCase()
        })

    function C(e) {
        var t = !!e && 'length' in e && e.length,
            n = x(e)
        return !g(e) && !y(e) && ('array' === n || 0 === t || 'number' == typeof t && t > 0 && t - 1 in e)
    }

    var E = function (e) {
        var t,
            n,
            r,
            i,
            o,
            a,
            s,
            u,
            l,
            c,
            f,
            p,
            d,
            h,
            g,
            y,
            v,
            m,
            x,
            b = 'sizzle' + 1 * new Date,
            w = e.document,
            T = 0,
            C = 0,
            E = ae(),
            k = ae(),
            S = ae(),
            D = function (e, t) {
                return e === t && (f = !0),
                    0
            },
            N = {}.hasOwnProperty,
            A = [],
            j = A.pop,
            q = A.push,
            L = A.push,
            H = A.slice,
            O = function (e, t) {
                for (var n = 0, r = e.length; n < r; n++) {
                    if (e[n] === t) {
                        return n
                    }
                }
                return -1
            },
            P = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped',
            M = '[\\x20\\t\\r\\n\\f]',
            R = '(?:\\\\.|[\\w-]|[^\0-\\xa0])+',
            I = '\\[' + M + '*(' + R + ')(?:' + M + '*([*^$|!~]?=)' + M + '*(?:\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)"|(' + R + '))|)' + M + '*\\]',
            W = ':(' + R + ')(?:\\(((\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|' + I + ')*)|.*)\\)|)',
            $ = new RegExp(M + '+', 'g'),
            B = new RegExp('^' + M + '+|((?:^|[^\\\\])(?:\\\\.)*)' + M + '+$', 'g'),
            F = new RegExp('^' + M + '*,' + M + '*'),
            _ = new RegExp('^' + M + '*([>+~]|' + M + ')' + M + '*'),
            z = new RegExp('=' + M + '*([^\\]\'"]*?)' + M + '*\\]', 'g'),
            X = new RegExp(W),
            U = new RegExp('^' + R + '$'),
            V = {
                ID: new RegExp('^#(' + R + ')'),
                CLASS: new RegExp('^\\.(' + R + ')'),
                TAG: new RegExp('^(' + R + '|[*])'),
                ATTR: new RegExp('^' + I),
                PSEUDO: new RegExp('^' + W),
                CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(' + M + '*(even|odd|(([+-]|)(\\d*)n|)' + M + '*(?:([+-]|)' + M + '*(\\d+)|))' + M + '*\\)|)', 'i'),
                bool: new RegExp('^(?:' + P + ')$', 'i'),
                needsContext: new RegExp('^' + M + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(' + M + '*((?:-\\d)?\\d*)' + M + '*\\)|)(?=[^-]|$)', 'i')
            },
            G = /^(?:input|select|textarea|button)$/i,
            Y = /^h\d$/i,
            Q = /^[^{]+\{\s*\[native \w/,
            J = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            K = /[+~]/,
            Z = new RegExp('\\\\([\\da-f]{1,6}' + M + '?|(' + M + ')|.)', 'ig'),
            ee = function (e, t, n) {
                var r = '0x' + t - 65536
                return r !== r || n ? t : r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
            },
            te = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
            ne = function (e, t) {
                return t ? '\0' === e ? 'ï¿½' : e.slice(0, -1) + '\\' + e.charCodeAt(e.length - 1).toString(16) + ' ' : '\\' + e
            },
            re = function () {
                p()
            },
            ie = me(function (e) {
                return !0 === e.disabled && ('form' in e || 'label' in e)
            }, {
                dir: 'parentNode',
                next: 'legend'
            })
        try {
            L.apply(A = H.call(w.childNodes), w.childNodes),
                A[w.childNodes.length].nodeType
        } catch (e) {
            L = {
                apply: A.length ? function (e, t) {
                        q.apply(e, H.call(t))
                    }
                    : function (e, t) {
                        var n = e.length,
                            r = 0
                        while (e[n++] = t[r++]) {
                        }
                        e.length = n - 1
                    }
            }
        }

        function oe(e, t, r, i) {
            var o,
                s,
                l,
                c,
                f,
                h,
                v,
                m = t && t.ownerDocument,
                T = t ? t.nodeType : 9
            if (r = r || [], 'string' != typeof e || !e || 1 !== T && 9 !== T && 11 !== T) {
                return r
            }
            if (!i && ((t ? t.ownerDocument || t : w) !== d && p(t), t = t || d, g)) {
                if (11 !== T && (f = J.exec(e))) {
                    if (o = f[1]) {
                        if (9 === T) {
                            if (!(l = t.getElementById(o))) {
                                return r
                            }
                            if (l.id === o) {
                                return r.push(l),
                                    r
                            }
                        } else {
                            if (m && (l = m.getElementById(o)) && x(t, l) && l.id === o) {
                                return r.push(l),
                                    r
                            }
                        }
                    } else {
                        if (f[2]) {
                            return L.apply(r, t.getElementsByTagName(e)),
                                r
                        }
                        if ((o = f[3]) && n.getElementsByClassName && t.getElementsByClassName) {
                            return L.apply(r, t.getElementsByClassName(o)),
                                r
                        }
                    }
                }
                if (n.qsa && !S[e + ' '] && (!y || !y.test(e))) {
                    if (1 !== T) {
                        m = t,
                            v = e
                    } else {
                        if ('object' !== t.nodeName.toLowerCase()) {
                            (c = t.getAttribute('id')) ? c = c.replace(te, ne) : t.setAttribute('id', c = b),
                                s = (h = a(e)).length
                            while (s--) {
                                h[s] = '#' + c + ' ' + ve(h[s])
                            }
                            v = h.join(','),
                                m = K.test(e) && ge(t.parentNode) || t
                        }
                    }
                    if (v) {
                        try {
                            return L.apply(r, m.querySelectorAll(v)),
                                r
                        } catch (e) {
                        } finally {
                            c === b && t.removeAttribute('id')
                        }
                    }
                }
            }
            return u(e.replace(B, '$1'), t, r, i)
        }

        function ae() {
            var e = []

            function t(n, i) {
                return e.push(n + ' ') > r.cacheLength && delete t[e.shift()],
                    t[n + ' '] = i
            }

            return t
        }

        function se(e) {
            return e[b] = !0,
                e
        }

        function ue(e) {
            var t = d.createElement('fieldset')
            try {
                return !!e(t)
            } catch (e) {
                return !1
            } finally {
                t.parentNode && t.parentNode.removeChild(t),
                    t = null
            }
        }

        function le(e, t) {
            var n = e.split('|'),
                i = n.length
            while (i--) {
                r.attrHandle[n[i]] = t
            }
        }

        function ce(e, t) {
            var n = t && e,
                r = n && 1 === e.nodeType && 1 === t.nodeType && e.sourceIndex - t.sourceIndex
            if (r) {
                return r
            }
            if (n) {
                while (n = n.nextSibling) {
                    if (n === t) {
                        return -1
                    }
                }
            }
            return e ? 1 : -1
        }

        function fe(e) {
            return function (t) {
                return 'input' === t.nodeName.toLowerCase() && t.type === e
            }
        }

        function pe(e) {
            return function (t) {
                var n = t.nodeName.toLowerCase()
                return ('input' === n || 'button' === n) && t.type === e
            }
        }

        function de(e) {
            return function (t) {
                return 'form' in t ? t.parentNode && !1 === t.disabled ? 'label' in t ? 'label' in t.parentNode ? t.parentNode.disabled === e : t.disabled === e : t.isDisabled === e || t.isDisabled !== !e && ie(t) === e : t.disabled === e : 'label' in t && t.disabled === e
            }
        }

        function he(e) {
            return se(function (t) {
                return t = +t,
                    se(function (n, r) {
                        var i,
                            o = e([], n.length, t),
                            a = o.length
                        while (a--) {
                            n[i = o[a]] && (n[i] = !(r[i] = n[i]))
                        }
                    })
            })
        }

        function ge(e) {
            return e && 'undefined' != typeof e.getElementsByTagName && e
        }

        n = oe.support = {},
            o = oe.isXML = function (e) {
                var t = e && (e.ownerDocument || e).documentElement
                return !!t && 'HTML' !== t.nodeName
            },
            p = oe.setDocument = function (e) {
                var t,
                    i,
                    a = e ? e.ownerDocument || e : w
                return a !== d && 9 === a.nodeType && a.documentElement ? (d = a, h = d.documentElement, g = !o(d), w !== d && (i = d.defaultView) && i.top !== i && (i.addEventListener ? i.addEventListener('unload', re, !1) : i.attachEvent && i.attachEvent('onunload', re)), n.attributes = ue(function (e) {
                    return e.className = 'i',
                        !e.getAttribute('className')
                }), n.getElementsByTagName = ue(function (e) {
                    return e.appendChild(d.createComment('')),
                        !e.getElementsByTagName('*').length
                }), n.getElementsByClassName = Q.test(d.getElementsByClassName), n.getById = ue(function (e) {
                    return h.appendChild(e).id = b,
                    !d.getElementsByName || !d.getElementsByName(b).length
                }), n.getById ? (r.filter.ID = function (e) {
                    var t = e.replace(Z, ee)
                    return function (e) {
                        return e.getAttribute('id') === t
                    }
                }, r.find.ID = function (e, t) {
                    if ('undefined' != typeof t.getElementById && g) {
                        var n = t.getElementById(e)
                        return n ? [
                            n
                        ] : []
                    }
                }) : (r.filter.ID = function (e) {
                    var t = e.replace(Z, ee)
                    return function (e) {
                        var n = 'undefined' != typeof e.getAttributeNode && e.getAttributeNode('id')
                        return n && n.value === t
                    }
                }, r.find.ID = function (e, t) {
                    if ('undefined' != typeof t.getElementById && g) {
                        var n,
                            r,
                            i,
                            o = t.getElementById(e)
                        if (o) {
                            if ((n = o.getAttributeNode('id')) && n.value === e) {
                                return [o]
                            }
                            i = t.getElementsByName(e),
                                r = 0
                            while (o = i[r++]) {
                                if ((n = o.getAttributeNode('id')) && n.value === e) {
                                    return [o]
                                }
                            }
                        }
                        return []
                    }
                }), r.find.TAG = n.getElementsByTagName ? function (e, t) {
                        return 'undefined' != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : n.qsa ? t.querySelectorAll(e) : void 0
                    }
                    : function (e, t) {
                        var n,
                            r = [],
                            i = 0,
                            o = t.getElementsByTagName(e)
                        if ('*' === e) {
                            while (n = o[i++]) {
                                1 === n.nodeType && r.push(n)
                            }
                            return r
                        }
                        return o
                    }, r.find.CLASS = n.getElementsByClassName && function (e, t) {
                    if ('undefined' != typeof t.getElementsByClassName && g) {
                        return t.getElementsByClassName(e)
                    }
                }, v = [], y = [], (n.qsa = Q.test(d.querySelectorAll)) && (ue(function (e) {
                    h.appendChild(e).innerHTML = '<a id=\'' + b + '\'></a><select id=\'' + b + '-\r\\\' msallowcapture=\'\'><option selected=\'\'></option></select>',
                    e.querySelectorAll('[msallowcapture^=\'\']').length && y.push('[*^$]=' + M + '*(?:\'\'|"")'),
                    e.querySelectorAll('[selected]').length || y.push('\\[' + M + '*(?:value|' + P + ')'),
                    e.querySelectorAll('[id~=' + b + '-]').length || y.push('~='),
                    e.querySelectorAll(':checked').length || y.push(':checked'),
                    e.querySelectorAll('a#' + b + '+*').length || y.push('.#.+[+~]')
                }), ue(function (e) {
                    e.innerHTML = '<a href=\'\' disabled=\'disabled\'></a><select disabled=\'disabled\'><option/></select>'
                    var t = d.createElement('input')
                    t.setAttribute('type', 'hidden'),
                        e.appendChild(t).setAttribute('name', 'D'),
                    e.querySelectorAll('[name=d]').length && y.push('name' + M + '*[*^$|!~]?='),
                    2 !== e.querySelectorAll(':enabled').length && y.push(':enabled', ':disabled'),
                        h.appendChild(e).disabled = !0,
                    2 !== e.querySelectorAll(':disabled').length && y.push(':enabled', ':disabled'),
                        e.querySelectorAll('*,:x'),
                        y.push(',.*:')
                })), (n.matchesSelector = Q.test(m = h.matches || h.webkitMatchesSelector || h.mozMatchesSelector || h.oMatchesSelector || h.msMatchesSelector)) && ue(function (e) {
                    n.disconnectedMatch = m.call(e, '*'),
                        m.call(e, '[s!=\'\']:x'),
                        v.push('!=', W)
                }), y = y.length && new RegExp(y.join('|')), v = v.length && new RegExp(v.join('|')), t = Q.test(h.compareDocumentPosition), x = t || Q.test(h.contains) ? function (e, t) {
                        var n = 9 === e.nodeType ? e.documentElement : e,
                            r = t && t.parentNode
                        return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
                    }
                    : function (e, t) {
                        if (t) {
                            while (t = t.parentNode) {
                                if (t === e) {
                                    return !0
                                }
                            }
                        }
                        return !1
                    }, D = t ? function (e, t) {
                        if (e === t) {
                            return f = !0,
                                0
                        }
                        var r = !e.compareDocumentPosition - !t.compareDocumentPosition
                        return r || (1 & (r = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !n.sortDetached && t.compareDocumentPosition(e) === r ? e === d || e.ownerDocument === w && x(w, e) ? -1 : t === d || t.ownerDocument === w && x(w, t) ? 1 : c ? O(c, e) - O(c, t) : 0 : 4 & r ? -1 : 1)
                    }
                    : function (e, t) {
                        if (e === t) {
                            return f = !0,
                                0
                        }
                        var n,
                            r = 0,
                            i = e.parentNode,
                            o = t.parentNode,
                            a = [
                                e
                            ],
                            s = [
                                t
                            ]
                        if (!i || !o) {
                            return e === d ? -1 : t === d ? 1 : i ? -1 : o ? 1 : c ? O(c, e) - O(c, t) : 0
                        }
                        if (i === o) {
                            return ce(e, t)
                        }
                        n = e
                        while (n = n.parentNode) {
                            a.unshift(n)
                        }
                        n = t
                        while (n = n.parentNode) {
                            s.unshift(n)
                        }
                        while (a[r] === s[r]) {
                            r++
                        }
                        return r ? ce(a[r], s[r]) : a[r] === w ? -1 : s[r] === w ? 1 : 0
                    }, d) : d
            },
            oe.matches = function (e, t) {
                return oe(e, null, null, t)
            },
            oe.matchesSelector = function (e, t) {
                if ((e.ownerDocument || e) !== d && p(e), t = t.replace(z, '=\'$1\']'), n.matchesSelector && g && !S[t + ' '] && (!v || !v.test(t)) && (!y || !y.test(t))) {
                    try {
                        var r = m.call(e, t)
                        if (r || n.disconnectedMatch || e.document && 11 !== e.document.nodeType) {
                            return r
                        }
                    } catch (e) {
                    }
                }
                return oe(t, d, null, [
                    e
                ]).length > 0
            },
            oe.contains = function (e, t) {
                return (e.ownerDocument || e) !== d && p(e),
                    x(e, t)
            },
            oe.attr = function (e, t) {
                (e.ownerDocument || e) !== d && p(e)
                var i = r.attrHandle[t.toLowerCase()],
                    o = i && N.call(r.attrHandle, t.toLowerCase()) ? i(e, t, !g) : void 0
                return void 0 !== o ? o : n.attributes || !g ? e.getAttribute(t) : (o = e.getAttributeNode(t)) && o.specified ? o.value : null
            },
            oe.escape = function (e) {
                return (e + '').replace(te, ne)
            },
            oe.error = function (e) {
                throw new Error('Syntax error, unrecognized expression: ' + e)
            },
            oe.uniqueSort = function (e) {
                var t,
                    r = [],
                    i = 0,
                    o = 0
                if (f = !n.detectDuplicates, c = !n.sortStable && e.slice(0), e.sort(D), f) {
                    while (t = e[o++]) {
                        t === e[o] && (i = r.push(o))
                    }
                    while (i--) {
                        e.splice(r[i], 1)
                    }
                }
                return c = null,
                    e
            },
            i = oe.getText = function (e) {
                var t,
                    n = '',
                    r = 0,
                    o = e.nodeType
                if (o) {
                    if (1 === o || 9 === o || 11 === o) {
                        if ('string' == typeof e.textContent) {
                            return e.textContent
                        }
                        for (e = e.firstChild; e; e = e.nextSibling) {
                            n += i(e)
                        }
                    } else {
                        if (3 === o || 4 === o) {
                            return e.nodeValue
                        }
                    }
                } else {
                    while (t = e[r++]) {
                        n += i(t)
                    }
                }
                return n
            },
            (r = oe.selectors = {
                cacheLength: 50,
                createPseudo: se,
                match: V,
                attrHandle: {},
                find: {},
                relative: {
                    '>': {
                        dir: 'parentNode',
                        first: !0
                    },
                    ' ': {
                        dir: 'parentNode'
                    },
                    '+': {
                        dir: 'previousSibling',
                        first: !0
                    },
                    '~': {
                        dir: 'previousSibling'
                    }
                },
                preFilter: {
                    ATTR: function (e) {
                        return e[1] = e[1].replace(Z, ee),
                            e[3] = (e[3] || e[4] || e[5] || '').replace(Z, ee),
                        '~=' === e[2] && (e[3] = ' ' + e[3] + ' '),
                            e.slice(0, 4)
                    },
                    CHILD: function (e) {
                        return e[1] = e[1].toLowerCase(),
                            'nth' === e[1].slice(0, 3) ? (e[3] || oe.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ('even' === e[3] || 'odd' === e[3])), e[5] = +(e[7] + e[8] || 'odd' === e[3])) : e[3] && oe.error(e[0]),
                            e
                    },
                    PSEUDO: function (e) {
                        var t,
                            n = !e[6] && e[2]
                        return V.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || '' : n && X.test(n) && (t = a(n, !0)) && (t = n.indexOf(')', n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function (e) {
                        var t = e.replace(Z, ee).toLowerCase()
                        return '*' === e ? function () {
                                return !0
                            }
                            : function (e) {
                                return e.nodeName && e.nodeName.toLowerCase() === t
                            }
                    },
                    CLASS: function (e) {
                        var t = E[e + ' ']
                        return t || (t = new RegExp('(^|' + M + ')' + e + '(' + M + '|$)')) && E(e, function (e) {
                            return t.test('string' == typeof e.className && e.className || 'undefined' != typeof e.getAttribute && e.getAttribute('class') || '')
                        })
                    },
                    ATTR: function (e, t, n) {
                        return function (r) {
                            var i = oe.attr(r, e)
                            return null == i ? '!=' === t : !t || (i += '', '=' === t ? i === n : '!=' === t ? i !== n : '^=' === t ? n && 0 === i.indexOf(n) : '*=' === t ? n && i.indexOf(n) > -1 : '$=' === t ? n && i.slice(-n.length) === n : '~=' === t ? (' ' + i.replace($, ' ') + ' ').indexOf(n) > -1 : '|=' === t && (i === n || i.slice(0, n.length + 1) === n + '-'))
                        }
                    },
                    CHILD: function (e, t, n, r, i) {
                        var o = 'nth' !== e.slice(0, 3),
                            a = 'last' !== e.slice(-4),
                            s = 'of-type' === t
                        return 1 === r && 0 === i ? function (e) {
                                return !!e.parentNode
                            }
                            : function (t, n, u) {
                                var l,
                                    c,
                                    f,
                                    p,
                                    d,
                                    h,
                                    g = o !== a ? 'nextSibling' : 'previousSibling',
                                    y = t.parentNode,
                                    v = s && t.nodeName.toLowerCase(),
                                    m = !u && !s,
                                    x = !1
                                if (y) {
                                    if (o) {
                                        while (g) {
                                            p = t
                                            while (p = p[g]) {
                                                if (s ? p.nodeName.toLowerCase() === v : 1 === p.nodeType) {
                                                    return !1
                                                }
                                            }
                                            h = g = 'only' === e && !h && 'nextSibling'
                                        }
                                        return !0
                                    }
                                    if (h = [
                                        a ? y.firstChild : y.lastChild
                                    ], a && m) {
                                        x = (d = (l = (c = (f = (p = y) [b] || (p[b] = {})) [p.uniqueID] || (f[p.uniqueID] = {})) [e] || []) [0] === T && l[1]) && l[2],
                                            p = d && y.childNodes[d]
                                        while (p = ++d && p && p[g] || (x = d = 0) || h.pop()) {
                                            if (1 === p.nodeType && ++x && p === t) {
                                                c[e] = [
                                                    T,
                                                    d,
                                                    x
                                                ]
                                                break
                                            }
                                        }
                                    } else {
                                        if (m && (x = d = (l = (c = (f = (p = t) [b] || (p[b] = {})) [p.uniqueID] || (f[p.uniqueID] = {})) [e] || []) [0] === T && l[1]), !1 === x) {
                                            while (p = ++d && p && p[g] || (x = d = 0) || h.pop()) {
                                                if ((s ? p.nodeName.toLowerCase() === v : 1 === p.nodeType) && ++x && (m && ((c = (f = p[b] || (p[b] = {})) [p.uniqueID] || (f[p.uniqueID] = {})) [e] = [
                                                    T,
                                                    x
                                                ]), p === t)) {
                                                    break
                                                }
                                            }
                                        }
                                    }
                                    return (x -= i) === r || x % r == 0 && x / r >= 0
                                }
                            }
                    },
                    PSEUDO: function (e, t) {
                        var n,
                            i = r.pseudos[e] || r.setFilters[e.toLowerCase()] || oe.error('unsupported pseudo: ' + e)
                        return i[b] ? i(t) : i.length > 1 ? (n = [
                            e,
                            e,
                            '',
                            t
                        ], r.setFilters.hasOwnProperty(e.toLowerCase()) ? se(function (e, n) {
                            var r,
                                o = i(e, t),
                                a = o.length
                            while (a--) {
                                e[r = O(e, o[a])] = !(n[r] = o[a])
                            }
                        }) : function (e) {
                            return i(e, 0, n)
                        }) : i
                    }
                },
                pseudos: {
                    not: se(function (e) {
                        var t = [],
                            n = [],
                            r = s(e.replace(B, '$1'))
                        return r[b] ? se(function (e, t, n, i) {
                            var o,
                                a = r(e, null, i, []),
                                s = e.length
                            while (s--) {
                                (o = a[s]) && (e[s] = !(t[s] = o))
                            }
                        }) : function (e, i, o) {
                            return t[0] = e,
                                r(t, null, o, n),
                                t[0] = null,
                                !n.pop()
                        }
                    }),
                    has: se(function (e) {
                        return function (t) {
                            return oe(e, t).length > 0
                        }
                    }),
                    contains: se(function (e) {
                        return e = e.replace(Z, ee),
                            function (t) {
                                return (t.textContent || t.innerText || i(t)).indexOf(e) > -1
                            }
                    }),
                    lang: se(function (e) {
                        return U.test(e || '') || oe.error('unsupported lang: ' + e),
                            e = e.replace(Z, ee).toLowerCase(),
                            function (t) {
                                var n
                                do {
                                    if (n = g ? t.lang : t.getAttribute('xml:lang') || t.getAttribute('lang')) {
                                        return (n = n.toLowerCase()) === e || 0 === n.indexOf(e + '-')
                                    }
                                } while ((t = t.parentNode) && 1 === t.nodeType)
                                return !1
                            }
                    }),
                    target: function (t) {
                        var n = e.location && e.location.hash
                        return n && n.slice(1) === t.id
                    },
                    root: function (e) {
                        return e === h
                    },
                    focus: function (e) {
                        return e === d.activeElement && (!d.hasFocus || d.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                    },
                    enabled: de(!1),
                    disabled: de(!0),
                    checked: function (e) {
                        var t = e.nodeName.toLowerCase()
                        return 'input' === t && !!e.checked || 'option' === t && !!e.selected
                    },
                    selected: function (e) {
                        return e.parentNode && e.parentNode.selectedIndex,
                        !0 === e.selected
                    },
                    empty: function (e) {
                        for (e = e.firstChild; e; e = e.nextSibling) {
                            if (e.nodeType < 6) {
                                return !1
                            }
                        }
                        return !0
                    },
                    parent: function (e) {
                        return !r.pseudos.empty(e)
                    },
                    header: function (e) {
                        return Y.test(e.nodeName)
                    },
                    input: function (e) {
                        return G.test(e.nodeName)
                    },
                    button: function (e) {
                        var t = e.nodeName.toLowerCase()
                        return 'input' === t && 'button' === e.type || 'button' === t
                    },
                    text: function (e) {
                        var t
                        return 'input' === e.nodeName.toLowerCase() && 'text' === e.type && (null == (t = e.getAttribute('type')) || 'text' === t.toLowerCase())
                    },
                    first: he(function () {
                        return [0]
                    }),
                    last: he(function (e, t) {
                        return [t - 1]
                    }),
                    eq: he(function (e, t, n) {
                        return [n < 0 ? n + t : n]
                    }),
                    even: he(function (e, t) {
                        for (var n = 0; n < t; n += 2) {
                            e.push(n)
                        }
                        return e
                    }),
                    odd: he(function (e, t) {
                        for (var n = 1; n < t; n += 2) {
                            e.push(n)
                        }
                        return e
                    }),
                    lt: he(function (e, t, n) {
                        for (var r = n < 0 ? n + t : n; --r >= 0;) {
                            e.push(r)
                        }
                        return e
                    }),
                    gt: he(function (e, t, n) {
                        for (var r = n < 0 ? n + t : n; ++r < t;) {
                            e.push(r)
                        }
                        return e
                    })
                }
            }).pseudos.nth = r.pseudos.eq
        for (t in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) {
            r.pseudos[t] = fe(t)
        }
        for (t in {
            submit: !0,
            reset: !0
        }) {
            r.pseudos[t] = pe(t)
        }

        function ye() {
        }

        ye.prototype = r.filters = r.pseudos,
            r.setFilters = new ye,
            a = oe.tokenize = function (e, t) {
                var n,
                    i,
                    o,
                    a,
                    s,
                    u,
                    l,
                    c = k[e + ' ']
                if (c) {
                    return t ? 0 : c.slice(0)
                }
                s = e,
                    u = [],
                    l = r.preFilter
                while (s) {
                    n && !(i = F.exec(s)) || (i && (s = s.slice(i[0].length) || s), u.push(o = [])),
                        n = !1,
                    (i = _.exec(s)) && (n = i.shift(), o.push({
                        value: n,
                        type: i[0].replace(B, ' ')
                    }), s = s.slice(n.length))
                    for (a in r.filter) {
                        !(i = V[a].exec(s)) || l[a] && !(i = l[a](i)) || (n = i.shift(), o.push({
                            value: n,
                            type: a,
                            matches: i
                        }), s = s.slice(n.length))
                    }
                    if (!n) {
                        break
                    }
                }
                return t ? s.length : s ? oe.error(e) : k(e, u).slice(0)
            }

        function ve(e) {
            for (var t = 0, n = e.length, r = ''; t < n; t++) {
                r += e[t].value
            }
            return r
        }

        function me(e, t, n) {
            var r = t.dir,
                i = t.next,
                o = i || r,
                a = n && 'parentNode' === o,
                s = C++
            return t.first ? function (t, n, i) {
                    while (t = t[r]) {
                        if (1 === t.nodeType || a) {
                            return e(t, n, i)
                        }
                    }
                    return !1
                }
                : function (t, n, u) {
                    var l,
                        c,
                        f,
                        p = [
                            T,
                            s
                        ]
                    if (u) {
                        while (t = t[r]) {
                            if ((1 === t.nodeType || a) && e(t, n, u)) {
                                return !0
                            }
                        }
                    } else {
                        while (t = t[r]) {
                            if (1 === t.nodeType || a) {
                                if (f = t[b] || (t[b] = {}), c = f[t.uniqueID] || (f[t.uniqueID] = {}), i && i === t.nodeName.toLowerCase()) {
                                    t = t[r] || t
                                } else {
                                    if ((l = c[o]) && l[0] === T && l[1] === s) {
                                        return p[2] = l[2]
                                    }
                                    if (c[o] = p, p[2] = e(t, n, u)) {
                                        return !0
                                    }
                                }
                            }
                        }
                    }
                    return !1
                }
        }

        function xe(e) {
            return e.length > 1 ? function (t, n, r) {
                    var i = e.length
                    while (i--) {
                        if (!e[i](t, n, r)) {
                            return !1
                        }
                    }
                    return !0
                }
                : e[0]
        }

        function be(e, t, n) {
            for (var r = 0, i = t.length; r < i; r++) {
                oe(e, t[r], n)
            }
            return n
        }

        function we(e, t, n, r, i) {
            for (var o, a = [], s = 0, u = e.length, l = null != t; s < u; s++) {
                (o = e[s]) && (n && !n(o, r, i) || (a.push(o), l && t.push(s)))
            }
            return a
        }

        function Te(e, t, n, r, i, o) {
            return r && !r[b] && (r = Te(r)),
            i && !i[b] && (i = Te(i, o)),
                se(function (o, a, s, u) {
                    var l,
                        c,
                        f,
                        p = [],
                        d = [],
                        h = a.length,
                        g = o || be(t || '*', s.nodeType ? [
                            s
                        ] : s, []),
                        y = !e || !o && t ? g : we(g, p, e, s, u),
                        v = n ? i || (o ? e : h || r) ? [] : a : y
                    if (n && n(y, v, s, u), r) {
                        l = we(v, d),
                            r(l, [], s, u),
                            c = l.length
                        while (c--) {
                            (f = l[c]) && (v[d[c]] = !(y[d[c]] = f))
                        }
                    }
                    if (o) {
                        if (i || e) {
                            if (i) {
                                l = [],
                                    c = v.length
                                while (c--) {
                                    (f = v[c]) && l.push(y[c] = f)
                                }
                                i(null, v = [], l, u)
                            }
                            c = v.length
                            while (c--) {
                                (f = v[c]) && (l = i ? O(o, f) : p[c]) > -1 && (o[l] = !(a[l] = f))
                            }
                        }
                    } else {
                        v = we(v === a ? v.splice(h, v.length) : v),
                            i ? i(null, a, v, u) : L.apply(a, v)
                    }
                })
        }

        function Ce(e) {
            for (var t, n, i, o = e.length, a = r.relative[e[0].type], s = a || r.relative[' '], u = a ? 1 : 0, c = me(function (e) {
                return e === t
            }, s, !0), f = me(function (e) {
                return O(t, e) > -1
            }, s, !0), p = [
                function (e, n, r) {
                    var i = !a && (r || n !== l) || ((t = n).nodeType ? c(e, n, r) : f(e, n, r))
                    return t = null,
                        i
                }
            ]; u < o; u++) {
                if (n = r.relative[e[u].type]) {
                    p = [
                        me(xe(p), n)
                    ]
                } else {
                    if ((n = r.filter[e[u].type].apply(null, e[u].matches)) [b]) {
                        for (i = ++u; i < o; i++) {
                            if (r.relative[e[i].type]) {
                                break
                            }
                        }
                        return Te(u > 1 && xe(p), u > 1 && ve(e.slice(0, u - 1).concat({
                            value: ' ' === e[u - 2].type ? '*' : ''
                        })).replace(B, '$1'), n, u < i && Ce(e.slice(u, i)), i < o && Ce(e = e.slice(i)), i < o && ve(e))
                    }
                    p.push(n)
                }
            }
            return xe(p)
        }

        function Ee(e, t) {
            var n = t.length > 0,
                i = e.length > 0,
                o = function (o, a, s, u, c) {
                    var f,
                        h,
                        y,
                        v = 0,
                        m = '0',
                        x = o && [],
                        b = [],
                        w = l,
                        C = o || i && r.find.TAG('*', c),
                        E = T += null == w ? 1 : Math.random() || 0.1,
                        k = C.length
                    for (c && (l = a === d || a || c); m !== k && null != (f = C[m]); m++) {
                        if (i && f) {
                            h = 0,
                            a || f.ownerDocument === d || (p(f), s = !g)
                            while (y = e[h++]) {
                                if (y(f, a || d, s)) {
                                    u.push(f)
                                    break
                                }
                            }
                            c && (T = E)
                        }
                        n && ((f = !y && f) && v--, o && x.push(f))
                    }
                    if (v += m, n && m !== v) {
                        h = 0
                        while (y = t[h++]) {
                            y(x, b, a, s)
                        }
                        if (o) {
                            if (v > 0) {
                                while (m--) {
                                    x[m] || b[m] || (b[m] = j.call(u))
                                }
                            }
                            b = we(b)
                        }
                        L.apply(u, b),
                        c && !o && b.length > 0 && v + t.length > 1 && oe.uniqueSort(u)
                    }
                    return c && (T = E, l = w),
                        x
                }
            return n ? se(o) : o
        }

        return s = oe.compile = function (e, t) {
            var n,
                r = [],
                i = [],
                o = S[e + ' ']
            if (!o) {
                t || (t = a(e)),
                    n = t.length
                while (n--) {
                    (o = Ce(t[n])) [b] ? r.push(o) : i.push(o)
                }
                (o = S(e, Ee(i, r))).selector = e
            }
            return o
        },
            u = oe.select = function (e, t, n, i) {
                var o,
                    u,
                    l,
                    c,
                    f,
                    p = 'function' == typeof e && e,
                    d = !i && a(e = p.selector || e)
                if (n = n || [], 1 === d.length) {
                    if ((u = d[0] = d[0].slice(0)).length > 2 && 'ID' === (l = u[0]).type && 9 === t.nodeType && g && r.relative[u[1].type]) {
                        if (!(t = (r.find.ID(l.matches[0].replace(Z, ee), t) || []) [0])) {
                            return n
                        }
                        p && (t = t.parentNode),
                            e = e.slice(u.shift().value.length)
                    }
                    o = V.needsContext.test(e) ? 0 : u.length
                    while (o--) {
                        if (l = u[o], r.relative[c = l.type]) {
                            break
                        }
                        if ((f = r.find[c]) && (i = f(l.matches[0].replace(Z, ee), K.test(u[0].type) && ge(t.parentNode) || t))) {
                            if (u.splice(o, 1), !(e = i.length && ve(u))) {
                                return L.apply(n, i),
                                    n
                            }
                            break
                        }
                    }
                }
                return (p || s(e, d))(i, t, !g, n, !t || K.test(e) && ge(t.parentNode) || t),
                    n
            },
            n.sortStable = b.split('').sort(D).join('') === b,
            n.detectDuplicates = !!f,
            p(),
            n.sortDetached = ue(function (e) {
                return 1 & e.compareDocumentPosition(d.createElement('fieldset'))
            }),
        ue(function (e) {
            return e.innerHTML = '<a href=\'#\'></a>',
            '#' === e.firstChild.getAttribute('href')
        }) || le('type|href|height|width', function (e, t, n) {
            if (!n) {
                return e.getAttribute(t, 'type' === t.toLowerCase() ? 1 : 2)
            }
        }),
        n.attributes && ue(function (e) {
            return e.innerHTML = '<input/>',
                e.firstChild.setAttribute('value', ''),
            '' === e.firstChild.getAttribute('value')
        }) || le('value', function (e, t, n) {
            if (!n && 'input' === e.nodeName.toLowerCase()) {
                return e.defaultValue
            }
        }),
        ue(function (e) {
            return null == e.getAttribute('disabled')
        }) || le(P, function (e, t, n) {
            var r
            if (!n) {
                return !0 === e[t] ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
            }
        }),
            oe
    }(e)
    w.find = E,
        w.expr = E.selectors,
        w.expr[':'] = w.expr.pseudos,
        w.uniqueSort = w.unique = E.uniqueSort,
        w.text = E.getText,
        w.isXMLDoc = E.isXML,
        w.contains = E.contains,
        w.escapeSelector = E.escape
    var k = function (e, t, n) {
            var r = [],
                i = void 0 !== n
            while ((e = e[t]) && 9 !== e.nodeType) {
                if (1 === e.nodeType) {
                    if (i && w(e).is(n)) {
                        break
                    }
                    r.push(e)
                }
            }
            return r
        },
        S = function (e, t) {
            for (var n = []; e; e = e.nextSibling) {
                1 === e.nodeType && e !== t && n.push(e)
            }
            return n
        },
        D = w.expr.match.needsContext

    function N(e, t) {
        return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
    }

    var A = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i

    function j(e, t, n) {
        return g(t) ? w.grep(e, function (e, r) {
            return !!t.call(e, r, e) !== n
        }) : t.nodeType ? w.grep(e, function (e) {
            return e === t !== n
        }) : 'string' != typeof t ? w.grep(e, function (e) {
            return u.call(t, e) > -1 !== n
        }) : w.filter(t, e, n)
    }

    w.filter = function (e, t, n) {
        var r = t[0]
        return n && (e = ':not(' + e + ')'),
            1 === t.length && 1 === r.nodeType ? w.find.matchesSelector(r, e) ? [
                r
            ] : [] : w.find.matches(e, w.grep(t, function (e) {
                return 1 === e.nodeType
            }))
    },
        w.fn.extend({
            find: function (e) {
                var t,
                    n,
                    r = this.length,
                    i = this
                if ('string' != typeof e) {
                    return this.pushStack(w(e).filter(function () {
                        for (t = 0; t < r; t++) {
                            if (w.contains(i[t], this)) {
                                return !0
                            }
                        }
                    }))
                }
                for (n = this.pushStack([]), t = 0; t < r; t++) {
                    w.find(e, i[t], n)
                }
                return r > 1 ? w.uniqueSort(n) : n
            },
            filter: function (e) {
                return this.pushStack(j(this, e || [], !1))
            },
            not: function (e) {
                return this.pushStack(j(this, e || [], !0))
            },
            is: function (e) {
                return !!j(this, 'string' == typeof e && D.test(e) ? w(e) : e || [], !1).length
            }
        })
    var q,
        L = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
    (w.fn.init = function (e, t, n) {
        var i,
            o
        if (!e) {
            return this
        }
        if (n = n || q, 'string' == typeof e) {
            if (!(i = '<' === e[0] && '>' === e[e.length - 1] && e.length >= 3 ? [
                null,
                e,
                null
            ] : L.exec(e)) || !i[1] && t) {
                return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e)
            }
            if (i[1]) {
                if (t = t instanceof w ? t[0] : t, w.merge(this, w.parseHTML(i[1], t && t.nodeType ? t.ownerDocument || t : r, !0)), A.test(i[1]) && w.isPlainObject(t)) {
                    for (i in t) {
                        g(this[i]) ? this[i](t[i]) : this.attr(i, t[i])
                    }
                }
                return this
            }
            return (o = r.getElementById(i[2])) && (this[0] = o, this.length = 1),
                this
        }
        return e.nodeType ? (this[0] = e, this.length = 1, this) : g(e) ? void 0 !== n.ready ? n.ready(e) : e(w) : w.makeArray(e, this)
    }).prototype = w.fn,
        q = w(r)
    var H = /^(?:parents|prev(?:Until|All))/,
        O = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        }
    w.fn.extend({
        has: function (e) {
            var t = w(e, this),
                n = t.length
            return this.filter(function () {
                for (var e = 0; e < n; e++) {
                    if (w.contains(this, t[e])) {
                        return !0
                    }
                }
            })
        },
        closest: function (e, t) {
            var n,
                r = 0,
                i = this.length,
                o = [],
                a = 'string' != typeof e && w(e)
            if (!D.test(e)) {
                for (; r < i; r++) {
                    for (n = this[r]; n && n !== t; n = n.parentNode) {
                        if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && w.find.matchesSelector(n, e))) {
                            o.push(n)
                            break
                        }
                    }
                }
            }
            return this.pushStack(o.length > 1 ? w.uniqueSort(o) : o)
        },
        index: function (e) {
            return e ? 'string' == typeof e ? u.call(w(e), this[0]) : u.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function (e, t) {
            return this.pushStack(w.uniqueSort(w.merge(this.get(), w(e, t))))
        },
        addBack: function (e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }
    })

    function P(e, t) {
        while ((e = e[t]) && 1 !== e.nodeType) {
        }
        return e
    }

    w.each({
        parent: function (e) {
            var t = e.parentNode
            return t && 11 !== t.nodeType ? t : null
        },
        parents: function (e) {
            return k(e, 'parentNode')
        },
        parentsUntil: function (e, t, n) {
            return k(e, 'parentNode', n)
        },
        next: function (e) {
            return P(e, 'nextSibling')
        },
        prev: function (e) {
            return P(e, 'previousSibling')
        },
        nextAll: function (e) {
            return k(e, 'nextSibling')
        },
        prevAll: function (e) {
            return k(e, 'previousSibling')
        },
        nextUntil: function (e, t, n) {
            return k(e, 'nextSibling', n)
        },
        prevUntil: function (e, t, n) {
            return k(e, 'previousSibling', n)
        },
        siblings: function (e) {
            return S((e.parentNode || {}).firstChild, e)
        },
        children: function (e) {
            return S(e.firstChild)
        },
        contents: function (e) {
            return N(e, 'iframe') ? e.contentDocument : (N(e, 'template') && (e = e.content || e), w.merge([], e.childNodes))
        }
    }, function (e, t) {
        w.fn[e] = function (n, r) {
            var i = w.map(this, t, n)
            return 'Until' !== e.slice(-5) && (r = n),
            r && 'string' == typeof r && (i = w.filter(r, i)),
            this.length > 1 && (O[e] || w.uniqueSort(i), H.test(e) && i.reverse()),
                this.pushStack(i)
        }
    })
    var M = /[^\x20\t\r\n\f]+/g

    function R(e) {
        var t = {}
        return w.each(e.match(M) || [], function (e, n) {
            t[n] = !0
        }),
            t
    }

    w.Callbacks = function (e) {
        e = 'string' == typeof e ? R(e) : w.extend({}, e)
        var t,
            n,
            r,
            i,
            o = [],
            a = [],
            s = -1,
            u = function () {
                for (i = i || e.once, r = t = !0; a.length; s = -1) {
                    n = a.shift()
                    while (++s < o.length) {
                        !1 === o[s].apply(n[0], n[1]) && e.stopOnFalse && (s = o.length, n = !1)
                    }
                }
                e.memory || (n = !1),
                    t = !1,
                i && (o = n ? [] : '')
            },
            l = {
                add: function () {
                    return o && (n && !t && (s = o.length - 1, a.push(n)), function t(n) {
                        w.each(n, function (n, r) {
                            g(r) ? e.unique && l.has(r) || o.push(r) : r && r.length && 'string' !== x(r) && t(r)
                        })
                    }(arguments), n && !t && u()),
                        this
                },
                remove: function () {
                    return w.each(arguments, function (e, t) {
                        var n
                        while ((n = w.inArray(t, o, n)) > -1) {
                            o.splice(n, 1),
                            n <= s && s--
                        }
                    }),
                        this
                },
                has: function (e) {
                    return e ? w.inArray(e, o) > -1 : o.length > 0
                },
                empty: function () {
                    return o && (o = []),
                        this
                },
                disable: function () {
                    return i = a = [],
                        o = n = '',
                        this
                },
                disabled: function () {
                    return !o
                },
                lock: function () {
                    return i = a = [],
                    n || t || (o = n = ''),
                        this
                },
                locked: function () {
                    return !!i
                },
                fireWith: function (e, n) {
                    return i || (n = [
                        e,
                        (n = n || []).slice ? n.slice() : n
                    ], a.push(n), t || u()),
                        this
                },
                fire: function () {
                    return l.fireWith(this, arguments),
                        this
                },
                fired: function () {
                    return !!r
                }
            }
        return l
    }

    function I(e) {
        return e
    }

    function W(e) {
        throw e
    }

    function $(e, t, n, r) {
        var i
        try {
            e && g(i = e.promise) ? i.call(e).done(t).fail(n) : e && g(i = e.then) ? i.call(e, t, n) : t.apply(void 0, [
                e
            ].slice(r))
        } catch (e) {
            n.apply(void 0, [
                e
            ])
        }
    }

    w.extend({
        Deferred: function (t) {
            var n = [
                    ['notify',
                        'progress',
                        w.Callbacks('memory'),
                        w.Callbacks('memory'),
                        2],
                    [
                        'resolve',
                        'done',
                        w.Callbacks('once memory'),
                        w.Callbacks('once memory'),
                        0,
                        'resolved'
                    ],
                    [
                        'reject',
                        'fail',
                        w.Callbacks('once memory'),
                        w.Callbacks('once memory'),
                        1,
                        'rejected'
                    ]
                ],
                r = 'pending',
                i = {
                    state: function () {
                        return r
                    },
                    always: function () {
                        return o.done(arguments).fail(arguments),
                            this
                    },
                    'catch': function (e) {
                        return i.then(null, e)
                    },
                    pipe: function () {
                        var e = arguments
                        return w.Deferred(function (t) {
                            w.each(n, function (n, r) {
                                var i = g(e[r[4]]) && e[r[4]]
                                o[r[1]](function () {
                                    var e = i && i.apply(this, arguments)
                                    e && g(e.promise) ? e.promise().progress(t.notify).done(t.resolve).fail(t.reject) : t[r[0] + 'With'](this, i ? [
                                        e
                                    ] : arguments)
                                })
                            }),
                                e = null
                        }).promise()
                    },
                    then: function (t, r, i) {
                        var o = 0

                        function a(t, n, r, i) {
                            return function () {
                                var s = this,
                                    u = arguments,
                                    l = function () {
                                        var e,
                                            l
                                        if (!(t < o)) {
                                            if ((e = r.apply(s, u)) === n.promise()) {
                                                throw new TypeError('Thenable self-resolution')
                                            }
                                            l = e && ('object' == typeof e || 'function' == typeof e) && e.then,
                                                g(l) ? i ? l.call(e, a(o, n, I, i), a(o, n, W, i)) : (o++, l.call(e, a(o, n, I, i), a(o, n, W, i), a(o, n, I, n.notifyWith))) : (r !== I && (s = void 0, u = [
                                                    e
                                                ]), (i || n.resolveWith)(s, u))
                                        }
                                    },
                                    c = i ? l : function () {
                                        try {
                                            l()
                                        } catch (e) {
                                            w.Deferred.exceptionHook && w.Deferred.exceptionHook(e, c.stackTrace),
                                            t + 1 >= o && (r !== W && (s = void 0, u = [
                                                e
                                            ]), n.rejectWith(s, u))
                                        }
                                    }
                                t ? c() : (w.Deferred.getStackHook && (c.stackTrace = w.Deferred.getStackHook()), e.setTimeout(c))
                            }
                        }

                        return w.Deferred(function (e) {
                            n[0][3].add(a(0, e, g(i) ? i : I, e.notifyWith)),
                                n[1][3].add(a(0, e, g(t) ? t : I)),
                                n[2][3].add(a(0, e, g(r) ? r : W))
                        }).promise()
                    },
                    promise: function (e) {
                        return null != e ? w.extend(e, i) : i
                    }
                },
                o = {}
            return w.each(n, function (e, t) {
                var a = t[2],
                    s = t[5]
                i[t[1]] = a.add,
                s && a.add(function () {
                    r = s
                }, n[3 - e][2].disable, n[3 - e][3].disable, n[0][2].lock, n[0][3].lock),
                    a.add(t[3].fire),
                    o[t[0]] = function () {
                        return o[t[0] + 'With'](this === o ? void 0 : this, arguments),
                            this
                    },
                    o[t[0] + 'With'] = a.fireWith
            }),
                i.promise(o),
            t && t.call(o, o),
                o
        },
        when: function (e) {
            var t = arguments.length,
                n = t,
                r = Array(n),
                i = o.call(arguments),
                a = w.Deferred(),
                s = function (e) {
                    return function (n) {
                        r[e] = this,
                            i[e] = arguments.length > 1 ? o.call(arguments) : n,
                        --t || a.resolveWith(r, i)
                    }
                }
            if (t <= 1 && ($(e, a.done(s(n)).resolve, a.reject, !t), 'pending' === a.state() || g(i[n] && i[n].then))) {
                return a.then()
            }
            while (n--) {
                $(i[n], s(n), a.reject)
            }
            return a.promise()
        }
    })
    var B = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/
    w.Deferred.exceptionHook = function (t, n) {
        e.console && e.console.warn && t && B.test(t.name) && e.console.warn('jQuery.Deferred exception: ' + t.message, t.stack, n)
    },
        w.readyException = function (t) {
            e.setTimeout(function () {
                throw t
            })
        }
    var F = w.Deferred()
    w.fn.ready = function (e) {
        return F.then(e) ['catch'](function (e) {
            w.readyException(e)
        }),
            this
    },
        w.extend({
            isReady: !1,
            readyWait: 1,
            ready: function (e) {
                (!0 === e ? --w.readyWait : w.isReady) || (w.isReady = !0, !0 !== e && --w.readyWait > 0 || F.resolveWith(r, [
                    w
                ]))
            }
        }),
        w.ready.then = F.then

    function _() {
        r.removeEventListener('DOMContentLoaded', _),
            e.removeEventListener('load', _),
            w.ready()
    }

    'complete' === r.readyState || 'loading' !== r.readyState && !r.documentElement.doScroll ? e.setTimeout(w.ready) : (r.addEventListener('DOMContentLoaded', _), e.addEventListener('load', _))
    var z = function (e, t, n, r, i, o, a) {
            var s = 0,
                u = e.length,
                l = null == n
            if ('object' === x(n)) {
                i = !0
                for (s in n) {
                    z(e, t, s, n[s], !0, o, a)
                }
            } else {
                if (void 0 !== r && (i = !0, g(r) || (a = !0), l && (a ? (t.call(e, r), t = null) : (l = t, t = function (e, t, n) {
                    return l.call(w(e), n)
                })), t)) {
                    for (; s < u; s++) {
                        t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n)))
                    }
                }
            }
            return i ? e : l ? t.call(e) : u ? t(e[0], n) : o
        },
        X = /^-ms-/,
        U = /-([a-z])/g

    function V(e, t) {
        return t.toUpperCase()
    }

    function G(e) {
        return e.replace(X, 'ms-').replace(U, V)
    }

    var Y = function (e) {
        return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
    }

    function Q() {
        this.expando = w.expando + Q.uid++
    }

    Q.uid = 1,
        Q.prototype = {
            cache: function (e) {
                var t = e[this.expando]
                return t || (t = {}, Y(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                    value: t,
                    configurable: !0
                }))),
                    t
            },
            set: function (e, t, n) {
                var r,
                    i = this.cache(e)
                if ('string' == typeof t) {
                    i[G(t)] = n
                } else {
                    for (r in t) {
                        i[G(r)] = t[r]
                    }
                }
                return i
            },
            get: function (e, t) {
                return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][G(t)]
            },
            access: function (e, t, n) {
                return void 0 === t || t && 'string' == typeof t && void 0 === n ? this.get(e, t) : (this.set(e, t, n), void 0 !== n ? n : t)
            },
            remove: function (e, t) {
                var n,
                    r = e[this.expando]
                if (void 0 !== r) {
                    if (void 0 !== t) {
                        n = (t = Array.isArray(t) ? t.map(G) : (t = G(t)) in r ? [
                            t
                        ] : t.match(M) || []).length
                        while (n--) {
                            delete r[t[n]]
                        }
                    }
                    (void 0 === t || w.isEmptyObject(r)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
                }
            },
            hasData: function (e) {
                var t = e[this.expando]
                return void 0 !== t && !w.isEmptyObject(t)
            }
        }
    var J = new Q,
        K = new Q,
        Z = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        ee = /[A-Z]/g

    function te(e) {
        return 'true' === e || 'false' !== e && ('null' === e ? null : e === +e + '' ? +e : Z.test(e) ? JSON.parse(e) : e)
    }

    function ne(e, t, n) {
        var r
        if (void 0 === n && 1 === e.nodeType) {
            if (r = 'data-' + t.replace(ee, '-$&').toLowerCase(), 'string' == typeof (n = e.getAttribute(r))) {
                try {
                    n = te(n)
                } catch (e) {
                }
                K.set(e, t, n)
            } else {
                n = void 0
            }
        }
        return n
    }

    w.extend({
        hasData: function (e) {
            return K.hasData(e) || J.hasData(e)
        },
        data: function (e, t, n) {
            return K.access(e, t, n)
        },
        removeData: function (e, t) {
            K.remove(e, t)
        },
        _data: function (e, t, n) {
            return J.access(e, t, n)
        },
        _removeData: function (e, t) {
            J.remove(e, t)
        }
    }),
        w.fn.extend({
            data: function (e, t) {
                var n,
                    r,
                    i,
                    o = this[0],
                    a = o && o.attributes
                if (void 0 === e) {
                    if (this.length && (i = K.get(o), 1 === o.nodeType && !J.get(o, 'hasDataAttrs'))) {
                        n = a.length
                        while (n--) {
                            a[n] && 0 === (r = a[n].name).indexOf('data-') && (r = G(r.slice(5)), ne(o, r, i[r]))
                        }
                        J.set(o, 'hasDataAttrs', !0)
                    }
                    return i
                }
                return 'object' == typeof e ? this.each(function () {
                    K.set(this, e)
                }) : z(this, function (t) {
                    var n
                    if (o && void 0 === t) {
                        if (void 0 !== (n = K.get(o, e))) {
                            return n
                        }
                        if (void 0 !== (n = ne(o, e))) {
                            return n
                        }
                    } else {
                        this.each(function () {
                            K.set(this, e, t)
                        })
                    }
                }, null, t, arguments.length > 1, null, !0)
            },
            removeData: function (e) {
                return this.each(function () {
                    K.remove(this, e)
                })
            }
        }),
        w.extend({
            queue: function (e, t, n) {
                var r
                if (e) {
                    return t = (t || 'fx') + 'queue',
                        r = J.get(e, t),
                    n && (!r || Array.isArray(n) ? r = J.access(e, t, w.makeArray(n)) : r.push(n)),
                    r || []
                }
            },
            dequeue: function (e, t) {
                t = t || 'fx'
                var n = w.queue(e, t),
                    r = n.length,
                    i = n.shift(),
                    o = w._queueHooks(e, t),
                    a = function () {
                        w.dequeue(e, t)
                    }
                'inprogress' === i && (i = n.shift(), r--),
                i && ('fx' === t && n.unshift('inprogress'), delete o.stop, i.call(e, a, o)),
                !r && o && o.empty.fire()
            },
            _queueHooks: function (e, t) {
                var n = t + 'queueHooks'
                return J.get(e, n) || J.access(e, n, {
                    empty: w.Callbacks('once memory').add(function () {
                        J.remove(e, [
                            t + 'queue',
                            n
                        ])
                    })
                })
            }
        }),
        w.fn.extend({
            queue: function (e, t) {
                var n = 2
                return 'string' != typeof e && (t = e, e = 'fx', n--),
                    arguments.length < n ? w.queue(this[0], e) : void 0 === t ? this : this.each(function () {
                        var n = w.queue(this, e, t)
                        w._queueHooks(this, e),
                        'fx' === e && 'inprogress' !== n[0] && w.dequeue(this, e)
                    })
            },
            dequeue: function (e) {
                return this.each(function () {
                    w.dequeue(this, e)
                })
            },
            clearQueue: function (e) {
                return this.queue(e || 'fx', [])
            },
            promise: function (e, t) {
                var n,
                    r = 1,
                    i = w.Deferred(),
                    o = this,
                    a = this.length,
                    s = function () {
                        --r || i.resolveWith(o, [
                            o
                        ])
                    }
                'string' != typeof e && (t = e, e = void 0),
                    e = e || 'fx'
                while (a--) {
                    (n = J.get(o[a], e + 'queueHooks')) && n.empty && (r++, n.empty.add(s))
                }
                return s(),
                    i.promise(t)
            }
        })
    var re = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        ie = new RegExp('^(?:([+-])=|)(' + re + ')([a-z%]*)$', 'i'),
        oe = [
            'Top',
            'Right',
            'Bottom',
            'Left'
        ],
        ae = function (e, t) {
            return 'none' === (e = t || e).style.display || '' === e.style.display && w.contains(e.ownerDocument, e) && 'none' === w.css(e, 'display')
        },
        se = function (e, t, n, r) {
            var i,
                o,
                a = {}
            for (o in t) {
                a[o] = e.style[o],
                    e.style[o] = t[o]
            }
            i = n.apply(e, r || [])
            for (o in t) {
                e.style[o] = a[o]
            }
            return i
        }

    function ue(e, t, n, r) {
        var i,
            o,
            a = 20,
            s = r ? function () {
                    return r.cur()
                }
                : function () {
                    return w.css(e, t, '')
                },
            u = s(),
            l = n && n[3] || (w.cssNumber[t] ? '' : 'px'),
            c = (w.cssNumber[t] || 'px' !== l && +u) && ie.exec(w.css(e, t))
        if (c && c[3] !== l) {
            u /= 2,
                l = l || c[3],
                c = +u || 1
            while (a--) {
                w.style(e, t, c + l),
                (1 - o) * (1 - (o = s() / u || 0.5)) <= 0 && (a = 0),
                    c /= o
            }
            c *= 2,
                w.style(e, t, c + l),
                n = n || []
        }
        return n && (c = +c || +u || 0, i = n[1] ? c + (n[1] + 1) * n[2] : +n[2], r && (r.unit = l, r.start = c, r.end = i)),
            i
    }

    var le = {}

    function ce(e) {
        var t,
            n = e.ownerDocument,
            r = e.nodeName,
            i = le[r]
        return i || (t = n.body.appendChild(n.createElement(r)), i = w.css(t, 'display'), t.parentNode.removeChild(t), 'none' === i && (i = 'block'), le[r] = i, i)
    }

    function fe(e, t) {
        for (var n, r, i = [], o = 0, a = e.length; o < a; o++) {
            (r = e[o]).style && (n = r.style.display, t ? ('none' === n && (i[o] = J.get(r, 'display') || null, i[o] || (r.style.display = '')), '' === r.style.display && ae(r) && (i[o] = ce(r))) : 'none' !== n && (i[o] = 'none', J.set(r, 'display', n)))
        }
        for (o = 0; o < a; o++) {
            null != i[o] && (e[o].style.display = i[o])
        }
        return e
    }

    w.fn.extend({
        show: function () {
            return fe(this, !0)
        },
        hide: function () {
            return fe(this)
        },
        toggle: function (e) {
            return 'boolean' == typeof e ? e ? this.show() : this.hide() : this.each(function () {
                ae(this) ? w(this).show() : w(this).hide()
            })
        }
    })
    var pe = /^(?:checkbox|radio)$/i,
        de = /<([a-z][^\/\0>\x20\t\r\n\f]+)/i,
        he = /^$|^module$|\/(?:java|ecma)script/i,
        ge = {
            option: [
                1,
                '<select multiple=\'multiple\'>',
                '</select>'
            ],
            thead: [
                1,
                '<table>',
                '</table>'
            ],
            col: [
                2,
                '<table><colgroup>',
                '</colgroup></table>'
            ],
            tr: [
                2,
                '<table><tbody>',
                '</tbody></table>'
            ],
            td: [
                3,
                '<table><tbody><tr>',
                '</tr></tbody></table>'
            ],
            _default: [
                0,
                '',
                ''
            ]
        }
    ge.optgroup = ge.option,
        ge.tbody = ge.tfoot = ge.colgroup = ge.caption = ge.thead,
        ge.th = ge.td

    function ye(e, t) {
        var n
        return n = 'undefined' != typeof e.getElementsByTagName ? e.getElementsByTagName(t || '*') : 'undefined' != typeof e.querySelectorAll ? e.querySelectorAll(t || '*') : [],
            void 0 === t || t && N(e, t) ? w.merge([e], n) : n
    }

    function ve(e, t) {
        for (var n = 0, r = e.length; n < r; n++) {
            J.set(e[n], 'globalEval', !t || J.get(t[n], 'globalEval'))
        }
    }

    var me = /<|&#?\w+;/

    function xe(e, t, n, r, i) {
        for (var o, a, s, u, l, c, f = t.createDocumentFragment(), p = [], d = 0, h = e.length; d < h; d++) {
            if ((o = e[d]) || 0 === o) {
                if ('object' === x(o)) {
                    w.merge(p, o.nodeType ? [
                        o
                    ] : o)
                } else {
                    if (me.test(o)) {
                        a = a || f.appendChild(t.createElement('div')),
                            s = (de.exec(o) || [
                                '',
                                ''
                            ]) [1].toLowerCase(),
                            u = ge[s] || ge._default,
                            a.innerHTML = u[1] + w.htmlPrefilter(o) + u[2],
                            c = u[0]
                        while (c--) {
                            a = a.lastChild
                        }
                        w.merge(p, a.childNodes),
                            (a = f.firstChild).textContent = ''
                    } else {
                        p.push(t.createTextNode(o))
                    }
                }
            }
        }
        f.textContent = '',
            d = 0
        while (o = p[d++]) {
            if (r && w.inArray(o, r) > -1) {
                i && i.push(o)
            } else {
                if (l = w.contains(o.ownerDocument, o), a = ye(f.appendChild(o), 'script'), l && ve(a), n) {
                    c = 0
                    while (o = a[c++]) {
                        he.test(o.type || '') && n.push(o)
                    }
                }
            }
        }
        return f
    }

    !function () {
        var e = r.createDocumentFragment().appendChild(r.createElement('div')),
            t = r.createElement('input')
        t.setAttribute('type', 'radio'),
            t.setAttribute('checked', 'checked'),
            t.setAttribute('name', 't'),
            e.appendChild(t),
            h.checkClone = e.cloneNode(!0).cloneNode(!0).lastChild.checked,
            e.innerHTML = '<textarea>x</textarea>',
            h.noCloneChecked = !!e.cloneNode(!0).lastChild.defaultValue
    }()
    var be = r.documentElement,
        we = /^key/,
        Te = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
        Ce = /^([^.]*)(?:\.(.+)|)/

    function Ee() {
        return !0
    }

    function ke() {
        return !1
    }

    function Se() {
        try {
            return r.activeElement
        } catch (e) {
        }
    }

    function De(e, t, n, r, i, o) {
        var a,
            s
        if ('object' == typeof t) {
            'string' != typeof n && (r = r || n, n = void 0)
            for (s in t) {
                De(e, s, n, r, t[s], o)
            }
            return e
        }
        if (null == r && null == i ? (i = n, r = n = void 0) : null == i && ('string' == typeof n ? (i = r, r = void 0) : (i = r, r = n, n = void 0)), !1 === i) {
            i = ke
        } else {
            if (!i) {
                return e
            }
        }
        return 1 === o && (a = i, (i = function (e) {
            return w().off(e),
                a.apply(this, arguments)
        }).guid = a.guid || (a.guid = w.guid++)),
            e.each(function () {
                w.event.add(this, t, i, r, n)
            })
    }

    w.event = {
        global: {},
        add: function (e, t, n, r, i) {
            var o,
                a,
                s,
                u,
                l,
                c,
                f,
                p,
                d,
                h,
                g,
                y = J.get(e)
            if (y) {
                n.handler && (n = (o = n).handler, i = o.selector),
                i && w.find.matchesSelector(be, i),
                n.guid || (n.guid = w.guid++),
                (u = y.events) || (u = y.events = {}),
                (a = y.handle) || (a = y.handle = function (t) {
                    return 'undefined' != typeof w && w.event.triggered !== t.type ? w.event.dispatch.apply(e, arguments) : void 0
                }),
                    l = (t = (t || '').match(M) || [
                        ''
                    ]).length
                while (l--) {
                    d = g = (s = Ce.exec(t[l]) || []) [1],
                        h = (s[2] || '').split('.').sort(),
                    d && (f = w.event.special[d] || {}, d = (i ? f.delegateType : f.bindType) || d, f = w.event.special[d] || {}, c = w.extend({
                        type: d,
                        origType: g,
                        data: r,
                        handler: n,
                        guid: n.guid,
                        selector: i,
                        needsContext: i && w.expr.match.needsContext.test(i),
                        namespace: h.join('.')
                    }, o), (p = u[d]) || ((p = u[d] = []).delegateCount = 0, f.setup && !1 !== f.setup.call(e, r, h, a) || e.addEventListener && e.addEventListener(d, a)), f.add && (f.add.call(e, c), c.handler.guid || (c.handler.guid = n.guid)), i ? p.splice(p.delegateCount++, 0, c) : p.push(c), w.event.global[d] = !0)
                }
            }
        },
        remove: function (e, t, n, r, i) {
            var o,
                a,
                s,
                u,
                l,
                c,
                f,
                p,
                d,
                h,
                g,
                y = J.hasData(e) && J.get(e)
            if (y && (u = y.events)) {
                l = (t = (t || '').match(M) || [
                    ''
                ]).length
                while (l--) {
                    if (s = Ce.exec(t[l]) || [], d = g = s[1], h = (s[2] || '').split('.').sort(), d) {
                        f = w.event.special[d] || {},
                            p = u[d = (r ? f.delegateType : f.bindType) || d] || [],
                            s = s[2] && new RegExp('(^|\\.)' + h.join('\\.(?:.*\\.|)') + '(\\.|$)'),
                            a = o = p.length
                        while (o--) {
                            c = p[o],
                            !i && g !== c.origType || n && n.guid !== c.guid || s && !s.test(c.namespace) || r && r !== c.selector && ('**' !== r || !c.selector) || (p.splice(o, 1), c.selector && p.delegateCount--, f.remove && f.remove.call(e, c))
                        }
                        a && !p.length && (f.teardown && !1 !== f.teardown.call(e, h, y.handle) || w.removeEvent(e, d, y.handle), delete u[d])
                    } else {
                        for (d in u) {
                            w.event.remove(e, d + t[l], n, r, !0)
                        }
                    }
                }
                w.isEmptyObject(u) && J.remove(e, 'handle events')
            }
        },
        dispatch: function (e) {
            var t = w.event.fix(e),
                n,
                r,
                i,
                o,
                a,
                s,
                u = new Array(arguments.length),
                l = (J.get(this, 'events') || {}) [t.type] || [],
                c = w.event.special[t.type] || {}
            for (u[0] = t, n = 1; n < arguments.length; n++) {
                u[n] = arguments[n]
            }
            if (t.delegateTarget = this, !c.preDispatch || !1 !== c.preDispatch.call(this, t)) {
                s = w.event.handlers.call(this, t, l),
                    n = 0
                while ((o = s[n++]) && !t.isPropagationStopped()) {
                    t.currentTarget = o.elem,
                        r = 0
                    while ((a = o.handlers[r++]) && !t.isImmediatePropagationStopped()) {
                        t.rnamespace && !t.rnamespace.test(a.namespace) || (t.handleObj = a, t.data = a.data, void 0 !== (i = ((w.event.special[a.origType] || {}).handle || a.handler).apply(o.elem, u)) && !1 === (t.result = i) && (t.preventDefault(), t.stopPropagation()))
                    }
                }
                return c.postDispatch && c.postDispatch.call(this, t),
                    t.result
            }
        },
        handlers: function (e, t) {
            var n,
                r,
                i,
                o,
                a,
                s = [],
                u = t.delegateCount,
                l = e.target
            if (u && l.nodeType && !('click' === e.type && e.button >= 1)) {
                for (; l !== this; l = l.parentNode || this) {
                    if (1 === l.nodeType && ('click' !== e.type || !0 !== l.disabled)) {
                        for (o = [], a = {}, n = 0; n < u; n++) {
                            void 0 === a[i = (r = t[n]).selector + ' '] && (a[i] = r.needsContext ? w(i, this).index(l) > -1 : w.find(i, this, null, [
                                l
                            ]).length),
                            a[i] && o.push(r)
                        }
                        o.length && s.push({
                            elem: l,
                            handlers: o
                        })
                    }
                }
            }
            return l = this,
            u < t.length && s.push({
                elem: l,
                handlers: t.slice(u)
            }),
                s
        },
        addProp: function (e, t) {
            Object.defineProperty(w.Event.prototype, e, {
                enumerable: !0,
                configurable: !0,
                get: g(t) ? function () {
                        if (this.originalEvent) {
                            return t(this.originalEvent)
                        }
                    }
                    : function () {
                        if (this.originalEvent) {
                            return this.originalEvent[e]
                        }
                    },
                set: function (t) {
                    Object.defineProperty(this, e, {
                        enumerable: !0,
                        configurable: !0,
                        writable: !0,
                        value: t
                    })
                }
            })
        },
        fix: function (e) {
            return e[w.expando] ? e : new w.Event(e)
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function () {
                    if (this !== Se() && this.focus) {
                        return this.focus(),
                            !1
                    }
                },
                delegateType: 'focusin'
            },
            blur: {
                trigger: function () {
                    if (this === Se() && this.blur) {
                        return this.blur(),
                            !1
                    }
                },
                delegateType: 'focusout'
            },
            click: {
                trigger: function () {
                    if ('checkbox' === this.type && this.click && N(this, 'input')) {
                        return this.click(),
                            !1
                    }
                },
                _default: function (e) {
                    return N(e.target, 'a')
                }
            },
            beforeunload: {
                postDispatch: function (e) {
                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                }
            }
        }
    },
        w.removeEvent = function (e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n)
        },
        w.Event = function (e, t) {
            if (!(this instanceof w.Event)) {
                return new w.Event(e, t)
            }
            e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? Ee : ke, this.target = e.target && 3 === e.target.nodeType ? e.target.parentNode : e.target, this.currentTarget = e.currentTarget, this.relatedTarget = e.relatedTarget) : this.type = e,
            t && w.extend(this, t),
                this.timeStamp = e && e.timeStamp || Date.now(),
                this[w.expando] = !0
        },
        w.Event.prototype = {
            constructor: w.Event,
            isDefaultPrevented: ke,
            isPropagationStopped: ke,
            isImmediatePropagationStopped: ke,
            isSimulated: !1,
            preventDefault: function () {
                var e = this.originalEvent
                this.isDefaultPrevented = Ee,
                e && !this.isSimulated && e.preventDefault()
            },
            stopPropagation: function () {
                var e = this.originalEvent
                this.isPropagationStopped = Ee,
                e && !this.isSimulated && e.stopPropagation()
            },
            stopImmediatePropagation: function () {
                var e = this.originalEvent
                this.isImmediatePropagationStopped = Ee,
                e && !this.isSimulated && e.stopImmediatePropagation(),
                    this.stopPropagation()
            }
        },
        w.each({
            altKey: !0,
            bubbles: !0,
            cancelable: !0,
            changedTouches: !0,
            ctrlKey: !0,
            detail: !0,
            eventPhase: !0,
            metaKey: !0,
            pageX: !0,
            pageY: !0,
            shiftKey: !0,
            view: !0,
            'char': !0,
            charCode: !0,
            key: !0,
            keyCode: !0,
            button: !0,
            buttons: !0,
            clientX: !0,
            clientY: !0,
            offsetX: !0,
            offsetY: !0,
            pointerId: !0,
            pointerType: !0,
            screenX: !0,
            screenY: !0,
            targetTouches: !0,
            toElement: !0,
            touches: !0,
            which: function (e) {
                var t = e.button
                return null == e.which && we.test(e.type) ? null != e.charCode ? e.charCode : e.keyCode : !e.which && void 0 !== t && Te.test(e.type) ? 1 & t ? 1 : 2 & t ? 3 : 4 & t ? 2 : 0 : e.which
            }
        }, w.event.addProp),
        w.each({
            mouseenter: 'mouseover',
            mouseleave: 'mouseout',
            pointerenter: 'pointerover',
            pointerleave: 'pointerout'
        }, function (e, t) {
            w.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function (e) {
                    var n,
                        r = this,
                        i = e.relatedTarget,
                        o = e.handleObj
                    return i && (i === r || w.contains(r, i)) || (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t),
                        n
                }
            }
        }),
        w.fn.extend({
            on: function (e, t, n, r) {
                return De(this, e, t, n, r)
            },
            one: function (e, t, n, r) {
                return De(this, e, t, n, r, 1)
            },
            off: function (e, t, n) {
                var r,
                    i
                if (e && e.preventDefault && e.handleObj) {
                    return r = e.handleObj,
                        w(e.delegateTarget).off(r.namespace ? r.origType + '.' + r.namespace : r.origType, r.selector, r.handler),
                        this
                }
                if ('object' == typeof e) {
                    for (i in e) {
                        this.off(i, t, e[i])
                    }
                    return this
                }
                return !1 !== t && 'function' != typeof t || (n = t, t = void 0),
                !1 === n && (n = ke),
                    this.each(function () {
                        w.event.remove(this, e, n, t)
                    })
            }
        })
    var Ne = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
        Ae = /<script|<style|<link/i,
        je = /checked\s*(?:[^=]|=\s*.checked.)/i,
        qe = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g

    function Le(e, t) {
        return N(e, 'table') && N(11 !== t.nodeType ? t : t.firstChild, 'tr') ? w(e).children('tbody') [0] || e : e
    }

    function He(e) {
        return e.type = (null !== e.getAttribute('type')) + '/' + e.type,
            e
    }

    function Oe(e) {
        return 'true/' === (e.type || '').slice(0, 5) ? e.type = e.type.slice(5) : e.removeAttribute('type'),
            e
    }

    function Pe(e, t) {
        var n,
            r,
            i,
            o,
            a,
            s,
            u,
            l
        if (1 === t.nodeType) {
            if (J.hasData(e) && (o = J.access(e), a = J.set(t, o), l = o.events)) {
                delete a.handle,
                    a.events = {}
                for (i in l) {
                    for (n = 0, r = l[i].length; n < r; n++) {
                        w.event.add(t, i, l[i][n])
                    }
                }
            }
            K.hasData(e) && (s = K.access(e), u = w.extend({}, s), K.set(t, u))
        }
    }

    function Me(e, t) {
        var n = t.nodeName.toLowerCase()
        'input' === n && pe.test(e.type) ? t.checked = e.checked : 'input' !== n && 'textarea' !== n || (t.defaultValue = e.defaultValue)
    }

    function Re(e, t, n, r) {
        t = a.apply([], t)
        var i,
            o,
            s,
            u,
            l,
            c,
            f = 0,
            p = e.length,
            d = p - 1,
            y = t[0],
            v = g(y)
        if (v || p > 1 && 'string' == typeof y && !h.checkClone && je.test(y)) {
            return e.each(function (i) {
                var o = e.eq(i)
                v && (t[0] = y.call(this, i, o.html())),
                    Re(o, t, n, r)
            })
        }
        if (p && (i = xe(t, e[0].ownerDocument, !1, e, r), o = i.firstChild, 1 === i.childNodes.length && (i = o), o || r)) {
            for (u = (s = w.map(ye(i, 'script'), He)).length; f < p; f++) {
                l = i,
                f !== d && (l = w.clone(l, !0, !0), u && w.merge(s, ye(l, 'script'))),
                    n.call(e[f], l, f)
            }
            if (u) {
                for (c = s[s.length - 1].ownerDocument, w.map(s, Oe), f = 0; f < u; f++) {
                    l = s[f],
                    he.test(l.type || '') && !J.access(l, 'globalEval') && w.contains(c, l) && (l.src && 'module' !== (l.type || '').toLowerCase() ? w._evalUrl && w._evalUrl(l.src) : m(l.textContent.replace(qe, ''), c, l))
                }
            }
        }
        return e
    }

    function Ie(e, t, n) {
        for (var r, i = t ? w.filter(t, e) : e, o = 0; null != (r = i[o]); o++) {
            n || 1 !== r.nodeType || w.cleanData(ye(r)),
            r.parentNode && (n && w.contains(r.ownerDocument, r) && ve(ye(r, 'script')), r.parentNode.removeChild(r))
        }
        return e
    }

    w.extend({
        htmlPrefilter: function (e) {
            return e.replace(Ne, '<$1></$2>')
        },
        clone: function (e, t, n) {
            var r,
                i,
                o,
                a,
                s = e.cloneNode(!0),
                u = w.contains(e.ownerDocument, e)
            if (!(h.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || w.isXMLDoc(e))) {
                for (a = ye(s), r = 0, i = (o = ye(e)).length; r < i; r++) {
                    Me(o[r], a[r])
                }
            }
            if (t) {
                if (n) {
                    for (o = o || ye(e), a = a || ye(s), r = 0, i = o.length; r < i; r++) {
                        Pe(o[r], a[r])
                    }
                } else {
                    Pe(e, s)
                }
            }
            return (a = ye(s, 'script')).length > 0 && ve(a, !u && ye(e, 'script')),
                s
        },
        cleanData: function (e) {
            for (var t, n, r, i = w.event.special, o = 0; void 0 !== (n = e[o]); o++) {
                if (Y(n)) {
                    if (t = n[J.expando]) {
                        if (t.events) {
                            for (r in t.events) {
                                i[r] ? w.event.remove(n, r) : w.removeEvent(n, r, t.handle)
                            }
                        }
                        n[J.expando] = void 0
                    }
                    n[K.expando] && (n[K.expando] = void 0)
                }
            }
        }
    }),
        w.fn.extend({
            detach: function (e) {
                return Ie(this, e, !0)
            },
            remove: function (e) {
                return Ie(this, e)
            },
            text: function (e) {
                return z(this, function (e) {
                    return void 0 === e ? w.text(this) : this.empty().each(function () {
                        1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e)
                    })
                }, null, e, arguments.length)
            },
            append: function () {
                return Re(this, arguments, function (e) {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || Le(this, e).appendChild(e)
                })
            },
            prepend: function () {
                return Re(this, arguments, function (e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = Le(this, e)
                        t.insertBefore(e, t.firstChild)
                    }
                })
            },
            before: function () {
                return Re(this, arguments, function (e) {
                    this.parentNode && this.parentNode.insertBefore(e, this)
                })
            },
            after: function () {
                return Re(this, arguments, function (e) {
                    this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                })
            },
            empty: function () {
                for (var e, t = 0; null != (e = this[t]); t++) {
                    1 === e.nodeType && (w.cleanData(ye(e, !1)), e.textContent = '')
                }
                return this
            },
            clone: function (e, t) {
                return e = null != e && e,
                    t = null == t ? e : t,
                    this.map(function () {
                        return w.clone(this, e, t)
                    })
            },
            html: function (e) {
                return z(this, function (e) {
                    var t = this[0] || {},
                        n = 0,
                        r = this.length
                    if (void 0 === e && 1 === t.nodeType) {
                        return t.innerHTML
                    }
                    if ('string' == typeof e && !Ae.test(e) && !ge[(de.exec(e) || [
                        '',
                        ''
                    ]) [1].toLowerCase()]) {
                        e = w.htmlPrefilter(e)
                        try {
                            for (; n < r; n++) {
                                1 === (t = this[n] || {}).nodeType && (w.cleanData(ye(t, !1)), t.innerHTML = e)
                            }
                            t = 0
                        } catch (e) {
                        }
                    }
                    t && this.empty().append(e)
                }, null, e, arguments.length)
            },
            replaceWith: function () {
                var e = []
                return Re(this, arguments, function (t) {
                    var n = this.parentNode
                    w.inArray(this, e) < 0 && (w.cleanData(ye(this)), n && n.replaceChild(t, this))
                }, e)
            }
        }),
        w.each({
            appendTo: 'append',
            prependTo: 'prepend',
            insertBefore: 'before',
            insertAfter: 'after',
            replaceAll: 'replaceWith'
        }, function (e, t) {
            w.fn[e] = function (e) {
                for (var n, r = [], i = w(e), o = i.length - 1, a = 0; a <= o; a++) {
                    n = a === o ? this : this.clone(!0),
                        w(i[a]) [t](n),
                        s.apply(r, n.get())
                }
                return this.pushStack(r)
            }
        })
    var We = new RegExp('^(' + re + ')(?!px)[a-z%]+$', 'i'),
        $e = function (t) {
            var n = t.ownerDocument.defaultView
            return n && n.opener || (n = e),
                n.getComputedStyle(t)
        },
        Be = new RegExp(oe.join('|'), 'i')
    !function () {
        function t() {
            if (c) {
                l.style.cssText = 'position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0',
                    c.style.cssText = 'position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%',
                    be.appendChild(l).appendChild(c)
                var t = e.getComputedStyle(c)
                i = '1%' !== t.top,
                    u = 12 === n(t.marginLeft),
                    c.style.right = '60%',
                    s = 36 === n(t.right),
                    o = 36 === n(t.width),
                    c.style.position = 'absolute',
                    a = 36 === c.offsetWidth || 'absolute',
                    be.removeChild(l),
                    c = null
            }
        }

        function n(e) {
            return Math.round(parseFloat(e))
        }

        var i,
            o,
            a,
            s,
            u,
            l = r.createElement('div'),
            c = r.createElement('div')
        c.style && (c.style.backgroundClip = 'content-box', c.cloneNode(!0).style.backgroundClip = '', h.clearCloneStyle = 'content-box' === c.style.backgroundClip, w.extend(h, {
            boxSizingReliable: function () {
                return t(),
                    o
            },
            pixelBoxStyles: function () {
                return t(),
                    s
            },
            pixelPosition: function () {
                return t(),
                    i
            },
            reliableMarginLeft: function () {
                return t(),
                    u
            },
            scrollboxSize: function () {
                return t(),
                    a
            }
        }))
    }()

    function Fe(e, t, n) {
        var r,
            i,
            o,
            a,
            s = e.style
        return (n = n || $e(e)) && ('' !== (a = n.getPropertyValue(t) || n[t]) || w.contains(e.ownerDocument, e) || (a = w.style(e, t)), !h.pixelBoxStyles() && We.test(a) && Be.test(t) && (r = s.width, i = s.minWidth, o = s.maxWidth, s.minWidth = s.maxWidth = s.width = a, a = n.width, s.width = r, s.minWidth = i, s.maxWidth = o)),
            void 0 !== a ? a + '' : a
    }

    function _e(e, t) {
        return {
            get: function () {
                if (!e()) {
                    return (this.get = t).apply(this, arguments)
                }
                delete this.get
            }
        }
    }

    var ze = /^(none|table(?!-c[ea]).+)/,
        Xe = /^--/,
        Ue = {
            position: 'absolute',
            visibility: 'hidden',
            display: 'block'
        },
        Ve = {
            letterSpacing: '0',
            fontWeight: '400'
        },
        Ge = [
            'Webkit',
            'Moz',
            'ms'
        ],
        Ye = r.createElement('div').style

    function Qe(e) {
        if (e in Ye) {
            return e
        }
        var t = e[0].toUpperCase() + e.slice(1),
            n = Ge.length
        while (n--) {
            if ((e = Ge[n] + t) in Ye) {
                return e
            }
        }
    }

    function Je(e) {
        var t = w.cssProps[e]
        return t || (t = w.cssProps[e] = Qe(e) || e),
            t
    }

    function Ke(e, t, n) {
        var r = ie.exec(t)
        return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || 'px') : t
    }

    function Ze(e, t, n, r, i, o) {
        var a = 'width' === t ? 1 : 0,
            s = 0,
            u = 0
        if (n === (r ? 'border' : 'content')) {
            return 0
        }
        for (; a < 4; a += 2) {
            'margin' === n && (u += w.css(e, n + oe[a], !0, i)),
                r ? ('content' === n && (u -= w.css(e, 'padding' + oe[a], !0, i)), 'margin' !== n && (u -= w.css(e, 'border' + oe[a] + 'Width', !0, i))) : (u += w.css(e, 'padding' + oe[a], !0, i), 'padding' !== n ? u += w.css(e, 'border' + oe[a] + 'Width', !0, i) : s += w.css(e, 'border' + oe[a] + 'Width', !0, i))
        }
        return !r && o >= 0 && (u += Math.max(0, Math.ceil(e['offset' + t[0].toUpperCase() + t.slice(1)] - o - u - s - 0.5))),
            u
    }

    function et(e, t, n) {
        var r = $e(e),
            i = Fe(e, t, r),
            o = 'border-box' === w.css(e, 'boxSizing', !1, r),
            a = o
        if (We.test(i)) {
            if (!n) {
                return i
            }
            i = 'auto'
        }
        return a = a && (h.boxSizingReliable() || i === e.style[t]),
        ('auto' === i || !parseFloat(i) && 'inline' === w.css(e, 'display', !1, r)) && (i = e['offset' + t[0].toUpperCase() + t.slice(1)], a = !0),
        (i = parseFloat(i) || 0) + Ze(e, t, n || (o ? 'border' : 'content'), a, r, i) + 'px'
    }

    w.extend({
        cssHooks: {
            opacity: {
                get: function (e, t) {
                    if (t) {
                        var n = Fe(e, 'opacity')
                        return '' === n ? '1' : n
                    }
                }
            }
        },
        cssNumber: {
            animationIterationCount: !0,
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {},
        style: function (e, t, n, r) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var i,
                    o,
                    a,
                    s = G(t),
                    u = Xe.test(t),
                    l = e.style
                if (u || (t = Je(s)), a = w.cssHooks[t] || w.cssHooks[s], void 0 === n) {
                    return a && 'get' in a && void 0 !== (i = a.get(e, !1, r)) ? i : l[t]
                }
                'string' == (o = typeof n) && (i = ie.exec(n)) && i[1] && (n = ue(e, t, i), o = 'number'),
                null != n && n === n && ('number' === o && (n += i && i[3] || (w.cssNumber[s] ? '' : 'px')), h.clearCloneStyle || '' !== n || 0 !== t.indexOf('background') || (l[t] = 'inherit'), a && 'set' in a && void 0 === (n = a.set(e, n, r)) || (u ? l.setProperty(t, n) : l[t] = n))
            }
        },
        css: function (e, t, n, r) {
            var i,
                o,
                a,
                s = G(t)
            return Xe.test(t) || (t = Je(s)),
            (a = w.cssHooks[t] || w.cssHooks[s]) && 'get' in a && (i = a.get(e, !0, n)),
            void 0 === i && (i = Fe(e, t, r)),
            'normal' === i && t in Ve && (i = Ve[t]),
                '' === n || n ? (o = parseFloat(i), !0 === n || isFinite(o) ? o || 0 : i) : i
        }
    }),
        w.each(['height',
            'width'], function (e, t) {
            w.cssHooks[t] = {
                get: function (e, n, r) {
                    if (n) {
                        return !ze.test(w.css(e, 'display')) || e.getClientRects().length && e.getBoundingClientRect().width ? et(e, t, r) : se(e, Ue, function () {
                            return et(e, t, r)
                        })
                    }
                },
                set: function (e, n, r) {
                    var i,
                        o = $e(e),
                        a = 'border-box' === w.css(e, 'boxSizing', !1, o),
                        s = r && Ze(e, t, r, a, o)
                    return a && h.scrollboxSize() === o.position && (s -= Math.ceil(e['offset' + t[0].toUpperCase() + t.slice(1)] - parseFloat(o[t]) - Ze(e, t, 'border', !1, o) - 0.5)),
                    s && (i = ie.exec(n)) && 'px' !== (i[3] || 'px') && (e.style[t] = n, n = w.css(e, t)),
                        Ke(e, n, s)
                }
            }
        }),
        w.cssHooks.marginLeft = _e(h.reliableMarginLeft, function (e, t) {
            if (t) {
                return (parseFloat(Fe(e, 'marginLeft')) || e.getBoundingClientRect().left - se(e, {
                    marginLeft: 0
                }, function () {
                    return e.getBoundingClientRect().left
                })) + 'px'
            }
        }),
        w.each({
            margin: '',
            padding: '',
            border: 'Width'
        }, function (e, t) {
            w.cssHooks[e + t] = {
                expand: function (n) {
                    for (var r = 0, i = {}, o = 'string' == typeof n ? n.split(' ') : [
                        n
                    ]; r < 4; r++) {
                        i[e + oe[r] + t] = o[r] || o[r - 2] || o[0]
                    }
                    return i
                }
            },
            'margin' !== e && (w.cssHooks[e + t].set = Ke)
        }),
        w.fn.extend({
            css: function (e, t) {
                return z(this, function (e, t, n) {
                    var r,
                        i,
                        o = {},
                        a = 0
                    if (Array.isArray(t)) {
                        for (r = $e(e), i = t.length; a < i; a++) {
                            o[t[a]] = w.css(e, t[a], !1, r)
                        }
                        return o
                    }
                    return void 0 !== n ? w.style(e, t, n) : w.css(e, t)
                }, e, t, arguments.length > 1)
            }
        })

    function tt(e, t, n, r, i) {
        return new tt.prototype.init(e, t, n, r, i)
    }

    w.Tween = tt,
        tt.prototype = {
            constructor: tt,
            init: function (e, t, n, r, i, o) {
                this.elem = e,
                    this.prop = n,
                    this.easing = i || w.easing._default,
                    this.options = t,
                    this.start = this.now = this.cur(),
                    this.end = r,
                    this.unit = o || (w.cssNumber[n] ? '' : 'px')
            },
            cur: function () {
                var e = tt.propHooks[this.prop]
                return e && e.get ? e.get(this) : tt.propHooks._default.get(this)
            },
            run: function (e) {
                var t,
                    n = tt.propHooks[this.prop]
                return this.options.duration ? this.pos = t = w.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e,
                    this.now = (this.end - this.start) * t + this.start,
                this.options.step && this.options.step.call(this.elem, this.now, this),
                    n && n.set ? n.set(this) : tt.propHooks._default.set(this),
                    this
            }
        },
        tt.prototype.init.prototype = tt.prototype,
        tt.propHooks = {
            _default: {
                get: function (e) {
                    var t
                    return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = w.css(e.elem, e.prop, '')) && 'auto' !== t ? t : 0
                },
                set: function (e) {
                    w.fx.step[e.prop] ? w.fx.step[e.prop](e) : 1 !== e.elem.nodeType || null == e.elem.style[w.cssProps[e.prop]] && !w.cssHooks[e.prop] ? e.elem[e.prop] = e.now : w.style(e.elem, e.prop, e.now + e.unit)
                }
            }
        },
        tt.propHooks.scrollTop = tt.propHooks.scrollLeft = {
            set: function (e) {
                e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
            }
        },
        w.easing = {
            linear: function (e) {
                return e
            },
            swing: function (e) {
                return 0.5 - Math.cos(e * Math.PI) / 2
            },
            _default: 'swing'
        },
        w.fx = tt.prototype.init,
        w.fx.step = {}
    var nt,
        rt,
        it = /^(?:toggle|show|hide)$/,
        ot = /queueHooks$/

    function at() {
        rt && (!1 === r.hidden && e.requestAnimationFrame ? e.requestAnimationFrame(at) : e.setTimeout(at, w.fx.interval), w.fx.tick())
    }

    function st() {
        return e.setTimeout(function () {
            nt = void 0
        }),
            nt = Date.now()
    }

    function ut(e, t) {
        var n,
            r = 0,
            i = {
                height: e
            }
        for (t = t ? 1 : 0; r < 4; r += 2 - t) {
            i['margin' + (n = oe[r])] = i['padding' + n] = e
        }
        return t && (i.opacity = i.width = e),
            i
    }

    function lt(e, t, n) {
        for (var r, i = (pt.tweeners[t] || []).concat(pt.tweeners['*']), o = 0, a = i.length; o < a; o++) {
            if (r = i[o].call(n, t, e)) {
                return r
            }
        }
    }

    function ct(e, t, n) {
        var r,
            i,
            o,
            a,
            s,
            u,
            l,
            c,
            f = 'width' in t || 'height' in t,
            p = this,
            d = {},
            h = e.style,
            g = e.nodeType && ae(e),
            y = J.get(e, 'fxshow')
        n.queue || (null == (a = w._queueHooks(e, 'fx')).unqueued && (a.unqueued = 0, s = a.empty.fire, a.empty.fire = function () {
            a.unqueued || s()
        }), a.unqueued++, p.always(function () {
            p.always(function () {
                a.unqueued--,
                w.queue(e, 'fx').length || a.empty.fire()
            })
        }))
        for (r in t) {
            if (i = t[r], it.test(i)) {
                if (delete t[r], o = o || 'toggle' === i, i === (g ? 'hide' : 'show')) {
                    if ('show' !== i || !y || void 0 === y[r]) {
                        continue
                    }
                    g = !0
                }
                d[r] = y && y[r] || w.style(e, r)
            }
        }
        if ((u = !w.isEmptyObject(t)) || !w.isEmptyObject(d)) {
            f && 1 === e.nodeType && (n.overflow = [
                h.overflow,
                h.overflowX,
                h.overflowY
            ], null == (l = y && y.display) && (l = J.get(e, 'display')), 'none' === (c = w.css(e, 'display')) && (l ? c = l : (fe([e], !0), l = e.style.display || l, c = w.css(e, 'display'), fe([e]))), ('inline' === c || 'inline-block' === c && null != l) && 'none' === w.css(e, 'float') && (u || (p.done(function () {
                h.display = l
            }), null == l && (c = h.display, l = 'none' === c ? '' : c)), h.display = 'inline-block')),
            n.overflow && (h.overflow = 'hidden', p.always(function () {
                h.overflow = n.overflow[0],
                    h.overflowX = n.overflow[1],
                    h.overflowY = n.overflow[2]
            })),
                u = !1
            for (r in d) {
                u || (y ? 'hidden' in y && (g = y.hidden) : y = J.access(e, 'fxshow', {
                    display: l
                }), o && (y.hidden = !g), g && fe([e], !0), p.done(function () {
                    g || fe([e]),
                        J.remove(e, 'fxshow')
                    for (r in d) {
                        w.style(e, r, d[r])
                    }
                })),
                    u = lt(g ? y[r] : 0, r, p),
                r in y || (y[r] = u.start, g && (u.end = u.start, u.start = 0))
            }
        }
    }

    function ft(e, t) {
        var n,
            r,
            i,
            o,
            a
        for (n in e) {
            if (r = G(n), i = t[r], o = e[n], Array.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), (a = w.cssHooks[r]) && 'expand' in a) {
                o = a.expand(o),
                    delete e[r]
                for (n in o) {
                    n in e || (e[n] = o[n], t[n] = i)
                }
            } else {
                t[r] = i
            }
        }
    }

    function pt(e, t, n) {
        var r,
            i,
            o = 0,
            a = pt.prefilters.length,
            s = w.Deferred().always(function () {
                delete u.elem
            }),
            u = function () {
                if (i) {
                    return !1
                }
                for (var t = nt || st(), n = Math.max(0, l.startTime + l.duration - t), r = 1 - (n / l.duration || 0), o = 0, a = l.tweens.length; o < a; o++) {
                    l.tweens[o].run(r)
                }
                return s.notifyWith(e, [
                    l,
                    r,
                    n
                ]),
                    r < 1 && a ? n : (a || s.notifyWith(e, [
                        l,
                        1,
                        0
                    ]), s.resolveWith(e, [
                        l
                    ]), !1)
            },
            l = s.promise({
                elem: e,
                props: w.extend({}, t),
                opts: w.extend(!0, {
                    specialEasing: {},
                    easing: w.easing._default
                }, n),
                originalProperties: t,
                originalOptions: n,
                startTime: nt || st(),
                duration: n.duration,
                tweens: [],
                createTween: function (t, n) {
                    var r = w.Tween(e, l.opts, t, n, l.opts.specialEasing[t] || l.opts.easing)
                    return l.tweens.push(r),
                        r
                },
                stop: function (t) {
                    var n = 0,
                        r = t ? l.tweens.length : 0
                    if (i) {
                        return this
                    }
                    for (i = !0; n < r; n++) {
                        l.tweens[n].run(1)
                    }
                    return t ? (s.notifyWith(e, [
                        l,
                        1,
                        0
                    ]), s.resolveWith(e, [
                        l,
                        t
                    ])) : s.rejectWith(e, [
                        l,
                        t
                    ]),
                        this
                }
            }),
            c = l.props
        for (ft(c, l.opts.specialEasing); o < a; o++) {
            if (r = pt.prefilters[o].call(l, e, c, l.opts)) {
                return g(r.stop) && (w._queueHooks(l.elem, l.opts.queue).stop = r.stop.bind(r)),
                    r
            }
        }
        return w.map(c, lt, l),
        g(l.opts.start) && l.opts.start.call(e, l),
            l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always),
            w.fx.timer(w.extend(u, {
                elem: e,
                anim: l,
                queue: l.opts.queue
            })),
            l
    }

    w.Animation = w.extend(pt, {
        tweeners: {
            '*': [
                function (e, t) {
                    var n = this.createTween(e, t)
                    return ue(n.elem, e, ie.exec(t), n),
                        n
                }
            ]
        },
        tweener: function (e, t) {
            g(e) ? (t = e, e = [
                '*'
            ]) : e = e.match(M)
            for (var n, r = 0, i = e.length; r < i; r++) {
                n = e[r],
                    pt.tweeners[n] = pt.tweeners[n] || [],
                    pt.tweeners[n].unshift(t)
            }
        },
        prefilters: [
            ct
        ],
        prefilter: function (e, t) {
            t ? pt.prefilters.unshift(e) : pt.prefilters.push(e)
        }
    }),
        w.speed = function (e, t, n) {
            var r = e && 'object' == typeof e ? w.extend({}, e) : {
                complete: n || !n && t || g(e) && e,
                duration: e,
                easing: n && t || t && !g(t) && t
            }
            return w.fx.off ? r.duration = 0 : 'number' != typeof r.duration && (r.duration in w.fx.speeds ? r.duration = w.fx.speeds[r.duration] : r.duration = w.fx.speeds._default),
            null != r.queue && !0 !== r.queue || (r.queue = 'fx'),
                r.old = r.complete,
                r.complete = function () {
                    g(r.old) && r.old.call(this),
                    r.queue && w.dequeue(this, r.queue)
                },
                r
        },
        w.fn.extend({
            fadeTo: function (e, t, n, r) {
                return this.filter(ae).css('opacity', 0).show().end().animate({
                    opacity: t
                }, e, n, r)
            },
            animate: function (e, t, n, r) {
                var i = w.isEmptyObject(e),
                    o = w.speed(t, n, r),
                    a = function () {
                        var t = pt(this, w.extend({}, e), o);
                        (i || J.get(this, 'finish')) && t.stop(!0)
                    }
                return a.finish = a,
                    i || !1 === o.queue ? this.each(a) : this.queue(o.queue, a)
            },
            stop: function (e, t, n) {
                var r = function (e) {
                    var t = e.stop
                    delete e.stop,
                        t(n)
                }
                return 'string' != typeof e && (n = t, t = e, e = void 0),
                t && !1 !== e && this.queue(e || 'fx', []),
                    this.each(function () {
                        var t = !0,
                            i = null != e && e + 'queueHooks',
                            o = w.timers,
                            a = J.get(this)
                        if (i) {
                            a[i] && a[i].stop && r(a[i])
                        } else {
                            for (i in a) {
                                a[i] && a[i].stop && ot.test(i) && r(a[i])
                            }
                        }
                        for (i = o.length; i--;) {
                            o[i].elem !== this || null != e && o[i].queue !== e || (o[i].anim.stop(n), t = !1, o.splice(i, 1))
                        }
                        !t && n || w.dequeue(this, e)
                    })
            },
            finish: function (e) {
                return !1 !== e && (e = e || 'fx'),
                    this.each(function () {
                        var t,
                            n = J.get(this),
                            r = n[e + 'queue'],
                            i = n[e + 'queueHooks'],
                            o = w.timers,
                            a = r ? r.length : 0
                        for (n.finish = !0, w.queue(this, e, []), i && i.stop && i.stop.call(this, !0), t = o.length; t--;) {
                            o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1))
                        }
                        for (t = 0; t < a; t++) {
                            r[t] && r[t].finish && r[t].finish.call(this)
                        }
                        delete n.finish
                    })
            }
        }),
        w.each(['toggle',
            'show',
            'hide'], function (e, t) {
            var n = w.fn[t]
            w.fn[t] = function (e, r, i) {
                return null == e || 'boolean' == typeof e ? n.apply(this, arguments) : this.animate(ut(t, !0), e, r, i)
            }
        }),
        w.each({
            slideDown: ut('show'),
            slideUp: ut('hide'),
            slideToggle: ut('toggle'),
            fadeIn: {
                opacity: 'show'
            },
            fadeOut: {
                opacity: 'hide'
            },
            fadeToggle: {
                opacity: 'toggle'
            }
        }, function (e, t) {
            w.fn[e] = function (e, n, r) {
                return this.animate(t, e, n, r)
            }
        }),
        w.timers = [],
        w.fx.tick = function () {
            var e,
                t = 0,
                n = w.timers
            for (nt = Date.now(); t < n.length; t++) {
                (e = n[t])() || n[t] !== e || n.splice(t--, 1)
            }
            n.length || w.fx.stop(),
                nt = void 0
        },
        w.fx.timer = function (e) {
            w.timers.push(e),
                w.fx.start()
        },
        w.fx.interval = 13,
        w.fx.start = function () {
            rt || (rt = !0, at())
        },
        w.fx.stop = function () {
            rt = null
        },
        w.fx.speeds = {
            slow: 600,
            fast: 200,
            _default: 400
        },
        w.fn.delay = function (t, n) {
            return t = w.fx ? w.fx.speeds[t] || t : t,
                n = n || 'fx',
                this.queue(n, function (n, r) {
                    var i = e.setTimeout(n, t)
                    r.stop = function () {
                        e.clearTimeout(i)
                    }
                })
        },
        function () {
            var e = r.createElement('input'),
                t = r.createElement('select').appendChild(r.createElement('option'))
            e.type = 'checkbox',
                h.checkOn = '' !== e.value,
                h.optSelected = t.selected,
                (e = r.createElement('input')).value = 't',
                e.type = 'radio',
                h.radioValue = 't' === e.value
        }()
    var dt,
        ht = w.expr.attrHandle
    w.fn.extend({
        attr: function (e, t) {
            return z(this, w.attr, e, t, arguments.length > 1)
        },
        removeAttr: function (e) {
            return this.each(function () {
                w.removeAttr(this, e)
            })
        }
    }),
        w.extend({
            attr: function (e, t, n) {
                var r,
                    i,
                    o = e.nodeType
                if (3 !== o && 8 !== o && 2 !== o) {
                    return 'undefined' == typeof e.getAttribute ? w.prop(e, t, n) : (1 === o && w.isXMLDoc(e) || (i = w.attrHooks[t.toLowerCase()] || (w.expr.match.bool.test(t) ? dt : void 0)), void 0 !== n ? null === n ? void w.removeAttr(e, t) : i && 'set' in i && void 0 !== (r = i.set(e, n, t)) ? r : (e.setAttribute(t, n + ''), n) : i && 'get' in i && null !== (r = i.get(e, t)) ? r : null == (r = w.find.attr(e, t)) ? void 0 : r)
                }
            },
            attrHooks: {
                type: {
                    set: function (e, t) {
                        if (!h.radioValue && 'radio' === t && N(e, 'input')) {
                            var n = e.value
                            return e.setAttribute('type', t),
                            n && (e.value = n),
                                t
                        }
                    }
                }
            },
            removeAttr: function (e, t) {
                var n,
                    r = 0,
                    i = t && t.match(M)
                if (i && 1 === e.nodeType) {
                    while (n = i[r++]) {
                        e.removeAttribute(n)
                    }
                }
            }
        }),
        dt = {
            set: function (e, t, n) {
                return !1 === t ? w.removeAttr(e, n) : e.setAttribute(n, n),
                    n
            }
        },
        w.each(w.expr.match.bool.source.match(/\w+/g), function (e, t) {
            var n = ht[t] || w.find.attr
            ht[t] = function (e, t, r) {
                var i,
                    o,
                    a = t.toLowerCase()
                return r || (o = ht[a], ht[a] = i, i = null != n(e, t, r) ? a : null, ht[a] = o),
                    i
            }
        })
    var gt = /^(?:input|select|textarea|button)$/i,
        yt = /^(?:a|area)$/i
    w.fn.extend({
        prop: function (e, t) {
            return z(this, w.prop, e, t, arguments.length > 1)
        },
        removeProp: function (e) {
            return this.each(function () {
                delete this[w.propFix[e] || e]
            })
        }
    }),
        w.extend({
            prop: function (e, t, n) {
                var r,
                    i,
                    o = e.nodeType
                if (3 !== o && 8 !== o && 2 !== o) {
                    return 1 === o && w.isXMLDoc(e) || (t = w.propFix[t] || t, i = w.propHooks[t]),
                        void 0 !== n ? i && 'set' in i && void 0 !== (r = i.set(e, n, t)) ? r : e[t] = n : i && 'get' in i && null !== (r = i.get(e, t)) ? r : e[t]
                }
            },
            propHooks: {
                tabIndex: {
                    get: function (e) {
                        var t = w.find.attr(e, 'tabindex')
                        return t ? parseInt(t, 10) : gt.test(e.nodeName) || yt.test(e.nodeName) && e.href ? 0 : -1
                    }
                }
            },
            propFix: {
                'for': 'htmlFor',
                'class': 'className'
            }
        }),
    h.optSelected || (w.propHooks.selected = {
        get: function (e) {
            var t = e.parentNode
            return t && t.parentNode && t.parentNode.selectedIndex,
                null
        },
        set: function (e) {
            var t = e.parentNode
            t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex)
        }
    }),
        w.each(['tabIndex',
            'readOnly',
            'maxLength',
            'cellSpacing',
            'cellPadding',
            'rowSpan',
            'colSpan',
            'useMap',
            'frameBorder',
            'contentEditable'], function () {
            w.propFix[this.toLowerCase()] = this
        })

    function vt(e) {
        return (e.match(M) || []).join(' ')
    }

    function mt(e) {
        return e.getAttribute && e.getAttribute('class') || ''
    }

    function xt(e) {
        return Array.isArray(e) ? e : 'string' == typeof e ? e.match(M) || [] : []
    }

    w.fn.extend({
        addClass: function (e) {
            var t,
                n,
                r,
                i,
                o,
                a,
                s,
                u = 0
            if (g(e)) {
                return this.each(function (t) {
                    w(this).addClass(e.call(this, t, mt(this)))
                })
            }
            if ((t = xt(e)).length) {
                while (n = this[u++]) {
                    if (i = mt(n), r = 1 === n.nodeType && ' ' + vt(i) + ' ') {
                        a = 0
                        while (o = t[a++]) {
                            r.indexOf(' ' + o + ' ') < 0 && (r += o + ' ')
                        }
                        i !== (s = vt(r)) && n.setAttribute('class', s)
                    }
                }
            }
            return this
        },
        removeClass: function (e) {
            var t,
                n,
                r,
                i,
                o,
                a,
                s,
                u = 0
            if (g(e)) {
                return this.each(function (t) {
                    w(this).removeClass(e.call(this, t, mt(this)))
                })
            }
            if (!arguments.length) {
                return this.attr('class', '')
            }
            if ((t = xt(e)).length) {
                while (n = this[u++]) {
                    if (i = mt(n), r = 1 === n.nodeType && ' ' + vt(i) + ' ') {
                        a = 0
                        while (o = t[a++]) {
                            while (r.indexOf(' ' + o + ' ') > -1) {
                                r = r.replace(' ' + o + ' ', ' ')
                            }
                        }
                        i !== (s = vt(r)) && n.setAttribute('class', s)
                    }
                }
            }
            return this
        },
        toggleClass: function (e, t) {
            var n = typeof e,
                r = 'string' === n || Array.isArray(e)
            return 'boolean' == typeof t && r ? t ? this.addClass(e) : this.removeClass(e) : g(e) ? this.each(function (n) {
                w(this).toggleClass(e.call(this, n, mt(this), t), t)
            }) : this.each(function () {
                var t,
                    i,
                    o,
                    a
                if (r) {
                    i = 0,
                        o = w(this),
                        a = xt(e)
                    while (t = a[i++]) {
                        o.hasClass(t) ? o.removeClass(t) : o.addClass(t)
                    }
                } else {
                    void 0 !== e && 'boolean' !== n || ((t = mt(this)) && J.set(this, '__className__', t), this.setAttribute && this.setAttribute('class', t || !1 === e ? '' : J.get(this, '__className__') || ''))
                }
            })
        },
        hasClass: function (e) {
            var t,
                n,
                r = 0
            t = ' ' + e + ' '
            while (n = this[r++]) {
                if (1 === n.nodeType && (' ' + vt(mt(n)) + ' ').indexOf(t) > -1) {
                    return !0
                }
            }
            return !1
        }
    })
    var bt = /\r/g
    w.fn.extend({
        val: function (e) {
            var t,
                n,
                r,
                i = this[0]
            if (arguments.length) {
                return r = g(e),
                    this.each(function (n) {
                        var i
                        1 === this.nodeType && (null == (i = r ? e.call(this, n, w(this).val()) : e) ? i = '' : 'number' == typeof i ? i += '' : Array.isArray(i) && (i = w.map(i, function (e) {
                            return null == e ? '' : e + ''
                        })), (t = w.valHooks[this.type] || w.valHooks[this.nodeName.toLowerCase()]) && 'set' in t && void 0 !== t.set(this, i, 'value') || (this.value = i))
                    })
            }
            if (i) {
                return (t = w.valHooks[i.type] || w.valHooks[i.nodeName.toLowerCase()]) && 'get' in t && void 0 !== (n = t.get(i, 'value')) ? n : 'string' == typeof (n = i.value) ? n.replace(bt, '') : null == n ? '' : n
            }
        }
    }),
        w.extend({
            valHooks: {
                option: {
                    get: function (e) {
                        var t = w.find.attr(e, 'value')
                        return null != t ? t : vt(w.text(e))
                    }
                },
                select: {
                    get: function (e) {
                        var t,
                            n,
                            r,
                            i = e.options,
                            o = e.selectedIndex,
                            a = 'select-one' === e.type,
                            s = a ? null : [],
                            u = a ? o + 1 : i.length
                        for (r = o < 0 ? u : a ? o : 0; r < u; r++) {
                            if (((n = i[r]).selected || r === o) && !n.disabled && (!n.parentNode.disabled || !N(n.parentNode, 'optgroup'))) {
                                if (t = w(n).val(), a) {
                                    return t
                                }
                                s.push(t)
                            }
                        }
                        return s
                    },
                    set: function (e, t) {
                        var n,
                            r,
                            i = e.options,
                            o = w.makeArray(t),
                            a = i.length
                        while (a--) {
                            ((r = i[a]).selected = w.inArray(w.valHooks.option.get(r), o) > -1) && (n = !0)
                        }
                        return n || (e.selectedIndex = -1),
                            o
                    }
                }
            }
        }),
        w.each(['radio',
            'checkbox'], function () {
            w.valHooks[this] = {
                set: function (e, t) {
                    if (Array.isArray(t)) {
                        return e.checked = w.inArray(w(e).val(), t) > -1
                    }
                }
            },
            h.checkOn || (w.valHooks[this].get = function (e) {
                return null === e.getAttribute('value') ? 'on' : e.value
            })
        }),
        h.focusin = 'onfocusin' in e
    var wt = /^(?:focusinfocus|focusoutblur)$/,
        Tt = function (e) {
            e.stopPropagation()
        }
    w.extend(w.event, {
        trigger: function (t, n, i, o) {
            var a,
                s,
                u,
                l,
                c,
                p,
                d,
                h,
                v = [
                    i || r
                ],
                m = f.call(t, 'type') ? t.type : t,
                x = f.call(t, 'namespace') ? t.namespace.split('.') : []
            if (s = h = u = i = i || r, 3 !== i.nodeType && 8 !== i.nodeType && !wt.test(m + w.event.triggered) && (m.indexOf('.') > -1 && (m = (x = m.split('.')).shift(), x.sort()), c = m.indexOf(':') < 0 && 'on' + m, t = t[w.expando] ? t : new w.Event(m, 'object' == typeof t && t), t.isTrigger = o ? 2 : 3, t.namespace = x.join('.'), t.rnamespace = t.namespace ? new RegExp('(^|\\.)' + x.join('\\.(?:.*\\.|)') + '(\\.|$)') : null, t.result = void 0, t.target || (t.target = i), n = null == n ? [
                t
            ] : w.makeArray(n, [
                t
            ]), d = w.event.special[m] || {}, o || !d.trigger || !1 !== d.trigger.apply(i, n))) {
                if (!o && !d.noBubble && !y(i)) {
                    for (l = d.delegateType || m, wt.test(l + m) || (s = s.parentNode); s; s = s.parentNode) {
                        v.push(s),
                            u = s
                    }
                    u === (i.ownerDocument || r) && v.push(u.defaultView || u.parentWindow || e)
                }
                a = 0
                while ((s = v[a++]) && !t.isPropagationStopped()) {
                    h = s,
                        t.type = a > 1 ? l : d.bindType || m,
                    (p = (J.get(s, 'events') || {}) [t.type] && J.get(s, 'handle')) && p.apply(s, n),
                    (p = c && s[c]) && p.apply && Y(s) && (t.result = p.apply(s, n), !1 === t.result && t.preventDefault())
                }
                return t.type = m,
                o || t.isDefaultPrevented() || d._default && !1 !== d._default.apply(v.pop(), n) || !Y(i) || c && g(i[m]) && !y(i) && ((u = i[c]) && (i[c] = null), w.event.triggered = m, t.isPropagationStopped() && h.addEventListener(m, Tt), i[m](), t.isPropagationStopped() && h.removeEventListener(m, Tt), w.event.triggered = void 0, u && (i[c] = u)),
                    t.result
            }
        },
        simulate: function (e, t, n) {
            var r = w.extend(new w.Event, n, {
                type: e,
                isSimulated: !0
            })
            w.event.trigger(r, null, t)
        }
    }),
        w.fn.extend({
            trigger: function (e, t) {
                return this.each(function () {
                    w.event.trigger(e, t, this)
                })
            },
            triggerHandler: function (e, t) {
                var n = this[0]
                if (n) {
                    return w.event.trigger(e, t, n, !0)
                }
            }
        }),
    h.focusin || w.each({
        focus: 'focusin',
        blur: 'focusout'
    }, function (e, t) {
        var n = function (e) {
            w.event.simulate(t, e.target, w.event.fix(e))
        }
        w.event.special[t] = {
            setup: function () {
                var r = this.ownerDocument || this,
                    i = J.access(r, t)
                i || r.addEventListener(e, n, !0),
                    J.access(r, t, (i || 0) + 1)
            },
            teardown: function () {
                var r = this.ownerDocument || this,
                    i = J.access(r, t) - 1
                i ? J.access(r, t, i) : (r.removeEventListener(e, n, !0), J.remove(r, t))
            }
        }
    })
    var Ct = e.location,
        Et = Date.now(),
        kt = /\?/
    w.parseXML = function (t) {
        var n
        if (!t || 'string' != typeof t) {
            return null
        }
        try {
            n = (new e.DOMParser).parseFromString(t, 'text/xml')
        } catch (e) {
            n = void 0
        }
        return n && !n.getElementsByTagName('parsererror').length || w.error('Invalid XML: ' + t),
            n
    }
    var St = /\[\]$/,
        Dt = /\r?\n/g,
        Nt = /^(?:submit|button|image|reset|file)$/i,
        At = /^(?:input|select|textarea|keygen)/i

    function jt(e, t, n, r) {
        var i
        if (Array.isArray(t)) {
            w.each(t, function (t, i) {
                n || St.test(e) ? r(e, i) : jt(e + '[' + ('object' == typeof i && null != i ? t : '') + ']', i, n, r)
            })
        } else {
            if (n || 'object' !== x(t)) {
                r(e, t)
            } else {
                for (i in t) {
                    jt(e + '[' + i + ']', t[i], n, r)
                }
            }
        }
    }

    w.param = function (e, t) {
        var n,
            r = [],
            i = function (e, t) {
                var n = g(t) ? t() : t
                r[r.length] = encodeURIComponent(e) + '=' + encodeURIComponent(null == n ? '' : n)
            }
        if (Array.isArray(e) || e.jquery && !w.isPlainObject(e)) {
            w.each(e, function () {
                i(this.name, this.value)
            })
        } else {
            for (n in e) {
                jt(n, e[n], t, i)
            }
        }
        return r.join('&')
    },
        w.fn.extend({
            serialize: function () {
                return w.param(this.serializeArray())
            },
            serializeArray: function () {
                return this.map(function () {
                    var e = w.prop(this, 'elements')
                    return e ? w.makeArray(e) : this
                }).filter(function () {
                    var e = this.type
                    return this.name && !w(this).is(':disabled') && At.test(this.nodeName) && !Nt.test(e) && (this.checked || !pe.test(e))
                }).map(function (e, t) {
                    var n = w(this).val()
                    return null == n ? null : Array.isArray(n) ? w.map(n, function (e) {
                        return {
                            name: t.name,
                            value: e.replace(Dt, '\r\n')
                        }
                    }) : {
                        name: t.name,
                        value: n.replace(Dt, '\r\n')
                    }
                }).get()
            }
        })
    var qt = /%20/g,
        Lt = /#.*$/,
        Ht = /([?&])_=[^&]*/,
        Ot = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        Pt = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        Mt = /^(?:GET|HEAD)$/,
        Rt = /^\/\//,
        It = {},
        Wt = {},
        $t = '*/'.concat('*'),
        Bt = r.createElement('a')
    Bt.href = Ct.href

    function Ft(e) {
        return function (t, n) {
            'string' != typeof t && (n = t, t = '*')
            var r,
                i = 0,
                o = t.toLowerCase().match(M) || []
            if (g(n)) {
                while (r = o[i++]) {
                    '+' === r[0] ? (r = r.slice(1) || '*', (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
                }
            }
        }
    }

    function _t(e, t, n, r) {
        var i = {},
            o = e === Wt

        function a(s) {
            var u
            return i[s] = !0,
                w.each(e[s] || [], function (e, s) {
                    var l = s(t, n, r)
                    return 'string' != typeof l || o || i[l] ? o ? !(u = l) : void 0 : (t.dataTypes.unshift(l), a(l), !1)
                }),
                u
        }

        return a(t.dataTypes[0]) || !i['*'] && a('*')
    }

    function zt(e, t) {
        var n,
            r,
            i = w.ajaxSettings.flatOptions || {}
        for (n in t) {
            void 0 !== t[n] && ((i[n] ? e : r || (r = {})) [n] = t[n])
        }
        return r && w.extend(!0, e, r),
            e
    }

    function Xt(e, t, n) {
        var r,
            i,
            o,
            a,
            s = e.contents,
            u = e.dataTypes
        while ('*' === u[0]) {
            u.shift(),
            void 0 === r && (r = e.mimeType || t.getResponseHeader('Content-Type'))
        }
        if (r) {
            for (i in s) {
                if (s[i] && s[i].test(r)) {
                    u.unshift(i)
                    break
                }
            }
        }
        if (u[0] in n) {
            o = u[0]
        } else {
            for (i in n) {
                if (!u[0] || e.converters[i + ' ' + u[0]]) {
                    o = i
                    break
                }
                a || (a = i)
            }
            o = o || a
        }
        if (o) {
            return o !== u[0] && u.unshift(o),
                n[o]
        }
    }

    function Ut(e, t, n, r) {
        var i,
            o,
            a,
            s,
            u,
            l = {},
            c = e.dataTypes.slice()
        if (c[1]) {
            for (a in e.converters) {
                l[a.toLowerCase()] = e.converters[a]
            }
        }
        o = c.shift()
        while (o) {
            if (e.responseFields[o] && (n[e.responseFields[o]] = t), !u && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), u = o, o = c.shift()) {
                if ('*' === o) {
                    o = u
                } else {
                    if ('*' !== u && u !== o) {
                        if (!(a = l[u + ' ' + o] || l['* ' + o])) {
                            for (i in l) {
                                if ((s = i.split(' ')) [1] === o && (a = l[u + ' ' + s[0]] || l['* ' + s[0]])) {
                                    !0 === a ? a = l[i] : !0 !== l[i] && (o = s[0], c.unshift(s[1]))
                                    break
                                }
                            }
                        }
                        if (!0 !== a) {
                            if (a && e['throws']) {
                                t = a(t)
                            } else {
                                try {
                                    t = a(t)
                                } catch (e) {
                                    return {
                                        state: 'parsererror',
                                        error: a ? e : 'No conversion from ' + u + ' to ' + o
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        return {
            state: 'success',
            data: t
        }
    }

    w.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: Ct.href,
            type: 'GET',
            isLocal: Pt.test(Ct.protocol),
            global: !0,
            processData: !0,
            async: !0,
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            accepts: {
                '*': $t,
                text: 'text/plain',
                html: 'text/html',
                xml: 'application/xml, text/xml',
                json: 'application/json, text/javascript'
            },
            contents: {
                xml: /\bxml\b/,
                html: /\bhtml/,
                json: /\bjson\b/
            },
            responseFields: {
                xml: 'responseXML',
                text: 'responseText',
                json: 'responseJSON'
            },
            converters: {
                '* text': String,
                'text html': !0,
                'text json': JSON.parse,
                'text xml': w.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function (e, t) {
            return t ? zt(zt(e, w.ajaxSettings), t) : zt(w.ajaxSettings, e)
        },
        ajaxPrefilter: Ft(It),
        ajaxTransport: Ft(Wt),
        ajax: function (t, n) {
            'object' == typeof t && (n = t, t = void 0),
                n = n || {}
            var i,
                o,
                a,
                s,
                u,
                l,
                c,
                f,
                p,
                d,
                h = w.ajaxSetup({}, n),
                g = h.context || h,
                y = h.context && (g.nodeType || g.jquery) ? w(g) : w.event,
                v = w.Deferred(),
                m = w.Callbacks('once memory'),
                x = h.statusCode || {},
                b = {},
                T = {},
                C = 'canceled',
                E = {
                    readyState: 0,
                    getResponseHeader: function (e) {
                        var t
                        if (c) {
                            if (!s) {
                                s = {}
                                while (t = Ot.exec(a)) {
                                    s[t[1].toLowerCase()] = t[2]
                                }
                            }
                            t = s[e.toLowerCase()]
                        }
                        return null == t ? null : t
                    },
                    getAllResponseHeaders: function () {
                        return c ? a : null
                    },
                    setRequestHeader: function (e, t) {
                        return null == c && (e = T[e.toLowerCase()] = T[e.toLowerCase()] || e, b[e] = t),
                            this
                    },
                    overrideMimeType: function (e) {
                        return null == c && (h.mimeType = e),
                            this
                    },
                    statusCode: function (e) {
                        var t
                        if (e) {
                            if (c) {
                                E.always(e[E.status])
                            } else {
                                for (t in e) {
                                    x[t] = [
                                        x[t],
                                        e[t]
                                    ]
                                }
                            }
                        }
                        return this
                    },
                    abort: function (e) {
                        var t = e || C
                        return i && i.abort(t),
                            k(0, t),
                            this
                    }
                }
            if (v.promise(E), h.url = ((t || h.url || Ct.href) + '').replace(Rt, Ct.protocol + '//'), h.type = n.method || n.type || h.method || h.type, h.dataTypes = (h.dataType || '*').toLowerCase().match(M) || [
                ''
            ], null == h.crossDomain) {
                l = r.createElement('a')
                try {
                    l.href = h.url,
                        l.href = l.href,
                        h.crossDomain = Bt.protocol + '//' + Bt.host != l.protocol + '//' + l.host
                } catch (e) {
                    h.crossDomain = !0
                }
            }
            if (h.data && h.processData && 'string' != typeof h.data && (h.data = w.param(h.data, h.traditional)), _t(It, h, n, E), c) {
                return E
            }
            (f = w.event && h.global) && 0 == w.active++ && w.event.trigger('ajaxStart'),
                h.type = h.type.toUpperCase(),
                h.hasContent = !Mt.test(h.type),
                o = h.url.replace(Lt, ''),
                h.hasContent ? h.data && h.processData && 0 === (h.contentType || '').indexOf('application/x-www-form-urlencoded') && (h.data = h.data.replace(qt, '+')) : (d = h.url.slice(o.length), h.data && (h.processData || 'string' == typeof h.data) && (o += (kt.test(o) ? '&' : '?') + h.data, delete h.data), !1 === h.cache && (o = o.replace(Ht, '$1'), d = (kt.test(o) ? '&' : '?') + '_=' + Et++ + d), h.url = o + d),
            h.ifModified && (w.lastModified[o] && E.setRequestHeader('If-Modified-Since', w.lastModified[o]), w.etag[o] && E.setRequestHeader('If-None-Match', w.etag[o])),
            (h.data && h.hasContent && !1 !== h.contentType || n.contentType) && E.setRequestHeader('Content-Type', h.contentType),
                E.setRequestHeader('Accept', h.dataTypes[0] && h.accepts[h.dataTypes[0]] ? h.accepts[h.dataTypes[0]] + ('*' !== h.dataTypes[0] ? ', ' + $t + '; q=0.01' : '') : h.accepts['*'])
            for (p in h.headers) {
                E.setRequestHeader(p, h.headers[p])
            }
            if (h.beforeSend && (!1 === h.beforeSend.call(g, E, h) || c)) {
                return E.abort()
            }
            if (C = 'abort', m.add(h.complete), E.done(h.success), E.fail(h.error), i = _t(Wt, h, n, E)) {
                if (E.readyState = 1, f && y.trigger('ajaxSend', [
                    E,
                    h
                ]), c) {
                    return E
                }
                h.async && h.timeout > 0 && (u = e.setTimeout(function () {
                    E.abort('timeout')
                }, h.timeout))
                try {
                    c = !1,
                        i.send(b, k)
                } catch (e) {
                    if (c) {
                        throw e
                    }
                    k(-1, e)
                }
            } else {
                k(-1, 'No Transport')
            }

            function k(t, n, r, s) {
                var l,
                    p,
                    d,
                    b,
                    T,
                    C = n
                c || (c = !0, u && e.clearTimeout(u), i = void 0, a = s || '', E.readyState = t > 0 ? 4 : 0, l = t >= 200 && t < 300 || 304 === t, r && (b = Xt(h, E, r)), b = Ut(h, b, E, l), l ? (h.ifModified && ((T = E.getResponseHeader('Last-Modified')) && (w.lastModified[o] = T), (T = E.getResponseHeader('etag')) && (w.etag[o] = T)), 204 === t || 'HEAD' === h.type ? C = 'nocontent' : 304 === t ? C = 'notmodified' : (C = b.state, p = b.data, l = !(d = b.error))) : (d = C, !t && C || (C = 'error', t < 0 && (t = 0))), E.status = t, E.statusText = (n || C) + '', l ? v.resolveWith(g, [
                    p,
                    C,
                    E
                ]) : v.rejectWith(g, [
                    E,
                    C,
                    d
                ]), E.statusCode(x), x = void 0, f && y.trigger(l ? 'ajaxSuccess' : 'ajaxError', [
                    E,
                    h,
                    l ? p : d
                ]), m.fireWith(g, [
                    E,
                    C
                ]), f && (y.trigger('ajaxComplete', [
                    E,
                    h
                ]), --w.active || w.event.trigger('ajaxStop')))
            }

            return E
        },
        getJSON: function (e, t, n) {
            return w.get(e, t, n, 'json')
        },
        getScript: function (e, t) {
            return w.get(e, void 0, t, 'script')
        }
    }),
        w.each(['get',
            'post'], function (e, t) {
            w[t] = function (e, n, r, i) {
                return g(n) && (i = i || r, r = n, n = void 0),
                    w.ajax(w.extend({
                        url: e,
                        type: t,
                        dataType: i,
                        data: n,
                        success: r
                    }, w.isPlainObject(e) && e))
            }
        }),
        w._evalUrl = function (e) {
            return w.ajax({
                url: e,
                type: 'GET',
                dataType: 'script',
                cache: !0,
                async: !1,
                global: !1,
                'throws': !0
            })
        },
        w.fn.extend({
            wrapAll: function (e) {
                var t
                return this[0] && (g(e) && (e = e.call(this[0])), t = w(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () {
                    var e = this
                    while (e.firstElementChild) {
                        e = e.firstElementChild
                    }
                    return e
                }).append(this)),
                    this
            },
            wrapInner: function (e) {
                return g(e) ? this.each(function (t) {
                    w(this).wrapInner(e.call(this, t))
                }) : this.each(function () {
                    var t = w(this),
                        n = t.contents()
                    n.length ? n.wrapAll(e) : t.append(e)
                })
            },
            wrap: function (e) {
                var t = g(e)
                return this.each(function (n) {
                    w(this).wrapAll(t ? e.call(this, n) : e)
                })
            },
            unwrap: function (e) {
                return this.parent(e).not('body').each(function () {
                    w(this).replaceWith(this.childNodes)
                }),
                    this
            }
        }),
        w.expr.pseudos.hidden = function (e) {
            return !w.expr.pseudos.visible(e)
        },
        w.expr.pseudos.visible = function (e) {
            return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length)
        },
        w.ajaxSettings.xhr = function () {
            try {
                return new e.XMLHttpRequest
            } catch (e) {
            }
        }
    var Vt = {
            0: 200,
            1223: 204
        },
        Gt = w.ajaxSettings.xhr()
    h.cors = !!Gt && 'withCredentials' in Gt,
        h.ajax = Gt = !!Gt,
        w.ajaxTransport(function (t) {
            var n,
                r
            if (h.cors || Gt && !t.crossDomain) {
                return {
                    send: function (i, o) {
                        var a,
                            s = t.xhr()
                        if (s.open(t.type, t.url, t.async, t.username, t.password), t.xhrFields) {
                            for (a in t.xhrFields) {
                                s[a] = t.xhrFields[a]
                            }
                        }
                        t.mimeType && s.overrideMimeType && s.overrideMimeType(t.mimeType),
                        t.crossDomain || i['X-Requested-With'] || (i['X-Requested-With'] = 'XMLHttpRequest')
                        for (a in i) {
                            s.setRequestHeader(a, i[a])
                        }
                        n = function (e) {
                            return function () {
                                n && (n = r = s.onload = s.onerror = s.onabort = s.ontimeout = s.onreadystatechange = null, 'abort' === e ? s.abort() : 'error' === e ? 'number' != typeof s.status ? o(0, 'error') : o(s.status, s.statusText) : o(Vt[s.status] || s.status, s.statusText, 'text' !== (s.responseType || 'text') || 'string' != typeof s.responseText ? {
                                        binary: s.response
                                    }
                                    : {
                                        text: s.responseText
                                    }, s.getAllResponseHeaders()))
                            }
                        },
                            s.onload = n(),
                            r = s.onerror = s.ontimeout = n('error'),
                            void 0 !== s.onabort ? s.onabort = r : s.onreadystatechange = function () {
                                4 === s.readyState && e.setTimeout(function () {
                                    n && r()
                                })
                            },
                            n = n('abort')
                        try {
                            s.send(t.hasContent && t.data || null)
                        } catch (e) {
                            if (n) {
                                throw e
                            }
                        }
                    },
                    abort: function () {
                        n && n()
                    }
                }
            }
        }),
        w.ajaxPrefilter(function (e) {
            e.crossDomain && (e.contents.script = !1)
        }),
        w.ajaxSetup({
            accepts: {
                script: 'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'
            },
            contents: {
                script: /\b(?:java|ecma)script\b/
            },
            converters: {
                'text script': function (e) {
                    return w.globalEval(e),
                        e
                }
            }
        }),
        w.ajaxPrefilter('script', function (e) {
            void 0 === e.cache && (e.cache = !1),
            e.crossDomain && (e.type = 'GET')
        }),
        w.ajaxTransport('script', function (e) {
            if (e.crossDomain) {
                var t,
                    n
                return {
                    send: function (i, o) {
                        t = w('<script>').prop({
                            charset: e.scriptCharset,
                            src: e.url
                        }).on('load error', n = function (e) {
                            t.remove(),
                                n = null,
                            e && o('error' === e.type ? 404 : 200, e.type)
                        }),
                            r.head.appendChild(t[0])
                    },
                    abort: function () {
                        n && n()
                    }
                }
            }
        })
    var Yt = [],
        Qt = /(=)\?(?=&|$)|\?\?/
    w.ajaxSetup({
        jsonp: 'callback',
        jsonpCallback: function () {
            var e = Yt.pop() || w.expando + '_' + Et++
            return this[e] = !0,
                e
        }
    }),
        w.ajaxPrefilter('json jsonp', function (t, n, r) {
            var i,
                o,
                a,
                s = !1 !== t.jsonp && (Qt.test(t.url) ? 'url' : 'string' == typeof t.data && 0 === (t.contentType || '').indexOf('application/x-www-form-urlencoded') && Qt.test(t.data) && 'data')
            if (s || 'jsonp' === t.dataTypes[0]) {
                return i = t.jsonpCallback = g(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback,
                    s ? t[s] = t[s].replace(Qt, '$1' + i) : !1 !== t.jsonp && (t.url += (kt.test(t.url) ? '&' : '?') + t.jsonp + '=' + i),
                    t.converters['script json'] = function () {
                        return a || w.error(i + ' was not called'),
                            a[0]
                    },
                    t.dataTypes[0] = 'json',
                    o = e[i],
                    e[i] = function () {
                        a = arguments
                    },
                    r.always(function () {
                        void 0 === o ? w(e).removeProp(i) : e[i] = o,
                        t[i] && (t.jsonpCallback = n.jsonpCallback, Yt.push(i)),
                        a && g(o) && o(a[0]),
                            a = o = void 0
                    }),
                    'script'
            }
        }),
        h.createHTMLDocument = function () {
            var e = r.implementation.createHTMLDocument('').body
            return e.innerHTML = '<form></form><form></form>',
            2 === e.childNodes.length
        }(),
        w.parseHTML = function (e, t, n) {
            if ('string' != typeof e) {
                return []
            }
            'boolean' == typeof t && (n = t, t = !1)
            var i,
                o,
                a
            return t || (h.createHTMLDocument ? ((i = (t = r.implementation.createHTMLDocument('')).createElement('base')).href = r.location.href, t.head.appendChild(i)) : t = r),
                o = A.exec(e),
                a = !n && [],
                o ? [
                    t.createElement(o[1])
                ] : (o = xe([e], t, a), a && a.length && w(a).remove(), w.merge([], o.childNodes))
        },
        w.fn.load = function (e, t, n) {
            var r,
                i,
                o,
                a = this,
                s = e.indexOf(' ')
            return s > -1 && (r = vt(e.slice(s)), e = e.slice(0, s)),
                g(t) ? (n = t, t = void 0) : t && 'object' == typeof t && (i = 'POST'),
            a.length > 0 && w.ajax({
                url: e,
                type: i || 'GET',
                dataType: 'html',
                data: t
            }).done(function (e) {
                o = arguments,
                    a.html(r ? w('<div>').append(w.parseHTML(e)).find(r) : e)
            }).always(n && function (e, t) {
                a.each(function () {
                    n.apply(this, o || [
                        e.responseText,
                        t,
                        e
                    ])
                })
            }),
                this
        },
        w.each(['ajaxStart',
            'ajaxStop',
            'ajaxComplete',
            'ajaxError',
            'ajaxSuccess',
            'ajaxSend'], function (e, t) {
            w.fn[t] = function (e) {
                return this.on(t, e)
            }
        }),
        w.expr.pseudos.animated = function (e) {
            return w.grep(w.timers, function (t) {
                return e === t.elem
            }).length
        },
        w.offset = {
            setOffset: function (e, t, n) {
                var r,
                    i,
                    o,
                    a,
                    s,
                    u,
                    l,
                    c = w.css(e, 'position'),
                    f = w(e),
                    p = {}
                'static' === c && (e.style.position = 'relative'),
                    s = f.offset(),
                    o = w.css(e, 'top'),
                    u = w.css(e, 'left'),
                    (l = ('absolute' === c || 'fixed' === c) && (o + u).indexOf('auto') > -1) ? (a = (r = f.position()).top, i = r.left) : (a = parseFloat(o) || 0, i = parseFloat(u) || 0),
                g(t) && (t = t.call(e, n, w.extend({}, s))),
                null != t.top && (p.top = t.top - s.top + a),
                null != t.left && (p.left = t.left - s.left + i),
                    'using' in t ? t.using.call(e, p) : f.css(p)
            }
        },
        w.fn.extend({
            offset: function (e) {
                if (arguments.length) {
                    return void 0 === e ? this : this.each(function (t) {
                        w.offset.setOffset(this, e, t)
                    })
                }
                var t,
                    n,
                    r = this[0]
                if (r) {
                    return r.getClientRects().length ? (t = r.getBoundingClientRect(), n = r.ownerDocument.defaultView, {
                        top: t.top + n.pageYOffset,
                        left: t.left + n.pageXOffset
                    }) : {
                        top: 0,
                        left: 0
                    }
                }
            },
            position: function () {
                if (this[0]) {
                    var e,
                        t,
                        n,
                        r = this[0],
                        i = {
                            top: 0,
                            left: 0
                        }
                    if ('fixed' === w.css(r, 'position')) {
                        t = r.getBoundingClientRect()
                    } else {
                        t = this.offset(),
                            n = r.ownerDocument,
                            e = r.offsetParent || n.documentElement
                        while (e && (e === n.body || e === n.documentElement) && 'static' === w.css(e, 'position')) {
                            e = e.parentNode
                        }
                        e && e !== r && 1 === e.nodeType && ((i = w(e).offset()).top += w.css(e, 'borderTopWidth', !0), i.left += w.css(e, 'borderLeftWidth', !0))
                    }
                    return {
                        top: t.top - i.top - w.css(r, 'marginTop', !0),
                        left: t.left - i.left - w.css(r, 'marginLeft', !0)
                    }
                }
            },
            offsetParent: function () {
                return this.map(function () {
                    var e = this.offsetParent
                    while (e && 'static' === w.css(e, 'position')) {
                        e = e.offsetParent
                    }
                    return e || be
                })
            }
        }),
        w.each({
            scrollLeft: 'pageXOffset',
            scrollTop: 'pageYOffset'
        }, function (e, t) {
            var n = 'pageYOffset' === t
            w.fn[e] = function (r) {
                return z(this, function (e, r, i) {
                    var o
                    if (y(e) ? o = e : 9 === e.nodeType && (o = e.defaultView), void 0 === i) {
                        return o ? o[t] : e[r]
                    }
                    o ? o.scrollTo(n ? o.pageXOffset : i, n ? i : o.pageYOffset) : e[r] = i
                }, e, r, arguments.length)
            }
        }),
        w.each(['top',
            'left'], function (e, t) {
            w.cssHooks[t] = _e(h.pixelPosition, function (e, n) {
                if (n) {
                    return n = Fe(e, t),
                        We.test(n) ? w(e).position() [t] + 'px' : n
                }
            })
        }),
        w.each({
            Height: 'height',
            Width: 'width'
        }, function (e, t) {
            w.each({
                padding: 'inner' + e,
                content: t,
                '': 'outer' + e
            }, function (n, r) {
                w.fn[r] = function (i, o) {
                    var a = arguments.length && (n || 'boolean' != typeof i),
                        s = n || (!0 === i || !0 === o ? 'margin' : 'border')
                    return z(this, function (t, n, i) {
                        var o
                        return y(t) ? 0 === r.indexOf('outer') ? t['inner' + e] : t.document.documentElement['client' + e] : 9 === t.nodeType ? (o = t.documentElement, Math.max(t.body['scroll' + e], o['scroll' + e], t.body['offset' + e], o['offset' + e], o['client' + e])) : void 0 === i ? w.css(t, n, s) : w.style(t, n, i, s)
                    }, t, a ? i : void 0, a)
                }
            })
        }),
        w.each('blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu'.split(' '), function (e, t) {
            w.fn[t] = function (e, n) {
                return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
            }
        }),
        w.fn.extend({
            hover: function (e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            }
        }),
        w.fn.extend({
            bind: function (e, t, n) {
                return this.on(e, null, t, n)
            },
            unbind: function (e, t) {
                return this.off(e, null, t)
            },
            delegate: function (e, t, n, r) {
                return this.on(t, e, n, r)
            },
            undelegate: function (e, t, n) {
                return 1 === arguments.length ? this.off(e, '**') : this.off(t, e || '**', n)
            }
        }),
        w.proxy = function (e, t) {
            var n,
                r,
                i
            if ('string' == typeof t && (n = e[t], t = e, e = n), g(e)) {
                return r = o.call(arguments, 2),
                    i = function () {
                        return e.apply(t || this, r.concat(o.call(arguments)))
                    },
                    i.guid = e.guid = e.guid || w.guid++,
                    i
            }
        },
        w.holdReady = function (e) {
            e ? w.readyWait++ : w.ready(!0)
        },
        w.isArray = Array.isArray,
        w.parseJSON = JSON.parse,
        w.nodeName = N,
        w.isFunction = g,
        w.isWindow = y,
        w.camelCase = G,
        w.type = x,
        w.now = Date.now,
        w.isNumeric = function (e) {
            var t = w.type(e)
            return ('number' === t || 'string' === t) && !isNaN(e - parseFloat(e))
        },
    'function' == typeof define && define.amd && define('jquery', [], function () {
        return w
    })
    var Jt = e.jQuery,
        Kt = e.$
    return w.noConflict = function (t) {
        return e.$ === w && (e.$ = Kt),
        t && e.jQuery === w && (e.jQuery = Jt),
            w
    },
    t || (e.jQuery = e.$ = w),
        w
})
/*! jQuery Migrate v3.0.1 | (c) jQuery Foundation and other contributors | jquery.org/license */
void 0 === jQuery.migrateMute && (jQuery.migrateMute = !0),
    function (e) {
        'function' == typeof define && define.amd ? define(['jquery'], window, e) : 'object' == typeof module && module.exports ? module.exports = e(require('jquery'), window) : e(jQuery, window)
    }(function (e, t) {
        function r(r) {
            var n = t.console
            o[r] || (o[r] = !0, e.migrateWarnings.push(r), n && n.warn && !e.migrateMute && (n.warn('JQMIGRATE: ' + r), e.migrateTrace && n.trace && n.trace()))
        }

        function n(e, t, n, a) {
            Object.defineProperty(e, t, {
                configurable: !0,
                enumerable: !0,
                get: function () {
                    return r(a),
                        n
                },
                set: function (e) {
                    r(a),
                        n = e
                }
            })
        }

        function a(e, t, n, a) {
            e[t] = function () {
                return r(a),
                    n.apply(this, arguments)
            }
        }

        e.migrateVersion = '3.0.1',
            function () {
                var r = /^[12]\./
                t.console && t.console.log && (e && !r.test(e.fn.jquery) || t.console.log('JQMIGRATE: jQuery 3.0.0+ REQUIRED'), e.migrateWarnings && t.console.log('JQMIGRATE: Migrate plugin loaded multiple times'), t.console.log('JQMIGRATE: Migrate is installed' + (e.migrateMute ? '' : ' with logging active') + ', version ' + e.migrateVersion))
            }()
        var o = {}
        e.migrateWarnings = [],
        void 0 === e.migrateTrace && (e.migrateTrace = !0),
            e.migrateReset = function () {
                o = {},
                    e.migrateWarnings.length = 0
            },
        'BackCompat' === t.document.compatMode && r('jQuery is not compatible with Quirks Mode')
        var i = e.fn.init,
            s = e.isNumeric,
            u = e.find,
            c = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,
            l = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g
        e.fn.init = function (e) {
            var t = Array.prototype.slice.call(arguments)
            return 'string' == typeof e && '#' === e && (r('jQuery( \'#\' ) is not a valid selector'), t[0] = []),
                i.apply(this, t)
        },
            e.fn.init.prototype = e.fn,
            e.find = function (e) {
                var n = Array.prototype.slice.call(arguments)
                if ('string' == typeof e && c.test(e)) {
                    try {
                        t.document.querySelector(e)
                    } catch (a) {
                        e = e.replace(l, function (e, t, r, n) {
                            return '[' + t + r + '"' + n + '"]'
                        })
                        try {
                            t.document.querySelector(e),
                                r('Attribute selector with \'#\' must be quoted: ' + n[0]),
                                n[0] = e
                        } catch (e) {
                            r('Attribute selector with \'#\' was not fixed: ' + n[0])
                        }
                    }
                }
                return u.apply(this, n)
            }
        var d
        for (d in u) {
            Object.prototype.hasOwnProperty.call(u, d) && (e.find[d] = u[d])
        }
        e.fn.size = function () {
            return r('jQuery.fn.size() is deprecated and removed; use the .length property'),
                this.length
        },
            e.parseJSON = function () {
                return r('jQuery.parseJSON is deprecated; use JSON.parse'),
                    JSON.parse.apply(null, arguments)
            },
            e.isNumeric = function (t) {
                var n = s(t),
                    a = function (t) {
                        var r = t && t.toString()
                        return !e.isArray(t) && r - parseFloat(r) + 1 >= 0
                    }(t)
                return n !== a && r('jQuery.isNumeric() should not be called on constructed objects'),
                    a
            },
            a(e, 'holdReady', e.holdReady, 'jQuery.holdReady is deprecated'),
            a(e, 'unique', e.uniqueSort, 'jQuery.unique is deprecated; use jQuery.uniqueSort'),
            n(e.expr, 'filters', e.expr.pseudos, 'jQuery.expr.filters is deprecated; use jQuery.expr.pseudos'),
            n(e.expr, ':', e.expr.pseudos, 'jQuery.expr[\':\'] is deprecated; use jQuery.expr.pseudos')
        var p = e.ajax
        e.ajax = function () {
            var e = p.apply(this, arguments)
            return e.promise && (a(e, 'success', e.done, 'jQXHR.success is deprecated and removed'), a(e, 'error', e.fail, 'jQXHR.error is deprecated and removed'), a(e, 'complete', e.always, 'jQXHR.complete is deprecated and removed')),
                e
        }
        var f = e.fn.removeAttr,
            y = e.fn.toggleClass,
            m = /\S+/g
        e.fn.removeAttr = function (t) {
            var n = this
            return e.each(t.match(m), function (t, a) {
                e.expr.match.bool.test(a) && (r('jQuery.fn.removeAttr no longer sets boolean properties: ' + a), n.prop(a, !1))
            }),
                f.apply(this, arguments)
        },
            e.fn.toggleClass = function (t) {
                return void 0 !== t && 'boolean' != typeof t ? y.apply(this, arguments) : (r('jQuery.fn.toggleClass( boolean ) is deprecated'), this.each(function () {
                    var r = this.getAttribute && this.getAttribute('class') || ''
                    r && e.data(this, '__className__', r),
                    this.setAttribute && this.setAttribute('class', r || !1 === t ? '' : e.data(this, '__className__') || '')
                }))
            }
        var h = !1
        e.swap && e.each(['height',
            'width',
            'reliableMarginRight'], function (t, r) {
            var n = e.cssHooks[r] && e.cssHooks[r].get
            n && (e.cssHooks[r].get = function () {
                var e
                return h = !0,
                    e = n.apply(this, arguments),
                    h = !1,
                    e
            })
        }),
            e.swap = function (e, t, n, a) {
                var o,
                    i,
                    s = {}
                h || r('jQuery.swap() is undocumented and deprecated')
                for (i in t) {
                    s[i] = e.style[i],
                        e.style[i] = t[i]
                }
                o = n.apply(e, a || [])
                for (i in t) {
                    e.style[i] = s[i]
                }
                return o
            }
        var g = e.data
        e.data = function (t, n, a) {
            var o
            if (n && 'object' == typeof n && 2 === arguments.length) {
                o = e.hasData(t) && g.call(this, t)
                var i = {}
                for (var s in n) {
                    s !== e.camelCase(s) ? (r('jQuery.data() always sets/gets camelCased names: ' + s), o[s] = n[s]) : i[s] = n[s]
                }
                return g.call(this, t, i),
                    n
            }
            return n && 'string' == typeof n && n !== e.camelCase(n) && (o = e.hasData(t) && g.call(this, t)) && n in o ? (r('jQuery.data() always sets/gets camelCased names: ' + n), arguments.length > 2 && (o[n] = a), o[n]) : g.apply(this, arguments)
        }
        var v = e.Tween.prototype.run,
            j = function (e) {
                return e
            }
        e.Tween.prototype.run = function () {
            e.easing[this.easing].length > 1 && (r('\'jQuery.easing.' + this.easing.toString() + '\' should use only one argument'), e.easing[this.easing] = j),
                v.apply(this, arguments)
        },
            e.fx.interval = e.fx.interval || 13,
        t.requestAnimationFrame && n(e.fx, 'interval', e.fx.interval, 'jQuery.fx.interval is deprecated')
        var Q = e.fn.load,
            b = e.event.add,
            w = e.event.fix
        e.event.props = [],
            e.event.fixHooks = {},
            n(e.event.props, 'concat', e.event.props.concat, 'jQuery.event.props.concat() is deprecated and removed'),
            e.event.fix = function (t) {
                var n,
                    a = t.type,
                    o = this.fixHooks[a],
                    i = e.event.props
                if (i.length) {
                    for (r('jQuery.event.props are deprecated and removed: ' + i.join()); i.length;) {
                        e.event.addProp(i.pop())
                    }
                }
                if (o && !o._migrated_ && (o._migrated_ = !0, r('jQuery.event.fixHooks are deprecated and removed: ' + a), (i = o.props) && i.length)) {
                    for (; i.length;) {
                        e.event.addProp(i.pop())
                    }
                }
                return n = w.call(this, t),
                    o && o.filter ? o.filter(n, t) : n
            },
            e.event.add = function (e, n) {
                return e === t && 'load' === n && 'complete' === t.document.readyState && r('jQuery(window).on(\'load\'...) called after load event occurred'),
                    b.apply(this, arguments)
            },
            e.each(['load',
                'unload',
                'error'], function (t, n) {
                e.fn[n] = function () {
                    var e = Array.prototype.slice.call(arguments, 0)
                    return 'load' === n && 'string' == typeof e[0] ? Q.apply(this, e) : (r('jQuery.fn.' + n + '() is deprecated'), e.splice(0, 0, n), arguments.length ? this.on.apply(this, e) : (this.triggerHandler.apply(this, e), this))
                }
            }),
            e.each('blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu'.split(' '), function (t, n) {
                e.fn[n] = function (e, t) {
                    return r('jQuery.fn.' + n + '() event shorthand is deprecated'),
                        arguments.length > 0 ? this.on(n, null, e, t) : this.trigger(n)
                }
            }),
            e(function () {
                e(t.document).triggerHandler('ready')
            }),
            e.event.special.ready = {
                setup: function () {
                    this === t.document && r('\'ready\' event is deprecated')
                }
            },
            e.fn.extend({
                bind: function (e, t, n) {
                    return r('jQuery.fn.bind() is deprecated'),
                        this.on(e, null, t, n)
                },
                unbind: function (e, t) {
                    return r('jQuery.fn.unbind() is deprecated'),
                        this.off(e, null, t)
                },
                delegate: function (e, t, n, a) {
                    return r('jQuery.fn.delegate() is deprecated'),
                        this.on(t, e, n, a)
                },
                undelegate: function (e, t, n) {
                    return r('jQuery.fn.undelegate() is deprecated'),
                        1 === arguments.length ? this.off(e, '**') : this.off(t, e || '**', n)
                },
                hover: function (e, t) {
                    return r('jQuery.fn.hover() is deprecated'),
                        this.on('mouseenter', e).on('mouseleave', t || e)
                }
            })
        var x = e.fn.offset
        e.fn.offset = function () {
            var n,
                a = this[0],
                o = {
                    top: 0,
                    left: 0
                }
            return a && a.nodeType ? (n = (a.ownerDocument || t.document).documentElement, e.contains(n, a) ? x.apply(this, arguments) : (r('jQuery.fn.offset() requires an element connected to a document'), o)) : (r('jQuery.fn.offset() requires a valid DOM element'), o)
        }
        var k = e.param
        e.param = function (t, n) {
            var a = e.ajaxSettings && e.ajaxSettings.traditional
            return void 0 === n && a && (r('jQuery.param() no longer uses jQuery.ajaxSettings.traditional'), n = a),
                k.call(this, t, n)
        }
        var A = e.fn.andSelf || e.fn.addBack
        e.fn.andSelf = function () {
            return r('jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()'),
                A.apply(this, arguments)
        }
        var S = e.Deferred,
            q = [
                ['resolve',
                    'done',
                    e.Callbacks('once memory'),
                    e.Callbacks('once memory'),
                    'resolved'],
                [
                    'reject',
                    'fail',
                    e.Callbacks('once memory'),
                    e.Callbacks('once memory'),
                    'rejected'
                ],
                [
                    'notify',
                    'progress',
                    e.Callbacks('memory'),
                    e.Callbacks('memory')
                ]
            ]
        return e.Deferred = function (t) {
            var n = S(),
                a = n.promise()
            return n.pipe = a.pipe = function () {
                var t = arguments
                return r('deferred.pipe() is deprecated'),
                    e.Deferred(function (r) {
                        e.each(q, function (o, i) {
                            var s = e.isFunction(t[o]) && t[o]
                            n[i[1]](function () {
                                var t = s && s.apply(this, arguments)
                                t && e.isFunction(t.promise) ? t.promise().done(r.resolve).fail(r.reject).progress(r.notify) : r[i[0] + 'With'](this === a ? r.promise() : this, s ? [
                                    t
                                ] : arguments)
                            })
                        }),
                            t = null
                    }).promise()
            },
            t && t.call(n, n),
                n
        },
            e.Deferred.exceptionHook = S.exceptionHook,
            e
    });
/*! jQuery UI - v1.12.1 - 2017-06-25
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/selectmenu.js, widgets/slider.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function (t) {
    'function' == typeof define && define.amd ? define(['jquery'], t) : t(jQuery)
})(function (t) {
    function e(t) {
        for (var e = t.css('visibility'); 'inherit' === e;) {
            t = t.parent(),
                e = t.css('visibility')
        }
        return 'hidden' !== e
    }

    function i(t) {
        for (var e, i; t.length && t[0] !== document;) {
            if (e = t.css('position'), ('absolute' === e || 'relative' === e || 'fixed' === e) && (i = parseInt(t.css('zIndex'), 10), !isNaN(i) && 0 !== i)) {
                return i
            }
            t = t.parent()
        }
        return 0
    }

    function s() {
        this._curInst = null,
            this._keyEvent = !1,
            this._disabledInputs = [],
            this._datepickerShowing = !1,
            this._inDialog = !1,
            this._mainDivId = 'ui-datepicker-div',
            this._inlineClass = 'ui-datepicker-inline',
            this._appendClass = 'ui-datepicker-append',
            this._triggerClass = 'ui-datepicker-trigger',
            this._dialogClass = 'ui-datepicker-dialog',
            this._disableClass = 'ui-datepicker-disabled',
            this._unselectableClass = 'ui-datepicker-unselectable',
            this._currentClass = 'ui-datepicker-current-day',
            this._dayOverClass = 'ui-datepicker-days-cell-over',
            this.regional = [],
            this.regional[''] = {
                closeText: 'Done',
                prevText: 'Prev',
                nextText: 'Next',
                currentText: 'Today',
                monthNames: [
                    'January',
                    'February',
                    'March',
                    'April',
                    'May',
                    'June',
                    'July',
                    'August',
                    'September',
                    'October',
                    'November',
                    'December'
                ],
                monthNamesShort: [
                    'Jan',
                    'Feb',
                    'Mar',
                    'Apr',
                    'May',
                    'Jun',
                    'Jul',
                    'Aug',
                    'Sep',
                    'Oct',
                    'Nov',
                    'Dec'
                ],
                dayNames: [
                    'Sunday',
                    'Monday',
                    'Tuesday',
                    'Wednesday',
                    'Thursday',
                    'Friday',
                    'Saturday'
                ],
                dayNamesShort: [
                    'Sun',
                    'Mon',
                    'Tue',
                    'Wed',
                    'Thu',
                    'Fri',
                    'Sat'
                ],
                dayNamesMin: [
                    'Su',
                    'Mo',
                    'Tu',
                    'We',
                    'Th',
                    'Fr',
                    'Sa'
                ],
                weekHeader: 'Wk',
                dateFormat: 'mm/dd/yy',
                firstDay: 0,
                isRTL: !1,
                showMonthAfterYear: !1,
                yearSuffix: ''
            },
            this._defaults = {
                showOn: 'focus',
                showAnim: 'fadeIn',
                showOptions: {},
                defaultDate: null,
                appendText: '',
                buttonText: '...',
                buttonImage: '',
                buttonImageOnly: !1,
                hideIfNoPrevNext: !1,
                navigationAsDateFormat: !1,
                gotoCurrent: !1,
                changeMonth: !1,
                changeYear: !1,
                yearRange: 'c-10:c+10',
                showOtherMonths: !1,
                selectOtherMonths: !1,
                showWeek: !1,
                calculateWeek: this.iso8601Week,
                shortYearCutoff: '+10',
                minDate: null,
                maxDate: null,
                duration: 'fast',
                beforeShowDay: null,
                beforeShow: null,
                onSelect: null,
                onChangeMonthYear: null,
                onClose: null,
                numberOfMonths: 1,
                showCurrentAtPos: 0,
                stepMonths: 1,
                stepBigMonths: 12,
                altField: '',
                altFormat: '',
                constrainInput: !0,
                showButtonPanel: !1,
                autoSize: !1,
                disabled: !1
            },
            t.extend(this._defaults, this.regional['']),
            this.regional.en = t.extend(!0, {}, this.regional['']),
            this.regional['en-US'] = t.extend(!0, {}, this.regional.en),
            this.dpDiv = n(t('<div id=\'' + this._mainDivId + '\' class=\'ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all\'></div>'))
    }

    function n(e) {
        var i = 'button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a'
        return e.on('mouseout', i, function () {
            t(this).removeClass('ui-state-hover'),
            -1 !== this.className.indexOf('ui-datepicker-prev') && t(this).removeClass('ui-datepicker-prev-hover'),
            -1 !== this.className.indexOf('ui-datepicker-next') && t(this).removeClass('ui-datepicker-next-hover')
        }).on('mouseover', i, o)
    }

    function o() {
        t.datepicker._isDisabledDatepicker(p.inline ? p.dpDiv.parent() [0] : p.input[0]) || (t(this).parents('.ui-datepicker-calendar').find('a').removeClass('ui-state-hover'), t(this).addClass('ui-state-hover'), -1 !== this.className.indexOf('ui-datepicker-prev') && t(this).addClass('ui-datepicker-prev-hover'), -1 !== this.className.indexOf('ui-datepicker-next') && t(this).addClass('ui-datepicker-next-hover'))
    }

    function a(e, i) {
        t.extend(e, i)
        for (var s in i) {
            null == i[s] && (e[s] = i[s])
        }
        return e
    }

    function r(t) {
        return function () {
            var e = this.element.val()
            t.apply(this, arguments),
                this._refresh(),
            e !== this.element.val() && this._trigger('change')
        }
    }

    t.ui = t.ui || {},
        t.ui.version = '1.12.1'
    var h = 0,
        l = Array.prototype.slice
    t.cleanData = function (e) {
        return function (i) {
            var s,
                n,
                o
            for (o = 0; null != (n = i[o]); o++) {
                try {
                    s = t._data(n, 'events'),
                    s && s.remove && t(n).triggerHandler('remove')
                } catch (a) {
                }
            }
            e(i)
        }
    }(t.cleanData),
        t.widget = function (e, i, s) {
            var n,
                o,
                a,
                r = {},
                h = e.split('.') [0]
            e = e.split('.') [1]
            var l = h + '-' + e
            return s || (s = i, i = t.Widget),
            t.isArray(s) && (s = t.extend.apply(null, [
                {}
            ].concat(s))),
                t.expr[':'][l.toLowerCase()] = function (e) {
                    return !!t.data(e, l)
                },
                t[h] = t[h] || {},
                n = t[h][e],
                o = t[h][e] = function (t, e) {
                    return this._createWidget ? (arguments.length && this._createWidget(t, e), void 0) : new o(t, e)
                },
                t.extend(o, n, {
                    version: s.version,
                    _proto: t.extend({}, s),
                    _childConstructors: []
                }),
                a = new i,
                a.options = t.widget.extend({}, a.options),
                t.each(s, function (e, s) {
                    return t.isFunction(s) ? (r[e] = function () {
                        function t() {
                            return i.prototype[e].apply(this, arguments)
                        }

                        function n(t) {
                            return i.prototype[e].apply(this, t)
                        }

                        return function () {
                            var e,
                                i = this._super,
                                o = this._superApply
                            return this._super = t,
                                this._superApply = n,
                                e = s.apply(this, arguments),
                                this._super = i,
                                this._superApply = o,
                                e
                        }
                    }(), void 0) : (r[e] = s, void 0)
                }),
                o.prototype = t.widget.extend(a, {
                    widgetEventPrefix: n ? a.widgetEventPrefix || e : e
                }, r, {
                    constructor: o,
                    namespace: h,
                    widgetName: e,
                    widgetFullName: l
                }),
                n ? (t.each(n._childConstructors, function (e, i) {
                    var s = i.prototype
                    t.widget(s.namespace + '.' + s.widgetName, o, i._proto)
                }), delete n._childConstructors) : i._childConstructors.push(o),
                t.widget.bridge(e, o),
                o
        },
        t.widget.extend = function (e) {
            for (var i, s, n = l.call(arguments, 1), o = 0, a = n.length; a > o; o++) {
                for (i in n[o]) {
                    s = n[o][i],
                    n[o].hasOwnProperty(i) && void 0 !== s && (e[i] = t.isPlainObject(s) ? t.isPlainObject(e[i]) ? t.widget.extend({}, e[i], s) : t.widget.extend({}, s) : s)
                }
            }
            return e
        },
        t.widget.bridge = function (e, i) {
            var s = i.prototype.widgetFullName || e
            t.fn[e] = function (n) {
                var o = 'string' == typeof n,
                    a = l.call(arguments, 1),
                    r = this
                return o ? this.length || 'instance' !== n ? this.each(function () {
                    var i,
                        o = t.data(this, s)
                    return 'instance' === n ? (r = o, !1) : o ? t.isFunction(o[n]) && '_' !== n.charAt(0) ? (i = o[n].apply(o, a), i !== o && void 0 !== i ? (r = i && i.jquery ? r.pushStack(i.get()) : i, !1) : void 0) : t.error('no such method \'' + n + '\' for ' + e + ' widget instance') : t.error('cannot call methods on ' + e + ' prior to initialization; attempted to call method \'' + n + '\'')
                }) : r = void 0 : (a.length && (n = t.widget.extend.apply(null, [
                    n
                ].concat(a))), this.each(function () {
                    var e = t.data(this, s)
                    e ? (e.option(n || {}), e._init && e._init()) : t.data(this, s, new i(n, this))
                })),
                    r
            }
        },
        t.Widget = function () {
        },
        t.Widget._childConstructors = [],
        t.Widget.prototype = {
            widgetName: 'widget',
            widgetEventPrefix: '',
            defaultElement: '<div>',
            options: {
                classes: {},
                disabled: !1,
                create: null
            },
            _createWidget: function (e, i) {
                i = t(i || this.defaultElement || this) [0],
                    this.element = t(i),
                    this.uuid = h++,
                    this.eventNamespace = '.' + this.widgetName + this.uuid,
                    this.bindings = t(),
                    this.hoverable = t(),
                    this.focusable = t(),
                    this.classesElementLookup = {},
                i !== this && (t.data(i, this.widgetFullName, this), this._on(!0, this.element, {
                    remove: function (t) {
                        t.target === i && this.destroy()
                    }
                }), this.document = t(i.style ? i.ownerDocument : i.document || i), this.window = t(this.document[0].defaultView || this.document[0].parentWindow)),
                    this.options = t.widget.extend({}, this.options, this._getCreateOptions(), e),
                    this._create(),
                this.options.disabled && this._setOptionDisabled(this.options.disabled),
                    this._trigger('create', null, this._getCreateEventData()),
                    this._init()
            },
            _getCreateOptions: function () {
                return {}
            },
            _getCreateEventData: t.noop,
            _create: t.noop,
            _init: t.noop,
            destroy: function () {
                var e = this
                this._destroy(),
                    t.each(this.classesElementLookup, function (t, i) {
                        e._removeClass(i, t)
                    }),
                    this.element.off(this.eventNamespace).removeData(this.widgetFullName),
                    this.widget().off(this.eventNamespace).removeAttr('aria-disabled'),
                    this.bindings.off(this.eventNamespace)
            },
            _destroy: t.noop,
            widget: function () {
                return this.element
            },
            option: function (e, i) {
                var s,
                    n,
                    o,
                    a = e
                if (0 === arguments.length) {
                    return t.widget.extend({}, this.options)
                }
                if ('string' == typeof e) {
                    if (a = {}, s = e.split('.'), e = s.shift(), s.length) {
                        for (n = a[e] = t.widget.extend({}, this.options[e]), o = 0; s.length - 1 > o; o++) {
                            n[s[o]] = n[s[o]] || {},
                                n = n[s[o]]
                        }
                        if (e = s.pop(), 1 === arguments.length) {
                            return void 0 === n[e] ? null : n[e]
                        }
                        n[e] = i
                    } else {
                        if (1 === arguments.length) {
                            return void 0 === this.options[e] ? null : this.options[e]
                        }
                        a[e] = i
                    }
                }
                return this._setOptions(a),
                    this
            },
            _setOptions: function (t) {
                var e
                for (e in t) {
                    this._setOption(e, t[e])
                }
                return this
            },
            _setOption: function (t, e) {
                return 'classes' === t && this._setOptionClasses(e),
                    this.options[t] = e,
                'disabled' === t && this._setOptionDisabled(e),
                    this
            },
            _setOptionClasses: function (e) {
                var i,
                    s,
                    n
                for (i in e) {
                    n = this.classesElementLookup[i],
                    e[i] !== this.options.classes[i] && n && n.length && (s = t(n.get()), this._removeClass(n, i), s.addClass(this._classes({
                        element: s,
                        keys: i,
                        classes: e,
                        add: !0
                    })))
                }
            },
            _setOptionDisabled: function (t) {
                this._toggleClass(this.widget(), this.widgetFullName + '-disabled', null, !!t),
                t && (this._removeClass(this.hoverable, null, 'ui-state-hover'), this._removeClass(this.focusable, null, 'ui-state-focus'))
            },
            enable: function () {
                return this._setOptions({
                    disabled: !1
                })
            },
            disable: function () {
                return this._setOptions({
                    disabled: !0
                })
            },
            _classes: function (e) {
                function i(i, o) {
                    var a,
                        r
                    for (r = 0; i.length > r; r++) {
                        a = n.classesElementLookup[i[r]] || t(),
                            a = e.add ? t(t.unique(a.get().concat(e.element.get()))) : t(a.not(e.element).get()),
                            n.classesElementLookup[i[r]] = a,
                            s.push(i[r]),
                        o && e.classes[i[r]] && s.push(e.classes[i[r]])
                    }
                }

                var s = [],
                    n = this
                return e = t.extend({
                    element: this.element,
                    classes: this.options.classes || {}
                }, e),
                    this._on(e.element, {
                        remove: '_untrackClassesElement'
                    }),
                e.keys && i(e.keys.match(/\S+/g) || [], !0),
                e.extra && i(e.extra.match(/\S+/g) || []),
                    s.join(' ')
            },
            _untrackClassesElement: function (e) {
                var i = this
                t.each(i.classesElementLookup, function (s, n) {
                    -1 !== t.inArray(e.target, n) && (i.classesElementLookup[s] = t(n.not(e.target).get()))
                })
            },
            _removeClass: function (t, e, i) {
                return this._toggleClass(t, e, i, !1)
            },
            _addClass: function (t, e, i) {
                return this._toggleClass(t, e, i, !0)
            },
            _toggleClass: function (t, e, i, s) {
                s = 'boolean' == typeof s ? s : i
                var n = 'string' == typeof t || null === t,
                    o = {
                        extra: n ? e : i,
                        keys: n ? t : e,
                        element: n ? this.element : t,
                        add: s
                    }
                return o.element.toggleClass(this._classes(o), s),
                    this
            },
            _on: function (e, i, s) {
                var n,
                    o = this
                'boolean' != typeof e && (s = i, i = e, e = !1),
                    s ? (i = n = t(i), this.bindings = this.bindings.add(i)) : (s = i, i = this.element, n = this.widget()),
                    t.each(s, function (s, a) {
                        function r() {
                            return e || o.options.disabled !== !0 && !t(this).hasClass('ui-state-disabled') ? ('string' == typeof a ? o[a] : a).apply(o, arguments) : void 0
                        }

                        'string' != typeof a && (r.guid = a.guid = a.guid || r.guid || t.guid++)
                        var h = s.match(/^([\w:-]*)\s*(.*)$/),
                            l = h[1] + o.eventNamespace,
                            c = h[2]
                        c ? n.on(l, c, r) : i.on(l, r)
                    })
            },
            _off: function (e, i) {
                i = (i || '').split(' ').join(this.eventNamespace + ' ') + this.eventNamespace,
                    e.off(i).off(i),
                    this.bindings = t(this.bindings.not(e).get()),
                    this.focusable = t(this.focusable.not(e).get()),
                    this.hoverable = t(this.hoverable.not(e).get())
            },
            _delay: function (t, e) {
                function i() {
                    return ('string' == typeof t ? s[t] : t).apply(s, arguments)
                }

                var s = this
                return setTimeout(i, e || 0)
            },
            _hoverable: function (e) {
                this.hoverable = this.hoverable.add(e),
                    this._on(e, {
                        mouseenter: function (e) {
                            this._addClass(t(e.currentTarget), null, 'ui-state-hover')
                        },
                        mouseleave: function (e) {
                            this._removeClass(t(e.currentTarget), null, 'ui-state-hover')
                        }
                    })
            },
            _focusable: function (e) {
                this.focusable = this.focusable.add(e),
                    this._on(e, {
                        focusin: function (e) {
                            this._addClass(t(e.currentTarget), null, 'ui-state-focus')
                        },
                        focusout: function (e) {
                            this._removeClass(t(e.currentTarget), null, 'ui-state-focus')
                        }
                    })
            },
            _trigger: function (e, i, s) {
                var n,
                    o,
                    a = this.options[e]
                if (s = s || {}, i = t.Event(i), i.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase(), i.target = this.element[0], o = i.originalEvent) {
                    for (n in o) {
                        n in i || (i[n] = o[n])
                    }
                }
                return this.element.trigger(i, s),
                    !(t.isFunction(a) && a.apply(this.element[0], [
                        i
                    ].concat(s)) === !1 || i.isDefaultPrevented())
            }
        },
        t.each({
            show: 'fadeIn',
            hide: 'fadeOut'
        }, function (e, i) {
            t.Widget.prototype['_' + e] = function (s, n, o) {
                'string' == typeof n && (n = {
                    effect: n
                })
                var a,
                    r = n ? n === !0 || 'number' == typeof n ? i : n.effect || i : e
                n = n || {},
                'number' == typeof n && (n = {
                    duration: n
                }),
                    a = !t.isEmptyObject(n),
                    n.complete = o,
                n.delay && s.delay(n.delay),
                    a && t.effects && t.effects.effect[r] ? s[e](n) : r !== e && s[r] ? s[r](n.duration, n.easing, o) : s.queue(function (i) {
                        t(this) [e](),
                        o && o.call(s[0]),
                            i()
                    })
            }
        }),
        t.widget,
        function () {
            function e(t, e, i) {
                return [parseFloat(t[0]) * (u.test(t[0]) ? e / 100 : 1),
                    parseFloat(t[1]) * (u.test(t[1]) ? i / 100 : 1)]
            }

            function i(e, i) {
                return parseInt(t.css(e, i), 10) || 0
            }

            function s(e) {
                var i = e[0]
                return 9 === i.nodeType ? {
                        width: e.width(),
                        height: e.height(),
                        offset: {
                            top: 0,
                            left: 0
                        }
                    }
                    : t.isWindow(i) ? {
                            width: e.width(),
                            height: e.height(),
                            offset: {
                                top: e.scrollTop(),
                                left: e.scrollLeft()
                            }
                        }
                        : i.preventDefault ? {
                                width: 0,
                                height: 0,
                                offset: {
                                    top: i.pageY,
                                    left: i.pageX
                                }
                            }
                            : {
                                width: e.outerWidth(),
                                height: e.outerHeight(),
                                offset: e.offset()
                            }
            }

            var n,
                o = Math.max,
                a = Math.abs,
                r = /left|center|right/,
                h = /top|center|bottom/,
                l = /[\+\-]\d+(\.[\d]+)?%?/,
                c = /^\w+/,
                u = /%$/,
                d = t.fn.position
            t.position = {
                scrollbarWidth: function () {
                    if (void 0 !== n) {
                        return n
                    }
                    var e,
                        i,
                        s = t('<div style=\'display:block;position:absolute;width:50px;height:50px;overflow:hidden;\'><div style=\'height:100px;width:auto;\'></div></div>'),
                        o = s.children() [0]
                    return t('body').append(s),
                        e = o.offsetWidth,
                        s.css('overflow', 'scroll'),
                        i = o.offsetWidth,
                    e === i && (i = s[0].clientWidth),
                        s.remove(),
                        n = e - i
                },
                getScrollInfo: function (e) {
                    var i = e.isWindow || e.isDocument ? '' : e.element.css('overflow-x'),
                        s = e.isWindow || e.isDocument ? '' : e.element.css('overflow-y'),
                        n = 'scroll' === i || 'auto' === i && e.width < e.element[0].scrollWidth,
                        o = 'scroll' === s || 'auto' === s && e.height < e.element[0].scrollHeight
                    return {
                        width: o ? t.position.scrollbarWidth() : 0,
                        height: n ? t.position.scrollbarWidth() : 0
                    }
                },
                getWithinInfo: function (e) {
                    var i = t(e || window),
                        s = t.isWindow(i[0]),
                        n = !!i[0] && 9 === i[0].nodeType,
                        o = !s && !n
                    return {
                        element: i,
                        isWindow: s,
                        isDocument: n,
                        offset: o ? t(e).offset() : {
                            left: 0,
                            top: 0
                        },
                        scrollLeft: i.scrollLeft(),
                        scrollTop: i.scrollTop(),
                        width: i.outerWidth(),
                        height: i.outerHeight()
                    }
                }
            },
                t.fn.position = function (n) {
                    if (!n || !n.of) {
                        return d.apply(this, arguments)
                    }
                    n = t.extend({}, n)
                    var u,
                        p,
                        f,
                        g,
                        m,
                        _,
                        v = t(n.of),
                        b = t.position.getWithinInfo(n.within),
                        y = t.position.getScrollInfo(b),
                        w = (n.collision || 'flip').split(' '),
                        k = {}
                    return _ = s(v),
                    v[0].preventDefault && (n.at = 'left top'),
                        p = _.width,
                        f = _.height,
                        g = _.offset,
                        m = t.extend({}, g),
                        t.each(['my',
                            'at'], function () {
                            var t,
                                e,
                                i = (n[this] || '').split(' ')
                            1 === i.length && (i = r.test(i[0]) ? i.concat(['center']) : h.test(i[0]) ? [
                                'center'
                            ].concat(i) : [
                                'center',
                                'center'
                            ]),
                                i[0] = r.test(i[0]) ? i[0] : 'center',
                                i[1] = h.test(i[1]) ? i[1] : 'center',
                                t = l.exec(i[0]),
                                e = l.exec(i[1]),
                                k[this] = [
                                    t ? t[0] : 0,
                                    e ? e[0] : 0
                                ],
                                n[this] = [
                                    c.exec(i[0]) [0],
                                    c.exec(i[1]) [0]
                                ]
                        }),
                    1 === w.length && (w[1] = w[0]),
                        'right' === n.at[0] ? m.left += p : 'center' === n.at[0] && (m.left += p / 2),
                        'bottom' === n.at[1] ? m.top += f : 'center' === n.at[1] && (m.top += f / 2),
                        u = e(k.at, p, f),
                        m.left += u[0],
                        m.top += u[1],
                        this.each(function () {
                            var s,
                                r,
                                h = t(this),
                                l = h.outerWidth(),
                                c = h.outerHeight(),
                                d = i(this, 'marginLeft'),
                                _ = i(this, 'marginTop'),
                                x = l + d + i(this, 'marginRight') + y.width,
                                C = c + _ + i(this, 'marginBottom') + y.height,
                                D = t.extend({}, m),
                                I = e(k.my, h.outerWidth(), h.outerHeight())
                            'right' === n.my[0] ? D.left -= l : 'center' === n.my[0] && (D.left -= l / 2),
                                'bottom' === n.my[1] ? D.top -= c : 'center' === n.my[1] && (D.top -= c / 2),
                                D.left += I[0],
                                D.top += I[1],
                                s = {
                                    marginLeft: d,
                                    marginTop: _
                                },
                                t.each(['left',
                                    'top'], function (e, i) {
                                    t.ui.position[w[e]] && t.ui.position[w[e]][i](D, {
                                        targetWidth: p,
                                        targetHeight: f,
                                        elemWidth: l,
                                        elemHeight: c,
                                        collisionPosition: s,
                                        collisionWidth: x,
                                        collisionHeight: C,
                                        offset: [
                                            u[0] + I[0],
                                            u[1] + I[1]
                                        ],
                                        my: n.my,
                                        at: n.at,
                                        within: b,
                                        elem: h
                                    })
                                }),
                            n.using && (r = function (t) {
                                var e = g.left - D.left,
                                    i = e + p - l,
                                    s = g.top - D.top,
                                    r = s + f - c,
                                    u = {
                                        target: {
                                            element: v,
                                            left: g.left,
                                            top: g.top,
                                            width: p,
                                            height: f
                                        },
                                        element: {
                                            element: h,
                                            left: D.left,
                                            top: D.top,
                                            width: l,
                                            height: c
                                        },
                                        horizontal: 0 > i ? 'left' : e > 0 ? 'right' : 'center',
                                        vertical: 0 > r ? 'top' : s > 0 ? 'bottom' : 'middle'
                                    }
                                l > p && p > a(e + i) && (u.horizontal = 'center'),
                                c > f && f > a(s + r) && (u.vertical = 'middle'),
                                    u.important = o(a(e), a(i)) > o(a(s), a(r)) ? 'horizontal' : 'vertical',
                                    n.using.call(this, t, u)
                            }),
                                h.offset(t.extend(D, {
                                    using: r
                                }))
                        })
                },
                t.ui.position = {
                    fit: {
                        left: function (t, e) {
                            var i,
                                s = e.within,
                                n = s.isWindow ? s.scrollLeft : s.offset.left,
                                a = s.width,
                                r = t.left - e.collisionPosition.marginLeft,
                                h = n - r,
                                l = r + e.collisionWidth - a - n
                            e.collisionWidth > a ? h > 0 && 0 >= l ? (i = t.left + h + e.collisionWidth - a - n, t.left += h - i) : t.left = l > 0 && 0 >= h ? n : h > l ? n + a - e.collisionWidth : n : h > 0 ? t.left += h : l > 0 ? t.left -= l : t.left = o(t.left - r, t.left)
                        },
                        top: function (t, e) {
                            var i,
                                s = e.within,
                                n = s.isWindow ? s.scrollTop : s.offset.top,
                                a = e.within.height,
                                r = t.top - e.collisionPosition.marginTop,
                                h = n - r,
                                l = r + e.collisionHeight - a - n
                            e.collisionHeight > a ? h > 0 && 0 >= l ? (i = t.top + h + e.collisionHeight - a - n, t.top += h - i) : t.top = l > 0 && 0 >= h ? n : h > l ? n + a - e.collisionHeight : n : h > 0 ? t.top += h : l > 0 ? t.top -= l : t.top = o(t.top - r, t.top)
                        }
                    },
                    flip: {
                        left: function (t, e) {
                            var i,
                                s,
                                n = e.within,
                                o = n.offset.left + n.scrollLeft,
                                r = n.width,
                                h = n.isWindow ? n.scrollLeft : n.offset.left,
                                l = t.left - e.collisionPosition.marginLeft,
                                c = l - h,
                                u = l + e.collisionWidth - r - h,
                                d = 'left' === e.my[0] ? -e.elemWidth : 'right' === e.my[0] ? e.elemWidth : 0,
                                p = 'left' === e.at[0] ? e.targetWidth : 'right' === e.at[0] ? -e.targetWidth : 0,
                                f = -2 * e.offset[0]
                            0 > c ? (i = t.left + d + p + f + e.collisionWidth - r - o, (0 > i || a(c) > i) && (t.left += d + p + f)) : u > 0 && (s = t.left - e.collisionPosition.marginLeft + d + p + f - h, (s > 0 || u > a(s)) && (t.left += d + p + f))
                        },
                        top: function (t, e) {
                            var i,
                                s,
                                n = e.within,
                                o = n.offset.top + n.scrollTop,
                                r = n.height,
                                h = n.isWindow ? n.scrollTop : n.offset.top,
                                l = t.top - e.collisionPosition.marginTop,
                                c = l - h,
                                u = l + e.collisionHeight - r - h,
                                d = 'top' === e.my[1],
                                p = d ? -e.elemHeight : 'bottom' === e.my[1] ? e.elemHeight : 0,
                                f = 'top' === e.at[1] ? e.targetHeight : 'bottom' === e.at[1] ? -e.targetHeight : 0,
                                g = -2 * e.offset[1]
                            0 > c ? (s = t.top + p + f + g + e.collisionHeight - r - o, (0 > s || a(c) > s) && (t.top += p + f + g)) : u > 0 && (i = t.top - e.collisionPosition.marginTop + p + f + g - h, (i > 0 || u > a(i)) && (t.top += p + f + g))
                        }
                    },
                    flipfit: {
                        left: function () {
                            t.ui.position.flip.left.apply(this, arguments),
                                t.ui.position.fit.left.apply(this, arguments)
                        },
                        top: function () {
                            t.ui.position.flip.top.apply(this, arguments),
                                t.ui.position.fit.top.apply(this, arguments)
                        }
                    }
                }
        }(),
        t.ui.position,
        t.extend(t.expr[':'], {
            data: t.expr.createPseudo ? t.expr.createPseudo(function (e) {
                return function (i) {
                    return !!t.data(i, e)
                }
            }) : function (e, i, s) {
                return !!t.data(e, s[3])
            }
        }),
        t.fn.extend({
            disableSelection: function () {
                var t = 'onselectstart' in document.createElement('div') ? 'selectstart' : 'mousedown'
                return function () {
                    return this.on(t + '.ui-disableSelection', function (t) {
                        t.preventDefault()
                    })
                }
            }(),
            enableSelection: function () {
                return this.off('.ui-disableSelection')
            }
        }),
        t.ui.focusable = function (i, s) {
            var n,
                o,
                a,
                r,
                h,
                l = i.nodeName.toLowerCase()
            return 'area' === l ? (n = i.parentNode, o = n.name, i.href && o && 'map' === n.nodeName.toLowerCase() ? (a = t('img[usemap=\'#' + o + '\']'), a.length > 0 && a.is(':visible')) : !1) : (/^(input|select|textarea|button|object)$/.test(l) ? (r = !i.disabled, r && (h = t(i).closest('fieldset') [0], h && (r = !h.disabled))) : r = 'a' === l ? i.href || s : s, r && t(i).is(':visible') && e(t(i)))
        },
        t.extend(t.expr[':'], {
            focusable: function (e) {
                return t.ui.focusable(e, null != t.attr(e, 'tabindex'))
            }
        }),
        t.ui.focusable,
        t.fn.form = function () {
            return 'string' == typeof this[0].form ? this.closest('form') : t(this[0].form)
        },
        t.ui.formResetMixin = {
            _formResetHandler: function () {
                var e = t(this)
                setTimeout(function () {
                    var i = e.data('ui-form-reset-instances')
                    t.each(i, function () {
                        this.refresh()
                    })
                })
            },
            _bindFormResetHandler: function () {
                if (this.form = this.element.form(), this.form.length) {
                    var t = this.form.data('ui-form-reset-instances') || []
                    t.length || this.form.on('reset.ui-form-reset', this._formResetHandler),
                        t.push(this),
                        this.form.data('ui-form-reset-instances', t)
                }
            },
            _unbindFormResetHandler: function () {
                if (this.form.length) {
                    var e = this.form.data('ui-form-reset-instances')
                    e.splice(t.inArray(this, e), 1),
                        e.length ? this.form.data('ui-form-reset-instances', e) : this.form.removeData('ui-form-reset-instances').off('reset.ui-form-reset')
                }
            }
        },
    '1.7' === t.fn.jquery.substring(0, 3) && (t.each(['Width',
        'Height'], function (e, i) {
        function s(e, i, s, o) {
            return t.each(n, function () {
                i -= parseFloat(t.css(e, 'padding' + this)) || 0,
                s && (i -= parseFloat(t.css(e, 'border' + this + 'Width')) || 0),
                o && (i -= parseFloat(t.css(e, 'margin' + this)) || 0)
            }),
                i
        }

        var n = 'Width' === i ? [
                'Left',
                'Right'
            ] : [
                'Top',
                'Bottom'
            ],
            o = i.toLowerCase(),
            a = {
                innerWidth: t.fn.innerWidth,
                innerHeight: t.fn.innerHeight,
                outerWidth: t.fn.outerWidth,
                outerHeight: t.fn.outerHeight
            }
        t.fn['inner' + i] = function (e) {
            return void 0 === e ? a['inner' + i].call(this) : this.each(function () {
                t(this).css(o, s(this, e) + 'px')
            })
        },
            t.fn['outer' + i] = function (e, n) {
                return 'number' != typeof e ? a['outer' + i].call(this, e) : this.each(function () {
                    t(this).css(o, s(this, e, !0, n) + 'px')
                })
            }
    }), t.fn.addBack = function (t) {
        return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
    }),
        t.ui.keyCode = {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        },
        t.ui.escapeSelector = function () {
            var t = /([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g
            return function (e) {
                return e.replace(t, '\\$1')
            }
        }(),
        t.fn.labels = function () {
            var e,
                i,
                s,
                n,
                o
            return this[0].labels && this[0].labels.length ? this.pushStack(this[0].labels) : (n = this.eq(0).parents('label'), s = this.attr('id'), s && (e = this.eq(0).parents().last(), o = e.add(e.length ? e.siblings() : this.siblings()), i = 'label[for=\'' + t.ui.escapeSelector(s) + '\']', n = n.add(o.find(i).addBack(i))), this.pushStack(n))
        },
        t.fn.scrollParent = function (e) {
            var i = this.css('position'),
                s = 'absolute' === i,
                n = e ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
                o = this.parents().filter(function () {
                    var e = t(this)
                    return s && 'static' === e.css('position') ? !1 : n.test(e.css('overflow') + e.css('overflow-y') + e.css('overflow-x'))
                }).eq(0)
            return 'fixed' !== i && o.length ? o : t(this[0].ownerDocument || document)
        },
        t.extend(t.expr[':'], {
            tabbable: function (e) {
                var i = t.attr(e, 'tabindex'),
                    s = null != i
                return (!s || i >= 0) && t.ui.focusable(e, s)
            }
        }),
        t.fn.extend({
            uniqueId: function () {
                var t = 0
                return function () {
                    return this.each(function () {
                        this.id || (this.id = 'ui-id-' + ++t)
                    })
                }
            }(),
            removeUniqueId: function () {
                return this.each(function () {
                    /^ui-id-\d+$/.test(this.id) && t(this).removeAttr('id')
                })
            }
        }),
        t.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())
    var c = !1
    t(document).on('mouseup', function () {
        c = !1
    }),
        t.widget('ui.mouse', {
            version: '1.12.1',
            options: {
                cancel: 'input, textarea, button, select, option',
                distance: 1,
                delay: 0
            },
            _mouseInit: function () {
                var e = this
                this.element.on('mousedown.' + this.widgetName, function (t) {
                    return e._mouseDown(t)
                }).on('click.' + this.widgetName, function (i) {
                    return !0 === t.data(i.target, e.widgetName + '.preventClickEvent') ? (t.removeData(i.target, e.widgetName + '.preventClickEvent'), i.stopImmediatePropagation(), !1) : void 0
                }),
                    this.started = !1
            },
            _mouseDestroy: function () {
                this.element.off('.' + this.widgetName),
                this._mouseMoveDelegate && this.document.off('mousemove.' + this.widgetName, this._mouseMoveDelegate).off('mouseup.' + this.widgetName, this._mouseUpDelegate)
            },
            _mouseDown: function (e) {
                if (!c) {
                    this._mouseMoved = !1,
                    this._mouseStarted && this._mouseUp(e),
                        this._mouseDownEvent = e
                    var i = this,
                        s = 1 === e.which,
                        n = 'string' == typeof this.options.cancel && e.target.nodeName ? t(e.target).closest(this.options.cancel).length : !1
                    return s && !n && this._mouseCapture(e) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
                        i.mouseDelayMet = !0
                    }, this.options.delay)), this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(e) !== !1, !this._mouseStarted) ? (e.preventDefault(), !0) : (!0 === t.data(e.target, this.widgetName + '.preventClickEvent') && t.removeData(e.target, this.widgetName + '.preventClickEvent'), this._mouseMoveDelegate = function (t) {
                        return i._mouseMove(t)
                    }, this._mouseUpDelegate = function (t) {
                        return i._mouseUp(t)
                    }, this.document.on('mousemove.' + this.widgetName, this._mouseMoveDelegate).on('mouseup.' + this.widgetName, this._mouseUpDelegate), e.preventDefault(), c = !0, !0)) : !0
                }
            },
            _mouseMove: function (e) {
                if (this._mouseMoved) {
                    if (t.ui.ie && (!document.documentMode || 9 > document.documentMode) && !e.button) {
                        return this._mouseUp(e)
                    }
                    if (!e.which) {
                        if (e.originalEvent.altKey || e.originalEvent.ctrlKey || e.originalEvent.metaKey || e.originalEvent.shiftKey) {
                            this.ignoreMissingWhich = !0
                        } else {
                            if (!this.ignoreMissingWhich) {
                                return this._mouseUp(e)
                            }
                        }
                    }
                }
                return (e.which || e.button) && (this._mouseMoved = !0),
                    this._mouseStarted ? (this._mouseDrag(e), e.preventDefault()) : (this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, e) !== !1, this._mouseStarted ? this._mouseDrag(e) : this._mouseUp(e)), !this._mouseStarted)
            },
            _mouseUp: function (e) {
                this.document.off('mousemove.' + this.widgetName, this._mouseMoveDelegate).off('mouseup.' + this.widgetName, this._mouseUpDelegate),
                this._mouseStarted && (this._mouseStarted = !1, e.target === this._mouseDownEvent.target && t.data(e.target, this.widgetName + '.preventClickEvent', !0), this._mouseStop(e)),
                this._mouseDelayTimer && (clearTimeout(this._mouseDelayTimer), delete this._mouseDelayTimer),
                    this.ignoreMissingWhich = !1,
                    c = !1,
                    e.preventDefault()
            },
            _mouseDistanceMet: function (t) {
                return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance
            },
            _mouseDelayMet: function () {
                return this.mouseDelayMet
            },
            _mouseStart: function () {
            },
            _mouseDrag: function () {
            },
            _mouseStop: function () {
            },
            _mouseCapture: function () {
                return !0
            }
        }),
        t.ui.plugin = {
            add: function (e, i, s) {
                var n,
                    o = t.ui[e].prototype
                for (n in s) {
                    o.plugins[n] = o.plugins[n] || [],
                        o.plugins[n].push([i,
                            s[n]])
                }
            },
            call: function (t, e, i, s) {
                var n,
                    o = t.plugins[e]
                if (o && (s || t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType)) {
                    for (n = 0; o.length > n; n++) {
                        t.options[o[n][0]] && o[n][1].apply(t.element, i)
                    }
                }
            }
        },
        t.ui.safeActiveElement = function (t) {
            var e
            try {
                e = t.activeElement
            } catch (i) {
                e = t.body
            }
            return e || (e = t.body),
            e.nodeName || (e = t.body),
                e
        },
        t.ui.safeBlur = function (e) {
            e && 'body' !== e.nodeName.toLowerCase() && t(e).trigger('blur')
        },
        t.widget('ui.draggable', t.ui.mouse, {
            version: '1.12.1',
            widgetEventPrefix: 'drag',
            options: {
                addClasses: !0,
                appendTo: 'parent',
                axis: !1,
                connectToSortable: !1,
                containment: !1,
                cursor: 'auto',
                cursorAt: !1,
                grid: !1,
                handle: !1,
                helper: 'original',
                iframeFix: !1,
                opacity: !1,
                refreshPositions: !1,
                revert: !1,
                revertDuration: 500,
                scope: 'default',
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                snap: !1,
                snapMode: 'both',
                snapTolerance: 20,
                stack: !1,
                zIndex: !1,
                drag: null,
                start: null,
                stop: null
            },
            _create: function () {
                'original' === this.options.helper && this._setPositionRelative(),
                this.options.addClasses && this._addClass('ui-draggable'),
                    this._setHandleClassName(),
                    this._mouseInit()
            },
            _setOption: function (t, e) {
                this._super(t, e),
                'handle' === t && (this._removeHandleClassName(), this._setHandleClassName())
            },
            _destroy: function () {
                return (this.helper || this.element).is('.ui-draggable-dragging') ? (this.destroyOnClear = !0, void 0) : (this._removeHandleClassName(), this._mouseDestroy(), void 0)
            },
            _mouseCapture: function (e) {
                var i = this.options
                return this.helper || i.disabled || t(e.target).closest('.ui-resizable-handle').length > 0 ? !1 : (this.handle = this._getHandle(e), this.handle ? (this._blurActiveElement(e), this._blockFrames(i.iframeFix === !0 ? 'iframe' : i.iframeFix), !0) : !1)
            },
            _blockFrames: function (e) {
                this.iframeBlocks = this.document.find(e).map(function () {
                    var e = t(this)
                    return t('<div>').css('position', 'absolute').appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset()) [0]
                })
            },
            _unblockFrames: function () {
                this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
            },
            _blurActiveElement: function (e) {
                var i = t.ui.safeActiveElement(this.document[0]),
                    s = t(e.target)
                s.closest(i).length || t.ui.safeBlur(i)
            },
            _mouseStart: function (e) {
                var i = this.options
                return this.helper = this._createHelper(e),
                    this._addClass(this.helper, 'ui-draggable-dragging'),
                    this._cacheHelperProportions(),
                t.ui.ddmanager && (t.ui.ddmanager.current = this),
                    this._cacheMargins(),
                    this.cssPosition = this.helper.css('position'),
                    this.scrollParent = this.helper.scrollParent(!0),
                    this.offsetParent = this.helper.offsetParent(),
                    this.hasFixedAncestor = this.helper.parents().filter(function () {
                        return 'fixed' === t(this).css('position')
                    }).length > 0,
                    this.positionAbs = this.element.offset(),
                    this._refreshOffsets(e),
                    this.originalPosition = this.position = this._generatePosition(e, !1),
                    this.originalPageX = e.pageX,
                    this.originalPageY = e.pageY,
                i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt),
                    this._setContainment(),
                    this._trigger('start', e) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), t.ui.ddmanager && !i.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), this._mouseDrag(e, !0), t.ui.ddmanager && t.ui.ddmanager.dragStart(this, e), !0)
            },
            _refreshOffsets: function (t) {
                this.offset = {
                    top: this.positionAbs.top - this.margins.top,
                    left: this.positionAbs.left - this.margins.left,
                    scroll: !1,
                    parent: this._getParentOffset(),
                    relative: this._getRelativeOffset()
                },
                    this.offset.click = {
                        left: t.pageX - this.offset.left,
                        top: t.pageY - this.offset.top
                    }
            },
            _mouseDrag: function (e, i) {
                if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(e, !0), this.positionAbs = this._convertPositionTo('absolute'), !i) {
                    var s = this._uiHash()
                    if (this._trigger('drag', e, s) === !1) {
                        return this._mouseUp(new t.Event('mouseup', e)),
                            !1
                    }
                    this.position = s.position
                }
                return this.helper[0].style.left = this.position.left + 'px',
                    this.helper[0].style.top = this.position.top + 'px',
                t.ui.ddmanager && t.ui.ddmanager.drag(this, e),
                    !1
            },
            _mouseStop: function (e) {
                var i = this,
                    s = !1
                return t.ui.ddmanager && !this.options.dropBehaviour && (s = t.ui.ddmanager.drop(this, e)),
                this.dropped && (s = this.dropped, this.dropped = !1),
                    'invalid' === this.options.revert && !s || 'valid' === this.options.revert && s || this.options.revert === !0 || t.isFunction(this.options.revert) && this.options.revert.call(this.element, s) ? t(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {
                        i._trigger('stop', e) !== !1 && i._clear()
                    }) : this._trigger('stop', e) !== !1 && this._clear(),
                    !1
            },
            _mouseUp: function (e) {
                return this._unblockFrames(),
                t.ui.ddmanager && t.ui.ddmanager.dragStop(this, e),
                this.handleElement.is(e.target) && this.element.trigger('focus'),
                    t.ui.mouse.prototype._mouseUp.call(this, e)
            },
            cancel: function () {
                return this.helper.is('.ui-draggable-dragging') ? this._mouseUp(new t.Event('mouseup', {
                    target: this.element[0]
                })) : this._clear(),
                    this
            },
            _getHandle: function (e) {
                return this.options.handle ? !!t(e.target).closest(this.element.find(this.options.handle)).length : !0
            },
            _setHandleClassName: function () {
                this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element,
                    this._addClass(this.handleElement, 'ui-draggable-handle')
            },
            _removeHandleClassName: function () {
                this._removeClass(this.handleElement, 'ui-draggable-handle')
            },
            _createHelper: function (e) {
                var i = this.options,
                    s = t.isFunction(i.helper),
                    n = s ? t(i.helper.apply(this.element[0], [
                        e
                    ])) : 'clone' === i.helper ? this.element.clone().removeAttr('id') : this.element
                return n.parents('body').length || n.appendTo('parent' === i.appendTo ? this.element[0].parentNode : i.appendTo),
                s && n[0] === this.element[0] && this._setPositionRelative(),
                n[0] === this.element[0] || /(fixed|absolute)/.test(n.css('position')) || n.css('position', 'absolute'),
                    n
            },
            _setPositionRelative: function () {
                /^(?:r|a|f)/.test(this.element.css('position')) || (this.element[0].style.position = 'relative')
            },
            _adjustOffsetFromHelper: function (e) {
                'string' == typeof e && (e = e.split(' ')),
                t.isArray(e) && (e = {
                    left: +e[0],
                    top: +e[1] || 0
                }),
                'left' in e && (this.offset.click.left = e.left + this.margins.left),
                'right' in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left),
                'top' in e && (this.offset.click.top = e.top + this.margins.top),
                'bottom' in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top)
            },
            _isRootNode: function (t) {
                return /(html|body)/i.test(t.tagName) || t === this.document[0]
            },
            _getParentOffset: function () {
                var e = this.offsetParent.offset(),
                    i = this.document[0]
                return 'absolute' === this.cssPosition && this.scrollParent[0] !== i && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), e.top += this.scrollParent.scrollTop()),
                this._isRootNode(this.offsetParent[0]) && (e = {
                    top: 0,
                    left: 0
                }),
                    {
                        top: e.top + (parseInt(this.offsetParent.css('borderTopWidth'), 10) || 0),
                        left: e.left + (parseInt(this.offsetParent.css('borderLeftWidth'), 10) || 0)
                    }
            },
            _getRelativeOffset: function () {
                if ('relative' !== this.cssPosition) {
                    return {
                        top: 0,
                        left: 0
                    }
                }
                var t = this.element.position(),
                    e = this._isRootNode(this.scrollParent[0])
                return {
                    top: t.top - (parseInt(this.helper.css('top'), 10) || 0) + (e ? 0 : this.scrollParent.scrollTop()),
                    left: t.left - (parseInt(this.helper.css('left'), 10) || 0) + (e ? 0 : this.scrollParent.scrollLeft())
                }
            },
            _cacheMargins: function () {
                this.margins = {
                    left: parseInt(this.element.css('marginLeft'), 10) || 0,
                    top: parseInt(this.element.css('marginTop'), 10) || 0,
                    right: parseInt(this.element.css('marginRight'), 10) || 0,
                    bottom: parseInt(this.element.css('marginBottom'), 10) || 0
                }
            },
            _cacheHelperProportions: function () {
                this.helperProportions = {
                    width: this.helper.outerWidth(),
                    height: this.helper.outerHeight()
                }
            },
            _setContainment: function () {
                var e,
                    i,
                    s,
                    n = this.options,
                    o = this.document[0]
                return this.relativeContainer = null,
                    n.containment ? 'window' === n.containment ? (this.containment = [
                        t(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left,
                        t(window).scrollTop() - this.offset.relative.top - this.offset.parent.top,
                        t(window).scrollLeft() + t(window).width() - this.helperProportions.width - this.margins.left,
                        t(window).scrollTop() + (t(window).height() || o.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
                    ], void 0) : 'document' === n.containment ? (this.containment = [
                        0,
                        0,
                        t(o).width() - this.helperProportions.width - this.margins.left,
                        (t(o).height() || o.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
                    ], void 0) : n.containment.constructor === Array ? (this.containment = n.containment, void 0) : ('parent' === n.containment && (n.containment = this.helper[0].parentNode), i = t(n.containment), s = i[0], s && (e = /(scroll|auto)/.test(i.css('overflow')), this.containment = [
                        (parseInt(i.css('borderLeftWidth'), 10) || 0) + (parseInt(i.css('paddingLeft'), 10) || 0),
                        (parseInt(i.css('borderTopWidth'), 10) || 0) + (parseInt(i.css('paddingTop'), 10) || 0),
                        (e ? Math.max(s.scrollWidth, s.offsetWidth) : s.offsetWidth) - (parseInt(i.css('borderRightWidth'), 10) || 0) - (parseInt(i.css('paddingRight'), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right,
                        (e ? Math.max(s.scrollHeight, s.offsetHeight) : s.offsetHeight) - (parseInt(i.css('borderBottomWidth'), 10) || 0) - (parseInt(i.css('paddingBottom'), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom
                    ], this.relativeContainer = i), void 0) : (this.containment = null, void 0)
            },
            _convertPositionTo: function (t, e) {
                e || (e = this.position)
                var i = 'absolute' === t ? 1 : -1,
                    s = this._isRootNode(this.scrollParent[0])
                return {
                    top: e.top + this.offset.relative.top * i + this.offset.parent.top * i - ('fixed' === this.cssPosition ? -this.offset.scroll.top : s ? 0 : this.offset.scroll.top) * i,
                    left: e.left + this.offset.relative.left * i + this.offset.parent.left * i - ('fixed' === this.cssPosition ? -this.offset.scroll.left : s ? 0 : this.offset.scroll.left) * i
                }
            },
            _generatePosition: function (t, e) {
                var i,
                    s,
                    n,
                    o,
                    a = this.options,
                    r = this._isRootNode(this.scrollParent[0]),
                    h = t.pageX,
                    l = t.pageY
                return r && this.offset.scroll || (this.offset.scroll = {
                    top: this.scrollParent.scrollTop(),
                    left: this.scrollParent.scrollLeft()
                }),
                e && (this.containment && (this.relativeContainer ? (s = this.relativeContainer.offset(), i = [
                    this.containment[0] + s.left,
                    this.containment[1] + s.top,
                    this.containment[2] + s.left,
                    this.containment[3] + s.top
                ]) : i = this.containment, t.pageX - this.offset.click.left < i[0] && (h = i[0] + this.offset.click.left), t.pageY - this.offset.click.top < i[1] && (l = i[1] + this.offset.click.top), t.pageX - this.offset.click.left > i[2] && (h = i[2] + this.offset.click.left), t.pageY - this.offset.click.top > i[3] && (l = i[3] + this.offset.click.top)), a.grid && (n = a.grid[1] ? this.originalPageY + Math.round((l - this.originalPageY) / a.grid[1]) * a.grid[1] : this.originalPageY, l = i ? n - this.offset.click.top >= i[1] || n - this.offset.click.top > i[3] ? n : n - this.offset.click.top >= i[1] ? n - a.grid[1] : n + a.grid[1] : n, o = a.grid[0] ? this.originalPageX + Math.round((h - this.originalPageX) / a.grid[0]) * a.grid[0] : this.originalPageX, h = i ? o - this.offset.click.left >= i[0] || o - this.offset.click.left > i[2] ? o : o - this.offset.click.left >= i[0] ? o - a.grid[0] : o + a.grid[0] : o), 'y' === a.axis && (h = this.originalPageX), 'x' === a.axis && (l = this.originalPageY)),
                    {
                        top: l - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ('fixed' === this.cssPosition ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top),
                        left: h - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ('fixed' === this.cssPosition ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left)
                    }
            },
            _clear: function () {
                this._removeClass(this.helper, 'ui-draggable-dragging'),
                this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(),
                    this.helper = null,
                    this.cancelHelperRemoval = !1,
                this.destroyOnClear && this.destroy()
            },
            _trigger: function (e, i, s) {
                return s = s || this._uiHash(),
                    t.ui.plugin.call(this, e, [
                        i,
                        s,
                        this
                    ], !0),
                /^(drag|start|stop)/.test(e) && (this.positionAbs = this._convertPositionTo('absolute'), s.offset = this.positionAbs),
                    t.Widget.prototype._trigger.call(this, e, i, s)
            },
            plugins: {},
            _uiHash: function () {
                return {
                    helper: this.helper,
                    position: this.position,
                    originalPosition: this.originalPosition,
                    offset: this.positionAbs
                }
            }
        }),
        t.ui.plugin.add('draggable', 'connectToSortable', {
            start: function (e, i, s) {
                var n = t.extend({}, i, {
                    item: s.element
                })
                s.sortables = [],
                    t(s.options.connectToSortable).each(function () {
                        var i = t(this).sortable('instance')
                        i && !i.options.disabled && (s.sortables.push(i), i.refreshPositions(), i._trigger('activate', e, n))
                    })
            },
            stop: function (e, i, s) {
                var n = t.extend({}, i, {
                    item: s.element
                })
                s.cancelHelperRemoval = !1,
                    t.each(s.sortables, function () {
                        var t = this
                        t.isOver ? (t.isOver = 0, s.cancelHelperRemoval = !0, t.cancelHelperRemoval = !1, t._storedCSS = {
                            position: t.placeholder.css('position'),
                            top: t.placeholder.css('top'),
                            left: t.placeholder.css('left')
                        }, t._mouseStop(e), t.options.helper = t.options._helper) : (t.cancelHelperRemoval = !0, t._trigger('deactivate', e, n))
                    })
            },
            drag: function (e, i, s) {
                t.each(s.sortables, function () {
                    var n = !1,
                        o = this
                    o.positionAbs = s.positionAbs,
                        o.helperProportions = s.helperProportions,
                        o.offset.click = s.offset.click,
                    o._intersectsWith(o.containerCache) && (n = !0, t.each(s.sortables, function () {
                        return this.positionAbs = s.positionAbs,
                            this.helperProportions = s.helperProportions,
                            this.offset.click = s.offset.click,
                        this !== o && this._intersectsWith(this.containerCache) && t.contains(o.element[0], this.element[0]) && (n = !1),
                            n
                    })),
                        n ? (o.isOver || (o.isOver = 1, s._parent = i.helper.parent(), o.currentItem = i.helper.appendTo(o.element).data('ui-sortable-item', !0), o.options._helper = o.options.helper, o.options.helper = function () {
                            return i.helper[0]
                        }, e.target = o.currentItem[0], o._mouseCapture(e, !0), o._mouseStart(e, !0, !0), o.offset.click.top = s.offset.click.top, o.offset.click.left = s.offset.click.left, o.offset.parent.left -= s.offset.parent.left - o.offset.parent.left, o.offset.parent.top -= s.offset.parent.top - o.offset.parent.top, s._trigger('toSortable', e), s.dropped = o.element, t.each(s.sortables, function () {
                            this.refreshPositions()
                        }), s.currentItem = s.element, o.fromOutside = s), o.currentItem && (o._mouseDrag(e), i.position = o.position)) : o.isOver && (o.isOver = 0, o.cancelHelperRemoval = !0, o.options._revert = o.options.revert, o.options.revert = !1, o._trigger('out', e, o._uiHash(o)), o._mouseStop(e, !0), o.options.revert = o.options._revert, o.options.helper = o.options._helper, o.placeholder && o.placeholder.remove(), i.helper.appendTo(s._parent), s._refreshOffsets(e), i.position = s._generatePosition(e, !0), s._trigger('fromSortable', e), s.dropped = !1, t.each(s.sortables, function () {
                            this.refreshPositions()
                        }))
                })
            }
        }),
        t.ui.plugin.add('draggable', 'cursor', {
            start: function (e, i, s) {
                var n = t('body'),
                    o = s.options
                n.css('cursor') && (o._cursor = n.css('cursor')),
                    n.css('cursor', o.cursor)
            },
            stop: function (e, i, s) {
                var n = s.options
                n._cursor && t('body').css('cursor', n._cursor)
            }
        }),
        t.ui.plugin.add('draggable', 'opacity', {
            start: function (e, i, s) {
                var n = t(i.helper),
                    o = s.options
                n.css('opacity') && (o._opacity = n.css('opacity')),
                    n.css('opacity', o.opacity)
            },
            stop: function (e, i, s) {
                var n = s.options
                n._opacity && t(i.helper).css('opacity', n._opacity)
            }
        }),
        t.ui.plugin.add('draggable', 'scroll', {
            start: function (t, e, i) {
                i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)),
                i.scrollParentNotHidden[0] !== i.document[0] && 'HTML' !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset())
            },
            drag: function (e, i, s) {
                var n = s.options,
                    o = !1,
                    a = s.scrollParentNotHidden[0],
                    r = s.document[0]
                a !== r && 'HTML' !== a.tagName ? (n.axis && 'x' === n.axis || (s.overflowOffset.top + a.offsetHeight - e.pageY < n.scrollSensitivity ? a.scrollTop = o = a.scrollTop + n.scrollSpeed : e.pageY - s.overflowOffset.top < n.scrollSensitivity && (a.scrollTop = o = a.scrollTop - n.scrollSpeed)), n.axis && 'y' === n.axis || (s.overflowOffset.left + a.offsetWidth - e.pageX < n.scrollSensitivity ? a.scrollLeft = o = a.scrollLeft + n.scrollSpeed : e.pageX - s.overflowOffset.left < n.scrollSensitivity && (a.scrollLeft = o = a.scrollLeft - n.scrollSpeed))) : (n.axis && 'x' === n.axis || (e.pageY - t(r).scrollTop() < n.scrollSensitivity ? o = t(r).scrollTop(t(r).scrollTop() - n.scrollSpeed) : t(window).height() - (e.pageY - t(r).scrollTop()) < n.scrollSensitivity && (o = t(r).scrollTop(t(r).scrollTop() + n.scrollSpeed))), n.axis && 'y' === n.axis || (e.pageX - t(r).scrollLeft() < n.scrollSensitivity ? o = t(r).scrollLeft(t(r).scrollLeft() - n.scrollSpeed) : t(window).width() - (e.pageX - t(r).scrollLeft()) < n.scrollSensitivity && (o = t(r).scrollLeft(t(r).scrollLeft() + n.scrollSpeed)))),
                o !== !1 && t.ui.ddmanager && !n.dropBehaviour && t.ui.ddmanager.prepareOffsets(s, e)
            }
        }),
        t.ui.plugin.add('draggable', 'snap', {
            start: function (e, i, s) {
                var n = s.options
                s.snapElements = [],
                    t(n.snap.constructor !== String ? n.snap.items || ':data(ui-draggable)' : n.snap).each(function () {
                        var e = t(this),
                            i = e.offset()
                        this !== s.element[0] && s.snapElements.push({
                            item: this,
                            width: e.outerWidth(),
                            height: e.outerHeight(),
                            top: i.top,
                            left: i.left
                        })
                    })
            },
            drag: function (e, i, s) {
                var n,
                    o,
                    a,
                    r,
                    h,
                    l,
                    c,
                    u,
                    d,
                    p,
                    f = s.options,
                    g = f.snapTolerance,
                    m = i.offset.left,
                    _ = m + s.helperProportions.width,
                    v = i.offset.top,
                    b = v + s.helperProportions.height
                for (d = s.snapElements.length - 1; d >= 0; d--) {
                    h = s.snapElements[d].left - s.margins.left,
                        l = h + s.snapElements[d].width,
                        c = s.snapElements[d].top - s.margins.top,
                        u = c + s.snapElements[d].height,
                        h - g > _ || m > l + g || c - g > b || v > u + g || !t.contains(s.snapElements[d].item.ownerDocument, s.snapElements[d].item) ? (s.snapElements[d].snapping && s.options.snap.release && s.options.snap.release.call(s.element, e, t.extend(s._uiHash(), {
                            snapItem: s.snapElements[d].item
                        })), s.snapElements[d].snapping = !1) : ('inner' !== f.snapMode && (n = g >= Math.abs(c - b), o = g >= Math.abs(u - v), a = g >= Math.abs(h - _), r = g >= Math.abs(l - m), n && (i.position.top = s._convertPositionTo('relative', {
                            top: c - s.helperProportions.height,
                            left: 0
                        }).top), o && (i.position.top = s._convertPositionTo('relative', {
                            top: u,
                            left: 0
                        }).top), a && (i.position.left = s._convertPositionTo('relative', {
                            top: 0,
                            left: h - s.helperProportions.width
                        }).left), r && (i.position.left = s._convertPositionTo('relative', {
                            top: 0,
                            left: l
                        }).left)), p = n || o || a || r, 'outer' !== f.snapMode && (n = g >= Math.abs(c - v), o = g >= Math.abs(u - b), a = g >= Math.abs(h - m), r = g >= Math.abs(l - _), n && (i.position.top = s._convertPositionTo('relative', {
                            top: c,
                            left: 0
                        }).top), o && (i.position.top = s._convertPositionTo('relative', {
                            top: u - s.helperProportions.height,
                            left: 0
                        }).top), a && (i.position.left = s._convertPositionTo('relative', {
                            top: 0,
                            left: h
                        }).left), r && (i.position.left = s._convertPositionTo('relative', {
                            top: 0,
                            left: l - s.helperProportions.width
                        }).left)), !s.snapElements[d].snapping && (n || o || a || r || p) && s.options.snap.snap && s.options.snap.snap.call(s.element, e, t.extend(s._uiHash(), {
                            snapItem: s.snapElements[d].item
                        })), s.snapElements[d].snapping = n || o || a || r || p)
                }
            }
        }),
        t.ui.plugin.add('draggable', 'stack', {
            start: function (e, i, s) {
                var n,
                    o = s.options,
                    a = t.makeArray(t(o.stack)).sort(function (e, i) {
                        return (parseInt(t(e).css('zIndex'), 10) || 0) - (parseInt(t(i).css('zIndex'), 10) || 0)
                    })
                a.length && (n = parseInt(t(a[0]).css('zIndex'), 10) || 0, t(a).each(function (e) {
                    t(this).css('zIndex', n + e)
                }), this.css('zIndex', n + a.length))
            }
        }),
        t.ui.plugin.add('draggable', 'zIndex', {
            start: function (e, i, s) {
                var n = t(i.helper),
                    o = s.options
                n.css('zIndex') && (o._zIndex = n.css('zIndex')),
                    n.css('zIndex', o.zIndex)
            },
            stop: function (e, i, s) {
                var n = s.options
                n._zIndex && t(i.helper).css('zIndex', n._zIndex)
            }
        }),
        t.ui.draggable,
        t.widget('ui.droppable', {
            version: '1.12.1',
            widgetEventPrefix: 'drop',
            options: {
                accept: '*',
                addClasses: !0,
                greedy: !1,
                scope: 'default',
                tolerance: 'intersect',
                activate: null,
                deactivate: null,
                drop: null,
                out: null,
                over: null
            },
            _create: function () {
                var e,
                    i = this.options,
                    s = i.accept
                this.isover = !1,
                    this.isout = !0,
                    this.accept = t.isFunction(s) ? s : function (t) {
                        return t.is(s)
                    },
                    this.proportions = function () {
                        return arguments.length ? (e = arguments[0], void 0) : e ? e : e = {
                            width: this.element[0].offsetWidth,
                            height: this.element[0].offsetHeight
                        }
                    },
                    this._addToManager(i.scope),
                i.addClasses && this._addClass('ui-droppable')
            },
            _addToManager: function (e) {
                t.ui.ddmanager.droppables[e] = t.ui.ddmanager.droppables[e] || [],
                    t.ui.ddmanager.droppables[e].push(this)
            },
            _splice: function (t) {
                for (var e = 0; t.length > e; e++) {
                    t[e] === this && t.splice(e, 1)
                }
            },
            _destroy: function () {
                var e = t.ui.ddmanager.droppables[this.options.scope]
                this._splice(e)
            },
            _setOption: function (e, i) {
                if ('accept' === e) {
                    this.accept = t.isFunction(i) ? i : function (t) {
                        return t.is(i)
                    }
                } else {
                    if ('scope' === e) {
                        var s = t.ui.ddmanager.droppables[this.options.scope]
                        this._splice(s),
                            this._addToManager(i)
                    }
                }
                this._super(e, i)
            },
            _activate: function (e) {
                var i = t.ui.ddmanager.current
                this._addActiveClass(),
                i && this._trigger('activate', e, this.ui(i))
            },
            _deactivate: function (e) {
                var i = t.ui.ddmanager.current
                this._removeActiveClass(),
                i && this._trigger('deactivate', e, this.ui(i))
            },
            _over: function (e) {
                var i = t.ui.ddmanager.current
                i && (i.currentItem || i.element) [0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this._addHoverClass(), this._trigger('over', e, this.ui(i)))
            },
            _out: function (e) {
                var i = t.ui.ddmanager.current
                i && (i.currentItem || i.element) [0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this._removeHoverClass(), this._trigger('out', e, this.ui(i)))
            },
            _drop: function (e, i) {
                var s = i || t.ui.ddmanager.current,
                    n = !1
                return s && (s.currentItem || s.element) [0] !== this.element[0] ? (this.element.find(':data(ui-droppable)').not('.ui-draggable-dragging').each(function () {
                    var i = t(this).droppable('instance')
                    return i.options.greedy && !i.options.disabled && i.options.scope === s.options.scope && i.accept.call(i.element[0], s.currentItem || s.element) && u(s, t.extend(i, {
                        offset: i.element.offset()
                    }), i.options.tolerance, e) ? (n = !0, !1) : void 0
                }), n ? !1 : this.accept.call(this.element[0], s.currentItem || s.element) ? (this._removeActiveClass(), this._removeHoverClass(), this._trigger('drop', e, this.ui(s)), this.element) : !1) : !1
            },
            ui: function (t) {
                return {
                    draggable: t.currentItem || t.element,
                    helper: t.helper,
                    position: t.position,
                    offset: t.positionAbs
                }
            },
            _addHoverClass: function () {
                this._addClass('ui-droppable-hover')
            },
            _removeHoverClass: function () {
                this._removeClass('ui-droppable-hover')
            },
            _addActiveClass: function () {
                this._addClass('ui-droppable-active')
            },
            _removeActiveClass: function () {
                this._removeClass('ui-droppable-active')
            }
        })
    var u = t.ui.intersect = function () {
        function t(t, e, i) {
            return t >= e && e + i > t
        }

        return function (e, i, s, n) {
            if (!i.offset) {
                return !1
            }
            var o = (e.positionAbs || e.position.absolute).left + e.margins.left,
                a = (e.positionAbs || e.position.absolute).top + e.margins.top,
                r = o + e.helperProportions.width,
                h = a + e.helperProportions.height,
                l = i.offset.left,
                c = i.offset.top,
                u = l + i.proportions().width,
                d = c + i.proportions().height
            switch (s) {
                case 'fit':
                    return o >= l && u >= r && a >= c && d >= h
                case 'intersect':
                    return o + e.helperProportions.width / 2 > l && u > r - e.helperProportions.width / 2 && a + e.helperProportions.height / 2 > c && d > h - e.helperProportions.height / 2
                case 'pointer':
                    return t(n.pageY, c, i.proportions().height) && t(n.pageX, l, i.proportions().width)
                case 'touch':
                    return (a >= c && d >= a || h >= c && d >= h || c > a && h > d) && (o >= l && u >= o || r >= l && u >= r || l > o && r > u)
                default:
                    return !1
            }
        }
    }()
    t.ui.ddmanager = {
        current: null,
        droppables: {
            'default': []
        },
        prepareOffsets: function (e, i) {
            var s,
                n,
                o = t.ui.ddmanager.droppables[e.options.scope] || [],
                a = i ? i.type : null,
                r = (e.currentItem || e.element).find(':data(ui-droppable)').addBack()
            t: for (s = 0; o.length > s; s++) {
                if (!(o[s].options.disabled || e && !o[s].accept.call(o[s].element[0], e.currentItem || e.element))) {
                    for (n = 0; r.length > n; n++) {
                        if (r[n] === o[s].element[0]) {
                            o[s].proportions().height = 0
                            continue t
                        }
                    }
                    o[s].visible = 'none' !== o[s].element.css('display'),
                    o[s].visible && ('mousedown' === a && o[s]._activate.call(o[s], i), o[s].offset = o[s].element.offset(), o[s].proportions({
                        width: o[s].element[0].offsetWidth,
                        height: o[s].element[0].offsetHeight
                    }))
                }
            }
        },
        drop: function (e, i) {
            var s = !1
            return t.each((t.ui.ddmanager.droppables[e.options.scope] || []).slice(), function () {
                this.options && (!this.options.disabled && this.visible && u(e, this, this.options.tolerance, i) && (s = this._drop.call(this, i) || s), !this.options.disabled && this.visible && this.accept.call(this.element[0], e.currentItem || e.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, i)))
            }),
                s
        },
        dragStart: function (e, i) {
            e.element.parentsUntil('body').on('scroll.droppable', function () {
                e.options.refreshPositions || t.ui.ddmanager.prepareOffsets(e, i)
            })
        },
        drag: function (e, i) {
            e.options.refreshPositions && t.ui.ddmanager.prepareOffsets(e, i),
                t.each(t.ui.ddmanager.droppables[e.options.scope] || [], function () {
                    if (!this.options.disabled && !this.greedyChild && this.visible) {
                        var s,
                            n,
                            o,
                            a = u(e, this, this.options.tolerance, i),
                            r = !a && this.isover ? 'isout' : a && !this.isover ? 'isover' : null
                        r && (this.options.greedy && (n = this.options.scope, o = this.element.parents(':data(ui-droppable)').filter(function () {
                            return t(this).droppable('instance').options.scope === n
                        }), o.length && (s = t(o[0]).droppable('instance'), s.greedyChild = 'isover' === r)), s && 'isover' === r && (s.isover = !1, s.isout = !0, s._out.call(s, i)), this[r] = !0, this['isout' === r ? 'isover' : 'isout'] = !1, this['isover' === r ? '_over' : '_out'].call(this, i), s && 'isout' === r && (s.isout = !1, s.isover = !0, s._over.call(s, i)))
                    }
                })
        },
        dragStop: function (e, i) {
            e.element.parentsUntil('body').off('scroll.droppable'),
            e.options.refreshPositions || t.ui.ddmanager.prepareOffsets(e, i)
        }
    },
    t.uiBackCompat !== !1 && t.widget('ui.droppable', t.ui.droppable, {
        options: {
            hoverClass: !1,
            activeClass: !1
        },
        _addActiveClass: function () {
            this._super(),
            this.options.activeClass && this.element.addClass(this.options.activeClass)
        },
        _removeActiveClass: function () {
            this._super(),
            this.options.activeClass && this.element.removeClass(this.options.activeClass)
        },
        _addHoverClass: function () {
            this._super(),
            this.options.hoverClass && this.element.addClass(this.options.hoverClass)
        },
        _removeHoverClass: function () {
            this._super(),
            this.options.hoverClass && this.element.removeClass(this.options.hoverClass)
        }
    }),
        t.ui.droppable,
        t.widget('ui.resizable', t.ui.mouse, {
            version: '1.12.1',
            widgetEventPrefix: 'resize',
            options: {
                alsoResize: !1,
                animate: !1,
                animateDuration: 'slow',
                animateEasing: 'swing',
                aspectRatio: !1,
                autoHide: !1,
                classes: {
                    'ui-resizable-se': 'ui-icon ui-icon-gripsmall-diagonal-se'
                },
                containment: !1,
                ghost: !1,
                grid: !1,
                handles: 'e,s,se',
                helper: !1,
                maxHeight: null,
                maxWidth: null,
                minHeight: 10,
                minWidth: 10,
                zIndex: 90,
                resize: null,
                start: null,
                stop: null
            },
            _num: function (t) {
                return parseFloat(t) || 0
            },
            _isNumber: function (t) {
                return !isNaN(parseFloat(t))
            },
            _hasScroll: function (e, i) {
                if ('hidden' === t(e).css('overflow')) {
                    return !1
                }
                var s = i && 'left' === i ? 'scrollLeft' : 'scrollTop',
                    n = !1
                return e[s] > 0 ? !0 : (e[s] = 1, n = e[s] > 0, e[s] = 0, n)
            },
            _create: function () {
                var e,
                    i = this.options,
                    s = this
                this._addClass('ui-resizable'),
                    t.extend(this, {
                        _aspectRatio: !!i.aspectRatio,
                        aspectRatio: i.aspectRatio,
                        originalElement: this.element,
                        _proportionallyResizeElements: [],
                        _helper: i.helper || i.ghost || i.animate ? i.helper || 'ui-resizable-helper' : null
                    }),
                this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i) && (this.element.wrap(t('<div class=\'ui-wrapper\' style=\'overflow: hidden;\'></div>').css({
                    position: this.element.css('position'),
                    width: this.element.outerWidth(),
                    height: this.element.outerHeight(),
                    top: this.element.css('top'),
                    left: this.element.css('left')
                })), this.element = this.element.parent().data('ui-resizable', this.element.resizable('instance')), this.elementIsWrapper = !0, e = {
                    marginTop: this.originalElement.css('marginTop'),
                    marginRight: this.originalElement.css('marginRight'),
                    marginBottom: this.originalElement.css('marginBottom'),
                    marginLeft: this.originalElement.css('marginLeft')
                }, this.element.css(e), this.originalElement.css('margin', 0), this.originalResizeStyle = this.originalElement.css('resize'), this.originalElement.css('resize', 'none'), this._proportionallyResizeElements.push(this.originalElement.css({
                    position: 'static',
                    zoom: 1,
                    display: 'block'
                })), this.originalElement.css(e), this._proportionallyResize()),
                    this._setupHandles(),
                i.autoHide && t(this.element).on('mouseenter', function () {
                    i.disabled || (s._removeClass('ui-resizable-autohide'), s._handles.show())
                }).on('mouseleave', function () {
                    i.disabled || s.resizing || (s._addClass('ui-resizable-autohide'), s._handles.hide())
                }),
                    this._mouseInit()
            },
            _destroy: function () {
                this._mouseDestroy()
                var e,
                    i = function (e) {
                        t(e).removeData('resizable').removeData('ui-resizable').off('.resizable').find('.ui-resizable-handle').remove()
                    }
                return this.elementIsWrapper && (i(this.element), e = this.element, this.originalElement.css({
                    position: e.css('position'),
                    width: e.outerWidth(),
                    height: e.outerHeight(),
                    top: e.css('top'),
                    left: e.css('left')
                }).insertAfter(e), e.remove()),
                    this.originalElement.css('resize', this.originalResizeStyle),
                    i(this.originalElement),
                    this
            },
            _setOption: function (t, e) {
                switch (this._super(t, e), t) {
                    case 'handles':
                        this._removeHandles(),
                            this._setupHandles()
                        break
                    default:
                }
            },
            _setupHandles: function () {
                var e,
                    i,
                    s,
                    n,
                    o,
                    a = this.options,
                    r = this
                if (this.handles = a.handles || (t('.ui-resizable-handle', this.element).length ? {
                        n: '.ui-resizable-n',
                        e: '.ui-resizable-e',
                        s: '.ui-resizable-s',
                        w: '.ui-resizable-w',
                        se: '.ui-resizable-se',
                        sw: '.ui-resizable-sw',
                        ne: '.ui-resizable-ne',
                        nw: '.ui-resizable-nw'
                    }
                    : 'e,s,se'), this._handles = t(), this.handles.constructor === String) {
                    for ('all' === this.handles && (this.handles = 'n,e,s,w,se,sw,ne,nw'), s = this.handles.split(','), this.handles = {}, i = 0; s.length > i; i++) {
                        e = t.trim(s[i]),
                            n = 'ui-resizable-' + e,
                            o = t('<div>'),
                            this._addClass(o, 'ui-resizable-handle ' + n),
                            o.css({
                                zIndex: a.zIndex
                            }),
                            this.handles[e] = '.ui-resizable-' + e,
                            this.element.append(o)
                    }
                }
                this._renderAxis = function (e) {
                    var i,
                        s,
                        n,
                        o
                    e = e || this.element
                    for (i in this.handles) {
                        this.handles[i].constructor === String ? this.handles[i] = this.element.children(this.handles[i]).first().show() : (this.handles[i].jquery || this.handles[i].nodeType) && (this.handles[i] = t(this.handles[i]), this._on(this.handles[i], {
                            mousedown: r._mouseDown
                        })),
                        this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i) && (s = t(this.handles[i], this.element), o = /sw|ne|nw|se|n|s/.test(i) ? s.outerHeight() : s.outerWidth(), n = [
                            'padding',
                            /ne|nw|n/.test(i) ? 'Top' : /se|sw|s/.test(i) ? 'Bottom' : /^e$/.test(i) ? 'Right' : 'Left'
                        ].join(''), e.css(n, o), this._proportionallyResize()),
                            this._handles = this._handles.add(this.handles[i])
                    }
                },
                    this._renderAxis(this.element),
                    this._handles = this._handles.add(this.element.find('.ui-resizable-handle')),
                    this._handles.disableSelection(),
                    this._handles.on('mouseover', function () {
                        r.resizing || (this.className && (o = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), r.axis = o && o[1] ? o[1] : 'se')
                    }),
                a.autoHide && (this._handles.hide(), this._addClass('ui-resizable-autohide'))
            },
            _removeHandles: function () {
                this._handles.remove()
            },
            _mouseCapture: function (e) {
                var i,
                    s,
                    n = !1
                for (i in this.handles) {
                    s = t(this.handles[i]) [0],
                    (s === e.target || t.contains(s, e.target)) && (n = !0)
                }
                return !this.options.disabled && n
            },
            _mouseStart: function (e) {
                var i,
                    s,
                    n,
                    o = this.options,
                    a = this.element
                return this.resizing = !0,
                    this._renderProxy(),
                    i = this._num(this.helper.css('left')),
                    s = this._num(this.helper.css('top')),
                o.containment && (i += t(o.containment).scrollLeft() || 0, s += t(o.containment).scrollTop() || 0),
                    this.offset = this.helper.offset(),
                    this.position = {
                        left: i,
                        top: s
                    },
                    this.size = this._helper ? {
                            width: this.helper.width(),
                            height: this.helper.height()
                        }
                        : {
                            width: a.width(),
                            height: a.height()
                        },
                    this.originalSize = this._helper ? {
                            width: a.outerWidth(),
                            height: a.outerHeight()
                        }
                        : {
                            width: a.width(),
                            height: a.height()
                        },
                    this.sizeDiff = {
                        width: a.outerWidth() - a.width(),
                        height: a.outerHeight() - a.height()
                    },
                    this.originalPosition = {
                        left: i,
                        top: s
                    },
                    this.originalMousePosition = {
                        left: e.pageX,
                        top: e.pageY
                    },
                    this.aspectRatio = 'number' == typeof o.aspectRatio ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1,
                    n = t('.ui-resizable-' + this.axis).css('cursor'),
                    t('body').css('cursor', 'auto' === n ? this.axis + '-resize' : n),
                    this._addClass('ui-resizable-resizing'),
                    this._propagate('start', e),
                    !0
            },
            _mouseDrag: function (e) {
                var i,
                    s,
                    n = this.originalMousePosition,
                    o = this.axis,
                    a = e.pageX - n.left || 0,
                    r = e.pageY - n.top || 0,
                    h = this._change[o]
                return this._updatePrevProperties(),
                    h ? (i = h.apply(this, [
                        e,
                        a,
                        r
                    ]), this._updateVirtualBoundaries(e.shiftKey), (this._aspectRatio || e.shiftKey) && (i = this._updateRatio(i, e)), i = this._respectSize(i, e), this._updateCache(i), this._propagate('resize', e), s = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), t.isEmptyObject(s) || (this._updatePrevProperties(), this._trigger('resize', e, this.ui()), this._applyChanges()), !1) : !1
            },
            _mouseStop: function (e) {
                this.resizing = !1
                var i,
                    s,
                    n,
                    o,
                    a,
                    r,
                    h,
                    l = this.options,
                    c = this
                return this._helper && (i = this._proportionallyResizeElements, s = i.length && /textarea/i.test(i[0].nodeName), n = s && this._hasScroll(i[0], 'left') ? 0 : c.sizeDiff.height, o = s ? 0 : c.sizeDiff.width, a = {
                    width: c.helper.width() - o,
                    height: c.helper.height() - n
                }, r = parseFloat(c.element.css('left')) + (c.position.left - c.originalPosition.left) || null, h = parseFloat(c.element.css('top')) + (c.position.top - c.originalPosition.top) || null, l.animate || this.element.css(t.extend(a, {
                    top: h,
                    left: r
                })), c.helper.height(c.size.height), c.helper.width(c.size.width), this._helper && !l.animate && this._proportionallyResize()),
                    t('body').css('cursor', 'auto'),
                    this._removeClass('ui-resizable-resizing'),
                    this._propagate('stop', e),
                this._helper && this.helper.remove(),
                    !1
            },
            _updatePrevProperties: function () {
                this.prevPosition = {
                    top: this.position.top,
                    left: this.position.left
                },
                    this.prevSize = {
                        width: this.size.width,
                        height: this.size.height
                    }
            },
            _applyChanges: function () {
                var t = {}
                return this.position.top !== this.prevPosition.top && (t.top = this.position.top + 'px'),
                this.position.left !== this.prevPosition.left && (t.left = this.position.left + 'px'),
                this.size.width !== this.prevSize.width && (t.width = this.size.width + 'px'),
                this.size.height !== this.prevSize.height && (t.height = this.size.height + 'px'),
                    this.helper.css(t),
                    t
            },
            _updateVirtualBoundaries: function (t) {
                var e,
                    i,
                    s,
                    n,
                    o,
                    a = this.options
                o = {
                    minWidth: this._isNumber(a.minWidth) ? a.minWidth : 0,
                    maxWidth: this._isNumber(a.maxWidth) ? a.maxWidth : 1 / 0,
                    minHeight: this._isNumber(a.minHeight) ? a.minHeight : 0,
                    maxHeight: this._isNumber(a.maxHeight) ? a.maxHeight : 1 / 0
                },
                (this._aspectRatio || t) && (e = o.minHeight * this.aspectRatio, s = o.minWidth / this.aspectRatio, i = o.maxHeight * this.aspectRatio, n = o.maxWidth / this.aspectRatio, e > o.minWidth && (o.minWidth = e), s > o.minHeight && (o.minHeight = s), o.maxWidth > i && (o.maxWidth = i), o.maxHeight > n && (o.maxHeight = n)),
                    this._vBoundaries = o
            },
            _updateCache: function (t) {
                this.offset = this.helper.offset(),
                this._isNumber(t.left) && (this.position.left = t.left),
                this._isNumber(t.top) && (this.position.top = t.top),
                this._isNumber(t.height) && (this.size.height = t.height),
                this._isNumber(t.width) && (this.size.width = t.width)
            },
            _updateRatio: function (t) {
                var e = this.position,
                    i = this.size,
                    s = this.axis
                return this._isNumber(t.height) ? t.width = t.height * this.aspectRatio : this._isNumber(t.width) && (t.height = t.width / this.aspectRatio),
                'sw' === s && (t.left = e.left + (i.width - t.width), t.top = null),
                'nw' === s && (t.top = e.top + (i.height - t.height), t.left = e.left + (i.width - t.width)),
                    t
            },
            _respectSize: function (t) {
                var e = this._vBoundaries,
                    i = this.axis,
                    s = this._isNumber(t.width) && e.maxWidth && e.maxWidth < t.width,
                    n = this._isNumber(t.height) && e.maxHeight && e.maxHeight < t.height,
                    o = this._isNumber(t.width) && e.minWidth && e.minWidth > t.width,
                    a = this._isNumber(t.height) && e.minHeight && e.minHeight > t.height,
                    r = this.originalPosition.left + this.originalSize.width,
                    h = this.originalPosition.top + this.originalSize.height,
                    l = /sw|nw|w/.test(i),
                    c = /nw|ne|n/.test(i)
                return o && (t.width = e.minWidth),
                a && (t.height = e.minHeight),
                s && (t.width = e.maxWidth),
                n && (t.height = e.maxHeight),
                o && l && (t.left = r - e.minWidth),
                s && l && (t.left = r - e.maxWidth),
                a && c && (t.top = h - e.minHeight),
                n && c && (t.top = h - e.maxHeight),
                    t.width || t.height || t.left || !t.top ? t.width || t.height || t.top || !t.left || (t.left = null) : t.top = null,
                    t
            },
            _getPaddingPlusBorderDimensions: function (t) {
                for (var e = 0, i = [], s = [
                    t.css('borderTopWidth'),
                    t.css('borderRightWidth'),
                    t.css('borderBottomWidth'),
                    t.css('borderLeftWidth')
                ], n = [
                    t.css('paddingTop'),
                    t.css('paddingRight'),
                    t.css('paddingBottom'),
                    t.css('paddingLeft')
                ]; 4 > e; e++) {
                    i[e] = parseFloat(s[e]) || 0,
                        i[e] += parseFloat(n[e]) || 0
                }
                return {
                    height: i[0] + i[2],
                    width: i[1] + i[3]
                }
            },
            _proportionallyResize: function () {
                if (this._proportionallyResizeElements.length) {
                    for (var t, e = 0, i = this.helper || this.element; this._proportionallyResizeElements.length > e; e++) {
                        t = this._proportionallyResizeElements[e],
                        this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(t)),
                            t.css({
                                height: i.height() - this.outerDimensions.height || 0,
                                width: i.width() - this.outerDimensions.width || 0
                            })
                    }
                }
            },
            _renderProxy: function () {
                var e = this.element,
                    i = this.options
                this.elementOffset = e.offset(),
                    this._helper ? (this.helper = this.helper || t('<div style=\'overflow:hidden;\'></div>'), this._addClass(this.helper, this._helper), this.helper.css({
                        width: this.element.outerWidth(),
                        height: this.element.outerHeight(),
                        position: 'absolute',
                        left: this.elementOffset.left + 'px',
                        top: this.elementOffset.top + 'px',
                        zIndex: ++i.zIndex
                    }), this.helper.appendTo('body').disableSelection()) : this.helper = this.element
            },
            _change: {
                e: function (t, e) {
                    return {
                        width: this.originalSize.width + e
                    }
                },
                w: function (t, e) {
                    var i = this.originalSize,
                        s = this.originalPosition
                    return {
                        left: s.left + e,
                        width: i.width - e
                    }
                },
                n: function (t, e, i) {
                    var s = this.originalSize,
                        n = this.originalPosition
                    return {
                        top: n.top + i,
                        height: s.height - i
                    }
                },
                s: function (t, e, i) {
                    return {
                        height: this.originalSize.height + i
                    }
                },
                se: function (e, i, s) {
                    return t.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [
                        e,
                        i,
                        s
                    ]))
                },
                sw: function (e, i, s) {
                    return t.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [
                        e,
                        i,
                        s
                    ]))
                },
                ne: function (e, i, s) {
                    return t.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [
                        e,
                        i,
                        s
                    ]))
                },
                nw: function (e, i, s) {
                    return t.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [
                        e,
                        i,
                        s
                    ]))
                }
            },
            _propagate: function (e, i) {
                t.ui.plugin.call(this, e, [
                    i,
                    this.ui()
                ]),
                'resize' !== e && this._trigger(e, i, this.ui())
            },
            plugins: {},
            ui: function () {
                return {
                    originalElement: this.originalElement,
                    element: this.element,
                    helper: this.helper,
                    position: this.position,
                    size: this.size,
                    originalSize: this.originalSize,
                    originalPosition: this.originalPosition
                }
            }
        }), t.ui.plugin.add('resizable', 'animate', {
        stop: function (e) {
            var i = t(this).resizable('instance'),
                s = i.options,
                n = i._proportionallyResizeElements,
                o = n.length && /textarea/i.test(n[0].nodeName),
                a = o && i._hasScroll(n[0], 'left') ? 0 : i.sizeDiff.height,
                r = o ? 0 : i.sizeDiff.width,
                h = {
                    width: i.size.width - r,
                    height: i.size.height - a
                },
                l = parseFloat(i.element.css('left')) + (i.position.left - i.originalPosition.left) || null,
                c = parseFloat(i.element.css('top')) + (i.position.top - i.originalPosition.top) || null
            i.element.animate(t.extend(h, c && l ? {
                    top: c,
                    left: l
                }
                : {}), {
                duration: s.animateDuration,
                easing: s.animateEasing,
                step: function () {
                    var s = {
                        width: parseFloat(i.element.css('width')),
                        height: parseFloat(i.element.css('height')),
                        top: parseFloat(i.element.css('top')),
                        left: parseFloat(i.element.css('left'))
                    }
                    n && n.length && t(n[0]).css({
                        width: s.width,
                        height: s.height
                    }),
                        i._updateCache(s),
                        i._propagate('resize', e)
                }
            })
        }
    }), t.ui.plugin.add('resizable', 'containment', {
        start: function () {
            var e,
                i,
                s,
                n,
                o,
                a,
                r,
                h = t(this).resizable('instance'),
                l = h.options,
                c = h.element,
                u = l.containment,
                d = u instanceof t ? u.get(0) : /parent/.test(u) ? c.parent().get(0) : u
            d && (h.containerElement = t(d), /document/.test(u) || u === document ? (h.containerOffset = {
                left: 0,
                top: 0
            }, h.containerPosition = {
                left: 0,
                top: 0
            }, h.parentData = {
                element: t(document),
                left: 0,
                top: 0,
                width: t(document).width(),
                height: t(document).height() || document.body.parentNode.scrollHeight
            }) : (e = t(d), i = [], t(['Top',
                'Right',
                'Left',
                'Bottom']).each(function (t, s) {
                i[t] = h._num(e.css('padding' + s))
            }), h.containerOffset = e.offset(), h.containerPosition = e.position(), h.containerSize = {
                height: e.innerHeight() - i[3],
                width: e.innerWidth() - i[1]
            }, s = h.containerOffset, n = h.containerSize.height, o = h.containerSize.width, a = h._hasScroll(d, 'left') ? d.scrollWidth : o, r = h._hasScroll(d) ? d.scrollHeight : n, h.parentData = {
                element: d,
                left: s.left,
                top: s.top,
                width: a,
                height: r
            }))
        },
        resize: function (e) {
            var i,
                s,
                n,
                o,
                a = t(this).resizable('instance'),
                r = a.options,
                h = a.containerOffset,
                l = a.position,
                c = a._aspectRatio || e.shiftKey,
                u = {
                    top: 0,
                    left: 0
                },
                d = a.containerElement,
                p = !0
            d[0] !== document && /static/.test(d.css('position')) && (u = h),
            l.left < (a._helper ? h.left : 0) && (a.size.width = a.size.width + (a._helper ? a.position.left - h.left : a.position.left - u.left), c && (a.size.height = a.size.width / a.aspectRatio, p = !1), a.position.left = r.helper ? h.left : 0),
            l.top < (a._helper ? h.top : 0) && (a.size.height = a.size.height + (a._helper ? a.position.top - h.top : a.position.top), c && (a.size.width = a.size.height * a.aspectRatio, p = !1), a.position.top = a._helper ? h.top : 0),
                n = a.containerElement.get(0) === a.element.parent().get(0),
                o = /relative|absolute/.test(a.containerElement.css('position')),
                n && o ? (a.offset.left = a.parentData.left + a.position.left, a.offset.top = a.parentData.top + a.position.top) : (a.offset.left = a.element.offset().left, a.offset.top = a.element.offset().top),
                i = Math.abs(a.sizeDiff.width + (a._helper ? a.offset.left - u.left : a.offset.left - h.left)),
                s = Math.abs(a.sizeDiff.height + (a._helper ? a.offset.top - u.top : a.offset.top - h.top)),
            i + a.size.width >= a.parentData.width && (a.size.width = a.parentData.width - i, c && (a.size.height = a.size.width / a.aspectRatio, p = !1)),
            s + a.size.height >= a.parentData.height && (a.size.height = a.parentData.height - s, c && (a.size.width = a.size.height * a.aspectRatio, p = !1)),
            p || (a.position.left = a.prevPosition.left, a.position.top = a.prevPosition.top, a.size.width = a.prevSize.width, a.size.height = a.prevSize.height)
        },
        stop: function () {
            var e = t(this).resizable('instance'),
                i = e.options,
                s = e.containerOffset,
                n = e.containerPosition,
                o = e.containerElement,
                a = t(e.helper),
                r = a.offset(),
                h = a.outerWidth() - e.sizeDiff.width,
                l = a.outerHeight() - e.sizeDiff.height
            e._helper && !i.animate && /relative/.test(o.css('position')) && t(this).css({
                left: r.left - n.left - s.left,
                width: h,
                height: l
            }),
            e._helper && !i.animate && /static/.test(o.css('position')) && t(this).css({
                left: r.left - n.left - s.left,
                width: h,
                height: l
            })
        }
    }), t.ui.plugin.add('resizable', 'alsoResize', {
        start: function () {
            var e = t(this).resizable('instance'),
                i = e.options
            t(i.alsoResize).each(function () {
                var e = t(this)
                e.data('ui-resizable-alsoresize', {
                    width: parseFloat(e.width()),
                    height: parseFloat(e.height()),
                    left: parseFloat(e.css('left')),
                    top: parseFloat(e.css('top'))
                })
            })
        },
        resize: function (e, i) {
            var s = t(this).resizable('instance'),
                n = s.options,
                o = s.originalSize,
                a = s.originalPosition,
                r = {
                    height: s.size.height - o.height || 0,
                    width: s.size.width - o.width || 0,
                    top: s.position.top - a.top || 0,
                    left: s.position.left - a.left || 0
                }
            t(n.alsoResize).each(function () {
                var e = t(this),
                    s = t(this).data('ui-resizable-alsoresize'),
                    n = {},
                    o = e.parents(i.originalElement[0]).length ? [
                        'width',
                        'height'
                    ] : [
                        'width',
                        'height',
                        'top',
                        'left'
                    ]
                t.each(o, function (t, e) {
                    var i = (s[e] || 0) + (r[e] || 0)
                    i && i >= 0 && (n[e] = i || null)
                }),
                    e.css(n)
            })
        },
        stop: function () {
            t(this).removeData('ui-resizable-alsoresize')
        }
    }), t.ui.plugin.add('resizable', 'ghost', {
        start: function () {
            var e = t(this).resizable('instance'),
                i = e.size
            e.ghost = e.originalElement.clone(),
                e.ghost.css({
                    opacity: 0.25,
                    display: 'block',
                    position: 'relative',
                    height: i.height,
                    width: i.width,
                    margin: 0,
                    left: 0,
                    top: 0
                }),
                e._addClass(e.ghost, 'ui-resizable-ghost'),
            t.uiBackCompat !== !1 && 'string' == typeof e.options.ghost && e.ghost.addClass(this.options.ghost),
                e.ghost.appendTo(e.helper)
        },
        resize: function () {
            var e = t(this).resizable('instance')
            e.ghost && e.ghost.css({
                position: 'relative',
                height: e.size.height,
                width: e.size.width
            })
        },
        stop: function () {
            var e = t(this).resizable('instance')
            e.ghost && e.helper && e.helper.get(0).removeChild(e.ghost.get(0))
        }
    }), t.ui.plugin.add('resizable', 'grid', {
        resize: function () {
            var e,
                i = t(this).resizable('instance'),
                s = i.options,
                n = i.size,
                o = i.originalSize,
                a = i.originalPosition,
                r = i.axis,
                h = 'number' == typeof s.grid ? [
                    s.grid,
                    s.grid
                ] : s.grid,
                l = h[0] || 1,
                c = h[1] || 1,
                u = Math.round((n.width - o.width) / l) * l,
                d = Math.round((n.height - o.height) / c) * c,
                p = o.width + u,
                f = o.height + d,
                g = s.maxWidth && p > s.maxWidth,
                m = s.maxHeight && f > s.maxHeight,
                _ = s.minWidth && s.minWidth > p,
                v = s.minHeight && s.minHeight > f
            s.grid = h,
            _ && (p += l),
            v && (f += c),
            g && (p -= l),
            m && (f -= c),
                /^(se|s|e)$/.test(r) ? (i.size.width = p, i.size.height = f) : /^(ne)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.top = a.top - d) : /^(sw)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.left = a.left - u) : ((0 >= f - c || 0 >= p - l) && (e = i._getPaddingPlusBorderDimensions(this)), f - c > 0 ? (i.size.height = f, i.position.top = a.top - d) : (f = c - e.height, i.size.height = f, i.position.top = a.top + o.height - f), p - l > 0 ? (i.size.width = p, i.position.left = a.left - u) : (p = l - e.width, i.size.width = p, i.position.left = a.left + o.width - p))
        }
    }), t.ui.resizable, t.widget('ui.selectable', t.ui.mouse, {
        version: '1.12.1',
        options: {
            appendTo: 'body',
            autoRefresh: !0,
            distance: 0,
            filter: '*',
            tolerance: 'touch',
            selected: null,
            selecting: null,
            start: null,
            stop: null,
            unselected: null,
            unselecting: null
        },
        _create: function () {
            var e = this
            this._addClass('ui-selectable'),
                this.dragged = !1,
                this.refresh = function () {
                    e.elementPos = t(e.element[0]).offset(),
                        e.selectees = t(e.options.filter, e.element[0]),
                        e._addClass(e.selectees, 'ui-selectee'),
                        e.selectees.each(function () {
                            var i = t(this),
                                s = i.offset(),
                                n = {
                                    left: s.left - e.elementPos.left,
                                    top: s.top - e.elementPos.top
                                }
                            t.data(this, 'selectable-item', {
                                element: this,
                                $element: i,
                                left: n.left,
                                top: n.top,
                                right: n.left + i.outerWidth(),
                                bottom: n.top + i.outerHeight(),
                                startselected: !1,
                                selected: i.hasClass('ui-selected'),
                                selecting: i.hasClass('ui-selecting'),
                                unselecting: i.hasClass('ui-unselecting')
                            })
                        })
                },
                this.refresh(),
                this._mouseInit(),
                this.helper = t('<div>'),
                this._addClass(this.helper, 'ui-selectable-helper')
        },
        _destroy: function () {
            this.selectees.removeData('selectable-item'),
                this._mouseDestroy()
        },
        _mouseStart: function (e) {
            var i = this,
                s = this.options
            this.opos = [
                e.pageX,
                e.pageY
            ],
                this.elementPos = t(this.element[0]).offset(),
            this.options.disabled || (this.selectees = t(s.filter, this.element[0]), this._trigger('start', e), t(s.appendTo).append(this.helper), this.helper.css({
                left: e.pageX,
                top: e.pageY,
                width: 0,
                height: 0
            }), s.autoRefresh && this.refresh(), this.selectees.filter('.ui-selected').each(function () {
                var s = t.data(this, 'selectable-item')
                s.startselected = !0,
                e.metaKey || e.ctrlKey || (i._removeClass(s.$element, 'ui-selected'), s.selected = !1, i._addClass(s.$element, 'ui-unselecting'), s.unselecting = !0, i._trigger('unselecting', e, {
                    unselecting: s.element
                }))
            }), t(e.target).parents().addBack().each(function () {
                var s,
                    n = t.data(this, 'selectable-item')
                return n ? (s = !e.metaKey && !e.ctrlKey || !n.$element.hasClass('ui-selected'), i._removeClass(n.$element, s ? 'ui-unselecting' : 'ui-selected')._addClass(n.$element, s ? 'ui-selecting' : 'ui-unselecting'), n.unselecting = !s, n.selecting = s, n.selected = s, s ? i._trigger('selecting', e, {
                    selecting: n.element
                }) : i._trigger('unselecting', e, {
                    unselecting: n.element
                }), !1) : void 0
            }))
        },
        _mouseDrag: function (e) {
            if (this.dragged = !0, !this.options.disabled) {
                var i,
                    s = this,
                    n = this.options,
                    o = this.opos[0],
                    a = this.opos[1],
                    r = e.pageX,
                    h = e.pageY
                return o > r && (i = r, r = o, o = i),
                a > h && (i = h, h = a, a = i),
                    this.helper.css({
                        left: o,
                        top: a,
                        width: r - o,
                        height: h - a
                    }),
                    this.selectees.each(function () {
                        var i = t.data(this, 'selectable-item'),
                            l = !1,
                            c = {}
                        i && i.element !== s.element[0] && (c.left = i.left + s.elementPos.left, c.right = i.right + s.elementPos.left, c.top = i.top + s.elementPos.top, c.bottom = i.bottom + s.elementPos.top, 'touch' === n.tolerance ? l = !(c.left > r || o > c.right || c.top > h || a > c.bottom) : 'fit' === n.tolerance && (l = c.left > o && r > c.right && c.top > a && h > c.bottom), l ? (i.selected && (s._removeClass(i.$element, 'ui-selected'), i.selected = !1), i.unselecting && (s._removeClass(i.$element, 'ui-unselecting'), i.unselecting = !1), i.selecting || (s._addClass(i.$element, 'ui-selecting'), i.selecting = !0, s._trigger('selecting', e, {
                            selecting: i.element
                        }))) : (i.selecting && ((e.metaKey || e.ctrlKey) && i.startselected ? (s._removeClass(i.$element, 'ui-selecting'), i.selecting = !1, s._addClass(i.$element, 'ui-selected'), i.selected = !0) : (s._removeClass(i.$element, 'ui-selecting'), i.selecting = !1, i.startselected && (s._addClass(i.$element, 'ui-unselecting'), i.unselecting = !0), s._trigger('unselecting', e, {
                            unselecting: i.element
                        }))), i.selected && (e.metaKey || e.ctrlKey || i.startselected || (s._removeClass(i.$element, 'ui-selected'), i.selected = !1, s._addClass(i.$element, 'ui-unselecting'), i.unselecting = !0, s._trigger('unselecting', e, {
                            unselecting: i.element
                        })))))
                    }),
                    !1
            }
        },
        _mouseStop: function (e) {
            var i = this
            return this.dragged = !1,
                t('.ui-unselecting', this.element[0]).each(function () {
                    var s = t.data(this, 'selectable-item')
                    i._removeClass(s.$element, 'ui-unselecting'),
                        s.unselecting = !1,
                        s.startselected = !1,
                        i._trigger('unselected', e, {
                            unselected: s.element
                        })
                }),
                t('.ui-selecting', this.element[0]).each(function () {
                    var s = t.data(this, 'selectable-item')
                    i._removeClass(s.$element, 'ui-selecting')._addClass(s.$element, 'ui-selected'),
                        s.selecting = !1,
                        s.selected = !0,
                        s.startselected = !0,
                        i._trigger('selected', e, {
                            selected: s.element
                        })
                }),
                this._trigger('stop', e),
                this.helper.remove(),
                !1
        }
    }), t.widget('ui.sortable', t.ui.mouse, {
        version: '1.12.1',
        widgetEventPrefix: 'sort',
        ready: !1,
        options: {
            appendTo: 'parent',
            axis: !1,
            connectWith: !1,
            containment: !1,
            cursor: 'auto',
            cursorAt: !1,
            dropOnEmpty: !0,
            forcePlaceholderSize: !1,
            forceHelperSize: !1,
            grid: !1,
            handle: !1,
            helper: 'original',
            items: '> *',
            opacity: !1,
            placeholder: !1,
            revert: !1,
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: 'default',
            tolerance: 'intersect',
            zIndex: 1000,
            activate: null,
            beforeStop: null,
            change: null,
            deactivate: null,
            out: null,
            over: null,
            receive: null,
            remove: null,
            sort: null,
            start: null,
            stop: null,
            update: null
        },
        _isOverAxis: function (t, e, i) {
            return t >= e && e + i > t
        },
        _isFloating: function (t) {
            return /left|right/.test(t.css('float')) || /inline|table-cell/.test(t.css('display'))
        },
        _create: function () {
            this.containerCache = {},
                this._addClass('ui-sortable'),
                this.refresh(),
                this.offset = this.element.offset(),
                this._mouseInit(),
                this._setHandleClassName(),
                this.ready = !0
        },
        _setOption: function (t, e) {
            this._super(t, e),
            'handle' === t && this._setHandleClassName()
        },
        _setHandleClassName: function () {
            var e = this
            this._removeClass(this.element.find('.ui-sortable-handle'), 'ui-sortable-handle'),
                t.each(this.items, function () {
                    e._addClass(this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item, 'ui-sortable-handle')
                })
        },
        _destroy: function () {
            this._mouseDestroy()
            for (var t = this.items.length - 1; t >= 0; t--) {
                this.items[t].item.removeData(this.widgetName + '-item')
            }
            return this
        },
        _mouseCapture: function (e, i) {
            var s = null,
                n = !1,
                o = this
            return this.reverting ? !1 : this.options.disabled || 'static' === this.options.type ? !1 : (this._refreshItems(e), t(e.target).parents().each(function () {
                return t.data(this, o.widgetName + '-item') === o ? (s = t(this), !1) : void 0
            }), t.data(e.target, o.widgetName + '-item') === o && (s = t(e.target)), s ? !this.options.handle || i || (t(this.options.handle, s).find('*').addBack().each(function () {
                this === e.target && (n = !0)
            }), n) ? (this.currentItem = s, this._removeCurrentsFromItems(), !0) : !1 : !1)
        },
        _mouseStart: function (e, i, s) {
            var n,
                o,
                a = this.options
            if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(e), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            }, t.extend(this.offset, {
                click: {
                    left: e.pageX - this.offset.left,
                    top: e.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }), this.helper.css('position', 'absolute'), this.cssPosition = this.helper.css('position'), this.originalPosition = this._generatePosition(e), this.originalPageX = e.pageX, this.originalPageY = e.pageY, a.cursorAt && this._adjustOffsetFromHelper(a.cursorAt), this.domPosition = {
                prev: this.currentItem.prev() [0],
                parent: this.currentItem.parent() [0]
            }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), a.containment && this._setContainment(), a.cursor && 'auto' !== a.cursor && (o = this.document.find('body'), this.storedCursor = o.css('cursor'), o.css('cursor', a.cursor), this.storedStylesheet = t('<style>*{ cursor: ' + a.cursor + ' !important; }</style>').appendTo(o)), a.opacity && (this.helper.css('opacity') && (this._storedOpacity = this.helper.css('opacity')), this.helper.css('opacity', a.opacity)), a.zIndex && (this.helper.css('zIndex') && (this._storedZIndex = this.helper.css('zIndex')), this.helper.css('zIndex', a.zIndex)), this.scrollParent[0] !== this.document[0] && 'HTML' !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger('start', e, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !s) {
                for (n = this.containers.length - 1; n >= 0; n--) {
                    this.containers[n]._trigger('activate', e, this._uiHash(this))
                }
            }
            return t.ui.ddmanager && (t.ui.ddmanager.current = this),
            t.ui.ddmanager && !a.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e),
                this.dragging = !0,
                this._addClass(this.helper, 'ui-sortable-helper'),
                this._mouseDrag(e),
                !0
        },
        _mouseDrag: function (e) {
            var i,
                s,
                n,
                o,
                a = this.options,
                r = !1
            for (this.position = this._generatePosition(e), this.positionAbs = this._convertPositionTo('absolute'), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== this.document[0] && 'HTML' !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - e.pageY < a.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + a.scrollSpeed : e.pageY - this.overflowOffset.top < a.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - a.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - e.pageX < a.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + a.scrollSpeed : e.pageX - this.overflowOffset.left < a.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - a.scrollSpeed)) : (e.pageY - this.document.scrollTop() < a.scrollSensitivity ? r = this.document.scrollTop(this.document.scrollTop() - a.scrollSpeed) : this.window.height() - (e.pageY - this.document.scrollTop()) < a.scrollSensitivity && (r = this.document.scrollTop(this.document.scrollTop() + a.scrollSpeed)), e.pageX - this.document.scrollLeft() < a.scrollSensitivity ? r = this.document.scrollLeft(this.document.scrollLeft() - a.scrollSpeed) : this.window.width() - (e.pageX - this.document.scrollLeft()) < a.scrollSensitivity && (r = this.document.scrollLeft(this.document.scrollLeft() + a.scrollSpeed))), r !== !1 && t.ui.ddmanager && !a.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e)), this.positionAbs = this._convertPositionTo('absolute'), this.options.axis && 'y' === this.options.axis || (this.helper[0].style.left = this.position.left + 'px'), this.options.axis && 'x' === this.options.axis || (this.helper[0].style.top = this.position.top + 'px'), i = this.items.length - 1; i >= 0; i--) {
                if (s = this.items[i], n = s.item[0], o = this._intersectsWithPointer(s), o && s.instance === this.currentContainer && n !== this.currentItem[0] && this.placeholder[1 === o ? 'next' : 'prev']() [0] !== n && !t.contains(this.placeholder[0], n) && ('semi-dynamic' === this.options.type ? !t.contains(this.element[0], n) : !0)) {
                    if (this.direction = 1 === o ? 'down' : 'up', 'pointer' !== this.options.tolerance && !this._intersectsWithSides(s)) {
                        break
                    }
                    this._rearrange(e, s),
                        this._trigger('change', e, this._uiHash())
                    break
                }
            }
            return this._contactContainers(e),
            t.ui.ddmanager && t.ui.ddmanager.drag(this, e),
                this._trigger('sort', e, this._uiHash()),
                this.lastPositionAbs = this.positionAbs,
                !1
        },
        _mouseStop: function (e, i) {
            if (e) {
                if (t.ui.ddmanager && !this.options.dropBehaviour && t.ui.ddmanager.drop(this, e), this.options.revert) {
                    var s = this,
                        n = this.placeholder.offset(),
                        o = this.options.axis,
                        a = {}
                    o && 'x' !== o || (a.left = n.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft)),
                    o && 'y' !== o || (a.top = n.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop)),
                        this.reverting = !0,
                        t(this.helper).animate(a, parseInt(this.options.revert, 10) || 500, function () {
                            s._clear(e)
                        })
                } else {
                    this._clear(e, i)
                }
                return !1
            }
        },
        cancel: function () {
            if (this.dragging) {
                this._mouseUp(new t.Event('mouseup', {
                    target: null
                })),
                    'original' === this.options.helper ? (this.currentItem.css(this._storedCSS), this._removeClass(this.currentItem, 'ui-sortable-helper')) : this.currentItem.show()
                for (var e = this.containers.length - 1; e >= 0; e--) {
                    this.containers[e]._trigger('deactivate', null, this._uiHash(this)),
                    this.containers[e].containerCache.over && (this.containers[e]._trigger('out', null, this._uiHash(this)), this.containers[e].containerCache.over = 0)
                }
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 'original' !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), t.extend(this, {
                helper: null,
                dragging: !1,
                reverting: !1,
                _noFinalSort: null
            }), this.domPosition.prev ? t(this.domPosition.prev).after(this.currentItem) : t(this.domPosition.parent).prepend(this.currentItem)),
                this
        },
        serialize: function (e) {
            var i = this._getItemsAsjQuery(e && e.connected),
                s = []
            return e = e || {},
                t(i).each(function () {
                    var i = (t(e.item || this).attr(e.attribute || 'id') || '').match(e.expression || /(.+)[\-=_](.+)/)
                    i && s.push((e.key || i[1] + '[]') + '=' + (e.key && e.expression ? i[1] : i[2]))
                }),
            !s.length && e.key && s.push(e.key + '='),
                s.join('&')
        },
        toArray: function (e) {
            var i = this._getItemsAsjQuery(e && e.connected),
                s = []
            return e = e || {},
                i.each(function () {
                    s.push(t(e.item || this).attr(e.attribute || 'id') || '')
                }),
                s
        },
        _intersectsWith: function (t) {
            var e = this.positionAbs.left,
                i = e + this.helperProportions.width,
                s = this.positionAbs.top,
                n = s + this.helperProportions.height,
                o = t.left,
                a = o + t.width,
                r = t.top,
                h = r + t.height,
                l = this.offset.click.top,
                c = this.offset.click.left,
                u = 'x' === this.options.axis || s + l > r && h > s + l,
                d = 'y' === this.options.axis || e + c > o && a > e + c,
                p = u && d
            return 'pointer' === this.options.tolerance || this.options.forcePointerForContainers || 'pointer' !== this.options.tolerance && this.helperProportions[this.floating ? 'width' : 'height'] > t[this.floating ? 'width' : 'height'] ? p : e + this.helperProportions.width / 2 > o && a > i - this.helperProportions.width / 2 && s + this.helperProportions.height / 2 > r && h > n - this.helperProportions.height / 2
        },
        _intersectsWithPointer: function (t) {
            var e,
                i,
                s = 'x' === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, t.top, t.height),
                n = 'y' === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, t.left, t.width),
                o = s && n
            return o ? (e = this._getDragVerticalDirection(), i = this._getDragHorizontalDirection(), this.floating ? 'right' === i || 'down' === e ? 2 : 1 : e && ('down' === e ? 2 : 1)) : !1
        },
        _intersectsWithSides: function (t) {
            var e = this._isOverAxis(this.positionAbs.top + this.offset.click.top, t.top + t.height / 2, t.height),
                i = this._isOverAxis(this.positionAbs.left + this.offset.click.left, t.left + t.width / 2, t.width),
                s = this._getDragVerticalDirection(),
                n = this._getDragHorizontalDirection()
            return this.floating && n ? 'right' === n && i || 'left' === n && !i : s && ('down' === s && e || 'up' === s && !e)
        },
        _getDragVerticalDirection: function () {
            var t = this.positionAbs.top - this.lastPositionAbs.top
            return 0 !== t && (t > 0 ? 'down' : 'up')
        },
        _getDragHorizontalDirection: function () {
            var t = this.positionAbs.left - this.lastPositionAbs.left
            return 0 !== t && (t > 0 ? 'right' : 'left')
        },
        refresh: function (t) {
            return this._refreshItems(t),
                this._setHandleClassName(),
                this.refreshPositions(),
                this
        },
        _connectWith: function () {
            var t = this.options
            return t.connectWith.constructor === String ? [
                t.connectWith
            ] : t.connectWith
        },
        _getItemsAsjQuery: function (e) {
            function i() {
                r.push(this)
            }

            var s,
                n,
                o,
                a,
                r = [],
                h = [],
                l = this._connectWith()
            if (l && e) {
                for (s = l.length - 1; s >= 0; s--) {
                    for (o = t(l[s], this.document[0]), n = o.length - 1; n >= 0; n--) {
                        a = t.data(o[n], this.widgetFullName),
                        a && a !== this && !a.options.disabled && h.push([t.isFunction(a.options.items) ? a.options.items.call(a.element) : t(a.options.items, a.element).not('.ui-sortable-helper').not('.ui-sortable-placeholder'),
                            a])
                    }
                }
            }
            for (h.push([t.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                options: this.options,
                item: this.currentItem
            }) : t(this.options.items, this.element).not('.ui-sortable-helper').not('.ui-sortable-placeholder'),
                this]), s = h.length - 1; s >= 0; s--) {
                h[s][0].each(i)
            }
            return t(r)
        },
        _removeCurrentsFromItems: function () {
            var e = this.currentItem.find(':data(' + this.widgetName + '-item)')
            this.items = t.grep(this.items, function (t) {
                for (var i = 0; e.length > i; i++) {
                    if (e[i] === t.item[0]) {
                        return !1
                    }
                }
                return !0
            })
        },
        _refreshItems: function (e) {
            this.items = [],
                this.containers = [
                    this
                ]
            var i,
                s,
                n,
                o,
                a,
                r,
                h,
                l,
                c = this.items,
                u = [
                    [t.isFunction(this.options.items) ? this.options.items.call(this.element[0], e, {
                        item: this.currentItem
                    }) : t(this.options.items, this.element),
                        this]
                ],
                d = this._connectWith()
            if (d && this.ready) {
                for (i = d.length - 1; i >= 0; i--) {
                    for (n = t(d[i], this.document[0]), s = n.length - 1; s >= 0; s--) {
                        o = t.data(n[s], this.widgetFullName),
                        o && o !== this && !o.options.disabled && (u.push([t.isFunction(o.options.items) ? o.options.items.call(o.element[0], e, {
                            item: this.currentItem
                        }) : t(o.options.items, o.element),
                            o]), this.containers.push(o))
                    }
                }
            }
            for (i = u.length - 1; i >= 0; i--) {
                for (a = u[i][1], r = u[i][0], s = 0, l = r.length; l > s; s++) {
                    h = t(r[s]),
                        h.data(this.widgetName + '-item', a),
                        c.push({
                            item: h,
                            instance: a,
                            width: 0,
                            height: 0,
                            left: 0,
                            top: 0
                        })
                }
            }
        },
        refreshPositions: function (e) {
            this.floating = this.items.length ? 'x' === this.options.axis || this._isFloating(this.items[0].item) : !1,
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset())
            var i,
                s,
                n,
                o
            for (i = this.items.length - 1; i >= 0; i--) {
                s = this.items[i],
                s.instance !== this.currentContainer && this.currentContainer && s.item[0] !== this.currentItem[0] || (n = this.options.toleranceElement ? t(this.options.toleranceElement, s.item) : s.item, e || (s.width = n.outerWidth(), s.height = n.outerHeight()), o = n.offset(), s.left = o.left, s.top = o.top)
            }
            if (this.options.custom && this.options.custom.refreshContainers) {
                this.options.custom.refreshContainers.call(this)
            } else {
                for (i = this.containers.length - 1; i >= 0; i--) {
                    o = this.containers[i].element.offset(),
                        this.containers[i].containerCache.left = o.left,
                        this.containers[i].containerCache.top = o.top,
                        this.containers[i].containerCache.width = this.containers[i].element.outerWidth(),
                        this.containers[i].containerCache.height = this.containers[i].element.outerHeight()
                }
            }
            return this
        },
        _createPlaceholder: function (e) {
            e = e || this
            var i,
                s = e.options
            s.placeholder && s.placeholder.constructor !== String || (i = s.placeholder, s.placeholder = {
                element: function () {
                    var s = e.currentItem[0].nodeName.toLowerCase(),
                        n = t('<' + s + '>', e.document[0])
                    return e._addClass(n, 'ui-sortable-placeholder', i || e.currentItem[0].className)._removeClass(n, 'ui-sortable-helper'),
                        'tbody' === s ? e._createTrPlaceholder(e.currentItem.find('tr').eq(0), t('<tr>', e.document[0]).appendTo(n)) : 'tr' === s ? e._createTrPlaceholder(e.currentItem, n) : 'img' === s && n.attr('src', e.currentItem.attr('src')),
                    i || n.css('visibility', 'hidden'),
                        n
                },
                update: function (t, n) {
                    (!i || s.forcePlaceholderSize) && (n.height() || n.height(e.currentItem.innerHeight() - parseInt(e.currentItem.css('paddingTop') || 0, 10) - parseInt(e.currentItem.css('paddingBottom') || 0, 10)), n.width() || n.width(e.currentItem.innerWidth() - parseInt(e.currentItem.css('paddingLeft') || 0, 10) - parseInt(e.currentItem.css('paddingRight') || 0, 10)))
                }
            }),
                e.placeholder = t(s.placeholder.element.call(e.element, e.currentItem)),
                e.currentItem.after(e.placeholder),
                s.placeholder.update(e, e.placeholder)
        },
        _createTrPlaceholder: function (e, i) {
            var s = this
            e.children().each(function () {
                t('<td>&#160;</td>', s.document[0]).attr('colspan', t(this).attr('colspan') || 1).appendTo(i)
            })
        },
        _contactContainers: function (e) {
            var i,
                s,
                n,
                o,
                a,
                r,
                h,
                l,
                c,
                u,
                d = null,
                p = null
            for (i = this.containers.length - 1; i >= 0; i--) {
                if (!t.contains(this.currentItem[0], this.containers[i].element[0])) {
                    if (this._intersectsWith(this.containers[i].containerCache)) {
                        if (d && t.contains(this.containers[i].element[0], d.element[0])) {
                            continue
                        }
                        d = this.containers[i],
                            p = i
                    } else {
                        this.containers[i].containerCache.over && (this.containers[i]._trigger('out', e, this._uiHash(this)), this.containers[i].containerCache.over = 0)
                    }
                }
            }
            if (d) {
                if (1 === this.containers.length) {
                    this.containers[p].containerCache.over || (this.containers[p]._trigger('over', e, this._uiHash(this)), this.containers[p].containerCache.over = 1)
                } else {
                    for (n = 10000, o = null, c = d.floating || this._isFloating(this.currentItem), a = c ? 'left' : 'top', r = c ? 'width' : 'height', u = c ? 'pageX' : 'pageY', s = this.items.length - 1; s >= 0; s--) {
                        t.contains(this.containers[p].element[0], this.items[s].item[0]) && this.items[s].item[0] !== this.currentItem[0] && (h = this.items[s].item.offset() [a], l = !1, e[u] - h > this.items[s][r] / 2 && (l = !0), n > Math.abs(e[u] - h) && (n = Math.abs(e[u] - h), o = this.items[s], this.direction = l ? 'up' : 'down'))
                    }
                    if (!o && !this.options.dropOnEmpty) {
                        return
                    }
                    if (this.currentContainer === this.containers[p]) {
                        return this.currentContainer.containerCache.over || (this.containers[p]._trigger('over', e, this._uiHash()), this.currentContainer.containerCache.over = 1),
                            void 0
                    }
                    o ? this._rearrange(e, o, null, !0) : this._rearrange(e, null, this.containers[p].element, !0),
                        this._trigger('change', e, this._uiHash()),
                        this.containers[p]._trigger('change', e, this._uiHash(this)),
                        this.currentContainer = this.containers[p],
                        this.options.placeholder.update(this.currentContainer, this.placeholder),
                        this.containers[p]._trigger('over', e, this._uiHash(this)),
                        this.containers[p].containerCache.over = 1
                }
            }
        },
        _createHelper: function (e) {
            var i = this.options,
                s = t.isFunction(i.helper) ? t(i.helper.apply(this.element[0], [
                    e,
                    this.currentItem
                ])) : 'clone' === i.helper ? this.currentItem.clone() : this.currentItem
            return s.parents('body').length || t('parent' !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode) [0].appendChild(s[0]),
            s[0] === this.currentItem[0] && (this._storedCSS = {
                width: this.currentItem[0].style.width,
                height: this.currentItem[0].style.height,
                position: this.currentItem.css('position'),
                top: this.currentItem.css('top'),
                left: this.currentItem.css('left')
            }),
            (!s[0].style.width || i.forceHelperSize) && s.width(this.currentItem.width()),
            (!s[0].style.height || i.forceHelperSize) && s.height(this.currentItem.height()),
                s
        },
        _adjustOffsetFromHelper: function (e) {
            'string' == typeof e && (e = e.split(' ')),
            t.isArray(e) && (e = {
                left: +e[0],
                top: +e[1] || 0
            }),
            'left' in e && (this.offset.click.left = e.left + this.margins.left),
            'right' in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left),
            'top' in e && (this.offset.click.top = e.top + this.margins.top),
            'bottom' in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top)
        },
        _getParentOffset: function () {
            this.offsetParent = this.helper.offsetParent()
            var e = this.offsetParent.offset()
            return 'absolute' === this.cssPosition && this.scrollParent[0] !== this.document[0] && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), e.top += this.scrollParent.scrollTop()),
            (this.offsetParent[0] === this.document[0].body || this.offsetParent[0].tagName && 'html' === this.offsetParent[0].tagName.toLowerCase() && t.ui.ie) && (e = {
                top: 0,
                left: 0
            }),
                {
                    top: e.top + (parseInt(this.offsetParent.css('borderTopWidth'), 10) || 0),
                    left: e.left + (parseInt(this.offsetParent.css('borderLeftWidth'), 10) || 0)
                }
        },
        _getRelativeOffset: function () {
            if ('relative' === this.cssPosition) {
                var t = this.currentItem.position()
                return {
                    top: t.top - (parseInt(this.helper.css('top'), 10) || 0) + this.scrollParent.scrollTop(),
                    left: t.left - (parseInt(this.helper.css('left'), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {
                top: 0,
                left: 0
            }
        },
        _cacheMargins: function () {
            this.margins = {
                left: parseInt(this.currentItem.css('marginLeft'), 10) || 0,
                top: parseInt(this.currentItem.css('marginTop'), 10) || 0
            }
        },
        _cacheHelperProportions: function () {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function () {
            var e,
                i,
                s,
                n = this.options
            'parent' === n.containment && (n.containment = this.helper[0].parentNode),
            ('document' === n.containment || 'window' === n.containment) && (this.containment = [
                0 - this.offset.relative.left - this.offset.parent.left,
                0 - this.offset.relative.top - this.offset.parent.top,
                'document' === n.containment ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left,
                ('document' === n.containment ? this.document.height() || document.body.parentNode.scrollHeight : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
            ]),
            /^(document|window|parent)$/.test(n.containment) || (e = t(n.containment) [0], i = t(n.containment).offset(), s = 'hidden' !== t(e).css('overflow'), this.containment = [
                i.left + (parseInt(t(e).css('borderLeftWidth'), 10) || 0) + (parseInt(t(e).css('paddingLeft'), 10) || 0) - this.margins.left,
                i.top + (parseInt(t(e).css('borderTopWidth'), 10) || 0) + (parseInt(t(e).css('paddingTop'), 10) || 0) - this.margins.top,
                i.left + (s ? Math.max(e.scrollWidth, e.offsetWidth) : e.offsetWidth) - (parseInt(t(e).css('borderLeftWidth'), 10) || 0) - (parseInt(t(e).css('paddingRight'), 10) || 0) - this.helperProportions.width - this.margins.left,
                i.top + (s ? Math.max(e.scrollHeight, e.offsetHeight) : e.offsetHeight) - (parseInt(t(e).css('borderTopWidth'), 10) || 0) - (parseInt(t(e).css('paddingBottom'), 10) || 0) - this.helperProportions.height - this.margins.top
            ])
        },
        _convertPositionTo: function (e, i) {
            i || (i = this.position)
            var s = 'absolute' === e ? 1 : -1,
                n = 'absolute' !== this.cssPosition || this.scrollParent[0] !== this.document[0] && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                o = /(html|body)/i.test(n[0].tagName)
            return {
                top: i.top + this.offset.relative.top * s + this.offset.parent.top * s - ('fixed' === this.cssPosition ? -this.scrollParent.scrollTop() : o ? 0 : n.scrollTop()) * s,
                left: i.left + this.offset.relative.left * s + this.offset.parent.left * s - ('fixed' === this.cssPosition ? -this.scrollParent.scrollLeft() : o ? 0 : n.scrollLeft()) * s
            }
        },
        _generatePosition: function (e) {
            var i,
                s,
                n = this.options,
                o = e.pageX,
                a = e.pageY,
                r = 'absolute' !== this.cssPosition || this.scrollParent[0] !== this.document[0] && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                h = /(html|body)/i.test(r[0].tagName)
            return 'relative' !== this.cssPosition || this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()),
            this.originalPosition && (this.containment && (e.pageX - this.offset.click.left < this.containment[0] && (o = this.containment[0] + this.offset.click.left), e.pageY - this.offset.click.top < this.containment[1] && (a = this.containment[1] + this.offset.click.top), e.pageX - this.offset.click.left > this.containment[2] && (o = this.containment[2] + this.offset.click.left), e.pageY - this.offset.click.top > this.containment[3] && (a = this.containment[3] + this.offset.click.top)), n.grid && (i = this.originalPageY + Math.round((a - this.originalPageY) / n.grid[1]) * n.grid[1], a = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - n.grid[1] : i + n.grid[1] : i, s = this.originalPageX + Math.round((o - this.originalPageX) / n.grid[0]) * n.grid[0], o = this.containment ? s - this.offset.click.left >= this.containment[0] && s - this.offset.click.left <= this.containment[2] ? s : s - this.offset.click.left >= this.containment[0] ? s - n.grid[0] : s + n.grid[0] : s)),
                {
                    top: a - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ('fixed' === this.cssPosition ? -this.scrollParent.scrollTop() : h ? 0 : r.scrollTop()),
                    left: o - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ('fixed' === this.cssPosition ? -this.scrollParent.scrollLeft() : h ? 0 : r.scrollLeft())
                }
        },
        _rearrange: function (t, e, i, s) {
            i ? i[0].appendChild(this.placeholder[0]) : e.item[0].parentNode.insertBefore(this.placeholder[0], 'down' === this.direction ? e.item[0] : e.item[0].nextSibling),
                this.counter = this.counter ? ++this.counter : 1
            var n = this.counter
            this._delay(function () {
                n === this.counter && this.refreshPositions(!s)
            })
        },
        _clear: function (t, e) {
            function i(t, e, i) {
                return function (s) {
                    i._trigger(t, s, e._uiHash(e))
                }
            }

            this.reverting = !1
            var s,
                n = []
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                for (s in this._storedCSS) {
                    ('auto' === this._storedCSS[s] || 'static' === this._storedCSS[s]) && (this._storedCSS[s] = '')
                }
                this.currentItem.css(this._storedCSS),
                    this._removeClass(this.currentItem, 'ui-sortable-helper')
            } else {
                this.currentItem.show()
            }
            for (this.fromOutside && !e && n.push(function (t) {
                this._trigger('receive', t, this._uiHash(this.fromOutside))
            }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not('.ui-sortable-helper') [0] && this.domPosition.parent === this.currentItem.parent() [0] || e || n.push(function (t) {
                this._trigger('update', t, this._uiHash())
            }), this !== this.currentContainer && (e || (n.push(function (t) {
                this._trigger('remove', t, this._uiHash())
            }), n.push(function (t) {
                return function (e) {
                    t._trigger('receive', e, this._uiHash(this))
                }
            }.call(this, this.currentContainer)), n.push(function (t) {
                return function (e) {
                    t._trigger('update', e, this._uiHash(this))
                }
            }.call(this, this.currentContainer)))), s = this.containers.length - 1; s >= 0; s--) {
                e || n.push(i('deactivate', this, this.containers[s])),
                this.containers[s].containerCache.over && (n.push(i('out', this, this.containers[s])), this.containers[s].containerCache.over = 0)
            }
            if (this.storedCursor && (this.document.find('body').css('cursor', this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css('opacity', this._storedOpacity), this._storedZIndex && this.helper.css('zIndex', 'auto' === this._storedZIndex ? '' : this._storedZIndex), this.dragging = !1, e || this._trigger('beforeStop', t, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null), !e) {
                for (s = 0; n.length > s; s++) {
                    n[s].call(this, t)
                }
                this._trigger('stop', t, this._uiHash())
            }
            return this.fromOutside = !1,
                !this.cancelHelperRemoval
        },
        _trigger: function () {
            t.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
        },
        _uiHash: function (e) {
            var i = e || this
            return {
                helper: i.helper,
                placeholder: i.placeholder || t([]),
                position: i.position,
                originalPosition: i.originalPosition,
                offset: i.positionAbs,
                item: i.currentItem,
                sender: e ? e.element : null
            }
        }
    }), t.widget('ui.accordion', {
        version: '1.12.1',
        options: {
            active: 0,
            animate: {},
            classes: {
                'ui-accordion-header': 'ui-corner-top',
                'ui-accordion-header-collapsed': 'ui-corner-all',
                'ui-accordion-content': 'ui-corner-bottom'
            },
            collapsible: !1,
            event: 'click',
            header: '> li > :first-child, > :not(li):even',
            heightStyle: 'auto',
            icons: {
                activeHeader: 'ui-icon-triangle-1-s',
                header: 'ui-icon-triangle-1-e'
            },
            activate: null,
            beforeActivate: null
        },
        hideProps: {
            borderTopWidth: 'hide',
            borderBottomWidth: 'hide',
            paddingTop: 'hide',
            paddingBottom: 'hide',
            height: 'hide'
        },
        showProps: {
            borderTopWidth: 'show',
            borderBottomWidth: 'show',
            paddingTop: 'show',
            paddingBottom: 'show',
            height: 'show'
        },
        _create: function () {
            var e = this.options
            this.prevShow = this.prevHide = t(),
                this._addClass('ui-accordion', 'ui-widget ui-helper-reset'),
                this.element.attr('role', 'tablist'),
            e.collapsible || e.active !== !1 && null != e.active || (e.active = 0),
                this._processPanels(),
            0 > e.active && (e.active += this.headers.length),
                this._refresh()
        },
        _getCreateEventData: function () {
            return {
                header: this.active,
                panel: this.active.length ? this.active.next() : t()
            }
        },
        _createIcons: function () {
            var e,
                i,
                s = this.options.icons
            s && (e = t('<span>'), this._addClass(e, 'ui-accordion-header-icon', 'ui-icon ' + s.header), e.prependTo(this.headers), i = this.active.children('.ui-accordion-header-icon'), this._removeClass(i, s.header)._addClass(i, null, s.activeHeader)._addClass(this.headers, 'ui-accordion-icons'))
        },
        _destroyIcons: function () {
            this._removeClass(this.headers, 'ui-accordion-icons'),
                this.headers.children('.ui-accordion-header-icon').remove()
        },
        _destroy: function () {
            var t
            this.element.removeAttr('role'),
                this.headers.removeAttr('role aria-expanded aria-selected aria-controls tabIndex').removeUniqueId(),
                this._destroyIcons(),
                t = this.headers.next().css('display', '').removeAttr('role aria-hidden aria-labelledby').removeUniqueId(),
            'content' !== this.options.heightStyle && t.css('height', '')
        },
        _setOption: function (t, e) {
            return 'active' === t ? (this._activate(e), void 0) : ('event' === t && (this.options.event && this._off(this.headers, this.options.event), this._setupEvents(e)), this._super(t, e), 'collapsible' !== t || e || this.options.active !== !1 || this._activate(0), 'icons' === t && (this._destroyIcons(), e && this._createIcons()), void 0)
        },
        _setOptionDisabled: function (t) {
            this._super(t),
                this.element.attr('aria-disabled', t),
                this._toggleClass(null, 'ui-state-disabled', !!t),
                this._toggleClass(this.headers.add(this.headers.next()), null, 'ui-state-disabled', !!t)
        },
        _keydown: function (e) {
            if (!e.altKey && !e.ctrlKey) {
                var i = t.ui.keyCode,
                    s = this.headers.length,
                    n = this.headers.index(e.target),
                    o = !1
                switch (e.keyCode) {
                    case i.RIGHT:
                    case i.DOWN:
                        o = this.headers[(n + 1) % s]
                        break
                    case i.LEFT:
                    case i.UP:
                        o = this.headers[(n - 1 + s) % s]
                        break
                    case i.SPACE:
                    case i.ENTER:
                        this._eventHandler(e)
                        break
                    case i.HOME:
                        o = this.headers[0]
                        break
                    case i.END:
                        o = this.headers[s - 1]
                }
                o && (t(e.target).attr('tabIndex', -1), t(o).attr('tabIndex', 0), t(o).trigger('focus'), e.preventDefault())
            }
        },
        _panelKeyDown: function (e) {
            e.keyCode === t.ui.keyCode.UP && e.ctrlKey && t(e.currentTarget).prev().trigger('focus')
        },
        refresh: function () {
            var e = this.options
            this._processPanels(),
                e.active === !1 && e.collapsible === !0 || !this.headers.length ? (e.active = !1, this.active = t()) : e.active === !1 ? this._activate(0) : this.active.length && !t.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find('.ui-state-disabled').length ? (e.active = !1, this.active = t()) : this._activate(Math.max(0, e.active - 1)) : e.active = this.headers.index(this.active),
                this._destroyIcons(),
                this._refresh()
        },
        _processPanels: function () {
            var t = this.headers,
                e = this.panels
            this.headers = this.element.find(this.options.header),
                this._addClass(this.headers, 'ui-accordion-header ui-accordion-header-collapsed', 'ui-state-default'),
                this.panels = this.headers.next().filter(':not(.ui-accordion-content-active)').hide(),
                this._addClass(this.panels, 'ui-accordion-content', 'ui-helper-reset ui-widget-content'),
            e && (this._off(t.not(this.headers)), this._off(e.not(this.panels)))
        },
        _refresh: function () {
            var e,
                i = this.options,
                s = i.heightStyle,
                n = this.element.parent()
            this.active = this._findActive(i.active),
                this._addClass(this.active, 'ui-accordion-header-active', 'ui-state-active')._removeClass(this.active, 'ui-accordion-header-collapsed'),
                this._addClass(this.active.next(), 'ui-accordion-content-active'),
                this.active.next().show(),
                this.headers.attr('role', 'tab').each(function () {
                    var e = t(this),
                        i = e.uniqueId().attr('id'),
                        s = e.next(),
                        n = s.uniqueId().attr('id')
                    e.attr('aria-controls', n),
                        s.attr('aria-labelledby', i)
                }).next().attr('role', 'tabpanel'),
                this.headers.not(this.active).attr({
                    'aria-selected': 'false',
                    'aria-expanded': 'false',
                    tabIndex: -1
                }).next().attr({
                    'aria-hidden': 'true'
                }).hide(),
                this.active.length ? this.active.attr({
                    'aria-selected': 'true',
                    'aria-expanded': 'true',
                    tabIndex: 0
                }).next().attr({
                    'aria-hidden': 'false'
                }) : this.headers.eq(0).attr('tabIndex', 0),
                this._createIcons(),
                this._setupEvents(i.event),
                'fill' === s ? (e = n.height(), this.element.siblings(':visible').each(function () {
                    var i = t(this),
                        s = i.css('position')
                    'absolute' !== s && 'fixed' !== s && (e -= i.outerHeight(!0))
                }), this.headers.each(function () {
                    e -= t(this).outerHeight(!0)
                }), this.headers.next().each(function () {
                    t(this).height(Math.max(0, e - t(this).innerHeight() + t(this).height()))
                }).css('overflow', 'auto')) : 'auto' === s && (e = 0, this.headers.next().each(function () {
                    var i = t(this).is(':visible')
                    i || t(this).show(),
                        e = Math.max(e, t(this).css('height', '').height()),
                    i || t(this).hide()
                }).height(e))
        },
        _activate: function (e) {
            var i = this._findActive(e) [0]
            i !== this.active[0] && (i = i || this.active[0], this._eventHandler({
                target: i,
                currentTarget: i,
                preventDefault: t.noop
            }))
        },
        _findActive: function (e) {
            return 'number' == typeof e ? this.headers.eq(e) : t()
        },
        _setupEvents: function (e) {
            var i = {
                keydown: '_keydown'
            }
            e && t.each(e.split(' '), function (t, e) {
                i[e] = '_eventHandler'
            }),
                this._off(this.headers.add(this.headers.next())),
                this._on(this.headers, i),
                this._on(this.headers.next(), {
                    keydown: '_panelKeyDown'
                }),
                this._hoverable(this.headers),
                this._focusable(this.headers)
        },
        _eventHandler: function (e) {
            var i,
                s,
                n = this.options,
                o = this.active,
                a = t(e.currentTarget),
                r = a[0] === o[0],
                h = r && n.collapsible,
                l = h ? t() : a.next(),
                c = o.next(),
                u = {
                    oldHeader: o,
                    oldPanel: c,
                    newHeader: h ? t() : a,
                    newPanel: l
                }
            e.preventDefault(),
            r && !n.collapsible || this._trigger('beforeActivate', e, u) === !1 || (n.active = h ? !1 : this.headers.index(a), this.active = r ? t() : a, this._toggle(u), this._removeClass(o, 'ui-accordion-header-active', 'ui-state-active'), n.icons && (i = o.children('.ui-accordion-header-icon'), this._removeClass(i, null, n.icons.activeHeader)._addClass(i, null, n.icons.header)), r || (this._removeClass(a, 'ui-accordion-header-collapsed')._addClass(a, 'ui-accordion-header-active', 'ui-state-active'), n.icons && (s = a.children('.ui-accordion-header-icon'), this._removeClass(s, null, n.icons.header)._addClass(s, null, n.icons.activeHeader)), this._addClass(a.next(), 'ui-accordion-content-active')))
        },
        _toggle: function (e) {
            var i = e.newPanel,
                s = this.prevShow.length ? this.prevShow : e.oldPanel
            this.prevShow.add(this.prevHide).stop(!0, !0),
                this.prevShow = i,
                this.prevHide = s,
                this.options.animate ? this._animate(i, s, e) : (s.hide(), i.show(), this._toggleComplete(e)),
                s.attr({
                    'aria-hidden': 'true'
                }),
                s.prev().attr({
                    'aria-selected': 'false',
                    'aria-expanded': 'false'
                }),
                i.length && s.length ? s.prev().attr({
                    tabIndex: -1,
                    'aria-expanded': 'false'
                }) : i.length && this.headers.filter(function () {
                    return 0 === parseInt(t(this).attr('tabIndex'), 10)
                }).attr('tabIndex', -1),
                i.attr('aria-hidden', 'false').prev().attr({
                    'aria-selected': 'true',
                    'aria-expanded': 'true',
                    tabIndex: 0
                })
        },
        _animate: function (t, e, i) {
            var s,
                n,
                o,
                a = this,
                r = 0,
                h = t.css('box-sizing'),
                l = t.length && (!e.length || t.index() < e.index()),
                c = this.options.animate || {},
                u = l && c.down || c,
                d = function () {
                    a._toggleComplete(i)
                }
            return 'number' == typeof u && (o = u),
            'string' == typeof u && (n = u),
                n = n || u.easing || c.easing,
                o = o || u.duration || c.duration,
                e.length ? t.length ? (s = t.show().outerHeight(), e.animate(this.hideProps, {
                    duration: o,
                    easing: n,
                    step: function (t, e) {
                        e.now = Math.round(t)
                    }
                }), t.hide().animate(this.showProps, {
                    duration: o,
                    easing: n,
                    complete: d,
                    step: function (t, i) {
                        i.now = Math.round(t),
                            'height' !== i.prop ? 'content-box' === h && (r += i.now) : 'content' !== a.options.heightStyle && (i.now = Math.round(s - e.outerHeight() - r), r = 0)
                    }
                }), void 0) : e.animate(this.hideProps, o, n, d) : t.animate(this.showProps, o, n, d)
        },
        _toggleComplete: function (t) {
            var e = t.oldPanel,
                i = e.prev()
            this._removeClass(e, 'ui-accordion-content-active'),
                this._removeClass(i, 'ui-accordion-header-active')._addClass(i, 'ui-accordion-header-collapsed'),
            e.length && (e.parent() [0].className = e.parent() [0].className),
                this._trigger('activate', null, t)
        }
    }), t.widget('ui.menu', {
        version: '1.12.1',
        defaultElement: '<ul>',
        delay: 300,
        options: {
            icons: {
                submenu: 'ui-icon-caret-1-e'
            },
            items: '> *',
            menus: 'ul',
            position: {
                my: 'left top',
                at: 'right top'
            },
            role: 'menu',
            blur: null,
            focus: null,
            select: null
        },
        _create: function () {
            this.activeMenu = this.element,
                this.mouseHandled = !1,
                this.element.uniqueId().attr({
                    role: this.options.role,
                    tabIndex: 0
                }),
                this._addClass('ui-menu', 'ui-widget ui-widget-content'),
                this._on({
                    'mousedown .ui-menu-item': function (t) {
                        t.preventDefault()
                    },
                    'click .ui-menu-item': function (e) {
                        var i = t(e.target),
                            s = t(t.ui.safeActiveElement(this.document[0]))
                        !this.mouseHandled && i.not('.ui-state-disabled').length && (this.select(e), e.isPropagationStopped() || (this.mouseHandled = !0), i.has('.ui-menu').length ? this.expand(e) : !this.element.is(':focus') && s.closest('.ui-menu').length && (this.element.trigger('focus', [
                            !0
                        ]), this.active && 1 === this.active.parents('.ui-menu').length && clearTimeout(this.timer)))
                    },
                    'mouseenter .ui-menu-item': function (e) {
                        if (!this.previousFilter) {
                            var i = t(e.target).closest('.ui-menu-item'),
                                s = t(e.currentTarget)
                            i[0] === s[0] && (this._removeClass(s.siblings().children('.ui-state-active'), null, 'ui-state-active'), this.focus(e, s))
                        }
                    },
                    mouseleave: 'collapseAll',
                    'mouseleave .ui-menu': 'collapseAll',
                    focus: function (t, e) {
                        var i = this.active || this.element.find(this.options.items).eq(0)
                        e || this.focus(t, i)
                    },
                    blur: function (e) {
                        this._delay(function () {
                            var i = !t.contains(this.element[0], t.ui.safeActiveElement(this.document[0]))
                            i && this.collapseAll(e)
                        })
                    },
                    keydown: '_keydown'
                }),
                this.refresh(),
                this._on(this.document, {
                    click: function (t) {
                        this._closeOnDocumentClick(t) && this.collapseAll(t),
                            this.mouseHandled = !1
                    }
                })
        },
        _destroy: function () {
            var e = this.element.find('.ui-menu-item').removeAttr('role aria-disabled'),
                i = e.children('.ui-menu-item-wrapper').removeUniqueId().removeAttr('tabIndex role aria-haspopup')
            this.element.removeAttr('aria-activedescendant').find('.ui-menu').addBack().removeAttr('role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex').removeUniqueId().show(),
                i.children().each(function () {
                    var e = t(this)
                    e.data('ui-menu-submenu-caret') && e.remove()
                })
        },
        _keydown: function (e) {
            var i,
                s,
                n,
                o,
                a = !0
            switch (e.keyCode) {
                case t.ui.keyCode.PAGE_UP:
                    this.previousPage(e)
                    break
                case t.ui.keyCode.PAGE_DOWN:
                    this.nextPage(e)
                    break
                case t.ui.keyCode.HOME:
                    this._move('first', 'first', e)
                    break
                case t.ui.keyCode.END:
                    this._move('last', 'last', e)
                    break
                case t.ui.keyCode.UP:
                    this.previous(e)
                    break
                case t.ui.keyCode.DOWN:
                    this.next(e)
                    break
                case t.ui.keyCode.LEFT:
                    this.collapse(e)
                    break
                case t.ui.keyCode.RIGHT:
                    this.active && !this.active.is('.ui-state-disabled') && this.expand(e)
                    break
                case t.ui.keyCode.ENTER:
                case t.ui.keyCode.SPACE:
                    this._activate(e)
                    break
                case t.ui.keyCode.ESCAPE:
                    this.collapse(e)
                    break
                default:
                    a = !1,
                        s = this.previousFilter || '',
                        o = !1,
                        n = e.keyCode >= 96 && 105 >= e.keyCode ? '' + (e.keyCode - 96) : String.fromCharCode(e.keyCode),
                        clearTimeout(this.filterTimer),
                        n === s ? o = !0 : n = s + n,
                        i = this._filterMenuItems(n),
                        i = o && -1 !== i.index(this.active.next()) ? this.active.nextAll('.ui-menu-item') : i,
                    i.length || (n = String.fromCharCode(e.keyCode), i = this._filterMenuItems(n)),
                        i.length ? (this.focus(e, i), this.previousFilter = n, this.filterTimer = this._delay(function () {
                            delete this.previousFilter
                        }, 1000)) : delete this.previousFilter
            }
            a && e.preventDefault()
        },
        _activate: function (t) {
            this.active && !this.active.is('.ui-state-disabled') && (this.active.children('[aria-haspopup=\'true\']').length ? this.expand(t) : this.select(t))
        },
        refresh: function () {
            var e,
                i,
                s,
                n,
                o,
                a = this,
                r = this.options.icons.submenu,
                h = this.element.find(this.options.menus)
            this._toggleClass('ui-menu-icons', null, !!this.element.find('.ui-icon').length),
                s = h.filter(':not(.ui-menu)').hide().attr({
                    role: this.options.role,
                    'aria-hidden': 'true',
                    'aria-expanded': 'false'
                }).each(function () {
                    var e = t(this),
                        i = e.prev(),
                        s = t('<span>').data('ui-menu-submenu-caret', !0)
                    a._addClass(s, 'ui-menu-icon', 'ui-icon ' + r),
                        i.attr('aria-haspopup', 'true').prepend(s),
                        e.attr('aria-labelledby', i.attr('id'))
                }),
                this._addClass(s, 'ui-menu', 'ui-widget ui-widget-content ui-front'),
                e = h.add(this.element),
                i = e.find(this.options.items),
                i.not('.ui-menu-item').each(function () {
                    var e = t(this)
                    a._isDivider(e) && a._addClass(e, 'ui-menu-divider', 'ui-widget-content')
                }),
                n = i.not('.ui-menu-item, .ui-menu-divider'),
                o = n.children().not('.ui-menu').uniqueId().attr({
                    tabIndex: -1,
                    role: this._itemRole()
                }),
                this._addClass(n, 'ui-menu-item')._addClass(o, 'ui-menu-item-wrapper'),
                i.filter('.ui-state-disabled').attr('aria-disabled', 'true'),
            this.active && !t.contains(this.element[0], this.active[0]) && this.blur()
        },
        _itemRole: function () {
            return {
                menu: 'menuitem',
                listbox: 'option'
            }
                [
                this.options.role
                ]
        },
        _setOption: function (t, e) {
            if ('icons' === t) {
                var i = this.element.find('.ui-menu-icon')
                this._removeClass(i, null, this.options.icons.submenu)._addClass(i, null, e.submenu)
            }
            this._super(t, e)
        },
        _setOptionDisabled: function (t) {
            this._super(t),
                this.element.attr('aria-disabled', t + ''),
                this._toggleClass(null, 'ui-state-disabled', !!t)
        },
        focus: function (t, e) {
            var i,
                s,
                n
            this.blur(t, t && 'focus' === t.type),
                this._scrollIntoView(e),
                this.active = e.first(),
                s = this.active.children('.ui-menu-item-wrapper'),
                this._addClass(s, null, 'ui-state-active'),
            this.options.role && this.element.attr('aria-activedescendant', s.attr('id')),
                n = this.active.parent().closest('.ui-menu-item').children('.ui-menu-item-wrapper'),
                this._addClass(n, null, 'ui-state-active'),
                t && 'keydown' === t.type ? this._close() : this.timer = this._delay(function () {
                    this._close()
                }, this.delay),
                i = e.children('.ui-menu'),
            i.length && t && /^mouse/.test(t.type) && this._startOpening(i),
                this.activeMenu = e.parent(),
                this._trigger('focus', t, {
                    item: e
                })
        },
        _scrollIntoView: function (e) {
            var i,
                s,
                n,
                o,
                a,
                r
            this._hasScroll() && (i = parseFloat(t.css(this.activeMenu[0], 'borderTopWidth')) || 0, s = parseFloat(t.css(this.activeMenu[0], 'paddingTop')) || 0, n = e.offset().top - this.activeMenu.offset().top - i - s, o = this.activeMenu.scrollTop(), a = this.activeMenu.height(), r = e.outerHeight(), 0 > n ? this.activeMenu.scrollTop(o + n) : n + r > a && this.activeMenu.scrollTop(o + n - a + r))
        },
        blur: function (t, e) {
            e || clearTimeout(this.timer),
            this.active && (this._removeClass(this.active.children('.ui-menu-item-wrapper'), null, 'ui-state-active'), this._trigger('blur', t, {
                item: this.active
            }), this.active = null)
        },
        _startOpening: function (t) {
            clearTimeout(this.timer),
            'true' === t.attr('aria-hidden') && (this.timer = this._delay(function () {
                this._close(),
                    this._open(t)
            }, this.delay))
        },
        _open: function (e) {
            var i = t.extend({
                of: this.active
            }, this.options.position)
            clearTimeout(this.timer),
                this.element.find('.ui-menu').not(e.parents('.ui-menu')).hide().attr('aria-hidden', 'true'),
                e.show().removeAttr('aria-hidden').attr('aria-expanded', 'true').position(i)
        },
        collapseAll: function (e, i) {
            clearTimeout(this.timer),
                this.timer = this._delay(function () {
                    var s = i ? this.element : t(e && e.target).closest(this.element.find('.ui-menu'))
                    s.length || (s = this.element),
                        this._close(s),
                        this.blur(e),
                        this._removeClass(s.find('.ui-state-active'), null, 'ui-state-active'),
                        this.activeMenu = s
                }, this.delay)
        },
        _close: function (t) {
            t || (t = this.active ? this.active.parent() : this.element),
                t.find('.ui-menu').hide().attr('aria-hidden', 'true').attr('aria-expanded', 'false')
        },
        _closeOnDocumentClick: function (e) {
            return !t(e.target).closest('.ui-menu').length
        },
        _isDivider: function (t) {
            return !/[^\-\u2014\u2013\s]/.test(t.text())
        },
        collapse: function (t) {
            var e = this.active && this.active.parent().closest('.ui-menu-item', this.element)
            e && e.length && (this._close(), this.focus(t, e))
        },
        expand: function (t) {
            var e = this.active && this.active.children('.ui-menu ').find(this.options.items).first()
            e && e.length && (this._open(e.parent()), this._delay(function () {
                this.focus(t, e)
            }))
        },
        next: function (t) {
            this._move('next', 'first', t)
        },
        previous: function (t) {
            this._move('prev', 'last', t)
        },
        isFirstItem: function () {
            return this.active && !this.active.prevAll('.ui-menu-item').length
        },
        isLastItem: function () {
            return this.active && !this.active.nextAll('.ui-menu-item').length
        },
        _move: function (t, e, i) {
            var s
            this.active && (s = 'first' === t || 'last' === t ? this.active['first' === t ? 'prevAll' : 'nextAll']('.ui-menu-item').eq(-1) : this.active[t + 'All']('.ui-menu-item').eq(0)),
            s && s.length && this.active || (s = this.activeMenu.find(this.options.items) [e]()),
                this.focus(i, s)
        },
        nextPage: function (e) {
            var i,
                s,
                n
            return this.active ? (this.isLastItem() || (this._hasScroll() ? (s = this.active.offset().top, n = this.element.height(), this.active.nextAll('.ui-menu-item').each(function () {
                return i = t(this),
                0 > i.offset().top - s - n
            }), this.focus(e, i)) : this.focus(e, this.activeMenu.find(this.options.items) [this.active ? 'last' : 'first']())), void 0) : (this.next(e), void 0)
        },
        previousPage: function (e) {
            var i,
                s,
                n
            return this.active ? (this.isFirstItem() || (this._hasScroll() ? (s = this.active.offset().top, n = this.element.height(), this.active.prevAll('.ui-menu-item').each(function () {
                return i = t(this),
                i.offset().top - s + n > 0
            }), this.focus(e, i)) : this.focus(e, this.activeMenu.find(this.options.items).first())), void 0) : (this.next(e), void 0)
        },
        _hasScroll: function () {
            return this.element.outerHeight() < this.element.prop('scrollHeight')
        },
        select: function (e) {
            this.active = this.active || t(e.target).closest('.ui-menu-item')
            var i = {
                item: this.active
            }
            this.active.has('.ui-menu').length || this.collapseAll(e, !0),
                this._trigger('select', e, i)
        },
        _filterMenuItems: function (e) {
            var i = e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&'),
                s = RegExp('^' + i, 'i')
            return this.activeMenu.find(this.options.items).filter('.ui-menu-item').filter(function () {
                return s.test(t.trim(t(this).children('.ui-menu-item-wrapper').text()))
            })
        }
    }), t.widget('ui.autocomplete', {
        version: '1.12.1',
        defaultElement: '<input>',
        options: {
            appendTo: null,
            autoFocus: !1,
            delay: 300,
            minLength: 1,
            position: {
                my: 'left top',
                at: 'left bottom',
                collision: 'none'
            },
            source: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            response: null,
            search: null,
            select: null
        },
        requestIndex: 0,
        pending: 0,
        _create: function () {
            var e,
                i,
                s,
                n = this.element[0].nodeName.toLowerCase(),
                o = 'textarea' === n,
                a = 'input' === n
            this.isMultiLine = o || !a && this._isContentEditable(this.element),
                this.valueMethod = this.element[o || a ? 'val' : 'text'],
                this.isNewMenu = !0,
                this._addClass('ui-autocomplete-input'),
                this.element.attr('autocomplete', 'off'),
                this._on(this.element, {
                    keydown: function (n) {
                        if (this.element.prop('readOnly')) {
                            return e = !0,
                                s = !0,
                                i = !0,
                                void 0
                        }
                        e = !1,
                            s = !1,
                            i = !1
                        var o = t.ui.keyCode
                        switch (n.keyCode) {
                            case o.PAGE_UP:
                                e = !0,
                                    this._move('previousPage', n)
                                break
                            case o.PAGE_DOWN:
                                e = !0,
                                    this._move('nextPage', n)
                                break
                            case o.UP:
                                e = !0,
                                    this._keyEvent('previous', n)
                                break
                            case o.DOWN:
                                e = !0,
                                    this._keyEvent('next', n)
                                break
                            case o.ENTER:
                                this.menu.active && (e = !0, n.preventDefault(), this.menu.select(n))
                                break
                            case o.TAB:
                                this.menu.active && this.menu.select(n)
                                break
                            case o.ESCAPE:
                                this.menu.element.is(':visible') && (this.isMultiLine || this._value(this.term), this.close(n), n.preventDefault())
                                break
                            default:
                                i = !0,
                                    this._searchTimeout(n)
                        }
                    },
                    keypress: function (s) {
                        if (e) {
                            return e = !1,
                            (!this.isMultiLine || this.menu.element.is(':visible')) && s.preventDefault(),
                                void 0
                        }
                        if (!i) {
                            var n = t.ui.keyCode
                            switch (s.keyCode) {
                                case n.PAGE_UP:
                                    this._move('previousPage', s)
                                    break
                                case n.PAGE_DOWN:
                                    this._move('nextPage', s)
                                    break
                                case n.UP:
                                    this._keyEvent('previous', s)
                                    break
                                case n.DOWN:
                                    this._keyEvent('next', s)
                            }
                        }
                    },
                    input: function (t) {
                        return s ? (s = !1, t.preventDefault(), void 0) : (this._searchTimeout(t), void 0)
                    },
                    focus: function () {
                        this.selectedItem = null,
                            this.previous = this._value()
                    },
                    blur: function (t) {
                        return this.cancelBlur ? (delete this.cancelBlur, void 0) : (clearTimeout(this.searching), this.close(t), this._change(t), void 0)
                    }
                }),
                this._initSource(),
                this.menu = t('<ul>').appendTo(this._appendTo()).menu({
                    role: null
                }).hide().menu('instance'),
                this._addClass(this.menu.element, 'ui-autocomplete', 'ui-front'),
                this._on(this.menu.element, {
                    mousedown: function (e) {
                        e.preventDefault(),
                            this.cancelBlur = !0,
                            this._delay(function () {
                                delete this.cancelBlur,
                                this.element[0] !== t.ui.safeActiveElement(this.document[0]) && this.element.trigger('focus')
                            })
                    },
                    menufocus: function (e, i) {
                        var s,
                            n
                        return this.isNewMenu && (this.isNewMenu = !1, e.originalEvent && /^mouse/.test(e.originalEvent.type)) ? (this.menu.blur(), this.document.one('mousemove', function () {
                            t(e.target).trigger(e.originalEvent)
                        }), void 0) : (n = i.item.data('ui-autocomplete-item'), !1 !== this._trigger('focus', e, {
                            item: n
                        }) && e.originalEvent && /^key/.test(e.originalEvent.type) && this._value(n.value), s = i.item.attr('aria-label') || n.value, s && t.trim(s).length && (this.liveRegion.children().hide(), t('<div>').text(s).appendTo(this.liveRegion)), void 0)
                    },
                    menuselect: function (e, i) {
                        var s = i.item.data('ui-autocomplete-item'),
                            n = this.previous
                        this.element[0] !== t.ui.safeActiveElement(this.document[0]) && (this.element.trigger('focus'), this.previous = n, this._delay(function () {
                            this.previous = n,
                                this.selectedItem = s
                        })),
                        !1 !== this._trigger('select', e, {
                            item: s
                        }) && this._value(s.value),
                            this.term = this._value(),
                            this.close(e),
                            this.selectedItem = s
                    }
                }),
                this.liveRegion = t('<div>', {
                    role: 'status',
                    'aria-live': 'assertive',
                    'aria-relevant': 'additions'
                }).appendTo(this.document[0].body),
                this._addClass(this.liveRegion, null, 'ui-helper-hidden-accessible'),
                this._on(this.window, {
                    beforeunload: function () {
                        this.element.removeAttr('autocomplete')
                    }
                })
        }, _destroy: function () {
            clearTimeout(this.searching),
                this.element.removeAttr('autocomplete'),
                this.menu.element.remove(),
                this.liveRegion.remove()
        }, _setOption: function (t, e) {
            this._super(t, e),
            'source' === t && this._initSource(),
            'appendTo' === t && this.menu.element.appendTo(this._appendTo()),
            'disabled' === t && e && this.xhr && this.xhr.abort()
        }, _isEventTargetInWidget: function (e) {
            var i = this.menu.element[0]
            return e.target === this.element[0] || e.target === i || t.contains(i, e.target)
        }, _closeOnClickOutside: function (t) {
            this._isEventTargetInWidget(t) || this.close()
        }, _appendTo: function () {
            var e = this.options.appendTo
            return e && (e = e.jquery || e.nodeType ? t(e) : this.document.find(e).eq(0)),
            e && e[0] || (e = this.element.closest('.ui-front, dialog')),
            e.length || (e = this.document[0].body),
                e
        }, _initSource: function () {
            var e,
                i,
                s = this
            t.isArray(this.options.source) ? (e = this.options.source, this.source = function (i, s) {
                s(t.ui.autocomplete.filter(e, i.term))
            }) : 'string' == typeof this.options.source ? (i = this.options.source, this.source = function (e, n) {
                s.xhr && s.xhr.abort(),
                    s.xhr = t.ajax({
                        url: i,
                        data: e,
                        dataType: 'json',
                        success: function (t) {
                            n(t)
                        },
                        error: function () {
                            n([])
                        }
                    })
            }) : this.source = this.options.source
        }, _searchTimeout: function (t) {
            clearTimeout(this.searching),
                this.searching = this._delay(function () {
                    var e = this.term === this._value(),
                        i = this.menu.element.is(':visible'),
                        s = t.altKey || t.ctrlKey || t.metaKey || t.shiftKey;
                    (!e || e && !i && !s) && (this.selectedItem = null, this.search(null, t))
                }, this.options.delay)
        }, search: function (t, e) {
            return t = null != t ? t : this._value(),
                this.term = this._value(),
                t.length < this.options.minLength ? this.close(e) : this._trigger('search', e) !== !1 ? this._search(t) : void 0
        }, _search: function (t) {
            this.pending++,
                this._addClass('ui-autocomplete-loading'),
                this.cancelSearch = !1,
                this.source({
                    term: t
                }, this._response())
        }, _response: function () {
            var e = ++this.requestIndex
            return t.proxy(function (t) {
                e === this.requestIndex && this.__response(t),
                    this.pending--,
                this.pending || this._removeClass('ui-autocomplete-loading')
            }, this)
        }, __response: function (t) {
            t && (t = this._normalize(t)),
                this._trigger('response', null, {
                    content: t
                }),
                !this.options.disabled && t && t.length && !this.cancelSearch ? (this._suggest(t), this._trigger('open')) : this._close()
        }, close: function (t) {
            this.cancelSearch = !0,
                this._close(t)
        }, _close: function (t) {
            this._off(this.document, 'mousedown'),
            this.menu.element.is(':visible') && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger('close', t))
        }, _change: function (t) {
            this.previous !== this._value() && this._trigger('change', t, {
                item: this.selectedItem
            })
        }, _normalize: function (e) {
            return e.length && e[0].label && e[0].value ? e : t.map(e, function (e) {
                return 'string' == typeof e ? {
                        label: e,
                        value: e
                    }
                    : t.extend({}, e, {
                        label: e.label || e.value,
                        value: e.value || e.label
                    })
            })
        }, _suggest: function (e) {
            var i = this.menu.element.empty()
            this._renderMenu(i, e),
                this.isNewMenu = !0,
                this.menu.refresh(),
                i.show(),
                this._resizeMenu(),
                i.position(t.extend({
                    of: this.element
                }, this.options.position)),
            this.options.autoFocus && this.menu.next(),
                this._on(this.document, {
                    mousedown: '_closeOnClickOutside'
                })
        }, _resizeMenu: function () {
            var t = this.menu.element
            t.outerWidth(Math.max(t.width('').outerWidth() + 1, this.element.outerWidth()))
        }, _renderMenu: function (e, i) {
            var s = this
            t.each(i, function (t, i) {
                s._renderItemData(e, i)
            })
        }, _renderItemData: function (t, e) {
            return this._renderItem(t, e).data('ui-autocomplete-item', e)
        }, _renderItem: function (e, i) {
            return t('<li>').append(t('<div>').text(i.label)).appendTo(e)
        }, _move: function (t, e) {
            return this.menu.element.is(':visible') ? this.menu.isFirstItem() && /^previous/.test(t) || this.menu.isLastItem() && /^next/.test(t) ? (this.isMultiLine || this._value(this.term), this.menu.blur(), void 0) : (this.menu[t](e), void 0) : (this.search(null, e), void 0)
        }, widget: function () {
            return this.menu.element
        }, _value: function () {
            return this.valueMethod.apply(this.element, arguments)
        }, _keyEvent: function (t, e) {
            (!this.isMultiLine || this.menu.element.is(':visible')) && (this._move(t, e), e.preventDefault())
        }, _isContentEditable: function (t) {
            if (!t.length) {
                return !1
            }
            var e = t.prop('contentEditable')
            return 'inherit' === e ? this._isContentEditable(t.parent()) : 'true' === e
        }
    }),
        t.extend(t.ui.autocomplete, {
            escapeRegex: function (t) {
                return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
            },
            filter: function (e, i) {
                var s = RegExp(t.ui.autocomplete.escapeRegex(i), 'i')
                return t.grep(e, function (t) {
                    return s.test(t.label || t.value || t)
                })
            }
        }),
        t.widget('ui.autocomplete', t.ui.autocomplete, {
            options: {
                messages: {
                    noResults: 'No search results.',
                    results: function (t) {
                        return t + (t > 1 ? ' results are' : ' result is') + ' available, use up and down arrow keys to navigate.'
                    }
                }
            },
            __response: function (e) {
                var i
                this._superApply(arguments),
                this.options.disabled || this.cancelSearch || (i = e && e.length ? this.options.messages.results(e.length) : this.options.messages.noResults, this.liveRegion.children().hide(), t('<div>').text(i).appendTo(this.liveRegion))
            }
        }),
        t.ui.autocomplete
    var d = /ui-corner-([a-z]){2,6}/g
    t.widget('ui.controlgroup', {
        version: '1.12.1',
        defaultElement: '<div>',
        options: {
            direction: 'horizontal',
            disabled: null,
            onlyVisible: !0,
            items: {
                button: 'input[type=button], input[type=submit], input[type=reset], button, a',
                controlgroupLabel: '.ui-controlgroup-label',
                checkboxradio: 'input[type=\'checkbox\'], input[type=\'radio\']',
                selectmenu: 'select',
                spinner: '.ui-spinner-input'
            }
        },
        _create: function () {
            this._enhance()
        },
        _enhance: function () {
            this.element.attr('role', 'toolbar'),
                this.refresh()
        },
        _destroy: function () {
            this._callChildMethod('destroy'),
                this.childWidgets.removeData('ui-controlgroup-data'),
                this.element.removeAttr('role'),
            this.options.items.controlgroupLabel && this.element.find(this.options.items.controlgroupLabel).find('.ui-controlgroup-label-contents').contents().unwrap()
        },
        _initWidgets: function () {
            var e = this,
                i = []
            t.each(this.options.items, function (s, n) {
                var o,
                    a = {}
                return n ? 'controlgroupLabel' === s ? (o = e.element.find(n), o.each(function () {
                    var e = t(this)
                    e.children('.ui-controlgroup-label-contents').length || e.contents().wrapAll('<span class=\'ui-controlgroup-label-contents\'></span>')
                }), e._addClass(o, null, 'ui-widget ui-widget-content ui-state-default'), i = i.concat(o.get()), void 0) : (t.fn[s] && (a = e['_' + s + 'Options'] ? e['_' + s + 'Options']('middle') : {
                    classes: {}
                }, e.element.find(n).each(function () {
                    var n = t(this),
                        o = n[s]('instance'),
                        r = t.widget.extend({}, a)
                    if ('button' !== s || !n.parent('.ui-spinner').length) {
                        o || (o = n[s]() [s]('instance')),
                        o && (r.classes = e._resolveClassesValues(r.classes, o)),
                            n[s](r)
                        var h = n[s]('widget')
                        t.data(h[0], 'ui-controlgroup-data', o ? o : n[s]('instance')),
                            i.push(h[0])
                    }
                })), void 0) : void 0
            }),
                this.childWidgets = t(t.unique(i)),
                this._addClass(this.childWidgets, 'ui-controlgroup-item')
        },
        _callChildMethod: function (e) {
            this.childWidgets.each(function () {
                var i = t(this),
                    s = i.data('ui-controlgroup-data')
                s && s[e] && s[e]()
            })
        },
        _updateCornerClass: function (t, e) {
            var i = 'ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all',
                s = this._buildSimpleOptions(e, 'label').classes.label
            this._removeClass(t, null, i),
                this._addClass(t, null, s)
        },
        _buildSimpleOptions: function (t, e) {
            var i = 'vertical' === this.options.direction,
                s = {
                    classes: {}
                }
            return s.classes[e] = {
                middle: '',
                first: 'ui-corner-' + (i ? 'top' : 'left'),
                last: 'ui-corner-' + (i ? 'bottom' : 'right'),
                only: 'ui-corner-all'
            }
                [
                t
                ],
                s
        },
        _spinnerOptions: function (t) {
            var e = this._buildSimpleOptions(t, 'ui-spinner')
            return e.classes['ui-spinner-up'] = '',
                e.classes['ui-spinner-down'] = '',
                e
        },
        _buttonOptions: function (t) {
            return this._buildSimpleOptions(t, 'ui-button')
        },
        _checkboxradioOptions: function (t) {
            return this._buildSimpleOptions(t, 'ui-checkboxradio-label')
        },
        _selectmenuOptions: function (t) {
            var e = 'vertical' === this.options.direction
            return {
                width: e ? 'auto' : !1,
                classes: {
                    middle: {
                        'ui-selectmenu-button-open': '',
                        'ui-selectmenu-button-closed': ''
                    },
                    first: {
                        'ui-selectmenu-button-open': 'ui-corner-' + (e ? 'top' : 'tl'),
                        'ui-selectmenu-button-closed': 'ui-corner-' + (e ? 'top' : 'left')
                    },
                    last: {
                        'ui-selectmenu-button-open': e ? '' : 'ui-corner-tr',
                        'ui-selectmenu-button-closed': 'ui-corner-' + (e ? 'bottom' : 'right')
                    },
                    only: {
                        'ui-selectmenu-button-open': 'ui-corner-top',
                        'ui-selectmenu-button-closed': 'ui-corner-all'
                    }
                }
                    [
                    t
                    ]
            }
        },
        _resolveClassesValues: function (e, i) {
            var s = {}
            return t.each(e, function (n) {
                var o = i.options.classes[n] || ''
                o = t.trim(o.replace(d, '')),
                    s[n] = (o + ' ' + e[n]).replace(/\s+/g, ' ')
            }),
                s
        },
        _setOption: function (t, e) {
            return 'direction' === t && this._removeClass('ui-controlgroup-' + this.options.direction),
                this._super(t, e),
                'disabled' === t ? (this._callChildMethod(e ? 'disable' : 'enable'), void 0) : (this.refresh(), void 0)
        },
        refresh: function () {
            var e,
                i = this
            this._addClass('ui-controlgroup ui-controlgroup-' + this.options.direction),
            'horizontal' === this.options.direction && this._addClass(null, 'ui-helper-clearfix'),
                this._initWidgets(),
                e = this.childWidgets,
            this.options.onlyVisible && (e = e.filter(':visible')),
            e.length && (t.each(['first',
                'last'], function (t, s) {
                var n = e[s]().data('ui-controlgroup-data')
                if (n && i['_' + n.widgetName + 'Options']) {
                    var o = i['_' + n.widgetName + 'Options'](1 === e.length ? 'only' : s)
                    o.classes = i._resolveClassesValues(o.classes, n),
                        n.element[n.widgetName](o)
                } else {
                    i._updateCornerClass(e[s](), s)
                }
            }), this._callChildMethod('refresh'))
        }
    }),
        t.widget('ui.checkboxradio', [
            t.ui.formResetMixin,
            {
                version: '1.12.1',
                options: {
                    disabled: null,
                    label: null,
                    icon: !0,
                    classes: {
                        'ui-checkboxradio-label': 'ui-corner-all',
                        'ui-checkboxradio-icon': 'ui-corner-all'
                    }
                },
                _getCreateOptions: function () {
                    var e,
                        i,
                        s = this,
                        n = this._super() || {}
                    return this._readType(),
                        i = this.element.labels(),
                        this.label = t(i[i.length - 1]),
                    this.label.length || t.error('No label found for checkboxradio widget'),
                        this.originalLabel = '',
                        this.label.contents().not(this.element[0]).each(function () {
                            s.originalLabel += 3 === this.nodeType ? t(this).text() : this.outerHTML
                        }),
                    this.originalLabel && (n.label = this.originalLabel),
                        e = this.element[0].disabled,
                    null != e && (n.disabled = e),
                        n
                },
                _create: function () {
                    var t = this.element[0].checked
                    this._bindFormResetHandler(),
                    null == this.options.disabled && (this.options.disabled = this.element[0].disabled),
                        this._setOption('disabled', this.options.disabled),
                        this._addClass('ui-checkboxradio', 'ui-helper-hidden-accessible'),
                        this._addClass(this.label, 'ui-checkboxradio-label', 'ui-button ui-widget'),
                    'radio' === this.type && this._addClass(this.label, 'ui-checkboxradio-radio-label'),
                        this.options.label && this.options.label !== this.originalLabel ? this._updateLabel() : this.originalLabel && (this.options.label = this.originalLabel),
                        this._enhance(),
                    t && (this._addClass(this.label, 'ui-checkboxradio-checked', 'ui-state-active'), this.icon && this._addClass(this.icon, null, 'ui-state-hover')),
                        this._on({
                            change: '_toggleClasses',
                            focus: function () {
                                this._addClass(this.label, null, 'ui-state-focus ui-visual-focus')
                            },
                            blur: function () {
                                this._removeClass(this.label, null, 'ui-state-focus ui-visual-focus')
                            }
                        })
                },
                _readType: function () {
                    var e = this.element[0].nodeName.toLowerCase()
                    this.type = this.element[0].type,
                    'input' === e && /radio|checkbox/.test(this.type) || t.error('Can\'t create checkboxradio on element.nodeName=' + e + ' and element.type=' + this.type)
                },
                _enhance: function () {
                    this._updateIcon(this.element[0].checked)
                },
                widget: function () {
                    return this.label
                },
                _getRadioGroup: function () {
                    var e,
                        i = this.element[0].name,
                        s = 'input[name=\'' + t.ui.escapeSelector(i) + '\']'
                    return i ? (e = this.form.length ? t(this.form[0].elements).filter(s) : t(s).filter(function () {
                        return 0 === t(this).form().length
                    }), e.not(this.element)) : t([])
                },
                _toggleClasses: function () {
                    var e = this.element[0].checked
                    this._toggleClass(this.label, 'ui-checkboxradio-checked', 'ui-state-active', e),
                    this.options.icon && 'checkbox' === this.type && this._toggleClass(this.icon, null, 'ui-icon-check ui-state-checked', e)._toggleClass(this.icon, null, 'ui-icon-blank', !e),
                    'radio' === this.type && this._getRadioGroup().each(function () {
                        var e = t(this).checkboxradio('instance')
                        e && e._removeClass(e.label, 'ui-checkboxradio-checked', 'ui-state-active')
                    })
                },
                _destroy: function () {
                    this._unbindFormResetHandler(),
                    this.icon && (this.icon.remove(), this.iconSpace.remove())
                },
                _setOption: function (t, e) {
                    return 'label' !== t || e ? (this._super(t, e), 'disabled' === t ? (this._toggleClass(this.label, null, 'ui-state-disabled', e), this.element[0].disabled = e, void 0) : (this.refresh(), void 0)) : void 0
                },
                _updateIcon: function (e) {
                    var i = 'ui-icon ui-icon-background '
                    this.options.icon ? (this.icon || (this.icon = t('<span>'), this.iconSpace = t('<span> </span>'), this._addClass(this.iconSpace, 'ui-checkboxradio-icon-space')), 'checkbox' === this.type ? (i += e ? 'ui-icon-check ui-state-checked' : 'ui-icon-blank', this._removeClass(this.icon, null, e ? 'ui-icon-blank' : 'ui-icon-check')) : i += 'ui-icon-blank', this._addClass(this.icon, 'ui-checkboxradio-icon', i), e || this._removeClass(this.icon, null, 'ui-icon-check ui-state-checked'), this.icon.prependTo(this.label).after(this.iconSpace)) : void 0 !== this.icon && (this.icon.remove(), this.iconSpace.remove(), delete this.icon)
                },
                _updateLabel: function () {
                    var t = this.label.contents().not(this.element[0])
                    this.icon && (t = t.not(this.icon[0])),
                    this.iconSpace && (t = t.not(this.iconSpace[0])),
                        t.remove(),
                        this.label.append(this.options.label)
                },
                refresh: function () {
                    var t = this.element[0].checked,
                        e = this.element[0].disabled
                    this._updateIcon(t),
                        this._toggleClass(this.label, 'ui-checkboxradio-checked', 'ui-state-active', t),
                    null !== this.options.label && this._updateLabel(),
                    e !== this.options.disabled && this._setOptions({
                        disabled: e
                    })
                }
            }
        ]),
        t.ui.checkboxradio,
        t.widget('ui.button', {
            version: '1.12.1',
            defaultElement: '<button>',
            options: {
                classes: {
                    'ui-button': 'ui-corner-all'
                },
                disabled: null,
                icon: null,
                iconPosition: 'beginning',
                label: null,
                showLabel: !0
            },
            _getCreateOptions: function () {
                var t,
                    e = this._super() || {}
                return this.isInput = this.element.is('input'),
                    t = this.element[0].disabled,
                null != t && (e.disabled = t),
                    this.originalLabel = this.isInput ? this.element.val() : this.element.html(),
                this.originalLabel && (e.label = this.originalLabel),
                    e
            },
            _create: function () {
                !this.option.showLabel & !this.options.icon && (this.options.showLabel = !0),
                null == this.options.disabled && (this.options.disabled = this.element[0].disabled || !1),
                    this.hasTitle = !!this.element.attr('title'),
                this.options.label && this.options.label !== this.originalLabel && (this.isInput ? this.element.val(this.options.label) : this.element.html(this.options.label)),
                    this._addClass('ui-button', 'ui-widget'),
                    this._setOption('disabled', this.options.disabled),
                    this._enhance(),
                this.element.is('a') && this._on({
                    keyup: function (e) {
                        e.keyCode === t.ui.keyCode.SPACE && (e.preventDefault(), this.element[0].click ? this.element[0].click() : this.element.trigger('click'))
                    }
                })
            },
            _enhance: function () {
                this.element.is('button') || this.element.attr('role', 'button'),
                this.options.icon && (this._updateIcon('icon', this.options.icon), this._updateTooltip())
            },
            _updateTooltip: function () {
                this.title = this.element.attr('title'),
                this.options.showLabel || this.title || this.element.attr('title', this.options.label)
            },
            _updateIcon: function (e, i) {
                var s = 'iconPosition' !== e,
                    n = s ? this.options.iconPosition : i,
                    o = 'top' === n || 'bottom' === n
                this.icon ? s && this._removeClass(this.icon, null, this.options.icon) : (this.icon = t('<span>'), this._addClass(this.icon, 'ui-button-icon', 'ui-icon'), this.options.showLabel || this._addClass('ui-button-icon-only')),
                s && this._addClass(this.icon, null, i),
                    this._attachIcon(n),
                    o ? (this._addClass(this.icon, null, 'ui-widget-icon-block'), this.iconSpace && this.iconSpace.remove()) : (this.iconSpace || (this.iconSpace = t('<span> </span>'), this._addClass(this.iconSpace, 'ui-button-icon-space')), this._removeClass(this.icon, null, 'ui-wiget-icon-block'), this._attachIconSpace(n))
            },
            _destroy: function () {
                this.element.removeAttr('role'),
                this.icon && this.icon.remove(),
                this.iconSpace && this.iconSpace.remove(),
                this.hasTitle || this.element.removeAttr('title')
            },
            _attachIconSpace: function (t) {
                this.icon[/^(?:end|bottom)/.test(t) ? 'before' : 'after'](this.iconSpace)
            },
            _attachIcon: function (t) {
                this.element[/^(?:end|bottom)/.test(t) ? 'append' : 'prepend'](this.icon)
            },
            _setOptions: function (t) {
                var e = void 0 === t.showLabel ? this.options.showLabel : t.showLabel,
                    i = void 0 === t.icon ? this.options.icon : t.icon
                e || i || (t.showLabel = !0),
                    this._super(t)
            },
            _setOption: function (t, e) {
                'icon' === t && (e ? this._updateIcon(t, e) : this.icon && (this.icon.remove(), this.iconSpace && this.iconSpace.remove())),
                'iconPosition' === t && this._updateIcon(t, e),
                'showLabel' === t && (this._toggleClass('ui-button-icon-only', null, !e), this._updateTooltip()),
                'label' === t && (this.isInput ? this.element.val(e) : (this.element.html(e), this.icon && (this._attachIcon(this.options.iconPosition), this._attachIconSpace(this.options.iconPosition)))),
                    this._super(t, e),
                'disabled' === t && (this._toggleClass(null, 'ui-state-disabled', e), this.element[0].disabled = e, e && this.element.blur())
            },
            refresh: function () {
                var t = this.element.is('input, button') ? this.element[0].disabled : this.element.hasClass('ui-button-disabled')
                t !== this.options.disabled && this._setOptions({
                    disabled: t
                }),
                    this._updateTooltip()
            }
        }),
    t.uiBackCompat !== !1 && (t.widget('ui.button', t.ui.button, {
        options: {
            text: !0,
            icons: {
                primary: null,
                secondary: null
            }
        },
        _create: function () {
            this.options.showLabel && !this.options.text && (this.options.showLabel = this.options.text),
            !this.options.showLabel && this.options.text && (this.options.text = this.options.showLabel),
                this.options.icon || !this.options.icons.primary && !this.options.icons.secondary ? this.options.icon && (this.options.icons.primary = this.options.icon) : this.options.icons.primary ? this.options.icon = this.options.icons.primary : (this.options.icon = this.options.icons.secondary, this.options.iconPosition = 'end'),
                this._super()
        },
        _setOption: function (t, e) {
            return 'text' === t ? (this._super('showLabel', e), void 0) : ('showLabel' === t && (this.options.text = e), 'icon' === t && (this.options.icons.primary = e), 'icons' === t && (e.primary ? (this._super('icon', e.primary), this._super('iconPosition', 'beginning')) : e.secondary && (this._super('icon', e.secondary), this._super('iconPosition', 'end'))), this._superApply(arguments), void 0)
        }
    }), t.fn.button = function (e) {
        return function () {
            return !this.length || this.length && 'INPUT' !== this[0].tagName || this.length && 'INPUT' === this[0].tagName && 'checkbox' !== this.attr('type') && 'radio' !== this.attr('type') ? e.apply(this, arguments) : (t.ui.checkboxradio || t.error('Checkboxradio widget missing'), 0 === arguments.length ? this.checkboxradio({
                icon: !1
            }) : this.checkboxradio.apply(this, arguments))
        }
    }(t.fn.button), t.fn.buttonset = function () {
        return t.ui.controlgroup || t.error('Controlgroup widget missing'),
            'option' === arguments[0] && 'items' === arguments[1] && arguments[2] ? this.controlgroup.apply(this, [
                arguments[0],
                'items.button',
                arguments[2]
            ]) : 'option' === arguments[0] && 'items' === arguments[1] ? this.controlgroup.apply(this, [
                arguments[0],
                'items.button'
            ]) : ('object' == typeof arguments[0] && arguments[0].items && (arguments[0].items = {
                button: arguments[0].items
            }), this.controlgroup.apply(this, arguments))
    }),
        t.ui.button,
        t.extend(t.ui, {
            datepicker: {
                version: '1.12.1'
            }
        })
    var p
    t.extend(s.prototype, {
        markerClassName: 'hasDatepicker',
        maxRows: 4,
        _widgetDatepicker: function () {
            return this.dpDiv
        },
        setDefaults: function (t) {
            return a(this._defaults, t || {}),
                this
        },
        _attachDatepicker: function (e, i) {
            var s,
                n,
                o
            s = e.nodeName.toLowerCase(),
                n = 'div' === s || 'span' === s,
            e.id || (this.uuid += 1, e.id = 'dp' + this.uuid),
                o = this._newInst(t(e), n),
                o.settings = t.extend({}, i || {}),
                'input' === s ? this._connectDatepicker(e, o) : n && this._inlineDatepicker(e, o)
        },
        _newInst: function (e, i) {
            var s = e[0].id.replace(/([^A-Za-z0-9_\-])/g, '\\\\$1')
            return {
                id: s,
                input: e,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: i,
                dpDiv: i ? n(t('<div class=\'' + this._inlineClass + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all\'></div>')) : this.dpDiv
            }
        },
        _connectDatepicker: function (e, i) {
            var s = t(e)
            i.append = t([]),
                i.trigger = t([]),
            s.hasClass(this.markerClassName) || (this._attachments(s, i), s.addClass(this.markerClassName).on('keydown', this._doKeyDown).on('keypress', this._doKeyPress).on('keyup', this._doKeyUp), this._autoSize(i), t.data(e, 'datepicker', i), i.settings.disabled && this._disableDatepicker(e))
        },
        _attachments: function (e, i) {
            var s,
                n,
                o,
                a = this._get(i, 'appendText'),
                r = this._get(i, 'isRTL')
            i.append && i.append.remove(),
            a && (i.append = t('<span class=\'' + this._appendClass + '\'>' + a + '</span>'), e[r ? 'before' : 'after'](i.append)),
                e.off('focus', this._showDatepicker),
            i.trigger && i.trigger.remove(),
                s = this._get(i, 'showOn'),
            ('focus' === s || 'both' === s) && e.on('focus', this._showDatepicker),
            ('button' === s || 'both' === s) && (n = this._get(i, 'buttonText'), o = this._get(i, 'buttonImage'), i.trigger = t(this._get(i, 'buttonImageOnly') ? t('<img/>').addClass(this._triggerClass).attr({
                src: o,
                alt: n,
                title: n
            }) : t('<button type=\'button\'></button>').addClass(this._triggerClass).html(o ? t('<img/>').attr({
                src: o,
                alt: n,
                title: n
            }) : n)), e[r ? 'before' : 'after'](i.trigger), i.trigger.on('click', function () {
                return t.datepicker._datepickerShowing && t.datepicker._lastInput === e[0] ? t.datepicker._hideDatepicker() : t.datepicker._datepickerShowing && t.datepicker._lastInput !== e[0] ? (t.datepicker._hideDatepicker(), t.datepicker._showDatepicker(e[0])) : t.datepicker._showDatepicker(e[0]),
                    !1
            }))
        },
        _autoSize: function (t) {
            if (this._get(t, 'autoSize') && !t.inline) {
                var e,
                    i,
                    s,
                    n,
                    o = new Date(2009, 11, 20),
                    a = this._get(t, 'dateFormat')
                a.match(/[DM]/) && (e = function (t) {
                    for (i = 0, s = 0, n = 0; t.length > n; n++) {
                        t[n].length > i && (i = t[n].length, s = n)
                    }
                    return s
                }, o.setMonth(e(this._get(t, a.match(/MM/) ? 'monthNames' : 'monthNamesShort'))), o.setDate(e(this._get(t, a.match(/DD/) ? 'dayNames' : 'dayNamesShort')) + 20 - o.getDay())),
                    t.input.attr('size', this._formatDate(t, o).length)
            }
        },
        _inlineDatepicker: function (e, i) {
            var s = t(e)
            s.hasClass(this.markerClassName) || (s.addClass(this.markerClassName).append(i.dpDiv), t.data(e, 'datepicker', i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(e), i.dpDiv.css('display', 'block'))
        },
        _dialogDatepicker: function (e, i, s, n, o) {
            var r,
                h,
                l,
                c,
                u,
                d = this._dialogInst
            return d || (this.uuid += 1, r = 'dp' + this.uuid, this._dialogInput = t('<input type=\'text\' id=\'' + r + '\' style=\'position: absolute; top: -100px; width: 0px;\'/>'), this._dialogInput.on('keydown', this._doKeyDown), t('body').append(this._dialogInput), d = this._dialogInst = this._newInst(this._dialogInput, !1), d.settings = {}, t.data(this._dialogInput[0], 'datepicker', d)),
                a(d.settings, n || {}),
                i = i && i.constructor === Date ? this._formatDate(d, i) : i,
                this._dialogInput.val(i),
                this._pos = o ? o.length ? o : [
                    o.pageX,
                    o.pageY
                ] : null,
            this._pos || (h = document.documentElement.clientWidth, l = document.documentElement.clientHeight, c = document.documentElement.scrollLeft || document.body.scrollLeft, u = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [
                h / 2 - 100 + c,
                l / 2 - 150 + u
            ]),
                this._dialogInput.css('left', this._pos[0] + 20 + 'px').css('top', this._pos[1] + 'px'),
                d.settings.onSelect = s,
                this._inDialog = !0,
                this.dpDiv.addClass(this._dialogClass),
                this._showDatepicker(this._dialogInput[0]),
            t.blockUI && t.blockUI(this.dpDiv),
                t.data(this._dialogInput[0], 'datepicker', d),
                this
        },
        _destroyDatepicker: function (e) {
            var i,
                s = t(e),
                n = t.data(e, 'datepicker')
            s.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), t.removeData(e, 'datepicker'), 'input' === i ? (n.append.remove(), n.trigger.remove(), s.removeClass(this.markerClassName).off('focus', this._showDatepicker).off('keydown', this._doKeyDown).off('keypress', this._doKeyPress).off('keyup', this._doKeyUp)) : ('div' === i || 'span' === i) && s.removeClass(this.markerClassName).empty(), p === n && (p = null))
        },
        _enableDatepicker: function (e) {
            var i,
                s,
                n = t(e),
                o = t.data(e, 'datepicker')
            n.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), 'input' === i ? (e.disabled = !1, o.trigger.filter('button').each(function () {
                this.disabled = !1
            }).end().filter('img').css({
                opacity: '1.0',
                cursor: ''
            })) : ('div' === i || 'span' === i) && (s = n.children('.' + this._inlineClass), s.children().removeClass('ui-state-disabled'), s.find('select.ui-datepicker-month, select.ui-datepicker-year').prop('disabled', !1)), this._disabledInputs = t.map(this._disabledInputs, function (t) {
                return t === e ? null : t
            }))
        },
        _disableDatepicker: function (e) {
            var i,
                s,
                n = t(e),
                o = t.data(e, 'datepicker')
            n.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), 'input' === i ? (e.disabled = !0, o.trigger.filter('button').each(function () {
                this.disabled = !0
            }).end().filter('img').css({
                opacity: '0.5',
                cursor: 'default'
            })) : ('div' === i || 'span' === i) && (s = n.children('.' + this._inlineClass), s.children().addClass('ui-state-disabled'), s.find('select.ui-datepicker-month, select.ui-datepicker-year').prop('disabled', !0)), this._disabledInputs = t.map(this._disabledInputs, function (t) {
                return t === e ? null : t
            }), this._disabledInputs[this._disabledInputs.length] = e)
        },
        _isDisabledDatepicker: function (t) {
            if (!t) {
                return !1
            }
            for (var e = 0; this._disabledInputs.length > e; e++) {
                if (this._disabledInputs[e] === t) {
                    return !0
                }
            }
            return !1
        },
        _getInst: function (e) {
            try {
                return t.data(e, 'datepicker')
            } catch (i) {
                throw 'Missing instance data for this datepicker'
            }
        },
        _optionDatepicker: function (e, i, s) {
            var n,
                o,
                r,
                h,
                l = this._getInst(e)
            return 2 === arguments.length && 'string' == typeof i ? 'defaults' === i ? t.extend({}, t.datepicker._defaults) : l ? 'all' === i ? t.extend({}, l.settings) : this._get(l, i) : null : (n = i || {}, 'string' == typeof i && (n = {}, n[i] = s), l && (this._curInst === l && this._hideDatepicker(), o = this._getDateDatepicker(e, !0), r = this._getMinMaxDate(l, 'min'), h = this._getMinMaxDate(l, 'max'), a(l.settings, n), null !== r && void 0 !== n.dateFormat && void 0 === n.minDate && (l.settings.minDate = this._formatDate(l, r)), null !== h && void 0 !== n.dateFormat && void 0 === n.maxDate && (l.settings.maxDate = this._formatDate(l, h)), 'disabled' in n && (n.disabled ? this._disableDatepicker(e) : this._enableDatepicker(e)), this._attachments(t(e), l), this._autoSize(l), this._setDate(l, o), this._updateAlternate(l), this._updateDatepicker(l)), void 0)
        },
        _changeDatepicker: function (t, e, i) {
            this._optionDatepicker(t, e, i)
        },
        _refreshDatepicker: function (t) {
            var e = this._getInst(t)
            e && this._updateDatepicker(e)
        },
        _setDateDatepicker: function (t, e) {
            var i = this._getInst(t)
            i && (this._setDate(i, e), this._updateDatepicker(i), this._updateAlternate(i))
        },
        _getDateDatepicker: function (t, e) {
            var i = this._getInst(t)
            return i && !i.inline && this._setDateFromField(i, e),
                i ? this._getDate(i) : null
        },
        _doKeyDown: function (e) {
            var i,
                s,
                n,
                o = t.datepicker._getInst(e.target),
                a = !0,
                r = o.dpDiv.is('.ui-datepicker-rtl')
            if (o._keyEvent = !0, t.datepicker._datepickerShowing) {
                switch (e.keyCode) {
                    case 9:
                        t.datepicker._hideDatepicker(),
                            a = !1
                        break
                    case 13:
                        return n = t('td.' + t.datepicker._dayOverClass + ':not(.' + t.datepicker._currentClass + ')', o.dpDiv),
                        n[0] && t.datepicker._selectDay(e.target, o.selectedMonth, o.selectedYear, n[0]),
                            i = t.datepicker._get(o, 'onSelect'),
                            i ? (s = t.datepicker._formatDate(o), i.apply(o.input ? o.input[0] : null, [
                                s,
                                o
                            ])) : t.datepicker._hideDatepicker(),
                            !1
                    case 27:
                        t.datepicker._hideDatepicker()
                        break
                    case 33:
                        t.datepicker._adjustDate(e.target, e.ctrlKey ? -t.datepicker._get(o, 'stepBigMonths') : -t.datepicker._get(o, 'stepMonths'), 'M')
                        break
                    case 34:
                        t.datepicker._adjustDate(e.target, e.ctrlKey ? +t.datepicker._get(o, 'stepBigMonths') : +t.datepicker._get(o, 'stepMonths'), 'M')
                        break
                    case 35:
                        (e.ctrlKey || e.metaKey) && t.datepicker._clearDate(e.target),
                            a = e.ctrlKey || e.metaKey
                        break
                    case 36:
                        (e.ctrlKey || e.metaKey) && t.datepicker._gotoToday(e.target),
                            a = e.ctrlKey || e.metaKey
                        break
                    case 37:
                        (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, r ? 1 : -1, 'D'),
                            a = e.ctrlKey || e.metaKey,
                        e.originalEvent.altKey && t.datepicker._adjustDate(e.target, e.ctrlKey ? -t.datepicker._get(o, 'stepBigMonths') : -t.datepicker._get(o, 'stepMonths'), 'M')
                        break
                    case 38:
                        (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, -7, 'D'),
                            a = e.ctrlKey || e.metaKey
                        break
                    case 39:
                        (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, r ? -1 : 1, 'D'),
                            a = e.ctrlKey || e.metaKey,
                        e.originalEvent.altKey && t.datepicker._adjustDate(e.target, e.ctrlKey ? +t.datepicker._get(o, 'stepBigMonths') : +t.datepicker._get(o, 'stepMonths'), 'M')
                        break
                    case 40:
                        (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, 7, 'D'),
                            a = e.ctrlKey || e.metaKey
                        break
                    default:
                        a = !1
                }
            } else {
                36 === e.keyCode && e.ctrlKey ? t.datepicker._showDatepicker(this) : a = !1
            }
            a && (e.preventDefault(), e.stopPropagation())
        },
        _doKeyPress: function (e) {
            var i,
                s,
                n = t.datepicker._getInst(e.target)
            return t.datepicker._get(n, 'constrainInput') ? (i = t.datepicker._possibleChars(t.datepicker._get(n, 'dateFormat')), s = String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), e.ctrlKey || e.metaKey || ' ' > s || !i || i.indexOf(s) > -1) : void 0
        },
        _doKeyUp: function (e) {
            var i,
                s = t.datepicker._getInst(e.target)
            if (s.input.val() !== s.lastVal) {
                try {
                    i = t.datepicker.parseDate(t.datepicker._get(s, 'dateFormat'), s.input ? s.input.val() : null, t.datepicker._getFormatConfig(s)),
                    i && (t.datepicker._setDateFromField(s), t.datepicker._updateAlternate(s), t.datepicker._updateDatepicker(s))
                } catch (n) {
                }
            }
            return !0
        },
        _showDatepicker: function (e) {
            if (e = e.target || e, 'input' !== e.nodeName.toLowerCase() && (e = t('input', e.parentNode) [0]), !t.datepicker._isDisabledDatepicker(e) && t.datepicker._lastInput !== e) {
                var s,
                    n,
                    o,
                    r,
                    h,
                    l,
                    c
                s = t.datepicker._getInst(e),
                t.datepicker._curInst && t.datepicker._curInst !== s && (t.datepicker._curInst.dpDiv.stop(!0, !0), s && t.datepicker._datepickerShowing && t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),
                    n = t.datepicker._get(s, 'beforeShow'),
                    o = n ? n.apply(e, [
                        e,
                        s
                    ]) : {},
                o !== !1 && (a(s.settings, o), s.lastVal = null, t.datepicker._lastInput = e, t.datepicker._setDateFromField(s), t.datepicker._inDialog && (e.value = ''), t.datepicker._pos || (t.datepicker._pos = t.datepicker._findPos(e), t.datepicker._pos[1] += e.offsetHeight), r = !1, t(e).parents().each(function () {
                    return r |= 'fixed' === t(this).css('position'),
                        !r
                }), h = {
                    left: t.datepicker._pos[0],
                    top: t.datepicker._pos[1]
                }, t.datepicker._pos = null, s.dpDiv.empty(), s.dpDiv.css({
                    position: 'absolute',
                    display: 'block',
                    top: '-1000px'
                }), t.datepicker._updateDatepicker(s), h = t.datepicker._checkOffset(s, h, r), s.dpDiv.css({
                    position: t.datepicker._inDialog && t.blockUI ? 'static' : r ? 'fixed' : 'absolute',
                    display: 'none',
                    left: h.left + 'px',
                    top: h.top + 'px'
                }), s.inline || (l = t.datepicker._get(s, 'showAnim'), c = t.datepicker._get(s, 'duration'), s.dpDiv.css('z-index', i(t(e)) + 1), t.datepicker._datepickerShowing = !0, t.effects && t.effects.effect[l] ? s.dpDiv.show(l, t.datepicker._get(s, 'showOptions'), c) : s.dpDiv[l || 'show'](l ? c : null), t.datepicker._shouldFocusInput(s) && s.input.trigger('focus'), t.datepicker._curInst = s))
            }
        },
        _updateDatepicker: function (e) {
            this.maxRows = 4,
                p = e,
                e.dpDiv.empty().append(this._generateHTML(e)),
                this._attachHandlers(e)
            var i,
                s = this._getNumberOfMonths(e),
                n = s[1],
                a = 17,
                r = e.dpDiv.find('.' + this._dayOverClass + ' a')
            r.length > 0 && o.apply(r.get(0)),
                e.dpDiv.removeClass('ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4').width(''),
            n > 1 && e.dpDiv.addClass('ui-datepicker-multi-' + n).css('width', a * n + 'em'),
                e.dpDiv[(1 !== s[0] || 1 !== s[1] ? 'add' : 'remove') + 'Class']('ui-datepicker-multi'),
                e.dpDiv[(this._get(e, 'isRTL') ? 'add' : 'remove') + 'Class']('ui-datepicker-rtl'),
            e === t.datepicker._curInst && t.datepicker._datepickerShowing && t.datepicker._shouldFocusInput(e) && e.input.trigger('focus'),
            e.yearshtml && (i = e.yearshtml, setTimeout(function () {
                i === e.yearshtml && e.yearshtml && e.dpDiv.find('select.ui-datepicker-year:first').replaceWith(e.yearshtml),
                    i = e.yearshtml = null
            }, 0))
        },
        _shouldFocusInput: function (t) {
            return t.input && t.input.is(':visible') && !t.input.is(':disabled') && !t.input.is(':focus')
        },
        _checkOffset: function (e, i, s) {
            var n = e.dpDiv.outerWidth(),
                o = e.dpDiv.outerHeight(),
                a = e.input ? e.input.outerWidth() : 0,
                r = e.input ? e.input.outerHeight() : 0,
                h = document.documentElement.clientWidth + (s ? 0 : t(document).scrollLeft()),
                l = document.documentElement.clientHeight + (s ? 0 : t(document).scrollTop())
            return i.left -= this._get(e, 'isRTL') ? n - a : 0,
                i.left -= s && i.left === e.input.offset().left ? t(document).scrollLeft() : 0,
                i.top -= s && i.top === e.input.offset().top + r ? t(document).scrollTop() : 0,
                i.left -= Math.min(i.left, i.left + n > h && h > n ? Math.abs(i.left + n - h) : 0),
                i.top -= Math.min(i.top, i.top + o > l && l > o ? Math.abs(o + r) : 0),
                i
        },
        _findPos: function (e) {
            for (var i, s = this._getInst(e), n = this._get(s, 'isRTL'); e && ('hidden' === e.type || 1 !== e.nodeType || t.expr.filters.hidden(e));) {
                e = e[n ? 'previousSibling' : 'nextSibling']
            }
            return i = t(e).offset(),
                [
                    i.left,
                    i.top
                ]
        },
        _hideDatepicker: function (e) {
            var i,
                s,
                n,
                o,
                a = this._curInst
            !a || e && a !== t.data(e, 'datepicker') || this._datepickerShowing && (i = this._get(a, 'showAnim'), s = this._get(a, 'duration'), n = function () {
                t.datepicker._tidyDialog(a)
            }, t.effects && (t.effects.effect[i] || t.effects[i]) ? a.dpDiv.hide(i, t.datepicker._get(a, 'showOptions'), s, n) : a.dpDiv['slideDown' === i ? 'slideUp' : 'fadeIn' === i ? 'fadeOut' : 'hide'](i ? s : null, n), i || n(), this._datepickerShowing = !1, o = this._get(a, 'onClose'), o && o.apply(a.input ? a.input[0] : null, [
                a.input ? a.input.val() : '',
                a
            ]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                position: 'absolute',
                left: '0',
                top: '-100px'
            }), t.blockUI && (t.unblockUI(), t('body').append(this.dpDiv))), this._inDialog = !1)
        },
        _tidyDialog: function (t) {
            t.dpDiv.removeClass(this._dialogClass).off('.ui-datepicker-calendar')
        },
        _checkExternalClick: function (e) {
            if (t.datepicker._curInst) {
                var i = t(e.target),
                    s = t.datepicker._getInst(i[0]);
                (i[0].id !== t.datepicker._mainDivId && 0 === i.parents('#' + t.datepicker._mainDivId).length && !i.hasClass(t.datepicker.markerClassName) && !i.closest('.' + t.datepicker._triggerClass).length && t.datepicker._datepickerShowing && (!t.datepicker._inDialog || !t.blockUI) || i.hasClass(t.datepicker.markerClassName) && t.datepicker._curInst !== s) && t.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function (e, i, s) {
            var n = t(e),
                o = this._getInst(n[0])
            this._isDisabledDatepicker(n[0]) || (this._adjustInstDate(o, i + ('M' === s ? this._get(o, 'showCurrentAtPos') : 0), s), this._updateDatepicker(o))
        },
        _gotoToday: function (e) {
            var i,
                s = t(e),
                n = this._getInst(s[0])
            this._get(n, 'gotoCurrent') && n.currentDay ? (n.selectedDay = n.currentDay, n.drawMonth = n.selectedMonth = n.currentMonth, n.drawYear = n.selectedYear = n.currentYear) : (i = new Date, n.selectedDay = i.getDate(), n.drawMonth = n.selectedMonth = i.getMonth(), n.drawYear = n.selectedYear = i.getFullYear()),
                this._notifyChange(n),
                this._adjustDate(s)
        },
        _selectMonthYear: function (e, i, s) {
            var n = t(e),
                o = this._getInst(n[0])
            o['selected' + ('M' === s ? 'Month' : 'Year')] = o['draw' + ('M' === s ? 'Month' : 'Year')] = parseInt(i.options[i.selectedIndex].value, 10),
                this._notifyChange(o),
                this._adjustDate(n)
        },
        _selectDay: function (e, i, s, n) {
            var o,
                a = t(e)
            t(n).hasClass(this._unselectableClass) || this._isDisabledDatepicker(a[0]) || (o = this._getInst(a[0]), o.selectedDay = o.currentDay = t('a', n).html(), o.selectedMonth = o.currentMonth = i, o.selectedYear = o.currentYear = s, this._selectDate(e, this._formatDate(o, o.currentDay, o.currentMonth, o.currentYear)))
        },
        _clearDate: function (e) {
            var i = t(e)
            this._selectDate(i, '')
        },
        _selectDate: function (e, i) {
            var s,
                n = t(e),
                o = this._getInst(n[0])
            i = null != i ? i : this._formatDate(o),
            o.input && o.input.val(i),
                this._updateAlternate(o),
                s = this._get(o, 'onSelect'),
                s ? s.apply(o.input ? o.input[0] : null, [
                    i,
                    o
                ]) : o.input && o.input.trigger('change'),
                o.inline ? this._updateDatepicker(o) : (this._hideDatepicker(), this._lastInput = o.input[0], 'object' != typeof o.input[0] && o.input.trigger('focus'), this._lastInput = null)
        },
        _updateAlternate: function (e) {
            var i,
                s,
                n,
                o = this._get(e, 'altField')
            o && (i = this._get(e, 'altFormat') || this._get(e, 'dateFormat'), s = this._getDate(e), n = this.formatDate(i, s, this._getFormatConfig(e)), t(o).val(n))
        },
        noWeekends: function (t) {
            var e = t.getDay()
            return [e > 0 && 6 > e,
                '']
        },
        iso8601Week: function (t) {
            var e,
                i = new Date(t.getTime())
            return i.setDate(i.getDate() + 4 - (i.getDay() || 7)),
                e = i.getTime(),
                i.setMonth(0),
                i.setDate(1),
            Math.floor(Math.round((e - i) / 86400000) / 7) + 1
        },
        parseDate: function (e, i, s) {
            if (null == e || null == i) {
                throw 'Invalid arguments'
            }
            if (i = 'object' == typeof i ? '' + i : i + '', '' === i) {
                return null
            }
            var n,
                o,
                a,
                r,
                h = 0,
                l = (s ? s.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                c = 'string' != typeof l ? l : (new Date).getFullYear() % 100 + parseInt(l, 10),
                u = (s ? s.dayNamesShort : null) || this._defaults.dayNamesShort,
                d = (s ? s.dayNames : null) || this._defaults.dayNames,
                p = (s ? s.monthNamesShort : null) || this._defaults.monthNamesShort,
                f = (s ? s.monthNames : null) || this._defaults.monthNames,
                g = -1,
                m = -1,
                _ = -1,
                v = -1,
                b = !1,
                y = function (t) {
                    var i = e.length > n + 1 && e.charAt(n + 1) === t
                    return i && n++,
                        i
                },
                w = function (t) {
                    var e = y(t),
                        s = '@' === t ? 14 : '!' === t ? 20 : 'y' === t && e ? 4 : 'o' === t ? 3 : 2,
                        n = 'y' === t ? s : 1,
                        o = RegExp('^\\d{' + n + ',' + s + '}'),
                        a = i.substring(h).match(o)
                    if (!a) {
                        throw 'Missing number at position ' + h
                    }
                    return h += a[0].length,
                        parseInt(a[0], 10)
                },
                k = function (e, s, n) {
                    var o = -1,
                        a = t.map(y(e) ? n : s, function (t, e) {
                            return [[e,
                                t]]
                        }).sort(function (t, e) {
                            return -(t[1].length - e[1].length)
                        })
                    if (t.each(a, function (t, e) {
                        var s = e[1]
                        return i.substr(h, s.length).toLowerCase() === s.toLowerCase() ? (o = e[0], h += s.length, !1) : void 0
                    }), -1 !== o) {
                        return o + 1
                    }
                    throw 'Unknown name at position ' + h
                },
                x = function () {
                    if (i.charAt(h) !== e.charAt(n)) {
                        throw 'Unexpected literal at position ' + h
                    }
                    h++
                }
            for (n = 0; e.length > n; n++) {
                if (b) {
                    '\'' !== e.charAt(n) || y('\'') ? x() : b = !1
                } else {
                    switch (e.charAt(n)) {
                        case 'd':
                            _ = w('d')
                            break
                        case 'D':
                            k('D', u, d)
                            break
                        case 'o':
                            v = w('o')
                            break
                        case 'm':
                            m = w('m')
                            break
                        case 'M':
                            m = k('M', p, f)
                            break
                        case 'y':
                            g = w('y')
                            break
                        case '@':
                            r = new Date(w('@')),
                                g = r.getFullYear(),
                                m = r.getMonth() + 1,
                                _ = r.getDate()
                            break
                        case '!':
                            r = new Date((w('!') - this._ticksTo1970) / 10000),
                                g = r.getFullYear(),
                                m = r.getMonth() + 1,
                                _ = r.getDate()
                            break
                        case '\'':
                            y('\'') ? x() : b = !0
                            break
                        default:
                            x()
                    }
                }
            }
            if (i.length > h && (a = i.substr(h), !/^\s+/.test(a))) {
                throw 'Extra/unparsed characters found in date: ' + a
            }
            if (-1 === g ? g = (new Date).getFullYear() : 100 > g && (g += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (c >= g ? 0 : -100)), v > -1) {
                for (m = 1, _ = v; ;) {
                    if (o = this._getDaysInMonth(g, m - 1), o >= _) {
                        break
                    }
                    m++,
                        _ -= o
                }
            }
            if (r = this._daylightSavingAdjust(new Date(g, m - 1, _)), r.getFullYear() !== g || r.getMonth() + 1 !== m || r.getDate() !== _) {
                throw 'Invalid date'
            }
            return r
        },
        ATOM: 'yy-mm-dd',
        COOKIE: 'D, dd M yy',
        ISO_8601: 'yy-mm-dd',
        RFC_822: 'D, d M y',
        RFC_850: 'DD, dd-M-y',
        RFC_1036: 'D, d M y',
        RFC_1123: 'D, d M yy',
        RFC_2822: 'D, d M yy',
        RSS: 'D, d M y',
        TICKS: '!',
        TIMESTAMP: '@',
        W3C: 'yy-mm-dd',
        _ticksTo1970: 10000000 * 60 * 60 * 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)),
        formatDate: function (t, e, i) {
            if (!e) {
                return ''
            }
            var s,
                n = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort,
                o = (i ? i.dayNames : null) || this._defaults.dayNames,
                a = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort,
                r = (i ? i.monthNames : null) || this._defaults.monthNames,
                h = function (e) {
                    var i = t.length > s + 1 && t.charAt(s + 1) === e
                    return i && s++,
                        i
                },
                l = function (t, e, i) {
                    var s = '' + e
                    if (h(t)) {
                        for (; i > s.length;) {
                            s = '0' + s
                        }
                    }
                    return s
                },
                c = function (t, e, i, s) {
                    return h(t) ? s[e] : i[e]
                },
                u = '',
                d = !1
            if (e) {
                for (s = 0; t.length > s; s++) {
                    if (d) {
                        '\'' !== t.charAt(s) || h('\'') ? u += t.charAt(s) : d = !1
                    } else {
                        switch (t.charAt(s)) {
                            case 'd':
                                u += l('d', e.getDate(), 2)
                                break
                            case 'D':
                                u += c('D', e.getDay(), n, o)
                                break
                            case 'o':
                                u += l('o', Math.round((new Date(e.getFullYear(), e.getMonth(), e.getDate()).getTime() - new Date(e.getFullYear(), 0, 0).getTime()) / 86400000), 3)
                                break
                            case 'm':
                                u += l('m', e.getMonth() + 1, 2)
                                break
                            case 'M':
                                u += c('M', e.getMonth(), a, r)
                                break
                            case 'y':
                                u += h('y') ? e.getFullYear() : (10 > e.getFullYear() % 100 ? '0' : '') + e.getFullYear() % 100
                                break
                            case '@':
                                u += e.getTime()
                                break
                            case '!':
                                u += 10000 * e.getTime() + this._ticksTo1970
                                break
                            case '\'':
                                h('\'') ? u += '\'' : d = !0
                                break
                            default:
                                u += t.charAt(s)
                        }
                    }
                }
            }
            return u
        },
        _possibleChars: function (t) {
            var e,
                i = '',
                s = !1,
                n = function (i) {
                    var s = t.length > e + 1 && t.charAt(e + 1) === i
                    return s && e++,
                        s
                }
            for (e = 0; t.length > e; e++) {
                if (s) {
                    '\'' !== t.charAt(e) || n('\'') ? i += t.charAt(e) : s = !1
                } else {
                    switch (t.charAt(e)) {
                        case 'd':
                        case 'm':
                        case 'y':
                        case '@':
                            i += '0123456789'
                            break
                        case 'D':
                        case 'M':
                            return null
                        case '\'':
                            n('\'') ? i += '\'' : s = !0
                            break
                        default:
                            i += t.charAt(e)
                    }
                }
            }
            return i
        },
        _get: function (t, e) {
            return void 0 !== t.settings[e] ? t.settings[e] : this._defaults[e]
        },
        _setDateFromField: function (t, e) {
            if (t.input.val() !== t.lastVal) {
                var i = this._get(t, 'dateFormat'),
                    s = t.lastVal = t.input ? t.input.val() : null,
                    n = this._getDefaultDate(t),
                    o = n,
                    a = this._getFormatConfig(t)
                try {
                    o = this.parseDate(i, s, a) || n
                } catch (r) {
                    s = e ? '' : s
                }
                t.selectedDay = o.getDate(),
                    t.drawMonth = t.selectedMonth = o.getMonth(),
                    t.drawYear = t.selectedYear = o.getFullYear(),
                    t.currentDay = s ? o.getDate() : 0,
                    t.currentMonth = s ? o.getMonth() : 0,
                    t.currentYear = s ? o.getFullYear() : 0,
                    this._adjustInstDate(t)
            }
        },
        _getDefaultDate: function (t) {
            return this._restrictMinMax(t, this._determineDate(t, this._get(t, 'defaultDate'), new Date))
        },
        _determineDate: function (e, i, s) {
            var n = function (t) {
                    var e = new Date
                    return e.setDate(e.getDate() + t),
                        e
                },
                o = function (i) {
                    try {
                        return t.datepicker.parseDate(t.datepicker._get(e, 'dateFormat'), i, t.datepicker._getFormatConfig(e))
                    } catch (s) {
                    }
                    for (var n = (i.toLowerCase().match(/^c/) ? t.datepicker._getDate(e) : null) || new Date, o = n.getFullYear(), a = n.getMonth(), r = n.getDate(), h = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, l = h.exec(i); l;) {
                        switch (l[2] || 'd') {
                            case 'd':
                            case 'D':
                                r += parseInt(l[1], 10)
                                break
                            case 'w':
                            case 'W':
                                r += 7 * parseInt(l[1], 10)
                                break
                            case 'm':
                            case 'M':
                                a += parseInt(l[1], 10),
                                    r = Math.min(r, t.datepicker._getDaysInMonth(o, a))
                                break
                            case 'y':
                            case 'Y':
                                o += parseInt(l[1], 10),
                                    r = Math.min(r, t.datepicker._getDaysInMonth(o, a))
                        }
                        l = h.exec(i)
                    }
                    return new Date(o, a, r)
                },
                a = null == i || '' === i ? s : 'string' == typeof i ? o(i) : 'number' == typeof i ? isNaN(i) ? s : n(i) : new Date(i.getTime())
            return a = a && 'Invalid Date' == '' + a ? s : a,
            a && (a.setHours(0), a.setMinutes(0), a.setSeconds(0), a.setMilliseconds(0)),
                this._daylightSavingAdjust(a)
        },
        _daylightSavingAdjust: function (t) {
            return t ? (t.setHours(t.getHours() > 12 ? t.getHours() + 2 : 0), t) : null
        },
        _setDate: function (t, e, i) {
            var s = !e,
                n = t.selectedMonth,
                o = t.selectedYear,
                a = this._restrictMinMax(t, this._determineDate(t, e, new Date))
            t.selectedDay = t.currentDay = a.getDate(),
                t.drawMonth = t.selectedMonth = t.currentMonth = a.getMonth(),
                t.drawYear = t.selectedYear = t.currentYear = a.getFullYear(),
            n === t.selectedMonth && o === t.selectedYear || i || this._notifyChange(t),
                this._adjustInstDate(t),
            t.input && t.input.val(s ? '' : this._formatDate(t))
        },
        _getDate: function (t) {
            var e = !t.currentYear || t.input && '' === t.input.val() ? null : this._daylightSavingAdjust(new Date(t.currentYear, t.currentMonth, t.currentDay))
            return e
        },
        _attachHandlers: function (e) {
            var i = this._get(e, 'stepMonths'),
                s = '#' + e.id.replace(/\\\\/g, '\\')
            e.dpDiv.find('[data-handler]').map(function () {
                var e = {
                    prev: function () {
                        t.datepicker._adjustDate(s, -i, 'M')
                    },
                    next: function () {
                        t.datepicker._adjustDate(s, +i, 'M')
                    },
                    hide: function () {
                        t.datepicker._hideDatepicker()
                    },
                    today: function () {
                        t.datepicker._gotoToday(s)
                    },
                    selectDay: function () {
                        return t.datepicker._selectDay(s, +this.getAttribute('data-month'), +this.getAttribute('data-year'), this),
                            !1
                    },
                    selectMonth: function () {
                        return t.datepicker._selectMonthYear(s, this, 'M'),
                            !1
                    },
                    selectYear: function () {
                        return t.datepicker._selectMonthYear(s, this, 'Y'),
                            !1
                    }
                }
                t(this).on(this.getAttribute('data-event'), e[this.getAttribute('data-handler')])
            })
        },
        _generateHTML: function (t) {
            var e,
                i,
                s,
                n,
                o,
                a,
                r,
                h,
                l,
                c,
                u,
                d,
                p,
                f,
                g,
                m,
                _,
                v,
                b,
                y,
                w,
                k,
                x,
                C,
                D,
                I,
                T,
                P,
                M,
                S,
                H,
                z,
                O,
                A,
                N,
                W,
                E,
                F,
                L,
                R = new Date,
                B = this._daylightSavingAdjust(new Date(R.getFullYear(), R.getMonth(), R.getDate())),
                Y = this._get(t, 'isRTL'),
                j = this._get(t, 'showButtonPanel'),
                q = this._get(t, 'hideIfNoPrevNext'),
                K = this._get(t, 'navigationAsDateFormat'),
                U = this._getNumberOfMonths(t),
                V = this._get(t, 'showCurrentAtPos'),
                $ = this._get(t, 'stepMonths'),
                X = 1 !== U[0] || 1 !== U[1],
                G = this._daylightSavingAdjust(t.currentDay ? new Date(t.currentYear, t.currentMonth, t.currentDay) : new Date(9999, 9, 9)),
                Q = this._getMinMaxDate(t, 'min'),
                J = this._getMinMaxDate(t, 'max'),
                Z = t.drawMonth - V,
                te = t.drawYear
            if (0 > Z && (Z += 12, te--), J) {
                for (e = this._daylightSavingAdjust(new Date(J.getFullYear(), J.getMonth() - U[0] * U[1] + 1, J.getDate())), e = Q && Q > e ? Q : e; this._daylightSavingAdjust(new Date(te, Z, 1)) > e;) {
                    Z--,
                    0 > Z && (Z = 11, te--)
                }
            }
            for (t.drawMonth = Z, t.drawYear = te, i = this._get(t, 'prevText'), i = K ? this.formatDate(i, this._daylightSavingAdjust(new Date(te, Z - $, 1)), this._getFormatConfig(t)) : i, s = this._canAdjustMonth(t, -1, te, Z) ? '<a class=\'ui-datepicker-prev ui-corner-all\' data-handler=\'prev\' data-event=\'click\' title=\'' + i + '\'><span class=\'ui-icon ui-icon-circle-triangle-' + (Y ? 'e' : 'w') + '\'>' + i + '</span></a>' : q ? '' : '<a class=\'ui-datepicker-prev ui-corner-all ui-state-disabled\' title=\'' + i + '\'><span class=\'ui-icon ui-icon-circle-triangle-' + (Y ? 'e' : 'w') + '\'>' + i + '</span></a>', n = this._get(t, 'nextText'), n = K ? this.formatDate(n, this._daylightSavingAdjust(new Date(te, Z + $, 1)), this._getFormatConfig(t)) : n, o = this._canAdjustMonth(t, 1, te, Z) ? '<a class=\'ui-datepicker-next ui-corner-all\' data-handler=\'next\' data-event=\'click\' title=\'' + n + '\'><span class=\'ui-icon ui-icon-circle-triangle-' + (Y ? 'w' : 'e') + '\'>' + n + '</span></a>' : q ? '' : '<a class=\'ui-datepicker-next ui-corner-all ui-state-disabled\' title=\'' + n + '\'><span class=\'ui-icon ui-icon-circle-triangle-' + (Y ? 'w' : 'e') + '\'>' + n + '</span></a>', a = this._get(t, 'currentText'), r = this._get(t, 'gotoCurrent') && t.currentDay ? G : B, a = K ? this.formatDate(a, r, this._getFormatConfig(t)) : a, h = t.inline ? '' : '<button type=\'button\' class=\'ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all\' data-handler=\'hide\' data-event=\'click\'>' + this._get(t, 'closeText') + '</button>', l = j ? '<div class=\'ui-datepicker-buttonpane ui-widget-content\'>' + (Y ? h : '') + (this._isInRange(t, r) ? '<button type=\'button\' class=\'ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all\' data-handler=\'today\' data-event=\'click\'>' + a + '</button>' : '') + (Y ? '' : h) + '</div>' : '', c = parseInt(this._get(t, 'firstDay'), 10), c = isNaN(c) ? 0 : c, u = this._get(t, 'showWeek'), d = this._get(t, 'dayNames'), p = this._get(t, 'dayNamesMin'), f = this._get(t, 'monthNames'), g = this._get(t, 'monthNamesShort'), m = this._get(t, 'beforeShowDay'), _ = this._get(t, 'showOtherMonths'), v = this._get(t, 'selectOtherMonths'), b = this._getDefaultDate(t), y = '', k = 0; U[0] > k; k++) {
                for (x = '', this.maxRows = 4, C = 0; U[1] > C; C++) {
                    if (D = this._daylightSavingAdjust(new Date(te, Z, t.selectedDay)), I = ' ui-corner-all', T = '', X) {
                        if (T += '<div class=\'ui-datepicker-group', U[1] > 1) {
                            switch (C) {
                                case 0:
                                    T += ' ui-datepicker-group-first',
                                        I = ' ui-corner-' + (Y ? 'right' : 'left')
                                    break
                                case U[1] - 1:
                                    T += ' ui-datepicker-group-last',
                                        I = ' ui-corner-' + (Y ? 'left' : 'right')
                                    break
                                default:
                                    T += ' ui-datepicker-group-middle',
                                        I = ''
                            }
                        }
                        T += '\'>'
                    }
                    for (T += '<div class=\'ui-datepicker-header ui-widget-header ui-helper-clearfix' + I + '\'>' + (/all|left/.test(I) && 0 === k ? Y ? o : s : '') + (/all|right/.test(I) && 0 === k ? Y ? s : o : '') + this._generateMonthYearHeader(t, Z, te, Q, J, k > 0 || C > 0, f, g) + '</div><table class=\'ui-datepicker-calendar\'><thead><tr>', P = u ? '<th class=\'ui-datepicker-week-col\'>' + this._get(t, 'weekHeader') + '</th>' : '', w = 0; 7 > w; w++) {
                        M = (w + c) % 7,
                            P += '<th scope=\'col\'' + ((w + c + 6) % 7 >= 5 ? ' class=\'ui-datepicker-week-end\'' : '') + '><span title=\'' + d[M] + '\'>' + p[M] + '</span></th>'
                    }
                    for (T += P + '</tr></thead><tbody>', S = this._getDaysInMonth(te, Z), te === t.selectedYear && Z === t.selectedMonth && (t.selectedDay = Math.min(t.selectedDay, S)), H = (this._getFirstDayOfMonth(te, Z) - c + 7) % 7, z = Math.ceil((H + S) / 7), O = X ? this.maxRows > z ? this.maxRows : z : z, this.maxRows = O, A = this._daylightSavingAdjust(new Date(te, Z, 1 - H)), N = 0; O > N; N++) {
                        for (T += '<tr>', W = u ? '<td class=\'ui-datepicker-week-col\'>' + this._get(t, 'calculateWeek')(A) + '</td>' : '', w = 0; 7 > w; w++) {
                            E = m ? m.apply(t.input ? t.input[0] : null, [
                                A
                            ]) : [
                                !0,
                                ''
                            ],
                                F = A.getMonth() !== Z,
                                L = F && !v || !E[0] || Q && Q > A || J && A > J,
                                W += '<td class=\'' + ((w + c + 6) % 7 >= 5 ? ' ui-datepicker-week-end' : '') + (F ? ' ui-datepicker-other-month' : '') + (A.getTime() === D.getTime() && Z === t.selectedMonth && t._keyEvent || b.getTime() === A.getTime() && b.getTime() === D.getTime() ? ' ' + this._dayOverClass : '') + (L ? ' ' + this._unselectableClass + ' ui-state-disabled' : '') + (F && !_ ? '' : ' ' + E[1] + (A.getTime() === G.getTime() ? ' ' + this._currentClass : '') + (A.getTime() === B.getTime() ? ' ui-datepicker-today' : '')) + '\'' + (F && !_ || !E[2] ? '' : ' title=\'' + E[2].replace(/'/g, '&#39;') + '\'') + (L ? '' : ' data-handler=\'selectDay\' data-event=\'click\' data-month=\'' + A.getMonth() + '\' data-year=\'' + A.getFullYear() + '\'') + '>' + (F && !_ ? '&#xa0;' : L ? '<span class=\'ui-state-default\'>' + A.getDate() + '</span>' : '<a class=\'ui-state-default' + (A.getTime() === B.getTime() ? ' ui-state-highlight' : '') + (A.getTime() === G.getTime() ? ' ui-state-active' : '') + (F ? ' ui-priority-secondary' : '') + '\' href=\'#\'>' + A.getDate() + '</a>') + '</td>',
                                A.setDate(A.getDate() + 1),
                                A = this._daylightSavingAdjust(A)
                        }
                        T += W + '</tr>'
                    }
                    Z++,
                    Z > 11 && (Z = 0, te++),
                        T += '</tbody></table>' + (X ? '</div>' + (U[0] > 0 && C === U[1] - 1 ? '<div class=\'ui-datepicker-row-break\'></div>' : '') : ''),
                        x += T
                }
                y += x
            }
            return y += l,
                t._keyEvent = !1,
                y
        },
        _generateMonthYearHeader: function (t, e, i, s, n, o, a, r) {
            var h,
                l,
                c,
                u,
                d,
                p,
                f,
                g,
                m = this._get(t, 'changeMonth'),
                _ = this._get(t, 'changeYear'),
                v = this._get(t, 'showMonthAfterYear'),
                b = '<div class=\'ui-datepicker-title\'>',
                y = ''
            if (o || !m) {
                y += '<span class=\'ui-datepicker-month\'>' + a[e] + '</span>'
            } else {
                for (h = s && s.getFullYear() === i, l = n && n.getFullYear() === i, y += '<select class=\'ui-datepicker-month\' data-handler=\'selectMonth\' data-event=\'change\'>', c = 0; 12 > c; c++) {
                    (!h || c >= s.getMonth()) && (!l || n.getMonth() >= c) && (y += '<option value=\'' + c + '\'' + (c === e ? ' selected=\'selected\'' : '') + '>' + r[c] + '</option>')
                }
                y += '</select>'
            }
            if (v || (b += y + (!o && m && _ ? '' : '&#xa0;')), !t.yearshtml) {
                if (t.yearshtml = '', o || !_) {
                    b += '<span class=\'ui-datepicker-year\'>' + i + '</span>'
                } else {
                    for (u = this._get(t, 'yearRange').split(':'), d = (new Date).getFullYear(), p = function (t) {
                        var e = t.match(/c[+\-].*/) ? i + parseInt(t.substring(1), 10) : t.match(/[+\-].*/) ? d + parseInt(t, 10) : parseInt(t, 10)
                        return isNaN(e) ? d : e
                    }, f = p(u[0]), g = Math.max(f, p(u[1] || '')), f = s ? Math.max(f, s.getFullYear()) : f, g = n ? Math.min(g, n.getFullYear()) : g, t.yearshtml += '<select class=\'ui-datepicker-year\' data-handler=\'selectYear\' data-event=\'change\'>'; g >= f; f++) {
                        t.yearshtml += '<option value=\'' + f + '\'' + (f === i ? ' selected=\'selected\'' : '') + '>' + f + '</option>'
                    }
                    t.yearshtml += '</select>',
                        b += t.yearshtml,
                        t.yearshtml = null
                }
            }
            return b += this._get(t, 'yearSuffix'),
            v && (b += (!o && m && _ ? '' : '&#xa0;') + y),
                b += '</div>'
        },
        _adjustInstDate: function (t, e, i) {
            var s = t.selectedYear + ('Y' === i ? e : 0),
                n = t.selectedMonth + ('M' === i ? e : 0),
                o = Math.min(t.selectedDay, this._getDaysInMonth(s, n)) + ('D' === i ? e : 0),
                a = this._restrictMinMax(t, this._daylightSavingAdjust(new Date(s, n, o)))
            t.selectedDay = a.getDate(),
                t.drawMonth = t.selectedMonth = a.getMonth(),
                t.drawYear = t.selectedYear = a.getFullYear(),
            ('M' === i || 'Y' === i) && this._notifyChange(t)
        },
        _restrictMinMax: function (t, e) {
            var i = this._getMinMaxDate(t, 'min'),
                s = this._getMinMaxDate(t, 'max'),
                n = i && i > e ? i : e
            return s && n > s ? s : n
        },
        _notifyChange: function (t) {
            var e = this._get(t, 'onChangeMonthYear')
            e && e.apply(t.input ? t.input[0] : null, [
                t.selectedYear,
                t.selectedMonth + 1,
                t
            ])
        },
        _getNumberOfMonths: function (t) {
            var e = this._get(t, 'numberOfMonths')
            return null == e ? [
                1,
                1
            ] : 'number' == typeof e ? [
                1,
                e
            ] : e
        },
        _getMinMaxDate: function (t, e) {
            return this._determineDate(t, this._get(t, e + 'Date'), null)
        },
        _getDaysInMonth: function (t, e) {
            return 32 - this._daylightSavingAdjust(new Date(t, e, 32)).getDate()
        },
        _getFirstDayOfMonth: function (t, e) {
            return new Date(t, e, 1).getDay()
        },
        _canAdjustMonth: function (t, e, i, s) {
            var n = this._getNumberOfMonths(t),
                o = this._daylightSavingAdjust(new Date(i, s + (0 > e ? e : n[0] * n[1]), 1))
            return 0 > e && o.setDate(this._getDaysInMonth(o.getFullYear(), o.getMonth())),
                this._isInRange(t, o)
        },
        _isInRange: function (t, e) {
            var i,
                s,
                n = this._getMinMaxDate(t, 'min'),
                o = this._getMinMaxDate(t, 'max'),
                a = null,
                r = null,
                h = this._get(t, 'yearRange')
            return h && (i = h.split(':'), s = (new Date).getFullYear(), a = parseInt(i[0], 10), r = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (a += s), i[1].match(/[+\-].*/) && (r += s)),
            (!n || e.getTime() >= n.getTime()) && (!o || e.getTime() <= o.getTime()) && (!a || e.getFullYear() >= a) && (!r || r >= e.getFullYear())
        },
        _getFormatConfig: function (t) {
            var e = this._get(t, 'shortYearCutoff')
            return e = 'string' != typeof e ? e : (new Date).getFullYear() % 100 + parseInt(e, 10),
                {
                    shortYearCutoff: e,
                    dayNamesShort: this._get(t, 'dayNamesShort'),
                    dayNames: this._get(t, 'dayNames'),
                    monthNamesShort: this._get(t, 'monthNamesShort'),
                    monthNames: this._get(t, 'monthNames')
                }
        },
        _formatDate: function (t, e, i, s) {
            e || (t.currentDay = t.selectedDay, t.currentMonth = t.selectedMonth, t.currentYear = t.selectedYear)
            var n = e ? 'object' == typeof e ? e : this._daylightSavingAdjust(new Date(s, i, e)) : this._daylightSavingAdjust(new Date(t.currentYear, t.currentMonth, t.currentDay))
            return this.formatDate(this._get(t, 'dateFormat'), n, this._getFormatConfig(t))
        }
    }),
        t.fn.datepicker = function (e) {
            if (!this.length) {
                return this
            }
            t.datepicker.initialized || (t(document).on('mousedown', t.datepicker._checkExternalClick), t.datepicker.initialized = !0),
            0 === t('#' + t.datepicker._mainDivId).length && t('body').append(t.datepicker.dpDiv)
            var i = Array.prototype.slice.call(arguments, 1)
            return 'string' != typeof e || 'isDisabled' !== e && 'getDate' !== e && 'widget' !== e ? 'option' === e && 2 === arguments.length && 'string' == typeof arguments[1] ? t.datepicker['_' + e + 'Datepicker'].apply(t.datepicker, [
                this[0]
            ].concat(i)) : this.each(function () {
                'string' == typeof e ? t.datepicker['_' + e + 'Datepicker'].apply(t.datepicker, [
                    this
                ].concat(i)) : t.datepicker._attachDatepicker(this, e)
            }) : t.datepicker['_' + e + 'Datepicker'].apply(t.datepicker, [
                this[0]
            ].concat(i))
        },
        t.datepicker = new s,
        t.datepicker.initialized = !1,
        t.datepicker.uuid = (new Date).getTime(),
        t.datepicker.version = '1.12.1',
        t.datepicker,
        t.widget('ui.dialog', {
            version: '1.12.1',
            options: {
                appendTo: 'body',
                autoOpen: !0,
                buttons: [],
                classes: {
                    'ui-dialog': 'ui-corner-all',
                    'ui-dialog-titlebar': 'ui-corner-all'
                },
                closeOnEscape: !0,
                closeText: 'Close',
                draggable: !0,
                hide: null,
                height: 'auto',
                maxHeight: null,
                maxWidth: null,
                minHeight: 150,
                minWidth: 150,
                modal: !1,
                position: {
                    my: 'center',
                    at: 'center',
                    of: window,
                    collision: 'fit',
                    using: function (e) {
                        var i = t(this).css(e).offset().top
                        0 > i && t(this).css('top', e.top - i)
                    }
                },
                resizable: !0,
                show: null,
                title: null,
                width: 300,
                beforeClose: null,
                close: null,
                drag: null,
                dragStart: null,
                dragStop: null,
                focus: null,
                open: null,
                resize: null,
                resizeStart: null,
                resizeStop: null
            },
            sizeRelatedOptions: {
                buttons: !0,
                height: !0,
                maxHeight: !0,
                maxWidth: !0,
                minHeight: !0,
                minWidth: !0,
                width: !0
            },
            resizableRelatedOptions: {
                maxHeight: !0,
                maxWidth: !0,
                minHeight: !0,
                minWidth: !0
            },
            _create: function () {
                this.originalCss = {
                    display: this.element[0].style.display,
                    width: this.element[0].style.width,
                    minHeight: this.element[0].style.minHeight,
                    maxHeight: this.element[0].style.maxHeight,
                    height: this.element[0].style.height
                },
                    this.originalPosition = {
                        parent: this.element.parent(),
                        index: this.element.parent().children().index(this.element)
                    },
                    this.originalTitle = this.element.attr('title'),
                null == this.options.title && null != this.originalTitle && (this.options.title = this.originalTitle),
                this.options.disabled && (this.options.disabled = !1),
                    this._createWrapper(),
                    this.element.show().removeAttr('title').appendTo(this.uiDialog),
                    this._addClass('ui-dialog-content', 'ui-widget-content'),
                    this._createTitlebar(),
                    this._createButtonPane(),
                this.options.draggable && t.fn.draggable && this._makeDraggable(),
                this.options.resizable && t.fn.resizable && this._makeResizable(),
                    this._isOpen = !1,
                    this._trackFocus()
            },
            _init: function () {
                this.options.autoOpen && this.open()
            },
            _appendTo: function () {
                var e = this.options.appendTo
                return e && (e.jquery || e.nodeType) ? t(e) : this.document.find(e || 'body').eq(0)
            },
            _destroy: function () {
                var t,
                    e = this.originalPosition
                this._untrackInstance(),
                    this._destroyOverlay(),
                    this.element.removeUniqueId().css(this.originalCss).detach(),
                    this.uiDialog.remove(),
                this.originalTitle && this.element.attr('title', this.originalTitle),
                    t = e.parent.children().eq(e.index),
                    t.length && t[0] !== this.element[0] ? t.before(this.element) : e.parent.append(this.element)
            },
            widget: function () {
                return this.uiDialog
            },
            disable: t.noop,
            enable: t.noop,
            close: function (e) {
                var i = this
                this._isOpen && this._trigger('beforeClose', e) !== !1 && (this._isOpen = !1, this._focusedElement = null, this._destroyOverlay(), this._untrackInstance(), this.opener.filter(':focusable').trigger('focus').length || t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])), this._hide(this.uiDialog, this.options.hide, function () {
                    i._trigger('close', e)
                }))
            },
            isOpen: function () {
                return this._isOpen
            },
            moveToTop: function () {
                this._moveToTop()
            },
            _moveToTop: function (e, i) {
                var s = !1,
                    n = this.uiDialog.siblings('.ui-front:visible').map(function () {
                        return +t(this).css('z-index')
                    }).get(),
                    o = Math.max.apply(null, n)
                return o >= +this.uiDialog.css('z-index') && (this.uiDialog.css('z-index', o + 1), s = !0),
                s && !i && this._trigger('focus', e),
                    s
            },
            open: function () {
                var e = this
                return this._isOpen ? (this._moveToTop() && this._focusTabbable(), void 0) : (this._isOpen = !0, this.opener = t(t.ui.safeActiveElement(this.document[0])), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this.overlay && this.overlay.css('z-index', this.uiDialog.css('z-index') - 1), this._show(this.uiDialog, this.options.show, function () {
                    e._focusTabbable(),
                        e._trigger('focus')
                }), this._makeFocusTarget(), this._trigger('open'), void 0)
            },
            _focusTabbable: function () {
                var t = this._focusedElement
                t || (t = this.element.find('[autofocus]')),
                t.length || (t = this.element.find(':tabbable')),
                t.length || (t = this.uiDialogButtonPane.find(':tabbable')),
                t.length || (t = this.uiDialogTitlebarClose.filter(':tabbable')),
                t.length || (t = this.uiDialog),
                    t.eq(0).trigger('focus')
            },
            _keepFocus: function (e) {
                function i() {
                    var e = t.ui.safeActiveElement(this.document[0]),
                        i = this.uiDialog[0] === e || t.contains(this.uiDialog[0], e)
                    i || this._focusTabbable()
                }

                e.preventDefault(),
                    i.call(this),
                    this._delay(i)
            },
            _createWrapper: function () {
                this.uiDialog = t('<div>').hide().attr({
                    tabIndex: -1,
                    role: 'dialog'
                }).appendTo(this._appendTo()),
                    this._addClass(this.uiDialog, 'ui-dialog', 'ui-widget ui-widget-content ui-front'),
                    this._on(this.uiDialog, {
                        keydown: function (e) {
                            if (this.options.closeOnEscape && !e.isDefaultPrevented() && e.keyCode && e.keyCode === t.ui.keyCode.ESCAPE) {
                                return e.preventDefault(),
                                    this.close(e),
                                    void 0
                            }
                            if (e.keyCode === t.ui.keyCode.TAB && !e.isDefaultPrevented()) {
                                var i = this.uiDialog.find(':tabbable'),
                                    s = i.filter(':first'),
                                    n = i.filter(':last')
                                e.target !== n[0] && e.target !== this.uiDialog[0] || e.shiftKey ? e.target !== s[0] && e.target !== this.uiDialog[0] || !e.shiftKey || (this._delay(function () {
                                    n.trigger('focus')
                                }), e.preventDefault()) : (this._delay(function () {
                                    s.trigger('focus')
                                }), e.preventDefault())
                            }
                        },
                        mousedown: function (t) {
                            this._moveToTop(t) && this._focusTabbable()
                        }
                    }),
                this.element.find('[aria-describedby]').length || this.uiDialog.attr({
                    'aria-describedby': this.element.uniqueId().attr('id')
                })
            },
            _createTitlebar: function () {
                var e
                this.uiDialogTitlebar = t('<div>'),
                    this._addClass(this.uiDialogTitlebar, 'ui-dialog-titlebar', 'ui-widget-header ui-helper-clearfix'),
                    this._on(this.uiDialogTitlebar, {
                        mousedown: function (e) {
                            t(e.target).closest('.ui-dialog-titlebar-close') || this.uiDialog.trigger('focus')
                        }
                    }),
                    this.uiDialogTitlebarClose = t('<button type=\'button\'></button>').button({
                        label: t('<a>').text(this.options.closeText).html(),
                        icon: 'ui-icon-closethick',
                        showLabel: !1
                    }).appendTo(this.uiDialogTitlebar),
                    this._addClass(this.uiDialogTitlebarClose, 'ui-dialog-titlebar-close'),
                    this._on(this.uiDialogTitlebarClose, {
                        click: function (t) {
                            t.preventDefault(),
                                this.close(t)
                        }
                    }),
                    e = t('<span>').uniqueId().prependTo(this.uiDialogTitlebar),
                    this._addClass(e, 'ui-dialog-title'),
                    this._title(e),
                    this.uiDialogTitlebar.prependTo(this.uiDialog),
                    this.uiDialog.attr({
                        'aria-labelledby': e.attr('id')
                    })
            },
            _title: function (t) {
                this.options.title ? t.text(this.options.title) : t.html('&#160;')
            },
            _createButtonPane: function () {
                this.uiDialogButtonPane = t('<div>'),
                    this._addClass(this.uiDialogButtonPane, 'ui-dialog-buttonpane', 'ui-widget-content ui-helper-clearfix'),
                    this.uiButtonSet = t('<div>').appendTo(this.uiDialogButtonPane),
                    this._addClass(this.uiButtonSet, 'ui-dialog-buttonset'),
                    this._createButtons()
            },
            _createButtons: function () {
                var e = this,
                    i = this.options.buttons
                return this.uiDialogButtonPane.remove(),
                    this.uiButtonSet.empty(),
                    t.isEmptyObject(i) || t.isArray(i) && !i.length ? (this._removeClass(this.uiDialog, 'ui-dialog-buttons'), void 0) : (t.each(i, function (i, s) {
                        var n,
                            o
                        s = t.isFunction(s) ? {
                                click: s,
                                text: i
                            }
                            : s,
                            s = t.extend({
                                type: 'button'
                            }, s),
                            n = s.click,
                            o = {
                                icon: s.icon,
                                iconPosition: s.iconPosition,
                                showLabel: s.showLabel,
                                icons: s.icons,
                                text: s.text
                            },
                            delete s.click,
                            delete s.icon,
                            delete s.iconPosition,
                            delete s.showLabel,
                            delete s.icons,
                        'boolean' == typeof s.text && delete s.text,
                            t('<button></button>', s).button(o).appendTo(e.uiButtonSet).on('click', function () {
                                n.apply(e.element[0], arguments)
                            })
                    }), this._addClass(this.uiDialog, 'ui-dialog-buttons'), this.uiDialogButtonPane.appendTo(this.uiDialog), void 0)
            },
            _makeDraggable: function () {
                function e(t) {
                    return {
                        position: t.position,
                        offset: t.offset
                    }
                }

                var i = this,
                    s = this.options
                this.uiDialog.draggable({
                    cancel: '.ui-dialog-content, .ui-dialog-titlebar-close',
                    handle: '.ui-dialog-titlebar',
                    containment: 'document',
                    start: function (s, n) {
                        i._addClass(t(this), 'ui-dialog-dragging'),
                            i._blockFrames(),
                            i._trigger('dragStart', s, e(n))
                    },
                    drag: function (t, s) {
                        i._trigger('drag', t, e(s))
                    },
                    stop: function (n, o) {
                        var a = o.offset.left - i.document.scrollLeft(),
                            r = o.offset.top - i.document.scrollTop()
                        s.position = {
                            my: 'left top',
                            at: 'left' + (a >= 0 ? '+' : '') + a + ' top' + (r >= 0 ? '+' : '') + r,
                            of: i.window
                        },
                            i._removeClass(t(this), 'ui-dialog-dragging'),
                            i._unblockFrames(),
                            i._trigger('dragStop', n, e(o))
                    }
                })
            },
            _makeResizable: function () {
                function e(t) {
                    return {
                        originalPosition: t.originalPosition,
                        originalSize: t.originalSize,
                        position: t.position,
                        size: t.size
                    }
                }

                var i = this,
                    s = this.options,
                    n = s.resizable,
                    o = this.uiDialog.css('position'),
                    a = 'string' == typeof n ? n : 'n,e,s,w,se,sw,ne,nw'
                this.uiDialog.resizable({
                    cancel: '.ui-dialog-content',
                    containment: 'document',
                    alsoResize: this.element,
                    maxWidth: s.maxWidth,
                    maxHeight: s.maxHeight,
                    minWidth: s.minWidth,
                    minHeight: this._minHeight(),
                    handles: a,
                    start: function (s, n) {
                        i._addClass(t(this), 'ui-dialog-resizing'),
                            i._blockFrames(),
                            i._trigger('resizeStart', s, e(n))
                    },
                    resize: function (t, s) {
                        i._trigger('resize', t, e(s))
                    },
                    stop: function (n, o) {
                        var a = i.uiDialog.offset(),
                            r = a.left - i.document.scrollLeft(),
                            h = a.top - i.document.scrollTop()
                        s.height = i.uiDialog.height(),
                            s.width = i.uiDialog.width(),
                            s.position = {
                                my: 'left top',
                                at: 'left' + (r >= 0 ? '+' : '') + r + ' top' + (h >= 0 ? '+' : '') + h,
                                of: i.window
                            },
                            i._removeClass(t(this), 'ui-dialog-resizing'),
                            i._unblockFrames(),
                            i._trigger('resizeStop', n, e(o))
                    }
                }).css('position', o)
            },
            _trackFocus: function () {
                this._on(this.widget(), {
                    focusin: function (e) {
                        this._makeFocusTarget(),
                            this._focusedElement = t(e.target)
                    }
                })
            },
            _makeFocusTarget: function () {
                this._untrackInstance(),
                    this._trackingInstances().unshift(this)
            },
            _untrackInstance: function () {
                var e = this._trackingInstances(),
                    i = t.inArray(this, e);
                -1 !== i && e.splice(i, 1)
            },
            _trackingInstances: function () {
                var t = this.document.data('ui-dialog-instances')
                return t || (t = [], this.document.data('ui-dialog-instances', t)),
                    t
            },
            _minHeight: function () {
                var t = this.options
                return 'auto' === t.height ? t.minHeight : Math.min(t.minHeight, t.height)
            },
            _position: function () {
                var t = this.uiDialog.is(':visible')
                t || this.uiDialog.show(),
                    this.uiDialog.position(this.options.position),
                t || this.uiDialog.hide()
            },
            _setOptions: function (e) {
                var i = this,
                    s = !1,
                    n = {}
                t.each(e, function (t, e) {
                    i._setOption(t, e),
                    t in i.sizeRelatedOptions && (s = !0),
                    t in i.resizableRelatedOptions && (n[t] = e)
                }),
                s && (this._size(), this._position()),
                this.uiDialog.is(':data(ui-resizable)') && this.uiDialog.resizable('option', n)
            },
            _setOption: function (e, i) {
                var s,
                    n,
                    o = this.uiDialog
                'disabled' !== e && (this._super(e, i), 'appendTo' === e && this.uiDialog.appendTo(this._appendTo()), 'buttons' === e && this._createButtons(), 'closeText' === e && this.uiDialogTitlebarClose.button({
                    label: t('<a>').text('' + this.options.closeText).html()
                }), 'draggable' === e && (s = o.is(':data(ui-draggable)'), s && !i && o.draggable('destroy'), !s && i && this._makeDraggable()), 'position' === e && this._position(), 'resizable' === e && (n = o.is(':data(ui-resizable)'), n && !i && o.resizable('destroy'), n && 'string' == typeof i && o.resizable('option', 'handles', i), n || i === !1 || this._makeResizable()), 'title' === e && this._title(this.uiDialogTitlebar.find('.ui-dialog-title')))
            },
            _size: function () {
                var t,
                    e,
                    i,
                    s = this.options
                this.element.show().css({
                    width: 'auto',
                    minHeight: 0,
                    maxHeight: 'none',
                    height: 0
                }),
                s.minWidth > s.width && (s.width = s.minWidth),
                    t = this.uiDialog.css({
                        height: 'auto',
                        width: s.width
                    }).outerHeight(),
                    e = Math.max(0, s.minHeight - t),
                    i = 'number' == typeof s.maxHeight ? Math.max(0, s.maxHeight - t) : 'none',
                    'auto' === s.height ? this.element.css({
                        minHeight: e,
                        maxHeight: i,
                        height: 'auto'
                    }) : this.element.height(Math.max(0, s.height - t)),
                this.uiDialog.is(':data(ui-resizable)') && this.uiDialog.resizable('option', 'minHeight', this._minHeight())
            },
            _blockFrames: function () {
                this.iframeBlocks = this.document.find('iframe').map(function () {
                    var e = t(this)
                    return t('<div>').css({
                        position: 'absolute',
                        width: e.outerWidth(),
                        height: e.outerHeight()
                    }).appendTo(e.parent()).offset(e.offset()) [0]
                })
            },
            _unblockFrames: function () {
                this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
            },
            _allowInteraction: function (e) {
                return t(e.target).closest('.ui-dialog').length ? !0 : !!t(e.target).closest('.ui-datepicker').length
            },
            _createOverlay: function () {
                if (this.options.modal) {
                    var e = !0
                    this._delay(function () {
                        e = !1
                    }),
                    this.document.data('ui-dialog-overlays') || this._on(this.document, {
                        focusin: function (t) {
                            e || this._allowInteraction(t) || (t.preventDefault(), this._trackingInstances() [0]._focusTabbable())
                        }
                    }),
                        this.overlay = t('<div>').appendTo(this._appendTo()),
                        this._addClass(this.overlay, null, 'ui-widget-overlay ui-front'),
                        this._on(this.overlay, {
                            mousedown: '_keepFocus'
                        }),
                        this.document.data('ui-dialog-overlays', (this.document.data('ui-dialog-overlays') || 0) + 1)
                }
            },
            _destroyOverlay: function () {
                if (this.options.modal && this.overlay) {
                    var t = this.document.data('ui-dialog-overlays') - 1
                    t ? this.document.data('ui-dialog-overlays', t) : (this._off(this.document, 'focusin'), this.document.removeData('ui-dialog-overlays')),
                        this.overlay.remove(),
                        this.overlay = null
                }
            }
        }),
    t.uiBackCompat !== !1 && t.widget('ui.dialog', t.ui.dialog, {
        options: {
            dialogClass: ''
        },
        _createWrapper: function () {
            this._super(),
                this.uiDialog.addClass(this.options.dialogClass)
        },
        _setOption: function (t, e) {
            'dialogClass' === t && this.uiDialog.removeClass(this.options.dialogClass).addClass(e),
                this._superApply(arguments)
        }
    }),
        t.ui.dialog,
        t.widget('ui.progressbar', {
            version: '1.12.1',
            options: {
                classes: {
                    'ui-progressbar': 'ui-corner-all',
                    'ui-progressbar-value': 'ui-corner-left',
                    'ui-progressbar-complete': 'ui-corner-right'
                },
                max: 100,
                value: 0,
                change: null,
                complete: null
            },
            min: 0,
            _create: function () {
                this.oldValue = this.options.value = this._constrainedValue(),
                    this.element.attr({
                        role: 'progressbar',
                        'aria-valuemin': this.min
                    }),
                    this._addClass('ui-progressbar', 'ui-widget ui-widget-content'),
                    this.valueDiv = t('<div>').appendTo(this.element),
                    this._addClass(this.valueDiv, 'ui-progressbar-value', 'ui-widget-header'),
                    this._refreshValue()
            },
            _destroy: function () {
                this.element.removeAttr('role aria-valuemin aria-valuemax aria-valuenow'),
                    this.valueDiv.remove()
            },
            value: function (t) {
                return void 0 === t ? this.options.value : (this.options.value = this._constrainedValue(t), this._refreshValue(), void 0)
            },
            _constrainedValue: function (t) {
                return void 0 === t && (t = this.options.value),
                    this.indeterminate = t === !1,
                'number' != typeof t && (t = 0),
                    this.indeterminate ? !1 : Math.min(this.options.max, Math.max(this.min, t))
            },
            _setOptions: function (t) {
                var e = t.value
                delete t.value,
                    this._super(t),
                    this.options.value = this._constrainedValue(e),
                    this._refreshValue()
            },
            _setOption: function (t, e) {
                'max' === t && (e = Math.max(this.min, e)),
                    this._super(t, e)
            },
            _setOptionDisabled: function (t) {
                this._super(t),
                    this.element.attr('aria-disabled', t),
                    this._toggleClass(null, 'ui-state-disabled', !!t)
            },
            _percentage: function () {
                return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
            },
            _refreshValue: function () {
                var e = this.options.value,
                    i = this._percentage()
                this.valueDiv.toggle(this.indeterminate || e > this.min).width(i.toFixed(0) + '%'),
                    this._toggleClass(this.valueDiv, 'ui-progressbar-complete', null, e === this.options.max)._toggleClass('ui-progressbar-indeterminate', null, this.indeterminate),
                    this.indeterminate ? (this.element.removeAttr('aria-valuenow'), this.overlayDiv || (this.overlayDiv = t('<div>').appendTo(this.valueDiv), this._addClass(this.overlayDiv, 'ui-progressbar-overlay'))) : (this.element.attr({
                        'aria-valuemax': this.options.max,
                        'aria-valuenow': e
                    }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)),
                this.oldValue !== e && (this.oldValue = e, this._trigger('change')),
                e === this.options.max && this._trigger('complete')
            }
        }),
        t.widget('ui.selectmenu', [
            t.ui.formResetMixin,
            {
                version: '1.12.1',
                defaultElement: '<select>',
                options: {
                    appendTo: null,
                    classes: {
                        'ui-selectmenu-button-open': 'ui-corner-top',
                        'ui-selectmenu-button-closed': 'ui-corner-all'
                    },
                    disabled: null,
                    icons: {
                        button: 'ui-icon-triangle-1-s'
                    },
                    position: {
                        my: 'left top',
                        at: 'left bottom',
                        collision: 'none'
                    },
                    width: !1,
                    change: null,
                    close: null,
                    focus: null,
                    open: null,
                    select: null
                },
                _create: function () {
                    var e = this.element.uniqueId().attr('id')
                    this.ids = {
                        element: e,
                        button: e + '-button',
                        menu: e + '-menu'
                    },
                        this._drawButton(),
                        this._drawMenu(),
                        this._bindFormResetHandler(),
                        this._rendered = !1,
                        this.menuItems = t()
                },
                _drawButton: function () {
                    var e,
                        i = this,
                        s = this._parseOption(this.element.find('option:selected'), this.element[0].selectedIndex)
                    this.labels = this.element.labels().attr('for', this.ids.button),
                        this._on(this.labels, {
                            click: function (t) {
                                this.button.focus(),
                                    t.preventDefault()
                            }
                        }),
                        this.element.hide(),
                        this.button = t('<span>', {
                            tabindex: this.options.disabled ? -1 : 0,
                            id: this.ids.button,
                            role: 'combobox',
                            'aria-expanded': 'false',
                            'aria-autocomplete': 'list',
                            'aria-owns': this.ids.menu,
                            'aria-haspopup': 'true',
                            title: this.element.attr('title')
                        }).insertAfter(this.element),
                        this._addClass(this.button, 'ui-selectmenu-button ui-selectmenu-button-closed', 'ui-button ui-widget'),
                        e = t('<span>').appendTo(this.button),
                        this._addClass(e, 'ui-selectmenu-icon', 'ui-icon ' + this.options.icons.button),
                        this.buttonItem = this._renderButtonItem(s).appendTo(this.button),
                    this.options.width !== !1 && this._resizeButton(),
                        this._on(this.button, this._buttonEvents),
                        this.button.one('focusin', function () {
                            i._rendered || i._refreshMenu()
                        })
                },
                _drawMenu: function () {
                    var e = this
                    this.menu = t('<ul>', {
                        'aria-hidden': 'true',
                        'aria-labelledby': this.ids.button,
                        id: this.ids.menu
                    }),
                        this.menuWrap = t('<div>').append(this.menu),
                        this._addClass(this.menuWrap, 'ui-selectmenu-menu', 'ui-front'),
                        this.menuWrap.appendTo(this._appendTo()),
                        this.menuInstance = this.menu.menu({
                            classes: {
                                'ui-menu': 'ui-corner-bottom'
                            },
                            role: 'listbox',
                            select: function (t, i) {
                                t.preventDefault(),
                                    e._setSelection(),
                                    e._select(i.item.data('ui-selectmenu-item'), t)
                            },
                            focus: function (t, i) {
                                var s = i.item.data('ui-selectmenu-item')
                                null != e.focusIndex && s.index !== e.focusIndex && (e._trigger('focus', t, {
                                    item: s
                                }), e.isOpen || e._select(s, t)),
                                    e.focusIndex = s.index,
                                    e.button.attr('aria-activedescendant', e.menuItems.eq(s.index).attr('id'))
                            }
                        }).menu('instance'),
                        this.menuInstance._off(this.menu, 'mouseleave'),
                        this.menuInstance._closeOnDocumentClick = function () {
                            return !1
                        },
                        this.menuInstance._isDivider = function () {
                            return !1
                        }
                },
                refresh: function () {
                    this._refreshMenu(),
                        this.buttonItem.replaceWith(this.buttonItem = this._renderButtonItem(this._getSelectedItem().data('ui-selectmenu-item') || {})),
                    null === this.options.width && this._resizeButton()
                },
                _refreshMenu: function () {
                    var t,
                        e = this.element.find('option')
                    this.menu.empty(),
                        this._parseOptions(e),
                        this._renderMenu(this.menu, this.items),
                        this.menuInstance.refresh(),
                        this.menuItems = this.menu.find('li').not('.ui-selectmenu-optgroup').find('.ui-menu-item-wrapper'),
                        this._rendered = !0,
                    e.length && (t = this._getSelectedItem(), this.menuInstance.focus(null, t), this._setAria(t.data('ui-selectmenu-item')), this._setOption('disabled', this.element.prop('disabled')))
                },
                open: function (t) {
                    this.options.disabled || (this._rendered ? (this._removeClass(this.menu.find('.ui-state-active'), null, 'ui-state-active'), this.menuInstance.focus(null, this._getSelectedItem())) : this._refreshMenu(), this.menuItems.length && (this.isOpen = !0, this._toggleAttr(), this._resizeMenu(), this._position(), this._on(this.document, this._documentClick), this._trigger('open', t)))
                },
                _position: function () {
                    this.menuWrap.position(t.extend({
                        of: this.button
                    }, this.options.position))
                },
                close: function (t) {
                    this.isOpen && (this.isOpen = !1, this._toggleAttr(), this.range = null, this._off(this.document), this._trigger('close', t))
                },
                widget: function () {
                    return this.button
                },
                menuWidget: function () {
                    return this.menu
                },
                _renderButtonItem: function (e) {
                    var i = t('<span>')
                    return this._setText(i, e.label),
                        this._addClass(i, 'ui-selectmenu-text'),
                        i
                },
                _renderMenu: function (e, i) {
                    var s = this,
                        n = ''
                    t.each(i, function (i, o) {
                        var a
                        o.optgroup !== n && (a = t('<li>', {
                            text: o.optgroup
                        }), s._addClass(a, 'ui-selectmenu-optgroup', 'ui-menu-divider' + (o.element.parent('optgroup').prop('disabled') ? ' ui-state-disabled' : '')), a.appendTo(e), n = o.optgroup),
                            s._renderItemData(e, o)
                    })
                },
                _renderItemData: function (t, e) {
                    return this._renderItem(t, e).data('ui-selectmenu-item', e)
                },
                _renderItem: function (e, i) {
                    var s = t('<li>'),
                        n = t('<div>', {
                            title: i.element.attr('title')
                        })
                    return i.disabled && this._addClass(s, null, 'ui-state-disabled'),
                        this._setText(n, i.label),
                        s.append(n).appendTo(e)
                },
                _setText: function (t, e) {
                    e ? t.text(e) : t.html('&#160;')
                },
                _move: function (t, e) {
                    var i,
                        s,
                        n = '.ui-menu-item'
                    this.isOpen ? i = this.menuItems.eq(this.focusIndex).parent('li') : (i = this.menuItems.eq(this.element[0].selectedIndex).parent('li'), n += ':not(.ui-state-disabled)'),
                        s = 'first' === t || 'last' === t ? i['first' === t ? 'prevAll' : 'nextAll'](n).eq(-1) : i[t + 'All'](n).eq(0),
                    s.length && this.menuInstance.focus(e, s)
                },
                _getSelectedItem: function () {
                    return this.menuItems.eq(this.element[0].selectedIndex).parent('li')
                },
                _toggle: function (t) {
                    this[this.isOpen ? 'close' : 'open'](t)
                },
                _setSelection: function () {
                    var t
                    this.range && (window.getSelection ? (t = window.getSelection(), t.removeAllRanges(), t.addRange(this.range)) : this.range.select(), this.button.focus())
                },
                _documentClick: {
                    mousedown: function (e) {
                        this.isOpen && (t(e.target).closest('.ui-selectmenu-menu, #' + t.ui.escapeSelector(this.ids.button)).length || this.close(e))
                    }
                },
                _buttonEvents: {
                    mousedown: function () {
                        var t
                        window.getSelection ? (t = window.getSelection(), t.rangeCount && (this.range = t.getRangeAt(0))) : this.range = document.selection.createRange()
                    },
                    click: function (t) {
                        this._setSelection(),
                            this._toggle(t)
                    },
                    keydown: function (e) {
                        var i = !0
                        switch (e.keyCode) {
                            case t.ui.keyCode.TAB:
                            case t.ui.keyCode.ESCAPE:
                                this.close(e),
                                    i = !1
                                break
                            case t.ui.keyCode.ENTER:
                                this.isOpen && this._selectFocusedItem(e)
                                break
                            case t.ui.keyCode.UP:
                                e.altKey ? this._toggle(e) : this._move('prev', e)
                                break
                            case t.ui.keyCode.DOWN:
                                e.altKey ? this._toggle(e) : this._move('next', e)
                                break
                            case t.ui.keyCode.SPACE:
                                this.isOpen ? this._selectFocusedItem(e) : this._toggle(e)
                                break
                            case t.ui.keyCode.LEFT:
                                this._move('prev', e)
                                break
                            case t.ui.keyCode.RIGHT:
                                this._move('next', e)
                                break
                            case t.ui.keyCode.HOME:
                            case t.ui.keyCode.PAGE_UP:
                                this._move('first', e)
                                break
                            case t.ui.keyCode.END:
                            case t.ui.keyCode.PAGE_DOWN:
                                this._move('last', e)
                                break
                            default:
                                this.menu.trigger(e),
                                    i = !1
                        }
                        i && e.preventDefault()
                    }
                },
                _selectFocusedItem: function (t) {
                    var e = this.menuItems.eq(this.focusIndex).parent('li')
                    e.hasClass('ui-state-disabled') || this._select(e.data('ui-selectmenu-item'), t)
                },
                _select: function (t, e) {
                    var i = this.element[0].selectedIndex
                    this.element[0].selectedIndex = t.index,
                        this.buttonItem.replaceWith(this.buttonItem = this._renderButtonItem(t)),
                        this._setAria(t),
                        this._trigger('select', e, {
                            item: t
                        }),
                    t.index !== i && this._trigger('change', e, {
                        item: t
                    }),
                        this.close(e)
                },
                _setAria: function (t) {
                    var e = this.menuItems.eq(t.index).attr('id')
                    this.button.attr({
                        'aria-labelledby': e,
                        'aria-activedescendant': e
                    }),
                        this.menu.attr('aria-activedescendant', e)
                },
                _setOption: function (t, e) {
                    if ('icons' === t) {
                        var i = this.button.find('span.ui-icon')
                        this._removeClass(i, null, this.options.icons.button)._addClass(i, null, e.button)
                    }
                    this._super(t, e),
                    'appendTo' === t && this.menuWrap.appendTo(this._appendTo()),
                    'width' === t && this._resizeButton()
                },
                _setOptionDisabled: function (t) {
                    this._super(t),
                        this.menuInstance.option('disabled', t),
                        this.button.attr('aria-disabled', t),
                        this._toggleClass(this.button, null, 'ui-state-disabled', t),
                        this.element.prop('disabled', t),
                        t ? (this.button.attr('tabindex', -1), this.close()) : this.button.attr('tabindex', 0)
                },
                _appendTo: function () {
                    var e = this.options.appendTo
                    return e && (e = e.jquery || e.nodeType ? t(e) : this.document.find(e).eq(0)),
                    e && e[0] || (e = this.element.closest('.ui-front, dialog')),
                    e.length || (e = this.document[0].body),
                        e
                },
                _toggleAttr: function () {
                    this.button.attr('aria-expanded', this.isOpen),
                        this._removeClass(this.button, 'ui-selectmenu-button-' + (this.isOpen ? 'closed' : 'open'))._addClass(this.button, 'ui-selectmenu-button-' + (this.isOpen ? 'open' : 'closed'))._toggleClass(this.menuWrap, 'ui-selectmenu-open', null, this.isOpen),
                        this.menu.attr('aria-hidden', !this.isOpen)
                },
                _resizeButton: function () {
                    var t = this.options.width
                    return t === !1 ? (this.button.css('width', ''), void 0) : (null === t && (t = this.element.show().outerWidth(), this.element.hide()), this.button.outerWidth(t), void 0)
                },
                _resizeMenu: function () {
                    this.menu.outerWidth(Math.max(this.button.outerWidth(), this.menu.width('').outerWidth() + 1))
                },
                _getCreateOptions: function () {
                    var t = this._super()
                    return t.disabled = this.element.prop('disabled'),
                        t
                },
                _parseOptions: function (e) {
                    var i = this,
                        s = []
                    e.each(function (e, n) {
                        s.push(i._parseOption(t(n), e))
                    }),
                        this.items = s
                },
                _parseOption: function (t, e) {
                    var i = t.parent('optgroup')
                    return {
                        element: t,
                        index: e,
                        value: t.val(),
                        label: t.text(),
                        optgroup: i.attr('label') || '',
                        disabled: i.prop('disabled') || t.prop('disabled')
                    }
                },
                _destroy: function () {
                    this._unbindFormResetHandler(),
                        this.menuWrap.remove(),
                        this.button.remove(),
                        this.element.show(),
                        this.element.removeUniqueId(),
                        this.labels.attr('for', this.ids.element)
                }
            }
        ]), t.widget('ui.slider', t.ui.mouse, {
        version: '1.12.1',
        widgetEventPrefix: 'slide',
        options: {
            animate: !1,
            classes: {
                'ui-slider': 'ui-corner-all',
                'ui-slider-handle': 'ui-corner-all',
                'ui-slider-range': 'ui-corner-all ui-widget-header'
            },
            distance: 0,
            max: 100,
            min: 0,
            orientation: 'horizontal',
            range: !1,
            step: 1,
            value: 0,
            values: null,
            change: null,
            slide: null,
            start: null,
            stop: null
        },
        numPages: 5,
        _create: function () {
            this._keySliding = !1,
                this._mouseSliding = !1,
                this._animateOff = !0,
                this._handleIndex = null,
                this._detectOrientation(),
                this._mouseInit(),
                this._calculateNewMax(),
                this._addClass('ui-slider ui-slider-' + this.orientation, 'ui-widget ui-widget-content'),
                this._refresh(),
                this._animateOff = !1
        },
        _refresh: function () {
            this._createRange(),
                this._createHandles(),
                this._setupEvents(),
                this._refreshValue()
        },
        _createHandles: function () {
            var e,
                i,
                s = this.options,
                n = this.element.find('.ui-slider-handle'),
                o = '<span tabindex=\'0\'></span>',
                a = []
            for (i = s.values && s.values.length || 1, n.length > i && (n.slice(i).remove(), n = n.slice(0, i)), e = n.length; i > e; e++) {
                a.push(o)
            }
            this.handles = n.add(t(a.join('')).appendTo(this.element)),
                this._addClass(this.handles, 'ui-slider-handle', 'ui-state-default'),
                this.handle = this.handles.eq(0),
                this.handles.each(function (e) {
                    t(this).data('ui-slider-handle-index', e).attr('tabIndex', 0)
                })
        },
        _createRange: function () {
            var e = this.options
            e.range ? (e.range === !0 && (e.values ? e.values.length && 2 !== e.values.length ? e.values = [
                e.values[0],
                e.values[0]
            ] : t.isArray(e.values) && (e.values = e.values.slice(0)) : e.values = [
                this._valueMin(),
                this._valueMin()
            ]), this.range && this.range.length ? (this._removeClass(this.range, 'ui-slider-range-min ui-slider-range-max'), this.range.css({
                left: '',
                bottom: ''
            })) : (this.range = t('<div>').appendTo(this.element), this._addClass(this.range, 'ui-slider-range')), ('min' === e.range || 'max' === e.range) && this._addClass(this.range, 'ui-slider-range-' + e.range)) : (this.range && this.range.remove(), this.range = null)
        },
        _setupEvents: function () {
            this._off(this.handles),
                this._on(this.handles, this._handleEvents),
                this._hoverable(this.handles),
                this._focusable(this.handles)
        },
        _destroy: function () {
            this.handles.remove(),
            this.range && this.range.remove(),
                this._mouseDestroy()
        },
        _mouseCapture: function (e) {
            var i,
                s,
                n,
                o,
                a,
                r,
                h,
                l,
                c = this,
                u = this.options
            return u.disabled ? !1 : (this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            }, this.elementOffset = this.element.offset(), i = {
                x: e.pageX,
                y: e.pageY
            }, s = this._normValueFromMouse(i), n = this._valueMax() - this._valueMin() + 1, this.handles.each(function (e) {
                var i = Math.abs(s - c.values(e));
                (n > i || n === i && (e === c._lastChangedValue || c.values(e) === u.min)) && (n = i, o = t(this), a = e)
            }), r = this._start(e, a), r === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = a, this._addClass(o, null, 'ui-state-active'), o.trigger('focus'), h = o.offset(), l = !t(e.target).parents().addBack().is('.ui-slider-handle'), this._clickOffset = l ? {
                    left: 0,
                    top: 0
                }
                : {
                    left: e.pageX - h.left - o.width() / 2,
                    top: e.pageY - h.top - o.height() / 2 - (parseInt(o.css('borderTopWidth'), 10) || 0) - (parseInt(o.css('borderBottomWidth'), 10) || 0) + (parseInt(o.css('marginTop'), 10) || 0)
                }, this.handles.hasClass('ui-state-hover') || this._slide(e, a, s), this._animateOff = !0, !0))
        },
        _mouseStart: function () {
            return !0
        },
        _mouseDrag: function (t) {
            var e = {
                    x: t.pageX,
                    y: t.pageY
                },
                i = this._normValueFromMouse(e)
            return this._slide(t, this._handleIndex, i),
                !1
        },
        _mouseStop: function (t) {
            return this._removeClass(this.handles, null, 'ui-state-active'),
                this._mouseSliding = !1,
                this._stop(t, this._handleIndex),
                this._change(t, this._handleIndex),
                this._handleIndex = null,
                this._clickOffset = null,
                this._animateOff = !1,
                !1
        },
        _detectOrientation: function () {
            this.orientation = 'vertical' === this.options.orientation ? 'vertical' : 'horizontal'
        },
        _normValueFromMouse: function (t) {
            var e,
                i,
                s,
                n,
                o
            return 'horizontal' === this.orientation ? (e = this.elementSize.width, i = t.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (e = this.elementSize.height, i = t.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)),
                s = i / e,
            s > 1 && (s = 1),
            0 > s && (s = 0),
            'vertical' === this.orientation && (s = 1 - s),
                n = this._valueMax() - this._valueMin(),
                o = this._valueMin() + s * n,
                this._trimAlignValue(o)
        },
        _uiHash: function (t, e, i) {
            var s = {
                handle: this.handles[t],
                handleIndex: t,
                value: void 0 !== e ? e : this.value()
            }
            return this._hasMultipleValues() && (s.value = void 0 !== e ? e : this.values(t), s.values = i || this.values()),
                s
        },
        _hasMultipleValues: function () {
            return this.options.values && this.options.values.length
        },
        _start: function (t, e) {
            return this._trigger('start', t, this._uiHash(e))
        },
        _slide: function (t, e, i) {
            var s,
                n,
                o = this.value(),
                a = this.values()
            this._hasMultipleValues() && (n = this.values(e ? 0 : 1), o = this.values(e), 2 === this.options.values.length && this.options.range === !0 && (i = 0 === e ? Math.min(n, i) : Math.max(n, i)), a[e] = i),
            i !== o && (s = this._trigger('slide', t, this._uiHash(e, i, a)), s !== !1 && (this._hasMultipleValues() ? this.values(e, i) : this.value(i)))
        },
        _stop: function (t, e) {
            this._trigger('stop', t, this._uiHash(e))
        },
        _change: function (t, e) {
            this._keySliding || this._mouseSliding || (this._lastChangedValue = e, this._trigger('change', t, this._uiHash(e)))
        },
        value: function (t) {
            return arguments.length ? (this.options.value = this._trimAlignValue(t), this._refreshValue(), this._change(null, 0), void 0) : this._value()
        },
        values: function (e, i) {
            var s,
                n,
                o
            if (arguments.length > 1) {
                return this.options.values[e] = this._trimAlignValue(i),
                    this._refreshValue(),
                    this._change(null, e),
                    void 0
            }
            if (!arguments.length) {
                return this._values()
            }
            if (!t.isArray(arguments[0])) {
                return this._hasMultipleValues() ? this._values(e) : this.value()
            }
            for (s = this.options.values, n = arguments[0], o = 0; s.length > o; o += 1) {
                s[o] = this._trimAlignValue(n[o]),
                    this._change(null, o)
            }
            this._refreshValue()
        },
        _setOption: function (e, i) {
            var s,
                n = 0
            switch ('range' === e && this.options.range === !0 && ('min' === i ? (this.options.value = this._values(0), this.options.values = null) : 'max' === i && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), t.isArray(this.options.values) && (n = this.options.values.length), this._super(e, i), e) {
                case 'orientation':
                    this._detectOrientation(),
                        this._removeClass('ui-slider-horizontal ui-slider-vertical')._addClass('ui-slider-' + this.orientation),
                        this._refreshValue(),
                    this.options.range && this._refreshRange(i),
                        this.handles.css('horizontal' === i ? 'bottom' : 'left', '')
                    break
                case 'value':
                    this._animateOff = !0,
                        this._refreshValue(),
                        this._change(null, 0),
                        this._animateOff = !1
                    break
                case 'values':
                    for (this._animateOff = !0, this._refreshValue(), s = n - 1; s >= 0; s--) {
                        this._change(null, s)
                    }
                    this._animateOff = !1
                    break
                case 'step':
                case 'min':
                case 'max':
                    this._animateOff = !0,
                        this._calculateNewMax(),
                        this._refreshValue(),
                        this._animateOff = !1
                    break
                case 'range':
                    this._animateOff = !0,
                        this._refresh(),
                        this._animateOff = !1
            }
        },
        _setOptionDisabled: function (t) {
            this._super(t),
                this._toggleClass(null, 'ui-state-disabled', !!t)
        },
        _value: function () {
            var t = this.options.value
            return t = this._trimAlignValue(t)
        },
        _values: function (t) {
            var e,
                i,
                s
            if (arguments.length) {
                return e = this.options.values[t],
                    e = this._trimAlignValue(e)
            }
            if (this._hasMultipleValues()) {
                for (i = this.options.values.slice(), s = 0; i.length > s; s += 1) {
                    i[s] = this._trimAlignValue(i[s])
                }
                return i
            }
            return []
        },
        _trimAlignValue: function (t) {
            if (this._valueMin() >= t) {
                return this._valueMin()
            }
            if (t >= this._valueMax()) {
                return this._valueMax()
            }
            var e = this.options.step > 0 ? this.options.step : 1,
                i = (t - this._valueMin()) % e,
                s = t - i
            return 2 * Math.abs(i) >= e && (s += i > 0 ? e : -e),
                parseFloat(s.toFixed(5))
        },
        _calculateNewMax: function () {
            var t = this.options.max,
                e = this._valueMin(),
                i = this.options.step,
                s = Math.round((t - e) / i) * i
            t = s + e,
            t > this.options.max && (t -= i),
                this.max = parseFloat(t.toFixed(this._precision()))
        },
        _precision: function () {
            var t = this._precisionOf(this.options.step)
            return null !== this.options.min && (t = Math.max(t, this._precisionOf(this.options.min))),
                t
        },
        _precisionOf: function (t) {
            var e = '' + t,
                i = e.indexOf('.')
            return -1 === i ? 0 : e.length - i - 1
        },
        _valueMin: function () {
            return this.options.min
        },
        _valueMax: function () {
            return this.max
        },
        _refreshRange: function (t) {
            'vertical' === t && this.range.css({
                width: '',
                left: ''
            }),
            'horizontal' === t && this.range.css({
                height: '',
                bottom: ''
            })
        },
        _refreshValue: function () {
            var e,
                i,
                s,
                n,
                o,
                a = this.options.range,
                r = this.options,
                h = this,
                l = this._animateOff ? !1 : r.animate,
                c = {}
            this._hasMultipleValues() ? this.handles.each(function (s) {
                i = 100 * ((h.values(s) - h._valueMin()) / (h._valueMax() - h._valueMin())),
                    c['horizontal' === h.orientation ? 'left' : 'bottom'] = i + '%',
                    t(this).stop(1, 1) [l ? 'animate' : 'css'](c, r.animate),
                h.options.range === !0 && ('horizontal' === h.orientation ? (0 === s && h.range.stop(1, 1) [l ? 'animate' : 'css']({
                    left: i + '%'
                }, r.animate), 1 === s && h.range[l ? 'animate' : 'css']({
                    width: i - e + '%'
                }, {
                    queue: !1,
                    duration: r.animate
                })) : (0 === s && h.range.stop(1, 1) [l ? 'animate' : 'css']({
                    bottom: i + '%'
                }, r.animate), 1 === s && h.range[l ? 'animate' : 'css']({
                    height: i - e + '%'
                }, {
                    queue: !1,
                    duration: r.animate
                }))),
                    e = i
            }) : (s = this.value(), n = this._valueMin(), o = this._valueMax(), i = o !== n ? 100 * ((s - n) / (o - n)) : 0, c['horizontal' === this.orientation ? 'left' : 'bottom'] = i + '%', this.handle.stop(1, 1) [l ? 'animate' : 'css'](c, r.animate), 'min' === a && 'horizontal' === this.orientation && this.range.stop(1, 1) [l ? 'animate' : 'css']({
                width: i + '%'
            }, r.animate), 'max' === a && 'horizontal' === this.orientation && this.range.stop(1, 1) [l ? 'animate' : 'css']({
                width: 100 - i + '%'
            }, r.animate), 'min' === a && 'vertical' === this.orientation && this.range.stop(1, 1) [l ? 'animate' : 'css']({
                height: i + '%'
            }, r.animate), 'max' === a && 'vertical' === this.orientation && this.range.stop(1, 1) [l ? 'animate' : 'css']({
                height: 100 - i + '%'
            }, r.animate))
        },
        _handleEvents: {
            keydown: function (e) {
                var i,
                    s,
                    n,
                    o,
                    a = t(e.target).data('ui-slider-handle-index')
                switch (e.keyCode) {
                    case t.ui.keyCode.HOME:
                    case t.ui.keyCode.END:
                    case t.ui.keyCode.PAGE_UP:
                    case t.ui.keyCode.PAGE_DOWN:
                    case t.ui.keyCode.UP:
                    case t.ui.keyCode.RIGHT:
                    case t.ui.keyCode.DOWN:
                    case t.ui.keyCode.LEFT:
                        if (e.preventDefault(), !this._keySliding && (this._keySliding = !0, this._addClass(t(e.target), null, 'ui-state-active'), i = this._start(e, a), i === !1)) {
                            return
                        }
                }
                switch (o = this.options.step, s = n = this._hasMultipleValues() ? this.values(a) : this.value(), e.keyCode) {
                    case t.ui.keyCode.HOME:
                        n = this._valueMin()
                        break
                    case t.ui.keyCode.END:
                        n = this._valueMax()
                        break
                    case t.ui.keyCode.PAGE_UP:
                        n = this._trimAlignValue(s + (this._valueMax() - this._valueMin()) / this.numPages)
                        break
                    case t.ui.keyCode.PAGE_DOWN:
                        n = this._trimAlignValue(s - (this._valueMax() - this._valueMin()) / this.numPages)
                        break
                    case t.ui.keyCode.UP:
                    case t.ui.keyCode.RIGHT:
                        if (s === this._valueMax()) {
                            return
                        }
                        n = this._trimAlignValue(s + o)
                        break
                    case t.ui.keyCode.DOWN:
                    case t.ui.keyCode.LEFT:
                        if (s === this._valueMin()) {
                            return
                        }
                        n = this._trimAlignValue(s - o)
                }
                this._slide(e, a, n)
            },
            keyup: function (e) {
                var i = t(e.target).data('ui-slider-handle-index')
                this._keySliding && (this._keySliding = !1, this._stop(e, i), this._change(e, i), this._removeClass(t(e.target), null, 'ui-state-active'))
            }
        }
    }),
        t.widget('ui.spinner', {
            version: '1.12.1',
            defaultElement: '<input>',
            widgetEventPrefix: 'spin',
            options: {
                classes: {
                    'ui-spinner': 'ui-corner-all',
                    'ui-spinner-down': 'ui-corner-br',
                    'ui-spinner-up': 'ui-corner-tr'
                },
                culture: null,
                icons: {
                    down: 'ui-icon-triangle-1-s',
                    up: 'ui-icon-triangle-1-n'
                },
                incremental: !0,
                max: null,
                min: null,
                numberFormat: null,
                page: 10,
                step: 1,
                change: null,
                spin: null,
                start: null,
                stop: null
            },
            _create: function () {
                this._setOption('max', this.options.max),
                    this._setOption('min', this.options.min),
                    this._setOption('step', this.options.step),
                '' !== this.value() && this._value(this.element.val(), !0),
                    this._draw(),
                    this._on(this._events),
                    this._refresh(),
                    this._on(this.window, {
                        beforeunload: function () {
                            this.element.removeAttr('autocomplete')
                        }
                    })
            },
            _getCreateOptions: function () {
                var e = this._super(),
                    i = this.element
                return t.each(['min',
                    'max',
                    'step'], function (t, s) {
                    var n = i.attr(s)
                    null != n && n.length && (e[s] = n)
                }),
                    e
            },
            _events: {
                keydown: function (t) {
                    this._start(t) && this._keydown(t) && t.preventDefault()
                },
                keyup: '_stop',
                focus: function () {
                    this.previous = this.element.val()
                },
                blur: function (t) {
                    return this.cancelBlur ? (delete this.cancelBlur, void 0) : (this._stop(), this._refresh(), this.previous !== this.element.val() && this._trigger('change', t), void 0)
                },
                mousewheel: function (t, e) {
                    if (e) {
                        if (!this.spinning && !this._start(t)) {
                            return !1
                        }
                        this._spin((e > 0 ? 1 : -1) * this.options.step, t),
                            clearTimeout(this.mousewheelTimer),
                            this.mousewheelTimer = this._delay(function () {
                                this.spinning && this._stop(t)
                            }, 100),
                            t.preventDefault()
                    }
                },
                'mousedown .ui-spinner-button': function (e) {
                    function i() {
                        var e = this.element[0] === t.ui.safeActiveElement(this.document[0])
                        e || (this.element.trigger('focus'), this.previous = s, this._delay(function () {
                            this.previous = s
                        }))
                    }

                    var s
                    s = this.element[0] === t.ui.safeActiveElement(this.document[0]) ? this.previous : this.element.val(),
                        e.preventDefault(),
                        i.call(this),
                        this.cancelBlur = !0,
                        this._delay(function () {
                            delete this.cancelBlur,
                                i.call(this)
                        }),
                    this._start(e) !== !1 && this._repeat(null, t(e.currentTarget).hasClass('ui-spinner-up') ? 1 : -1, e)
                },
                'mouseup .ui-spinner-button': '_stop',
                'mouseenter .ui-spinner-button': function (e) {
                    return t(e.currentTarget).hasClass('ui-state-active') ? this._start(e) === !1 ? !1 : (this._repeat(null, t(e.currentTarget).hasClass('ui-spinner-up') ? 1 : -1, e), void 0) : void 0
                },
                'mouseleave .ui-spinner-button': '_stop'
            },
            _enhance: function () {
                this.uiSpinner = this.element.attr('autocomplete', 'off').wrap('<span>').parent().append('<a></a><a></a>')
            },
            _draw: function () {
                this._enhance(),
                    this._addClass(this.uiSpinner, 'ui-spinner', 'ui-widget ui-widget-content'),
                    this._addClass('ui-spinner-input'),
                    this.element.attr('role', 'spinbutton'),
                    this.buttons = this.uiSpinner.children('a').attr('tabIndex', -1).attr('aria-hidden', !0).button({
                        classes: {
                            'ui-button': ''
                        }
                    }),
                    this._removeClass(this.buttons, 'ui-corner-all'),
                    this._addClass(this.buttons.first(), 'ui-spinner-button ui-spinner-up'),
                    this._addClass(this.buttons.last(), 'ui-spinner-button ui-spinner-down'),
                    this.buttons.first().button({
                        icon: this.options.icons.up,
                        showLabel: !1
                    }),
                    this.buttons.last().button({
                        icon: this.options.icons.down,
                        showLabel: !1
                    }),
                this.buttons.height() > Math.ceil(0.5 * this.uiSpinner.height()) && this.uiSpinner.height() > 0 && this.uiSpinner.height(this.uiSpinner.height())
            },
            _keydown: function (e) {
                var i = this.options,
                    s = t.ui.keyCode
                switch (e.keyCode) {
                    case s.UP:
                        return this._repeat(null, 1, e),
                            !0
                    case s.DOWN:
                        return this._repeat(null, -1, e),
                            !0
                    case s.PAGE_UP:
                        return this._repeat(null, i.page, e),
                            !0
                    case s.PAGE_DOWN:
                        return this._repeat(null, -i.page, e),
                            !0
                }
                return !1
            },
            _start: function (t) {
                return this.spinning || this._trigger('start', t) !== !1 ? (this.counter || (this.counter = 1), this.spinning = !0, !0) : !1
            },
            _repeat: function (t, e, i) {
                t = t || 500,
                    clearTimeout(this.timer),
                    this.timer = this._delay(function () {
                        this._repeat(40, e, i)
                    }, t),
                    this._spin(e * this.options.step, i)
            },
            _spin: function (t, e) {
                var i = this.value() || 0
                this.counter || (this.counter = 1),
                    i = this._adjustValue(i + t * this._increment(this.counter)),
                this.spinning && this._trigger('spin', e, {
                    value: i
                }) === !1 || (this._value(i), this.counter++)
            },
            _increment: function (e) {
                var i = this.options.incremental
                return i ? t.isFunction(i) ? i(e) : Math.floor(e * e * e / 50000 - e * e / 500 + 17 * e / 200 + 1) : 1
            },
            _precision: function () {
                var t = this._precisionOf(this.options.step)
                return null !== this.options.min && (t = Math.max(t, this._precisionOf(this.options.min))),
                    t
            },
            _precisionOf: function (t) {
                var e = '' + t,
                    i = e.indexOf('.')
                return -1 === i ? 0 : e.length - i - 1
            },
            _adjustValue: function (t) {
                var e,
                    i,
                    s = this.options
                return e = null !== s.min ? s.min : 0,
                    i = t - e,
                    i = Math.round(i / s.step) * s.step,
                    t = e + i,
                    t = parseFloat(t.toFixed(this._precision())),
                    null !== s.max && t > s.max ? s.max : null !== s.min && s.min > t ? s.min : t
            },
            _stop: function (t) {
                this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), this.counter = 0, this.spinning = !1, this._trigger('stop', t))
            },
            _setOption: function (t, e) {
                var i,
                    s,
                    n
                return 'culture' === t || 'numberFormat' === t ? (i = this._parse(this.element.val()), this.options[t] = e, this.element.val(this._format(i)), void 0) : (('max' === t || 'min' === t || 'step' === t) && 'string' == typeof e && (e = this._parse(e)), 'icons' === t && (s = this.buttons.first().find('.ui-icon'), this._removeClass(s, null, this.options.icons.up), this._addClass(s, null, e.up), n = this.buttons.last().find('.ui-icon'), this._removeClass(n, null, this.options.icons.down), this._addClass(n, null, e.down)), this._super(t, e), void 0)
            },
            _setOptionDisabled: function (t) {
                this._super(t),
                    this._toggleClass(this.uiSpinner, null, 'ui-state-disabled', !!t),
                    this.element.prop('disabled', !!t),
                    this.buttons.button(t ? 'disable' : 'enable')
            },
            _setOptions: r(function (t) {
                this._super(t)
            }),
            _parse: function (t) {
                return 'string' == typeof t && '' !== t && (t = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(t, 10, this.options.culture) : +t),
                    '' === t || isNaN(t) ? null : t
            },
            _format: function (t) {
                return '' === t ? '' : window.Globalize && this.options.numberFormat ? Globalize.format(t, this.options.numberFormat, this.options.culture) : t
            },
            _refresh: function () {
                this.element.attr({
                    'aria-valuemin': this.options.min,
                    'aria-valuemax': this.options.max,
                    'aria-valuenow': this._parse(this.element.val())
                })
            },
            isValid: function () {
                var t = this.value()
                return null === t ? !1 : t === this._adjustValue(t)
            },
            _value: function (t, e) {
                var i
                '' !== t && (i = this._parse(t), null !== i && (e || (i = this._adjustValue(i)), t = this._format(i))),
                    this.element.val(t),
                    this._refresh()
            },
            _destroy: function () {
                this.element.prop('disabled', !1).removeAttr('autocomplete role aria-valuemin aria-valuemax aria-valuenow'),
                    this.uiSpinner.replaceWith(this.element)
            },
            stepUp: r(function (t) {
                this._stepUp(t)
            }),
            _stepUp: function (t) {
                this._start() && (this._spin((t || 1) * this.options.step), this._stop())
            },
            stepDown: r(function (t) {
                this._stepDown(t)
            }),
            _stepDown: function (t) {
                this._start() && (this._spin((t || 1) * -this.options.step), this._stop())
            },
            pageUp: r(function (t) {
                this._stepUp((t || 1) * this.options.page)
            }),
            pageDown: r(function (t) {
                this._stepDown((t || 1) * this.options.page)
            }),
            value: function (t) {
                return arguments.length ? (r(this._value).call(this, t), void 0) : this._parse(this.element.val())
            },
            widget: function () {
                return this.uiSpinner
            }
        }), t.uiBackCompat !== !1 && t.widget('ui.spinner', t.ui.spinner, {
        _enhance: function () {
            this.uiSpinner = this.element.attr('autocomplete', 'off').wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())
        },
        _uiSpinnerHtml: function () {
            return '<span>'
        },
        _buttonHtml: function () {
            return '<a></a><a></a>'
        }
    }), t.ui.spinner, t.widget('ui.tabs', {
        version: '1.12.1',
        delay: 300,
        options: {
            active: null,
            classes: {
                'ui-tabs': 'ui-corner-all',
                'ui-tabs-nav': 'ui-corner-all',
                'ui-tabs-panel': 'ui-corner-bottom',
                'ui-tabs-tab': 'ui-corner-top'
            },
            collapsible: !1,
            event: 'click',
            heightStyle: 'content',
            hide: null,
            show: null,
            activate: null,
            beforeActivate: null,
            beforeLoad: null,
            load: null
        },
        _isLocal: function () {
            var t = /#.*$/
            return function (e) {
                var i,
                    s
                i = e.href.replace(t, ''),
                    s = location.href.replace(t, '')
                try {
                    i = decodeURIComponent(i)
                } catch (n) {
                }
                try {
                    s = decodeURIComponent(s)
                } catch (n) {
                }
                return e.hash.length > 1 && i === s
            }
        }(),
        _create: function () {
            var e = this,
                i = this.options
            this.running = !1,
                this._addClass('ui-tabs', 'ui-widget ui-widget-content'),
                this._toggleClass('ui-tabs-collapsible', null, i.collapsible),
                this._processTabs(),
                i.active = this._initialActive(),
            t.isArray(i.disabled) && (i.disabled = t.unique(i.disabled.concat(t.map(this.tabs.filter('.ui-state-disabled'), function (t) {
                return e.tabs.index(t)
            }))).sort()),
                this.active = this.options.active !== !1 && this.anchors.length ? this._findActive(i.active) : t(),
                this._refresh(),
            this.active.length && this.load(i.active)
        },
        _initialActive: function () {
            var e = this.options.active,
                i = this.options.collapsible,
                s = location.hash.substring(1)
            return null === e && (s && this.tabs.each(function (i, n) {
                return t(n).attr('aria-controls') === s ? (e = i, !1) : void 0
            }), null === e && (e = this.tabs.index(this.tabs.filter('.ui-tabs-active'))), (null === e || -1 === e) && (e = this.tabs.length ? 0 : !1)),
            e !== !1 && (e = this.tabs.index(this.tabs.eq(e)), -1 === e && (e = i ? !1 : 0)),
            !i && e === !1 && this.anchors.length && (e = 0),
                e
        },
        _getCreateEventData: function () {
            return {
                tab: this.active,
                panel: this.active.length ? this._getPanelForTab(this.active) : t()
            }
        },
        _tabKeydown: function (e) {
            var i = t(t.ui.safeActiveElement(this.document[0])).closest('li'),
                s = this.tabs.index(i),
                n = !0
            if (!this._handlePageNav(e)) {
                switch (e.keyCode) {
                    case t.ui.keyCode.RIGHT:
                    case t.ui.keyCode.DOWN:
                        s++
                        break
                    case t.ui.keyCode.UP:
                    case t.ui.keyCode.LEFT:
                        n = !1,
                            s--
                        break
                    case t.ui.keyCode.END:
                        s = this.anchors.length - 1
                        break
                    case t.ui.keyCode.HOME:
                        s = 0
                        break
                    case t.ui.keyCode.SPACE:
                        return e.preventDefault(),
                            clearTimeout(this.activating),
                            this._activate(s),
                            void 0
                    case t.ui.keyCode.ENTER:
                        return e.preventDefault(),
                            clearTimeout(this.activating),
                            this._activate(s === this.options.active ? !1 : s),
                            void 0
                    default:
                        return
                }
                e.preventDefault(),
                    clearTimeout(this.activating),
                    s = this._focusNextTab(s, n),
                e.ctrlKey || e.metaKey || (i.attr('aria-selected', 'false'), this.tabs.eq(s).attr('aria-selected', 'true'), this.activating = this._delay(function () {
                    this.option('active', s)
                }, this.delay))
            }
        },
        _panelKeydown: function (e) {
            this._handlePageNav(e) || e.ctrlKey && e.keyCode === t.ui.keyCode.UP && (e.preventDefault(), this.active.trigger('focus'))
        },
        _handlePageNav: function (e) {
            return e.altKey && e.keyCode === t.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : e.altKey && e.keyCode === t.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : void 0
        },
        _findNextTab: function (e, i) {
            function s() {
                return e > n && (e = 0),
                0 > e && (e = n),
                    e
            }

            for (var n = this.tabs.length - 1; -1 !== t.inArray(s(), this.options.disabled);) {
                e = i ? e + 1 : e - 1
            }
            return e
        },
        _focusNextTab: function (t, e) {
            return t = this._findNextTab(t, e),
                this.tabs.eq(t).trigger('focus'),
                t
        },
        _setOption: function (t, e) {
            return 'active' === t ? (this._activate(e), void 0) : (this._super(t, e), 'collapsible' === t && (this._toggleClass('ui-tabs-collapsible', null, e), e || this.options.active !== !1 || this._activate(0)), 'event' === t && this._setupEvents(e), 'heightStyle' === t && this._setupHeightStyle(e), void 0)
        },
        _sanitizeSelector: function (t) {
            return t ? t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, '\\$&') : ''
        },
        refresh: function () {
            var e = this.options,
                i = this.tablist.children(':has(a[href])')
            e.disabled = t.map(i.filter('.ui-state-disabled'), function (t) {
                return i.index(t)
            }),
                this._processTabs(),
                e.active !== !1 && this.anchors.length ? this.active.length && !t.contains(this.tablist[0], this.active[0]) ? this.tabs.length === e.disabled.length ? (e.active = !1, this.active = t()) : this._activate(this._findNextTab(Math.max(0, e.active - 1), !1)) : e.active = this.tabs.index(this.active) : (e.active = !1, this.active = t()),
                this._refresh()
        },
        _refresh: function () {
            this._setOptionDisabled(this.options.disabled),
                this._setupEvents(this.options.event),
                this._setupHeightStyle(this.options.heightStyle),
                this.tabs.not(this.active).attr({
                    'aria-selected': 'false',
                    'aria-expanded': 'false',
                    tabIndex: -1
                }),
                this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                    'aria-hidden': 'true'
                }),
                this.active.length ? (this.active.attr({
                    'aria-selected': 'true',
                    'aria-expanded': 'true',
                    tabIndex: 0
                }), this._addClass(this.active, 'ui-tabs-active', 'ui-state-active'), this._getPanelForTab(this.active).show().attr({
                    'aria-hidden': 'false'
                })) : this.tabs.eq(0).attr('tabIndex', 0)
        },
        _processTabs: function () {
            var e = this,
                i = this.tabs,
                s = this.anchors,
                n = this.panels
            this.tablist = this._getList().attr('role', 'tablist'),
                this._addClass(this.tablist, 'ui-tabs-nav', 'ui-helper-reset ui-helper-clearfix ui-widget-header'),
                this.tablist.on('mousedown' + this.eventNamespace, '> li', function (e) {
                    t(this).is('.ui-state-disabled') && e.preventDefault()
                }).on('focus' + this.eventNamespace, '.ui-tabs-anchor', function () {
                    t(this).closest('li').is('.ui-state-disabled') && this.blur()
                }),
                this.tabs = this.tablist.find('> li:has(a[href])').attr({
                    role: 'tab',
                    tabIndex: -1
                }),
                this._addClass(this.tabs, 'ui-tabs-tab', 'ui-state-default'),
                this.anchors = this.tabs.map(function () {
                    return t('a', this) [0]
                }).attr({
                    role: 'presentation',
                    tabIndex: -1
                }),
                this._addClass(this.anchors, 'ui-tabs-anchor'),
                this.panels = t(),
                this.anchors.each(function (i, s) {
                    var n,
                        o,
                        a,
                        r = t(s).uniqueId().attr('id'),
                        h = t(s).closest('li'),
                        l = h.attr('aria-controls')
                    e._isLocal(s) ? (n = s.hash, a = n.substring(1), o = e.element.find(e._sanitizeSelector(n))) : (a = h.attr('aria-controls') || t({}).uniqueId() [0].id, n = '#' + a, o = e.element.find(n), o.length || (o = e._createPanel(a), o.insertAfter(e.panels[i - 1] || e.tablist)), o.attr('aria-live', 'polite')),
                    o.length && (e.panels = e.panels.add(o)),
                    l && h.data('ui-tabs-aria-controls', l),
                        h.attr({
                            'aria-controls': a,
                            'aria-labelledby': r
                        }),
                        o.attr('aria-labelledby', r)
                }),
                this.panels.attr('role', 'tabpanel'),
                this._addClass(this.panels, 'ui-tabs-panel', 'ui-widget-content'),
            i && (this._off(i.not(this.tabs)), this._off(s.not(this.anchors)), this._off(n.not(this.panels)))
        },
        _getList: function () {
            return this.tablist || this.element.find('ol, ul').eq(0)
        },
        _createPanel: function (e) {
            return t('<div>').attr('id', e).data('ui-tabs-destroy', !0)
        },
        _setOptionDisabled: function (e) {
            var i,
                s,
                n
            for (t.isArray(e) && (e.length ? e.length === this.anchors.length && (e = !0) : e = !1), n = 0; s = this.tabs[n]; n++) {
                i = t(s),
                    e === !0 || -1 !== t.inArray(n, e) ? (i.attr('aria-disabled', 'true'), this._addClass(i, null, 'ui-state-disabled')) : (i.removeAttr('aria-disabled'), this._removeClass(i, null, 'ui-state-disabled'))
            }
            this.options.disabled = e,
                this._toggleClass(this.widget(), this.widgetFullName + '-disabled', null, e === !0)
        },
        _setupEvents: function (e) {
            var i = {}
            e && t.each(e.split(' '), function (t, e) {
                i[e] = '_eventHandler'
            }),
                this._off(this.anchors.add(this.tabs).add(this.panels)),
                this._on(!0, this.anchors, {
                    click: function (t) {
                        t.preventDefault()
                    }
                }),
                this._on(this.anchors, i),
                this._on(this.tabs, {
                    keydown: '_tabKeydown'
                }),
                this._on(this.panels, {
                    keydown: '_panelKeydown'
                }),
                this._focusable(this.tabs),
                this._hoverable(this.tabs)
        },
        _setupHeightStyle: function (e) {
            var i,
                s = this.element.parent()
            'fill' === e ? (i = s.height(), i -= this.element.outerHeight() - this.element.height(), this.element.siblings(':visible').each(function () {
                var e = t(this),
                    s = e.css('position')
                'absolute' !== s && 'fixed' !== s && (i -= e.outerHeight(!0))
            }), this.element.children().not(this.panels).each(function () {
                i -= t(this).outerHeight(!0)
            }), this.panels.each(function () {
                t(this).height(Math.max(0, i - t(this).innerHeight() + t(this).height()))
            }).css('overflow', 'auto')) : 'auto' === e && (i = 0, this.panels.each(function () {
                i = Math.max(i, t(this).height('').height())
            }).height(i))
        },
        _eventHandler: function (e) {
            var i = this.options,
                s = this.active,
                n = t(e.currentTarget),
                o = n.closest('li'),
                a = o[0] === s[0],
                r = a && i.collapsible,
                h = r ? t() : this._getPanelForTab(o),
                l = s.length ? this._getPanelForTab(s) : t(),
                c = {
                    oldTab: s,
                    oldPanel: l,
                    newTab: r ? t() : o,
                    newPanel: h
                }
            e.preventDefault(),
            o.hasClass('ui-state-disabled') || o.hasClass('ui-tabs-loading') || this.running || a && !i.collapsible || this._trigger('beforeActivate', e, c) === !1 || (i.active = r ? !1 : this.tabs.index(o), this.active = a ? t() : o, this.xhr && this.xhr.abort(), l.length || h.length || t.error('jQuery UI Tabs: Mismatching fragment identifier.'), h.length && this.load(this.tabs.index(o), e), this._toggle(e, c))
        },
        _toggle: function (e, i) {
            function s() {
                o.running = !1,
                    o._trigger('activate', e, i)
            }

            function n() {
                o._addClass(i.newTab.closest('li'), 'ui-tabs-active', 'ui-state-active'),
                    a.length && o.options.show ? o._show(a, o.options.show, s) : (a.show(), s())
            }

            var o = this,
                a = i.newPanel,
                r = i.oldPanel
            this.running = !0,
                r.length && this.options.hide ? this._hide(r, this.options.hide, function () {
                    o._removeClass(i.oldTab.closest('li'), 'ui-tabs-active', 'ui-state-active'),
                        n()
                }) : (this._removeClass(i.oldTab.closest('li'), 'ui-tabs-active', 'ui-state-active'), r.hide(), n()),
                r.attr('aria-hidden', 'true'),
                i.oldTab.attr({
                    'aria-selected': 'false',
                    'aria-expanded': 'false'
                }),
                a.length && r.length ? i.oldTab.attr('tabIndex', -1) : a.length && this.tabs.filter(function () {
                    return 0 === t(this).attr('tabIndex')
                }).attr('tabIndex', -1),
                a.attr('aria-hidden', 'false'),
                i.newTab.attr({
                    'aria-selected': 'true',
                    'aria-expanded': 'true',
                    tabIndex: 0
                })
        },
        _activate: function (e) {
            var i,
                s = this._findActive(e)
            s[0] !== this.active[0] && (s.length || (s = this.active), i = s.find('.ui-tabs-anchor') [0], this._eventHandler({
                target: i,
                currentTarget: i,
                preventDefault: t.noop
            }))
        },
        _findActive: function (e) {
            return e === !1 ? t() : this.tabs.eq(e)
        },
        _getIndex: function (e) {
            return 'string' == typeof e && (e = this.anchors.index(this.anchors.filter('[href$=\'' + t.ui.escapeSelector(e) + '\']'))),
                e
        },
        _destroy: function () {
            this.xhr && this.xhr.abort(),
                this.tablist.removeAttr('role').off(this.eventNamespace),
                this.anchors.removeAttr('role tabIndex').removeUniqueId(),
                this.tabs.add(this.panels).each(function () {
                    t.data(this, 'ui-tabs-destroy') ? t(this).remove() : t(this).removeAttr('role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded')
                }),
                this.tabs.each(function () {
                    var e = t(this),
                        i = e.data('ui-tabs-aria-controls')
                    i ? e.attr('aria-controls', i).removeData('ui-tabs-aria-controls') : e.removeAttr('aria-controls')
                }),
                this.panels.show(),
            'content' !== this.options.heightStyle && this.panels.css('height', '')
        },
        enable: function (e) {
            var i = this.options.disabled
            i !== !1 && (void 0 === e ? i = !1 : (e = this._getIndex(e), i = t.isArray(i) ? t.map(i, function (t) {
                return t !== e ? t : null
            }) : t.map(this.tabs, function (t, i) {
                return i !== e ? i : null
            })), this._setOptionDisabled(i))
        },
        disable: function (e) {
            var i = this.options.disabled
            if (i !== !0) {
                if (void 0 === e) {
                    i = !0
                } else {
                    if (e = this._getIndex(e), -1 !== t.inArray(e, i)) {
                        return
                    }
                    i = t.isArray(i) ? t.merge([e], i).sort() : [
                        e
                    ]
                }
                this._setOptionDisabled(i)
            }
        },
        load: function (e, i) {
            e = this._getIndex(e)
            var s = this,
                n = this.tabs.eq(e),
                o = n.find('.ui-tabs-anchor'),
                a = this._getPanelForTab(n),
                r = {
                    tab: n,
                    panel: a
                },
                h = function (t, e) {
                    'abort' === e && s.panels.stop(!1, !0),
                        s._removeClass(n, 'ui-tabs-loading'),
                        a.removeAttr('aria-busy'),
                    t === s.xhr && delete s.xhr
                }
            this._isLocal(o[0]) || (this.xhr = t.ajax(this._ajaxSettings(o, i, r)), this.xhr && 'canceled' !== this.xhr.statusText && (this._addClass(n, 'ui-tabs-loading'), a.attr('aria-busy', 'true'), this.xhr.done(function (t, e, n) {
                setTimeout(function () {
                    a.html(t),
                        s._trigger('load', i, r),
                        h(n, e)
                }, 1)
            }).fail(function (t, e) {
                setTimeout(function () {
                    h(t, e)
                }, 1)
            })))
        },
        _ajaxSettings: function (e, i, s) {
            var n = this
            return {
                url: e.attr('href').replace(/#.*$/, ''),
                beforeSend: function (e, o) {
                    return n._trigger('beforeLoad', i, t.extend({
                        jqXHR: e,
                        ajaxSettings: o
                    }, s))
                }
            }
        },
        _getPanelForTab: function (e) {
            var i = t(e).attr('aria-controls')
            return this.element.find(this._sanitizeSelector('#' + i))
        }
    }), t.uiBackCompat !== !1 && t.widget('ui.tabs', t.ui.tabs, {
        _processTabs: function () {
            this._superApply(arguments),
                this._addClass(this.tabs, 'ui-tab')
        }
    }), t.ui.tabs, t.widget('ui.tooltip', {
        version: '1.12.1',
        options: {
            classes: {
                'ui-tooltip': 'ui-corner-all ui-widget-shadow'
            },
            content: function () {
                var e = t(this).attr('title') || ''
                return t('<a>').text(e).html()
            },
            hide: !0,
            items: '[title]:not([disabled])',
            position: {
                my: 'left top+15',
                at: 'left bottom',
                collision: 'flipfit flip'
            },
            show: !0,
            track: !1,
            close: null,
            open: null
        },
        _addDescribedBy: function (e, i) {
            var s = (e.attr('aria-describedby') || '').split(/\s+/)
            s.push(i),
                e.data('ui-tooltip-id', i).attr('aria-describedby', t.trim(s.join(' ')))
        },
        _removeDescribedBy: function (e) {
            var i = e.data('ui-tooltip-id'),
                s = (e.attr('aria-describedby') || '').split(/\s+/),
                n = t.inArray(i, s);
            -1 !== n && s.splice(n, 1),
                e.removeData('ui-tooltip-id'),
                s = t.trim(s.join(' ')),
                s ? e.attr('aria-describedby', s) : e.removeAttr('aria-describedby')
        },
        _create: function () {
            this._on({
                mouseover: 'open',
                focusin: 'open'
            }),
                this.tooltips = {},
                this.parents = {},
                this.liveRegion = t('<div>').attr({
                    role: 'log',
                    'aria-live': 'assertive',
                    'aria-relevant': 'additions'
                }).appendTo(this.document[0].body),
                this._addClass(this.liveRegion, null, 'ui-helper-hidden-accessible'),
                this.disabledTitles = t([])
        },
        _setOption: function (e, i) {
            var s = this
            this._super(e, i),
            'content' === e && t.each(this.tooltips, function (t, e) {
                s._updateContent(e.element)
            })
        },
        _setOptionDisabled: function (t) {
            this[t ? '_disable' : '_enable']()
        },
        _disable: function () {
            var e = this
            t.each(this.tooltips, function (i, s) {
                var n = t.Event('blur')
                n.target = n.currentTarget = s.element[0],
                    e.close(n, !0)
            }),
                this.disabledTitles = this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function () {
                    var e = t(this)
                    return e.is('[title]') ? e.data('ui-tooltip-title', e.attr('title')).removeAttr('title') : void 0
                }))
        },
        _enable: function () {
            this.disabledTitles.each(function () {
                var e = t(this)
                e.data('ui-tooltip-title') && e.attr('title', e.data('ui-tooltip-title'))
            }),
                this.disabledTitles = t([])
        },
        open: function (e) {
            var i = this,
                s = t(e ? e.target : this.element).closest(this.options.items)
            s.length && !s.data('ui-tooltip-id') && (s.attr('title') && s.data('ui-tooltip-title', s.attr('title')), s.data('ui-tooltip-open', !0), e && 'mouseover' === e.type && s.parents().each(function () {
                var e,
                    s = t(this)
                s.data('ui-tooltip-open') && (e = t.Event('blur'), e.target = e.currentTarget = this, i.close(e, !0)),
                s.attr('title') && (s.uniqueId(), i.parents[this.id] = {
                    element: this,
                    title: s.attr('title')
                }, s.attr('title', ''))
            }), this._registerCloseHandlers(e, s), this._updateContent(s, e))
        },
        _updateContent: function (t, e) {
            var i,
                s = this.options.content,
                n = this,
                o = e ? e.type : null
            return 'string' == typeof s || s.nodeType || s.jquery ? this._open(e, t, s) : (i = s.call(t[0], function (i) {
                n._delay(function () {
                    t.data('ui-tooltip-open') && (e && (e.type = o), this._open(e, t, i))
                })
            }), i && this._open(e, t, i), void 0)
        },
        _open: function (e, i, s) {
            function n(t) {
                l.of = t,
                a.is(':hidden') || a.position(l)
            }

            var o,
                a,
                r,
                h,
                l = t.extend({}, this.options.position)
            if (s) {
                if (o = this._find(i)) {
                    return o.tooltip.find('.ui-tooltip-content').html(s),
                        void 0
                }
                i.is('[title]') && (e && 'mouseover' === e.type ? i.attr('title', '') : i.removeAttr('title')),
                    o = this._tooltip(i),
                    a = o.tooltip,
                    this._addDescribedBy(i, a.attr('id')),
                    a.find('.ui-tooltip-content').html(s),
                    this.liveRegion.children().hide(),
                    h = t('<div>').html(a.find('.ui-tooltip-content').html()),
                    h.removeAttr('name').find('[name]').removeAttr('name'),
                    h.removeAttr('id').find('[id]').removeAttr('id'),
                    h.appendTo(this.liveRegion),
                    this.options.track && e && /^mouse/.test(e.type) ? (this._on(this.document, {
                        mousemove: n
                    }), n(e)) : a.position(t.extend({
                        of: i
                    }, this.options.position)),
                    a.hide(),
                    this._show(a, this.options.show),
                this.options.track && this.options.show && this.options.show.delay && (r = this.delayedShow = setInterval(function () {
                    a.is(':visible') && (n(l.of), clearInterval(r))
                }, t.fx.interval)),
                    this._trigger('open', e, {
                        tooltip: a
                    })
            }
        },
        _registerCloseHandlers: function (e, i) {
            var s = {
                keyup: function (e) {
                    if (e.keyCode === t.ui.keyCode.ESCAPE) {
                        var s = t.Event(e)
                        s.currentTarget = i[0],
                            this.close(s, !0)
                    }
                }
            }
            i[0] !== this.element[0] && (s.remove = function () {
                this._removeTooltip(this._find(i).tooltip)
            }),
            e && 'mouseover' !== e.type || (s.mouseleave = 'close'),
            e && 'focusin' !== e.type || (s.focusout = 'close'),
                this._on(!0, i, s)
        },
        close: function (e) {
            var i,
                s = this,
                n = t(e ? e.currentTarget : this.element),
                o = this._find(n)
            return o ? (i = o.tooltip, o.closing || (clearInterval(this.delayedShow), n.data('ui-tooltip-title') && !n.attr('title') && n.attr('title', n.data('ui-tooltip-title')), this._removeDescribedBy(n), o.hiding = !0, i.stop(!0), this._hide(i, this.options.hide, function () {
                s._removeTooltip(t(this))
            }), n.removeData('ui-tooltip-open'), this._off(n, 'mouseleave focusout keyup'), n[0] !== this.element[0] && this._off(n, 'remove'), this._off(this.document, 'mousemove'), e && 'mouseleave' === e.type && t.each(this.parents, function (e, i) {
                t(i.element).attr('title', i.title),
                    delete s.parents[e]
            }), o.closing = !0, this._trigger('close', e, {
                tooltip: i
            }), o.hiding || (o.closing = !1)), void 0) : (n.removeData('ui-tooltip-open'), void 0)
        },
        _tooltip: function (e) {
            var i = t('<div>').attr('role', 'tooltip'),
                s = t('<div>').appendTo(i),
                n = i.uniqueId().attr('id')
            return this._addClass(s, 'ui-tooltip-content'),
                this._addClass(i, 'ui-tooltip', 'ui-widget ui-widget-content'),
                i.appendTo(this._appendTo(e)),
                this.tooltips[n] = {
                    element: e,
                    tooltip: i
                }
        },
        _find: function (t) {
            var e = t.data('ui-tooltip-id')
            return e ? this.tooltips[e] : null
        },
        _removeTooltip: function (t) {
            t.remove(),
                delete this.tooltips[t.attr('id')]
        },
        _appendTo: function (t) {
            var e = t.closest('.ui-front, dialog')
            return e.length || (e = this.document[0].body),
                e
        },
        _destroy: function () {
            var e = this
            t.each(this.tooltips, function (i, s) {
                var n = t.Event('blur'),
                    o = s.element
                n.target = n.currentTarget = o[0],
                    e.close(n, !0),
                    t('#' + i).remove(),
                o.data('ui-tooltip-title') && (o.attr('title') || o.attr('title', o.data('ui-tooltip-title')), o.removeData('ui-tooltip-title'))
            }),
                this.liveRegion.remove()
        }
    }), t.uiBackCompat !== !1 && t.widget('ui.tooltip', t.ui.tooltip, {
        options: {
            tooltipClass: null
        },
        _tooltip: function () {
            var t = this._superApply(arguments)
            return this.options.tooltipClass && t.tooltip.addClass(this.options.tooltipClass),
                t
        }
    }), t.ui.tooltip
    var f = 'ui-effects-', g = 'ui-effects-style', m = 'ui-effects-animated', _ = t
    t.effects = {
        effect: {}
    }, function (t, e) {
        function i(t, e, i) {
            var s = u[e.type] || {}
            return null == t ? i || !e.def ? null : e.def : (t = s.floor ? ~~t : parseFloat(t), isNaN(t) ? e.def : s.mod ? (t + s.mod) % s.mod : 0 > t ? 0 : t > s.max ? s.max : t)
        }

        function s(i) {
            var s = l(),
                n = s._rgba = []
            return i = i.toLowerCase(),
                f(h, function (t, o) {
                    var a,
                        r = o.re.exec(i),
                        h = r && o.parse(r),
                        l = o.space || 'rgba'
                    return h ? (a = s[l](h), s[c[l].cache] = a[c[l].cache], n = s._rgba = a._rgba, !1) : e
                }),
                n.length ? ('0,0,0,0' === n.join() && t.extend(n, o.transparent), s) : o[i]
        }

        function n(t, e, i) {
            return i = (i + 1) % 1,
                1 > 6 * i ? t + 6 * (e - t) * i : 1 > 2 * i ? e : 2 > 3 * i ? t + 6 * (e - t) * (2 / 3 - i) : t
        }

        var o,
            a = 'backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor',
            r = /^([\-+])=\s*(\d+\.?\d*)/,
            h = [
                {
                    re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                    parse: function (t) {
                        return [t[1],
                            t[2],
                            t[3],
                            t[4]]
                    }
                },
                {
                    re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                    parse: function (t) {
                        return [2.55 * t[1],
                            2.55 * t[2],
                            2.55 * t[3],
                            t[4]]
                    }
                },
                {
                    re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
                    parse: function (t) {
                        return [parseInt(t[1], 16),
                            parseInt(t[2], 16),
                            parseInt(t[3], 16)]
                    }
                },
                {
                    re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
                    parse: function (t) {
                        return [parseInt(t[1] + t[1], 16),
                            parseInt(t[2] + t[2], 16),
                            parseInt(t[3] + t[3], 16)]
                    }
                },
                {
                    re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                    space: 'hsla',
                    parse: function (t) {
                        return [t[1],
                            t[2] / 100,
                            t[3] / 100,
                            t[4]]
                    }
                }
            ],
            l = t.Color = function (e, i, s, n) {
                return new t.Color.fn.parse(e, i, s, n)
            },
            c = {
                rgba: {
                    props: {
                        red: {
                            idx: 0,
                            type: 'byte'
                        },
                        green: {
                            idx: 1,
                            type: 'byte'
                        },
                        blue: {
                            idx: 2,
                            type: 'byte'
                        }
                    }
                },
                hsla: {
                    props: {
                        hue: {
                            idx: 0,
                            type: 'degrees'
                        },
                        saturation: {
                            idx: 1,
                            type: 'percent'
                        },
                        lightness: {
                            idx: 2,
                            type: 'percent'
                        }
                    }
                }
            },
            u = {
                'byte': {
                    floor: !0,
                    max: 255
                },
                percent: {
                    max: 1
                },
                degrees: {
                    mod: 360,
                    floor: !0
                }
            },
            d = l.support = {},
            p = t('<p>') [0],
            f = t.each
        p.style.cssText = 'background-color:rgba(1,1,1,.5)',
            d.rgba = p.style.backgroundColor.indexOf('rgba') > -1,
            f(c, function (t, e) {
                e.cache = '_' + t,
                    e.props.alpha = {
                        idx: 3,
                        type: 'percent',
                        def: 1
                    }
            }),
            l.fn = t.extend(l.prototype, {
                parse: function (n, a, r, h) {
                    if (n === e) {
                        return this._rgba = [
                            null,
                            null,
                            null,
                            null
                        ],
                            this
                    }
                    (n.jquery || n.nodeType) && (n = t(n).css(a), a = e)
                    var u = this,
                        d = t.type(n),
                        p = this._rgba = []
                    return a !== e && (n = [
                        n,
                        a,
                        r,
                        h
                    ], d = 'array'),
                        'string' === d ? this.parse(s(n) || o._default) : 'array' === d ? (f(c.rgba.props, function (t, e) {
                            p[e.idx] = i(n[e.idx], e)
                        }), this) : 'object' === d ? (n instanceof l ? f(c, function (t, e) {
                            n[e.cache] && (u[e.cache] = n[e.cache].slice())
                        }) : f(c, function (e, s) {
                            var o = s.cache
                            f(s.props, function (t, e) {
                                if (!u[o] && s.to) {
                                    if ('alpha' === t || null == n[t]) {
                                        return
                                    }
                                    u[o] = s.to(u._rgba)
                                }
                                u[o][e.idx] = i(n[t], e, !0)
                            }),
                            u[o] && 0 > t.inArray(null, u[o].slice(0, 3)) && (u[o][3] = 1, s.from && (u._rgba = s.from(u[o])))
                        }), this) : e
                },
                is: function (t) {
                    var i = l(t),
                        s = !0,
                        n = this
                    return f(c, function (t, o) {
                        var a,
                            r = i[o.cache]
                        return r && (a = n[o.cache] || o.to && o.to(n._rgba) || [], f(o.props, function (t, i) {
                            return null != r[i.idx] ? s = r[i.idx] === a[i.idx] : e
                        })),
                            s
                    }),
                        s
                },
                _space: function () {
                    var t = [],
                        e = this
                    return f(c, function (i, s) {
                        e[s.cache] && t.push(i)
                    }),
                        t.pop()
                },
                transition: function (t, e) {
                    var s = l(t),
                        n = s._space(),
                        o = c[n],
                        a = 0 === this.alpha() ? l('transparent') : this,
                        r = a[o.cache] || o.to(a._rgba),
                        h = r.slice()
                    return s = s[o.cache],
                        f(o.props, function (t, n) {
                            var o = n.idx,
                                a = r[o],
                                l = s[o],
                                c = u[n.type] || {}
                            null !== l && (null === a ? h[o] = l : (c.mod && (l - a > c.mod / 2 ? a += c.mod : a - l > c.mod / 2 && (a -= c.mod)), h[o] = i((l - a) * e + a, n)))
                        }),
                        this[n](h)
                },
                blend: function (e) {
                    if (1 === this._rgba[3]) {
                        return this
                    }
                    var i = this._rgba.slice(),
                        s = i.pop(),
                        n = l(e)._rgba
                    return l(t.map(i, function (t, e) {
                        return (1 - s) * n[e] + s * t
                    }))
                },
                toRgbaString: function () {
                    var e = 'rgba(',
                        i = t.map(this._rgba, function (t, e) {
                            return null == t ? e > 2 ? 1 : 0 : t
                        })
                    return 1 === i[3] && (i.pop(), e = 'rgb('),
                    e + i.join() + ')'
                },
                toHslaString: function () {
                    var e = 'hsla(',
                        i = t.map(this.hsla(), function (t, e) {
                            return null == t && (t = e > 2 ? 1 : 0),
                            e && 3 > e && (t = Math.round(100 * t) + '%'),
                                t
                        })
                    return 1 === i[3] && (i.pop(), e = 'hsl('),
                    e + i.join() + ')'
                },
                toHexString: function (e) {
                    var i = this._rgba.slice(),
                        s = i.pop()
                    return e && i.push(~~(255 * s)),
                    '#' + t.map(i, function (t) {
                        return t = (t || 0).toString(16),
                            1 === t.length ? '0' + t : t
                    }).join('')
                },
                toString: function () {
                    return 0 === this._rgba[3] ? 'transparent' : this.toRgbaString()
                }
            }),
            l.fn.parse.prototype = l.fn,
            c.hsla.to = function (t) {
                if (null == t[0] || null == t[1] || null == t[2]) {
                    return [null,
                        null,
                        null,
                        t[3]]
                }
                var e,
                    i,
                    s = t[0] / 255,
                    n = t[1] / 255,
                    o = t[2] / 255,
                    a = t[3],
                    r = Math.max(s, n, o),
                    h = Math.min(s, n, o),
                    l = r - h,
                    c = r + h,
                    u = 0.5 * c
                return e = h === r ? 0 : s === r ? 60 * (n - o) / l + 360 : n === r ? 60 * (o - s) / l + 120 : 60 * (s - n) / l + 240,
                    i = 0 === l ? 0 : 0.5 >= u ? l / c : l / (2 - c),
                    [
                        Math.round(e) % 360,
                        i,
                        u,
                        null == a ? 1 : a
                    ]
            },
            c.hsla.from = function (t) {
                if (null == t[0] || null == t[1] || null == t[2]) {
                    return [null,
                        null,
                        null,
                        t[3]]
                }
                var e = t[0] / 360,
                    i = t[1],
                    s = t[2],
                    o = t[3],
                    a = 0.5 >= s ? s * (1 + i) : s + i - s * i,
                    r = 2 * s - a
                return [Math.round(255 * n(r, a, e + 1 / 3)),
                    Math.round(255 * n(r, a, e)),
                    Math.round(255 * n(r, a, e - 1 / 3)),
                    o]
            },
            f(c, function (s, n) {
                var o = n.props,
                    a = n.cache,
                    h = n.to,
                    c = n.from
                l.fn[s] = function (s) {
                    if (h && !this[a] && (this[a] = h(this._rgba)), s === e) {
                        return this[a].slice()
                    }
                    var n,
                        r = t.type(s),
                        u = 'array' === r || 'object' === r ? s : arguments,
                        d = this[a].slice()
                    return f(o, function (t, e) {
                        var s = u['object' === r ? t : e.idx]
                        null == s && (s = d[e.idx]),
                            d[e.idx] = i(s, e)
                    }),
                        c ? (n = l(c(d)), n[a] = d, n) : l(d)
                },
                    f(o, function (e, i) {
                        l.fn[e] || (l.fn[e] = function (n) {
                            var o,
                                a = t.type(n),
                                h = 'alpha' === e ? this._hsla ? 'hsla' : 'rgba' : s,
                                l = this[h](),
                                c = l[i.idx]
                            return 'undefined' === a ? c : ('function' === a && (n = n.call(this, c), a = t.type(n)), null == n && i.empty ? this : ('string' === a && (o = r.exec(n), o && (n = c + parseFloat(o[2]) * ('+' === o[1] ? 1 : -1))), l[i.idx] = n, this[h](l)))
                        })
                    })
            }),
            l.hook = function (e) {
                var i = e.split(' ')
                f(i, function (e, i) {
                    t.cssHooks[i] = {
                        set: function (e, n) {
                            var o,
                                a,
                                r = ''
                            if ('transparent' !== n && ('string' !== t.type(n) || (o = s(n)))) {
                                if (n = l(o || n), !d.rgba && 1 !== n._rgba[3]) {
                                    for (a = 'backgroundColor' === i ? e.parentNode : e; ('' === r || 'transparent' === r) && a && a.style;) {
                                        try {
                                            r = t.css(a, 'backgroundColor'),
                                                a = a.parentNode
                                        } catch (h) {
                                        }
                                    }
                                    n = n.blend(r && 'transparent' !== r ? r : '_default')
                                }
                                n = n.toRgbaString()
                            }
                            try {
                                e.style[i] = n
                            } catch (h) {
                            }
                        }
                    },
                        t.fx.step[i] = function (e) {
                            e.colorInit || (e.start = l(e.elem, i), e.end = l(e.end), e.colorInit = !0),
                                t.cssHooks[i].set(e.elem, e.start.transition(e.end, e.pos))
                        }
                })
            },
            l.hook(a),
            t.cssHooks.borderColor = {
                expand: function (t) {
                    var e = {}
                    return f(['Top',
                        'Right',
                        'Bottom',
                        'Left'], function (i, s) {
                        e['border' + s + 'Color'] = t
                    }),
                        e
                }
            },
            o = t.Color.names = {
                aqua: '#00ffff',
                black: '#000000',
                blue: '#0000ff',
                fuchsia: '#ff00ff',
                gray: '#808080',
                green: '#008000',
                lime: '#00ff00',
                maroon: '#800000',
                navy: '#000080',
                olive: '#808000',
                purple: '#800080',
                red: '#ff0000',
                silver: '#c0c0c0',
                teal: '#008080',
                white: '#ffffff',
                yellow: '#ffff00',
                transparent: [
                    null,
                    null,
                    null,
                    0
                ],
                _default: '#ffffff'
            }
    }(_), function () {
        function e(e) {
            var i,
                s,
                n = e.ownerDocument.defaultView ? e.ownerDocument.defaultView.getComputedStyle(e, null) : e.currentStyle,
                o = {}
            if (n && n.length && n[0] && n[n[0]]) {
                for (s = n.length; s--;) {
                    i = n[s],
                    'string' == typeof n[i] && (o[t.camelCase(i)] = n[i])
                }
            } else {
                for (i in n) {
                    'string' == typeof n[i] && (o[i] = n[i])
                }
            }
            return o
        }

        function i(e, i) {
            var s,
                o,
                a = {}
            for (s in i) {
                o = i[s],
                e[s] !== o && (n[s] || (t.fx.step[s] || !isNaN(parseFloat(o))) && (a[s] = o))
            }
            return a
        }

        var s = [
                'add',
                'remove',
                'toggle'
            ],
            n = {
                border: 1,
                borderBottom: 1,
                borderColor: 1,
                borderLeft: 1,
                borderRight: 1,
                borderTop: 1,
                borderWidth: 1,
                margin: 1,
                padding: 1
            }
        t.each(['borderLeftStyle',
            'borderRightStyle',
            'borderBottomStyle',
            'borderTopStyle'], function (e, i) {
            t.fx.step[i] = function (t) {
                ('none' !== t.end && !t.setAttr || 1 === t.pos && !t.setAttr) && (_.style(t.elem, i, t.end), t.setAttr = !0)
            }
        }),
        t.fn.addBack || (t.fn.addBack = function (t) {
            return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
        }),
            t.effects.animateClass = function (n, o, a, r) {
                var h = t.speed(o, a, r)
                return this.queue(function () {
                    var o,
                        a = t(this),
                        r = a.attr('class') || '',
                        l = h.children ? a.find('*').addBack() : a
                    l = l.map(function () {
                        var i = t(this)
                        return {
                            el: i,
                            start: e(this)
                        }
                    }),
                        o = function () {
                            t.each(s, function (t, e) {
                                n[e] && a[e + 'Class'](n[e])
                            })
                        },
                        o(),
                        l = l.map(function () {
                            return this.end = e(this.el[0]),
                                this.diff = i(this.start, this.end),
                                this
                        }),
                        a.attr('class', r),
                        l = l.map(function () {
                            var e = this,
                                i = t.Deferred(),
                                s = t.extend({}, h, {
                                    queue: !1,
                                    complete: function () {
                                        i.resolve(e)
                                    }
                                })
                            return this.el.animate(this.diff, s),
                                i.promise()
                        }),
                        t.when.apply(t, l.get()).done(function () {
                            o(),
                                t.each(arguments, function () {
                                    var e = this.el
                                    t.each(this.diff, function (t) {
                                        e.css(t, '')
                                    })
                                }),
                                h.complete.call(a[0])
                        })
                })
            },
            t.fn.extend({
                addClass: function (e) {
                    return function (i, s, n, o) {
                        return s ? t.effects.animateClass.call(this, {
                            add: i
                        }, s, n, o) : e.apply(this, arguments)
                    }
                }(t.fn.addClass),
                removeClass: function (e) {
                    return function (i, s, n, o) {
                        return arguments.length > 1 ? t.effects.animateClass.call(this, {
                            remove: i
                        }, s, n, o) : e.apply(this, arguments)
                    }
                }(t.fn.removeClass),
                toggleClass: function (e) {
                    return function (i, s, n, o, a) {
                        return 'boolean' == typeof s || void 0 === s ? n ? t.effects.animateClass.call(this, s ? {
                                add: i
                            }
                            : {
                                remove: i
                            }, n, o, a) : e.apply(this, arguments) : t.effects.animateClass.call(this, {
                            toggle: i
                        }, s, n, o)
                    }
                }(t.fn.toggleClass),
                switchClass: function (e, i, s, n, o) {
                    return t.effects.animateClass.call(this, {
                        add: i,
                        remove: e
                    }, s, n, o)
                }
            })
    }(), function () {
        function e(e, i, s, n) {
            return t.isPlainObject(e) && (i = e, e = e.effect),
                e = {
                    effect: e
                },
            null == i && (i = {}),
            t.isFunction(i) && (n = i, s = null, i = {}),
            ('number' == typeof i || t.fx.speeds[i]) && (n = s, s = i, i = {}),
            t.isFunction(s) && (n = s, s = null),
            i && t.extend(e, i),
                s = s || i.duration,
                e.duration = t.fx.off ? 0 : 'number' == typeof s ? s : s in t.fx.speeds ? t.fx.speeds[s] : t.fx.speeds._default,
                e.complete = n || i.complete,
                e
        }

        function i(e) {
            return !e || 'number' == typeof e || t.fx.speeds[e] ? !0 : 'string' != typeof e || t.effects.effect[e] ? t.isFunction(e) ? !0 : 'object' != typeof e || e.effect ? !1 : !0 : !0
        }

        function s(t, e) {
            var i = e.outerWidth(),
                s = e.outerHeight(),
                n = /^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,
                o = n.exec(t) || [
                    '',
                    0,
                    i,
                    s,
                    0
                ]
            return {
                top: parseFloat(o[1]) || 0,
                right: 'auto' === o[2] ? i : parseFloat(o[2]),
                bottom: 'auto' === o[3] ? s : parseFloat(o[3]),
                left: parseFloat(o[4]) || 0
            }
        }

        t.expr && t.expr.filters && t.expr.filters.animated && (t.expr.filters.animated = function (e) {
            return function (i) {
                return !!t(i).data(m) || e(i)
            }
        }(t.expr.filters.animated)),
        t.uiBackCompat !== !1 && t.extend(t.effects, {
            save: function (t, e) {
                for (var i = 0, s = e.length; s > i; i++) {
                    null !== e[i] && t.data(f + e[i], t[0].style[e[i]])
                }
            },
            restore: function (t, e) {
                for (var i, s = 0, n = e.length; n > s; s++) {
                    null !== e[s] && (i = t.data(f + e[s]), t.css(e[s], i))
                }
            },
            setMode: function (t, e) {
                return 'toggle' === e && (e = t.is(':hidden') ? 'show' : 'hide'),
                    e
            },
            createWrapper: function (e) {
                if (e.parent().is('.ui-effects-wrapper')) {
                    return e.parent()
                }
                var i = {
                        width: e.outerWidth(!0),
                        height: e.outerHeight(!0),
                        'float': e.css('float')
                    },
                    s = t('<div></div>').addClass('ui-effects-wrapper').css({
                        fontSize: '100%',
                        background: 'transparent',
                        border: 'none',
                        margin: 0,
                        padding: 0
                    }),
                    n = {
                        width: e.width(),
                        height: e.height()
                    },
                    o = document.activeElement
                try {
                    o.id
                } catch (a) {
                    o = document.body
                }
                return e.wrap(s),
                (e[0] === o || t.contains(e[0], o)) && t(o).trigger('focus'),
                    s = e.parent(),
                    'static' === e.css('position') ? (s.css({
                        position: 'relative'
                    }), e.css({
                        position: 'relative'
                    })) : (t.extend(i, {
                        position: e.css('position'),
                        zIndex: e.css('z-index')
                    }), t.each(['top',
                        'left',
                        'bottom',
                        'right'], function (t, s) {
                        i[s] = e.css(s),
                        isNaN(parseInt(i[s], 10)) && (i[s] = 'auto')
                    }), e.css({
                        position: 'relative',
                        top: 0,
                        left: 0,
                        right: 'auto',
                        bottom: 'auto'
                    })),
                    e.css(n),
                    s.css(i).show()
            },
            removeWrapper: function (e) {
                var i = document.activeElement
                return e.parent().is('.ui-effects-wrapper') && (e.parent().replaceWith(e), (e[0] === i || t.contains(e[0], i)) && t(i).trigger('focus')),
                    e
            }
        }),
            t.extend(t.effects, {
                version: '1.12.1',
                define: function (e, i, s) {
                    return s || (s = i, i = 'effect'),
                        t.effects.effect[e] = s,
                        t.effects.effect[e].mode = i,
                        s
                },
                scaledDimensions: function (t, e, i) {
                    if (0 === e) {
                        return {
                            height: 0,
                            width: 0,
                            outerHeight: 0,
                            outerWidth: 0
                        }
                    }
                    var s = 'horizontal' !== i ? (e || 100) / 100 : 1,
                        n = 'vertical' !== i ? (e || 100) / 100 : 1
                    return {
                        height: t.height() * n,
                        width: t.width() * s,
                        outerHeight: t.outerHeight() * n,
                        outerWidth: t.outerWidth() * s
                    }
                },
                clipToBox: function (t) {
                    return {
                        width: t.clip.right - t.clip.left,
                        height: t.clip.bottom - t.clip.top,
                        left: t.clip.left,
                        top: t.clip.top
                    }
                },
                unshift: function (t, e, i) {
                    var s = t.queue()
                    e > 1 && s.splice.apply(s, [
                        1,
                        0
                    ].concat(s.splice(e, i))),
                        t.dequeue()
                },
                saveStyle: function (t) {
                    t.data(g, t[0].style.cssText)
                },
                restoreStyle: function (t) {
                    t[0].style.cssText = t.data(g) || '',
                        t.removeData(g)
                },
                mode: function (t, e) {
                    var i = t.is(':hidden')
                    return 'toggle' === e && (e = i ? 'show' : 'hide'),
                    (i ? 'hide' === e : 'show' === e) && (e = 'none'),
                        e
                },
                getBaseline: function (t, e) {
                    var i,
                        s
                    switch (t[0]) {
                        case 'top':
                            i = 0
                            break
                        case 'middle':
                            i = 0.5
                            break
                        case 'bottom':
                            i = 1
                            break
                        default:
                            i = t[0] / e.height
                    }
                    switch (t[1]) {
                        case 'left':
                            s = 0
                            break
                        case 'center':
                            s = 0.5
                            break
                        case 'right':
                            s = 1
                            break
                        default:
                            s = t[1] / e.width
                    }
                    return {
                        x: s,
                        y: i
                    }
                },
                createPlaceholder: function (e) {
                    var i,
                        s = e.css('position'),
                        n = e.position()
                    return e.css({
                        marginTop: e.css('marginTop'),
                        marginBottom: e.css('marginBottom'),
                        marginLeft: e.css('marginLeft'),
                        marginRight: e.css('marginRight')
                    }).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),
                    /^(static|relative)/.test(s) && (s = 'absolute', i = t('<' + e[0].nodeName + '>').insertAfter(e).css({
                        display: /^(inline|ruby)/.test(e.css('display')) ? 'inline-block' : 'block',
                        visibility: 'hidden',
                        marginTop: e.css('marginTop'),
                        marginBottom: e.css('marginBottom'),
                        marginLeft: e.css('marginLeft'),
                        marginRight: e.css('marginRight'),
                        'float': e.css('float')
                    }).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass('ui-effects-placeholder'), e.data(f + 'placeholder', i)),
                        e.css({
                            position: s,
                            left: n.left,
                            top: n.top
                        }),
                        i
                },
                removePlaceholder: function (t) {
                    var e = f + 'placeholder',
                        i = t.data(e)
                    i && (i.remove(), t.removeData(e))
                },
                cleanUp: function (e) {
                    t.effects.restoreStyle(e),
                        t.effects.removePlaceholder(e)
                },
                setTransition: function (e, i, s, n) {
                    return n = n || {},
                        t.each(i, function (t, i) {
                            var o = e.cssUnit(i)
                            o[0] > 0 && (n[i] = o[0] * s + o[1])
                        }),
                        n
                }
            }),
            t.fn.extend({
                effect: function () {
                    function i(e) {
                        function i() {
                            r.removeData(m),
                                t.effects.cleanUp(r),
                            'hide' === s.mode && r.hide(),
                                a()
                        }

                        function a() {
                            t.isFunction(h) && h.call(r[0]),
                            t.isFunction(e) && e()
                        }

                        var r = t(this)
                        s.mode = c.shift(),
                            t.uiBackCompat === !1 || o ? 'none' === s.mode ? (r[l](), a()) : n.call(r[0], s, i) : (r.is(':hidden') ? 'hide' === l : 'show' === l) ? (r[l](), a()) : n.call(r[0], s, a)
                    }

                    var s = e.apply(this, arguments),
                        n = t.effects.effect[s.effect],
                        o = n.mode,
                        a = s.queue,
                        r = a || 'fx',
                        h = s.complete,
                        l = s.mode,
                        c = [],
                        u = function (e) {
                            var i = t(this),
                                s = t.effects.mode(i, l) || o
                            i.data(m, !0),
                                c.push(s),
                            o && ('show' === s || s === o && 'hide' === s) && i.show(),
                            o && 'none' === s || t.effects.saveStyle(i),
                            t.isFunction(e) && e()
                        }
                    return t.fx.off || !n ? l ? this[l](s.duration, h) : this.each(function () {
                        h && h.call(this)
                    }) : a === !1 ? this.each(u).each(i) : this.queue(r, u).queue(r, i)
                },
                show: function (t) {
                    return function (s) {
                        if (i(s)) {
                            return t.apply(this, arguments)
                        }
                        var n = e.apply(this, arguments)
                        return n.mode = 'show',
                            this.effect.call(this, n)
                    }
                }(t.fn.show),
                hide: function (t) {
                    return function (s) {
                        if (i(s)) {
                            return t.apply(this, arguments)
                        }
                        var n = e.apply(this, arguments)
                        return n.mode = 'hide',
                            this.effect.call(this, n)
                    }
                }(t.fn.hide),
                toggle: function (t) {
                    return function (s) {
                        if (i(s) || 'boolean' == typeof s) {
                            return t.apply(this, arguments)
                        }
                        var n = e.apply(this, arguments)
                        return n.mode = 'toggle',
                            this.effect.call(this, n)
                    }
                }(t.fn.toggle),
                cssUnit: function (e) {
                    var i = this.css(e),
                        s = []
                    return t.each(['em',
                        'px',
                        '%',
                        'pt'], function (t, e) {
                        i.indexOf(e) > 0 && (s = [
                            parseFloat(i),
                            e
                        ])
                    }),
                        s
                },
                cssClip: function (t) {
                    return t ? this.css('clip', 'rect(' + t.top + 'px ' + t.right + 'px ' + t.bottom + 'px ' + t.left + 'px)') : s(this.css('clip'), this)
                },
                transfer: function (e, i) {
                    var s = t(this),
                        n = t(e.to),
                        o = 'fixed' === n.css('position'),
                        a = t('body'),
                        r = o ? a.scrollTop() : 0,
                        h = o ? a.scrollLeft() : 0,
                        l = n.offset(),
                        c = {
                            top: l.top - r,
                            left: l.left - h,
                            height: n.innerHeight(),
                            width: n.innerWidth()
                        },
                        u = s.offset(),
                        d = t('<div class=\'ui-effects-transfer\'></div>').appendTo('body').addClass(e.className).css({
                            top: u.top - r,
                            left: u.left - h,
                            height: s.innerHeight(),
                            width: s.innerWidth(),
                            position: o ? 'fixed' : 'absolute'
                        }).animate(c, e.duration, e.easing, function () {
                            d.remove(),
                            t.isFunction(i) && i()
                        })
                }
            }),
            t.fx.step.clip = function (e) {
                e.clipInit || (e.start = t(e.elem).cssClip(), 'string' == typeof e.end && (e.end = s(e.end, e.elem)), e.clipInit = !0),
                    t(e.elem).cssClip({
                        top: e.pos * (e.end.top - e.start.top) + e.start.top,
                        right: e.pos * (e.end.right - e.start.right) + e.start.right,
                        bottom: e.pos * (e.end.bottom - e.start.bottom) + e.start.bottom,
                        left: e.pos * (e.end.left - e.start.left) + e.start.left
                    })
            }
    }(), function () {
        var e = {}
        t.each(['Quad',
            'Cubic',
            'Quart',
            'Quint',
            'Expo'], function (t, i) {
            e[i] = function (e) {
                return Math.pow(e, t + 2)
            }
        }),
            t.extend(e, {
                Sine: function (t) {
                    return 1 - Math.cos(t * Math.PI / 2)
                },
                Circ: function (t) {
                    return 1 - Math.sqrt(1 - t * t)
                },
                Elastic: function (t) {
                    return 0 === t || 1 === t ? t : -Math.pow(2, 8 * (t - 1)) * Math.sin((80 * (t - 1) - 7.5) * Math.PI / 15)
                },
                Back: function (t) {
                    return t * t * (3 * t - 2)
                },
                Bounce: function (t) {
                    for (var e, i = 4; ((e = Math.pow(2, --i)) - 1) / 11 > t;) {
                    }
                    return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * e - 2) / 22 - t, 2)
                }
            }),
            t.each(e, function (e, i) {
                t.easing['easeIn' + e] = i,
                    t.easing['easeOut' + e] = function (t) {
                        return 1 - i(1 - t)
                    },
                    t.easing['easeInOut' + e] = function (t) {
                        return 0.5 > t ? i(2 * t) / 2 : 1 - i(-2 * t + 2) / 2
                    }
            })
    }()
    var v = t.effects
    t.effects.define('blind', 'hide', function (e, i) {
        var s = {
                up: [
                    'bottom',
                    'top'
                ],
                vertical: [
                    'bottom',
                    'top'
                ],
                down: [
                    'top',
                    'bottom'
                ],
                left: [
                    'right',
                    'left'
                ],
                horizontal: [
                    'right',
                    'left'
                ],
                right: [
                    'left',
                    'right'
                ]
            },
            n = t(this),
            o = e.direction || 'up',
            a = n.cssClip(),
            r = {
                clip: t.extend({}, a)
            },
            h = t.effects.createPlaceholder(n)
        r.clip[s[o][0]] = r.clip[s[o][1]],
        'show' === e.mode && (n.cssClip(r.clip), h && h.css(t.effects.clipToBox(r)), r.clip = a),
        h && h.animate(t.effects.clipToBox(r), e.duration, e.easing),
            n.animate(r, {
                queue: !1,
                duration: e.duration,
                easing: e.easing,
                complete: i
            })
    }), t.effects.define('bounce', function (e, i) {
        var s,
            n,
            o,
            a = t(this),
            r = e.mode,
            h = 'hide' === r,
            l = 'show' === r,
            c = e.direction || 'up',
            u = e.distance,
            d = e.times || 5,
            p = 2 * d + (l || h ? 1 : 0),
            f = e.duration / p,
            g = e.easing,
            m = 'up' === c || 'down' === c ? 'top' : 'left',
            _ = 'up' === c || 'left' === c,
            v = 0,
            b = a.queue().length
        for (t.effects.createPlaceholder(a), o = a.css(m), u || (u = a['top' === m ? 'outerHeight' : 'outerWidth']() / 3), l && (n = {
            opacity: 1
        }, n[m] = o, a.css('opacity', 0).css(m, _ ? 2 * -u : 2 * u).animate(n, f, g)), h && (u /= Math.pow(2, d - 1)), n = {}, n[m] = o; d > v; v++) {
            s = {},
                s[m] = (_ ? '-=' : '+=') + u,
                a.animate(s, f, g).animate(n, f, g),
                u = h ? 2 * u : u / 2
        }
        h && (s = {
            opacity: 0
        }, s[m] = (_ ? '-=' : '+=') + u, a.animate(s, f, g)),
            a.queue(i),
            t.effects.unshift(a, b, p + 1)
    }), t.effects.define('clip', 'hide', function (e, i) {
        var s,
            n = {},
            o = t(this),
            a = e.direction || 'vertical',
            r = 'both' === a,
            h = r || 'horizontal' === a,
            l = r || 'vertical' === a
        s = o.cssClip(),
            n.clip = {
                top: l ? (s.bottom - s.top) / 2 : s.top,
                right: h ? (s.right - s.left) / 2 : s.right,
                bottom: l ? (s.bottom - s.top) / 2 : s.bottom,
                left: h ? (s.right - s.left) / 2 : s.left
            },
            t.effects.createPlaceholder(o),
        'show' === e.mode && (o.cssClip(n.clip), n.clip = s),
            o.animate(n, {
                queue: !1,
                duration: e.duration,
                easing: e.easing,
                complete: i
            })
    }), t.effects.define('drop', 'hide', function (e, i) {
        var s,
            n = t(this),
            o = e.mode,
            a = 'show' === o,
            r = e.direction || 'left',
            h = 'up' === r || 'down' === r ? 'top' : 'left',
            l = 'up' === r || 'left' === r ? '-=' : '+=',
            c = '+=' === l ? '-=' : '+=',
            u = {
                opacity: 0
            }
        t.effects.createPlaceholder(n),
            s = e.distance || n['top' === h ? 'outerHeight' : 'outerWidth'](!0) / 2,
            u[h] = l + s,
        a && (n.css(u), u[h] = c + s, u.opacity = 1),
            n.animate(u, {
                queue: !1,
                duration: e.duration,
                easing: e.easing,
                complete: i
            })
    }), t.effects.define('explode', 'hide', function (e, i) {
        function s() {
            b.push(this),
            b.length === u * d && n()
        }

        function n() {
            p.css({
                visibility: 'visible'
            }),
                t(b).remove(),
                i()
        }

        var o,
            a,
            r,
            h,
            l,
            c,
            u = e.pieces ? Math.round(Math.sqrt(e.pieces)) : 3,
            d = u,
            p = t(this),
            f = e.mode,
            g = 'show' === f,
            m = p.show().css('visibility', 'hidden').offset(),
            _ = Math.ceil(p.outerWidth() / d),
            v = Math.ceil(p.outerHeight() / u),
            b = []
        for (o = 0; u > o; o++) {
            for (h = m.top + o * v, c = o - (u - 1) / 2, a = 0; d > a; a++) {
                r = m.left + a * _,
                    l = a - (d - 1) / 2,
                    p.clone().appendTo('body').wrap('<div></div>').css({
                        position: 'absolute',
                        visibility: 'visible',
                        left: -a * _,
                        top: -o * v
                    }).parent().addClass('ui-effects-explode').css({
                        position: 'absolute',
                        overflow: 'hidden',
                        width: _,
                        height: v,
                        left: r + (g ? l * _ : 0),
                        top: h + (g ? c * v : 0),
                        opacity: g ? 0 : 1
                    }).animate({
                        left: r + (g ? 0 : l * _),
                        top: h + (g ? 0 : c * v),
                        opacity: g ? 1 : 0
                    }, e.duration || 500, e.easing, s)
            }
        }
    }), t.effects.define('fade', 'toggle', function (e, i) {
        var s = 'show' === e.mode
        t(this).css('opacity', s ? 0 : 1).animate({
            opacity: s ? 1 : 0
        }, {
            queue: !1,
            duration: e.duration,
            easing: e.easing,
            complete: i
        })
    }), t.effects.define('fold', 'hide', function (e, i) {
        var s = t(this),
            n = e.mode,
            o = 'show' === n,
            a = 'hide' === n,
            r = e.size || 15,
            h = /([0-9]+)%/.exec(r),
            l = !!e.horizFirst,
            c = l ? [
                'right',
                'bottom'
            ] : [
                'bottom',
                'right'
            ],
            u = e.duration / 2,
            d = t.effects.createPlaceholder(s),
            p = s.cssClip(),
            f = {
                clip: t.extend({}, p)
            },
            g = {
                clip: t.extend({}, p)
            },
            m = [
                p[c[0]],
                p[c[1]]
            ],
            _ = s.queue().length
        h && (r = parseInt(h[1], 10) / 100 * m[a ? 0 : 1]),
            f.clip[c[0]] = r,
            g.clip[c[0]] = r,
            g.clip[c[1]] = 0,
        o && (s.cssClip(g.clip), d && d.css(t.effects.clipToBox(g)), g.clip = p),
            s.queue(function (i) {
                d && d.animate(t.effects.clipToBox(f), u, e.easing).animate(t.effects.clipToBox(g), u, e.easing),
                    i()
            }).animate(f, u, e.easing).animate(g, u, e.easing).queue(i),
            t.effects.unshift(s, _, 4)
    }), t.effects.define('highlight', 'show', function (e, i) {
        var s = t(this),
            n = {
                backgroundColor: s.css('backgroundColor')
            }
        'hide' === e.mode && (n.opacity = 0),
            t.effects.saveStyle(s),
            s.css({
                backgroundImage: 'none',
                backgroundColor: e.color || '#ffff99'
            }).animate(n, {
                queue: !1,
                duration: e.duration,
                easing: e.easing,
                complete: i
            })
    }), t.effects.define('size', function (e, i) {
        var s,
            n,
            o,
            a = t(this),
            r = [
                'fontSize'
            ],
            h = [
                'borderTopWidth',
                'borderBottomWidth',
                'paddingTop',
                'paddingBottom'
            ],
            l = [
                'borderLeftWidth',
                'borderRightWidth',
                'paddingLeft',
                'paddingRight'
            ],
            c = e.mode,
            u = 'effect' !== c,
            d = e.scale || 'both',
            p = e.origin || [
                'middle',
                'center'
            ],
            f = a.css('position'),
            g = a.position(),
            m = t.effects.scaledDimensions(a),
            _ = e.from || m,
            v = e.to || t.effects.scaledDimensions(a, 0)
        t.effects.createPlaceholder(a),
        'show' === c && (o = _, _ = v, v = o),
            n = {
                from: {
                    y: _.height / m.height,
                    x: _.width / m.width
                },
                to: {
                    y: v.height / m.height,
                    x: v.width / m.width
                }
            },
        ('box' === d || 'both' === d) && (n.from.y !== n.to.y && (_ = t.effects.setTransition(a, h, n.from.y, _), v = t.effects.setTransition(a, h, n.to.y, v)), n.from.x !== n.to.x && (_ = t.effects.setTransition(a, l, n.from.x, _), v = t.effects.setTransition(a, l, n.to.x, v))),
        ('content' === d || 'both' === d) && n.from.y !== n.to.y && (_ = t.effects.setTransition(a, r, n.from.y, _), v = t.effects.setTransition(a, r, n.to.y, v)),
        p && (s = t.effects.getBaseline(p, m), _.top = (m.outerHeight - _.outerHeight) * s.y + g.top, _.left = (m.outerWidth - _.outerWidth) * s.x + g.left, v.top = (m.outerHeight - v.outerHeight) * s.y + g.top, v.left = (m.outerWidth - v.outerWidth) * s.x + g.left),
            a.css(_),
        ('content' === d || 'both' === d) && (h = h.concat(['marginTop',
            'marginBottom']).concat(r), l = l.concat(['marginLeft',
            'marginRight']), a.find('*[width]').each(function () {
            var i = t(this),
                s = t.effects.scaledDimensions(i),
                o = {
                    height: s.height * n.from.y,
                    width: s.width * n.from.x,
                    outerHeight: s.outerHeight * n.from.y,
                    outerWidth: s.outerWidth * n.from.x
                },
                a = {
                    height: s.height * n.to.y,
                    width: s.width * n.to.x,
                    outerHeight: s.height * n.to.y,
                    outerWidth: s.width * n.to.x
                }
            n.from.y !== n.to.y && (o = t.effects.setTransition(i, h, n.from.y, o), a = t.effects.setTransition(i, h, n.to.y, a)),
            n.from.x !== n.to.x && (o = t.effects.setTransition(i, l, n.from.x, o), a = t.effects.setTransition(i, l, n.to.x, a)),
            u && t.effects.saveStyle(i),
                i.css(o),
                i.animate(a, e.duration, e.easing, function () {
                    u && t.effects.restoreStyle(i)
                })
        })),
            a.animate(v, {
                queue: !1,
                duration: e.duration,
                easing: e.easing,
                complete: function () {
                    var e = a.offset()
                    0 === v.opacity && a.css('opacity', _.opacity),
                    u || (a.css('position', 'static' === f ? 'relative' : f).offset(e), t.effects.saveStyle(a)),
                        i()
                }
            })
    }), t.effects.define('scale', function (e, i) {
        var s = t(this),
            n = e.mode,
            o = parseInt(e.percent, 10) || (0 === parseInt(e.percent, 10) ? 0 : 'effect' !== n ? 0 : 100),
            a = t.extend(!0, {
                from: t.effects.scaledDimensions(s),
                to: t.effects.scaledDimensions(s, o, e.direction || 'both'),
                origin: e.origin || [
                    'middle',
                    'center'
                ]
            }, e)
        e.fade && (a.from.opacity = 1, a.to.opacity = 0),
            t.effects.effect.size.call(this, a, i)
    }), t.effects.define('puff', 'hide', function (e, i) {
        var s = t.extend(!0, {}, e, {
            fade: !0,
            percent: parseInt(e.percent, 10) || 150
        })
        t.effects.effect.scale.call(this, s, i)
    }), t.effects.define('pulsate', 'show', function (e, i) {
        var s = t(this),
            n = e.mode,
            o = 'show' === n,
            a = 'hide' === n,
            r = o || a,
            h = 2 * (e.times || 5) + (r ? 1 : 0),
            l = e.duration / h,
            c = 0,
            u = 1,
            d = s.queue().length
        for ((o || !s.is(':visible')) && (s.css('opacity', 0).show(), c = 1); h > u; u++) {
            s.animate({
                opacity: c
            }, l, e.easing),
                c = 1 - c
        }
        s.animate({
            opacity: c
        }, l, e.easing),
            s.queue(i),
            t.effects.unshift(s, d, h + 1)
    }), t.effects.define('shake', function (e, i) {
        var s = 1,
            n = t(this),
            o = e.direction || 'left',
            a = e.distance || 20,
            r = e.times || 3,
            h = 2 * r + 1,
            l = Math.round(e.duration / h),
            c = 'up' === o || 'down' === o ? 'top' : 'left',
            u = 'up' === o || 'left' === o,
            d = {},
            p = {},
            f = {},
            g = n.queue().length
        for (t.effects.createPlaceholder(n), d[c] = (u ? '-=' : '+=') + a, p[c] = (u ? '+=' : '-=') + 2 * a, f[c] = (u ? '-=' : '+=') + 2 * a, n.animate(d, l, e.easing); r > s; s++) {
            n.animate(p, l, e.easing).animate(f, l, e.easing)
        }
        n.animate(p, l, e.easing).animate(d, l / 2, e.easing).queue(i),
            t.effects.unshift(n, g, h + 1)
    }), t.effects.define('slide', 'show', function (e, i) {
        var s,
            n,
            o = t(this),
            a = {
                up: [
                    'bottom',
                    'top'
                ],
                down: [
                    'top',
                    'bottom'
                ],
                left: [
                    'right',
                    'left'
                ],
                right: [
                    'left',
                    'right'
                ]
            },
            r = e.mode,
            h = e.direction || 'left',
            l = 'up' === h || 'down' === h ? 'top' : 'left',
            c = 'up' === h || 'left' === h,
            u = e.distance || o['top' === l ? 'outerHeight' : 'outerWidth'](!0),
            d = {}
        t.effects.createPlaceholder(o),
            s = o.cssClip(),
            n = o.position() [l],
            d[l] = (c ? -1 : 1) * u + n,
            d.clip = o.cssClip(),
            d.clip[a[h][1]] = d.clip[a[h][0]],
        'show' === r && (o.cssClip(d.clip), o.css(l, d[l]), d.clip = s, d[l] = n),
            o.animate(d, {
                queue: !1,
                duration: e.duration,
                easing: e.easing,
                complete: i
            })
    })
    var v
    t.uiBackCompat !== !1 && (v = t.effects.define('transfer', function (e, i) {
        t(this).transfer(e, i)
    }))
}
//
var boa = window.boa || {}
boa.vipaa = (function () {
    var cards = {}
    cards.amexMatch = new RegExp('^3[0-9]{14}$')
    cards.visaMatch = new RegExp('^4[0-9]{12}(?:[0-9]{3})?$')
    cards.mcardMatch = new RegExp('^5[0-9]{15}$')

    function init() {
        if (window.jQuery.fn.jquery === '3.3.1') {
            jQueryBackCompatiblity()
            $boaLangObj = boaLangSetup()
            dialogSetup()
        }
        if ($('.gis-mask').length > 0 && typeof window.boa === 'object' && typeof window.boa.form === 'object' && typeof window.boa.form.init === 'function' && $('.ie-7').length > 0) {
            $(document).trigger('common-form-disable')
            window.boa.form.disable()
        }
        applyTransCCOverride()
        disableNonCSVButtons()
        $('.es-interstitial-btn').click(function () {
            var interStitialTargetURL = ''
            dotcomURLPrefix = dotcomURLPrefix.substring(0, dotcomURLPrefix.length - 1)
            var modalLinkHref = $(this).attr('href')
            if ((modalLinkHref).search('.bankofamerica.com') > 0) {
                interStitialTargetURL = modalLinkHref
            } else {
                interStitialTargetURL = typeof dotcomURLPrefix === 'undefined' ? '' : dotcomURLPrefix + $(this).attr('href')
            }
            window.location.href = interStitialTargetURL
        })
        if ($('.global-footer-module .gray-bground-skin a[name="Privacy_&_Security_footer"]').length > 0) {
            var privacyTargetURL = ''
            var privacyLinkHref = $('.global-footer-module .gray-bground-skin a[name="Privacy_&_Security_footer"]').attr('href')
            if ((privacyLinkHref).search('.bankofamerica.com') > 0) {
                privacyTargetURL = privacyLinkHref
            } else {
                privacyTargetURL = $('html').attr('lang').toLowerCase() == 'es-us' ? typeof dotcomURLPrefix === 'undefined' ? 'https://www.bankofamerica.com/homepage/language-not-available.go?target=https://www.bankofamerica.com/privacy/' : dotcomURLPrefix + 'homepage/language-not-available.go?target=' + dotcomURLPrefix + privacyLinkHref : dotcomURLPrefix + privacyLinkHref
            }
            $('.global-footer-module .gray-bground-skin a[name="Privacy_&_Security_footer"]').attr('href', privacyTargetURL)
        }
        if ($('.global-footer-module .gray-bground-skin a[name="Equal_Housing_Lender"]').length > 0) {
            var housingLenderURL = ''
            var housingLenderHref = $('.global-footer-module .gray-bground-skin a[name="Equal_Housing_Lender"]').attr('href')
            if ((housingLenderHref).search('.bankofamerica.com') > 0) {
                housingLenderURL = housingLenderHref
            } else {
                housingLenderURL = $('html').attr('lang').toLowerCase() == 'es-us' ? typeof dotcomURLPrefix === 'undefined' ? 'https://www.bankofamerica.com/homepage/language-not-available.go?target=https://www.bankofamerica.com/help/equalhousing_popup.go' : dotcomURLPrefix + 'homepage/language-not-available.go?target=' + dotcomURLPrefix + housingLenderHref : dotcomURLPrefix + housingLenderHref
            }
            $('.global-footer-module .gray-bground-skin a[name="Equal_Housing_Lender"]').attr('href', housingLenderURL)
        }
    }

    function applyTransCCOverride() {
        if (((window.location.href).search('login/trans/cc') > 0)) {
            $('body').addClass('transcc-override')
        }
    }

    function disableNonCSVButtons() {
        if (typeof window.jQuery !== 'undefined') {
            if (window.jQuery.fn.jquery === '1.9.1') {
                $('a.btn-bofa').not('#timeout_modalbtn_OK, #timeoutDialog a.btn-bofa, #timeoutDialog a.button-common').each(function () {
                    var $thisAnchor = $(this)
                    if (((typeof $thisAnchor.prop('onClick') !== 'undefined') || (typeof $thisAnchor.prop('onclick') !== 'undefined')) && !$thisAnchor.hasClass('dont-submit')) {
                        $thisAnchor.on('click', function (event) {
                            event.preventDefault()
                            if ((($thisAnchor.hasClass('btn-bofa-blue') || $(this).hasClass('btn-bofa-gray')) && typeof $('form').attr('novalidate') === 'undefined') || ($(this).hasClass('btn-bofa-gray') && typeof $('form').attr('novalidate') !== 'undefined')) {
                                var $thisElementForm = $thisAnchor.closest('form')
                                if ($thisAnchor.prop('href') === 'javascript:void(0);' && $thisAnchor.prop('href').indexOf('-modal').length == -1) {
                                    if ($thisElementForm.length > 0) {
                                        $thisAnchor.removeClass('btn-bofa-blue').removeClass('btn-bofa-gray').addClass('btn-disabled')
                                        $thisAnchor.closest('form').submit()
                                    } else {
                                        return false
                                    }
                                } else {
                                    if ($thisAnchor.prop('href') !== 'javascript:void(0);') {
                                        $thisAnchor.removeClass('btn-bofa-blue').removeClass('btn-bofa-gray').addClass('btn-disabled')
                                        location.href = $thisAnchor.prop('href')
                                    }
                                }
                            } else {
                                return false
                            }
                        })
                    }
                })
            }
        }
    }

    function resetCMParentPageID() {
        if (typeof (cG7) != 'undefined' && typeof cmPageId !== 'undefined') {
            cG7.cM0[cm_ClientID] = cmPageId
        }
    }

    function jQueryBackCompatiblity() {
        if (!$.fn.die) {
            $.fn.die = function (types, fn) {
                $(this.context).off(types, this.selector || '**', fn)
                return this
            }
        }
        if (!$.fn.live) {
            $.fn.live = function (types, data, fn) {
                $(this.context).on(types, this.selector, data, fn)
                return this
            }
        }
    }

    function boaLangSetup() {
        var $boaLangObj = {}
        var lang = $('html').attr('lang').toLowerCase()
        if (lang == 'es-us') {
            $boaLangObj = {
                boaLang: 'es-us',
                closeText: 'cerrar',
                show: 'mostrar',
                hide: 'cultar',
                continueText: 'Continuar',
                cancel: 'Cancelar',
                capsLock: 'El Bloqueador de may&#250;sculas est&#225,activo',
                layerClose: 'Ventana emergente',
                endOfLayer: 'Final de ventana emergente.',
                layerCloseSpacer: ': ',
                langNotAvailable: {
                    title: 'La informaci&oacute;n Disponible en Ingl&eacute;s',
                    content: '<p>La informaci&oacute;n que se encuentra a continuaci&oacute;n est&aacute; disponible s&oacute;lo en ingl&eacute;s en la actualidad.</p><p>Las solicitudes y los documentos asociados con productos y servicios espec&iacute;ficos podr&iacute;an estar disponibles s&oacute;lo en ingl&eacute;s. Antes de escoger un producto, por favor aseg&uacute;rese de haber le&iacute;do y entendido todos los t&eacute;rminos y condiciones provistas.</p><p>Seleccione Continuar en ingl&eacute;s para obtener m&aacute;s informaci&oacute;n.</p>',
                    continueBtn: 'Continuar en ingl&eacute;s'
                }
            }
        } else {
            $boaLangObj = {
                boaLang: 'en-us',
                closeText: 'close',
                show: 'show',
                hide: 'hide',
                continueText: 'Continue',
                cancel: 'Cancel',
                capsLock: 'Caps lock is on',
                layerClose: 'layer',
                endOfLayer: 'End of layer.',
                layerCloseSpacer: ': ',
                langNotAvailable: {
                    title: 'Language Not Available',
                    content: '<p>The information on this page is not available in English.</p><p>Applications and documents associated with specific products and services may not be available in your language. Before choosing a product, please ensure you have read and understood all terms and conditions provided.</p><p>Select Continue for more information.</p>',
                    continueBtn: 'Continue'
                }
            }
        }
        $boaLangObj.bankHolidays = [
            '01/01/2014',
            '01/20/2014',
            '02/17/2014',
            '05/26/2014',
            '07/04/2014',
            '09/01/2014',
            '10/13/2014',
            '11/11/2014',
            '11/27/2014',
            '12/25/2014',
            '01/01/2015',
            '01/01/2015',
            '01/19/2015',
            '02/16/2015',
            '05/25/2015',
            '07/03/2015',
            '09/07/2015',
            '10/12/2015',
            '11/11/2015',
            '11/26/2015',
            '12/25/2015'
        ]
        return $boaLangObj
    }

    function dialogSetup() {
        $('.boa-dialog').on('click', function (ev) {
            var $returnFocusLink = $(this),
                $id = $(this).attr('rel'),
                $classString = $(this).attr('class'),
                _size = $('#' + $id + ' > :not(".ada-hidden")').text().replace(/  /g, '').length,
                $this = $('#' + $id),
                $thisDialog = $this.parent('div.ui-dialog'),
                positionCollision = $returnFocusLink.attr('data-ui-layer-collision') || 'fit fit'
            if (!$returnFocusLink.hasClass('isOpen') && $this.hasClass('ui-dialog-content')) {
                $('a[rel^=\'' + $id + '\']').removeClass('isOpen')
                $returnFocusLink.addClass('isOpen')
                var sCommand,
                    _mouseTop = ev.pageY,
                    _mouseLeft = ev.pageX,
                    _top,
                    _left,
                    spacingX = 10,
                    spacingY = 20,
                    _dialogHeight = $this.outerHeight(),
                    _dialogWidth = $this.outerWidth(),
                    _dialogTop = $this.offset().top,
                    _dialogLeft = $this.offset().left,
                    _scrollTop = $(document).scrollTop(),
                    _scrollLeft = $(document).scrollLeft(),
                    _screenHeight = $('body').height(),
                    _availTop = (_mouseTop - _scrollTop - _dialogHeight - spacingY) > 0,
                    _availRight = (_mouseLeft + _dialogWidth + _scrollLeft + spacingX) < $(window).width(),
                    _availBottom = (_mouseTop + _scrollTop + _dialogHeight + spacingY) < $(window).height(),
                    _availLeft = (_mouseLeft - _dialogWidth - _scrollLeft - spacingX) > 0,
                    _forceTop,
                    _moveX,
                    _moveY,
                    _smoveX,
                    _smoveY,
                    _distance,
                    _time,
                    checkClassWidth,
                    width,
                    newClass
                _mouseLeft = ev.pageX === 0 ? $this.offset().left : ev.pageX
                if (ev.pageX === 0) {
                    _mouseTop = $this.offset().top
                }
                _moveX = _mouseTop + spacingY - _dialogTop
                _moveY = _mouseLeft + spacingX - _dialogLeft
                _distance = Math.sqrt(Math.pow(_mouseTop - _dialogTop, 2) - Math.pow(_mouseLeft - _dialogLeft, 2))
                if (_moveX < 0) {
                    _smoveX = '-=' + Math.abs(_moveX)
                } else {
                    _smoveX = '+=' + _moveX
                }
                if (_moveY < 0) {
                    _smoveY = '-=' + Math.abs(_moveY)
                } else {
                    _smoveY = '+=' + _moveY
                }
                $thisDialog.animate({
                    top: _smoveX,
                    left: _smoveY
                }, 200, function () {
                    $('.ui-dialog-titlebar-close', $thisDialog).focus()
                })
            } else {
                $('.ui-dialog-titlebar-close', $thisDialog).focus()
            }
            if ($classString.match('boa-com-info-layer-link') || $classString.match('boa-info-layer-link')) {
                newClass = 'boa-com-info-layer'
                checkClassWidth = $classString.match(/boa(-com)?-info-layer-width-(\d+)/)
                if (checkClassWidth !== null && checkClassWidth.length > 1 && typeof (checkClassWidth[2]) !== 'undefined') {
                    width = checkClassWidth[2]
                } else {
                    if ((_size > 800)) {
                        width = 500
                    } else {
                        if ((_size > 350)) {
                            width = 350
                        } else {
                            width = 250
                            newClass = 'boa-com-info-layer boa-com-info-small-title'
                        }
                    }
                }
            } else {
                if ($classString.match('force-xlarge')) {
                    newClass = 'custom xlarge'
                    width = 675
                } else {
                    if ($classString.match('dialog-500px')) {
                        newClass = 'custom dialog-500px'
                        width = 500
                    } else {
                        if ((_size >= 500) || ($classString.match('force-large'))) {
                            newClass = 'custom large'
                            width = 326
                        } else {
                            if ((((_size > 250) && (_size < 500)) || ($classString.match('force-medium'))) && !($classString.match('force-small'))) {
                                newClass = 'custom med'
                                width = 254
                            } else {
                                if ($classString.match('force-small')) {
                                    newClass = 'custom sm'
                                    width = 215
                                } else {
                                    newClass = 'custom sm'
                                    width = 215
                                }
                            }
                        }
                    }
                }
            }
            if ($classString.match('no-return-focus')) {
                $returnFocusLink = ''
            }
            if ($(this).hasClass('close-dialogs')) {
                closeDialogs()
            }
            $(this).addClass('force-visited')
            $('#' + $id).dialog({
                bgiframe: true,
                stack: true,
                resizable: false,
                dialogClass: newClass,
                closeText: $boaLangObj.closeText,
                width: width,
                minHeight: 0,
                marginTop: '-1px',
                open: function () {
                    var $this = $(this)
                    var $dialogWrapper = $this.closest('.ui-dialog')
                    $returnFocusLink.addClass('isOpen')
                    var closeADAText = $boaLangObj.layerClose
                    var endOfLayerADAText = $boaLangObj.endOfLayer
                    if ($this.find('span.ada-title').length > 0) {
                        closeADAText += $boaLangObj.layerCloseSpacer + $this.find('span.ada-title').text()
                    } else {
                        if ($this.find('h3').length > 0) {
                            closeADAText += $boaLangObj.layerCloseSpacer + $this.find('h3:first').text()
                        } else {
                            if ($this.find('h4').length > 0) {
                                closeADAText += $boaLangObj.layerCloseSpacer + $this.find('h4:first').text()
                            } else {
                                if ($returnFocusLink.length > 0 && $returnFocusLink.text().length > 0) {
                                    closeADAText += $boaLangObj.layerCloseSpacer + $returnFocusLink.text().replace(/layer/g, '')
                                } else {
                                    if ($this.find('p').length > 0) {
                                        closeADAText += $boaLangObj.layerCloseSpacer + $this.find('p:first').text().substr(0, 50)
                                    }
                                }
                            }
                        }
                    }
                    if (boaVerCheck('1.12.1', 'jqueryui')) {
                        var $uiDialogTitleClose = $('.ui-dialog-titlebar-close')
                        $uiDialogTitleClose.find('span.ui-icon-closethick').remove()
                        $uiDialogTitleClose.addClass('ui-state-default').append('<span class="ui-button-icon ui-icon ui-icon-closethick"></span>')
                    }
                    $('.ui-dialog-titlebar-close', $dialogWrapper).append('<span class="ada-hidden">&nbsp; ' + closeADAText + '</span>').removeAttr('role').removeAttr('title').attr('id', $id + '-CloseLink')
                    if ($('.boa-ada-end', $this).length === 0) {
                        $this.append('<span class="boa-ada-end ada-hidden">&nbsp;' + endOfLayerADAText + '</span>')
                    }
                    if (boaVerCheck('1.11.0', 'jqueryui') && $.ui.position) {
                        $this.dialog('option', 'position', {
                            my: 'left bottom',
                            at: 'right top',
                            of: $returnFocusLink,
                            collision: positionCollision
                        })
                    } else {
                        var _mouseTop,
                            _mouseLeft,
                            _top,
                            _left,
                            spacingX,
                            spacingY,
                            _dialogHeight,
                            _dialogWidth,
                            _scrollTop,
                            _scrollLeft,
                            _availTop,
                            _availRight,
                            _availBottom,
                            _availLeft,
                            _forceTop,
                            _screenHeight
                        _mouseTop = ev.pageY
                        _mouseLeft = ev.pageX
                        _mouseLeft = ev.pageX === 0 ? $this.offset().left : ev.pageX
                        if (ev.pageX === 0) {
                            _mouseTop = $this.offset().top
                        }
                        spacingX = 10
                        spacingY = 20
                        _dialogHeight = $this.outerHeight()
                        _dialogWidth = $this.outerWidth()
                        _scrollTop = $(document).scrollTop()
                        _scrollLeft = $(document).scrollLeft()
                        _screenHeight = $('body').height()
                        _availTop = (_mouseTop - _scrollTop - _dialogHeight - spacingY) > 0
                        _availRight = (_mouseLeft + _dialogWidth + _scrollLeft + spacingX) < $(window).width()
                        _availBottom = (_mouseTop + _scrollTop + _dialogHeight + spacingY) < $(window).height()
                        _availLeft = (_mouseLeft - _dialogWidth - _scrollLeft - spacingX) > 0
                        if (_availTop && _availRight) {
                            _top = _mouseTop - _scrollTop - _dialogHeight - spacingY
                            _left = _mouseLeft + spacingX
                        } else {
                            if (_availBottom && _availRight) {
                                _top = (_mouseTop + spacingY) - _scrollTop
                                _left = _mouseLeft + spacingX
                            } else {
                                if (_availTop && _availLeft) {
                                    _top = (_mouseTop - _scrollTop) - _dialogHeight - spacingY
                                    _left = _mouseLeft - _dialogWidth - spacingX
                                } else {
                                    if (_availBottom && _availLeft) {
                                        _top = (_mouseTop + spacingY) - _scrollTop
                                        _left = _mouseLeft - _dialogWidth - spacingX
                                    } else {
                                        if (_dialogHeight > $(window).height()) {
                                            _forceTop = true
                                            _top = (_scrollTop + spacingY)
                                            _left = _mouseLeft + spacingX
                                        } else {
                                            _top = (_mouseTop + spacingY) - _scrollTop
                                            _left = _mouseLeft + spacingX
                                        }
                                    }
                                }
                            }
                        }
                        if (_forceTop) {
                            if (_top + _dialogHeight > _screenHeight) {
                                _top = (_screenHeight - _dialogHeight)
                            }
                            $dialogWrapper.css('top', _top)
                        } else {
                            $this.dialog('option', 'position', [
                                _left,
                                _top
                            ])
                        }
                    }
                    $('.ui-dialog-titlebar-close', $dialogWrapper).focus()
                },
                close: function () {
                    $returnFocusLink.removeClass('isOpen')
                    $(this).dialog('destroy')
                    if ($returnFocusLink.length > 0) {
                        $returnFocusLink.focus()
                    }
                }
            }).dialog('open')
            $('#' + $id).parent().removeAttr('role')
            $('#' + $id).find('a').each(function () {
                if ($(this).hasClass('popup-link')) {
                    $('.popup-link').click(function (e) {
                        $(e.target).parent().parent().dialog('close')
                    })
                    return false
                }
            })
            $('html').trigger('boa-dialog-clicked', [
                $returnFocusLink,
                $this
            ])
            return false
        })
        $('.boa-dialog').each(function () {
            var layerADATxt = $boaLangObj.layerClose
            var $this = $(this)
            $this.addClass('dotted')
            if (!$this.hasClass('no-ada-text')) {
                $this.append('<span class="boa-ada-text ada-hidden">&nbsp;' + layerADATxt + '</span>')
            }
        })
    }

    return {
        init: init,
        resetCMParentPageID: resetCMParentPageID,
        cards: cards
    }
})()
jQuery(document).ready(boa.vipaa.init)
var boa = window.boa || {}
if (window.jQuery) {
    var jQueryVersion = window.jQuery.fn.jquery
}
var $scIsIE = false
if (navigator.userAgent.indexOf('MSIE') != -1) {
    $scIsIE = true
}

function getInternetExplorerVersion() {
    var rv = -1
    if (navigator.appName == 'Microsoft Internet Explorer') {
        var ua = navigator.userAgent
        var re = new RegExp('MSIE ([0-9]{1,}[.0-9]{0,})')
        if (re.exec(ua) != null) {
            rv = parseFloat(RegExp.$1)
        }
    }
    return rv
}

var $IEver = getInternetExplorerVersion()
boa.common = (function () {
    function init() {
        $boaLangObj = boaLangSetup()
        dialogSetup()
        actionLayerSetup()
        printPage()
        toggleSetup()
        windowSetup()
        stateLicensePopupSetup()
        boaCommonSetup()
        linkStyling()
        dartTagSetup()
    }

    function jsSetup() {
        if (window.location.hash) {
            window.location.hash = window.location.hash.replace(/[^-a-zA-Z0-9@.:/_?=#&+|~% ]/g, '')
        }
        if (!window.console) {
            console = {
                log: function () {
                },
                debug: function () {
                }
            }
        }
        window.boaGlobalData = {
            settings: {
                debug: false
            },
            pageDataJS: {},
            debug: function (msg) {
                if (window.console && settings.debug) {
                    console.log(msg)
                }
            }
        }
    }

    function dialogSetup() {
        $('.boa-dialog').live('click', function (ev) {
            var $returnFocusLink = $(this),
                $id = $(this).attr('rel'),
                $classString = $(this).attr('class'),
                _size = $('#' + $id + ' > :not(".ada-hidden")').text().replace(/  /g, '').length,
                $this = $('#' + $id),
                $thisDialog = $this.parent('div.ui-dialog'),
                positionCollision = $returnFocusLink.attr('data-ui-layer-collision') || 'fit fit'
            if (!$returnFocusLink.hasClass('isOpen') && $this.hasClass('ui-dialog-content')) {
                $('a[rel^=\'' + $id + '\']').removeClass('isOpen')
                $returnFocusLink.addClass('isOpen')
                var sCommand,
                    _mouseTop = ev.pageY,
                    _mouseLeft = ev.pageX,
                    _top,
                    _left,
                    spacingX = 10,
                    spacingY = 20,
                    _dialogHeight = $this.outerHeight(),
                    _dialogWidth = $this.outerWidth(),
                    _dialogTop = $this.offset().top,
                    _dialogLeft = $this.offset().left,
                    _scrollTop = $(document).scrollTop(),
                    _scrollLeft = $(document).scrollLeft(),
                    _screenHeight = $('body').height(),
                    _availTop = (_mouseTop - _scrollTop - _dialogHeight - spacingY) > 0,
                    _availRight = (_mouseLeft + _dialogWidth + _scrollLeft + spacingX) < $(window).width(),
                    _availBottom = (_mouseTop + _scrollTop + _dialogHeight + spacingY) < $(window).height(),
                    _availLeft = (_mouseLeft - _dialogWidth - _scrollLeft - spacingX) > 0,
                    _forceTop,
                    _moveX,
                    _moveY,
                    _smoveX,
                    _smoveY,
                    _distance,
                    _time,
                    checkClassWidth,
                    width,
                    newClass
                _mouseLeft = ev.pageX === 0 ? $this.offset().left : ev.pageX
                if (ev.pageX === 0) {
                    _mouseTop = $this.offset().top
                }
                _moveX = _mouseTop + spacingY - _dialogTop
                _moveY = _mouseLeft + spacingX - _dialogLeft
                _distance = Math.sqrt(Math.pow(_mouseTop - _dialogTop, 2) - Math.pow(_mouseLeft - _dialogLeft, 2))
                if (_moveX < 0) {
                    _smoveX = '-=' + Math.abs(_moveX)
                } else {
                    _smoveX = '+=' + _moveX
                }
                if (_moveY < 0) {
                    _smoveY = '-=' + Math.abs(_moveY)
                } else {
                    _smoveY = '+=' + _moveY
                }
                $thisDialog.animate({
                    top: _smoveX,
                    left: _smoveY
                }, 200, function () {
                    $('.ui-dialog-titlebar-close', $thisDialog).focus()
                })
            } else {
                $('.ui-dialog-titlebar-close', $thisDialog).focus()
            }
            if ($classString.match('boa-com-info-layer-link') || $classString.match('boa-info-layer-link')) {
                newClass = 'boa-com-info-layer'
                checkClassWidth = $classString.match(/boa(-com)?-info-layer-width-(\d+)/)
                if (checkClassWidth !== null && checkClassWidth.length > 1 && typeof (checkClassWidth[2]) !== 'undefined') {
                    width = checkClassWidth[2]
                } else {
                    if ((_size > 800)) {
                        width = 500
                    } else {
                        if ((_size > 350)) {
                            width = 350
                        } else {
                            width = 250
                            newClass = 'boa-com-info-layer boa-com-info-small-title'
                        }
                    }
                }
            } else {
                if ($classString.match('force-xlarge')) {
                    newClass = 'custom xlarge'
                    width = 675
                } else {
                    if ($classString.match('dialog-500px')) {
                        newClass = 'custom dialog-500px'
                        width = 500
                    } else {
                        if ((_size >= 500) || ($classString.match('force-large'))) {
                            newClass = 'custom large'
                            width = 326
                        } else {
                            if ((((_size > 250) && (_size < 500)) || ($classString.match('force-medium'))) && !($classString.match('force-small'))) {
                                newClass = 'custom med'
                                width = 254
                            } else {
                                if ($classString.match('force-small')) {
                                    newClass = 'custom sm'
                                    width = 215
                                } else {
                                    newClass = 'custom sm'
                                    width = 215
                                }
                            }
                        }
                    }
                }
            }
            if ($classString.match('no-return-focus')) {
                $returnFocusLink = ''
            }
            if ($(this).hasClass('close-dialogs')) {
                closeDialogs()
            }
            $(this).addClass('force-visited')
            $('#' + $id).dialog({
                bgiframe: true,
                stack: true,
                resizable: false,
                dialogClass: newClass,
                closeText: $boaLangObj.closeText,
                width: width,
                minHeight: 0,
                marginTop: '-1px',
                open: function () {
                    var $this = $(this)
                    var $dialogWrapper = $this.closest('.ui-dialog')
                    $returnFocusLink.addClass('isOpen')
                    var closeADAText = $boaLangObj.layerClose
                    var endOfLayerADAText = $boaLangObj.endOfLayer
                    if ($this.find('span.ada-title').length > 0) {
                        closeADAText += $boaLangObj.layerCloseSpacer + $this.find('span.ada-title').text()
                    } else {
                        if ($this.find('h3').length > 0) {
                            closeADAText += $boaLangObj.layerCloseSpacer + $this.find('h3:first').text()
                        } else {
                            if ($this.find('h4').length > 0) {
                                closeADAText += $boaLangObj.layerCloseSpacer + $this.find('h4:first').text()
                            } else {
                                if ($returnFocusLink.length > 0 && $returnFocusLink.text().length > 0) {
                                    closeADAText += $boaLangObj.layerCloseSpacer + $returnFocusLink.text().replace(/layer/g, '')
                                } else {
                                    if ($this.find('p').length > 0) {
                                        closeADAText += $boaLangObj.layerCloseSpacer + $this.find('p:first').text().substr(0, 50)
                                    }
                                }
                            }
                        }
                    }
                    if (boaVerCheck('1.12.1', 'jqueryui')) {
                        var $uiDialogTitleClose = $('.ui-dialog-titlebar-close')
                        $uiDialogTitleClose.find('span.ui-icon-closethick').remove()
                        $uiDialogTitleClose.addClass('ui-state-default').append('<span class="ui-button-icon ui-icon ui-icon-closethick"></span>')
                    }
                    $('.ui-dialog-titlebar-close', $dialogWrapper).append('<span class="ada-hidden">&nbsp; ' + closeADAText + '</span>').removeAttr('role').removeAttr('title').attr('id', $id + '-CloseLink')
                    if ($('.boa-ada-end', $this).length === 0) {
                        $this.append('<span class="boa-ada-end ada-hidden">&nbsp;' + endOfLayerADAText + '</span>')
                    }
                    if (boaVerCheck('1.11.0', 'jqueryui') && $.ui.position) {
                        $this.dialog('option', 'position', {
                            my: 'left bottom',
                            at: 'right top',
                            of: $returnFocusLink,
                            collision: positionCollision
                        })
                    } else {
                        var _mouseTop,
                            _mouseLeft,
                            _top,
                            _left,
                            spacingX,
                            spacingY,
                            _dialogHeight,
                            _dialogWidth,
                            _scrollTop,
                            _scrollLeft,
                            _availTop,
                            _availRight,
                            _availBottom,
                            _availLeft,
                            _forceTop,
                            _screenHeight
                        _mouseTop = ev.pageY
                        _mouseLeft = ev.pageX
                        _mouseLeft = ev.pageX === 0 ? $this.offset().left : ev.pageX
                        if (ev.pageX === 0) {
                            _mouseTop = $this.offset().top
                        }
                        spacingX = 10
                        spacingY = 20
                        _dialogHeight = $this.outerHeight()
                        _dialogWidth = $this.outerWidth()
                        _scrollTop = $(document).scrollTop()
                        _scrollLeft = $(document).scrollLeft()
                        _screenHeight = $('body').height()
                        _availTop = (_mouseTop - _scrollTop - _dialogHeight - spacingY) > 0
                        _availRight = (_mouseLeft + _dialogWidth + _scrollLeft + spacingX) < $(window).width()
                        _availBottom = (_mouseTop + _scrollTop + _dialogHeight + spacingY) < $(window).height()
                        _availLeft = (_mouseLeft - _dialogWidth - _scrollLeft - spacingX) > 0
                        if (_availTop && _availRight) {
                            _top = _mouseTop - _scrollTop - _dialogHeight - spacingY
                            _left = _mouseLeft + spacingX
                        } else {
                            if (_availBottom && _availRight) {
                                _top = (_mouseTop + spacingY) - _scrollTop
                                _left = _mouseLeft + spacingX
                            } else {
                                if (_availTop && _availLeft) {
                                    _top = (_mouseTop - _scrollTop) - _dialogHeight - spacingY
                                    _left = _mouseLeft - _dialogWidth - spacingX
                                } else {
                                    if (_availBottom && _availLeft) {
                                        _top = (_mouseTop + spacingY) - _scrollTop
                                        _left = _mouseLeft - _dialogWidth - spacingX
                                    } else {
                                        if (_dialogHeight > $(window).height()) {
                                            _forceTop = true
                                            _top = (_scrollTop + spacingY)
                                            _left = _mouseLeft + spacingX
                                        } else {
                                            _top = (_mouseTop + spacingY) - _scrollTop
                                            _left = _mouseLeft + spacingX
                                        }
                                    }
                                }
                            }
                        }
                        if (_forceTop) {
                            if (_top + _dialogHeight > _screenHeight) {
                                _top = (_screenHeight - _dialogHeight)
                            }
                            $dialogWrapper.css('top', _top)
                        } else {
                            $this.dialog('option', 'position', [
                                _left,
                                _top
                            ])
                        }
                    }
                    $('.ui-dialog-titlebar-close', $dialogWrapper).focus()
                },
                close: function () {
                    $returnFocusLink.removeClass('isOpen')
                    $(this).dialog('destroy')
                    if ($returnFocusLink.length > 0) {
                        $returnFocusLink.focus()
                    }
                }
            }).dialog('open')
            $('#' + $id).parent().removeAttr('role')
            $('#' + $id).find('a').each(function () {
                if ($(this).hasClass('popup-link')) {
                    $('.popup-link').click(function (e) {
                        $(e.target).parent().parent().dialog('close')
                    })
                    return false
                }
            })
            $('html').trigger('boa-dialog-clicked', [
                $returnFocusLink,
                $this
            ])
            return false
        })
        $('.boa-dialog').each(function () {
            var layerADATxt = $boaLangObj.layerClose
            var $this = $(this)
            $this.addClass('dotted')
            if (!$this.hasClass('no-ada-text')) {
                $this.append('<span class="boa-ada-text ada-hidden">&nbsp;' + layerADATxt + '</span>')
            }
        })
    }

    function closeDialogs() {
        $('.ui-dialog-content').trigger('dialogclose').parent().remove()
    }

    function actionLayerSetup() {
        $('.boa-action').live('click', function (ev) {
            var $link = $(this),
                $returnFocusToLink = $link,
                $id = $link.attr('rel'),
                $content = $('#' + $id),
                title = $content.find('h3').hide().text(),
                $width = 254,
                $classString = $link.attr('class'),
                $class = 'custom action',
                $modal = false,
                $notitle = false,
                closeText = $boaLangObj.closeText,
                dataCloseADAText = $link.attr('data-close-ada-text'),
                taskLayerType = '',
                taskLayerPosition = '',
                _offsetTop = $link.offset().top,
                _offsetTopAdjust = 51,
                _offsetLeft = $link.offset().left,
                _offsetLeftAdjust = 40,
                _browserWidth = $('body').width(),
                _left,
                _arrowPosition,
                _topAdjust,
                _dialogLeft,
                _dialogTop,
                _arrowPositionAdjust = 0,
                _arrowMaxPosition,
                _linkWidth = $link.width(),
                $activeActionLink = $link,
                activeMouseTop = ev.pageY,
                activeMouseLeft = ev.pageX,
                checkClassWidth,
                positionCollision = $link.attr('data-ui-layer-collision') || 'fit none'
            if ($link.hasClass('close-dialogs')) {
                $('.ui-dialog').remove()
            }
            if ($link.hasClass('boa-action-notitle')) {
                $notitle = true
                $class += ' boa-action-notitle'
            }
            if ($link.hasClass('action-wide')) {
                $width = 500
                $class += ' wide'
            } else {
                if ($link.hasClass('action-width-742')) {
                    $width = 742
                    $class += ' width-742'
                } else {
                    if ($link.hasClass('fsd3-modeless-left')) {
                        $class += ' fsd3 left-arrow'
                    } else {
                        if ($link.hasClass('fsd3-modeless-right')) {
                            $class += ' fsd3 right-arrow'
                        }
                    }
                }
            }
            if ($link.hasClass('boa-action-modal')) {
                $modal = true
                $class += ' boa-action-modal'
            }
            var taskLayerCustomClass = $classString.match(/(task-layer-custom-class-.*)/)
            if (taskLayerCustomClass !== null && taskLayerCustomClass.length > 0 && typeof (taskLayerCustomClass[1]) !== 'undefined') {
                $class += ' ' + taskLayerCustomClass[1]
            }
            if ($link.hasClass('boa-com-task-layer-link') || $link.hasClass('boa-task-layer-link')) {
                closeDialogs()
                taskLayerType = 'boa-com-task-layer'
                checkClassWidth = $classString.match(/boa(-com)?-task-layer-width-(\d+)/)
                if (checkClassWidth !== null && checkClassWidth.length > 1 && typeof (checkClassWidth[2]) !== 'undefined') {
                    $width = parseInt(checkClassWidth[2])
                } else {
                    $width = 361
                }
                if ($link.hasClass('boa-task-layer-mini')) {
                    taskLayerType = 'boa-task-layer-mini'
                    $class += ' boa-com-task-layer boa-task-layer-mini'
                    if (checkClassWidth !== null && checkClassWidth.length > 1 && typeof (checkClassWidth[2]) !== 'undefined') {
                        $width = parseInt(checkClassWidth[2])
                    } else {
                        $width = 150
                    }
                    if ($link.hasClass('boa-task-layer-right')) {
                        taskLayerPosition = 'right'
                    } else {
                        if (_offsetLeft > $width) {
                            taskLayerPosition = 'left'
                            $class += ' boa-com-task-left left '
                        }
                    }
                } else {
                    if ($link.hasClass('boa-task-custom-doc-inbox')) {
                        taskLayerType = 'boa-olb-task-layer'
                        taskLayerPosition = 'right'
                        $width = 235
                        $class += ' boa-task-layer boa-task-custom-doc-inbox'
                    } else {
                        if ($link.hasClass('boa-com-task-layer-top')) {
                            taskLayerPosition = 'top'
                            $class += ' boa-com-task-layer boa-com-task-top '
                        } else {
                            if ($link.hasClass('boa-com-task-layer-bottom')) {
                                taskLayerPosition = 'bottom'
                                $class += ' boa-com-task-layer boa-com-task-bottom '
                            } else {
                                if ($link.hasClass('boa-com-task-layer-left')) {
                                    taskLayerPosition = 'left'
                                    $class += ' boa-com-task-layer boa-com-task-left left '
                                } else {
                                    if ($link.hasClass('boa-com-task-layer-right') || $link.hasClass('boa-task-layer-right')) {
                                        taskLayerPosition = 'right'
                                        $class += ' boa-com-task-layer '
                                    } else {
                                        if (_offsetLeft > $width) {
                                            taskLayerPosition = 'left'
                                            $class += ' boa-com-task-layer boa-com-task-left left '
                                        } else {
                                            $class += ' boa-com-task-layer '
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (taskLayerPosition.length === 0) {
                if (_offsetLeft > $width) {
                    _left = _offsetLeft - ($width + _offsetLeftAdjust)
                    $class += ' left'
                    taskLayerPosition = 'left'
                } else {
                    _left = (_offsetLeft + $link.width()) + _offsetLeftAdjust
                }
            }
            $content.dialog({
                modal: $modal,
                title: title,
                draggable: false,
                resizable: false,
                dialogClass: $class,
                closeText: closeText,
                width: $width,
                open: function (event) {
                    var $this = $(this)
                    var _mouseTop,
                        _mouseLeft,
                        _top,
                        spacingX,
                        spacingY,
                        _dialogHeight,
                        _dialogWidth,
                        _scrollTop,
                        _scrollLeft,
                        _availTop,
                        _availRight,
                        _availBottom,
                        _availLeft,
                        _forceTop,
                        _screenHeight,
                        _linkCenter
                    var _eventKeyPress = false
                    if (ev.pageX <= 0 || ev.pageX > $returnFocusToLink.offset().left + $returnFocusToLink.width()) {
                        _eventKeyPress = true
                    }
                    _mouseLeft = _eventKeyPress ? $returnFocusToLink.offset().left + ($returnFocusToLink.width() / 2) : ev.pageX
                    _linkCenter = $returnFocusToLink.offset().top + ($returnFocusToLink.height() / 2)
                    _mouseTop = _linkCenter > 0 ? _linkCenter : $returnFocusToLink.offset().top
                    spacingX = 10
                    spacingY = 20
                    _dialogHeight = $this.outerHeight()
                    _dialogParentHeight = $this.parent().height()
                    _dialogWidth = $this.outerWidth()
                    _scrollTop = $(document).scrollTop()
                    _scrollLeft = $(document).scrollLeft()
                    _screenHeight = $('body').height()
                    _availTop = (_mouseTop - _scrollTop - _dialogHeight - spacingY) > 0
                    _availRight = (_mouseLeft + _dialogWidth + _scrollLeft + spacingX) < $(window).width()
                    _availBottom = (_mouseTop + _scrollTop + _dialogHeight + spacingY) < $(window).height()
                    _availLeft = (_mouseLeft - _dialogWidth - _scrollLeft - spacingX) > 0
                    var $dialogWrapper = $this.closest('.ui-dialog')
                    var $dialogTitle = $('.ui-dialog-title', $dialogWrapper)
                    var $dialogCloseLink = $('.ui-dialog-titlebar-close', $dialogWrapper)
                    if ($notitle === true) {
                        $dialogTitle.empty().removeAttr('role').removeAttr('title')
                        $dialogCloseLink.find('span').append('<span class="ada-hidden"> ' + $boaLangObj.closeText + '</span>')
                    } else {
                        if (taskLayerType === 'boa-task-layer-mini') {
                            $dialogTitle.empty()
                        }
                    }
                    var closeADAText = $boaLangObj.layerClose
                    var endOfLayerADAText = $boaLangObj.endOfLayer
                    if (dataCloseADAText && dataCloseADAText.length > 0) {
                        closeADAText += $boaLangObj.layerCloseSpacer + dataCloseADAText
                    } else {
                        if (title.length > 0) {
                            closeADAText += $boaLangObj.layerCloseSpacer + title
                        } else {
                            if ($returnFocusToLink.length > 0 && $returnFocusToLink.text().length > 0) {
                                closeADAText += $boaLangObj.layerCloseSpacer + $returnFocusToLink.text().replace(/layer/g, '')
                            } else {
                                if ($this.find('p').length > 0) {
                                    closeADAText += $boaLangObj.layerCloseSpacer + $this.find('p:first').text().substr(0, 50)
                                }
                            }
                        }
                    }
                    $dialogCloseLink.append('<span class="ada-hidden">&nbsp; ' + closeADAText + '</span>').removeAttr('role').removeAttr('title').attr('id', $id + '-CloseLink')
                    if (boaVerCheck('1.12.1', 'jqueryui')) {
                        $dialogCloseLink.find('span.ui-icon-closethick').remove()
                        $dialogCloseLink.addClass('ui-state-default').append('<span class="ui-button-icon ui-icon ui-icon-closethick" style="display:inline-block"></span>')
                    }
                    $dialogTitle.detach()
                    $dialogCloseLink.after($dialogTitle).focus()
                    if ($('.boa-ada-end', $this).length === 0) {
                        $this.append('<div class="boa-ada-end ada-hidden">&nbsp;' + endOfLayerADAText + '</div>')
                    }
                    if ($modal === false) {
                        if ($('.dialog-arrow', $this).length < 1) {
                            $this.dialog().parent().append('<div class="dialog-arrow"></div>')
                        }
                        var _currentScroll = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop
                    }
                    if ($('.cardlytics-flyout:visible').length > 0) {
                        $('.cardlytics-flyout:visible').parents('.ui-dialog').css('top', $activeActionLink.position().top - 50).css('left', $activeActionLink.position().left + $activeActionLink.width() + 50).removeClass('left')
                    } else {
                        if ($('.alt-cardlytics-flyout:visible').length > 0) {
                            $('.alt-cardlytics-flyout:visible').parents('.ui-dialog').addClass('left').css('top', activeMouseTop - 55).css('left', (activeMouseLeft - $('.alt-cardlytics-flyout:visible').width()) - 120).css('right', (activeMouseLeft + $('.alt-cardlytics-flyout:visible').width()) - 120)
                        } else {
                            if (taskLayerType === 'boa-com-task-layer' && taskLayerPosition === 'bottom') {
                                if (boaVerCheck('1.11.0', 'jqueryui') && $.ui.position) {
                                    $this.dialog('option', 'position', {
                                        my: 'center top+30',
                                        at: 'center bottom',
                                        of: $returnFocusToLink,
                                        collision: positionCollision
                                    })
                                } else {
                                    $this.dialog('widget').position({
                                        my: 'left top',
                                        at: 'left bottom',
                                        of: $returnFocusToLink,
                                        offset: '-40 28',
                                        collision: positionCollision
                                    })
                                }
                                _offsetTopAdjust = 260
                                _offsetLeftAdjust = -40
                                _arrowPositionAdjust = -25
                                _arrowMaxPositionAdjust = 20
                                _left = (_offsetLeft + _offsetLeftAdjust)
                                _topAdjust = (_offsetTop - _currentScroll) - $this.dialog().parent().height() + _offsetTopAdjust
                                dialogOffset = $dialogWrapper.offset()
                                _dialogLeft = dialogOffset.left
                                _dialogTop = dialogOffset.top
                                _arrowPosition = _mouseLeft - _dialogLeft + _arrowPositionAdjust
                                _arrowMaxPosition = _dialogWidth - _arrowMaxPositionAdjust
                                if (_arrowPosition > _arrowMaxPosition) {
                                    _arrowPosition = _arrowMaxPosition
                                } else {
                                    if (_arrowPosition < 5) {
                                        _arrowPosition = 5
                                    }
                                }
                                $('.dialog-arrow', $dialogWrapper).css('left', _arrowPosition)
                            } else {
                                if (taskLayerType === 'boa-com-task-layer' && taskLayerPosition === 'top') {
                                    _offsetTopAdjust = -50
                                    _offsetLeftAdjust = -40
                                    _arrowPositionAdjust = -25
                                    _arrowMaxPositionAdjust = 20
                                    _left = (_offsetLeft + _offsetLeftAdjust)
                                    _topAdjust = (_offsetTop - _currentScroll) - $this.dialog().parent().height() + _offsetTopAdjust
                                    if (boaVerCheck('1.11.0', 'jqueryui') && $.ui.position) {
                                        $this.dialog('option', 'position', {
                                            my: 'center bottom-30',
                                            at: 'center top',
                                            of: $returnFocusToLink,
                                            collision: positionCollision
                                        })
                                    } else {
                                        $this.dialog('option', 'position', [
                                            _left,
                                            _topAdjust
                                        ])
                                    }
                                    dialogOffset = $dialogWrapper.offset()
                                    _dialogLeft = dialogOffset.left
                                    _dialogTop = dialogOffset.top
                                    _arrowPosition = _mouseLeft - _dialogLeft + _arrowPositionAdjust
                                    _arrowMaxPosition = _dialogWidth - _arrowMaxPositionAdjust
                                    if (_arrowPosition > _arrowMaxPosition) {
                                        _arrowPosition = _arrowMaxPosition
                                    } else {
                                        if (_arrowPosition < 8) {
                                            _arrowPosition = 8
                                        }
                                    }
                                    $('.dialog-arrow', $dialogWrapper).css('left', _arrowPosition)
                                } else {
                                    if (taskLayerType === 'boa-com-task-layer') {
                                        _offsetTopAdjust = 70
                                        _arrowPositionAdjust = -25
                                        _arrowMaxPositionAdjust = 40
                                        if (taskLayerPosition === 'left') {
                                            _offsetLeftAdjust = -90
                                            _left = (_offsetLeft - $this.width()) + _offsetLeftAdjust
                                        } else {
                                            _offsetLeftAdjust = 40
                                            _left = (_offsetLeft + _linkWidth) + _offsetLeftAdjust
                                        }
                                        _topAdjust = (_offsetTop - _currentScroll) - _offsetTopAdjust
                                        if (boaVerCheck('1.11.0', 'jqueryui') && $.ui.position) {
                                            if (taskLayerPosition === 'left') {
                                                $this.dialog('option', 'position', {
                                                    my: 'right-30 center',
                                                    at: 'left center',
                                                    of: $returnFocusToLink,
                                                    collision: positionCollision
                                                })
                                            } else {
                                                $this.dialog('option', 'position', {
                                                    my: 'left+30 center',
                                                    at: 'right center',
                                                    of: $returnFocusToLink,
                                                    collision: positionCollision
                                                })
                                            }
                                        } else {
                                            $this.dialog('option', 'position', [
                                                _left,
                                                _topAdjust
                                            ])
                                        }
                                        dialogOffset = $dialogWrapper.offset()
                                        _dialogLeft = dialogOffset.left
                                        _dialogTop = dialogOffset.top
                                        _arrowPosition = _mouseTop - _dialogTop + _arrowPositionAdjust
                                        _arrowMaxPosition = _dialogParentHeight - _arrowMaxPositionAdjust
                                        if (_arrowPosition > _arrowMaxPosition) {
                                            _arrowPosition = _arrowMaxPosition
                                        }
                                        $('.dialog-arrow', $dialogWrapper).css('top', _arrowPosition)
                                    } else {
                                        if (taskLayerType === 'boa-task-layer-mini') {
                                            _offsetTopAdjust = 40
                                            _arrowPositionAdjust = -25
                                            _arrowMaxPositionAdjust = 30
                                            if (taskLayerPosition === 'left') {
                                                _offsetLeftAdjust = -70
                                                _left = (_offsetLeft - $this.width()) + _offsetLeftAdjust
                                            } else {
                                                _offsetLeftAdjust = 25
                                                _left = (_offsetLeft + _linkWidth) + _offsetLeftAdjust
                                            }
                                            _topAdjust = (_offsetTop - _currentScroll) - _offsetTopAdjust
                                            if (boaVerCheck('1.11.0', 'jqueryui') && $.ui.position) {
                                                if (taskLayerPosition === 'left') {
                                                    $this.dialog('option', 'position', {
                                                        my: 'right-30 center',
                                                        at: 'left center',
                                                        of: $returnFocusToLink,
                                                        collision: positionCollision
                                                    })
                                                } else {
                                                    $this.dialog('option', 'position', {
                                                        my: 'left+30 center',
                                                        at: 'right center',
                                                        of: $returnFocusToLink,
                                                        collision: positionCollision
                                                    })
                                                }
                                            } else {
                                                $this.dialog('option', 'position', [
                                                    _left,
                                                    _topAdjust
                                                ])
                                            }
                                            dialogOffset = $dialogWrapper.offset()
                                            _dialogLeft = dialogOffset.left
                                            _dialogTop = dialogOffset.top
                                            _arrowPosition = _mouseTop - _dialogTop + _arrowPositionAdjust
                                            _arrowMaxPosition = _dialogParentHeight - _arrowMaxPositionAdjust
                                            if (_arrowPosition > _arrowMaxPosition) {
                                                _arrowPosition = _arrowMaxPosition
                                            }
                                            $('.dialog-arrow', $dialogWrapper).css('top', _arrowPosition)
                                        } else {
                                            if (taskLayerType === 'boa-olb-task-layer') {
                                                _offsetTopAdjust = 41
                                                _arrowPositionAdjust = -47
                                                _arrowMaxPositionAdjust = 40
                                                _topAdjust = (_offsetTop - _currentScroll) - _offsetTopAdjust
                                                if (taskLayerPosition === 'left') {
                                                    _offsetLeftAdjust = -50
                                                    _left = (_offsetLeft - $this.width()) + _offsetLeftAdjust
                                                } else {
                                                    _offsetLeftAdjust = 30
                                                    _left = (_offsetLeft + _linkWidth) + _offsetLeftAdjust
                                                }
                                                if (boaVerCheck('1.11.0', 'jqueryui') && $.ui.position) {
                                                    if (taskLayerPosition === 'left') {
                                                        $this.dialog('option', 'position', {
                                                            my: 'right-30 center',
                                                            at: 'left center',
                                                            of: $returnFocusToLink,
                                                            collision: positionCollision
                                                        })
                                                    } else {
                                                        $this.dialog('option', 'position', {
                                                            my: 'left+30 center',
                                                            at: 'right center',
                                                            of: $returnFocusToLink,
                                                            collision: positionCollision
                                                        })
                                                    }
                                                } else {
                                                    $this.dialog('option', 'position', [
                                                        _left,
                                                        _topAdjust
                                                    ])
                                                }
                                                dialogOffset = $dialogWrapper.offset()
                                                _dialogLeft = dialogOffset.left
                                                _dialogTop = dialogOffset.top
                                                _arrowPosition = _mouseTop - _dialogTop + _arrowPositionAdjust
                                                _arrowMaxPosition = _dialogHeight - _arrowMaxPositionAdjust
                                                if (_arrowPosition > _arrowMaxPosition) {
                                                    _arrowPosition = _arrowMaxPosition
                                                }
                                                $('.dialog-arrow', $dialogWrapper).css('margin-top', _arrowPosition)
                                            } else {
                                                if ($modal === false) {
                                                    var _topAdjust = (_offsetTop - _currentScroll) - 51
                                                    $this.dialog('option', 'position', [
                                                        _left,
                                                        _topAdjust
                                                    ])
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                close: function () {
                    var $dialogWrapper = $(this).closest('.ui-dialog')
                    $('.ui-dialog-titlebar-close', $dialogWrapper).find('.ada-hidden').remove()
                    if ($returnFocusToLink.length && $returnFocusToLink.is(':visible')) {
                        $returnFocusToLink.focus()
                    }
                }
            }).dialog('open')
            $('#' + $id).parent().removeAttr('role')
            return false
        }).each(function () {
            var $this = $(this)
            var layerADAText = $boaLangObj.layerClose
            if ($this.hasClass('boa-action-hover')) {
                $this.mouseover(function (ev) {
                    $this.click()
                })
            }
            $this.addClass('dotted')
            if (!$this.hasClass('no-ada-text')) {
                $this.append('<span class="boa-ada-text ada-hidden">&nbsp;' + layerADAText + '</span>')
            }
        })
    }

    function toggleSetup() {
        $('.boa-toggle').each(function () {
            var $id = $(this).attr('rel')
            if (!$id) {
                return
            }
            $(this).addClass('content-expand-link')
            $(this).click(function () {
                $('#' + $id).toggleClass('hidden')
                $(this).toggleClass('toggle-down')
                return false
            })
        })
    }

    function printPage() {
        $('.print-page').each(function () {
            $(this).click(function () {
                window.print()
                return false
            })
        })
    }

    function stateLicensePopupSetup() {
        $('a[name="state_license_information"]').click(function (ev) {
            var url = $(this).attr('href')
            return displayPopup(url)
        })
    }

    function linkStyling() {
        $('.guillemet').addClass('guillement-set')
        $('.style-link').each(function () {
            $a = $(this)
            switch (true) {
                case $a.hasClass('guillemet-right') :
                    $a.append('&nbsp;')
                    var newArrows = $('<span class="guillemet">&#8250;&#8250;</span>').appendTo($a),
                        arialTest = $('<span class="guillemet" style="font-family:Arial, Helvetica, sans-serif; visibilty:hidden; letter-spacing:-3px; ">&#8250;&#8250;</span>').appendTo($a),
                        franklinTest = $('<span class="guillemet" style="font-family: Franklin Gothic medium; visibilty:hidden; letter-spacing:-3px; ">&#8250;&#8250;</span>').appendTo($a)
                    if (newArrows.width() === arialTest.width() || newArrows.width() === franklinTest.width()) {
                        newArrows.addClass('ls-n1')
                    }
                    arialTest.remove()
                    franklinTest.remove()
                    break
                case $a.hasClass('guillemet-left') :
                    $a.prepend('&nbsp;')
                    var newArrows = $('<span class="guillemet">&#8249;&#8249;</span>').prependTo($a),
                        arialTest = $('<span class="guillemet" style="font-family:Arial, Helvetica, sans-serif; visibilty:hidden; letter-spacing:-3px; ">&#8249;&#8249;</span>').prependTo($a),
                        franklinTest = $('<span class="guillemet" style="font-family: Franklin Gothic medium; visibilty:hidden; letter-spacing:-3px; ">&#8249;&#8249;</span>').prependTo($a)
                    if (newArrows.width() === arialTest.width() || newArrows.width() === franklinTest.width()) {
                        newArrows.addClass('ls-n1')
                    }
                    arialTest.remove()
                    franklinTest.remove()
                    break
                case $a.hasClass('link-interstitial') :
                    var $this = $(this)
                    var thisID = $this.attr('id')
                    var thisTargetLang = $this.attr('data-target-language').toLowerCase()
                    if (thisTargetLang && thisTargetLang !== $boaLangObj.boaLang) {
                        var $modalContent = '<div id="boaLangNotAvailableModalContent" class="hide"><h3 class="hide">' + $boaLangObj.langNotAvailable.title + '</h3><div class="flex-modal-main-content">' + $boaLangObj.langNotAvailable.content + '</div><div class="buttons-container" style="margin: 20px 0 10px 0"><a href="javascript:void(0);" class="btn-bofa btn-bofa-small btn-bofa-blue" id="continueLangNotAvailable"><span>' + $boaLangObj.langNotAvailable.continueBtn + '</span></a><a href="javascript:void(0);" class="btn-bofa btn-bofa-small" id="closeLangNotAvailableModal"><span>' + $boaLangObj.cancel + '</span></a><div class="clearboth"></div></div></div>'
                        $this.click(function () {
                            if ($('#boaLangNotAvailableModalContent').length === 0) {
                                $('body').append($modalContent)
                            }
                            $('#boaLangNotAvailableModalContent').boaFlexModal({
                                skin: 'modal-flex',
                                width: 600,
                                closeTriggers: $('#closeLangNotAvailableModal')
                            })
                            $('#continueLangNotAvailable').attr('href', $this.attr('href'))
                            return false
                        })
                    }
                    break
            }
        })
        $('.guillemet').not('.guillemet-set').each(function () {
            var guillemetFontSize = parseInt($(this).parent().css('font-size'))
            if (guillemetFontSize < 12) {
                $(this).addClass('f-11')
            }
            if (guillemetFontSize < 11) {
                $(this).addClass('ls-n2')
            }
        }).addClass('guillement-set')
    }

    function dartTagSetup() {
        if (boaVerCheck('1.7.1', 'jquery')) {
            $('a.dart-click').on('click', function () {
                var $a = $(this),
                    source = $a.data('dart-src'),
                    type = $a.data('dart-type'),
                    category = $a.data('dart-cat'),
                    event = $a.data('dart-event-type'),
                    order = (event == 'FireOnClickWithoutNumParam') ? false : true,
                    url = $a.data('dart-url')
                dartTag.fire({
                    source: source,
                    type: type,
                    category: category,
                    order: order,
                    url: url
                })
            })
        }
    }

    function boaModuleKickoff() {
        boaGlobalData = window.boaGlobalData || {}
        boaGlobalData.modulesInit = []
        var $boaModules = $('.boa-module-init')
        $boaModules.each(function () {
            var $module = $(this)
            var moduleInit = $module.data('init')
            var moduleJS = $module.data('js') || ''
            var moduleCSS = $module.data('css') || ''
            var moduleView = $module.data('view') || ''
            var moduleInitOptions = ''
            try {
                moduleInitOptions = $module.data('options')
                if (typeof window[moduleInit] !== 'undefined' && typeof window[moduleInit].init === 'function') {
                    window[moduleInit].init(moduleInitOptions)
                }
                var m = {
                    module: moduleInit,
                    js: moduleJS,
                    css: moduleCSS,
                    rwdView: moduleView
                }
                boaGlobalData.modulesInit.push(m)
            } catch (e) {
            }
        })
    }

    function boaCommonSetup() {
        if (typeof boaGlobalData !== 'undefined' && typeof window.boaPageDataJS !== 'undefined') {
            boaGlobalData.pageDataJS = $.extend({}, boaGlobalData.pageDataJS, window.boaPageDataJS)
        }
        boaModuleKickoff()
        $('.btn-bofa').each(function () {
            var $this = $(this)
            if (!$this.siblings('.btn-bofa').length) {
                $this.addClass('btn-bofa-noRight')
            } else {
                $this.parent().children('.btn-bofa:last').addClass('btn-bofa-noRight')
            }
        })
        var $closeInlineMessage = $('.close-inline-message')
        if ($closeInlineMessage.length > 0) {
            $('.close-inline-message-link').click(function () {
                $(this).closest('.close-inline-message').hide()
            })
        }
        var $altTableRows = $('.table-vzd-alt-row table')
        if ($altTableRows.length > 0) {
            $('tr:nth-child(2n)', $altTableRows).addClass('alt-colored-tr')
        }
        var $guillemetFontAdjust = $('.guillemet')
        if ($guillemetFontAdjust.length > 0) {
            $guillemetFontAdjust.each(function () {
                var guillemetFontSize = parseInt($(this).parent().css('font-size'))
                if (guillemetFontSize < 12) {
                    $(this).addClass('f-11')
                }
                if (guillemetFontSize < 11) {
                    $(this).addClass('ls-n2')
                }
            })
        }
        $('.new-window-hover').hover(function () {
            $(this).children('img').addClass('d-inline')
        }, function () {
            $(this).children('img').removeClass('d-inline')
        })
        var $toggleInputs = $('input.toggle-input-value')
        if ($toggleInputs.length > 0) {
            $toggleInputs.focus(function () {
                if ($(this).attr('readonly') != true) {
                    $(this).val('')
                }
            })
            $toggleInputs.blur(function () {
                if (($(this).val() === '') || ($(this).val() === ' ')) {
                    $(this).val($(this).attr('title'))
                }
            })
        }
        if ($.isFunction(window.placeholder)) {
            $('input[placeholder], textarea[placeholder]').placeholder()
        }
    }

    return {
        init: init,
        jsSetup: jsSetup
    }
})()
boa.common.jsSetup()
jQuery(document).ready(boa.common.init);
(function ($) {
    jQuery.fn.boaAccordion = function (options) {
        var $accordion = $(this)
        options = jQuery.extend({
            showOnLoad: [
                0
            ],
            multipleOpen: false
        }, options)
        return $accordion.each(function () {
            if (options.multipleOpen) {
                $('div.content-area', $accordion).hide()
                $('a.heading', $accordion).click(function () {
                    $(this).next().toggle().end().find('span.title').toggleClass('active-state')
                    return false
                })
                jQuery.each(options.showOnLoad, function () {
                    $accordion.children().eq(this).find('a.heading').trigger('click')
                })
            } else {
                $accordion.accordion({
                    autoHeight: false
                })
                $accordion.accordion('activate', options.showOnLoad[0])
                $accordion.children().eq(options.showOnLoad[0]).find('span.title').addClass('active-state')
                $('.title', $accordion).click(function () {
                    $('span', $accordion).removeClass('active-state')
                    $(this).addClass('active-state')
                })
            }
        })
    }
})(jQuery);
(function ($) {
    jQuery.fn.boaFlexModal = function (options) {
        var returnFocusToLink
        if (document.activeElement) {
            returnFocusToLink = document.activeElement
        } else {
            returnFocusToLink = $('body')
        }
        var $modal = $(this)
        $boaLangObj = boaLangSetup()
        options = jQuery.extend({
            skin: 'modal-flex',
            width: 334,
            className: '',
            onOpen: function () {
            },
            onClose: function () {
            },
            closeTriggers: null,
            closeOnEscape: true
        }, options)
        var modalClass = ''
        var modalSize = ''
        if (options.skin === 'modal-flex') {
            if (options.width > 580) {
                modalClass = 'modal-flex modal-flex-large'
            } else {
                modalClass = 'modal-flex'
            }
        } else {
            if (options.skin === 'modal-flex-alert') {
                modalClass = 'modal-flex modal-flex-alert'
            }
        }
        modalSize = options.width
        modalClass += ' ' + options.className
        if (options.closeTriggers !== null && options.closeTriggers.length > 0) {
            $(options.closeTriggers).click(function () {
                $modal.dialog('close')
            })
        }
        return $modal.each(function () {
            $modal.dialog({
                modal: true,
                resizable: false,
                closeOnEscape: options.closeOnEscape,
                closeText: $boaLangObj.closeText,
                dialogClass: modalClass,
                width: modalSize,
                title: ' ',
                open: function () {
                    var $modalParent = $modal.parent()
                    var modalFirstOpen = true
                    if ($modalParent.hasClass('bac-dialog-open')) {
                        modalFirstOpen = false
                    }
                    $modalParent.removeAttr('role')
                    var modalContainerID = $modal.attr('id')
                    if (modalContainerID && modalContainerID.length > 0) {
                        $modalParent.attr('id', modalContainerID + '-ModalContainer')
                    }
                    var $modalTitleLabeledBy = $modalParent.find('.ui-dialog-title')
                    var modalTitleLabeledByID = $modalTitleLabeledBy.attr('id')
                    var $modalTitle = null
                    if ($modal.find('h2:first').length > 0) {
                        $modalTitle = $modal.find('h2:first')
                    } else {
                        if ($modal.find('h3:first').length > 0) {
                            $modalTitle = $modal.find('h3:first')
                        } else {
                            if ($modal.find('h4:first').length > 0) {
                                $modalTitle = $modal.find('h4:first')
                            }
                        }
                    }
                    if ($modalTitle !== null && $modalTitle.length > 0 && modalTitleLabeledByID && modalTitleLabeledByID.length > 0) {
                        $modalTitleLabeledBy.removeAttr('id')
                        $modalTitle.attr('id', modalTitleLabeledByID)
                    }
                    if ($modalParent.hasClass('modal-flex')) {
                        $modalParent.children()
                    }
                    var $modalCloseLink = $modalParent.find('.ui-dialog-titlebar-close')
                    if ($modalCloseLink.find('.bac-dialog-open').length === 0) {
                        var closeADAText = $boaLangObj.layerClose
                        var endOfLayerADAText = $boaLangObj.endOfLayer
                        var closeText = $boaLangObj.closeText
                        $modalCloseLink.empty()
                        $modalCloseLink.append('<span class="ui-button-text">' + closeText + '</span>')
                        $modalCloseLink.css({
                            border: 'none'
                        })
                        if ($modalTitle !== null && $modalTitle.length > 0 && $modalTitle.text().length > 0) {
                            closeADAText += $boaLangObj.layerCloseSpacer + $modalTitle.text()
                        } else {
                            if ($modal.find('p').length > 0) {
                                closeADAText += $boaLangObj.layerCloseSpacer + $modal.find('p:first').text().substr(0, 50)
                            }
                        }
                        $modalCloseLink.attr('id', modalContainerID + '-modalClose').removeAttr('role').removeAttr('title').append('<span class="ada-hidden bac-dialog-open">&nbsp; ' + closeADAText + '</span>').attr('href', 'javascript:void(0);')
                    }
                    $modalCloseLink.focus()
                    if ($modal.find('.bac-ada-end').length === 0) {
                        $modal.append('<span class="bac-ada-end ada-hidden">&nbsp;' + endOfLayerADAText + '</span>')
                    }
                    $modalParent.addClass('bac-dialog-open')
                    if (options.onOpen !== null && $.isFunction(options.onOpen) === true) {
                        options.onOpen()
                    }
                },
                close: function () {
                    if (options.onClose !== null && $.isFunction(options.onClose) === true) {
                        options.onClose()
                    }
                    if ($(returnFocusToLink).length && $(returnFocusToLink).is(':visible')) {
                        returnFocusToLink.focus()
                    }
                }
            }).dialog('open')
        })
    }
    jQuery.fn.boaModal = function (options) {
        var returnFocusToLink
        if (document.activeElement) {
            returnFocusToLink = document.activeElement
        } else {
            returnFocusToLink = $('body')
        }
        var $modal = $(this)
        $boaLangObj = boaLangSetup()
        options = jQuery.extend({
            size: 'small',
            width: 334,
            buttons: {
                Cancel: false
            },
            className: 'custom-class',
            onOpen: null,
            callback: null,
            focusCloseLink: true,
            closeOnEscape: true
        }, options)
        var focusCloseLink = options.focusCloseLink
        var modalClass = ''
        var modalSize = ''
        if (options.size === 'small') {
            modalClass = 'custom modal'
            modalSize = options.width
        } else {
            if (options.size === 'med') {
                modalClass = 'custom modal modal-med'
                modalSize = 450
            } else {
                if (options.size === 'modal-500px') {
                    modalClass = 'custom modal modal-500px'
                    modalSize = 500
                } else {
                    if (options.size === 'modal-500px-tall') {
                        modalClass = 'custom modal modal-500px-tall'
                        modalSize = 500
                    } else {
                        if (options.size === 'lg') {
                            modalClass = 'custom modal modal-large ml-large'
                            modalSize = 520
                        } else {
                            if (options.size === 'custom') {
                                modalClass = 'custom modal'
                                modalSize = options.width
                            } else {
                                if (options.size === 'flex-width') {
                                    modalClass = 'modal-flex'
                                    modalSize = options.width
                                } else {
                                    modalClass = 'custom modal modal-large'
                                    modalSize = 742
                                }
                            }
                        }
                    }
                }
            }
        }
        modalClass += ' ' + options.className
        return $modal.each(function () {
            $modal.dialog({
                modal: true,
                bgiframe: true,
                resizable: false,
                closeOnEscape: options.closeOnEscape,
                closeText: $boaLangObj.closeText,
                dialogClass: modalClass,
                width: modalSize,
                open: function () {
                    var $modalParent = $modal.parent()
                    var modalFirstOpen = true
                    if ($modalParent.hasClass('bac-dialog-open')) {
                        modalFirstOpen = false
                    }
                    if ($('div.buttons', $modal).length <= 0) {
                        var $dialog = $(this)
                        var $wrapper = $('<div class="buttons"></div>')
                        var $clearboth = $('<div class="clearboth"></div>')
                        $.each(options.buttons, function (i, val) {
                            if (i === 'Continue') {
                                i = $boaLangObj.continueText
                            } else {
                                if (i === 'Cancel') {
                                    i = $boaLangObj.cancel
                                }
                            }
                            var nameAttr = 'modalbtn_' + i.replace(/ /g, '')
                            var buttonsAltText = ''
                            if (typeof (options.buttonsAltText) !== 'undefined' && typeof (options.buttonsAltText[i]) !== 'undefined' && options.buttonsAltText[i] !== '') {
                                buttonsAltText = 'title="' + options.buttonsAltText[i] + '" '
                            }
                            var $button = $('<a href="javascript:void(0);" class="button-common button-gray mrt-15" name="' + nameAttr + '" ' + buttonsAltText + '><span>' + i + '</span></a>')
                            $button.click(function () {
                                $dialog.dialog('close')
                                options.callback(val)
                            })
                            $button.keypress(function (e) {
                                if (e.which === 13) {
                                    $dialog.dialog('close')
                                    options.callback(val)
                                }
                            })
                            $button.appendTo($wrapper)
                            $clearboth.appendTo($wrapper)
                        })
                        if ($('div.boa-modal-alert', $modal).length > 0) {
                            $wrapper.appendTo($('div.boa-modal-alert', $modal))
                        } else {
                            $wrapper.appendTo($modal)
                        }
                    }
                    var $modalHeader = $modalParent.find('#modal-heading')
                    if ($modalHeader.length > 0) {
                        $modalHeader.attr('tabIndex', 1).focus().css({
                            outline: 'none'
                        })
                    } else {
                        if (focusCloseLink) {
                            $('.ui-dialog-titlebar-close:visible', $modalParent).removeAttr('role').removeAttr('title').focus()
                        } else {
                            $modal.attr('tabindex', 0)
                            $modal.focus()
                            $modal.css({
                                outline: 'none'
                            })
                        }
                    }
                    $modalParent.removeAttr('role')
                    var modalContainerID = $modal.attr('id')
                    if (modalContainerID && modalContainerID.length > 0) {
                        $modalParent.attr('id', modalContainerID + '-ModalContainer')
                    }
                    var $modalTitleLabeledBy = $modalParent.find('.ui-dialog-title')
                    var modalTitleLabeledByID = $modalTitleLabeledBy.attr('id')
                    var $modalTitle = null
                    if ($modal.find('h2:first').length > 0) {
                        $modalTitle = $modal.find('h2:first')
                    } else {
                        if ($modal.find('h3:first').length > 0) {
                            $modalTitle = $modal.find('h3:first')
                        } else {
                            if ($modal.find('h4:first').length > 0) {
                                $modalTitle = $modal.find('h4:first')
                            }
                        }
                    }
                    if ($modalTitle !== null && $modalTitle.length > 0 && modalTitleLabeledByID && modalTitleLabeledByID.length > 0) {
                        $modalTitleLabeledBy.removeAttr('id')
                        $modalTitle.attr('id', modalTitleLabeledByID)
                    }
                    if (modalFirstOpen) {
                        var closeADAText = $boaLangObj.layerClose
                        var endOfLayerADAText = $boaLangObj.endOfLayer
                        if ($modalTitle !== null && $modalTitle.length > 0 && $modalTitle.text().length > 0) {
                            closeADAText += $boaLangObj.layerCloseSpacer + $modalTitle.text()
                        } else {
                            if ($modal.find('p').length > 0) {
                                closeADAText += $boaLangObj.layerCloseSpacer + $modal.find('p:first').text().substr(0, 50)
                            }
                        }
                        $('.ui-dialog-titlebar-close', $modalParent).attr('id', modalContainerID + '-modalClose').removeAttr('role').removeAttr('title').attr('href', 'javascript:void(0);').append('<span class="ada-hidden">&nbsp; ' + closeADAText + '</span>').bind('mousedown click', function () {
                            $modal.dialog('close')
                        })
                        if (boaVerCheck('1.12.1', 'jqueryui')) {
                            $('.ui-dialog-titlebar-close').find('span.ui-icon-closethick').remove()
                            $('.ui-dialog-titlebar-close').addClass('ui-state-default').append('<span \tclass="ui-button-icon ui-icon ui-icon-closethick" style="display:inline-block"></span>')
                        }
                        $modal.append('<span class="boa-ada-end ada-hidden">&nbsp;' + endOfLayerADAText + '</span>')
                    }
                    $modalParent.addClass('bac-dialog-open')
                },
                close: function () {
                    if ($(returnFocusToLink).length && $(returnFocusToLink).is(':visible')) {
                        returnFocusToLink.focus()
                    }
                }
            }).dialog('open')
            if (options.onOpen !== null && $.isFunction(options.onOpen) === true) {
                options.onOpen()
            }
        })
    }
})(jQuery);
(function () {
    jQuery.fn.boaTooltip = function () {
        if (this.length > 0 && !$('#boaTooltip').length) {
            $('body').append('<div id=\'boaTooltip\'><div id=\'boaTooltip-content\'></div><div class=\'boaTooltip-bottom\'></div></div>')
            $('#boaTooltip').css({
                top: -1000,
                left: -1000,
                position: 'absolute',
                zIndex: 100
            })
            $('body').append('<iframe id=\'boaTooltip_iframe\' title=\'iFrame used for layout purposes\' src=\'javascript:false;\'></iframe>')
            $('#boaTooltip_iframe').css({
                top: -1000,
                left: -1000,
                position: 'absolute',
                zIndex: 50,
                opacity: 0
            })
        }
        return this.each(function () {
            $(this).mouseover(function () {
                var tooltip = $('#boaTooltip')
                tooltip.css({
                    top: -1000,
                    left: -1000
                })
                $('#boaTooltip-content').empty()
                boaTooltip_title = $(this).attr('title')
                $(this).attr('title', '')
                $('#boaTooltip-content').append('<p>' + boaTooltip_title + '</p>')
                var position = {
                    t: $(this).offset().top - (tooltip.height() + 20),
                    l: $(this).offset().left
                }
                tooltip.css({
                    top: position.t,
                    left: position.l
                })
                $('#boaTooltip_iframe').css({
                    top: position.t,
                    left: position.l,
                    height: tooltip.height(),
                    width: tooltip.width()
                })
            }).mouseout(function () {
                $('#boaTooltip,#boaTooltip_iframe').css({
                    top: -1000,
                    left: -1000
                })
                $(this).attr('title', boaTooltip_title)
            })
        })
    }
})(jQuery);
(function () {
    jQuery.fn.boaFormHelp = function () {
        if ($('#homepage-content').length > 0) {
            return
        } else {
            if (!$('#boaFormHelp').length) {
                $('body').append('<div id=\'boaFormHelp\' aria-live=\'rude\'><div id=\'boaFormHelp-content\'></div><div class=\'boaFormHelp-bottom\'></div></div>')
                $('#boaFormHelp').css({
                    top: -1000,
                    left: -1000,
                    position: 'absolute',
                    zIndex: 100
                })
                $('body').append('<iframe id=\'boaFormHelp_iframe\' title=\'iFrame used for layout purposes\' src=\'javascript:false;\'></iframe>')
                $('#boaFormHelp_iframe').css({
                    top: -1000,
                    left: -1000,
                    position: 'absolute',
                    zIndex: 50,
                    opacity: 0
                })
            }
        }
        return this.each(function () {
            $(this).focus(function () {
                var formhelp = $('#boaFormHelp')
                formhelp.css({
                    top: -1000,
                    left: -1000
                })
                $('#boaFormHelp-content').empty()
                var $id = $(this).attr('id')
                var $helpContent = $('#' + $id + '-formHelp').html()
                $('#boaFormHelp-content').append($helpContent)
                var position = {
                    t: $(this).offset().top - (formhelp.height() + 30),
                    l: $(this).offset().left + ($(this).width() / 2) - (formhelp.width() / 2)
                }
                formhelp.css({
                    top: position.t,
                    left: position.l
                })
                $('#boaFormHelp_iframe').css({
                    top: position.t,
                    left: position.l,
                    height: formhelp.height(),
                    width: formhelp.width()
                })
                $('#boaFormHelp-content').focus()
            }).mouseout(function () {
            }).blur(function () {
                $('#boaFormHelp,#boaFormHelp_iframe').css({
                    top: -1000,
                    left: -1000
                })
            })
        })
    }
})(jQuery);
(function () {
    jQuery.fn.boaInstructionalHelp = function () {
        if (this.length > 0 && !$('#boaInstructionalHelp').length) {
            $('body').append('<div id=\'boaInstructionalHelp\'><div id=\'boaInstructionalHelp-content\'></div><div class=\'boaInstructionalHelp-bottom\'></div></div>')
            $('#boaInstructionalHelp').css({
                top: -1000,
                left: -1000,
                position: 'absolute',
                zIndex: 100
            })
            $('body').append('<iframe id=\'boaInstructionalHelp_iframe\' title=\'iFrame used for layout purposes\' src=\'javascript:false;\'></iframe>')
            $('#boaInstructionalHelp_iframe').css({
                top: -1000,
                left: -1000,
                position: 'absolute',
                zIndex: 50,
                opacity: 0
            })
        }
        return this.each(function () {
            $(this).mouseover(function () {
                var instructionalhelp = $('#boaInstructionalHelp')
                instructionalhelp.css({
                    top: -1000,
                    left: -1000
                })
                $('#boaInstructionalHelp-content').empty()
                var $id = $(this).attr('rel')
                var $instructionalHelpContent = $('#' + $id).html()
                var $closeButton = $('<div class="button-row"><a href="javascript:void(0);" class="button"><span>OK</span></a></div>')
                $('#boaInstructionalHelp-content').append($instructionalHelpContent).append($closeButton)
                var position = {
                    t: $(this).offset().top - (instructionalhelp.height() + 30),
                    l: $(this).offset().left - (instructionalhelp.width() / 2) + 15
                }
                instructionalhelp.css({
                    top: position.t,
                    left: position.l
                })
                $('#boaInstructionalHelp_iframe').css({
                    top: position.t,
                    left: position.l,
                    height: instructionalhelp.height(),
                    width: instructionalhelp.width()
                })
                $closeButton.click(function () {
                    $('#boaInstructionalHelp,#boaInstructionalHelp_iframe').css({
                        top: -1000,
                        left: -1000
                    })
                    return false
                })
            })
        })
    }
})(jQuery);
(function () {
    jQuery.fn.boaSideModule = function () {
        return this.each(function () {
            var $sideModule = $(this)
            $('.sm-title a', $sideModule).click(function () {
                if ($(this).hasClass('sm-show-title')) {
                    $(this).removeClass('sm-show-title').addClass('sm-hide-title')
                    $('.show-hide-text', $(this)).text($boaLangObj.hide)
                    $('.sm-topcontent-solidbtm', $sideModule).removeClass('hide')
                } else {
                    $(this).removeClass('sm-hide-title').addClass('sm-show-title')
                    $('.show-hide-text', $(this)).text($boaLangObj.show)
                    $('.sm-topcontent-solidbtm', $sideModule).addClass('hide')
                }
            })
        })
    }
    jQuery.fn.capsLockDetection = function () {
        if ($('#homepage-content').length > 0 || $(this).length == 0 || typeof document.msCapsLockWarningOff !== 'undefined') {
            return
        }
        if (!$('#boaCapsLockHelp').length) {
            $('body').append('<div id=\'boaCapsLockHelp\' aria-live=\'rude\' style=\'top: -1000px; left: -1000px; position: absolute; zIndex: 100;\' class=\'hide\'></div>')
        }
        var $capsBubble = $('#boaCapsLockHelp')
        return this.each(function () {
            var $inputField = $(this)
            $inputField.keypress(function (e) {
                var keyCode = (e.keyCode ? e.keyCode : e.which)
                if ((keyCode >= 97 && keyCode <= 122) || (keyCode >= 65 && keyCode <= 90)) {
                    var shifton = false
                    if (e.shiftKey) {
                        shifton = e.shiftKey
                    }
                    if ((keyCode >= 97 && keyCode <= 122 && shifton) || (keyCode >= 65 && keyCode <= 90 && !shifton)) {
                        $capsBubble.empty().append($boaLangObj.capsLock)
                        var position = {
                            t: $inputField.offset().top - ($capsBubble.height() / 2) - 2,
                            l: $inputField.offset().left + ($inputField.width() + 18)
                        }
                        $capsBubble.removeClass('hide').css({
                            top: position.t,
                            left: position.l
                        })
                    } else {
                        $capsBubble.addClass('hide')
                    }
                } else {
                    $capsBubble.addClass('hide')
                }
            }).blur(function () {
                $capsBubble.addClass('hide')
            })
        })
    }
})(jQuery)
$(function () {
    $('.boa-tooltip').boaTooltip()
    $('.boa-formhelp').boaFormHelp()
    $('.boa-instructional').boaInstructionalHelp()
    $('.side-module').boaSideModule()
    $('input.capslock-detect').capsLockDetection()
})

function windowSetup() {
    $('.boa-window').click(function (ev) {
        var options = new Object()
        $(this).addClass('force-visited')
        var $classString = $(this).attr('class')
        if ($classString.match('force-large') || $classString.match('force-xlarge')) {
            options.width = 800
            options.height = 600
        } else {
            if ($classString.match('force-medium')) {
                options.width = 600
                options.height = 400
            } else {
                if ($classString.match('force-small')) {
                    options.width = 300
                    options.height = 200
                } else {
                    options.width = 200
                    options.height = 100
                }
            }
        }
        var args = ''
        args += 'height=' + options.height + ','
        args += 'width=' + options.width + ','
        options.y = Math.floor((screen.availHeight - (options.height || screen.height)) / 2) - (screen.height - screen.availHeight)
        options.x = Math.floor((screen.availWidth - (options.width || screen.width)) / 2) - (screen.width - screen.availWidth)
        args += 'screenx=' + options.x + ','
        args += 'screeny=' + options.y + ','
        args += 'left=' + options.x + ','
        args += 'top=' + options.y + ','
        args += 'status=0,'
        args += 'scrollbars=1,'
        args += 'menubar=0,'
        args += 'location=0,'
        args += 'resizable=1'
        var win = window.open(this.href, 'wind', args)
        return false
    })
}

function displayPopup(url) {
    var newWindow = window.open(url, 'boa_dialog_window', 'width=750,height=450,resizable,scrollbars')
    newWindow.focus()
    return false
}

function boaLangSetup() {
    var $boaLangObj = {}
    var lang = $('html').attr('lang').toLowerCase()
    if (lang == 'es-us') {
        $boaLangObj = {
            boaLang: 'es-us',
            closeText: 'cerrar',
            show: 'mostrar',
            hide: 'cultar',
            continueText: 'Continuar',
            cancel: 'Cancelar',
            capsLock: 'El Bloqueador de may&#250;sculas est&#225,activo',
            layerClose: 'Ventana emergente',
            endOfLayer: 'Final de ventana emergente.',
            layerCloseSpacer: ': ',
            langNotAvailable: {
                title: 'La informaci&oacute;n Disponible en Ingl&eacute;s',
                content: '<p>La informaci&oacute;n que se encuentra a continuaci&oacute;n est&aacute; disponible s&oacute;lo en ingl&eacute;s en la actualidad.</p><p>Las solicitudes y los documentos asociados con productos y servicios espec&iacute;ficos podr&iacute;an estar disponibles s&oacute;lo en ingl&eacute;s. Antes de escoger un producto, por favor aseg&uacute;rese de haber le&iacute;do y entendido todos los t&eacute;rminos y condiciones provistas.</p><p>Seleccione Continuar en ingl&eacute;s para obtener m&aacute;s informaci&oacute;n.</p>',
                continueBtn: 'Continuar en ingl&eacute;s'
            }
        }
    } else {
        $boaLangObj = {
            boaLang: 'en-us',
            closeText: 'close',
            show: 'show',
            hide: 'hide',
            continueText: 'Continue',
            cancel: 'Cancel',
            capsLock: 'Caps lock is on',
            layerClose: 'layer',
            endOfLayer: 'End of layer.',
            layerCloseSpacer: ': ',
            langNotAvailable: {
                title: 'Language Not Available',
                content: '<p>The information on this page is not available in English.</p><p>Applications and documents associated with specific products and services may not be available in your language. Before choosing a product, please ensure you have read and understood all terms and conditions provided.</p><p>Select Continue for more information.</p>',
                continueBtn: 'Continue'
            }
        }
    }
    $boaLangObj.bankHolidays = [
        '01/01/2014',
        '01/20/2014',
        '02/17/2014',
        '05/26/2014',
        '07/04/2014',
        '09/01/2014',
        '10/13/2014',
        '11/11/2014',
        '11/27/2014',
        '12/25/2014',
        '01/01/2015',
        '01/01/2015',
        '01/19/2015',
        '02/16/2015',
        '05/25/2015',
        '07/03/2015',
        '09/07/2015',
        '10/12/2015',
        '11/11/2015',
        '11/26/2015',
        '12/25/2015'
    ]
    return $boaLangObj
}

function boaLocationReplace(backURL) {
    if (document.images) {
        location.replace(backURL)
    } else {
        location.href = backURL
    }
    return
}

function boaEqualHeight(group) {
    var tallest = 0
    group.each(function () {
        var thisHeight = $(this).height()
        if (thisHeight > tallest) {
            tallest = thisHeight
        }
    })
    group.height(tallest)
}

function boaEqualWidth(group) {
    var widest = 0
    group.each(function () {
        var thisWidth = $(this).width()
        if (thisWidth > widest) {
            widest = thisWidth
        }
    })
    group.width(widest)
}

function boaCenterAlign(centerElement) {
    if (centerElement.length > 0) {
        var $hrzCenterThis = $(centerElement)
        var hrzCenterLeft = ((($hrzCenterThis.parent().innerWidth()) - ($hrzCenterThis.innerWidth())) / 2) - parseFloat($hrzCenterThis.parent().css('padding-left'))
        $hrzCenterThis.css('margin-left', hrzCenterLeft)
    }
}

$.fn.boaVertAlign = function () {
    return this.each(function (i) {
        var ah = $(this).height()
        var ph = $(this).parent().height()
        var mh = Math.ceil((ph - ah) / 2) - 1
        $(this).css('margin-top', mh)
    })
}
$.fn.setFirstLastCount = function (options) {
    var settings = {
        node: '',
        container: '',
        label: '',
        filter: '*',
        exclude: ''
    }
    settings = $.extend({}, settings, options)
    var node = settings.node,
        label = settings.label,
        container = settings.container
    if (!node || node == '') {
        return
    }
    if (label == '') {
        label = node.replace(/> |\s/g, '')
    }
    $.each($(this).find(node), function () {
        if (container == '') {
            $(this).parent().addClass('setFirstLastCount')
        } else {
            $(container).addClass('setFirstLastCount')
        }
    })
    $('.setFirstLastCount').each(function (i) {
        var $container = $(this),
            $items = $container.find(settings.node).filter(settings.filter).not(settings.exclude),
            total = $items.length
        $items.removeClass('first').removeClass('last').each(function (j) {
            $(this).addClass((j == 0) ? label + '-first first' : '').addClass((j == (total - 1)) ? label + '-last last' : '').addClass(label + (j + 1)).addClass((j % 2) ? 'even' : 'odd')
        })
    }).removeClass('setFirstLastCount')
    return this
}

function boaVerCheck(requiredVersion, type) {
    try {
        if (requiredVersion.match(/^(\d+).(\d+)/)) {
            if (!requiredVersion.match(/^(\d+).(\d+).(\d+)/)) {
                requiredVersion = requiredVersion + '.0'
            }
        } else {
            return false
        }
        var reqVerSplit = splitVer(requiredVersion)
        var loadedVer = (typeof type != 'undefined' && type.length > 0 && type === 'jqueryui') ? $.ui.version : $.fn.jquery
        var loadedVerSplit = splitVer(loadedVer)
        if (loadedVerSplit.major > reqVerSplit.major) {
            return true
        } else {
            if ((loadedVerSplit.major === reqVerSplit.major) && (loadedVerSplit.minor > reqVerSplit.minor)) {
                return true
            } else {
                if ((loadedVerSplit.major === reqVerSplit.major) && (loadedVerSplit.minor === reqVerSplit.minor) && (loadedVerSplit.release >= reqVerSplit.release)) {
                    return true
                } else {
                    return false
                }
            }
        }
    } catch (err) {
        return false
    }

    function splitVer(ver) {
        var matchV = ver.match(/^(\d+).(\d+).(\d+)/)
        if (matchV === null) {
            return matchV
        }
        var v = {
            major: parseInt(matchV[1]),
            minor: parseInt(matchV[2]),
            release: parseInt(matchV[3]),
            build: parseInt(matchV[4])
        }
        return v
    }
}

$.fn.boaScroll = function (options) {
    var $scope = $(this),
        defaults = {
            scrollClass: 'bofa-scroll',
            scrollHighlightOn: 'bofa-scroll-active',
            scrollHighlightOff: 'bofa-scroll-inactive',
            callback: null
        },
        required = {},
        settings = $.extend({}, defaults, options, required),
        s = settings,
        scrollTimeout
    $.fn.toggleHighlight = function (status) {
        var on = (status == 'on') ? s.scrollHighlightOn : s.scrollHighlightOff,
            off = (status == 'on') ? s.scrollHighlightOff : s.scrollHighlightOn
        clearTimeout(s.scrollTimeout)
        return $(this).removeClass(off).addClass(on)
    }
    return $('a[href*="#"]').filter('.' + s.scrollClass).bind('click', function (e) {
        var $a = $(this),
            offset = $a.data('scroll-offset'),
            speed = $a.data('scroll-speed'),
            timeout = $a.data('scroll-highlight'),
            callback = $a.data('callback')
        $('.' + s.scrollHighlightOn).toggleHighlight('off')
        offset = (typeof offset == 'number') ? offset : -25
        speed = (typeof speed == 'number') ? speed : 1000
        timeout = (typeof timeout == 'number') ? timeout : 10000
        callback = (typeof callback !== 'undefined') ? callback : settings.callback
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
            var $target = $(this.hash)
            $target = $target.length && $target || $('[name=' + this.hash.slice(1) + ']')
            if ($target.length) {
                var targetOffset = $target.offset().top + offset,
                    scrollElement = (typeof document.body.scrollTop === 'number') ? 'body' : 'html'
                $('html, body').animate({
                    scrollTop: targetOffset
                }, speed, function () {
                    var component = $target.data('component'),
                        skin = $target.data('skin')
                    switch (component) {
                        case 'module':
                            if (typeof skin != 'string') {
                                $target = $target.find('[data-skin]')
                            }
                        case 'skin':
                        default:
                            $target.toggleHighlight('on')
                            break
                    }
                    if (timeout > 0) {
                        scrollTimeout = setTimeout(function () {
                            $target.toggleHighlight('off')
                        }, timeout)
                    }
                    switch (typeof (callback)) {
                        case 'function':
                            callback(e)
                            break
                        case 'string':
                            if (typeof window[callback] === 'function') {
                                window[callback](e)
                            }
                            break
                    }
                })
                return false
            }
        }
    })
}
$(function () {
    $('html').boaScroll()
})

function boaTLUIFieldValidationError(errorMsg) {
    var $errorMsg = errorMsg
    var $type = 'UIFieldValidationError'
    boaTLAddCustomEvent($errorMsg, $type)
    return
}

function boaTLAddCustomEvent(errorMsg, errorType, errorPage, errorObject) {
    if ((typeof TeaLeaf !== 'undefined') && (typeof TeaLeaf.Event.tlAddCustomEvent !== 'undefined')) {
        var $errorType = 'BOACustomError'
        if (typeof errorType !== 'undefined' && errorType.length > 0) {
            $errorType = errorType
        }
        var $errorPage
        if (typeof errorPage !== 'undefined' && errorPage.length > 0) {
            $errorPage = errorPage
        } else {
            $errorPage = $('title').html()
        }
        var $errorMsg = errorMsg
        var $errorObject = ''
        if (typeof errorObject !== 'undefined' && typeof errorObject.message !== 'undefined' && errorObject.message.length > 0) {
            $errorObject = errorObject.message
        }
        var $nVO = {
            Page: $errorPage,
            ErrorMessage: $errorMsg,
            BrowserException: $errorObject
        }
        TeaLeaf.Event.tlAddCustomEvent($errorType, $nVO)
    }
    return
}

function boaTLAddEvent(event) {
    if ((typeof TeaLeaf !== 'undefined') && (typeof TeaLeaf.Client.tlAddEvent !== 'undefined')) {
        TeaLeaf.Client.tlAddEvent(event)
    }
    return
}

var dartTag = function (options) {
    if (!boaVerCheck('1.0', 'jquery')) {
        return
    }
    var defaults = {
            source: '',
            type: '',
            category: '',
            order: true,
            redirect: null
        },
        required = {
            container: 'DART_OC_CONT',
            $container: $(),
            iframe: 'DART_OC_IFRAME',
            url: 'https://fls.doubleclick.net/activityi{{source}}{{type}}{{category}}{{ordnum}}{{random}}?'
        },
        settings = {},
        _createDartTag = function (options) {
            settings = $.extend(true, {}, defaults, options, required)
            settings.$container = $('#' + settings.container)
            var random = Math.floor(Math.random() * 999999),
                url = settings.url.replace('{{source}}', ';src=' + settings.source).replace('{{type}}', ';type=' + settings.type).replace('{{category}}', ';cat=' + settings.category).replace('{{ordnum}}', settings.order ? ';ord=1;num=' : ';ord=').replace('{{random}}', random).replace(/\{\{.*\}\}/g, ''),
                $iframe = $('<iframe/>').attr('id', settings.iframe + '_' + random).attr('src', url),
                $dart = settings.$container.length > 0 ? settings.$container : $('<div id="' + settings.container + '" style="display:none;"></div>').appendTo('body')
            $dart.append($iframe)
            if (settings.redirect) {
                setTimeout('window.location.href = \'' + settings.redirect + '\';', 1000)
                return false
            }
        }
    return {
        fire: _createDartTag
    }
}()

function dartFireOnClick(source, type, category) {
    dartTag.fire({
        source: source,
        type: type,
        category: category
    })
}

function dartFireOnClickWithoutNumParam(source, type, category) {
    dartTag.fire({
        source: source,
        type: type,
        category: category,
        order: false
    })
}

function dartFireOnClickSpecial(source, type, category, href) {
    dartTag.fire({
        source: source,
        type: type,
        category: category,
        redirect: href
    })
}

function boaOBORestricted(customErrorMessage) {
    var oboRestrictedErrorMsg = customErrorMessage || 'You are restricted from viewing this content'
    var $messagingModule = $('.global-messaging-module')
    $('.page-error-skin .error-text', $messagingModule).each(function () {
        $(this).html(oboRestrictedErrorMsg)
        $messagingModule.show()
        $(this).css('width', $(this).closest('.global-messaging-module .page-error-skin').width() - 60).boaVertAlign()
    })
}

function asyncPrintCssInclude(path) {
    $('<link>', {
        rel: 'stylesheet',
        type: 'text/css',
        media: 'print',
        href: path
    }).appendTo('head')
}

function boaGetCookie(name) {
    var search = name + '='
    var returnvalue = ''
    if (document.cookie.length > 0) {
        offset = document.cookie.indexOf(search)
        if (offset != -1) {
            offset += search.length
            end = document.cookie.indexOf(';', offset)
            if (end == -1) {
                end = document.cookie.length
            }
            returnvalue = unescape(document.cookie.substring(offset, end))
        }
    }
    return returnvalue
}

function boaSetCookie(name, value, days, domain) {
    if (days) {
        var date = new Date()
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000))
        var expires = '; expires=' + date.toGMTString()
    } else {
        var expires = ''
    }
    var domainStr = (domain ? ';domain=.bankofamerica.com' : '')
    document.cookie = name + '=' + value + expires + domainStr + '; path=/'
}

function boaGetUrlParam(name) {
    try {
        var results = new RegExp('[?&]' + name + '=([^&#]*)').exec(window.location.href)
        if (results == null) {
            return null
        } else {
            return decodeURIComponent(results[1]) || null
        }
    } catch (e) {
        return null
    }
}

jQuery.fn.pie = function () {
    return this
}
var selectBofa = function ($, selector) {
    var $this,
        tempShim,
        tempPosition,
        tempWidth,
        tempData,
        shimHolder,
        DEBUGMODE = false,
        debugOn = false,
        ns = 'selectBofa',
        globalSelects,
        init = function () {
            var $selects = $(selector),
                runThis = window.jQuery.fn.jquery === '3.3.1' ? ($selects.length && $scIsIE && $IEver < 9) : ($selects.length && $.browser.msie && $.browser.version < 9),
                globalSelects = $selects
            if (!runThis) {
                return debug('selectBofa.init did not run because either there are no &lt;select&gt; items or the browser is not IE8-')
            }
            debug('selectBofa.init ran')
            $selects.each(function (i) {
                $this = $(this)
                debug('=======================| select-bofa: ' + i + ' |==================\n\rRUNS IF true/undefined. fxWdth: ' + !$this.hasClass('select-bofa-fxWdth') + ' | initialized: ' + hasBeenInitialized($this))
                if (!$this.hasClass('select-bofa-fxWdth') && !hasBeenInitialized($this)) {
                    setData($this)
                    tempPosition = $this.position()
                    shim($this)
                    position($this, tempPosition)
                    setEventHandlers($this)
                    debug('after setData, shim, position and setEventHanlders data(ns):')
                    debug($this.data(ns))
                }
            })
        },
        destroy = function ($objs) {
            $(window).unbind('.' + ns)
            $objs.parent('.select-bofa-shim').remove()
            $objs.removeData(ns)
            $objs.remove()
            debug('Select-bofas destroyed: ' + $objs.length)
        },
        disable = function ($objs) {
            $($objs).unbind('.' + ns)
            $objs.parent('.select-bofa-shim').map(function () {
                $this = $(this)
                $this.replaceWith($this.contents())
            })
            $objs.each(function () {
                $this = $(this)
                tempData = $this.data(ns)
                if (tempData) {
                    $this.css({
                        position: tempData.position,
                        top: tempData.top,
                        left: tempData.left,
                        zIndex: tempData.zIndex
                    })
                }
            })
            $objs.removeData(ns)
            debug($objs.length + ' select-bofa(s) returned to ordinary &lt;select&gt; menus.')
        },
        setData = function ($obj) {
            $obj.data(ns, {
                origWidth: outerWidth($obj, false),
                position: $obj.css('position'),
                top: $obj.css('top'),
                left: $obj.css('left'),
                zIndex: $obj.css('zIndex')
            })
            debug('setData ran. origWidth: ' + $obj.data(ns).origWidth)
        },
        setEventHandlers = function ($obj) {
            debug('setEventHandlers ran: ' + $obj.attr('class'))
            $obj.bind('mousedown.' + ns + ' focus.' + ns, function (e) {
                $this = $(this)
                tempWidth = $this.data(ns).origWidth
                debug('BEFORE: ' + e.type + ' event. Current Width: ' + $this.css('width') + ' | origWidth: ' + tempWidth)
                if (parseInt($this.css('width')) > tempWidth && e.type !== 'focus') {
                    setTimeout(function () {
                        $this.css('width', tempWidth)
                    }, 150)
                    debug('Alternative ' + e.type + ' event.')
                } else {
                    $this.css('width', 'auto')
                }
                debug('AFTER: ' + e.type + ' event. Current Width: ' + $this.css('width') + ' | origWidth: ' + tempWidth + '\n==========')
            }).bind('blur.' + ns + ' change.' + ns, function (e) {
                debug(e.type + ' event. Return width to data.origWidth: ' + $this.data(ns).origWidth)
                $this = $(this)
                $this.removeClass('w-auto')
                $this.css('width', $this.data(ns).origWidth)
            })
        },
        position = function ($obj, pos) {
            debug('position ran')
            tempPosition = (pos) ? pos : $obj.position()
            var z = $obj.css('z-index')
            $obj.css({
                position: 'absolute',
                top: 0,
                left: 0,
                'z-index': (z !== 'auto') ? z + 1 : 1
            })
        },
        shim = function ($obj) {
            debug('shim ran')
            var z = $obj.css('z-index')
            shimHolder = $('<span class="select-bofa-shim"/>').css({
                height: $obj.outerHeight(true),
                width: outerWidth($obj, true),
                position: ($obj.css('position') === 'static') ? 'relative' : $obj.css('position'),
                display: $obj.css('display'),
                'float': $obj.css('float'),
                top: $obj.css('top'),
                left: $obj.css('left'),
                'z-index': (z !== 'auto') ? z + 1 : 1,
                verticalAlign: 'middle'
            })
            $.extend($obj.data(ns), {
                shim: shimHolder
            })
            $obj.wrap(shimHolder)
        },
        hasBeenInitialized = function ($obj) {
            return $obj.data(ns)
        },
        outerWidth = function ($obj, margins) {
            return $obj.outerWidth(margins) || function ($obj, margins) {
                $dummy = $obj.clone().css('visiblity', 'hidden')
                $('body').append($dummy)
                var width = $dummy.outerWidth(margins)
                $dummy.remove()
                return width
            }($obj, margins)
        },
        debug = function (msg) {
            if (!DEBUGMODE) {
                return false
            }
            console.log(msg)
            var $debug = $('#debug')
            $debug.append('<p>&bull;&nbsp;&nbsp;' + msg + '</p>')
            if (!debugOn) {
                $debug.prepend('<h2>Debugging On. Check Console:</h2>')
                $debug.fadeIn(500)
                debugOn = true
                clearTimeout(debugOff)
                var debugOff = setTimeout(function () {
                    $debug.fadeOut(500, function () {
                        $debug.empty()
                    })
                    debugOn = false
                }, 10000)
            }
        },
        setDebugMode = function (t) {
            if (!t) {
                debug('Debugging disabled')
            }
            DEBUGMODE = t
        },
        getDebugMode = function () {
            return DEBUGMODE
        }
    return {
        init: init,
        destroy: destroy,
        disable: disable,
        getDebugMode: getDebugMode,
        debug: debug,
        setDebugMode: setDebugMode
    }
}(jQuery, '.select-bofa')
$(document).ready(selectBofa.init)
var cfLoader = (function ($) {
    var debugMode = false,
        fontNames = [],
        loadedFontNames = [],
        $blankTestDiv,
        blankTestDivStatus,
        timers = {},
        timerId = 0,
        $html,
        loading = '-loading',
        active = '-active',
        inactive = '-inactive',
        callback
    var settings = {
        namespace: 'cf-',
        maxLoadTime: 5000,
        testFrequency: 100,
        path: '/pa/global-assets/1.0/font/{f}/{f}',
        fontStyle: '@font-face { font-family: \'{f}\'; src: url(\'{p}.eot\'); src: url(\'{p}.eot?#iefix\') format(\'embedded-opentype\'), url(\'{p}.woff\') format(\'woff\'), url(\'{p}.ttf\') format(\'truetype\'); font-weight: normal; font-style: normal; font-variant: normal; }'
    }
    var _debug = function (msg) {
            if (debugMode == true) {
                console.log(msg)
            }
        },
        _contains = function (needle, haystack) {
            return haystack && ~haystack.indexOf(needle)
        },
        _isUniqueItem = function (item, array) {
            var l = array.length
            _debug('_isUniqueItem | called with item: ' + item + ' and array: ' + ((array.length) ? array.join() : 'empty array'))
            for (var i = 0; i < l; i++) {
                if (item == array[i]) {
                    return false
                }
            }
            _debug('_isUniqueItem | font ' + item + ' is unique. Return true: add it to list')
            return true
        },
        _timeNow = function () {
            return new Date().getTime()
        },
        _test = function (test, callback, frequency, timeout) {
            var id = timerId++,
                start = _timeNow(),
                time,
                isTimeout = false
            frequency = frequency || 1
            timers[id] = setInterval(function () {
                time = _timeNow() - start
                if (test() || (timeout && (isTimeout = time > timeout))) {
                    callback.call(window, isTimeout, time)
                    clearInterval(timers[id])
                }
            }, frequency)
        },
        _buildFontNames = function () {
            if (!fontNames.length) {
                var font
                $('[data-font]').not('[data-font="#!"]').each(function () {
                    var $this = $(this)
                    font = $this.data('font')
                    $this.attr('data-font', '#!').addClass(font)
                    _debug('_buildFontNames | font to build: ' + font)
                    if (_isUniqueItem(font, fontNames) && _isUniqueItem(settings.namespace + font, loadedFontNames)) {
                        fontNames = fontNames.concat([font])
                    }
                })
                _debug('_buildFontNames | List of font names after unique filter: ' + fontNames.join())
            }
        },
        _createBlankDiv = function () {
            if (!$blankTestDiv) {
                $blankTestDiv = $('<div aria-hidden="true" style="position:absolute;top:-999em;left:-999em;width:auto;font-size:300px;font-family:serif">BlankTestESs</div>')
            }
            if (!blankTestDivStatus) {
                $blankTestDiv.appendTo(document.documentElement)
                blankTestDivStatus = 1
                _debug('_createBlankDiv | baseline width of $blankTestDiv to compare against: ' + $blankTestDiv.width())
                if (!$blankTestDiv.width()) {
                    _test(function () {
                        return document.body
                    }, function () {
                        $blankTestDiv.appendTo('body')
                        blankTestDivStatus = 2
                        _debug('_createBlankDiv | IE6/7 div inserted into <body> after _testing. $blankTestDiv.width(): ' + $blankTestDiv.width())
                    }, settings.testFrequency)
                } else {
                    blankTestDivStatus = 2
                }
            }
        },
        _buildFonts = function () {
            var l = fontNames.length,
                fontName,
                fontTemplate = /\{f\}/g,
                fontPath,
                pathTemplate = /\{p\}/g,
                fontStyle,
                fontCSS = [],
                namespacedFontName,
                $testDiv
            $html = $('html')
            for (var i = 0; i < l; i++) {
                fontName = fontNames[i].toLowerCase()
                fontPath = settings.path.replace(fontTemplate, fontName)
                fontStyle = settings.fontStyle.replace(fontTemplate, fontName).replace(pathTemplate, fontPath)
                fontCSS.push(fontStyle)
                $testDiv = $blankTestDiv.clone().css({
                    'font-family': '"' + fontName + '", serif'
                })
                namespacedFontName = settings.namespace + fontName
                $html.addClass(namespacedFontName + loading)
                _canWeTestFont($testDiv, namespacedFontName)
            }
            return fontCSS
        },
        _canWeTestFont = function ($testDiv, namespacedFontName) {
            if (blankTestDivStatus === 2) {
                _testTheFont($testDiv, namespacedFontName)
            } else {
                _test(function () {
                    return blankTestDivStatus === 2
                }, function () {
                    _testTheFont($testDiv, namespacedFontName)
                }, settings.testFrequency)
            }
        },
        _testTheFont = function ($testDiv, namespacedFontName) {
            _debug('_testTheFont | <body> element exists, and $blankTestDiv inserted into DOM. \nTesting of the font-face-styled div has started for: ' + namespacedFontName)
            _debug($testDiv)
            $testDiv.appendTo('body')
            _test(function () {
                _debug('_testTheFont | testing ' + namespacedFontName + ': $blankTestDiv.width() ' + $blankTestDiv.width() + ' compared to $testDiv.width(): ' + $testDiv.width())
                return $blankTestDiv.width() !== $testDiv.width()
            }, function (timeout) {
                if (timeout) {
                    $html.removeClass(namespacedFontName + loading)
                    $html.addClass(namespacedFontName + inactive)
                    _debug('_testTheFont | timeout occurred for: ' + namespacedFontName)
                } else {
                    $html.removeClass(namespacedFontName + loading)
                    $html.addClass(namespacedFontName + active)
                    _debug('_testTheFont | successful load detected for: ' + namespacedFontName)
                    loadedFontNames.push(namespacedFontName)
                    _debug('_testTheFont | loadedFontNames: ' + loadedFontNames.join())
                }
                if (callback) {
                    callback(namespacedFontName, timeout)
                }
            }, settings.testFrequency, settings.maxLoadTime)
        },
        _loadFonts = function (cssArray) {
            _debug('_loadFonts | received array from _buildFonts and then inserts into DOM as <style>. The output of array is below:')
            _debug(cssArray.join('\n\n'))
            var style = document.createElement('style'),
                text,
                head = document.head || document.getElementsByTagName('head') [0] || document.documentElement,
                css = cssArray.join('')
            style.setAttribute('type', 'text/css')
            head.insertBefore(style, head.firstChild)
            if (style.styleSheet) {
                try {
                    style.styleSheet.cssText = css
                } catch (e) {
                    var namespacedFontName
                    while (fontNames.length) {
                        namespacedFontName = settings.namespace + fontNames.pop()
                        $html.removeClass(namespacedFontName + loading)
                        $html.addClass(namespacedFontName + inactive)
                    }
                }
            } else {
                text = document.createTextNode(css)
                style.appendChild(text)
            }
            _debug(style)
        }
    var init = function () {
            var l = arguments.length
            _debug('init | init called with ' + l + ' arguments.')
            if (l) {
                for (var i = 0; i < l; i++) {
                    if (_contains('rray', arguments[i].constructor.toString())) {
                        fontNames = arguments[i]
                        _debug('init | array passed as argument index ' + i + ': ' + fontNames.join(''))
                    } else {
                        if (typeof arguments[i] === 'object') {
                            $.extend(settings, arguments[i])
                            _debug('init | object passed as argument index' + i + ': ' + ((typeof JSON !== 'undefined') ? JSON.stringify(arguments[i]) : arguments[i]))
                        } else {
                            if (typeof arguments[i] === 'function') {
                                callback = arguments[i]
                                _debug('init | callback function passed as argument index ' + i + ': ' + arguments[i].toString())
                            } else {
                                throw new Error('cfLoader.init(): You passed an argument that is not supported. Please use:\nAn Object containing settings or\nAn array containing font names or\nA callback function')
                            }
                        }
                    }
                }
            }
            conductor()
        },
        conductor = function () {
            _debug('conductor | initialized with fontNames: ' + ((fontNames.length) ? fontNames : 'empty array'))
            _buildFontNames()
            if (typeof jQuery !== 'undefined' && typeof jQuery.fn !== 'undefined' && typeof jQuery.fn.jquery !== 'undefined' && jQuery.fn.jquery == '1.3.2') {
                return $('html').addClass('cf-force-show-crowbar')
            }
            if (!fontNames.length) {
                return
            }
            _createBlankDiv()
            var fontCSSArray = _buildFonts()
            _loadFonts(fontCSSArray)
            fontNames = []
        }
    return {
        init: init,
        refresh: conductor
    }
})(jQuery)
$(cfLoader.init)
var boaBrowserDetect = function ($) {
    window.boaBrowserObject = {}
    var defaults = {
            userAgent: null,
            showMessage: true,
            debug: false,
            testMode: false,
            isLocal: (window.location.protocol == 'file:' || /(localhost|uxdesign)/.test(window.location.hostname)),
            useSessionStorage: (window.sessionStorage ? true : false),
            ua: '',
            platform: '',
            boaBrowserShowNoticeCookie: '',
            boaBrowserTestCookie: '',
            getCmsBrowserFile: false
        },
        settings = {},
        _initialize = function (options) {
            try {
                settings = $.extend({}, defaults, options)
                _debug('boaBrowserDetect: begin boaBrowserDetect init')
                settings.useSessionStorage = settings.userAgent ? false : settings.useSessionStorage
                settings.ua = settings.userAgent || (typeof navigator !== 'undefined' ? navigator.userAgent : '')
                settings.platform = (typeof navigator !== 'undefined' ? navigator.platform : '')
                settings.boaBrowserShowNoticeCookie = boaGetCookie('boaBrowserShowNotice')
                settings.boaBrowserTestCookie = boaGetCookie('boaBrowserTest')
                if (settings.boaBrowserTestCookie == 'true') {
                    settings.testMode = true
                }
                if (settings.testMode) {
                    settings.debug = true
                    settings.showMessage = true
                    settings.useSessionStorage = false
                    _debug('boaBrowserDetect: testMode is: ' + settings.testMode)
                }
                boaBrowserObject = _boaBrowserGetSessionStorage()
                if (boaBrowserObject && boaBrowserObject.browserSupport) {
                    _boaBrowserShowMessage()
                    boaBrowserObject.loaded = true
                    $(document).trigger('boaBrowserObjectLoaded')
                } else {
                    var boaBrowserDefault = _boaBrowserGetDefaultObj()
                    var bowser = _bowserUtil(settings.ua)
                    boaBrowserObject = $.extend(true, boaBrowserDefault, bowser)
                    _boaBrowserSystemCheck()
                    _boaBrowserPluginCheck()
                    if (settings.getCmsBrowserFile) {
                        _boaBrowserUpdateMessageData()
                    } else {
                        _boaBrowserProcessRules()
                        _boaBrowserSetSessionStorage()
                        boaBrowserObject.loaded = true
                        $(document).trigger('boaBrowserObjectLoaded')
                    }
                }
            } catch (e) {
                _debug('boaBrowserDetect: _initialize error: ' + e)
            }
            $(document).ready(function () {
                try {
                    _setBrowserCSS()
                    _formatMobilePhoneNum()
                } catch (e) {
                    _debug('boaBrowserDetect: _initialize error: ' + e)
                }
            })
            if (boaBrowserObject.debug && typeof boaBrowserDebug === 'function') {
                try {
                    setTimeout(function () {
                        boaBrowserDebug()
                    }, 1000)
                } catch (e) {
                    _debug('boaBrowserDetect: _initialize error: ' + e)
                }
            }
            _debug('boaBrowserDetect: end boaBrowserDetect init')
        },
        _hideBrowserAlert = function () {
            _debug('begin _hideBrowserAlert()')
            settings.showMessage = false
        },
        _debug = function (msg) {
            if (window.console && settings.debug) {
                console.log(msg)
            }
        },
        _bowserUtil = function (ua) {
            /*!
             * Bowser - a browser detector
             * https://github.com/ded/bowser
             * MIT License | (c) Dustin Diaz 2014
             */
            var t = true

            function detect(ua) {
                function getFirstMatch(regex) {
                    var match = ua.match(regex)
                    return (match && match.length > 1 && match[1]) || ''
                }

                var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),
                    likeAndroid = /like android/i.test(ua),
                    android = !likeAndroid && /android/i.test(ua),
                    versionIdentifier = getFirstMatch(/version\/(\d+(\.\d+)?)/i),
                    tablet = /tablet/i.test(ua),
                    mobile = !tablet && /[^-]mobi/i.test(ua),
                    result
                if (/opera|opr/i.test(ua)) {
                    result = {
                        name: 'Opera',
                        opera: t,
                        version: versionIdentifier || getFirstMatch(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)
                    }
                } else {
                    if (/windows phone/i.test(ua)) {
                        result = {
                            name: 'Windows Phone',
                            vendor: 'Microsoft',
                            windowsphone: t,
                            msie: t,
                            version: getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i)
                        }
                    } else {
                        if (/maxthon/i.test(ua)) {
                            result = {
                                name: 'Maxthon',
                                maxthon: t,
                                version: getFirstMatch(/maxthon\/(\d+(\.\d+)?)/i)
                            }
                        } else {
                            if (/edge/i.test(ua)) {
                                result = {
                                    name: ' Edge',
                                    vendor: 'Microsoft',
                                    msie: t,
                                    edge: t,
                                    version: getFirstMatch(/edge\/(\d+(\.\d+)?)/i)
                                }
                            } else {
                                if (/msie|trident/i.test(ua)) {
                                    result = {
                                        name: 'Internet Explorer',
                                        vendor: 'Microsoft',
                                        msie: t,
                                        version: getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)
                                    }
                                } else {
                                    if (/chrome|crios|crmo/i.test(ua)) {
                                        result = {
                                            name: 'Chrome',
                                            vendor: 'Google',
                                            chrome: t,
                                            version: getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
                                        }
                                    } else {
                                        if (iosdevice) {
                                            result = {
                                                name: iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod',
                                                vendor: 'Apple'
                                            }
                                            if (versionIdentifier) {
                                                result.version = versionIdentifier
                                            }
                                        } else {
                                            if (/sailfish/i.test(ua)) {
                                                result = {
                                                    name: 'Sailfish',
                                                    sailfish: t,
                                                    version: getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)
                                                }
                                            } else {
                                                if (/seamonkey\//i.test(ua)) {
                                                    result = {
                                                        name: 'SeaMonkey',
                                                        seamonkey: t,
                                                        version: getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)
                                                    }
                                                } else {
                                                    if (/firefox|iceweasel/i.test(ua)) {
                                                        result = {
                                                            name: 'Firefox',
                                                            vendor: 'Mozilla',
                                                            firefox: t,
                                                            version: getFirstMatch(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)
                                                        }
                                                        if (/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua)) {
                                                            result.firefoxos = t
                                                        }
                                                    } else {
                                                        if (/silk/i.test(ua)) {
                                                            result = {
                                                                name: 'Silk',
                                                                vendor: 'Amazon',
                                                                silk: t,
                                                                version: getFirstMatch(/silk\/(\d+(\.\d+)?)/i)
                                                            }
                                                        } else {
                                                            if (android) {
                                                                result = {
                                                                    name: 'Android',
                                                                    vendor: 'Google',
                                                                    version: versionIdentifier
                                                                }
                                                            } else {
                                                                if (/phantom/i.test(ua)) {
                                                                    result = {
                                                                        name: 'PhantomJS',
                                                                        phantom: t,
                                                                        version: getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)
                                                                    }
                                                                } else {
                                                                    if (/blackberry|\bbb\d+/i.test(ua) || /rim\stablet/i.test(ua)) {
                                                                        result = {
                                                                            name: 'BlackBerry',
                                                                            blackberry: t,
                                                                            version: versionIdentifier || getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)
                                                                        }
                                                                    } else {
                                                                        if (/(web|hpw)os/i.test(ua)) {
                                                                            result = {
                                                                                name: 'WebOS',
                                                                                webos: t,
                                                                                version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)
                                                                            }
                                                                            /touchpad\//i.test(ua) && (result.touchpad = t)
                                                                        } else {
                                                                            if (/bada/i.test(ua)) {
                                                                                result = {
                                                                                    name: 'Bada',
                                                                                    bada: t,
                                                                                    version: getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)
                                                                                }
                                                                            } else {
                                                                                if (/tizen/i.test(ua)) {
                                                                                    result = {
                                                                                        name: 'Tizen',
                                                                                        tizen: t,
                                                                                        version: getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i) || versionIdentifier
                                                                                    }
                                                                                } else {
                                                                                    if (/safari/i.test(ua)) {
                                                                                        result = {
                                                                                            name: 'Safari',
                                                                                            vendor: 'Apple',
                                                                                            safari: t,
                                                                                            version: versionIdentifier
                                                                                        }
                                                                                    } else {
                                                                                        result = {}
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                if (/(apple)?webkit/i.test(ua)) {
                    result.name = result.name || 'Webkit'
                    result.webkit = t
                    if (!result.version && versionIdentifier) {
                        result.version = versionIdentifier
                    }
                } else {
                    if (!result.opera && /gecko\//i.test(ua)) {
                        result.name = result.name || 'Gecko'
                        result.gecko = t
                        result.version = result.version || getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)
                    }
                }
                if (android || result.silk) {
                    result.android = t
                } else {
                    if (iosdevice) {
                        result[iosdevice] = t
                        result.ios = t
                    }
                }
                var osVersion = ''
                if (iosdevice) {
                    osVersion = getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i)
                    osVersion = osVersion.replace(/[_\s]/g, '.')
                } else {
                    if (android) {
                        osVersion = getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i)
                    } else {
                        if (result.windowsphone) {
                            osVersion = getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)
                        } else {
                            if (result.webos) {
                                osVersion = getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i)
                            } else {
                                if (result.blackberry) {
                                    osVersion = getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i)
                                } else {
                                    if (result.bada) {
                                        osVersion = getFirstMatch(/bada\/(\d+(\.\d+)*)/i)
                                    } else {
                                        if (result.tizen) {
                                            osVersion = getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i)
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                if (osVersion) {
                    result.osversion = osVersion
                }
                var osMajorVersion = osVersion.split('.') [0]
                if (tablet || iosdevice == 'ipad' || (android && (osMajorVersion == 3 || (osMajorVersion == 4 && !mobile))) || result.silk) {
                    result.tablet = t
                } else {
                    if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || result.blackberry || result.webos || result.bada) {
                        result.mobile = t
                    }
                }
                return result
            }

            return detect(ua)
        },
        _boaBrowserSystemCheck = function () {
            try {
                if (!!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect) {
                    boaBrowserObject.svg = true
                }
                if (!!window.matchMedia && !!window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)').matches) {
                    boaBrowserObject.retna = true
                }
                var p = settings.platform || settings.ua
                if (p.indexOf('Win') > -1) {
                    boaBrowserObject.win = true
                } else {
                    if (p.indexOf('Mac') > -1) {
                        boaBrowserObject.mac = true
                    } else {
                        if (p.indexOf('X11') > -1 || p.indexOf('Linux') > -1) {
                            boaBrowserObject.linux = true
                        } else {
                            boaBrowserObject.win = true
                        }
                    }
                }
                boaBrowserObject.desktop = (!boaBrowserObject.mobile && !boaBrowserObject.tablet && (boaBrowserObject.win || boaBrowserObject.mac || boaBrowserObject.linux))
                if (boaBrowserObject.win) {
                    if (/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(settings.ua)) {
                        if (RegExp['$1'] == 'NT') {
                            switch (RegExp['$2']) {
                                case '5.0':
                                    boaBrowserObject.osversion = '2000'
                                    break
                                case '5.1':
                                    boaBrowserObject.osversion = 'XP'
                                    break
                                case '6.0':
                                    boaBrowserObject.osversion = 'Vista'
                                    break
                                case '6.1':
                                    boaBrowserObject.osversion = 'Windows 7'
                                    break
                                case '6.2':
                                    boaBrowserObject.osversion = 'Windows 8'
                                    break
                                default:
                                    boaBrowserObject.osversion = ''
                                    break
                            }
                        } else {
                            if (RegExp['$1'] == 'Ph') {
                                if (/Windows Phone OS.?(\d+\.\d+)?/.test(settings.ua)) {
                                    boaBrowserObject.osversion = RegExp['$1']
                                }
                            } else {
                                if (RegExp['$1'] == '9x') {
                                    boaBrowserObject.osversion = 'ME'
                                } else {
                                    boaBrowserObject.osversion = RegExp['$1']
                                }
                            }
                        }
                    }
                }
            } catch (e) {
                _debug('boaBrowserDetect:_boaBrowserSystemCheck: error: ' + e)
            }
            return
        },
        _boaBrowserPluginCheck = function () {
            var plugins = {}

            function hasPlugin(name) {
                name = name.toLowerCase()
                for (var i = 0; i < navigator.plugins.length; i++) {
                    if (navigator.plugins[i].name.toLowerCase().indexOf(name) > -1) {
                        return true
                    }
                }
                return false
            }

            function hasIEPlugin(name) {
                try {
                    new ActiveXObject(name)
                    return true
                } catch (ex) {
                    return false
                }
            }

            function hasFlash() {
                var r = hasPlugin('Flash')
                if (!r) {
                    r = hasIEPlugin('ShockwaveFlash.ShockwaveFlash')
                }
                return r
            }

            function hasQuickTime() {
                var r = hasPlugin('QuickTime')
                if (!r) {
                    r = hasIEPlugin('QuickTime.QuickTime')
                }
                return r
            }

            try {
                plugins.flash = hasFlash()
                plugins.quicktime = hasQuickTime()
                boaBrowserObject.plugins = plugins
            } catch (err) {
            }
            return
        },
        _boaBrowserUpdateMessageData = function () {
            if (settings.isLocal && (window.location.protocol == 'file:' || !settings.testMode)) {
                _boaBrowserProcessRules()
                boaBrowserObject.loaded = true
                $(document).trigger('boaBrowserObjectLoaded')
                return
            }
            $.ajax({
                type: 'GET',
                url: '/content/browser-support/js/browserDataCMS.js',
                dataType: 'script',
                cache: true,
                success: function (data, textStatus, jqxhr) {
                    try {
                        if (typeof boaBrowserSupportCMS !== 'undefined' && boaBrowserSupportCMS.content) {
                            boaBrowserObject.browserSupport = boaBrowserSupportCMS
                            boaBrowserObject.browserSupport.source = 'cms'
                            settings.showMessage = boaBrowserSupportCMS.showMessage
                            _boaBrowserProcessRules()
                            _boaBrowserSetSessionStorage()
                            boaBrowserObject.loaded = true
                            $(document).trigger('boaBrowserObjectLoaded')
                        }
                    } catch (e) {
                        _debug('boaBrowserDetect:_boaBrowserUpdateMessageData: ajax error: ' + e)
                    }
                }
            })
        },
        _boaBrowserProcessRules = function () {
            _debug('boaBrowserDetect: begin _boaBrowserProcessRules')
            var userMsg = boaBrowserObject.browserSupport.rules(boaBrowserObject)
            if (userMsg && userMsg.rule) {
                boaBrowserObject.userNotice = userMsg
            }
            _boaBrowserShowMessage()
        },
        _checkShowMessage = function () {
            try {
                if (settings.isLocal && !settings.testMode) {
                    _debug('Working in local module / localhost, suppress browser alert')
                    return false
                }
            } catch (e) {
                _debug('boaBrowserDetect: _checkShowMessage error: ' + e)
            }
            if (!settings.showMessage || settings.boaBrowserShowNoticeCookie === 'false' || (typeof boaBrowserShowNotice !== 'undefined' && boaBrowserShowNotice === false) || boaGetUrlParam('boaBrowserShowNotice') === 'false' || (typeof boaGlobalData !== 'undefined' && boaGlobalData.pageDataJS.blockBrowserNotice === 'true')) {
                return false
            }
            return true
        },
        _boaBrowserShowMessage = function () {
            $(document).ready(function () {
                _debug('in _boaBrowserShowMessage')
                settings.showMessage = _checkShowMessage()
                if (!settings.showMessage) {
                    _debug('showMessage is false')
                    return
                }
                var userMsg,
                    closeText,
                    msg,
                    style,
                    btnText,
                    link,
                    b = boaBrowserObject,
                    currentBrowserInfo = '',
                    loc = window.location.hostname,
                    langClass = 'lang-es'
                boaBrowserObject.browserSupport.url = boaBrowserObject.browserSupport.url || {}
                if (/(cert|qa|sit).*\.bankofamerica\.com$/.test(loc)) {
                    link = boaBrowserObject.browserSupport.url.cert
                } else {
                    if (/(dev).*\.bankofamerica\.com$/.test(loc)) {
                        link = boaBrowserObject.browserSupport.url.dev
                    } else {
                        link = boaBrowserObject.browserSupport.url.prod
                    }
                }
                link += b.userNotice.link
                if (b.userNotice && b.userNotice.rule && b.userNotice.en) {
                    if (b.name.length > 0 && b.version.length > 0) {
                        currentBrowserInfo = ($boaLangObj.boaLang === 'es-us' ? b.browserSupport.content.misc.es.current : b.browserSupport.content.misc.en.current) + ' ' + b.name + ' ' + b.version + '<br>'
                    }
                    langClass = $boaLangObj.boaLang === 'es-us' ? 'lang-es' : 'lang-en'
                    style = b.userNotice.style + ' ' + langClass
                    msg = $boaLangObj.boaLang === 'es-us' ? b.userNotice.es.msg : b.userNotice.en.msg
                    btnText = $boaLangObj.boaLang === 'es-us' ? b.userNotice.es.btnText : b.userNotice.en.btnText
                    closeText = $boaLangObj.boaLang === 'es-us' ? b.browserSupport.content.misc.es.closeText : b.browserSupport.content.misc.en.closeText
                    var notice = b.browserSupport.template.replace('{currentBrowserInfo}', '').replace('{style}', style).replace('{msg}', msg).replace('{link}', link).replace('{btnText}', btnText).replace('{closeText}', closeText)
                    $('body div:first').before(notice)
                    $('#browserUpgradeNoticeBarClose').click(function () {
                        $('#browserUpgradeNoticeBar').hide()
                        document.cookie = 'boaBrowserShowNotice=false; path=/; domain=.bankofamerica.com'
                    })
                }
                return
            })
        },
        _boaBrowserGetSessionStorage = function () {
            try {
                if (settings.useSessionStorage && window.sessionStorage.getItem('boaData') && typeof JSON !== 'undefined') {
                    var boaData = JSON.parse(window.sessionStorage.getItem('boaData'))
                    if (boaData.boaBrowserObject) {
                        return boaData.boaBrowserObject
                    }
                }
            } catch (e) {
                _debug('_boaBrowserGetSessionStorage: error: ' + e)
            }
            return false
        },
        _boaBrowserSetSessionStorage = function () {
            if (settings.useSessionStorage && typeof JSON !== 'undefined') {
                var boaData = {
                    boaBrowserObject: boaBrowserObject
                }
                sessionStorage.setItem('boaData', JSON.stringify(boaData))
            }
        },
        _boaBrowserGetDefaultObj = function () {
            var boaBrowserDefault = {
                loaded: false,
                ua: settings.ua,
                debug: settings.debug,
                a: false,
                c: false,
                x: false,
                retna: false,
                svg: false,
                msie: false,
                edge: false,
                chrome: false,
                firefox: false,
                safari: false,
                opera: false,
                android: false,
                ios: false,
                iosdevice: false,
                ipad: false,
                iphone: false,
                ipod: false,
                blackberry: false,
                name: '',
                vendor: '',
                version: '',
                webkit: false,
                gecko: false,
                tablet: false,
                mobile: false,
                desktop: false,
                win: false,
                mac: false,
                linux: false,
                osversion: '',
                windowsphone: false,
                plugins: {
                    flash: false,
                    quicktime: false
                },
                userNotice: {
                    rule: '',
                    en: {
                        msg: ''
                    },
                    es: {
                        msg: ''
                    },
                    link: ''
                },
                browserSupport: {
                    source: 'js',
                    showMessage: true,
                    url: {
                        prod: 'https://www.bankofamerica.com',
                        cert: 'https://www-cert1.ecnp.bankofamerica.com',
                        dev: 'https://www-dev3.ecnp.bankofamerica.com'
                    },
                    content: {
                        unsupportedBlocked: {
                            rule: 'unsupportedBlocked',
                            style: 'boa-browser-1 hide-close',
                            en: {
                                msg: 'You are using an unsupported browser version.',
                                btnText: 'Learn more or update your browser.'
                            },
                            es: {
                                msg: 'Est&aacute; usando una versi&oacute;n de navegador incompatible.',
                                btnText: 'M&aacute;s informaci&oacute;n sobre c&oacute;mo actualizar su navegador.'
                            },
                            link: '/information/supported-browsers/'
                        },
                        unsupportedBrowserType: {
                            rule: 'unsupportedBrowserType',
                            style: 'boa-browser-1',
                            en: {
                                msg: 'You are using an unsupported browser version.',
                                btnText: 'Learn more or update your browser.'
                            },
                            es: {
                                msg: 'Est&aacute; usando una versi&oacute;n de navegador incompatible.',
                                btnText: 'M&aacute;s informaci&oacute;n sobre c&oacute;mo actualizar su navegador.'
                            },
                            link: '/information/supported-browsers/'
                        },
                        unsupportedEndOfLife: {
                            rule: 'unsupportedEndOfLife',
                            style: 'boa-browser-1',
                            en: {
                                msg: 'You are using an unsupported browser version.',
                                btnText: 'Learn more or update your browser.'
                            },
                            es: {
                                msg: 'Est&aacute; usando una versi&oacute;n de navegador incompatible.',
                                btnText: 'M&aacute;s informaci&oacute;n sobre c&oacute;mo actualizar su navegador.'
                            },
                            link: '/information/supported-browsers/'
                        },
                        supportedUpgradeVersion: {
                            rule: 'supportedUpgradeVersion',
                            style: 'boa-browser-2',
                            en: {
                                msg: 'You are using an unsupported browser version.',
                                btnText: 'Learn more or update your browser.'
                            },
                            es: {
                                msg: 'Est&aacute; usando una versi&oacute;n de navegador incompatible.',
                                btnText: 'M&aacute;s informaci&oacute;n sobre c&oacute;mo actualizar su navegador.'
                            },
                            link: '/information/supported-browsers/'
                        },
                        supportedBrowser: {
                            rule: 'supportedBrowser'
                        },
                        mobileBrowser: {
                            rule: 'mobileBrowser'
                        },
                        misc: {
                            en: {
                                current: 'Browser in use:',
                                closeText: 'close'
                            },
                            es: {
                                current: 'Navegador en uso:',
                                closeText: 'cerrar'
                            }
                        }
                    },
                    rules: function (b) {
                        var userMsg
                        if (b.mobile || b.tablet) {
                            userMsg = b.browserSupport.content.mobileBrowser
                        } else {
                            if ((b.msie && b.version <= 6) || (b.firefox && b.version <= 2)) {
                                userMsg = b.browserSupport.content.unsupportedBlocked
                            } else {
                                if (!(b.win && b.msie) && !b.chrome && !(b.win && b.firefox) && !(b.mac && b.safari)) {
                                    userMsg = b.browserSupport.content.unsupportedBrowserType
                                } else {
                                    if ((b.msie && b.version <= 10) || (b.chrome && b.version <= 55) || (b.firefox && b.version <= 50) || (b.safari && b.version <= 9)) {
                                        userMsg = b.browserSupport.content.unsupportedEndOfLife
                                    } else {
                                        userMsg = b.browserSupport.content.supportedBrowser
                                    }
                                }
                            }
                        }
                        return userMsg
                    },
                    template: '<div id=\'browserUpgradeNoticeBar\' class=\'{style} no-print\' style=\'font-family: arial; font-size: 14px;\'><div style=\'width: 980px; margin: 0 auto; text-align: center; position: relative;\'><a id=\'browserUpgradeNoticeBarClose\' style=\'font-size: 11px; position: absolute; right: 9px; top: 5px;\' href=\'javascript:void(0);\'><span style=\'display: inline-block; margin-right: 10px;\'>{closeText}<span class=\'ada-hidden\'> browser upgrade notice</span></span><span class=\'close-fsd\' style=\'display: inline-block; position: relative; top: 4px;\'></span></a><div style=\'display: inline-block; *display: inline; zoom: 1; padding: 0 0 3px 0;\'><div class=\'msg-icon-sprite-fsd\' style=\'display: inline-block; *display: inline; zoom: 1; position: relative; top: 4px; left: -10px;\'><span class=\'ada-hidden\'>warning-icon</span></div><span style=\'display: inline-block; *display: inline; zoom: 1; position: relative; top: -2px; max-width: 810px;\'>{currentBrowserInfo}{msg}<a target=\'_blank\' href=\'{link}\' name=\'boaBrowserInfoBtn\' id=\'boaBrowserInfoBtn\' class=\'browser-upgrade-now\' style=\'margin-left: 10px;\'>{btnText}</a></span></div></div><style>#browserUpgradeNoticeBar.hide-close #browserUpgradeNoticeBarClose {display:none;} #browserUpgradeNoticeBar.boa-browser-1 { background-color: #FFF4F9; border-bottom: 1px solid #E31838; } #browserUpgradeNoticeBar.boa-browser-1 .msg-icon-sprite-fsd {background-position: -70px 0;height:24px;width:24px;} #browserUpgradeNoticeBar.boa-browser-2 { background-color: #FFF5D7; border-bottom: 1px solid #FC7800; } #browserUpgradeNoticeBar.boa-browser-2 .msg-icon-sprite-fsd {background-position: -70px -240px;height:24px;width:24px;} #browserUpgradeNoticeBar.lang-es span { font-size: 13px !important;}</style></div>'
                }
            }
            return boaBrowserDefault
        },
        _setBrowserCSS = function () {
            try {
                var b = boaBrowserObject
                var osName = (b.win ? 'win' : (b.mac ? 'mac' : ''))
                var browserUserAgent = navigator.userAgent
                version = parseInt(b.version)
                var browserName = ''
                var addBrowserClass = ''
                var browserClass = ''
                if (b.msie || b.firefox || b.chrome || b.safari) {
                    switch (true) {
                        case b.msie:
                            browserName = 'ie'
                            if (version === 9) {
                                addBrowserClass += ' lt-ie10'
                            } else {
                                if (version === 8) {
                                    addBrowserClass += ' lt-ie10 lt-ie9'
                                } else {
                                    if (version === 7) {
                                        addBrowserClass += ' lt-ie10 lt-ie9 lt-ie8'
                                    }
                                }
                            }
                            break
                        case b.firefox:
                            browserName = 'ff'
                            break
                        case b.chrome:
                            browserName = 'chrome'
                            addBrowserClass = ' webkit'
                            break
                        case b.safari:
                            browserName = 'safari'
                            addBrowserClass = ' webkit'
                            break
                    }
                    browserClass = osName + ' ' + browserName + ' ' + browserName + '-' + version + addBrowserClass
                }
                b.svg ? browserClass += ' svg-bg' : browserClass += ' not-svg-bg'
                b.retna ? browserClass += ' retina' : browserClass += ' not-retina'
                $('html').addClass(browserClass)
            } catch (e) {
                _debug('boaBrowserDetect: _setBrowserCSS error: ' + e)
            }
        },
        _formatMobilePhoneNum = function ($context) {
            try {
                if (boaBrowserObject.mobile) {
                    if (typeof $context == 'undefined') {
                        var $context = $('body')
                    }
                    var $tel = $context.find('.boa-mobile-tel').each(function () {
                        var phone = this.innerHTML.replace(/\D/g, '')
                        if (phone.length == 10) {
                            phone = '1' + phone
                        }
                        this.innerHTML = '<a href="tel:+' + phone + '">' + this.innerHTML + '</a>'
                    })
                }
            } catch (e) {
                _debug('boaBrowserDetect: _formatMobilePhoneNum error: ' + e)
            }
        }
    return {
        init: _initialize,
        formatMobilePhoneNum: _formatMobilePhoneNum,
        hideBrowserAlert: _hideBrowserAlert
    }
}(jQuery)
boaBrowserDetect.init()

function setFlexLayoutFooterHeight() {
    var windowHeight = $(window).height()
    if (windowHeight > flexLayoutCenterContentHeightOriginal) {
        var heightFooter = windowHeight - flexLayoutCenterContentHeightOriginal
        $flexLayoutFooterInner.css('margin-top', heightFooter)
    }
}

var flexLayoutFooterHeightOriginal
var flexLayoutCenterContentHeightOriginal
var $flexLayoutFooterDiv
var $flexLayoutFooterInner
$(document).ready(function () {
    if (($('body > .two-row-flex-wideleft-layout, body > .two-row-flex-wideright-layout, body > .flex-layout, body > .fsd-layout, body > .vipaa-passcode-layout').length > 0)) {
        var $footerInnerfootnoteComModuleFsdLayoutSkin = $('.fsd-layout .footer-inner .footnote-com-module .fsd-layout-skin')
        var $footerInnerfootnoteModuleFsdLayoutSkin = $('.fsd-layout .footer-inner .footnote-module .fsd-layout-skin')
        var $footerInnerDisclaimersPresent = $('.fsd-layout .footer-inner .disclaimers-module .fsd-skin')
        if ($footerInnerfootnoteComModuleFsdLayoutSkin.length > 0) {
            if ($footerInnerDisclaimersPresent.length > 0) {
                $footerInnerfootnoteComModuleFsdLayoutSkin.addClass('footnote-disclaimer-adjust')
            }
        }
        if ($footerInnerfootnoteModuleFsdLayoutSkin.length > 0) {
            if ($footerInnerDisclaimersPresent.length > 0) {
                $footerInnerfootnoteModuleFsdLayoutSkin.addClass('footnote-disclaimer-adjust')
            }
        }
        $flexBottomRow = $('.two-row-flex-wideleft-layout .bottom-row')
        if ($flexBottomRow.length > 0) {
            $($flexBottomRow).each(function (i) {
                if ($.trim($(this).text()).length === 0) {
                    $(this).remove()
                }
            })
        }
        flexLayoutFooterHeightOriginal = $('div.footer-inner').height()
        flexLayoutCenterContentHeightOriginal = $('div.center-content').height()
        $flexLayoutFooterDiv = $('div.footer')
        $flexLayoutFooterInner = $('div.footer-inner', $flexLayoutFooterDiv)
        setFlexLayoutFooterHeight()
        $(window).resize(function () {
            setFlexLayoutFooterHeight()
        })
    }
});
(function ($) {
    $.extend({
        tablesorter: new function () {
            var parsers = [],
                widgets = []
            this.defaults = {
                cssHeader: 'header',
                cssAsc: 'headerSortUp',
                cssDesc: 'headerSortDown',
                sortInitialOrder: 'asc',
                sortMultiSortKey: 'shiftKey',
                sortForce: null,
                sortAppend: null,
                textExtraction: 'simple',
                parsers: {},
                widgets: [],
                widgetZebra: {
                    css: [
                        'even',
                        'odd'
                    ]
                },
                headers: {},
                widthFixed: false,
                cancelSelection: true,
                sortList: [],
                headerList: [],
                dateFormat: 'us',
                decimal: '.',
                debug: false
            }

            function benchmark(s, d) {
                log(s + ',' + (new Date().getTime() - d.getTime()) + 'ms')
            }

            this.benchmark = benchmark

            function log(s) {
                if (typeof console != 'undefined' && typeof console.debug != 'undefined') {
                    console.log(s)
                } else {
                    alert(s)
                }
            }

            function buildParserCache(table, $headers) {
                if (table.config.debug) {
                    var parsersDebug = ''
                }
                var rows = table.tBodies[0].rows
                if (table.tBodies[0].rows[0]) {
                    var list = [],
                        cells = rows[0].cells,
                        l = cells.length
                    for (var i = 0; i < l; i++) {
                        var p = false
                        if ($.metadata && ($($headers[i]).metadata() && $($headers[i]).metadata().sorter)) {
                            p = getParserById($($headers[i]).metadata().sorter)
                        } else {
                            if ((table.config.headers[i] && table.config.headers[i].sorter)) {
                                p = getParserById(table.config.headers[i].sorter)
                            }
                        }
                        if (!p) {
                            p = detectParserForColumn(table, cells[i])
                        }
                        if (table.config.debug) {
                            parsersDebug += 'column:' + i + ' parser:' + p.id + '\n'
                        }
                        list.push(p)
                    }
                }
                if (table.config.debug) {
                    log(parsersDebug)
                }
                return list
            }

            function detectParserForColumn(table, node) {
                var l = parsers.length
                for (var i = 1; i < l; i++) {
                    if (parsers[i].is($.trim(getElementText(table.config, node)), table, node)) {
                        return parsers[i]
                    }
                }
                return parsers[0]
            }

            function getParserById(name) {
                var l = parsers.length
                for (var i = 0; i < l; i++) {
                    if (parsers[i].id.toLowerCase() == name.toLowerCase()) {
                        return parsers[i]
                    }
                }
                return false
            }

            function buildCache(table) {
                if (table.config.debug) {
                    var cacheTime = new Date()
                }
                var totalRows = (table.tBodies[0] && table.tBodies[0].rows.length) || 0,
                    totalCells = (table.tBodies[0].rows[0] && table.tBodies[0].rows[0].cells.length) || 0,
                    parsers = table.config.parsers,
                    cache = {
                        row: [],
                        normalized: []
                    }
                for (var i = 0; i < totalRows; ++i) {
                    var c = table.tBodies[0].rows[i],
                        cols = []
                    cache.row.push($(c))
                    for (var j = 0; j < totalCells; ++j) {
                        cols.push(parsers[j].format(getElementText(table.config, c.cells[j]), table, c.cells[j]))
                    }
                    cols.push(i)
                    cache.normalized.push(cols)
                    cols = null
                }
                if (table.config.debug) {
                    benchmark('Building cache for ' + totalRows + ' rows:', cacheTime)
                }
                return cache
            }

            function getElementText(config, node) {
                if (!node) {
                    return ''
                }
                var t = ''
                if (config.textExtraction == 'simple') {
                    if (node.childNodes[0] && node.childNodes[0].hasChildNodes()) {
                        t = node.childNodes[0].innerHTML
                    } else {
                        t = node.innerHTML
                    }
                } else {
                    if (typeof (config.textExtraction) == 'function') {
                        t = config.textExtraction(node)
                    } else {
                        t = $(node).text()
                    }
                }
                return t
            }

            function appendToTable(table, cache) {
                if (table.config.debug) {
                    var appendTime = new Date()
                }
                var c = cache,
                    r = c.row,
                    n = c.normalized,
                    totalRows = n.length,
                    checkCell = (n[0].length - 1),
                    tableBody = $(table.tBodies[0]),
                    rows = []
                for (var i = 0; i < totalRows; i++) {
                    rows.push(r[n[i][checkCell]])
                    if (!table.config.appender) {
                        var o = r[n[i][checkCell]]
                        var l = o.length
                        for (var j = 0; j < l; j++) {
                            tableBody[0].appendChild(o[j])
                        }
                    }
                }
                if (table.config.appender) {
                    table.config.appender(table, rows)
                }
                rows = null
                if (table.config.debug) {
                    benchmark('Rebuilt table:', appendTime)
                }
                applyWidget(table)
                setTimeout(function () {
                    $(table).trigger('sortEnd')
                }, 0)
            }

            function buildHeaders(table) {
                if (table.config.debug) {
                    var time = new Date()
                }
                var meta = ($.metadata) ? true : false,
                    tableHeadersRows = []
                for (var i = 0; i < table.tHead.rows.length; i++) {
                    tableHeadersRows[i] = 0
                }
                $tableHeaders = $('thead th', table)
                $tableHeaders.each(function (index) {
                    this.count = 0
                    this.column = index
                    this.order = formatSortingOrder(table.config.sortInitialOrder)
                    if (checkHeaderMetadata(this) || checkHeaderOptions(table, index)) {
                        this.sortDisabled = true
                    }
                    if (!this.sortDisabled) {
                        $(this).addClass(table.config.cssHeader)
                    }
                    table.config.headerList[index] = this
                })
                if (table.config.debug) {
                    benchmark('Built headers:', time)
                    log($tableHeaders)
                }
                return $tableHeaders
            }

            function checkCellColSpan(table, rows, row) {
                var arr = [],
                    r = table.tHead.rows,
                    c = r[row].cells
                for (var i = 0; i < c.length; i++) {
                    var cell = c[i]
                    if (cell.colSpan > 1) {
                        arr = arr.concat(checkCellColSpan(table, headerArr, row++))
                    } else {
                        if (table.tHead.length == 1 || (cell.rowSpan > 1 || !r[row + 1])) {
                            arr.push(cell)
                        }
                    }
                }
                return arr
            }

            function checkHeaderMetadata(cell) {
                if (($.metadata) && ($(cell).metadata().sorter === false)) {
                    return true
                }
                return false
            }

            function checkHeaderOptions(table, i) {
                if ((table.config.headers[i]) && (table.config.headers[i].sorter === false)) {
                    return true
                }
                return false
            }

            function applyWidget(table) {
                var c = table.config.widgets
                var l = c.length
                for (var i = 0; i < l; i++) {
                    getWidgetById(c[i]).format(table)
                }
            }

            function getWidgetById(name) {
                var l = widgets.length
                for (var i = 0; i < l; i++) {
                    if (widgets[i].id.toLowerCase() == name.toLowerCase()) {
                        return widgets[i]
                    }
                }
            }

            function formatSortingOrder(v) {
                if (typeof (v) != 'Number') {
                    i = (v.toLowerCase() == 'desc') ? 1 : 0
                } else {
                    i = (v == (0 || 1)) ? v : 0
                }
                return i
            }

            function isValueInArray(v, a) {
                var l = a.length
                for (var i = 0; i < l; i++) {
                    if (a[i][0] == v) {
                        return true
                    }
                }
                return false
            }

            function setHeadersCss(table, $headers, list, css) {
                $headers.removeClass(css[0]).removeClass(css[1])
                var h = []
                $headers.each(function (offset) {
                    if (!this.sortDisabled) {
                        h[this.column] = $(this)
                    }
                })
                var l = list.length
                for (var i = 0; i < l; i++) {
                    h[list[i][0]].addClass(css[list[i][1]])
                }
            }

            function fixColumnWidth(table, $headers) {
                var c = table.config
                if (c.widthFixed) {
                    var colgroup = $('<colgroup>')
                    $('tr:first td', table.tBodies[0]).each(function () {
                        colgroup.append($('<col>').css('width', $(this).width()))
                    })
                    $(table).prepend(colgroup)
                }
            }

            function updateHeaderSortCount(table, sortList) {
                var c = table.config,
                    l = sortList.length
                for (var i = 0; i < l; i++) {
                    var s = sortList[i],
                        o = c.headerList[s[0]]
                    o.count = s[1]
                    o.count++
                }
            }

            function multisort(table, sortList, cache) {
                if (table.config.debug) {
                    var sortTime = new Date()
                }
                var dynamicExp = 'var sortWrapper = function(a,b) {',
                    l = sortList.length
                for (var i = 0; i < l; i++) {
                    var c = sortList[i][0]
                    var order = sortList[i][1]
                    var s = (getCachedSortType(table.config.parsers, c) == 'text') ? ((order == 0) ? 'sortText' : 'sortTextDesc') : ((order == 0) ? 'sortNumeric' : 'sortNumericDesc')
                    var e = 'e' + i
                    dynamicExp += 'var ' + e + ' = ' + s + '(a[' + c + '],b[' + c + ']); '
                    dynamicExp += 'if(' + e + ') { return ' + e + '; } '
                    dynamicExp += 'else { '
                }
                var orgOrderCol = cache.normalized[0].length - 1
                dynamicExp += 'return a[' + orgOrderCol + ']-b[' + orgOrderCol + '];'
                for (var i = 0; i < l; i++) {
                    dynamicExp += '}; '
                }
                dynamicExp += 'return 0; '
                dynamicExp += '}; '
                eval(dynamicExp)
                cache.normalized.sort(sortWrapper)
                if (table.config.debug) {
                    benchmark('Sorting on ' + sortList.toString() + ' and dir ' + order + ' time:', sortTime)
                }
                return cache
            }

            function sortText(a, b) {
                return ((a < b) ? -1 : ((a > b) ? 1 : 0))
            }

            function sortTextDesc(a, b) {
                return ((b < a) ? -1 : ((b > a) ? 1 : 0))
            }

            function sortNumeric(a, b) {
                return a - b
            }

            function sortNumericDesc(a, b) {
                return b - a
            }

            function getCachedSortType(parsers, i) {
                return parsers[i].type
            }

            this.construct = function (settings) {
                return this.each(function () {
                    if (!this.tHead || !this.tBodies) {
                        return
                    }
                    var $this,
                        $document,
                        $headers,
                        cache,
                        config,
                        shiftDown = 0,
                        sortOrder
                    this.config = {}
                    config = $.extend(this.config, $.tablesorter.defaults, settings)
                    $this = $(this)
                    $headers = buildHeaders(this)
                    this.config.parsers = buildParserCache(this, $headers)
                    cache = buildCache(this)
                    var sortCSS = [
                        config.cssDesc,
                        config.cssAsc
                    ]
                    fixColumnWidth(this)
                    $headers.click(function (e) {
                        $this.trigger('sortStart')
                        var totalRows = ($this[0].tBodies[0] && $this[0].tBodies[0].rows.length) || 0
                        if (!this.sortDisabled && totalRows > 0) {
                            var $cell = $(this)
                            var i = this.column
                            this.order = this.count++ % 2
                            if (!e[config.sortMultiSortKey]) {
                                config.sortList = []
                                if (config.sortForce != null) {
                                    var a = config.sortForce
                                    for (var j = 0; j < a.length; j++) {
                                        if (a[j][0] != i) {
                                            config.sortList.push(a[j])
                                        }
                                    }
                                }
                                config.sortList.push([i,
                                    this.order])
                            } else {
                                if (isValueInArray(i, config.sortList)) {
                                    for (var j = 0; j < config.sortList.length; j++) {
                                        var s = config.sortList[j],
                                            o = config.headerList[s[0]]
                                        if (s[0] == i) {
                                            o.count = s[1]
                                            o.count++
                                            s[1] = o.count % 2
                                        }
                                    }
                                } else {
                                    config.sortList.push([i,
                                        this.order])
                                }
                            }
                            setTimeout(function () {
                                setHeadersCss($this[0], $headers, config.sortList, sortCSS)
                                appendToTable($this[0], multisort($this[0], config.sortList, cache))
                            }, 1)
                            return false
                        }
                    }).mousedown(function () {
                        if (config.cancelSelection) {
                            this.onselectstart = function () {
                                return false
                            }
                            return false
                        }
                    })
                    $this.bind('update', function () {
                        this.config.parsers = buildParserCache(this, $headers)
                        cache = buildCache(this)
                    }).bind('sorton', function (e, list) {
                        $(this).trigger('sortStart')
                        config.sortList = list
                        var sortList = config.sortList
                        updateHeaderSortCount(this, sortList)
                        setHeadersCss(this, $headers, sortList, sortCSS)
                        appendToTable(this, multisort(this, sortList, cache))
                    }).bind('appendCache', function () {
                        appendToTable(this, cache)
                    }).bind('applyWidgetId', function (e, id) {
                        getWidgetById(id).format(this)
                    }).bind('applyWidgets', function () {
                        applyWidget(this)
                    })
                    if ($.metadata && ($(this).metadata() && $(this).metadata().sortlist)) {
                        config.sortList = $(this).metadata().sortlist
                    }
                    if (config.sortList.length > 0) {
                        $this.trigger('sorton', [
                            config.sortList
                        ])
                    }
                    applyWidget(this)
                })
            }
            this.addParser = function (parser) {
                var l = parsers.length,
                    a = true
                for (var i = 0; i < l; i++) {
                    if (parsers[i].id.toLowerCase() == parser.id.toLowerCase()) {
                        a = false
                    }
                }
                if (a) {
                    parsers.push(parser)
                }
            }
            this.addWidget = function (widget) {
                widgets.push(widget)
            }
            this.formatFloat = function (s) {
                var i = parseFloat(s)
                return (isNaN(i)) ? 0 : i
            }
            this.formatInt = function (s) {
                var i = parseInt(s)
                return (isNaN(i)) ? 0 : i
            }
            this.isDigit = function (s, config) {
                var DECIMAL = '\\' + config.decimal
                var exp = '/(^[+]?0(' + DECIMAL + '0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)' + DECIMAL + '(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*' + DECIMAL + '0+$)/'
                return RegExp(exp).test($.trim(s))
            }
            this.clearTableBody = function (table) {
                if ($.browser.msie) {
                    function empty() {
                        while (this.firstChild) {
                            this.removeChild(this.firstChild)
                        }
                    }

                    empty.apply(table.tBodies[0])
                } else {
                    table.tBodies[0].innerHTML = ''
                }
            }
        }
    })
    $.fn.extend({
        tablesorter: $.tablesorter.construct
    })
    var ts = $.tablesorter
    ts.addParser({
        id: 'text',
        is: function (s) {
            return true
        },
        format: function (s) {
            return $.trim(s.toLowerCase())
        },
        type: 'text'
    })
    ts.addParser({
        id: 'digit',
        is: function (s, table) {
            var c = table.config
            return $.tablesorter.isDigit(s, c)
        },
        format: function (s) {
            return $.tablesorter.formatFloat(s)
        },
        type: 'numeric'
    })
    ts.addParser({
        id: 'currency',
        is: function (s) {
            return /^[ÃÂ£$Ã¢âÂ¬?.]/.test(s)
        },
        format: function (s) {
            return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g), ''))
        },
        type: 'numeric'
    })
    ts.addParser({
        id: 'ipAddress',
        is: function (s) {
            return /^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)
        },
        format: function (s) {
            var a = s.split('.'),
                r = '',
                l = a.length
            for (var i = 0; i < l; i++) {
                var item = a[i]
                if (item.length == 2) {
                    r += '0' + item
                } else {
                    r += item
                }
            }
            return $.tablesorter.formatFloat(r)
        },
        type: 'numeric'
    })
    ts.addParser({
        id: 'url',
        is: function (s) {
            return /^(https?|ftp|file):\/\/$/.test(s)
        },
        format: function (s) {
            return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//), ''))
        },
        type: 'text'
    })
    ts.addParser({
        id: 'isoDate',
        is: function (s) {
            return /^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)
        },
        format: function (s) {
            return $.tablesorter.formatFloat((s != '') ? new Date(s.replace(new RegExp(/-/g), '/')).getTime() : '0')
        },
        type: 'numeric'
    })
    ts.addParser({
        id: 'percent',
        is: function (s) {
            return /\%$/.test($.trim(s))
        },
        format: function (s) {
            return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g), ''))
        },
        type: 'numeric'
    })
    ts.addParser({
        id: 'usLongDate',
        is: function (s) {
            return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))
        },
        format: function (s) {
            return $.tablesorter.formatFloat(new Date(s).getTime())
        },
        type: 'numeric'
    })
    ts.addParser({
        id: 'shortDate',
        is: function (s) {
            return /\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)
        },
        format: function (s, table) {
            var c = table.config
            s = s.replace(/\-/g, '/')
            if (c.dateFormat == 'us') {
                s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, '$3/$1/$2')
            } else {
                if (c.dateFormat == 'uk') {
                    s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, '$3/$2/$1')
                } else {
                    if (c.dateFormat == 'dd/mm/yy' || c.dateFormat == 'dd-mm-yy') {
                        s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/, '$1/$2/$3')
                    }
                }
            }
            return $.tablesorter.formatFloat(new Date(s).getTime())
        },
        type: 'numeric'
    })
    ts.addParser({
        id: 'time',
        is: function (s) {
            return /^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)
        },
        format: function (s) {
            return $.tablesorter.formatFloat(new Date('2000/01/01 ' + s).getTime())
        },
        type: 'numeric'
    })
    ts.addParser({
        id: 'metadata',
        is: function (s) {
            return false
        },
        format: function (s, table, cell) {
            var c = table.config,
                p = (!c.parserMetadataName) ? 'sortValue' : c.parserMetadataName
            return $(cell).metadata() [p]
        },
        type: 'numeric'
    })
    ts.addWidget({
        id: 'zebra',
        format: function (table) {
            if (table.config.debug) {
                var time = new Date()
            }
            $('tr:visible', table.tBodies[0]).filter(':even').removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(':odd').removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1])
            if (table.config.debug) {
                $.tablesorter.benchmark('Applying Zebra widget', time)
            }
        }
    })
})(jQuery)
$.fn.extend({
    everyTime: function (interval, label, fn, times) {
        return this.each(function () {
            $.timer.add(this, interval, label, fn, times)
        })
    },
    oneTime: function (interval, label, fn) {
        return this.each(function () {
            $.timer.add(this, interval, label, fn, 1)
        })
    },
    stopTime: function (label, fn) {
        return this.each(function () {
            $.timer.remove(this, label, fn)
        })
    }
})
$.extend({
    timer: {
        global: [],
        guid: 1,
        dataKey: '$.timer',
        regex: /^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,
        powers: {
            ms: 1,
            cs: 10,
            ds: 100,
            s: 1000,
            das: 10000,
            hs: 100000,
            ks: 1000000
        },
        timeParse: function (value) {
            if (value == undefined || value == null) {
                return null
            }
            var result = this.regex.exec($.trim(value.toString()))
            if (result[2]) {
                var num = parseFloat(result[1])
                var mult = this.powers[result[2]] || 1
                return num * mult
            } else {
                return value
            }
        },
        add: function (element, interval, label, fn, times) {
            var counter = 0
            if ($.isFunction(label)) {
                if (!times) {
                    times = fn
                }
                fn = label
                label = interval
            }
            interval = $.timer.timeParse(interval)
            if (typeof interval != 'number' || isNaN(interval) || interval < 0) {
                return
            }
            if (typeof times != 'number' || isNaN(times) || times < 0) {
                times = 0
            }
            times = times || 0
            var timers = $.data(element, this.dataKey) || $.data(element, this.dataKey, {})
            if (!timers[label]) {
                timers[label] = {}
            }
            fn.timerID = fn.timerID || this.guid++
            var handler = function () {
                if ((++counter > times && times !== 0) || fn.call(element, counter) === false) {
                    $.timer.remove(element, label, fn)
                }
            }
            handler.timerID = fn.timerID
            if (!timers[label][fn.timerID]) {
                timers[label][fn.timerID] = window.setInterval(handler, interval)
            }
            this.global.push(element)
        },
        remove: function (element, label, fn) {
            var timers = $.data(element, this.dataKey),
                ret
            if (timers) {
                if (!label) {
                    for (label in timers) {
                        this.remove(element, label, fn)
                    }
                } else {
                    if (timers[label]) {
                        if (fn) {
                            if (fn.timerID) {
                                window.clearInterval(timers[label][fn.timerID])
                                delete timers[label][fn.timerID]
                            }
                        } else {
                            for (var fn in timers[label]) {
                                window.clearInterval(timers[label][fn])
                                delete timers[label][fn]
                            }
                        }
                        for (ret in timers[label]) {
                            break
                        }
                        if (!ret) {
                            ret = null
                            delete timers[label]
                        }
                    }
                }
                for (ret in timers) {
                    break
                }
                if (!ret) {
                    $.removeData(element, this.dataKey)
                }
            }
        }
    }
})
$(window).bind('unload', function () {
    $.each($.timer.global, function (index, item) {
        $.timer.remove(item)
    })
});
/*!
 * at.js 0.9.4 | (c) Adobe Systems Incorporated | All rights reserved
 * core, ajax, manipulation, event, data, css, attributes, serialize | (c) jQuery Foundation | jquery.org/license
 */
(function () {
    try {
        var bactmCookie = null
        document.cookie.split(';').forEach(function (e) {
            e = decodeURIComponent(e)
            if (e.indexOf('bactm_lts') > -1) {
                bactmCookie = JSON.parse(e.substr(e.indexOf('=') + 1, e.length))
            }
        })
        if (bactmCookie !== null) {
            vid = bactmCookie.adobeMID
            var mcMid = vid.d_mid
            var mcBlob = vid.d_blob
            var mcReg = vid.dcs_region
            window.targetPageParamsAll = function () {
                return 'mboxMCGVID=' + mcMid + '&mboxAAMB=' + mcBlob + '&mboxMCGLH=' + mcReg
            }
        }
    } catch (e) {
    }
})()
if (typeof mboxKill !== 'undefined' && mboxKill === true) {
    window.targetGlobalSettings = {
        enabled: false
    }
}
!function (e) {
    function t() {
    }

    function n(e) {
        var t = e.compatMode,
            n = e.documentMode,
            r = t && 'CSS1Compat' === t,
            o = n ? n >= 9 : !0
        return r && o
    }

    function r(e) {
        var t,
            n = /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,
            r = /([^:]*)(:[0-9]{0,5})?/,
            o = /([^\.]+\.[^\.]{3}|[^\.]+\.[^\.]+\.[^\.]{2})$/,
            i = 'www.',
            u = r.exec(e) [1]
        return n.test(u) ? '' : (t = o.exec(u), null === t || 0 === t.length ? '' : (u = t[0], 0 === u.indexOf(i) ? u.substr(4) : u))
    }

    function o(e, t, n, r) {
        t[n] !== r && (e[n] = t[n])
    }

    function i(e, t) {
        e.enabled && (o(e, t, 'clientCode'), o(e, t, 'serverDomain'), o(e, t, 'cookieDomain'), o(e, t, 'crossDomain'), o(e, t, 'timeout'), o(e, t, 'globalMboxAutoCreate'), o(e, t, 'visitorApiTimeout'), o(e, t, 'enabled'), o(e, t, 'defaultContentHiddenStyle'), o(e, t, 'defaultContentVisibleStyle'), o(e, t, 'bodyHidingEnabled'), o(e, t, 'bodyHiddenStyle'), o(e, t, 'imsOrgId'), o(e, t, 'overrideMboxEdgeServer'), o(e, t, 'overrideMboxEdgeServerTimeout'), o(e, t, 'optoutEnabled'), o(e, t, 'secureOnly'))
    }

    function u(e, n) {
        e.enabled || (n.adobe = n.adobe || {}, n.adobe.target = {}, n.adobe.target.VERSION = e.version, n.adobe.target.getOffer = t, n.adobe.target.applyOffer = t, n.adobe.target.trackEvent = t, n.adobe.target.registerExtension = t, n.mboxCreate = t, n.mboxDefine = t, n.mboxUpdate = t)
    }

    e.cookieDomain = r(window.location.hostname),
        e.enabled = n(document),
        i(e, window.targetGlobalSettings || {}),
        u(e, window),
    e.enabled !== !1 && (function (e) {
        (function (e) {
            if (!('Event' in e)) {
                return !1
            }
            if ('function' == typeof e.Event) {
                return !0
            }
            try {
                return new Event('click'),
                    !0
            } catch (t) {
                return !1
            }
        })(this) || !function () {
            function t(e, t) {
                for (var n = -1, r = e.length; ++n < r;) {
                    if (n in e && e[n] === t) {
                        return n
                    }
                }
                return -1
            }

            var n = {
                    click: 1,
                    dblclick: 1,
                    keyup: 1,
                    keypress: 1,
                    keydown: 1,
                    mousedown: 1,
                    mouseup: 1,
                    mousemove: 1,
                    mouseover: 1,
                    mouseenter: 1,
                    mouseleave: 1,
                    mouseout: 1,
                    storage: 1,
                    storagecommit: 1,
                    textinput: 1
                },
                r = window.Event && window.Event.prototype || null
            window.Event = Window.prototype.Event = function (t, n) {
                var r,
                    o,
                    i
                if (!t) {
                    throw Error('Not enough arguments')
                }
                return 'createEvent' in document ? (r = document.createEvent('Event'), o = n && n.bubbles !== e ? n.bubbles : !1, i = n && n.cancelable !== e ? n.cancelable : !1, r.initEvent(t, o, i), r) : (r = document.createEventObject(), r.type = t, r.bubbles = n && n.bubbles !== e ? n.bubbles : !1, r.cancelable = n && n.cancelable !== e ? n.cancelable : !1, r)
            },
            r && Object.defineProperty(window.Event, 'prototype', {
                configurable: !1,
                enumerable: !1,
                writable: !0,
                value: r
            }),
            'createEvent' in document || (window.addEventListener = Window.prototype.addEventListener = Document.prototype.addEventListener = Element.prototype.addEventListener = function () {
                var e = this,
                    r = arguments[0],
                    o = arguments[1]
                if (e === window && r in n) {
                    throw Error('In IE8 the event: ' + r + ' is not available on the window object.')
                }
                e._events || (e._events = {}),
                e._events[r] || (e._events[r] = function (n) {
                    var r,
                        o = e._events[n.type].list,
                        i = o.slice(),
                        u = -1,
                        a = i.length
                    for (n.preventDefault = function () {
                        n.cancelable !== !1 && (n.returnValue = !1)
                    }, n.stopPropagation = function () {
                        n.cancelBubble = !0
                    }, n.stopImmediatePropagation = function () {
                        n.cancelBubble = !0,
                            n.cancelImmediate = !0
                    }, n.currentTarget = e, n.relatedTarget = n.fromElement || null, n.target = n.target || n.srcElement || e, n.timeStamp = (new Date).getTime(), n.clientX && (n.pageX = n.clientX + document.documentElement.scrollLeft, n.pageY = n.clientY + document.documentElement.scrollTop); ++u < a && !n.cancelImmediate;) {
                        u in i && (r = i[u], -1 !== t(o, r) && 'function' == typeof r && r.call(e, n))
                    }
                }, e._events[r].list = [], e.attachEvent && e.attachEvent('on' + r, e._events[r])),
                    e._events[r].list.push(o)
            }, window.removeEventListener = Window.prototype.removeEventListener = Document.prototype.removeEventListener = Element.prototype.removeEventListener = function () {
                var e,
                    n = this,
                    r = arguments[0],
                    o = arguments[1]
                n._events && n._events[r] && n._events[r].list && (e = t(n._events[r].list, o), -1 !== e && (n._events[r].list.splice(e, 1), n._events[r].list.length || (n.detachEvent && n.detachEvent('on' + r, n._events[r]), delete n._events[r])))
            }, window.dispatchEvent = Window.prototype.dispatchEvent = Document.prototype.dispatchEvent = Element.prototype.dispatchEvent = function (e) {
                var t,
                    n,
                    r
                if (!arguments.length) {
                    throw Error('Not enough arguments')
                }
                if (!e || 'string' != typeof e.type) {
                    throw Error('DOM Events Exception 0')
                }
                t = this,
                    n = e.type
                try {
                    e.bubbles || (e.cancelBubble = !0, r = function (e) {
                        e.cancelBubble = !0,
                            (t || window).detachEvent('on' + n, r)
                    }, this.attachEvent('on' + n, r)),
                        this.fireEvent('on' + n, e)
                } catch (o) {
                    e.target = t
                    do {
                        e.currentTarget = t,
                        '_events' in t && 'function' == typeof t._events[n] && t._events[n].call(t, e),
                        'function' == typeof t['on' + n] && t['on' + n].call(t, e),
                            t = 9 === t.nodeType ? t.parentWindow : t.parentNode
                    } while (t && !e.cancelBubble)
                }
                return !0
            }, document.attachEvent('onreadystatechange', function () {
                'complete' === document.readyState && document.dispatchEvent(new Event('DOMContentLoaded', {
                    bubbles: !0
                }))
            }))
        }(),
        'CustomEvent' in this && ('function' == typeof this.CustomEvent || ('' + this.CustomEvent).indexOf('CustomEventConstructor') > -1) || (this.CustomEvent = function (e, t) {
            if (!e) {
                throw Error('TypeError: Failed to construct "CustomEvent": An event name must be provided.')
            }
            var n
            if (t = t || {
                bubbles: !1,
                cancelable: !1,
                detail: null
            }, 'createEvent' in document) {
                try {
                    n = document.createEvent('CustomEvent'),
                        n.initCustomEvent(e, t.bubbles, t.cancelable, t.detail)
                } catch (r) {
                    n = document.createEvent('Event'),
                        n.initEvent(e, t.bubbles, t.cancelable),
                        n.detail = t.detail
                }
            } else {
                n = new Event(e, t),
                    n.detail = t && t.detail || null
            }
            return n
        }, CustomEvent.prototype = Event.prototype)
    }.call('object' == typeof window && window || 'object' == typeof self && self || 'object' == typeof global && global || {}), function () {
        function t(e) {
            Ia = e
        }

        function n(e) {
            e.fn.isHead = function () {
                return e(this).is('head')
            },
                e.fn.isBody = function () {
                    return e(this).is('body')
                },
                e.fn.isHeadOrBody = function () {
                    var t = e(this)
                    return t.isHead() || t.isBody()
                }
        }

        function r(e) {
            e.fn.showElement = function () {
                var t = e(this),
                    n = e.trim(t.attr('style')),
                    r = [
                        Ia.defaultContentVisibleStyle
                    ]
                return n && (';' !== n[n.length - 1] && (n += ';'), r.unshift(e.trim(n))),
                    t.addClass(ka),
                    t.attr('style', r.join(' '))
            },
                e.fn.exists = function () {
                    return e(this).length > 0
                },
                e.isElement = function (t) {
                    return !!t && 1 === t.nodeType && 'object' === e.type(t) && !e.isPlainObject(t)
                },
                e.sequential = function (t) {
                    var n = e.Deferred().resolve([])
                    return e.each(t, function (e, t) {
                        n = n.then(t)
                    }),
                        n
                }
        }

        function o(e) {
            try {
                return encodeURIComponent(e)
            } catch (t) {
                return e
            }
        }

        function i(e) {
            try {
                return decodeURIComponent(e)
            } catch (t) {
                return e
            }
        }

        function u(e) {
            for (var t = fo.exec(e), n = {}, r = 14; r--;) {
                n[ho[r]] = t[r] || ''
            }
            return n.queryParams = {},
                n.query.replace(po, function (e, t, r) {
                    var o = i(t),
                        u = i(r)
                    k(R(o)) && I(u) && (n.queryParams[R(o)] = R(u))
                }),
                n
        }

        function a(e) {
            var t = u(e)
            return t.queryParams
        }

        function c(e, t) {
            var n = a(e)
            return j(n[t]) ? null : n[t]
        }

        function s(e) {
            var t,
                n,
                r,
                i,
                a,
                c = arguments.length <= 1 || void 0 === arguments[1] ? {}
                    : arguments[1]
            return q(c) ? e : (t = {}, n = [], r = u(e), i = e.split('?') [0], O(r.queryParams, function (e, n) {
                return t[n] = e
            }), E(t, c), O(t, function (e, t) {
                return n.push(o(t) + '=' + o(e))
            }), a = n.join('&'), k(r.anchor) && (a = a + '#' + r.anchor), i + '?' + a)
        }

        function l(e) {
            var t = {},
                n = u('?' + e)
            return O(n.queryParams, function (e, n) {
                return t[n] = e
            }),
                t
        }

        function f(e) {
            return e.split('=')
        }

        function d(e) {
            return !V(e) && 2 === e.length && k(R(e[0]))
        }

        function p(e) {
            var t = {},
                n = w(e, function (e) {
                    return k(e)
                }),
                r = A(n, function (e) {
                    return [f(e)]
                }),
                o = w(r, function (e) {
                    return d(e)
                })
            return O(o, function (e) {
                return t[i(R(e[0]))] = i(R(e[1]))
            }),
                t
        }

        function h(e, t, n) {
            O(e, function (e, r) {
                B(e) ? (t.push(r), h(e, t, n), t.pop()) : V(t) ? n[r] = e : n[t.concat(r).join('.')] = e
            })
        }

        function m(e) {
            var t,
                n
            if (!F(e)) {
                return {}
            }
            t = null,
                n = {}
            try {
                t = e()
            } catch (r) {
            }
            return H(t) ? {}
                : M(t) ? p(t) : k(t) ? l(t) : B(t) ? (h(t, [], n), n) : {}
        }

        function g(e) {
            return Pa(e).showElement()
        }

        function v(e) {
            return Pa(e).html()
        }

        function y(e) {
            return Pa(e).isHead()
        }

        function b(e) {
            return Pa(e).isBody()
        }

        function T(e) {
            return Pa(e).isHeadOrBody()
        }

        function E(e, t) {
            return O(t, function (t, n) {
                return e[n] = t
            }),
                e
        }

        function x() {
            var e,
                t,
                n = [],
                r = '0123456789abcdef'
            for (e = 0; 36 > e; e++) {
                n[e] = r.substr(Math.floor(16 * Math.random()), 1)
            }
            return n[14] = '4',
                n[19] = r.substr(3 & n[19] | 8, 1),
                n[8] = n[13] = n[18] = n[23] = '-',
                t = n.join(''),
                t.replace(/-/g, '')
        }

        function C(e) {
            var t,
                n,
                r = 5381
            for (t = 0; t < e.length; t++) {
                n = e.charCodeAt(t),
                    r = (r << 5) + r + n
            }
            return r
        }

        function N(e) {
            for (var t = e + '', n = t.length, r = t.charCodeAt(0), o = -1, i = void 0, u = ''; ++o < n;) {
                i = t.charCodeAt(o),
                    u += 0 !== i ? i >= 1 && 31 >= i || 127 === i || 0 === o && i >= 48 && 57 >= i || 1 === o && i >= 48 && 57 >= i && 45 === r ? '\\' + i.toString(16) + ' ' : (0 !== o || 1 !== n || 45 !== i) && (i >= 128 || 45 === i || 95 === i || i >= 48 && 57 >= i || i >= 65 && 90 >= i || i >= 97 && 122 >= i) ? t.charAt(o) : '\\' + t.charAt(o) : 'Ã¯Â¿Â½'
            }
            return u
        }

        function S(e, t, n, r, i) {
            var a = u(e),
                c = {},
                s = []
            return O(a.queryParams, function (e, t) {
                return s.push(o(t) + '=' + o(e))
            }),
                O(t, function (e, t) {
                    return k(r[t]) ? void (c[t] = r[t]) : void (k(e) && (c[t] = e))
                }),
                O(n, function (e, n) {
                    return k(i[n]) ? void (c[n] = i[n]) : void ((P(r[n]) || j(t[n])) && k(e) && (c[n] = e))
                }),
                O(c, function (e, t) {
                    return s.push(o(t) + '=' + o(e))
                }),
            a.path + '?' + s.join('&')
        }

        function A(e, t) {
            return Pa.map(e, t)
        }

        function O(e, t) {
            Pa.each(e, function (e, n) {
                t(n, e)
            })
        }

        function w(e, t) {
            return Pa.grep(e, t)
        }

        function R(e) {
            return Pa.trim(e)
        }

        function D(e, t) {
            return e.length > t
        }

        function I(e) {
            return 'string' === Pa.type(e)
        }

        function k(e) {
            return I(e) && Pa.trim(e).length > 0
        }

        function P(e) {
            return !I(e) || 0 === e.length
        }

        function L(e) {
            return 'boolean' === Pa.type(e)
        }

        function _(e) {
            return 'number' === Pa.type(e)
        }

        function j(e) {
            return 'undefined' === Pa.type(e)
        }

        function M(e) {
            return Pa.isArray(e)
        }

        function F(e) {
            return Pa.isFunction(e)
        }

        function H(e) {
            return 'null' === Pa.type(e)
        }

        function q(e) {
            return Pa.isEmptyObject(e)
        }

        function B(e) {
            return 'object' === Pa.type(e)
        }

        function U(e) {
            return Pa.isElement(e)
        }

        function W(e) {
            return !U(e)
        }

        function V(e) {
            return !(M(e) && e.length > 0)
        }

        function $(e, t) {
            var n = e.is('div.' + to)
            return j(t) ? n : n && e.hasClass(eo + t)
        }

        function X(e, t) {
            pe(e).append(t)
        }

        function Y(e, t) {
            pe(e).prepend(t)
        }

        function z(e, t) {
            pe(e).after(t)
        }

        function K(e, t) {
            pe(e).before(t)
        }

        function G(e) {
            pe(e).remove()
        }

        function J(e, t) {
            Pa(e).before(t)
        }

        function Q(e) {
            var t,
                n = [
                    'protocol',
                    'host'
                ]
            return k(e) && (t = function () {
                var t = u(e),
                    r = w(n, function (e) {
                        return P(t[e])
                    })
                return {
                    v: V(r)
                }
            }(), 'object' == typeof t) ? t.v : !1
        }

        function Z(e) {
            var t = Pa('.' + N(e))
            return t.last()
        }

        function ee(e) {
            var t = Z(eo + e)
            return t.exists() ? t : Z(to)
        }

        function te(e, t) {
            return Pa(e).text(t)
        }

        function ne(e, t) {
            return Pa(e).html(t)
        }

        function re(e) {
            return Pa('<div></div>').append(e)
        }

        function oe(e) {
            return k(be(e, 'src'))
        }

        function ie(e) {
            return '<script type="text/atjs-marker-script" class="' + go + '-' + e + '"></script>'
        }

        function ue(e) {
            var t = re(e),
                n = -1
            return O(t.find(xo), function (e) {
                var t = oe(e)
                t || (n += 1, J(e, ie(n))),
                    pe(e).remove()
            }),
                t.html()
        }

        function ae(e) {
            var t = re(e),
                n = t.find('img')
            return O(n, function (e) {
                return ce(e, 'src', mo)
            }),
                t.html()
        }

        function ce(e, t, n) {
            var r = be(e, t)
            Ee(e, n, r),
                Te(e, t)
        }

        function se(e) {
            var t = pe(e),
                n = t.find('img')
            O(n, function (e) {
                var t = be(e, mo)
                Ee(e, 'src', t),
                    Te(e, mo)
            })
        }

        function le(e) {
            var t = ue(e)
            return ae(t)
        }

        function fe() {
            Ia.bodyHidingEnabled === !0 && Pa('#' + vo).remove()
        }

        function de(e) {
            return Pa(e).exists()
        }

        function pe(e) {
            return Pa(e)
        }

        function he(e) {
            return pe(e).parent()
        }

        function me(e, t) {
            var n = {},
                r = w(t, function (t) {
                    return !j(e[t])
                })
            return O(r, function (t) {
                return n[t] = e[t]
            }),
                n
        }

        function ge() {
            return Pa.Deferred()
        }

        function ve(e) {
            var t = ge()
            return t.resolve(e),
                t.promise()
        }

        function ye(e) {
            var t = ge()
            return t.reject(e),
                t.promise()
        }

        function be(e, t) {
            return Pa(e).attr(t)
        }

        function Te(e, t) {
            Pa(e).removeAttr(t)
        }

        function Ee(e, t, n) {
            Pa(e).attr(t, n)
        }

        function xe(e) {
            var t = {}
            return w(e, function (e) {
                return j(t[e]) ? (t[e] = !0, !0) : !1
            })
        }

        function Ce(e) {
            return Pa.sequential(e)
        }

        function Ne(e) {
            return Pa.when.apply(null, e)
        }

        function Se(e) {
            var t = {},
                n = e.getSessionId(),
                r = e.getDeviceId()
            return k(n) && (t.sessionId = n),
            k(r) && (t.deviceId = r),
                t
        }

        function Ae() {
            var e = bo,
                t = '.' + to + ' {' + Ia.defaultContentHiddenStyle + '}'
            pe('head').append('<style id="' + e + '">' + t + '</style>')
        }

        function Oe() {
            Pa('#' + bo).remove()
        }

        function we(e) {
            function t(e, t) {
                Pa(b).trigger(e, t)
            }

            function n() {
                t(Eo)
            }

            function r() {
                t(To)
            }

            function s(e) {
                K(Pa('script').eq(0), e)
            }

            function l(e, t) {
                return '<style id="' + e + '" class="' + yo + '">' + t + '</style>'
            }

            function f(e) {
                return V(e) ? void n() : (O(e, function (e) {
                    var t = e + ' {' + Ia.defaultContentHiddenStyle + '}'
                    s(l('at-' + C(e), t))
                }), void n())
            }

            function d() {
                pe('.' + yo).remove()
            }

            function h() {
                Ia.bodyHidingEnabled === !0 && (s(l(vo, Ia.bodyHiddenStyle)), Pa(b).one(Eo, fe))
            }

            function g(e, t) {
                Pa(b).one(e, t)
            }

            function v(e, t) {
                Pa(b).off(e, t)
            }

            function y(e) {
                var t = Pa.ajax(e)
                return g(To, function () {
                    return t.abort()
                }),
                    t
            }

            var b = e.document
            return {
                hideBody: h,
                hideElements: f,
                showElements: d,
                triggerRedirectEvent: r,
                triggerShowBody: n,
                parseUri: u,
                getAjax: y,
                getPageParameters: a,
                getPageParameter: c,
                generateId: x,
                buildDynamicContentUrl: S,
                getParametersFromArray: p,
                mergeParameters: E,
                encode: o,
                decode: i,
                getTargetPageParameters: function (t) {
                    var n = Ia.globalMboxName
                    return n !== t ? {}
                        : m(e.targetPageParams)
                },
                getTargetPageParametersAll: function () {
                    return m(e.targetPageParamsAll)
                },
                delayCallback: function (t) {
                    for (var n = arguments.length, r = Array(n > 1 ? n - 1 : 0), o = 1; n > o; o++) {
                        r[o - 1] = arguments[o]
                    }
                    e.setTimeout(function () {
                        return t.apply(t, r)
                    }, 0)
                },
                findLastMboxNode: ee,
                isNull: H,
                isMboxDiv: $,
                redirect: function (t) {
                    e.location.replace(t)
                },
                subscribeOnce: g,
                trigger: t,
                unsubscribe: v
            }
        }

        function Re(e, t) {
            return j(e.documentElement) ? e.body[t] : e.documentElement[t]
        }

        function De(e, t, n, r) {
            return j(e[n]) ? Re(t, r) : e[n]
        }

        function Ie(e, t) {
            return function () {
                var n = {}
                return n.width = De(e, t, 'innerWidth', 'clientWidth'),
                    n.height = De(e, t, 'innerHeight', 'clientHeight'),
                    n.screenWidth = e.screen.width,
                    n.screenHeight = e.screen.height,
                    n.colorDepth = e.screen.colorDepth,
                    n.timeOffset = -(new Date).getTimezoneOffset(),
                    n
            }
        }

        function ke(e, t, n) {
            return function () {
                var r = Ia.crossDomain !== co,
                    o = e(),
                    i = {}
                return i[Do] = o.screenHeight,
                    i[Io] = o.screenWidth,
                    i[Ro] = o.colorDepth,
                    i[Lo] = o.width,
                    i[ko] = o.height,
                    i[Po] = o.timeOffset,
                    i[Uo] = n,
                    i[zo] = Ia.version,
                    i[qo] = t.location.hostname,
                    i[Yo] = t.location.href,
                    i[Vo] = t.referrer,
                r && (i[Fo] = Ia.crossDomain),
                    i
            }
        }

        function Pe(e, t) {
            return _(e) ? e : t
        }

        function Le(e, t) {
            var n = {
                status: e
            }
            return k(t) && (n.message = t),
                n
        }

        function _e(e) {
            return Le(Zo, e)
        }

        function je(e) {
            return Le(ei, e)
        }

        function Me(e) {
            return Le(Jo, e)
        }

        function Fe(e) {
            return F(e) ? e : Ko
        }

        function He(e) {
            return B(e.console) && F(e.console.log) && F(e.console.error)
        }

        function qe(e, t) {
            var n = e.location.search
            return k(t.getPageParameter(n, ri))
        }

        function Be(e, t, n) {
            var r = {
                log: Ko,
                error: Ko
            }
            return He(e) && (r.error = function () {
                e.console.error.apply(e.console, [].concat.apply([ui], arguments))
            }, qe(t, n) && (r.log = function () {
                e.console.log.apply(e.console, [].concat.apply([ui], arguments))
            })),
                r
        }

        function Ue(e, t, n, r) {
            t = o(t + ''),
                n = o(n + ''),
                We(e, t, n, r)
        }

        function We(e, t, n, r) {
            if (r.path = r.path || '/', _(r.expires)) {
                var o = new Date
                o = new Date(o.getTime() + r.expires),
                    r.expires = o
            }
            e.cookie = t + '=' + n + (r.expires ? '; expires=' + r.expires.toUTCString() : '') + (r.path ? '; path=' + r.path : '') + (r.domain ? '; domain=' + r.domain : '')
        }

        function Ve(e, t) {
            var n = RegExp('(^|; )' + t + '=([^;]*)').exec(e.cookie)
            return H(n) || 3 !== n.length ? null : i(n[2])
        }

        function $e(e, t, n) {
            return {
                name: e,
                value: t,
                expires: n
            }
        }

        function Xe(e) {
            return o(e.name) + '#' + o(e.value) + '#' + e.expires
        }

        function Ye(e) {
            var t = e.split('#')
            return V(t) || t.length < 3 ? null : isNaN(parseInt(t[2], 10)) ? null : $e(i(t[0]), i(t[1]), +t[2])
        }

        function ze(e) {
            return P(e) ? [] : e.split('|')
        }

        function Ke(e) {
            return e.expires
        }

        function Ge(e) {
            return Math.max.apply(null, A(e, Ke))
        }

        function Je(e) {
            function t(t) {
                var n = Ve(e, o(t)),
                    r = A(ze(n), function (e) {
                        return Ye(e)
                    }),
                    i = new Date,
                    u = Math.ceil(i.getTime() / 1000),
                    a = {},
                    c = w(r, function (e) {
                        return B(e) && u <= e.expires
                    })
                return O(c, function (e) {
                    return a[e.name] = e
                }),
                    a
            }

            function n(t, n) {
                var r = new Date,
                    o = A(n, function (e) {
                        return e
                    }),
                    i = Math.abs(1000 * Ge(o) - r.getTime()),
                    u = A(o, function (e) {
                        return Xe(e)
                    })
                We(e, ci, u.join('|'), {
                    domain: t,
                    expires: i
                })
            }

            var r = Ia.cookieDomain,
                i = Ia.crossDomain === ao,
                u = {
                    isEnabled: function () {
                        Ue(e, ai, !0, {
                            domain: r
                        })
                        var t = !H(Ve(e, ai))
                        return Ue(e, ai, '', {
                            domain: r,
                            expires: -3600000
                        }),
                            t
                    },
                    setCookie: function (e, o, u) {
                        var a,
                            c,
                            s
                        i || P(e) || H(o) || j(o) || _(u) && (a = t(ci), c = new Date, s = Math.ceil(u + c.getTime() / 1000), a[e] = $e(e, o, s), n(r, a))
                    },
                    getCookie: function (e) {
                        var n,
                            r
                        return i ? null : (n = t(ci), r = n[e], B(r) ? r : null)
                    }
                }
            return u
        }

        function Qe(e) {
            var t = e.getCookie(si)
            return B(t) && k(t.value) ? t.value : ''
        }

        function Ze(e, t, n) {
            e.setCookie(si, t, n)
        }

        function et(e) {
            var t = Ia.deviceIdLifetime / 1000,
                n = Qe(e)
            return k(n) && Ze(e, n, t),
                {
                    getId: function () {
                        return n
                    },
                    setId: function (r) {
                        n = r,
                            Ze(e, r, t)
                    }
                }
        }

        function tt(e) {
            var t = e.getCookie(li)
            return B(t) && k(t.value) ? t.value : ''
        }

        function nt(e, t) {
            return t.getPageParameter(e.location.search, Wo)
        }

        function rt(e, t, n) {
            e.setCookie(li, t, n)
        }

        function ot(e, t, n) {
            var r = Ia.sessionIdLifetime / 1000,
                o = nt(e, n)
            return o = o || tt(t) || n.generateId(),
                rt(t, o, r),
                {
                    getId: function () {
                        return o
                    },
                    setId: function (e) {
                        return o = e,
                            rt(t, o, r)
                    }
                }
        }

        function it(e) {
            return e.replace(/"/g, '&quot;').replace(/>/g, '&gt;')
        }

        function ut(e) {
            return no.replace('{clientCode}', e)
        }

        function at(e, t, n) {
            var r = n ? 'https://' : '//'
            return r + e + ut(t) + '?'
        }

        function ct(e) {
            if (pi.exec(e)) {
                throw Error('Parameter "' + e + '" contains invalid characters.')
            }
        }

        function st() {
            var e = new Date
            return e.getTime() - e.getTimezoneOffset() * Zr
        }

        function lt(e, t, n) {
            var r = k(e) && (L(t) || _(t) || I(t))
            r && (e = R(e + ''), t = R(t + ''), ct(e), n[e] = t)
        }

        function ft(e, t, n) {
            if (!n) {
                return t
            }
            var r = Ve(e, fi)
            return P(r) ? t : r
        }

        function dt(e, t, n, r, o) {
            function i(e, t) {
                O(e, function (e, n) {
                    return lt(n, e, t)
                })
            }

            function u(u) {
                var d,
                    p = ft(e, c, s),
                    h = at(p, a, l),
                    m = {},
                    g = t()
                return i(g, f),
                    i(o.getTargetPageParametersAll(), f),
                    lt(Wo, n.getId(), f),
                    lt(Xo, r.getId(), f),
                    lt($o, st(), f),
                    O(f, function (e, t) {
                        return m[t] = e
                    }),
                B(u) && O(u, function (e, t) {
                    return lt(t, e, m)
                }),
                    d = A(m, function (e, t) {
                        return o.encode(t) + '=' + o.encode(e)
                    }),
                    it(h + d.join('&'))
            }

            var a = Ia.clientCode,
                c = Ia.serverDomain,
                s = Ia.overrideMboxEdgeServer,
                l = Ia.secureOnly,
                f = {},
                d = {
                    buildUrl: u
                }
            return d
        }

        function pt(e) {
            var t = {}
            return O(e.params, function (e) {
                j(t[e.type]) && (t[e.type] = {}),
                    t[e.type][e.name] = e.defaultValue
            }),
                t
        }

        function ht(e) {
            var t = []
            return j(e.request) || (t = e.request),
                t
        }

        function mt(e) {
            return -1 !== e.indexOf('mbox')
        }

        function gt(e) {
            var t = e.mbox,
                n = {}
            return j(t) ? n : (O(t, function (e, t) {
                mt(t) || (n[t] = e)
            }), n)
        }

        function vt(e, t) {
            function n(n) {
                var r = n.offer.content.url,
                    o = pt(n.offer.content),
                    i = ht(o),
                    u = gt(o),
                    a = e.location.search,
                    c = t.getPageParameters(a),
                    s = n.params,
                    l = t.buildDynamicContentUrl(r, i, u, c, s)
                return t.getAjax({
                    url: l,
                    timeout: Ia.timeout
                })
            }

            return n
        }

        function yt(e, t, n, r, o, i) {
            function u() {
                var e = H(r.getPageParameter(t.location.search, oi))
                return l || (e = e && n.isEnabled()),
                e && H(Ve(t, di))
            }

            function a(e) {
                return !H(r.getPageParameter(e, ii))
            }

            function c() {
                return a(t.location.search) || a(t.referrer)
            }

            function s(e) {
                return 'XMLHttpRequest' in e && 'withCredentials' in new e.XMLHttpRequest
            }

            var l = Ia.crossDomain === ao,
                f = 0
            return {
                isEnabled: function () {
                    return u()
                },
                isMboxEdit: function () {
                    return c()
                },
                isCorsSupported: function () {
                    return s(e)
                },
                getSessionId: function () {
                    return o.getId()
                },
                getDeviceId: function () {
                    return i.getId()
                },
                requests: {
                    incrementAndGet: function () {
                        return ++f
                    }
                }
            }
        }

        function bt() {
            function e(e) {
                return n[e]
            }

            function t(e) {
                return M(n[e])
            }

            var n = {}
            return {
                add: function (e, r) {
                    return t(e) ? void n[e].push(r) : void (n[e] = [
                        r
                    ])
                },
                getKeys: function () {
                    return A(n, function (e, t) {
                        return t
                    })
                },
                findAll: function () {
                    var e = {}
                    return O(n, function (t, n) {
                        return e[n] = t
                    }),
                        e
                },
                remove: function (e, t) {
                    if (F(t)) {
                        var r = w(this.findByKey(e), function (e) {
                            return !t(e)
                        })
                        n[e] = r
                    } else {
                        delete n[e]
                    }
                },
                clear: function () {
                    n = {}
                },
                findByKey: function (t) {
                    var n = e(t)
                    return M(n) ? n : []
                }
            }
        }

        function Tt(e, t) {
            function n() {
                if (j(e.Visitor)) {
                    return null
                }
                if (H(e.Visitor)) {
                    return null
                }
                if (!F(e.Visitor.getInstance)) {
                    return null
                }
                var t = e.Visitor.getInstance(v)
                return B(t) && F(t.isAllowed) && t.isAllowed() ? t : null
            }

            function r(e) {
                var t = ge()
                return H(x) ? t.reject() : (e.visitor = x, t.resolve(e)),
                    t.promise()
            }

            function o(e, t, n) {
                var r = ge()
                return F(e[t]) ? (e[t](function (e) {
                    r.resolve({
                        key: n,
                        value: e
                    })
                }, !0), r.promise()) : (r.resolve(void 0), r.promise())
            }

            function i(e) {
                var t = [
                    o(e, 'getMarketingCloudVisitorID', Oo),
                    o(e, 'getAudienceManagerBlob', So),
                    o(e, 'getAnalyticsVisitorID', No),
                    o(e, 'getAudienceManagerLocationHint', Ao)
                ]
                return Ne(t)
            }

            function u(e) {
                var t = {},
                    n = w(e, function (e) {
                        return !j(e)
                    })
                return O(n, function (e) {
                    return t[e.key] = e.value
                }),
                    t
            }

            function a(e) {
                return mi + e
            }

            function c(e, t, n) {
                O(e, function (e, r) {
                    B(e) ? (t.push(r), c(e, t, n), t.pop()) : V(t) ? n[a(r)] = e : n[a(t.concat(r).join('.'))] = e
                })
            }

            function s(e) {
                var t,
                    n
                return F(e.getCustomerIDs) ? (t = e.getCustomerIDs(), B(t) ? (n = {}, c(t, [], n), n) : {}) : {}
            }

            function l(e) {
                var t = {}
                return k(e.trackingServer) && (t[gi] = e.trackingServer),
                k(e.trackingServerSecure) && (t[vi] = e.trackingServerSecure),
                    t
            }

            function f(t) {
                return T && F(t.isOptedOut) && !j(e.Visitor.OptOut)
            }

            function d(n) {
                var r,
                    o = n.visitor,
                    i = ge()
                return f(o) ? (t.log(hi, 'preparing opt-out request'), r = e.setTimeout(function () {
                    return i.reject()
                }, b), o.isOptedOut(function (n) {
                    e.clearTimeout(r),
                        t.log(hi, 'opt-out value', n),
                        i.resolve(n)
                }, e.Visitor.OptOut.GLOBAL, !0), i.promise()) : (i.resolve(!1), i.promise())
            }

            function p(e, t) {
                var n,
                    r = e.visitor
                return F(r.getSupplementalDataID) ? (n = 'mbox:' + y + ':' + t, r.getSupplementalDataID(n)) : null
            }

            function h(n) {
                var r,
                    o = n.visitor,
                    a = n.mboxName,
                    c = ge()
                return t.log(hi, 'requests fired'),
                    r = e.setTimeout(function () {
                        return c.reject()
                    }, b),
                    i(o).done(function () {
                        var e,
                            r,
                            i,
                            f,
                            d
                        for (e = arguments.length, r = Array(e), i = 0; e > i; i++) {
                            r[i] = arguments[i]
                        }
                        f = u(r),
                            E(f, s(o)),
                            E(f, l(o)),
                            d = p(n, a),
                        k(d) && (f[wo] = d),
                            t.log(hi, 'success', f),
                            c.resolve(f)
                    }).fail(function () {
                        return c.reject()
                    }).always(function () {
                        return e.clearTimeout(r)
                    }),
                    c.promise()
            }

            function m(e) {
                var t = {
                    mboxName: e
                }
                return r(t).then(h, function () {
                    return null
                })
            }

            function g() {
                var e = {},
                    t = ge()
                return r(e).then(d).done(function (e) {
                    return t.resolve(e)
                }).fail(function () {
                    return t.resolve(!1)
                }),
                    t.promise()
            }

            var v = Ia.imsOrgId,
                y = Ia.clientCode,
                b = Ia.visitorApiTimeout,
                T = Ia.optoutEnabled,
                x = n(),
                C = {
                    getParameters: m,
                    getOptOut: g
                }
            return C
        }

        function Et(e, t, n) {
            var r = {
                name: e,
                valid: function (n) {
                    return t(n[e])
                }
            }
            return k(n) && (r.message = n),
                r
        }

        function xt(e, t) {
            return {
                message: t,
                valid: function (t) {
                    return e(t)
                }
            }
        }

        function Ct(e) {
            return 'missing mandatory parameter: "' + e + '"'
        }

        function Nt(e, t) {
            var n,
                r,
                o = ''
            for (n = 0; n < t.length; n += 1) {
                if (r = t[n], !r.valid(e)) {
                    o = r.message
                    break
                }
            }
            return P(o) ? Me() : _e(o)
        }

        function St(e) {
            return k(e) && !D(e, ro)
        }

        function At(e, t) {
            function n(e) {
                var t = Me()
                return O(Bi, function (n) {
                    var r = n.valid(e)
                    r.status === Zo && t.status === Jo && (t = r)
                }),
                    t
            }

            return function (r) {
                var o,
                    i,
                    u = {},
                    a = ge(),
                    c = Nt(r, Pi)
                return c.status === Zo ? (t.error(Ti, c.message), a.reject(), a.promise()) : (r.type = r.type || Li.JSON, c = n(r), c.status === Zo ? (t.error(c.message), a.reject(), a.promise()) : (o = r.type.toLowerCase(), i = Pe(r.timeout, Ia.timeout), o === Li.JSON && (u.xhrFields = {
                    withCredentials: !0
                }), o === Li.JSONP && k(r.jsonp) && (u.jsonp = r.jsonp), k(r.method) && (u.method = r.method), B(r.params) && (u.data = r.params), u.timeout = i, u.dataType = o, u.url = r.url, t.log(Ti, 'params:', r), e.getAjax(u).then(function (e, n) {
                    return t.log(Ti, n, r.url),
                        e
                }, function (e, n, r) {
                    return k(r) ? (t.error(Ti, n + ':', r), Le(n, r)) : 0 === e.status ? (t.log(Ti, Qo + ':', 'cancelled'), Le(Qo, 'cancelled')) : {
                        jqXHR: e,
                        textStatus: n
                    }
                })))
            }
        }

        function Ot(e, t, n) {
            function r(r) {
                var o = {
                    url: t.buildUrl(r.params),
                    timeout: r.timeout
                }
                return e.isCorsSupported() || (o.type = Li.JSONP, o.jsonp = _o),
                    n(o)
            }

            return {
                fetch: r
            }
        }

        function wt(e, t) {
            function n(t, n) {
                return O(t, function (e, t) {
                    return n.params[t] = e
                }),
                    e.fetch(n)
            }

            function r(t) {
                return e.fetch(t)
            }

            function o(e, o) {
                var i,
                    u
                return e ? ye(je(Ui)) : (i = o.params[Bo], u = t.getParameters(i), u.then(function (e) {
                    return n(e, o)
                }, function () {
                    return r(o)
                }))
            }

            function i(e) {
                return t.getOptOut().then(function (t) {
                    return o(t, e)
                })
            }

            return {
                fetch: i
            }
        }

        function Rt(e, t, n) {
            return {
                fetch: function (r) {
                    var o = Pe(r.timeout, Ia.timeout),
                        i = Fe(r.error),
                        u = B(r.params) ? r.params : {}
                    return u[Uo] = t.generateId(),
                        n.log(Wi, 'request params:', u),
                        e.fetch({
                            params: u,
                            timeout: o
                        }).then(function (e) {
                            return n.log(Wi, Jo + ':', e),
                                e
                        }, i)
                }
            }
        }

        function Dt(e) {
            return {
                eventType: 'click',
                tagName: 'a',
                valid: function (t) {
                    return !U(t) || P(t.href) ? _e(Vi) : B(e) && B(e.location) ? Me() : _e($i)
                },
                getAction: function (t) {
                    return function () {
                        e.location.href = t.href
                    }
                }
            }
        }

        function It() {
            return {
                eventType: 'submit',
                tagName: 'form',
                valid: function () {
                    return Me()
                },
                getAction: function (e) {
                    return function (t) {
                        e.submit()
                    }
                }
            }
        }

        function kt(e, t) {
            var n,
                r,
                o = k(e) && k(t)
            return o ? (n = Ji[e], j(n) ? _e(Ki.replace('{0}', e)) : (r = w(n, function (e) {
                return e === t
            }), V(r) ? _e(Yi.replace('{0}', t).replace('{1}', e)) : Me())) : _e(zi)
        }

        function Pt(e) {
            Ji[e.tagName] = [
                e.eventType
            ],
                Gi[e.tagName] = e
        }

        function Lt(e) {
            return Gi[e]
        }

        function _t(e, t) {
            return Pt(It()),
                Pt(Dt(e)),
                {
                    build: function (e, n) {
                        var r,
                            o,
                            i,
                            u
                        return W(e) ? (t.log(Xi, Qo + ': no element.'), Ko) : (r = e.tagName.toLowerCase(), o = kt(r, n), o.status === Zo ? (t.log(Xi, Qo + ': ' + o.message), Ko) : (i = Lt(r), u = i.valid(e), u.status === Zo ? (t.log(Xi, Qo + ': ' + u.message), Ko) : i.getAction(e)))
                    }
                }
        }

        function jt(e, t) {
            function n(e, n) {
                t.error(Qi, e + ':', n)
            }

            function r(e) {
                var t = re(e),
                    n = A(t.find(eu), function (e) {
                        return e
                    })
                return w(n, function (e) {
                    return k(be(e, 'src'))
                })
            }

            function o(e) {
                var t = re(e)
                return A(t.find(Zi), function (e) {
                    return e
                })
            }

            function i(e, t, n) {
                return function () {
                    var r = ge(),
                        o = pe(t).find(n)
                    return J(o, e),
                        G(o),
                        r.resolve(),
                        r.promise()
                }
            }

            function u(r) {
                return function () {
                    var o = ge(),
                        i = {
                            dataType: 'script',
                            timeout: Ia.timeout,
                            url: r
                        }
                    return t.log(Qi, 'start:', r),
                        e.getAjax(i).done(function () {
                            t.log(Qi, 'end:', r),
                                o.resolve()
                        }).fail(function (e, t, i) {
                            n(t, i),
                                o.reject(Le(t, 'Failed fetching ' + r + '.'))
                        }),
                        o.promise()
                }
            }

            function a(e, t, n) {
                var r = be(e, 'src')
                return k(r) ? u(r) : i(e, t, n)
            }

            function c(e) {
                var t = be(e, 'src'),
                    n = ge(),
                    r = new Image
                return r.onload = n.resolve,
                    r.onerror = n.reject,
                    r.src = t,
                    n.promise()
            }

            function s(e, n) {
                var i,
                    u = o(e),
                    s = r(e),
                    l = A(s, function (e) {
                        return c(e)
                    }),
                    f = -1,
                    d = A(u, function (e) {
                        return oe(e) || (f += 1),
                            a(e, n, '.' + go + '-' + f)
                    })
                return V(l) ? Ce(d) : (t.log(Qi, 'images: start'), i = Ne(l), i.done(function () {
                    se(n),
                        t.log(Qi, 'images: end')
                }), i.then(function () {
                    return Ce(d)
                }))
            }

            var l = {
                fetch: s
            }
            return l
        }

        function Mt(e, t) {
            var n = re(t)
            O(Co(n, 'script'), function (t) {
                return z(e, t)
            }),
                Ft(e, n.html())
        }

        function Ft(e, t) {
            X(e, t)
        }

        function Ht(e, t) {
            var n = re(t),
                r = n.find(iu)
            n.remove(),
                X(e, r)
        }

        function qt(e) {
            return T(e) ? y(e) ? Ht : b(e) ? Ft : void 0 : Mt
        }

        function Bt(e) {
            return function (t) {
                var n = ge()
                return e(pe(t[nu.SELECTOR]), t),
                    n.resolve(t),
                    n.promise()
            }
        }

        function Ut(e, t, n, r) {
            function o(t) {
                return function (n) {
                    var r = ge(),
                        o = t(n),
                        i = o.context,
                        u = o.content
                    return e.fetch(u, i).fail(function (e) {
                        return r.reject(e)
                    }).always(function () {
                        return r.resolve(n)
                    }),
                        r.promise()
                }
            }

            function i(e, t) {
                X(e, t[nu.CONTENT])
            }

            function u(e, t) {
                Y(e, t[nu.CONTENT])
            }

            function a(e, t) {
                return y(e) ? void X(e, t[nu.CONTENT]) : void c(e, t)
            }

            function c(e, t) {
                K(e, t[nu.CONTENT])
            }

            function s(e, t) {
                z(e, t[nu.CONTENT])
            }

            function l(e, t) {
                c(e, t),
                    e.remove()
            }

            function f(e) {
                var t = e[nu.SELECTOR],
                    n = e[nu.CONTENT],
                    r = le(n)
                return a(t, {
                    content: r
                }),
                    {
                        context: 'head' === t ? t : he(t),
                        content: n
                    }
            }

            function d(e, t) {
                var n = e[nu.SELECTOR],
                    r = e[nu.CONTENT],
                    o = le(r)
                return t(n, {
                    content: o
                }),
                    {
                        context: n,
                        content: r
                    }
            }

            function p(e) {
                return d(e, u)
            }

            function h(e) {
                return d(e, i)
            }

            function m(e) {
                var t = e[nu.SELECTOR],
                    n = e[nu.CONTENT],
                    r = e[nu.CONTENT_TYPE],
                    o = r === ou.TEXT ? te : ne,
                    i = le(n)
                return o(t, i),
                    {
                        context: t,
                        content: n
                    }
            }

            function g(e, t) {
                e.css(t[nu.CONTENT])
            }

            function v(e, t) {
                O(t.content, function (t, n) {
                    'src' === n && Te(e, 'src'),
                        e.attr(n, t)
                })
            }

            function b(e, t) {
                t[nu.PRIORITY] && F(e[0].style.setProperty) ? e.each(function (e, n) {
                    n.style.setProperty(t[nu.PROPERTY], t[nu.VALUE], t[nu.PRIORITY])
                }) : e.css(t[nu.PROPERTY], t[nu.VALUE])
            }

            function T(e) {
                e.remove()
            }

            function E(e, t) {
                n({
                    element: e,
                    clickToken: t[nu.CLICK_TRACK_ID]
                })
            }

            function x(e, t) {
                var n = t[nu.FROM],
                    r = t[nu.TO],
                    o = e.children(),
                    i = o.eq(n),
                    u = o.eq(r)
                return i.exists() && u.exists() ? void (r > n ? u.after(i) : u.before(i)) : !1
            }

            function C(e, n) {
                t.redirect(n[nu.URL])
            }

            return {
                getStrategyByAction: function (e) {
                    switch (e) {
                        case tu.APPEND_CONTENT:
                            return o(h)
                        case tu.CUSTOM_CODE:
                            return o(f)
                        case tu.INSERT_AFTER:
                            return Bt(s)
                        case tu.INSERT_BEFORE:
                            return Bt(c)
                        case tu.MOVE:
                            return Bt(g)
                        case tu.SET_CONTENT:
                            return o(m)
                        case tu.SET_ATTRIBUTE:
                            return Bt(v)
                        case tu.SET_STYLE:
                            return Bt(b)
                        case tu.PREPEND_CONTENT:
                            return o(p)
                        case tu.RESIZE:
                            return Bt(g)
                        case tu.REMOVE:
                            return Bt(T)
                        case tu.REARRANGE:
                            return Bt(x)
                        case tu.REDIRECT:
                            return Bt(C)
                        case tu.REPLACE_CONTENT:
                            return Bt(l)
                        case tu.TRACK_CLICK:
                            return Bt(E)
                        default:
                            return r.error('Unknown action:', e),
                                function () {
                                }
                    }
                }
            }
        }

        function Wt(e, t) {
            return {
                success: function () {
                    return Ht(e, t)
                },
                error: Ko
            }
        }

        function Vt(e, t) {
            var n = ue(v(e)),
                r = le(t)
            return ne(e, r),
                {
                    success: Ko,
                    error: function () {
                        return ne(e, n)
                    }
                }
        }

        function $t(e, t) {
            return y(e) ? Wt(e, t) : Vt(e, t)
        }

        function Xt(e) {
            return function (t, n) {
                var r = $t(t, n)
                return e.fetch(n, t).done(r.success).fail(r.error)
            }
        }

        function Yt(e, t, n, r) {
            try {
                t(n, r)
            } catch (o) {
                e.error('plugin execution failed', o)
            }
        }

        function zt(e) {
            return function (t, n) {
                if (!M(n)) {
                    return ve()
                }
                var r = qt(t)
                return O(n, function (n) {
                    return Yt(e, r, t, n)
                }),
                    ve()
            }
        }

        function Kt(e) {
            return {
                build: function (t) {
                    var n = {}
                    return k(t.name) ? (n[Bo] = t.name + uo, n[jo] = t.clickToken) : e.error(oo),
                        n
                }
            }
        }

        function Gt(e, t, n, r) {
            var o = n.currentTarget,
                i = o && o.tagName && o.tagName.toLowerCase() === au,
                u = r.build(o, uu)
            i && n.preventDefault(),
                e.fetch({
                    params: t
                }).then(u, u)
        }

        function Jt(e, t, n) {
            return function (r) {
                var o,
                    i = t.build(r)
                q(i) || (o = r.element, pe(o).on(uu, function (t) {
                    return Gt(e, i, t, n)
                }))
            }
        }

        function Qt(e, t) {
            var n = new window.CustomEvent(e, {
                detail: t
            })
            document.dispatchEvent(n)
        }

        function Zt(e, t, n) {
            Qt(fu, {
                type: fu,
                mbox: e,
                message: t,
                tracking: n
            })
        }

        function en(e, t) {
            Qt(lu, {
                type: lu,
                mbox: e,
                tracking: t
            })
        }

        function tn(e, t, n) {
            Qt(su, {
                type: su,
                mbox: e,
                message: t,
                tracking: n
            })
        }

        function nn(e, t) {
            Qt(cu, {
                type: cu,
                mbox: e,
                tracking: t
            })
        }

        function rn(e, t, n, r) {
            function o(e) {
                var t = e.element,
                    r = e.name,
                    o = e.clickToken
                T(t) || k(o) && n({
                    name: r,
                    element: t,
                    clickToken: o
                })
            }

            function i(e) {
                return function (t) {
                    return Zt(e, t.message, Se(r))
                }
            }

            function u(n) {
                var u = n.element,
                    a = n.content,
                    c = n.plugins,
                    s = n.name
                return e(u, a).then(function () {
                    return t(u, c)
                }, i(s)).done(function () {
                    o(n),
                        en(s, Se(r))
                }).always(function () {
                    return g(u)
                })
            }

            var a = {
                handle: u
            }
            return a
        }

        function on(e) {
            return k(e.clickToken)
        }

        function un(e, t) {
            function n(e) {
                var t = void 0
                return M(e) && (t = w(e, function (e) {
                    return B(e) && 'default' === e.type
                }) [0]),
                    t
            }

            function r(r) {
                var o = r.elements,
                    i = n(r.offers)
                return V(o) ? ve(ti) : B(i) ? (e(o[0], i.plugins), on(i) && !function () {
                    var e = r.name,
                        n = i.clickToken
                    O(o, function (r) {
                        return t({
                            name: e,
                            element: r,
                            clickToken: n
                        })
                    })
                }(), g(o), ve(ti)) : (g(o), ve(ti))
            }

            return {
                handle: r
            }
        }

        function an(e) {
            return w(e, function (e) {
                return 'html' === e.type
            }) [0]
        }

        function cn(e) {
            function t(t) {
                var n,
                    r,
                    o,
                    i,
                    u,
                    a = ge(),
                    c = t.name,
                    s = t.elements,
                    l = t.offers
                return V(s) || !M(l) ? ve(ni) : (n = an(l), B(n) ? (r = n.plugins, o = n.content, i = n.clickToken, u = A(s, function (t, n) {
                    return function () {
                        var u = {
                            name: c,
                            element: t,
                            content: o,
                            clickToken: i
                        }
                        return 0 === n && (u.plugins = r),
                            e.handle(u)
                    }
                }), Ce(u).always(function () {
                    return a.resolve(ti)
                }), a.promise()) : ve(ni))
            }

            return {
                handle: t
            }
        }

        function sn(e) {
            return w(e, function (e) {
                return 'redirect' === e.type
            }) [0]
        }

        function ln(e) {
            function t(t) {
                var n,
                    r
                return M(t.offers) ? (n = sn(t.offers), B(n) ? (r = n.content, e.trigger(To), e.redirect(r), ve(ti)) : ve(ni)) : ve(ni)
            }

            return {
                handle: t
            }
        }

        function fn() {
            function e(e) {
                if (!on(e)) {
                    return {}
                }
                var t = {}
                return t[Bo] = Ia.globalMboxName + uo,
                    t[Mo] = e.clickToken,
                    t
            }

            return {
                build: e
            }
        }

        function dn(e, t, n) {
            if (!B(e) || V(t)) {
                return !1
            }
            var r = w(t, function (t) {
                return n(e[t])
            })
            return V(r)
        }

        function pn(e, t) {
            return dn(e, t, function (e) {
                return P(e)
            })
        }

        function hn(e, t) {
            return dn(e, t, function (e) {
                return !_(e)
            })
        }

        function mn(e) {
            var t = {}
            return M(e) ? (O(e, function (e) {
                j(t[e.selector]) && (t[e.selector] = []),
                    t[e.selector].push(e)
            }), A(t, function (e, t) {
                return {
                    selector: t,
                    group: e
                }
            })) : []
        }

        function gn(e) {
            return k(e[nu.CSS_SELECTOR]) && !(e[nu.ACTION] === tu.TRACK_CLICK || e[nu.ACTION] === tu.PREPEND_CONTENT || e[nu.ACTION] === tu.APPEND_CONTENT || e[nu.ACTION] === tu.INSERT_AFTER || e[nu.ACTION] === tu.INSERT_BEFORE)
        }

        function vn(e) {
            return e[nu.ACTION] !== tu.REPLACE_CONTENT && gn(e) ? e.action === tu.SET_STYLE && 'visibility' === e[nu.PROPERTY] : !0
        }

        function yn(e) {
            return pn(e, [
                nu.SELECTOR,
                nu.ACTION
            ])
        }

        function bn(e) {
            return pn(e, [
                nu.ACTION
            ])
        }

        function Tn(e) {
            return pn(e, [
                nu.CONTENT
            ])
        }

        function En(e) {
            return pn(e, [
                nu.ASSET,
                nu.VALUE
            ])
        }

        function xn(e) {
            var t = arguments.length <= 1 || void 0 === arguments[1] ? [] : arguments[1],
                n = {}
            return t.push(nu.ACTION),
                Nn(e, n, t),
                n
        }

        function Cn(e) {
            var t = arguments.length <= 1 || void 0 === arguments[1] ? [] : arguments[1]
            return t.push(nu.SELECTOR),
            k(e[nu.CSS_SELECTOR]) && t.push(nu.CSS_SELECTOR),
                xn(e, t)
        }

        function Nn(e, t, n) {
            var r = w(n, function (t) {
                return !j(e[t])
            })
            O(r, function (n) {
                return t[n] = e[n]
            })
        }

        function Sn(e, t) {
            return {
                build: function (n) {
                    var r,
                        o,
                        i = xn(n),
                        u = n[nu.URL]
                    return L(n[nu.INCLUDE_ALL_URL_PARAMETERS]) && n[nu.INCLUDE_ALL_URL_PARAMETERS] && (r = l(e.location.search.substring(1)), u = s(u, r)),
                    L(n[nu.PASS_MBOX_SESSION]) && n[nu.PASS_MBOX_SESSION] && (o = t.getId(), u = s(u, {
                        mboxSession: o
                    })),
                        i[nu.URL] = u,
                        i
                },
                valid: function (e) {
                    return pn(e, [
                        nu.ACTION,
                        nu.URL
                    ]) && Q(e[nu.URL])
                }
            }
        }

        function An() {
            return {
                build: function (e) {
                    return Cn(e, [
                        nu.CLICK_TRACK_ID
                    ])
                },
                valid: function (e) {
                    return yn(e) && pn(e, [
                        nu.CLICK_TRACK_ID
                    ])
                }
            }
        }

        function On() {
            return {
                build: function (e) {
                    return Cn(e, [
                        nu.FROM,
                        nu.TO
                    ])
                },
                valid: function (e) {
                    return yn(e) && hn(e, [
                        nu.FROM,
                        nu.TO
                    ])
                }
            }
        }

        function wn() {
            return {
                build: function (e) {
                    return Cn(e)
                },
                valid: function (e) {
                    return yn(e)
                }
            }
        }

        function Rn() {
            return {
                build: function (e) {
                    var t = Cn(e)
                    return t[nu.CONTENT] = {
                        height: e[nu.FINAL_HEIGHT],
                        width: e[nu.FINAL_WIDTH]
                    },
                        t
                },
                valid: function (e) {
                    return yn(e) && pn(e, [
                        nu.FINAL_HEIGHT,
                        nu.FINAL_WIDTH
                    ])
                }
            }
        }

        function Dn() {
            return {
                build: function (e) {
                    var t = Cn(e),
                        n = [
                            nu.PROPERTY,
                            nu.VALUE,
                            nu.SELECTOR
                        ]
                    return O(n.concat(), function (n) {
                        return t[n] = e[n]
                    }),
                    e[nu.PRIORITY] === ru.IMPORTANT && (t[nu.PRIORITY] = e[nu.PRIORITY]),
                        t
                },
                valid: function (e) {
                    return yn(e) && pn(e, [
                        nu.PROPERTY,
                        nu.VALUE
                    ])
                }
            }
        }

        function In() {
            return {
                build: function (e) {
                    var t = Cn(e),
                        n = ou.HTML
                    return e[nu.CONTENT_TYPE] === ou.TEXT && (n = ou.TEXT),
                        t[nu.CONTENT_TYPE] = n,
                        t[nu.CONTENT] = e[nu.CONTENT],
                        t
                },
                valid: function (e) {
                    return yn(e) && Tn(e)
                }
            }
        }

        function kn() {
            return {
                build: function (e) {
                    var t,
                        n = {},
                        r = e[nu.ATTRIBUTE],
                        o = e[nu.VALUE]
                    return n[r] = o,
                        t = Cn(e),
                        t[nu.CONTENT] = n,
                        t
                },
                valid: function (e) {
                    return yn(e) && pn(e, [
                        nu.ATTRIBUTE,
                        nu.VALUE
                    ])
                }
            }
        }

        function Pn() {
            return {
                build: function (e) {
                    var t = Cn(e),
                        n = {
                            left: e[nu.FINAL_LEFT_POSITION],
                            top: e[nu.FINAL_TOP_POSITION]
                        }
                    return k(e[nu.POSITION]) && (n.position = e[nu.POSITION]),
                        t[nu.CONTENT] = n,
                        t
                },
                valid: function (e) {
                    return yn(e) && hn(e, [
                        nu.FINAL_LEFT_POSITION,
                        nu.FINAL_TOP_POSITION
                    ])
                }
            }
        }

        function Ln() {
            return {
                build: function (e) {
                    var t = xn(e)
                    return t[nu.CONTENT] = e[nu.CONTENT],
                        k(e[nu.SELECTOR]) ? t[nu.SELECTOR] = e[nu.SELECTOR] : t[nu.SELECTOR] = 'head',
                        t
                },
                valid: function (e) {
                    return bn(e) && Tn(e)
                }
            }
        }

        function _n() {
            return {
                build: function (e) {
                    return Cn(e, [
                        nu.CONTENT
                    ])
                },
                valid: function (e) {
                    return yn(e) && Tn(e)
                }
            }
        }

        function jn(e, t) {
            var n = re(t[nu.CONTENT])
            n.find(':first').attr('id', e),
                t[nu.CONTENT] = n.html(),
                t[nu.SELECTOR] = t[nu.SELECTOR].replace(pu, '')
        }

        function Mn() {
            return {
                build: function (e) {
                    var t = Cn(e, [
                            nu.CONTENT
                        ]),
                        n = e[nu.SELECTOR].match(du)
                    return M(n) && 2 === n.length ? jn(n[1], t) : En(e) && (t[nu.CONTENT] = '<img src="' + e[nu.VALUE] + '" />'),
                        t
                },
                valid: function (e) {
                    return yn(e) && (En(e) || Tn(e))
                }
            }
        }

        function Fn(e, t) {
            var n = {},
                r = Mn(),
                o = _n()
            return n[tu.APPEND_CONTENT] = o,
                n[tu.CUSTOM_CODE] = Ln(),
                n[tu.INSERT_AFTER] = r,
                n[tu.INSERT_BEFORE] = r,
                n[tu.MOVE] = Pn(),
                n[tu.SET_ATTRIBUTE] = kn(),
                n[tu.SET_CONTENT] = In(),
                n[tu.SET_STYLE] = Dn(),
                n[tu.RESIZE] = Rn(),
                n[tu.PREPEND_CONTENT] = o,
                n[tu.REMOVE] = wn(),
                n[tu.REARRANGE] = On(),
                n[tu.REPLACE_CONTENT] = o,
                n[tu.TRACK_CLICK] = An(),
                n[tu.REDIRECT] = Sn(e, t),
                n
        }

        function Hn(e) {
            function t(t) {
                var n = [],
                    r = w(t, function (e) {
                        return bn(e)
                    })
                return O(r, function (t) {
                    var r = t[nu.ACTION],
                        o = e[r]
                    o.valid(t) && n.push(o.build(t))
                }),
                    n
            }

            return {
                transform: t,
                isSupported: function (t) {
                    return B(e[t[nu.ACTION]])
                }
            }
        }

        function qn(e) {
            function t() {
                return F(e.requestAnimationFrame) ? function (t) {
                        return e.requestAnimationFrame(t)
                    }
                    : function (e) {
                        return r(e, hu)
                    }
            }

            function n(e) {
                var n = t()
                n(e)
            }

            var r = function (t, n) {
                var r = e.setTimeout(t, n)
                return {
                    dispose: function () {
                        return e.clearTimeout(r)
                    }
                }
            }
            return {
                getFutureScheduler: t,
                scheduleFuture: r,
                schedule: n
            }
        }

        function Bn(e, t, n) {
            function r(e, t, n) {
                return function () {
                    return o(e, t, n)
                }
            }

            function o(e, r, o) {
                var u = ge(),
                    a = A(r.group, function (e) {
                        return function () {
                            return i(e)
                        }
                    })
                return de(r.selector) ? (Ce(a).fail(function (o) {
                    t.log('failed applying:', JSON.stringify(r)),
                        Zt(e, o, Se(n))
                }).always(function () {
                    u.resolve(o)
                }), u.promise()) : (o.push(r), u.resolve(o), u.promise())
            }

            function i(n) {
                var r = ge(),
                    o = e.getStrategyByAction(n[nu.ACTION])
                return o(n).then(function () {
                    if (!vn(n)) {
                        var e = C(n[nu.CSS_SELECTOR])
                        G('#at-' + e)
                    }
                    t.log(mu, JSON.stringify(n)),
                        r.resolve()
                }, function (e) {
                    return r.reject(e)
                }),
                    r.promise()
            }

            return {
                createDeferred: r
            }
        }

        function Un(e, t, n, r, o) {
            function i() {
                o.log(gu),
                    r.trigger(gu)
            }

            function u() {
                o.log('trigger ' + gu + ' in ' + s + 'ms')
                var e = n.scheduleFuture(i, s)
                r.subscribeOnce(To, function () {
                    e.dispose(),
                        i()
                })
            }

            function a(i, u) {
                var c,
                    s
                return l && !V(u) && (c = function () {
                    var t = [],
                        r = A(u, function (n) {
                            return e.createDeferred(i, n, t)
                        })
                    return o.log('Retrying actions:', u),
                        Ce(r).always(function (e) {
                            return n.schedule(function () {
                                return a(i, e)
                            })
                        }),
                        {
                            v: void 0
                        }
                }(), 'object' == typeof c) ? c.v : (V(u) ? (o.log('All selectors have been found'), en(i, Se(t))) : (s = A(u, function (e) {
                    return lo + ' for ' + e.selector
                }), o.log('Failed: ', s), Zt(i, s, Se(t))), void r.showElements())
            }

            function c(e, t) {
                l = !0,
                    a(e, t),
                    u()
            }

            var s = Ia.selectorsPollingTimeout,
                l = void 0
            return r.subscribeOnce(gu, function () {
                return l = !1
            }),
                {
                    execute: c
                }
        }

        function Wn(e) {
            return w(e, function (e) {
                return 'actions' === e.type
            })
        }

        function Vn(e) {
            var t = []
            return O(e, function (e) {
                return t.push.apply(t, e.content)
            }),
                t
        }

        function $n(e) {
            var t = []
            return O(e, function (e) {
                V(e.plugins) || t.push.apply(t, e.plugins)
            }),
                t
        }

        function Xn(e, t, n, r, o, i, u, a) {
            function c(e, t) {
                return w(e, function (e) {
                    return t(e)
                })
            }

            function s(e) {
                return c(e, function (e) {
                    return !t.isSupported(e)
                })
            }

            function l(e) {
                return c(e, t.isSupported)
            }

            function f(e) {
                var n = l(e)
                return t.transform(n)
            }

            function d(e) {
                var t = s(e)
                O(t, function (e) {
                    return i.log('unsupported offer', e)
                })
            }

            function p(e) {
                var t,
                    r,
                    i = w(e, function (e) {
                        return e[nu.ACTION] === tu.REDIRECT
                    }),
                    u = f(i)
                return B(u[0]) ? (t = u[0], r = n.getStrategyByAction(tu.REDIRECT), o.trigger(To), r(t), !0) : !1
            }

            function h(e) {
                var t = []
                O(e, function (e) {
                    gn(e) && t.push(e[nu.CSS_SELECTOR])
                }),
                    i.log('pre-hide', xe(t)),
                    o.hideElements(xe(t))
            }

            function m(e, t) {
                var n = e.name
                V(t) ? (i.log('There are no failed actions'), en(n, Se(u)), o.showElements()) : (i.log('Start polling for failed actions'), a.execute(n, t))
            }

            function g(t) {
                var n,
                    o,
                    i,
                    u,
                    a,
                    c,
                    s,
                    l = t.name,
                    g = V(t.elements) ? pe('head') [0] : t.elements[0],
                    v = Wn(t.offers)
                return V(v) ? ve(ni) : (n = Vn(v), d(n), p(n) ? ve(ti) : (o = f(n), h(o), i = [], u = mn(o), a = A(u, function (e) {
                    return r.createDeferred(l, e, i)
                }), c = ge(), s = $n(v), Ce(a).always(function (n) {
                    m(t, n),
                        e(g, s),
                        c.resolve(ni)
                }), c.promise()))
            }

            return {
                handle: g
            }
        }

        function Yn(e) {
            return M(e.plugins)
        }

        function zn(e) {
            return M(e.actions) && !V(e.actions)
        }

        function Kn(e) {
            return k(e.redirect)
        }

        function Gn(e) {
            return j(e.actions) && j(e.dynamic) && j(e.html) && j(e.redirect)
        }

        function Jn(e) {
            return k(e.html)
        }

        function Qn(e) {
            return B(e.dynamic) && k(e.dynamic.url)
        }

        function Zn(e) {
            return {
                type: 'redirect',
                content: e.redirect
            }
        }

        function er(e) {
            var t = {
                type: 'html',
                content: e.html
            }
            return or(t, e),
                ir(t, e),
                t
        }

        function tr(e) {
            var t = {
                type: 'dynamic',
                content: e.dynamic
            }
            return or(t, e),
                ir(t, e),
                t
        }

        function nr(e) {
            var t = {
                type: 'default'
            }
            return or(t, e),
                ir(t, e),
                t
        }

        function rr(e) {
            var t = {
                type: 'actions',
                content: e.actions
            }
            return ir(t, e),
                t
        }

        function or(e, t) {
            on(t) && (e.clickToken = t.clickToken)
        }

        function ir(e, t) {
            Yn(t) && (e.plugins = t.plugins)
        }

        function ur(e, t, n) {
            var r = w(e, function (e) {
                return t(e)
            })
            return A(r, function (e) {
                return n(e)
            })
        }

        function ar(e) {
            if (!zn(e)) {
                return !1
            }
            var t = cr(e.actions)
            return !V(t)
        }

        function cr(e) {
            return w(e, function (e) {
                return e[nu.ACTION] === tu.REDIRECT
            })
        }

        function sr(e) {
            var t,
                n = ur(e, Kn, Zn)
            return V(n) ? (t = ur(e, ar, lr), V(t) ? [] : t) : n
        }

        function lr(e) {
            var t = 'actions',
                n = cr(e.actions).slice(0, 1)
            return {
                type: t,
                content: n
            }
        }

        function fr(e) {
            function t(t, n) {
                var r = ur(t, Jn, er),
                    o = ur(t, Qn, tr),
                    i = ur(t, zn, rr),
                    u = ur(t, Gn, nr),
                    a = A(o, function (t) {
                        var o = {
                                offer: t,
                                params: n
                            },
                            i = t.clickToken,
                            a = t.plugins,
                            c = {
                                clickToken: i,
                                plugins: a
                            }
                        return function () {
                            var t = ge()
                            return e(o).then(function (e) {
                                c.html = e,
                                    r.push(er(c)),
                                    t.resolve()
                            }, function () {
                                u.push(nr(c)),
                                    t.resolve()
                            }),
                                t.promise()
                        }
                    })
                return Ce(a).then(function () {
                    return [].concat(r, u, i)
                })
            }

            function n(e, n) {
                var r,
                    o = e.offers
                return M(o) ? (r = sr(o), V(r) ? t(o, n) : ve(r)) : ve([])
            }

            var r = {
                extract: n
            }
            return r
        }

        function dr(e, t) {
            return function (n) {
                return n === !1 ? ye() : e.handle(t)
            }
        }

        function pr(e, t) {
            return {
                process: function (n, r, o, i) {
                    var u = {
                        name: n,
                        params: r,
                        elements: o
                    }
                    return e.extract(i, r).then(function (e) {
                        u.offers = e
                        var n = A(t, function (e) {
                            return dr(e, u)
                        })
                        return Ce(n)
                    })
                }
            }
        }

        function hr(e, t) {
            j(e[bu]) ? e[bu] = [
                t
            ] : M(e[bu]) && e[bu].push(t)
        }

        function mr(e) {
            return {
                handle: function (t) {
                    var n = t.content
                    return B(n) && hr(e, n),
                        Me()
                }
            }
        }

        function gr(e, t) {
            var n = Ia.cookieDomain
            return {
                handle: function (r) {
                    var o,
                        i,
                        u,
                        a = r.content
                    return B(a) ? (o = a.duration, _(o) || (o = Tu), i = a.message, P(i) && (i = Eu), Ue(e, di, i, {
                        expires: 1000 * o,
                        domain: n
                    }), Oe(), u = r.name, k(u) && tn(u, i, Se(t)), _e(i)) : Me()
                }
            }
        }

        function vr(e) {
            return {
                handle: function (t) {
                    var n,
                        r = t.content
                    return P(r) ? Me() : (n = t.name, k(n) && tn(n, r, Se(e)), _e(r))
                }
            }
        }

        function yr(e) {
            return {
                handle: function (t) {
                    var n = t.content
                    return k(n) && e.setId(n),
                        Me()
                }
            }
        }

        function br(e) {
            return !H(Ve(e, fi))
        }

        function Tr(e) {
            var t = e.split('.')
            return 2 !== t.length || P(t[1]) ? null : (t = t[1].split('_'), 2 !== t.length || P(t[0]) ? null : t[0])
        }

        function Er(e) {
            var t = Ia.clientCode,
                n = Ia.serverDomain
            return n.replace(t, so + e)
        }

        function xr(e, t) {
            var n,
                r,
                o
            Ia.overrideMboxEdgeServer && (br(e) || (n = Tr(t), P(n) || (r = Ia.overrideMboxEdgeServerTimeout, o = Er(n), Ue(e, fi, o, {
                expires: r
            }))))
        }

        function Cr(e, t) {
            return {
                handle: function (n) {
                    var r = n.content
                    return k(r) && (t.setId(r), xr(e, r)),
                        Me()
                }
            }
        }

        function Nr() {
            function e(e, n) {
                return t = t.then(e, n || e)
            }

            var t = ve()
            return {
                addTask: e
            }
        }

        function Sr(e, t) {
            function n(t, n, r) {
                var o = e[n],
                    i = r[n]
                return B(o) ? o.handle({
                    name: t,
                    content: i
                }) : Me()
            }

            function r(e, n) {
                var r,
                    o
                if (e === Ia.globalMboxName && Ia.globalMboxAutoCreate !== !1) {
                    if (j(n.offers)) {
                        return void t.triggerShowBody()
                    }
                    r = w(n.offers, function (e) {
                        return zn(e)
                    }),
                        o = w(n.offers, function (e) {
                            return Kn(e)
                        }),
                    V(r) && V(o) && t.triggerShowBody()
                }
            }

            return {
                process: function (e, t) {
                    var o,
                        i
                    return r(e, t),
                        o = A(t, function (r, o) {
                            return n(e, o, t)
                        }),
                        i = w(o, function (e) {
                            return Zo === e.status
                        }),
                        V(i) ? Me() : i[0]
                }
            }
        }

        function Ar(e) {
            return !(U(e.element) && k(e.selector))
        }

        function Or(e, t, n, r) {
            return function (o) {
                if (o === ti) {
                    return ye()
                }
                var i = {
                    name: t,
                    elements: n,
                    offers: r
                }
                return e.handle(i)
            }
        }

        function wr(e, t) {
            function n(n) {
                var r,
                    o,
                    i,
                    u,
                    a,
                    c = Nt(n, Su)
                return c.status === Zo ? (t.error(xu, c.message), ye()) : (r = pe(n.element || n.selector || 'head'), o = w(r, U), i = n.offer, u = n.mbox, a = A(e, function (e) {
                    return Or(e, u, o, i)
                }), Ce(a))
            }

            return n
        }

        function Rr(e) {
            var t = {}
            return O(e, function (e, n) {
                return t[n] = e
            }),
                t
        }

        function Dr(e, t, n, r, o, i) {
            function u(t, o, u) {
                nn(t, Se(e)),
                    i.log(Ou, Jo + ':', o)
                var a = n.process(t, o)
                return Zo === a.status ? ye(a) : r.extract(o, u)
            }

            function a(t, n) {
                var r = n.status,
                    o = n.message
                return r === ei && i.log(Ou, 'request disabled:', r, o),
                    tn(t, o, Se(e)),
                    n
            }

            function c() {
                return i.log(Ou, Qo + ':', io),
                    ye(Le(Qo, io))
            }

            function s(e, n) {
                var r = {}
                return r[Bo] = n,
                    t.fetch(e).then(function (e) {
                        return u(n, e, r)
                    }, function (e) {
                        return a(n, e)
                    })
            }

            return function (t) {
                var n,
                    r,
                    u,
                    a = Nt(t, Au),
                    l = a.status,
                    f = a.message
                return l === Zo ? (i.error(Ou, f), ye(a)) : e.isEnabled() ? (n = t.mbox, r = Pe(t.timeout, Ia.timeout), u = B(t.params) ? Rr(t.params) : {}, u[Bo] = n, u[Ho] = e.requests.incrementAndGet(), i.log(Ou, 'params:', u), s({
                    params: o.mergeParameters(o.getTargetPageParameters(n), u),
                    timeout: r
                }, n)) : c(t)
            }
        }

        function Ir(e, t, n) {
            t.log(Ru, Qo + ':', io),
            F(n.error) && e.delayCallback(n.error, Qo, io)
        }

        function kr(e, t, n, r) {
            return r ? e.build(t, n) : Ko
        }

        function Pr(e, t, n, r) {
            var o = t.mbox,
                i = Fe(t.error),
                u = Fe(t.success),
                a = B(t.params) ? t.params : {}
            return a[Bo] = o,
                e.fetch({
                    timeout: r,
                    params: a
                }).then(function () {
                    u(),
                        n()
                }, function () {
                    i(),
                        n()
                })
        }

        function Lr(e, t) {
            B(e) && F(e.preventDefault) && t && e.preventDefault()
        }

        function _r(e, t, n, r) {
            var o = n.type,
                i = n.selector,
                u = !!n.preventDefault,
                a = pe(i)
            O(a, function (i) {
                var a = kr(t, i, o, u)
                pe(i).on(o, function (t) {
                    Lr(t, u),
                        Pr(e, n, a, r)
                })
            })
        }

        function jr(e, t, n, r, o) {
            var i = !!n.preventDefault,
                u = r.currentTarget,
                a = r.type,
                c = kr(t, u, a, i)
            Lr(r, i),
                Pr(e, n, c, o)
        }

        function Mr(e, t, n, r, o, i) {
            return function (u) {
                var a,
                    c,
                    s,
                    l,
                    f,
                    d,
                    p = Nt(u, wu)
                return p.status === Zo ? void i.error(Ru, p.message) : e.isEnabled() ? (a = u.type, c = k(a), s = u.selector, l = k(s), f = Pe(u.timeout, Ia.timeout), c && l ? void _r(n, r, u, f) : (d = t.event, B(d) ? void jr(n, r, u, d, f) : void Pr(n, u, Ko, f))) : void Ir(o, i, u)
            }
        }

        function Fr(e, t, n) {
            return e[Bo] = t,
                e[Ho] = n,
                e
        }

        function Hr(e, t, n, r, o, i, u, a) {
            function c(t, n, i, a) {
                nn(n, Se(e))
                var c = r.process(n, t)
                return c.status === Jo ? o.process(n, i, a, t).always(function () {
                    return u.log(Iu, 'process success:', t, n)
                }) : (u.error(Iu, 'response process error:', c.message, n), g(a), ve())
            }

            function s(t, n, r) {
                var o = t.status,
                    i = t.message
                o === ei ? u.log(Iu, 'request disabled:', o, i) : u.error(Iu, 'request error:', o, i),
                    tn(n, i, Se(e)),
                    g(r)
            }

            function l(e, t, r, o) {
                u.log(Iu, o, t)
                var i = w(r, U)
                return n.fetch({
                    params: t,
                    timeout: Ia.timeout
                }).then(function (n) {
                    return c(n, e, t, i)
                }, function (t) {
                    return s(t, e, i)
                })
            }

            function f(n, r) {
                var o,
                    a,
                    c,
                    s,
                    l,
                    f
                if (e.isEnabled() || e.isMboxEdit()) {
                    if (P(n)) {
                        return void u.error(Iu, ku, r)
                    }
                    for (o = pe('#' + n), de(o) ? o.addClass(eo + r) : (o = pe('head'), u.log(Iu, lo + ':', 'mboxDefine("' + n + '", "' + r + '")')), a = arguments.length, c = Array(a > 2 ? a - 2 : 0), s = 2; a > s; s++) {
                        c[s - 2] = arguments[s]
                    }
                    if (l = i.getParametersFromArray(c), f = Nt({
                        mbox: r
                    }, Du), f.status === Zo) {
                        return void u.error(Iu, f.message)
                    }
                    Fr(l, r, e.requests.incrementAndGet()),
                        t.add(r, {
                            name: r,
                            params: l,
                            node: o
                        }),
                        u.log(Iu, 'create mbox, params:', l)
                }
            }

            function d(n) {
                var r,
                    o,
                    c,
                    s,
                    f
                for (r = arguments.length, o = Array(r > 1 ? r - 1 : 0), c = 1; r > c; c++) {
                    o[c - 1] = arguments[c]
                }
                if (e.isEnabled()) {
                    if (s = Nt({
                        mbox: n
                    }, Du), s.status === Zo) {
                        return void u.error(Iu, s.message)
                    }
                    f = t.findByKey(n),
                        O(f, function (e) {
                            var t = i.mergeParameters(i.getTargetPageParameters(n), i.getParametersFromArray(o))
                            t = i.mergeParameters(e.params, t),
                                t[Uo] = i.generateId(),
                                a.addTask(function () {
                                    return l(n, t, e.node, 'execute mbox request, params:')
                                })
                        })
                }
            }

            function p(n) {
                var r,
                    o,
                    c,
                    s,
                    f,
                    d
                if (e.isEnabled() || e.isMboxEdit()) {
                    if (r = Nt({
                        mbox: n
                    }, Du), r.status === Zo) {
                        return void u.error(Iu, r.message)
                    }
                    for (o = i.findLastMboxNode(n), de(o) ? o.addClass(eo + n) : (o = pe('head'), u.log(Iu, lo + ':', 'mboxCreate("' + n + '")')), c = arguments.length, s = Array(c > 1 ? c - 1 : 0), f = 1; c > f; f++) {
                        s[f - 1] = arguments[f]
                    }
                    d = i.mergeParameters(i.getTargetPageParameters(n), i.getParametersFromArray(s)),
                        Fr(d, n, e.requests.incrementAndGet()),
                        t.add(n, {
                            name: n,
                            params: d,
                            node: o
                        }),
                    e.isEnabled() && a.addTask(function () {
                        return l(n, d, o, 'create mbox and execute mbox request, params:')
                    })
                }
            }

            return {
                createMbox: f,
                fetchAndDisplayMbox: d,
                createFetchAndDisplayMbox: p
            }
        }

        function qr(e) {
            e.document.addEventListener('click', function (t) {
                F(e._AT.clickHandlerForExperienceEditor) && e._AT.clickHandlerForExperienceEditor(t)
            }, !0)
        }

        function Br(e, t, n, r) {
            e.isMboxEdit() && (t._AT = t._AT || {}, t._AT.querySelectorAll = pe, n({
                url: Go,
                type: Li.SCRIPT
            }).then(function () {
                return qr(t)
            }, function () {
                return r.error(Pu)
            }))
        }

        function Ur(e, t, n, r, o) {
            var i,
                u
            Ia.globalMboxAutoCreate === !0 && (P(Ia.globalMboxName) || e.isEnabled() && (o.hideBody(), i = Ia.globalMboxName, u = function () {
                return n({
                    mbox: i,
                    params: o.getTargetPageParameters()
                }).then(function (e) {
                    return r({
                        mbox: i,
                        offer: e
                    })
                }, fe)
            }, t.addTask(u)))
        }

        function Wr(e) {
            e.event = {
                CONTENT_RENDERING_FAILED: fu,
                CONTENT_RENDERING_SUCCEEDED: lu,
                REQUEST_SUCCEEDED: cu,
                REQUEST_FAILED: su
            }
        }

        function Vr(e) {
            if (!B(e)) {
                throw Error('Please provide options')
            }
        }

        function $r(e) {
            if (P(e)) {
                throw Error('Please provide extension name')
            }
            var t = e.split('.')
            O(t, function (e) {
                if (!_u.test(e)) {
                    throw Error('Name space should contain only letters')
                }
            })
        }

        function Xr(e, t) {
            if (!M(e)) {
                throw Error('Please provide an array of dependencies')
            }
            if (0 === e.length) {
                throw Error('Please provide an array of dependencies')
            }
            O(e, function (e) {
                if (j(t[e])) {
                    throw Error(e + ' module does not exist')
                }
            })
        }

        function Yr(e) {
            if (!F(e)) {
                throw Error('Please provide extension registration function')
            }
        }

        function zr(e, t, n) {
            var r,
                o,
                i = t.split('.')
            for (r = 0; r < i.length - 1; r++) {
                o = i[r],
                    e[o] = e[o] || {},
                    e = e[o]
            }
            e[i[i.length - 1]] = n
        }

        function Kr(e, t) {
            var n = {
                logger: t,
                settings: {
                    clientCode: Ia.clientCode,
                    serverDomain: Ia.serverDomain,
                    timeout: Ia.timeout,
                    globalMboxAutoCreate: Ia.globalMboxAutoCreate,
                    globalMboxName: Ia.globalMboxName
                }
            }
            return function (t) {
                var r,
                    o,
                    i,
                    u
                Vr(t),
                    r = t.name,
                    $r(t.name),
                    o = t.modules,
                    Xr(o, n),
                    i = t.register,
                    Yr(i),
                    e[Lu] = e[Lu] || {},
                    u = [],
                    O(o, function (e) {
                        return u.push(n[e])
                    }),
                    zr(e[Lu], r, i.apply(null, u))
            }
        }

        function Gr(e) {
            var t = ge()
            try {
                e(),
                    t.resolve()
            } catch (n) {
                t.reject(n)
            }
            return t.promise()
        }

        function Jr(e) {
            function t(t, r) {
                Gr(function () {
                    return r.success(t)
                }).fail(function (t) {
                    e.error(Mu, Fu, t),
                        n(_e(t.message), r)
                })
            }

            function n(t, n) {
                var r = t.status,
                    o = t.message
                Gr(function () {
                    return n.error(r, o)
                }).fail(function (t) {
                    e.error(Mu, Hu),
                        e.error(t)
                })
            }

            function r(r, o) {
                var i,
                    u = Nt(o, ju)
                return u.status === Zo ? (e.error(Mu, u.message), function () {
                    return ve()
                }) : (i = me(o, [
                    'success',
                    'error'
                ]), function (e) {
                    return r(e).then(function (e) {
                        return t(e, i)
                    }, function (e) {
                        return n(e, i)
                    })
                })
            }

            return r
        }

        function Qr(e, t, n, r) {
            var o = Jr(r)
            e.getOffer = function (e) {
                var r = o(t, e)
                n.addTask(function () {
                    return r(me(e, qu))
                })
            },
                e.registerExtension = Kr(e, r)
        }

        var Zr,
            eo,
            to,
            no,
            ro,
            oo,
            io,
            uo,
            ao,
            co,
            so,
            lo,
            fo,
            po,
            ho,
            mo,
            go,
            vo,
            yo,
            bo,
            To,
            Eo,
            xo,
            Co,
            No,
            So,
            Ao,
            Oo,
            wo,
            Ro,
            Do,
            Io,
            ko,
            Po,
            Lo,
            _o,
            jo,
            Mo,
            Fo,
            Ho,
            qo,
            Bo,
            Uo,
            Wo,
            Vo,
            $o,
            Xo,
            Yo,
            zo,
            Ko,
            Go,
            Jo,
            Qo,
            Zo,
            ei,
            ti,
            ni,
            ri,
            oi,
            ii,
            ui,
            ai,
            ci,
            si,
            li,
            fi,
            di,
            pi,
            hi,
            mi,
            gi,
            vi,
            yi,
            bi,
            Ti,
            Ei,
            xi,
            Ci,
            Ni,
            Si,
            Ai,
            Oi,
            wi,
            Ri,
            Di,
            Ii,
            ki,
            Pi,
            Li,
            _i,
            ji,
            Mi,
            Fi,
            Hi,
            qi,
            Bi,
            Ui,
            Wi,
            Vi,
            $i,
            Xi,
            Yi,
            zi,
            Ki,
            Gi,
            Ji,
            Qi,
            Zi,
            eu,
            tu,
            nu,
            ru,
            ou,
            iu,
            uu,
            au,
            cu,
            su,
            lu,
            fu,
            du,
            pu,
            hu,
            mu,
            gu,
            vu,
            yu,
            bu,
            Tu,
            Eu,
            xu,
            Cu,
            Nu,
            Su,
            Au,
            Ou,
            wu,
            Ru,
            Du,
            Iu,
            ku,
            Pu,
            Lu,
            _u,
            ju,
            Mu,
            Fu,
            Hu,
            qu,
            Bu,
            Uu,
            Wu,
            Vu,
            $u,
            Xu,
            Yu,
            zu,
            Ku,
            Gu,
            Ju,
            Qu,
            Zu,
            ea,
            ta,
            na,
            ra,
            oa,
            ia,
            ua,
            aa,
            ca,
            sa,
            la,
            fa,
            da,
            pa,
            ha,
            ma,
            ga,
            va,
            ya,
            ba,
            Ta,
            Ea,
            xa,
            Ca,
            Na,
            Sa,
            Aa,
            Oa,
            wa,
            Ra,
            Da,
            Ia = {},
            ka = 'at-element-marker',
            Pa = function (e, t) {
                return t(e)
            }('undefined' != typeof window ? window : void 0, function (e) {
                function t(e) {
                    var t = !!e && 'length' in e && e.length,
                        n = bt.type(e)
                    return 'function' === n || bt.isWindow(e) ? !1 : 'array' === n || 0 === t || 'number' == typeof t && t > 0 && t - 1 in e
                }

                function n(e, t, n) {
                    if (bt.isFunction(t)) {
                        return bt.grep(e, function (e, r) {
                            return !!t.call(e, r, e) !== n
                        })
                    }
                    if (t.nodeType) {
                        return bt.grep(e, function (e) {
                            return e === t !== n
                        })
                    }
                    if ('string' == typeof t) {
                        if (U.test(t)) {
                            return bt.filter(t, e, n)
                        }
                        t = bt.filter(t, e)
                    }
                    return bt.grep(e, function (e) {
                        return pt.call(t, e) > -1 !== n
                    })
                }

                function r() {
                    this.expando = bt.expando + r.uid++
                }

                function o() {
                    return !0
                }

                function i() {
                    return !1
                }

                function u() {
                    try {
                        return st.activeElement
                    } catch (e) {
                    }
                }

                function a(e, t, n, r, o, u) {
                    var c,
                        s
                    if ('object' == typeof t) {
                        'string' != typeof n && (r = r || n, n = void 0)
                        for (s in t) {
                            a(e, s, n, r, t[s], u)
                        }
                        return e
                    }
                    if (null == r && null == o ? (o = n, r = n = void 0) : null == o && ('string' == typeof n ? (o = r, r = void 0) : (o = r, r = n, n = void 0)), o === !1) {
                        o = i
                    } else {
                        if (!o) {
                            return e
                        }
                    }
                    return 1 === u && (c = o, o = function (e) {
                        return bt().off(e),
                            c.apply(this, arguments)
                    }, o.guid = c.guid || (c.guid = bt.guid++)),
                        e.each(function () {
                            bt.event.add(this, t, o, r, n)
                        })
                }

                function c(e) {
                    var t = {}
                    return bt.each(e.match(X) || [], function (e, n) {
                        t[n] = !0
                    }),
                        t
                }

                function s(e) {
                    return function (t, n) {
                        'string' != typeof t && (n = t, t = '*')
                        var r,
                            o = 0,
                            i = t.toLowerCase().match(X) || []
                        if (bt.isFunction(n)) {
                            for (; r = i[o++];) {
                                '+' === r[0] ? (r = r.slice(1) || '*', (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
                            }
                        }
                    }
                }

                function l(e, t, n, r) {
                    function o(a) {
                        var c
                        return i[a] = !0,
                            bt.each(e[a] || [], function (e, a) {
                                var s = a(t, n, r)
                                return 'string' != typeof s || u || i[s] ? u ? !(c = s) : void 0 : (t.dataTypes.unshift(s), o(s), !1)
                            }),
                            c
                    }

                    var i = {},
                        u = e === se
                    return o(t.dataTypes[0]) || !i['*'] && o('*')
                }

                function f(e, t) {
                    var n,
                        r,
                        o = bt.ajaxSettings.flatOptions || {}
                    for (n in t) {
                        void 0 !== t[n] && ((o[n] ? e : r || (r = {})) [n] = t[n])
                    }
                    return r && bt.extend(!0, e, r),
                        e
                }

                function d(e, t, n) {
                    for (var r, o, i, u, a = e.contents, c = e.dataTypes; '*' === c[0];) {
                        c.shift(),
                        void 0 === r && (r = e.mimeType || t.getResponseHeader('Content-Type'))
                    }
                    if (r) {
                        for (o in a) {
                            if (a[o] && a[o].test(r)) {
                                c.unshift(o)
                                break
                            }
                        }
                    }
                    if (c[0] in n) {
                        i = c[0]
                    } else {
                        for (o in n) {
                            if (!c[0] || e.converters[o + ' ' + c[0]]) {
                                i = o
                                break
                            }
                            u || (u = o)
                        }
                        i = i || u
                    }
                    return i ? (i !== c[0] && c.unshift(i), n[i]) : void 0
                }

                function p(e, t, n, r) {
                    var o,
                        i,
                        u,
                        a,
                        c,
                        s = {},
                        l = e.dataTypes.slice()
                    if (l[1]) {
                        for (u in e.converters) {
                            s[u.toLowerCase()] = e.converters[u]
                        }
                    }
                    for (i = l.shift(); i;) {
                        if (e.responseFields[i] && (n[e.responseFields[i]] = t), !c && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), c = i, i = l.shift()) {
                            if ('*' === i) {
                                i = c
                            } else {
                                if ('*' !== c && c !== i) {
                                    if (u = s[c + ' ' + i] || s['* ' + i], !u) {
                                        for (o in s) {
                                            if (a = o.split(' '), a[1] === i && (u = s[c + ' ' + a[0]] || s['* ' + a[0]])) {
                                                u === !0 ? u = s[o] : s[o] !== !0 && (i = a[0], l.unshift(a[1]))
                                                break
                                            }
                                        }
                                    }
                                    if (u !== !0) {
                                        if (u && e['throws']) {
                                            t = u(t)
                                        } else {
                                            try {
                                                t = u(t)
                                            } catch (f) {
                                                return {
                                                    state: 'parsererror',
                                                    error: u ? f : 'No conversion from ' + c + ' to ' + i
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    return {
                        state: 'success',
                        data: t
                    }
                }

                function h(e, t) {
                    var n = void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t || '*') : void 0 !== e.querySelectorAll ? e.querySelectorAll(t || '*') : []
                    return void 0 === t || t && bt.nodeName(e, t) ? bt.merge([e], n) : n
                }

                function m(e, t) {
                    for (var n = 0, r = e.length; r > n; n++) {
                        J.set(e[n], 'globalEval', !t || J.get(t[n], 'globalEval'))
                    }
                }

                function g(e, t, n, r, o) {
                    for (var i, u, a, c, s, l, f = t.createDocumentFragment(), d = [], p = 0, g = e.length; g > p; p++) {
                        if (i = e[p], i || 0 === i) {
                            if ('object' === bt.type(i)) {
                                bt.merge(d, i.nodeType ? [
                                    i
                                ] : i)
                            } else {
                                if (Ee.test(i)) {
                                    for (u = u || f.appendChild(t.createElement('div')), a = (ye.exec(i) || [
                                        '',
                                        ''
                                    ]) [1].toLowerCase(), c = Te[a] || Te._default, u.innerHTML = c[1] + bt.htmlPrefilter(i) + c[2], l = c[0]; l--;) {
                                        u = u.lastChild
                                    }
                                    bt.merge(d, u.childNodes),
                                        u = f.firstChild,
                                        u.textContent = ''
                                } else {
                                    d.push(t.createTextNode(i))
                                }
                            }
                        }
                    }
                    for (f.textContent = '', p = 0; i = d[p++];) {
                        if (r && bt.inArray(i, r) > -1) {
                            o && o.push(i)
                        } else {
                            if (s = bt.contains(i.ownerDocument, i), u = h(f.appendChild(i), 'script'), s && m(u), n) {
                                for (l = 0; i = u[l++];) {
                                    be.test(i.type || '') && n.push(i)
                                }
                            }
                        }
                    }
                    return f
                }

                function v(e, t) {
                    for (; (e = e[t]) && 1 !== e.nodeType;) {
                    }
                    return e
                }

                function y(e, t) {
                    return bt.nodeName(e, 'table') && bt.nodeName(11 !== t.nodeType ? t : t.firstChild, 'tr') ? e.getElementsByTagName('tbody') [0] || e.appendChild(e.ownerDocument.createElement('tbody')) : e
                }

                function b(e) {
                    return e.type = (null !== e.getAttribute('type')) + '/' + e.type,
                        e
                }

                function T(e) {
                    var t = De.exec(e.type)
                    return t ? e.type = t[1] : e.removeAttribute('type'),
                        e
                }

                function E(e, t) {
                    var n,
                        r,
                        o,
                        i,
                        u,
                        a,
                        c,
                        s
                    if (1 === t.nodeType) {
                        if (J.hasData(e) && (i = J.access(e), u = J.set(t, i), s = i.events)) {
                            delete u.handle,
                                u.events = {}
                            for (o in s) {
                                for (n = 0, r = s[o].length; r > n; n++) {
                                    bt.event.add(t, o, s[o][n])
                                }
                            }
                        }
                        xe.hasData(e) && (a = xe.access(e), c = bt.extend({}, a), xe.set(t, c))
                    }
                }

                function x(e, t) {
                    var n = t.nodeName.toLowerCase()
                    'input' === n && ve.test(e.type) ? t.checked = e.checked : ('input' === n || 'textarea' === n) && (t.defaultValue = e.defaultValue)
                }

                function C(e, t, n, r) {
                    t = ft.apply([], t)
                    var o,
                        i,
                        u,
                        a,
                        c,
                        s,
                        l = 0,
                        f = e.length,
                        d = f - 1,
                        p = t[0],
                        m = bt.isFunction(p)
                    if (m || f > 1 && 'string' == typeof p && !vt.checkClone && Re.test(p)) {
                        return e.each(function (o) {
                            var i = e.eq(o)
                            m && (t[0] = p.call(this, o, i.html())),
                                C(i, t, n, r)
                        })
                    }
                    if (f && (o = g(t, e[0].ownerDocument, !1, e, r), i = o.firstChild, 1 === o.childNodes.length && (o = i), i || r)) {
                        for (u = bt.map(h(o, 'script'), b), a = u.length; f > l; l++) {
                            c = o,
                            l !== d && (c = bt.clone(c, !0, !0), a && bt.merge(u, h(c, 'script'))),
                                n.call(e[l], c, l)
                        }
                        if (a) {
                            for (s = u[u.length - 1].ownerDocument, bt.map(u, T), l = 0; a > l; l++) {
                                c = u[l],
                                be.test(c.type || '') && !J.access(c, 'globalEval') && bt.contains(s, c) && (c.src ? bt._evalUrl && bt._evalUrl(c.src) : bt.globalEval(c.textContent.replace(Ie, '')))
                            }
                        }
                    }
                    return e
                }

                function N(e, t, n) {
                    for (var r, o = t ? bt.filter(t, e) : e, i = 0; null != (r = o[i]); i++) {
                        n || 1 !== r.nodeType || bt.cleanData(h(r)),
                        r.parentNode && (n && bt.contains(r.ownerDocument, r) && m(h(r, 'script')), r.parentNode.removeChild(r))
                    }
                    return e
                }

                function S(e, t, n) {
                    var r
                    if (void 0 === n && 1 === e.nodeType) {
                        if (r = 'data-' + t.replace(Pe, '-$&').toLowerCase(), n = e.getAttribute(r), 'string' == typeof n) {
                            try {
                                n = 'true' === n ? !0 : 'false' === n ? !1 : 'null' === n ? null : +n + '' === n ? +n : ke.test(n) ? bt.parseJSON(n) : n
                            } catch (o) {
                            }
                            xe.set(e, t, n)
                        } else {
                            n = void 0
                        }
                    }
                    return n
                }

                function A(e, t, n) {
                    var r,
                        o,
                        i,
                        u,
                        a = e.style
                    return n = n || qe(e),
                        u = n ? n.getPropertyValue(t) || n[t] : void 0,
                    '' !== u && void 0 !== u || bt.contains(e.ownerDocument, e) || (u = bt.style(e, t)),
                    n && !vt.pixelMarginRight() && Me.test(u) && _e.test(t) && (r = a.width, o = a.minWidth, i = a.maxWidth, a.minWidth = a.maxWidth = a.width = u, u = n.width, a.width = r, a.minWidth = o, a.maxWidth = i),
                        void 0 !== u ? u + '' : u
                }

                function O(e, t, n, r) {
                    var o,
                        i = 1,
                        u = 20,
                        a = r ? function () {
                                return r.cur()
                            }
                            : function () {
                                return bt.css(e, t, '')
                            },
                        c = a(),
                        s = n && n[3] || (bt.cssNumber[t] ? '' : 'px'),
                        l = (bt.cssNumber[t] || 'px' !== s && +c) && je.exec(bt.css(e, t))
                    if (l && l[3] !== s) {
                        s = s || l[3],
                            n = n || [],
                            l = +c || 1
                        do {
                            i = i || '.5',
                                l /= i,
                                bt.style(e, t, l + s)
                        } while (i !== (i = a() / c) && 1 !== i && --u)
                    }
                    return n && (l = +l || +c || 0, o = n[1] ? l + (n[1] + 1) * n[2] : +n[2], r && (r.unit = s, r.start = l, r.end = o)),
                        o
                }

                function w(e, t) {
                    var n = bt(t.createElement(e)).appendTo(t.body),
                        r = bt.css(n[0], 'display')
                    return n.detach(),
                        r
                }

                function R(e) {
                    var t = st,
                        n = Ve[e]
                    return n || (n = w(e, t), 'none' !== n && n || (We = (We || bt('<iframe frameborder=\'0\' width=\'0\' height=\'0\'/>')).appendTo(t.documentElement), t = We[0].contentDocument, t.write(), t.close(), n = w(e, t), We.detach()), Ve[e] = n),
                        n
                }

                function D(e, t) {
                    return {
                        get: function () {
                            return e() ? void delete this.get : (this.get = t).apply(this, arguments)
                        }
                    }
                }

                function I() {
                    st.removeEventListener('DOMContentLoaded', I),
                        e.removeEventListener('load', I),
                        bt.ready()
                }

                function k(e) {
                    if (e in Ge) {
                        return e
                    }
                    for (var t = e[0].toUpperCase() + e.slice(1), n = Ke.length; n--;) {
                        if (e = Ke[n] + t, e in Ge) {
                            return e
                        }
                    }
                }

                function P(e, t, n) {
                    var r = je.exec(t)
                    return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || 'px') : t
                }

                function L(e, t, n, r, o) {
                    for (var i = n === (r ? 'border' : 'content') ? 4 : 'width' === t ? 1 : 0, u = 0; 4 > i; i += 2) {
                        'margin' === n && (u += bt.css(e, n + Fe[i], !0, o)),
                            r ? ('content' === n && (u -= bt.css(e, 'padding' + Fe[i], !0, o)), 'margin' !== n && (u -= bt.css(e, 'border' + Fe[i] + 'Width', !0, o))) : (u += bt.css(e, 'padding' + Fe[i], !0, o), 'padding' !== n && (u += bt.css(e, 'border' + Fe[i] + 'Width', !0, o)))
                    }
                    return u
                }

                function _(t, n, r) {
                    var o = !0,
                        i = 'width' === n ? t.offsetWidth : t.offsetHeight,
                        u = qe(t),
                        a = 'border-box' === bt.css(t, 'boxSizing', !1, u)
                    if (st.msFullscreenElement && e.top !== e && t.getClientRects().length && (i = Math.round(100 * t.getBoundingClientRect() [n])), 0 >= i || null == i) {
                        if (i = A(t, n, u), (0 > i || null == i) && (i = t.style[n]), Me.test(i)) {
                            return i
                        }
                        o = a && (vt.boxSizingReliable() || i === t.style[n]),
                            i = parseFloat(i) || 0
                    }
                    return i + L(t, n, r || (a ? 'border' : 'content'), o, u) + 'px'
                }

                function j(e, t) {
                    for (var n, r, o, i = [], u = 0, a = e.length; a > u; u++) {
                        r = e[u],
                        r.style && (i[u] = J.get(r, 'olddisplay'), n = r.style.display, t ? (i[u] || 'none' !== n || (r.style.display = ''), '' === r.style.display && He(r) && (i[u] = J.access(r, 'olddisplay', R(r.nodeName)))) : (o = He(r), 'none' === n && o || J.set(r, 'olddisplay', o ? n : bt.css(r, 'display'))))
                    }
                    for (u = 0; a > u; u++) {
                        r = e[u],
                        r.style && (t && 'none' !== r.style.display && '' !== r.style.display || (r.style.display = t ? i[u] || '' : 'none'))
                    }
                    return e
                }

                function M(e) {
                    return e.getAttribute && e.getAttribute('class') || ''
                }

                function F(e, t, n, r) {
                    var o
                    if (bt.isArray(t)) {
                        bt.each(t, function (t, o) {
                            n || ot.test(e) ? r(e, o) : F(e + '[' + ('object' == typeof o && null != o ? t : '') + ']', o, n, r)
                        })
                    } else {
                        if (n || 'object' !== bt.type(t)) {
                            r(e, t)
                        } else {
                            for (o in t) {
                                F(e + '[' + o + ']', t[o], n, r)
                            }
                        }
                    }
                }

                var H,
                    q,
                    B,
                    U,
                    W,
                    V,
                    $,
                    X,
                    Y,
                    z,
                    K,
                    G,
                    J,
                    Q,
                    Z,
                    ee,
                    te,
                    ne,
                    re,
                    oe,
                    ie,
                    ue,
                    ae,
                    ce,
                    se,
                    le,
                    fe,
                    de,
                    pe,
                    he,
                    me,
                    ge,
                    ve,
                    ye,
                    be,
                    Te,
                    Ee,
                    xe,
                    Ce,
                    Ne,
                    Se,
                    Ae,
                    Oe,
                    we,
                    Re,
                    De,
                    Ie,
                    ke,
                    Pe,
                    Le,
                    _e,
                    je,
                    Me,
                    Fe,
                    He,
                    qe,
                    Be,
                    Ue,
                    We,
                    Ve,
                    $e,
                    Xe,
                    Ye,
                    ze,
                    Ke,
                    Ge,
                    Je,
                    Qe,
                    Ze,
                    et,
                    tt,
                    nt,
                    rt,
                    ot,
                    it,
                    ut,
                    at,
                    ct = [],
                    st = e.document,
                    lt = ct.slice,
                    ft = ct.concat,
                    dt = ct.push,
                    pt = ct.indexOf,
                    ht = {},
                    mt = ht.toString,
                    gt = ht.hasOwnProperty,
                    vt = {},
                    yt = '2.2.2-pre',
                    bt = function (e, t) {
                        return new bt.fn.init(e, t)
                    },
                    Tt = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
                    Et = /^-ms-/,
                    xt = /-([\da-z])/gi,
                    Ct = function (e, t) {
                        return t.toUpperCase()
                    }
                return bt.fn = bt.prototype = {
                    jquery: yt,
                    constructor: bt,
                    selector: '',
                    length: 0,
                    toArray: function () {
                        return lt.call(this)
                    },
                    get: function (e) {
                        return null != e ? 0 > e ? this[e + this.length] : this[e] : lt.call(this)
                    },
                    pushStack: function (e) {
                        var t = bt.merge(this.constructor(), e)
                        return t.prevObject = this,
                            t.context = this.context,
                            t
                    },
                    each: function (e) {
                        return bt.each(this, e)
                    },
                    map: function (e) {
                        return this.pushStack(bt.map(this, function (t, n) {
                            return e.call(t, n, t)
                        }))
                    },
                    slice: function () {
                        return this.pushStack(lt.apply(this, arguments))
                    },
                    first: function () {
                        return this.eq(0)
                    },
                    last: function () {
                        return this.eq(-1)
                    },
                    eq: function (e) {
                        var t = this.length,
                            n = +e + (0 > e ? t : 0)
                        return this.pushStack(n >= 0 && t > n ? [
                            this[n]
                        ] : [])
                    },
                    end: function () {
                        return this.prevObject || this.constructor()
                    },
                    push: dt,
                    sort: ct.sort,
                    splice: ct.splice
                },
                    bt.extend = bt.fn.extend = function () {
                        var e,
                            t,
                            n,
                            r,
                            o,
                            i,
                            u = arguments[0] || {},
                            a = 1,
                            c = arguments.length,
                            s = !1
                        for ('boolean' == typeof u && (s = u, u = arguments[a] || {}, a++), 'object' == typeof u || bt.isFunction(u) || (u = {}), a === c && (u = this, a--); c > a; a++) {
                            if (null != (e = arguments[a])) {
                                for (t in e) {
                                    n = u[t],
                                        r = e[t],
                                    u !== r && (s && r && (bt.isPlainObject(r) || (o = bt.isArray(r))) ? (o ? (o = !1, i = n && bt.isArray(n) ? n : []) : i = n && bt.isPlainObject(n) ? n : {}, u[t] = bt.extend(s, i, r)) : void 0 !== r && (u[t] = r))
                                }
                            }
                        }
                        return u
                    },
                    bt.extend({
                        expando: 'ATJS' + (yt + Math.random()).replace(/\D/g, ''),
                        isReady: !0,
                        error: function (e) {
                            throw Error(e)
                        },
                        noop: function () {
                        },
                        isFunction: function (e) {
                            return 'function' === bt.type(e)
                        },
                        isArray: Array.isArray,
                        isWindow: function (e) {
                            return null != e && e === e.window
                        },
                        isNumeric: function (e) {
                            var t = e && '' + e
                            return !bt.isArray(e) && t - parseFloat(t) + 1 >= 0
                        },
                        isPlainObject: function (e) {
                            var t
                            if ('object' !== bt.type(e) || e.nodeType || bt.isWindow(e)) {
                                return !1
                            }
                            if (e.constructor && !gt.call(e.constructor.prototype, 'isPrototypeOf')) {
                                return !1
                            }
                            for (t in e) {
                            }
                            return void 0 === t || gt.call(e, t)
                        },
                        isEmptyObject: function (e) {
                            var t
                            for (t in e) {
                                return !1
                            }
                            return !0
                        },
                        type: function (e) {
                            return null == e ? e + '' : 'object' == typeof e || 'function' == typeof e ? ht[mt.call(e)] || 'object' : typeof e
                        },
                        globalEval: function (e) {
                            var t,
                                n = eval
                            e = bt.trim(e),
                            e && (1 === e.indexOf('use strict') ? (t = st.createElement('script'), t.text = e, st.head.appendChild(t).parentNode.removeChild(t)) : n(e))
                        },
                        camelCase: function (e) {
                            return e.replace(Et, 'ms-').replace(xt, Ct)
                        },
                        nodeName: function (e, t) {
                            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
                        },
                        each: function (e, n) {
                            var r,
                                o = 0
                            if (t(e)) {
                                for (r = e.length; r > o && n.call(e[o], o, e[o]) !== !1; o++) {
                                }
                            } else {
                                for (o in e) {
                                    if (n.call(e[o], o, e[o]) === !1) {
                                        break
                                    }
                                }
                            }
                            return e
                        },
                        trim: function (e) {
                            return null == e ? '' : (e + '').replace(Tt, '')
                        },
                        makeArray: function (e, n) {
                            var r = n || []
                            return null != e && (t(Object(e)) ? bt.merge(r, 'string' == typeof e ? [
                                e
                            ] : e) : dt.call(r, e)),
                                r
                        },
                        inArray: function (e, t, n) {
                            return null == t ? -1 : pt.call(t, e, n)
                        },
                        merge: function (e, t) {
                            for (var n = +t.length, r = 0, o = e.length; n > r; r++) {
                                e[o++] = t[r]
                            }
                            return e.length = o,
                                e
                        },
                        grep: function (e, t, n) {
                            for (var r, o = [], i = 0, u = e.length, a = !n; u > i; i++) {
                                r = !t(e[i], i),
                                r !== a && o.push(e[i])
                            }
                            return o
                        },
                        map: function (e, n, r) {
                            var o,
                                i,
                                u = 0,
                                a = []
                            if (t(e)) {
                                for (o = e.length; o > u; u++) {
                                    i = n(e[u], u, r),
                                    null != i && a.push(i)
                                }
                            } else {
                                for (u in e) {
                                    i = n(e[u], u, r),
                                    null != i && a.push(i)
                                }
                            }
                            return ft.apply([], a)
                        },
                        guid: 1,
                        proxy: function Nt(e, t) {
                            var n,
                                r,
                                Nt
                            return 'string' == typeof t && (n = e[t], t = e, e = n),
                                bt.isFunction(e) ? (r = lt.call(arguments, 2), Nt = function () {
                                    return e.apply(t || this, r.concat(lt.call(arguments)))
                                }, Nt.guid = e.guid = e.guid || bt.guid++, Nt) : void 0
                        },
                        now: Date.now,
                        support: vt
                    }),
                'function' == typeof Symbol && (bt.fn[Symbol.iterator] = ct[Symbol.iterator]),
                    bt.each('Boolean Number String Function Array Date RegExp Object Error Symbol'.split(' '), function (e, t) {
                        ht['[object ' + t + ']'] = t.toLowerCase()
                    }),
                    H = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
                    q = function (e) {
                        function t(e, t, n, r) {
                            var o,
                                i,
                                u,
                                a,
                                c,
                                s,
                                f,
                                p,
                                h = t && t.ownerDocument,
                                m = t ? t.nodeType : 9
                            if (n = n || [], 'string' != typeof e || !e || 1 !== m && 9 !== m && 11 !== m) {
                                return n
                            }
                            if (!r && ((t ? t.ownerDocument || t : q) !== k && I(t), t = t || k, L)) {
                                if (11 !== m && (s = ve.exec(e))) {
                                    if (o = s[1]) {
                                        if (9 === m) {
                                            if (!(u = t.getElementById(o))) {
                                                return n
                                            }
                                            if (u.id === o) {
                                                return n.push(u),
                                                    n
                                            }
                                        } else {
                                            if (h && (u = h.getElementById(o)) && F(t, u) && u.id === o) {
                                                return n.push(u),
                                                    n
                                            }
                                        }
                                    } else {
                                        if (s[2]) {
                                            return Q.apply(n, t.getElementsByTagName(e)),
                                                n
                                        }
                                        if ((o = s[3]) && E.getElementsByClassName && t.getElementsByClassName) {
                                            return Q.apply(n, t.getElementsByClassName(o)),
                                                n
                                        }
                                    }
                                }
                                if (E.qsa && !$[e + ' '] && (!_ || !_.test(e))) {
                                    if (1 !== m) {
                                        h = t,
                                            p = e
                                    } else {
                                        if ('object' !== t.nodeName.toLowerCase()) {
                                            for ((a = t.getAttribute('id')) ? a = a.replace(be, '\\$&') : t.setAttribute('id', a = H), f = S(e), i = f.length, c = de.test(a) ? '#' + a : '[id=\'' + a + '\']'; i--;) {
                                                f[i] = c + ' ' + d(f[i])
                                            }
                                            p = f.join(','),
                                                h = ye.test(e) && l(t.parentNode) || t
                                        }
                                    }
                                    if (p) {
                                        try {
                                            return Q.apply(n, h.querySelectorAll(p)),
                                                n
                                        } catch (g) {
                                        } finally {
                                            a === H && t.removeAttribute('id')
                                        }
                                    }
                                }
                            }
                            return O(e.replace(ae, '$1'), t, n, r)
                        }

                        function n() {
                            function e(n, r) {
                                return t.push(n + ' ') > x.cacheLength && delete e[t.shift()],
                                    e[n + ' '] = r
                            }

                            var t = []
                            return e
                        }

                        function r(e) {
                            return e[H] = !0,
                                e
                        }

                        function o(e) {
                            var t = k.createElement('div')
                            try {
                                return !!e(t)
                            } catch (n) {
                                return !1
                            } finally {
                                t.parentNode && t.parentNode.removeChild(t),
                                    t = null
                            }
                        }

                        function i(e, t) {
                            for (var n = e.split('|'), r = n.length; r--;) {
                                x.attrHandle[n[r]] = t
                            }
                        }

                        function u(e, t) {
                            var n = t && e,
                                r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || Y) - (~e.sourceIndex || Y)
                            if (r) {
                                return r
                            }
                            if (n) {
                                for (; n = n.nextSibling;) {
                                    if (n === t) {
                                        return -1
                                    }
                                }
                            }
                            return e ? 1 : -1
                        }

                        function a(e) {
                            return function (t) {
                                var n = t.nodeName.toLowerCase()
                                return 'input' === n && t.type === e
                            }
                        }

                        function c(e) {
                            return function (t) {
                                var n = t.nodeName.toLowerCase()
                                return ('input' === n || 'button' === n) && t.type === e
                            }
                        }

                        function s(e) {
                            return r(function (t) {
                                return t = +t,
                                    r(function (n, r) {
                                        for (var o, i = e([], n.length, t), u = i.length; u--;) {
                                            n[o = i[u]] && (n[o] = !(r[o] = n[o]))
                                        }
                                    })
                            })
                        }

                        function l(e) {
                            return e && void 0 !== e.getElementsByTagName && e
                        }

                        function f() {
                        }

                        function d(e) {
                            for (var t = 0, n = e.length, r = ''; n > t; t++) {
                                r += e[t].value
                            }
                            return r
                        }

                        function p(e, t, n) {
                            var r = t.dir,
                                o = n && 'parentNode' === r,
                                i = U++
                            return t.first ? function (t, n, i) {
                                    for (; t = t[r];) {
                                        if (1 === t.nodeType || o) {
                                            return e(t, n, i)
                                        }
                                    }
                                }
                                : function (t, n, u) {
                                    var a,
                                        c,
                                        s,
                                        l = [
                                            B,
                                            i
                                        ]
                                    if (u) {
                                        for (; t = t[r];) {
                                            if ((1 === t.nodeType || o) && e(t, n, u)) {
                                                return !0
                                            }
                                        }
                                    } else {
                                        for (; t = t[r];) {
                                            if (1 === t.nodeType || o) {
                                                if (s = t[H] || (t[H] = {}), c = s[t.uniqueID] || (s[t.uniqueID] = {}), (a = c[r]) && a[0] === B && a[1] === i) {
                                                    return l[2] = a[2]
                                                }
                                                if (c[r] = l, l[2] = e(t, n, u)) {
                                                    return !0
                                                }
                                            }
                                        }
                                    }
                                }
                        }

                        function h(e) {
                            return e.length > 1 ? function (t, n, r) {
                                    for (var o = e.length; o--;) {
                                        if (!e[o](t, n, r)) {
                                            return !1
                                        }
                                    }
                                    return !0
                                }
                                : e[0]
                        }

                        function m(e, n, r) {
                            for (var o = 0, i = n.length; i > o; o++) {
                                t(e, n[o], r)
                            }
                            return r
                        }

                        function g(e, t, n, r, o) {
                            for (var i, u = [], a = 0, c = e.length, s = null != t; c > a; a++) {
                                (i = e[a]) && (!n || n(i, r, o)) && (u.push(i), s && t.push(a))
                            }
                            return u
                        }

                        function v(e, t, n, o, i, u) {
                            return o && !o[H] && (o = v(o)),
                            i && !i[H] && (i = v(i, u)),
                                r(function (r, u, a, c) {
                                    var s,
                                        l,
                                        f,
                                        d = [],
                                        p = [],
                                        h = u.length,
                                        v = r || m(t || '*', a.nodeType ? [
                                            a
                                        ] : a, []),
                                        y = !e || !r && t ? v : g(v, d, e, a, c),
                                        b = n ? i || (r ? e : h || o) ? [] : u : y
                                    if (n && n(y, b, a, c), o) {
                                        for (s = g(b, p), o(s, [], a, c), l = s.length; l--;) {
                                            (f = s[l]) && (b[p[l]] = !(y[p[l]] = f))
                                        }
                                    }
                                    if (r) {
                                        if (i || e) {
                                            if (i) {
                                                for (s = [], l = b.length; l--;) {
                                                    (f = b[l]) && s.push(y[l] = f)
                                                }
                                                i(null, b = [], s, c)
                                            }
                                            for (l = b.length; l--;) {
                                                (f = b[l]) && (s = i ? ee(r, f) : d[l]) > -1 && (r[s] = !(u[s] = f))
                                            }
                                        }
                                    } else {
                                        b = g(b === u ? b.splice(h, b.length) : b),
                                            i ? i(null, u, b, c) : Q.apply(u, b)
                                    }
                                })
                        }

                        function y(e) {
                            for (var t, n, r, o = e.length, i = x.relative[e[0].type], u = i || x.relative[' '], a = i ? 1 : 0, c = p(function (e) {
                                return e === t
                            }, u, !0), s = p(function (e) {
                                return ee(t, e) > -1
                            }, u, !0), l = [
                                function (e, n, r) {
                                    var o = !i && (r || n !== w) || ((t = n).nodeType ? c(e, n, r) : s(e, n, r))
                                    return t = null,
                                        o
                                }
                            ]; o > a; a++) {
                                if (n = x.relative[e[a].type]) {
                                    l = [
                                        p(h(l), n)
                                    ]
                                } else {
                                    if (n = x.filter[e[a].type].apply(null, e[a].matches), n[H]) {
                                        for (r = ++a; o > r && !x.relative[e[r].type]; r++) {
                                        }
                                        return v(a > 1 && h(l), a > 1 && d(e.slice(0, a - 1).concat({
                                            value: ' ' === e[a - 2].type ? '*' : ''
                                        })).replace(ae, '$1'), n, r > a && y(e.slice(a, r)), o > r && y(e = e.slice(r)), o > r && d(e))
                                    }
                                    l.push(n)
                                }
                            }
                            return h(l)
                        }

                        function b(e, n) {
                            var o = n.length > 0,
                                i = e.length > 0,
                                u = function (r, u, a, c, s) {
                                    var l,
                                        f,
                                        d,
                                        p = 0,
                                        h = '0',
                                        m = r && [],
                                        v = [],
                                        y = w,
                                        b = r || i && x.find.TAG('*', s),
                                        T = B += null == y ? 1 : Math.random() || 0.1,
                                        E = b.length
                                    for (s && (w = u === k || u || s); h !== E && null != (l = b[h]); h++) {
                                        if (i && l) {
                                            for (f = 0, u || l.ownerDocument === k || (I(l), a = !L); d = e[f++];) {
                                                if (d(l, u || k, a)) {
                                                    c.push(l)
                                                    break
                                                }
                                            }
                                            s && (B = T)
                                        }
                                        o && ((l = !d && l) && p--, r && m.push(l))
                                    }
                                    if (p += h, o && h !== p) {
                                        for (f = 0; d = n[f++];) {
                                            d(m, v, u, a)
                                        }
                                        if (r) {
                                            if (p > 0) {
                                                for (; h--;) {
                                                    m[h] || v[h] || (v[h] = G.call(c))
                                                }
                                            }
                                            v = g(v)
                                        }
                                        Q.apply(c, v),
                                        s && !r && v.length > 0 && p + n.length > 1 && t.uniqueSort(c)
                                    }
                                    return s && (B = T, w = y),
                                        m
                                }
                            return o ? r(u) : u
                        }

                        var T,
                            E,
                            x,
                            C,
                            N,
                            S,
                            A,
                            O,
                            w,
                            R,
                            D,
                            I,
                            k,
                            P,
                            L,
                            _,
                            j,
                            M,
                            F,
                            H = 'sizzle' + 1 * new Date,
                            q = e.document,
                            B = 0,
                            U = 0,
                            W = n(),
                            V = n(),
                            $ = n(),
                            X = function (e, t) {
                                return e === t && (D = !0),
                                    0
                            },
                            Y = 1 << 31,
                            z = {}.hasOwnProperty,
                            K = [],
                            G = K.pop,
                            J = K.push,
                            Q = K.push,
                            Z = K.slice,
                            ee = function (e, t) {
                                for (var n = 0, r = e.length; r > n; n++) {
                                    if (e[n] === t) {
                                        return n
                                    }
                                }
                                return -1
                            },
                            te = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped',
                            ne = '[\\x20\\t\\r\\n\\f]',
                            re = '(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+',
                            oe = '\\[' + ne + '*(' + re + ')(?:' + ne + '*([*^$|!~]?=)' + ne + '*(?:\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)"|(' + re + '))|)' + ne + '*\\]',
                            ie = ':(' + re + ')(?:\\(((\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|' + oe + ')*)|.*)\\)|)',
                            ue = RegExp(ne + '+', 'g'),
                            ae = RegExp('^' + ne + '+|((?:^|[^\\\\])(?:\\\\.)*)' + ne + '+$', 'g'),
                            ce = RegExp('^' + ne + '*,' + ne + '*'),
                            se = RegExp('^' + ne + '*([>+~]|' + ne + ')' + ne + '*'),
                            le = RegExp('=' + ne + '*([^\\]\'"]*?)' + ne + '*\\]', 'g'),
                            fe = RegExp(ie),
                            de = RegExp('^' + re + '$'),
                            pe = {
                                ID: RegExp('^#(' + re + ')'),
                                CLASS: RegExp('^\\.(' + re + ')'),
                                TAG: RegExp('^(' + re + '|[*])'),
                                ATTR: RegExp('^' + oe),
                                PSEUDO: RegExp('^' + ie),
                                CHILD: RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(' + ne + '*(even|odd|(([+-]|)(\\d*)n|)' + ne + '*(?:([+-]|)' + ne + '*(\\d+)|))' + ne + '*\\)|)', 'i'),
                                bool: RegExp('^(?:' + te + ')$', 'i'),
                                needsContext: RegExp('^' + ne + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(' + ne + '*((?:-\\d)?\\d*)' + ne + '*\\)|)(?=[^-]|$)', 'i')
                            },
                            he = /^(?:input|select|textarea|button)$/i,
                            me = /^h\d$/i,
                            ge = /^[^{]+\{\s*\[native \w/,
                            ve = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                            ye = /[+~]/,
                            be = /'|\\/g,
                            Te = RegExp('\\\\([\\da-f]{1,6}' + ne + '?|(' + ne + ')|.)', 'ig'),
                            Ee = function (e, t, n) {
                                var r = '0x' + t - 65536
                                return r !== r || n ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
                            },
                            xe = function () {
                                I()
                            }
                        try {
                            Q.apply(K = Z.call(q.childNodes), q.childNodes),
                                K[q.childNodes.length].nodeType
                        } catch (Ce) {
                            Q = {
                                apply: K.length ? function (e, t) {
                                        J.apply(e, Z.call(t))
                                    }
                                    : function (e, t) {
                                        for (var n = e.length, r = 0; e[n++] = t[r++];) {
                                        }
                                        e.length = n - 1
                                    }
                            }
                        }
                        E = t.support = {},
                            N = t.isXML = function (e) {
                                var t = e && (e.ownerDocument || e).documentElement
                                return t ? 'HTML' !== t.nodeName : !1
                            },
                            I = t.setDocument = function (e) {
                                var t,
                                    n,
                                    r = e ? e.ownerDocument || e : q
                                return r !== k && 9 === r.nodeType && r.documentElement ? (k = r, P = k.documentElement, L = !N(k), (n = k.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener('unload', xe, !1) : n.attachEvent && n.attachEvent('onunload', xe)), E.attributes = o(function (e) {
                                    return e.className = 'i',
                                        !e.getAttribute('className')
                                }), E.getElementsByTagName = o(function (e) {
                                    return e.appendChild(k.createComment('')),
                                        !e.getElementsByTagName('*').length
                                }), E.getElementsByClassName = ge.test(k.getElementsByClassName), E.getById = o(function (e) {
                                    return P.appendChild(e).id = H,
                                    !k.getElementsByName || !k.getElementsByName(H).length
                                }), E.getById ? (x.find.ID = function (e, t) {
                                    if (void 0 !== t.getElementById && L) {
                                        var n = t.getElementById(e)
                                        return n ? [
                                            n
                                        ] : []
                                    }
                                }, x.filter.ID = function (e) {
                                    var t = e.replace(Te, Ee)
                                    return function (e) {
                                        return e.getAttribute('id') === t
                                    }
                                }) : (delete x.find.ID, x.filter.ID = function (e) {
                                    var t = e.replace(Te, Ee)
                                    return function (e) {
                                        var n = void 0 !== e.getAttributeNode && e.getAttributeNode('id')
                                        return n && n.value === t
                                    }
                                }), x.find.TAG = E.getElementsByTagName ? function (e, t) {
                                        return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : E.qsa ? t.querySelectorAll(e) : void 0
                                    }
                                    : function (e, t) {
                                        var n,
                                            r = [],
                                            o = 0,
                                            i = t.getElementsByTagName(e)
                                        if ('*' === e) {
                                            for (; n = i[o++];) {
                                                1 === n.nodeType && r.push(n)
                                            }
                                            return r
                                        }
                                        return i
                                    }, x.find.CLASS = E.getElementsByClassName && function (e, t) {
                                    return void 0 !== t.getElementsByClassName && L ? t.getElementsByClassName(e) : void 0
                                }, j = [], _ = [], (E.qsa = ge.test(k.querySelectorAll)) && (o(function (e) {
                                    P.appendChild(e).innerHTML = '<a id=\'' + H + '\'></a><select id=\'' + H + '-\r\\\' msallowcapture=\'\'><option selected=\'\'></option></select>',
                                    e.querySelectorAll('[msallowcapture^=\'\']').length && _.push('[*^$]=' + ne + '*(?:\'\'|"")'),
                                    e.querySelectorAll('[selected]').length || _.push('\\[' + ne + '*(?:value|' + te + ')'),
                                    e.querySelectorAll('[id~=' + H + '-]').length || _.push('~='),
                                    e.querySelectorAll(':checked').length || _.push(':checked'),
                                    e.querySelectorAll('a#' + H + '+*').length || _.push('.#.+[+~]')
                                }), o(function (e) {
                                    var t = k.createElement('input')
                                    t.setAttribute('type', 'hidden'),
                                        e.appendChild(t).setAttribute('name', 'D'),
                                    e.querySelectorAll('[name=d]').length && _.push('name' + ne + '*[*^$|!~]?='),
                                    e.querySelectorAll(':enabled').length || _.push(':enabled', ':disabled'),
                                        e.querySelectorAll('*,:x'),
                                        _.push(',.*:')
                                })), (E.matchesSelector = ge.test(M = P.matches || P.webkitMatchesSelector || P.mozMatchesSelector || P.oMatchesSelector || P.msMatchesSelector)) && o(function (e) {
                                    E.disconnectedMatch = M.call(e, 'div'),
                                        M.call(e, '[s!=\'\']:x'),
                                        j.push('!=', ie)
                                }), _ = _.length && RegExp(_.join('|')), j = j.length && RegExp(j.join('|')), t = ge.test(P.compareDocumentPosition), F = t || ge.test(P.contains) ? function (e, t) {
                                        var n = 9 === e.nodeType ? e.documentElement : e,
                                            r = t && t.parentNode
                                        return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
                                    }
                                    : function (e, t) {
                                        if (t) {
                                            for (; t = t.parentNode;) {
                                                if (t === e) {
                                                    return !0
                                                }
                                            }
                                        }
                                        return !1
                                    }, X = t ? function (e, t) {
                                        if (e === t) {
                                            return D = !0,
                                                0
                                        }
                                        var n = !e.compareDocumentPosition - !t.compareDocumentPosition
                                        return n ? n : (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, 1 & n || !E.sortDetached && t.compareDocumentPosition(e) === n ? e === k || e.ownerDocument === q && F(q, e) ? -1 : t === k || t.ownerDocument === q && F(q, t) ? 1 : R ? ee(R, e) - ee(R, t) : 0 : 4 & n ? -1 : 1)
                                    }
                                    : function (e, t) {
                                        if (e === t) {
                                            return D = !0,
                                                0
                                        }
                                        var n,
                                            r = 0,
                                            o = e.parentNode,
                                            i = t.parentNode,
                                            a = [
                                                e
                                            ],
                                            c = [
                                                t
                                            ]
                                        if (!o || !i) {
                                            return e === k ? -1 : t === k ? 1 : o ? -1 : i ? 1 : R ? ee(R, e) - ee(R, t) : 0
                                        }
                                        if (o === i) {
                                            return u(e, t)
                                        }
                                        for (n = e; n = n.parentNode;) {
                                            a.unshift(n)
                                        }
                                        for (n = t; n = n.parentNode;) {
                                            c.unshift(n)
                                        }
                                        for (; a[r] === c[r];) {
                                            r++
                                        }
                                        return r ? u(a[r], c[r]) : a[r] === q ? -1 : c[r] === q ? 1 : 0
                                    }, k) : k
                            },
                            t.matches = function (e, n) {
                                return t(e, null, null, n)
                            },
                            t.matchesSelector = function (e, n) {
                                if ((e.ownerDocument || e) !== k && I(e), n = n.replace(le, '=\'$1\']'), E.matchesSelector && L && !$[n + ' '] && (!j || !j.test(n)) && (!_ || !_.test(n))) {
                                    try {
                                        var r = M.call(e, n)
                                        if (r || E.disconnectedMatch || e.document && 11 !== e.document.nodeType) {
                                            return r
                                        }
                                    } catch (o) {
                                    }
                                }
                                return t(n, k, null, [
                                    e
                                ]).length > 0
                            },
                            t.contains = function (e, t) {
                                return (e.ownerDocument || e) !== k && I(e),
                                    F(e, t)
                            },
                            t.attr = function (e, t) {
                                (e.ownerDocument || e) !== k && I(e)
                                var n = x.attrHandle[t.toLowerCase()],
                                    r = n && z.call(x.attrHandle, t.toLowerCase()) ? n(e, t, !L) : void 0
                                return void 0 !== r ? r : E.attributes || !L ? e.getAttribute(t) : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
                            },
                            t.error = function (e) {
                                throw Error('Syntax error, unrecognized expression: ' + e)
                            },
                            t.uniqueSort = function (e) {
                                var t,
                                    n = [],
                                    r = 0,
                                    o = 0
                                if (D = !E.detectDuplicates, R = !E.sortStable && e.slice(0), e.sort(X), D) {
                                    for (; t = e[o++];) {
                                        t === e[o] && (r = n.push(o))
                                    }
                                    for (; r--;) {
                                        e.splice(n[r], 1)
                                    }
                                }
                                return R = null,
                                    e
                            },
                            C = t.getText = function (e) {
                                var t,
                                    n = '',
                                    r = 0,
                                    o = e.nodeType
                                if (o) {
                                    if (1 === o || 9 === o || 11 === o) {
                                        if ('string' == typeof e.textContent) {
                                            return e.textContent
                                        }
                                        for (e = e.firstChild; e; e = e.nextSibling) {
                                            n += C(e)
                                        }
                                    } else {
                                        if (3 === o || 4 === o) {
                                            return e.nodeValue
                                        }
                                    }
                                } else {
                                    for (; t = e[r++];) {
                                        n += C(t)
                                    }
                                }
                                return n
                            },
                            x = t.selectors = {
                                cacheLength: 50,
                                createPseudo: r,
                                match: pe,
                                attrHandle: {},
                                find: {},
                                relative: {
                                    '>': {
                                        dir: 'parentNode',
                                        first: !0
                                    },
                                    ' ': {
                                        dir: 'parentNode'
                                    },
                                    '+': {
                                        dir: 'previousSibling',
                                        first: !0
                                    },
                                    '~': {
                                        dir: 'previousSibling'
                                    }
                                },
                                preFilter: {
                                    ATTR: function (e) {
                                        return e[1] = e[1].replace(Te, Ee),
                                            e[3] = (e[3] || e[4] || e[5] || '').replace(Te, Ee),
                                        '~=' === e[2] && (e[3] = ' ' + e[3] + ' '),
                                            e.slice(0, 4)
                                    },
                                    CHILD: function (e) {
                                        return e[1] = e[1].toLowerCase(),
                                            'nth' === e[1].slice(0, 3) ? (e[3] || t.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ('even' === e[3] || 'odd' === e[3])), e[5] = +(e[7] + e[8] || 'odd' === e[3])) : e[3] && t.error(e[0]),
                                            e
                                    },
                                    PSEUDO: function (e) {
                                        var t,
                                            n = !e[6] && e[2]
                                        return pe.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || '' : n && fe.test(n) && (t = S(n, !0)) && (t = n.indexOf(')', n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                                    }
                                },
                                filter: {
                                    TAG: function (e) {
                                        var t = e.replace(Te, Ee).toLowerCase()
                                        return '*' === e ? function () {
                                                return !0
                                            }
                                            : function (e) {
                                                return e.nodeName && e.nodeName.toLowerCase() === t
                                            }
                                    },
                                    CLASS: function (e) {
                                        var t = W[e + ' ']
                                        return t || (t = RegExp('(^|' + ne + ')' + e + '(' + ne + '|$)')) && W(e, function (e) {
                                            return t.test('string' == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute('class') || '')
                                        })
                                    },
                                    ATTR: function (e, n, r) {
                                        return function (o) {
                                            var i = t.attr(o, e)
                                            return null == i ? '!=' === n : n ? (i += '', '=' === n ? i === r : '!=' === n ? i !== r : '^=' === n ? r && 0 === i.indexOf(r) : '*=' === n ? r && i.indexOf(r) > -1 : '$=' === n ? r && i.slice(-r.length) === r : '~=' === n ? (' ' + i.replace(ue, ' ') + ' ').indexOf(r) > -1 : '|=' === n ? i === r || i.slice(0, r.length + 1) === r + '-' : !1) : !0
                                        }
                                    },
                                    CHILD: function (e, t, n, r, o) {
                                        var i = 'nth' !== e.slice(0, 3),
                                            u = 'last' !== e.slice(-4),
                                            a = 'of-type' === t
                                        return 1 === r && 0 === o ? function (e) {
                                                return !!e.parentNode
                                            }
                                            : function (t, n, c) {
                                                var s,
                                                    l,
                                                    f,
                                                    d,
                                                    p,
                                                    h,
                                                    m = i !== u ? 'nextSibling' : 'previousSibling',
                                                    g = t.parentNode,
                                                    v = a && t.nodeName.toLowerCase(),
                                                    y = !c && !a,
                                                    b = !1
                                                if (g) {
                                                    if (i) {
                                                        for (; m;) {
                                                            for (d = t; d = d[m];) {
                                                                if (a ? d.nodeName.toLowerCase() === v : 1 === d.nodeType) {
                                                                    return !1
                                                                }
                                                            }
                                                            h = m = 'only' === e && !h && 'nextSibling'
                                                        }
                                                        return !0
                                                    }
                                                    if (h = [
                                                        u ? g.firstChild : g.lastChild
                                                    ], u && y) {
                                                        for (d = g, f = d[H] || (d[H] = {}), l = f[d.uniqueID] || (f[d.uniqueID] = {}), s = l[e] || [], p = s[0] === B && s[1], b = p && s[2], d = p && g.childNodes[p]; d = ++p && d && d[m] || (b = p = 0) || h.pop();) {
                                                            if (1 === d.nodeType && ++b && d === t) {
                                                                l[e] = [
                                                                    B,
                                                                    p,
                                                                    b
                                                                ]
                                                                break
                                                            }
                                                        }
                                                    } else {
                                                        if (y && (d = t, f = d[H] || (d[H] = {}), l = f[d.uniqueID] || (f[d.uniqueID] = {}), s = l[e] || [], p = s[0] === B && s[1], b = p), b === !1) {
                                                            for (; (d = ++p && d && d[m] || (b = p = 0) || h.pop()) && ((a ? d.nodeName.toLowerCase() !== v : 1 !== d.nodeType) || !++b || (y && (f = d[H] || (d[H] = {}), l = f[d.uniqueID] || (f[d.uniqueID] = {}), l[e] = [
                                                                B,
                                                                b
                                                            ]), d !== t));) {
                                                            }
                                                        }
                                                    }
                                                    return b -= o,
                                                    b === r || b % r === 0 && b / r >= 0
                                                }
                                            }
                                    },
                                    PSEUDO: function (e, n) {
                                        var o,
                                            i = x.pseudos[e] || x.setFilters[e.toLowerCase()] || t.error('unsupported pseudo: ' + e)
                                        return i[H] ? i(n) : i.length > 1 ? (o = [
                                            e,
                                            e,
                                            '',
                                            n
                                        ], x.setFilters.hasOwnProperty(e.toLowerCase()) ? r(function (e, t) {
                                            for (var r, o = i(e, n), u = o.length; u--;) {
                                                r = ee(e, o[u]),
                                                    e[r] = !(t[r] = o[u])
                                            }
                                        }) : function (e) {
                                            return i(e, 0, o)
                                        }) : i
                                    }
                                },
                                pseudos: {
                                    not: r(function (e) {
                                        var t = [],
                                            n = [],
                                            o = A(e.replace(ae, '$1'))
                                        return o[H] ? r(function (e, t, n, r) {
                                            for (var i, u = o(e, null, r, []), a = e.length; a--;) {
                                                (i = u[a]) && (e[a] = !(t[a] = i))
                                            }
                                        }) : function (e, r, i) {
                                            return t[0] = e,
                                                o(t, null, i, n),
                                                t[0] = null,
                                                !n.pop()
                                        }
                                    }),
                                    has: r(function (e) {
                                        return function (n) {
                                            return t(e, n).length > 0
                                        }
                                    }),
                                    contains: r(function (e) {
                                        return e = e.replace(Te, Ee),
                                            function (t) {
                                                return (t.textContent || t.innerText || C(t)).indexOf(e) > -1
                                            }
                                    }),
                                    lang: r(function (e) {
                                        return de.test(e || '') || t.error('unsupported lang: ' + e),
                                            e = e.replace(Te, Ee).toLowerCase(),
                                            function (t) {
                                                var n
                                                do {
                                                    if (n = L ? t.lang : t.getAttribute('xml:lang') || t.getAttribute('lang')) {
                                                        return n = n.toLowerCase(),
                                                        n === e || 0 === n.indexOf(e + '-')
                                                    }
                                                } while ((t = t.parentNode) && 1 === t.nodeType)
                                                return !1
                                            }
                                    }),
                                    target: function (t) {
                                        var n = e.location && e.location.hash
                                        return n && n.slice(1) === t.id
                                    },
                                    root: function (e) {
                                        return e === P
                                    },
                                    focus: function (e) {
                                        return e === k.activeElement && (!k.hasFocus || k.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                                    },
                                    enabled: function (e) {
                                        return e.disabled === !1
                                    },
                                    disabled: function (e) {
                                        return e.disabled === !0
                                    },
                                    checked: function (e) {
                                        var t = e.nodeName.toLowerCase()
                                        return 'input' === t && !!e.checked || 'option' === t && !!e.selected
                                    },
                                    selected: function (e) {
                                        return e.parentNode && e.parentNode.selectedIndex,
                                        e.selected === !0
                                    },
                                    empty: function (e) {
                                        for (e = e.firstChild; e; e = e.nextSibling) {
                                            if (e.nodeType < 6) {
                                                return !1
                                            }
                                        }
                                        return !0
                                    },
                                    parent: function (e) {
                                        return !x.pseudos.empty(e)
                                    },
                                    header: function (e) {
                                        return me.test(e.nodeName)
                                    },
                                    input: function (e) {
                                        return he.test(e.nodeName)
                                    },
                                    button: function (e) {
                                        var t = e.nodeName.toLowerCase()
                                        return 'input' === t && 'button' === e.type || 'button' === t
                                    },
                                    text: function (e) {
                                        var t
                                        return 'input' === e.nodeName.toLowerCase() && 'text' === e.type && (null == (t = e.getAttribute('type')) || 'text' === t.toLowerCase())
                                    },
                                    first: s(function () {
                                        return [0]
                                    }),
                                    last: s(function (e, t) {
                                        return [t - 1]
                                    }),
                                    eq: s(function (e, t, n) {
                                        return [0 > n ? n + t : n]
                                    }),
                                    even: s(function (e, t) {
                                        for (var n = 0; t > n; n += 2) {
                                            e.push(n)
                                        }
                                        return e
                                    }),
                                    odd: s(function (e, t) {
                                        for (var n = 1; t > n; n += 2) {
                                            e.push(n)
                                        }
                                        return e
                                    }),
                                    lt: s(function (e, t, n) {
                                        for (var r = 0 > n ? n + t : n; --r >= 0;) {
                                            e.push(r)
                                        }
                                        return e
                                    }),
                                    gt: s(function (e, t, n) {
                                        for (var r = 0 > n ? n + t : n; ++r < t;) {
                                            e.push(r)
                                        }
                                        return e
                                    })
                                }
                            },
                            x.pseudos.nth = x.pseudos.eq
                        for (T in {
                            radio: !0,
                            checkbox: !0,
                            file: !0,
                            password: !0,
                            image: !0
                        }) {
                            x.pseudos[T] = a(T)
                        }
                        for (T in {
                            submit: !0,
                            reset: !0
                        }) {
                            x.pseudos[T] = c(T)
                        }
                        return f.prototype = x.filters = x.pseudos,
                            x.setFilters = new f,
                            S = t.tokenize = function (e, n) {
                                var r,
                                    o,
                                    i,
                                    u,
                                    a,
                                    c,
                                    s,
                                    l = V[e + ' ']
                                if (l) {
                                    return n ? 0 : l.slice(0)
                                }
                                for (a = e, c = [], s = x.preFilter; a;) {
                                    (!r || (o = ce.exec(a))) && (o && (a = a.slice(o[0].length) || a), c.push(i = [])),
                                        r = !1,
                                    (o = se.exec(a)) && (r = o.shift(), i.push({
                                        value: r,
                                        type: o[0].replace(ae, ' ')
                                    }), a = a.slice(r.length))
                                    for (u in x.filter) {
                                        !(o = pe[u].exec(a)) || s[u] && !(o = s[u](o)) || (r = o.shift(), i.push({
                                            value: r,
                                            type: u,
                                            matches: o
                                        }), a = a.slice(r.length))
                                    }
                                    if (!r) {
                                        break
                                    }
                                }
                                return n ? a.length : a ? t.error(e) : V(e, c).slice(0)
                            },
                            A = t.compile = function (e, t) {
                                var n,
                                    r = [],
                                    o = [],
                                    i = $[e + ' ']
                                if (!i) {
                                    for (t || (t = S(e)), n = t.length; n--;) {
                                        i = y(t[n]),
                                            i[H] ? r.push(i) : o.push(i)
                                    }
                                    i = $(e, b(o, r)),
                                        i.selector = e
                                }
                                return i
                            },
                            O = t.select = function (e, t, n, r) {
                                var o,
                                    i,
                                    u,
                                    a,
                                    c,
                                    s = 'function' == typeof e && e,
                                    f = !r && S(e = s.selector || e)
                                if (n = n || [], 1 === f.length) {
                                    if (i = f[0] = f[0].slice(0), i.length > 2 && 'ID' === (u = i[0]).type && E.getById && 9 === t.nodeType && L && x.relative[i[1].type]) {
                                        if (t = (x.find.ID(u.matches[0].replace(Te, Ee), t) || []) [0], !t) {
                                            return n
                                        }
                                        s && (t = t.parentNode),
                                            e = e.slice(i.shift().value.length)
                                    }
                                    for (o = pe.needsContext.test(e) ? 0 : i.length; o-- && (u = i[o], !x.relative[a = u.type]);) {
                                        if ((c = x.find[a]) && (r = c(u.matches[0].replace(Te, Ee), ye.test(i[0].type) && l(t.parentNode) || t))) {
                                            if (i.splice(o, 1), e = r.length && d(i), !e) {
                                                return Q.apply(n, r),
                                                    n
                                            }
                                            break
                                        }
                                    }
                                }
                                return (s || A(e, f))(r, t, !L, n, !t || ye.test(e) && l(t.parentNode) || t),
                                    n
                            },
                            E.sortStable = H.split('').sort(X).join('') === H,
                            E.detectDuplicates = !!D,
                            I(),
                            E.sortDetached = o(function (e) {
                                return 1 & e.compareDocumentPosition(k.createElement('div'))
                            }),
                        o(function (e) {
                            return e.innerHTML = '<a href=\'#\'></a>',
                            '#' === e.firstChild.getAttribute('href')
                        }) || i('type|href|height|width', function (e, t, n) {
                            return n ? void 0 : e.getAttribute(t, 'type' === t.toLowerCase() ? 1 : 2)
                        }),
                        E.attributes && o(function (e) {
                            return e.innerHTML = '<input/>',
                                e.firstChild.setAttribute('value', ''),
                            '' === e.firstChild.getAttribute('value')
                        }) || i('value', function (e, t, n) {
                            return n || 'input' !== e.nodeName.toLowerCase() ? void 0 : e.defaultValue
                        }),
                        o(function (e) {
                            return null == e.getAttribute('disabled')
                        }) || i(te, function (e, t, n) {
                            var r
                            return n ? void 0 : e[t] === !0 ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
                        }),
                            t
                    }(e),
                    bt.find = q,
                    bt.expr = q.selectors,
                    bt.expr[':'] = bt.expr.pseudos,
                    bt.uniqueSort = bt.unique = q.uniqueSort,
                    bt.text = q.getText,
                    bt.isXMLDoc = q.isXML,
                    bt.contains = q.contains,
                    B = bt.expr.match.needsContext,
                    U = /^.[^:#\[\.,]*$/,
                    bt.filter = function (e, t, n) {
                        var r = t[0]
                        return n && (e = ':not(' + e + ')'),
                            1 === t.length && 1 === r.nodeType ? bt.find.matchesSelector(r, e) ? [
                                r
                            ] : [] : bt.find.matches(e, bt.grep(t, function (e) {
                                return 1 === e.nodeType
                            }))
                    },
                    bt.fn.extend({
                        find: function (e) {
                            var t,
                                n = this.length,
                                r = [],
                                o = this
                            if ('string' != typeof e) {
                                return this.pushStack(bt(e).filter(function () {
                                    for (t = 0; n > t; t++) {
                                        if (bt.contains(o[t], this)) {
                                            return !0
                                        }
                                    }
                                }))
                            }
                            for (t = 0; n > t; t++) {
                                bt.find(e, o[t], r)
                            }
                            return r = this.pushStack(n > 1 ? bt.unique(r) : r),
                                r.selector = this.selector ? this.selector + ' ' + e : e,
                                r
                        },
                        filter: function (e) {
                            return this.pushStack(n(this, e || [], !1))
                        },
                        not: function (e) {
                            return this.pushStack(n(this, e || [], !0))
                        },
                        is: function (e) {
                            return !!n(this, 'string' == typeof e && B.test(e) ? bt(e) : e || [], !1).length
                        }
                    }),
                    V = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
                    $ = bt.fn.init = function (e, t, n) {
                        var r,
                            o
                        if (!e) {
                            return this
                        }
                        if (n = n || W, 'string' == typeof e) {
                            if (r = '<' === e[0] && '>' === e[e.length - 1] && e.length >= 3 ? [
                                null,
                                e,
                                null
                            ] : V.exec(e), !r || !r[1] && t) {
                                return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e)
                            }
                            if (r[1]) {
                                if (t = t instanceof bt ? t[0] : t, bt.merge(this, bt.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : st, !0)), H.test(r[1]) && bt.isPlainObject(t)) {
                                    for (r in t) {
                                        bt.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r])
                                    }
                                }
                                return this
                            }
                            return o = st.getElementById(r[2]),
                            o && o.parentNode && (this.length = 1, this[0] = o),
                                this.context = st,
                                this.selector = e,
                                this
                        }
                        return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : bt.isFunction(e) ? void 0 !== n.ready ? n.ready(e) : e(bt) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), bt.makeArray(e, this))
                    },
                    $.prototype = bt.fn,
                    W = bt(st),
                    X = /\S+/g,
                    Y = e.location,
                    z = bt.now(),
                    K = /\?/,
                    bt.parseJSON = function (e) {
                        return JSON.parse(e + '')
                    },
                    bt.parseXML = function (t) {
                        var n
                        if (!t || 'string' != typeof t) {
                            return null
                        }
                        try {
                            n = (new e.DOMParser).parseFromString(t, 'text/xml')
                        } catch (r) {
                            n = void 0
                        }
                        return (!n || n.getElementsByTagName('parsererror').length) && bt.error('Invalid XML: ' + t),
                            n
                    },
                    G = function (e) {
                        return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
                    },
                    r.uid = 1,
                    r.prototype = {
                        register: function (e, t) {
                            var n = t || {}
                            return e.nodeType ? e[this.expando] = n : Object.defineProperty(e, this.expando, {
                                value: n,
                                writable: !0,
                                configurable: !0
                            }),
                                e[this.expando]
                        },
                        cache: function (e) {
                            if (!G(e)) {
                                return {}
                            }
                            var t = e[this.expando]
                            return t || (t = {}, G(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                                value: t,
                                configurable: !0
                            }))),
                                t
                        },
                        set: function (e, t, n) {
                            var r,
                                o = this.cache(e)
                            if ('string' == typeof t) {
                                o[t] = n
                            } else {
                                for (r in t) {
                                    o[r] = t[r]
                                }
                            }
                            return o
                        },
                        get: function (e, t) {
                            return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][t]
                        },
                        access: function (e, t, n) {
                            var r
                            return void 0 === t || t && 'string' == typeof t && void 0 === n ? (r = this.get(e, t), void 0 !== r ? r : this.get(e, bt.camelCase(t))) : (this.set(e, t, n), void 0 !== n ? n : t)
                        },
                        remove: function (e, t) {
                            var n,
                                r,
                                o,
                                i = e[this.expando]
                            if (void 0 !== i) {
                                if (void 0 === t) {
                                    this.register(e)
                                } else {
                                    bt.isArray(t) ? r = t.concat(t.map(bt.camelCase)) : (o = bt.camelCase(t), t in i ? r = [
                                        t,
                                        o
                                    ] : (r = o, r = r in i ? [
                                        r
                                    ] : r.match(X) || [])),
                                        n = r.length
                                    for (; n--;) {
                                        delete i[r[n]]
                                    }
                                }
                                (void 0 === t || bt.isEmptyObject(i)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
                            }
                        },
                        hasData: function (e) {
                            var t = e[this.expando]
                            return void 0 !== t && !bt.isEmptyObject(t)
                        }
                    },
                    J = new r,
                    Q = /^key/,
                    Z = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
                    ee = /^([^.]*)(?:\.(.+)|)/,
                    bt.event = {
                        global: {},
                        add: function (e, t, n, r, o) {
                            var i,
                                u,
                                a,
                                c,
                                s,
                                l,
                                f,
                                d,
                                p,
                                h,
                                m,
                                g = J.get(e)
                            if (g) {
                                for (n.handler && (i = n, n = i.handler, o = i.selector), n.guid || (n.guid = bt.guid++), (c = g.events) || (c = g.events = {}), (u = g.handle) || (u = g.handle = function (t) {
                                    return void 0 !== bt && bt.event.triggered !== t.type ? bt.event.dispatch.apply(e, arguments) : void 0
                                }), t = (t || '').match(X) || [
                                    ''
                                ], s = t.length; s--;) {
                                    a = ee.exec(t[s]) || [],
                                        p = m = a[1],
                                        h = (a[2] || '').split('.').sort(),
                                    p && (f = bt.event.special[p] || {}, p = (o ? f.delegateType : f.bindType) || p, f = bt.event.special[p] || {}, l = bt.extend({
                                        type: p,
                                        origType: m,
                                        data: r,
                                        handler: n,
                                        guid: n.guid,
                                        selector: o,
                                        needsContext: o && bt.expr.match.needsContext.test(o),
                                        namespace: h.join('.')
                                    }, i), (d = c[p]) || (d = c[p] = [], d.delegateCount = 0, f.setup && f.setup.call(e, r, h, u) !== !1 || e.addEventListener && e.addEventListener(p, u)), f.add && (f.add.call(e, l), l.handler.guid || (l.handler.guid = n.guid)), o ? d.splice(d.delegateCount++, 0, l) : d.push(l), bt.event.global[p] = !0)
                                }
                            }
                        },
                        remove: function (e, t, n, r, o) {
                            var i,
                                u,
                                a,
                                c,
                                s,
                                l,
                                f,
                                d,
                                p,
                                h,
                                m,
                                g = J.hasData(e) && J.get(e)
                            if (g && (c = g.events)) {
                                for (t = (t || '').match(X) || [
                                    ''
                                ], s = t.length; s--;) {
                                    if (a = ee.exec(t[s]) || [], p = m = a[1], h = (a[2] || '').split('.').sort(), p) {
                                        for (f = bt.event.special[p] || {}, p = (r ? f.delegateType : f.bindType) || p, d = c[p] || [], a = a[2] && RegExp('(^|\\.)' + h.join('\\.(?:.*\\.|)') + '(\\.|$)'), u = i = d.length; i--;) {
                                            l = d[i],
                                            !o && m !== l.origType || n && n.guid !== l.guid || a && !a.test(l.namespace) || r && r !== l.selector && ('**' !== r || !l.selector) || (d.splice(i, 1), l.selector && d.delegateCount--, f.remove && f.remove.call(e, l))
                                        }
                                        u && !d.length && (f.teardown && f.teardown.call(e, h, g.handle) !== !1 || bt.removeEvent(e, p, g.handle), delete c[p])
                                    } else {
                                        for (p in c) {
                                            bt.event.remove(e, p + t[s], n, r, !0)
                                        }
                                    }
                                }
                                bt.isEmptyObject(c) && J.remove(e, 'handle events')
                            }
                        },
                        dispatch: function (e) {
                            e = bt.event.fix(e)
                            var t,
                                n,
                                r,
                                o,
                                i,
                                u = [],
                                a = lt.call(arguments),
                                c = (J.get(this, 'events') || {}) [e.type] || [],
                                s = bt.event.special[e.type] || {}
                            if (a[0] = e, e.delegateTarget = this, !s.preDispatch || s.preDispatch.call(this, e) !== !1) {
                                for (u = bt.event.handlers.call(this, e, c), t = 0; (o = u[t++]) && !e.isPropagationStopped();) {
                                    for (e.currentTarget = o.elem, n = 0; (i = o.handlers[n++]) && !e.isImmediatePropagationStopped();) {
                                        (!e.rnamespace || e.rnamespace.test(i.namespace)) && (e.handleObj = i, e.data = i.data, r = ((bt.event.special[i.origType] || {}).handle || i.handler).apply(o.elem, a), void 0 !== r && (e.result = r) === !1 && (e.preventDefault(), e.stopPropagation()))
                                    }
                                }
                                return s.postDispatch && s.postDispatch.call(this, e),
                                    e.result
                            }
                        },
                        handlers: function (e, t) {
                            var n,
                                r,
                                o,
                                i,
                                u = [],
                                a = t.delegateCount,
                                c = e.target
                            if (a && c.nodeType && ('click' !== e.type || isNaN(e.button) || e.button < 1)) {
                                for (; c !== this; c = c.parentNode || this) {
                                    if (1 === c.nodeType && (c.disabled !== !0 || 'click' !== e.type)) {
                                        for (r = [], n = 0; a > n; n++) {
                                            i = t[n],
                                                o = i.selector + ' ',
                                            void 0 === r[o] && (r[o] = i.needsContext ? bt(o, this).index(c) > -1 : bt.find(o, this, null, [
                                                c
                                            ]).length),
                                            r[o] && r.push(i)
                                        }
                                        r.length && u.push({
                                            elem: c,
                                            handlers: r
                                        })
                                    }
                                }
                            }
                            return a < t.length && u.push({
                                elem: this,
                                handlers: t.slice(a)
                            }),
                                u
                        },
                        props: 'altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which'.split(' '),
                        fixHooks: {},
                        keyHooks: {
                            props: 'char charCode key keyCode'.split(' '),
                            filter: function (e, t) {
                                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode),
                                    e
                            }
                        },
                        mouseHooks: {
                            props: 'button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement'.split(' '),
                            filter: function (e, t) {
                                var n,
                                    r,
                                    o,
                                    i = t.button
                                return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || st, r = n.documentElement, o = n.body, e.pageX = t.clientX + (r && r.scrollLeft || o && o.scrollLeft || 0) - (r && r.clientLeft || o && o.clientLeft || 0), e.pageY = t.clientY + (r && r.scrollTop || o && o.scrollTop || 0) - (r && r.clientTop || o && o.clientTop || 0)),
                                e.which || void 0 === i || (e.which = 1 & i ? 1 : 2 & i ? 3 : 4 & i ? 2 : 0),
                                    e
                            }
                        },
                        fix: function (e) {
                            if (e[bt.expando]) {
                                return e
                            }
                            var t,
                                n,
                                r,
                                o = e.type,
                                i = e,
                                u = this.fixHooks[o]
                            for (u || (this.fixHooks[o] = u = Z.test(o) ? this.mouseHooks : Q.test(o) ? this.keyHooks : {}), r = u.props ? this.props.concat(u.props) : this.props, e = new bt.Event(i), t = r.length; t--;) {
                                n = r[t],
                                    e[n] = i[n]
                            }
                            return e.target || (e.target = st),
                            3 === e.target.nodeType && (e.target = e.target.parentNode),
                                u.filter ? u.filter(e, i) : e
                        },
                        special: {
                            load: {
                                noBubble: !0
                            },
                            focus: {
                                trigger: function () {
                                    return this !== u() && this.focus ? (this.focus(), !1) : void 0
                                },
                                delegateType: 'focusin'
                            },
                            blur: {
                                trigger: function () {
                                    return this === u() && this.blur ? (this.blur(), !1) : void 0
                                },
                                delegateType: 'focusout'
                            },
                            click: {
                                trigger: function () {
                                    return 'checkbox' === this.type && this.click && bt.nodeName(this, 'input') ? (this.click(), !1) : void 0
                                },
                                _default: function (e) {
                                    return bt.nodeName(e.target, 'a')
                                }
                            },
                            beforeunload: {
                                postDispatch: function (e) {
                                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                                }
                            }
                        }
                    },
                    bt.removeEvent = function (e, t, n) {
                        e.removeEventListener && e.removeEventListener(t, n)
                    },
                    bt.Event = function (e, t) {
                        return this instanceof bt.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && e.returnValue === !1 ? o : i) : this.type = e, t && bt.extend(this, t), this.timeStamp = e && e.timeStamp || bt.now(), void (this[bt.expando] = !0)) : new bt.Event(e, t)
                    },
                    bt.Event.prototype = {
                        constructor: bt.Event,
                        isDefaultPrevented: i,
                        isPropagationStopped: i,
                        isImmediatePropagationStopped: i,
                        preventDefault: function () {
                            var e = this.originalEvent
                            this.isDefaultPrevented = o,
                            e && e.preventDefault()
                        },
                        stopPropagation: function () {
                            var e = this.originalEvent
                            this.isPropagationStopped = o,
                            e && e.stopPropagation()
                        },
                        stopImmediatePropagation: function () {
                            var e = this.originalEvent
                            this.isImmediatePropagationStopped = o,
                            e && e.stopImmediatePropagation(),
                                this.stopPropagation()
                        }
                    },
                    bt.each({
                        mouseenter: 'mouseover',
                        mouseleave: 'mouseout',
                        pointerenter: 'pointerover',
                        pointerleave: 'pointerout'
                    }, function (e, t) {
                        bt.event.special[e] = {
                            delegateType: t,
                            bindType: t,
                            handle: function (e) {
                                var n,
                                    r = this,
                                    o = e.relatedTarget,
                                    i = e.handleObj
                                return (!o || o !== r && !bt.contains(r, o)) && (e.type = i.origType, n = i.handler.apply(this, arguments), e.type = t),
                                    n
                            }
                        }
                    }),
                    bt.fn.extend({
                        on: function (e, t, n, r) {
                            return a(this, e, t, n, r)
                        },
                        one: function (e, t, n, r) {
                            return a(this, e, t, n, r, 1)
                        },
                        off: function (e, t, n) {
                            var r,
                                o
                            if (e && e.preventDefault && e.handleObj) {
                                return r = e.handleObj,
                                    bt(e.delegateTarget).off(r.namespace ? r.origType + '.' + r.namespace : r.origType, r.selector, r.handler),
                                    this
                            }
                            if ('object' == typeof e) {
                                for (o in e) {
                                    this.off(o, t, e[o])
                                }
                                return this
                            }
                            return (t === !1 || 'function' == typeof t) && (n = t, t = void 0),
                            n === !1 && (n = i),
                                this.each(function () {
                                    bt.event.remove(this, e, n, t)
                                })
                        }
                    }),
                    te = /^(?:focusinfocus|focusoutblur)$/,
                    bt.extend(bt.event, {
                        trigger: function (t, n, r, o) {
                            var i,
                                u,
                                a,
                                c,
                                s,
                                l,
                                f,
                                d = [
                                    r || st
                                ],
                                p = gt.call(t, 'type') ? t.type : t,
                                h = gt.call(t, 'namespace') ? t.namespace.split('.') : []
                            if (u = a = r = r || st, 3 !== r.nodeType && 8 !== r.nodeType && !te.test(p + bt.event.triggered) && (p.indexOf('.') > -1 && (h = p.split('.'), p = h.shift(), h.sort()), s = p.indexOf(':') < 0 && 'on' + p, t = t[bt.expando] ? t : new bt.Event(p, 'object' == typeof t && t), t.isTrigger = o ? 2 : 3, t.namespace = h.join('.'), t.rnamespace = t.namespace ? RegExp('(^|\\.)' + h.join('\\.(?:.*\\.|)') + '(\\.|$)') : null, t.result = void 0, t.target || (t.target = r), n = null == n ? [
                                t
                            ] : bt.makeArray(n, [
                                t
                            ]), f = bt.event.special[p] || {}, o || !f.trigger || f.trigger.apply(r, n) !== !1)) {
                                if (!o && !f.noBubble && !bt.isWindow(r)) {
                                    for (c = f.delegateType || p, te.test(c + p) || (u = u.parentNode); u; u = u.parentNode) {
                                        d.push(u),
                                            a = u
                                    }
                                    a === (r.ownerDocument || st) && d.push(a.defaultView || a.parentWindow || e)
                                }
                                for (i = 0; (u = d[i++]) && !t.isPropagationStopped();) {
                                    t.type = i > 1 ? c : f.bindType || p,
                                        l = (J.get(u, 'events') || {}) [t.type] && J.get(u, 'handle'),
                                    l && l.apply(u, n),
                                        l = s && u[s],
                                    l && l.apply && G(u) && (t.result = l.apply(u, n), t.result === !1 && t.preventDefault())
                                }
                                return t.type = p,
                                o || t.isDefaultPrevented() || f._default && f._default.apply(d.pop(), n) !== !1 || !G(r) || s && bt.isFunction(r[p]) && !bt.isWindow(r) && (a = r[s], a && (r[s] = null), bt.event.triggered = p, r[p](), bt.event.triggered = void 0, a && (r[s] = a)),
                                    t.result
                            }
                        },
                        simulate: function (e, t, n) {
                            var r = bt.extend(new bt.Event, n, {
                                type: e,
                                isSimulated: !0
                            })
                            bt.event.trigger(r, null, t),
                            r.isDefaultPrevented() && n.preventDefault()
                        }
                    }),
                    bt.fn.extend({
                        trigger: function (e, t) {
                            return this.each(function () {
                                bt.event.trigger(e, t, this)
                            })
                        },
                        triggerHandler: function (e, t) {
                            var n = this[0]
                            return n ? bt.event.trigger(e, t, n, !0) : void 0
                        }
                    }),
                    bt.Callbacks = function (e) {
                        e = 'string' == typeof e ? c(e) : bt.extend({}, e)
                        var t,
                            n,
                            r,
                            o,
                            i = [],
                            u = [],
                            a = -1,
                            s = function () {
                                for (o = e.once, r = t = !0; u.length; a = -1) {
                                    for (n = u.shift(); ++a < i.length;) {
                                        i[a].apply(n[0], n[1]) === !1 && e.stopOnFalse && (a = i.length, n = !1)
                                    }
                                }
                                e.memory || (n = !1),
                                    t = !1,
                                o && (i = n ? [] : '')
                            },
                            l = {
                                add: function () {
                                    return i && (n && !t && (a = i.length - 1, u.push(n)), function r(t) {
                                        bt.each(t, function (t, n) {
                                            bt.isFunction(n) ? e.unique && l.has(n) || i.push(n) : n && n.length && 'string' !== bt.type(n) && r(n)
                                        })
                                    }(arguments), n && !t && s()),
                                        this
                                },
                                remove: function () {
                                    return bt.each(arguments, function (e, t) {
                                        for (var n; (n = bt.inArray(t, i, n)) > -1;) {
                                            i.splice(n, 1),
                                            a >= n && a--
                                        }
                                    }),
                                        this
                                },
                                has: function (e) {
                                    return e ? bt.inArray(e, i) > -1 : i.length > 0
                                },
                                empty: function () {
                                    return i && (i = []),
                                        this
                                },
                                disable: function () {
                                    return o = u = [],
                                        i = n = '',
                                        this
                                },
                                disabled: function () {
                                    return !i
                                },
                                lock: function () {
                                    return o = u = [],
                                    n || (i = n = ''),
                                        this
                                },
                                locked: function () {
                                    return !!o
                                },
                                fireWith: function (e, n) {
                                    return o || (n = n || [], n = [
                                        e,
                                        n.slice ? n.slice() : n
                                    ], u.push(n), t || s()),
                                        this
                                },
                                fire: function () {
                                    return l.fireWith(this, arguments),
                                        this
                                },
                                fired: function () {
                                    return !!r
                                }
                            }
                        return l
                    },
                    bt.extend({
                        Deferred: function (e) {
                            var t = [
                                    ['resolve',
                                        'done',
                                        bt.Callbacks('once memory'),
                                        'resolved'],
                                    [
                                        'reject',
                                        'fail',
                                        bt.Callbacks('once memory'),
                                        'rejected'
                                    ],
                                    [
                                        'notify',
                                        'progress',
                                        bt.Callbacks('memory')
                                    ]
                                ],
                                n = 'pending',
                                r = {
                                    state: function () {
                                        return n
                                    },
                                    always: function () {
                                        return o.done(arguments).fail(arguments),
                                            this
                                    },
                                    then: function () {
                                        var e = arguments
                                        return bt.Deferred(function (n) {
                                            bt.each(t, function (t, i) {
                                                var u = bt.isFunction(e[t]) && e[t]
                                                o[i[1]](function () {
                                                    var e = u && u.apply(this, arguments)
                                                    e && bt.isFunction(e.promise) ? e.promise().progress(n.notify).done(n.resolve).fail(n.reject) : n[i[0] + 'With'](this === r ? n.promise() : this, u ? [
                                                        e
                                                    ] : arguments)
                                                })
                                            }),
                                                e = null
                                        }).promise()
                                    },
                                    promise: function (e) {
                                        return null != e ? bt.extend(e, r) : r
                                    }
                                },
                                o = {}
                            return r.pipe = r.then,
                                bt.each(t, function (e, i) {
                                    var u = i[2],
                                        a = i[3]
                                    r[i[1]] = u.add,
                                    a && u.add(function () {
                                        n = a
                                    }, t[1 ^ e][2].disable, t[2][2].lock),
                                        o[i[0]] = function () {
                                            return o[i[0] + 'With'](this === o ? r : this, arguments),
                                                this
                                        },
                                        o[i[0] + 'With'] = u.fireWith
                                }),
                                r.promise(o),
                            e && e.call(o, o),
                                o
                        },
                        when: function (e) {
                            var t,
                                n,
                                r,
                                o = 0,
                                i = lt.call(arguments),
                                u = i.length,
                                a = 1 !== u || e && bt.isFunction(e.promise) ? u : 0,
                                c = 1 === a ? e : bt.Deferred(),
                                s = function (e, n, r) {
                                    return function (o) {
                                        n[e] = this,
                                            r[e] = arguments.length > 1 ? lt.call(arguments) : o,
                                            r === t ? c.notifyWith(n, r) : --a || c.resolveWith(n, r)
                                    }
                                }
                            if (u > 1) {
                                for (t = Array(u), n = Array(u), r = Array(u); u > o; o++) {
                                    i[o] && bt.isFunction(i[o].promise) ? i[o].promise().progress(s(o, n, t)).done(s(o, r, i)).fail(c.reject) : --a
                                }
                            }
                            return a || c.resolveWith(r, i),
                                c.promise()
                        }
                    }),
                    ne = /#.*$/,
                    re = /([?&])_=[^&]*/,
                    oe = /^(.*?):[ \t]*([^\r\n]*)$/gm,
                    ie = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
                    ue = /^(?:GET|HEAD)$/,
                    ae = /^\/\//,
                    ce = {},
                    se = {},
                    le = '*/'.concat('*'),
                    fe = st.createElement('a'),
                    fe.href = Y.href,
                    bt.extend({
                        active: 0,
                        lastModified: {},
                        etag: {},
                        ajaxSettings: {
                            url: Y.href,
                            type: 'GET',
                            isLocal: ie.test(Y.protocol),
                            global: !0,
                            processData: !0,
                            async: !0,
                            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                            accepts: {
                                '*': le,
                                text: 'text/plain',
                                html: 'text/html',
                                xml: 'application/xml, text/xml',
                                json: 'application/json, text/javascript'
                            },
                            contents: {
                                xml: /\bxml\b/,
                                html: /\bhtml/,
                                json: /\bjson\b/
                            },
                            responseFields: {
                                xml: 'responseXML',
                                text: 'responseText',
                                json: 'responseJSON'
                            },
                            converters: {
                                '* text': String,
                                'text html': !0,
                                'text json': bt.parseJSON,
                                'text xml': bt.parseXML
                            },
                            flatOptions: {
                                url: !0,
                                context: !0
                            }
                        },
                        ajaxSetup: function (e, t) {
                            return t ? f(f(e, bt.ajaxSettings), t) : f(bt.ajaxSettings, e)
                        },
                        ajaxPrefilter: s(ce),
                        ajaxTransport: s(se),
                        ajax: function (t, n) {
                            function r(t, n, r, a) {
                                var s,
                                    l,
                                    h,
                                    E,
                                    x,
                                    N = n
                                2 !== C && (C = 2, c && e.clearTimeout(c), o = void 0, u = a || '', S.readyState = t > 0 ? 4 : 0, s = t >= 200 && 300 > t || 304 === t, r && (E = d(m, S, r)), E = p(m, E, S, s), s ? (m.ifModified && (x = S.getResponseHeader('Last-Modified'), x && (bt.lastModified[i] = x), x = S.getResponseHeader('etag'), x && (bt.etag[i] = x)), 204 === t || 'HEAD' === m.type ? N = 'nocontent' : 304 === t ? N = 'notmodified' : (N = E.state, l = E.data, h = E.error, s = !h)) : (h = N, (t || !N) && (N = 'error', 0 > t && (t = 0))), S.status = t, S.statusText = (n || N) + '', s ? y.resolveWith(g, [
                                    l,
                                    N,
                                    S
                                ]) : y.rejectWith(g, [
                                    S,
                                    N,
                                    h
                                ]), S.statusCode(T), T = void 0, f && v.trigger(s ? 'ajaxSuccess' : 'ajaxError', [
                                    S,
                                    m,
                                    s ? l : h
                                ]), b.fireWith(g, [
                                    S,
                                    N
                                ]), f && (v.trigger('ajaxComplete', [
                                    S,
                                    m
                                ]), --bt.active || bt.event.trigger('ajaxStop')))
                            }

                            'object' == typeof t && (n = t, t = void 0),
                                n = n || {}
                            var o,
                                i,
                                u,
                                a,
                                c,
                                s,
                                f,
                                h,
                                m = bt.ajaxSetup({}, n),
                                g = m.context || m,
                                v = m.context && (g.nodeType || g.jquery) ? bt(g) : bt.event,
                                y = bt.Deferred(),
                                b = bt.Callbacks('once memory'),
                                T = m.statusCode || {},
                                E = {},
                                x = {},
                                C = 0,
                                N = 'canceled',
                                S = {
                                    readyState: 0,
                                    getResponseHeader: function (e) {
                                        var t
                                        if (2 === C) {
                                            if (!a) {
                                                for (a = {}; t = oe.exec(u);) {
                                                    a[t[1].toLowerCase()] = t[2]
                                                }
                                            }
                                            t = a[e.toLowerCase()]
                                        }
                                        return null == t ? null : t
                                    },
                                    getAllResponseHeaders: function () {
                                        return 2 === C ? u : null
                                    },
                                    setRequestHeader: function (e, t) {
                                        var n = e.toLowerCase()
                                        return C || (e = x[n] = x[n] || e, E[e] = t),
                                            this
                                    },
                                    overrideMimeType: function (e) {
                                        return C || (m.mimeType = e),
                                            this
                                    },
                                    statusCode: function (e) {
                                        var t
                                        if (e) {
                                            if (2 > C) {
                                                for (t in e) {
                                                    T[t] = [
                                                        T[t],
                                                        e[t]
                                                    ]
                                                }
                                            } else {
                                                S.always(e[S.status])
                                            }
                                        }
                                        return this
                                    },
                                    abort: function (e) {
                                        var t = e || N
                                        return o && o.abort(t),
                                            r(0, t),
                                            this
                                    }
                                }
                            if (y.promise(S).complete = b.add, S.success = S.done, S.error = S.fail, m.url = ((t || m.url || Y.href) + '').replace(ne, '').replace(ae, Y.protocol + '//'), m.type = n.method || n.type || m.method || m.type, m.dataTypes = bt.trim(m.dataType || '*').toLowerCase().match(X) || [
                                ''
                            ], null == m.crossDomain) {
                                s = st.createElement('a')
                                try {
                                    s.href = m.url,
                                        s.href = s.href,
                                        m.crossDomain = fe.protocol + '//' + fe.host != s.protocol + '//' + s.host
                                } catch (A) {
                                    m.crossDomain = !0
                                }
                            }
                            if (m.data && m.processData && 'string' != typeof m.data && (m.data = bt.param(m.data, m.traditional)), l(ce, m, n, S), 2 === C) {
                                return S
                            }
                            f = bt.event && m.global,
                            f && 0 === bt.active++ && bt.event.trigger('ajaxStart'),
                                m.type = m.type.toUpperCase(),
                                m.hasContent = !ue.test(m.type),
                                i = m.url,
                            m.hasContent || (m.data && (i = m.url += (K.test(i) ? '&' : '?') + m.data, delete m.data), m.cache === !1 && (m.url = re.test(i) ? i.replace(re, '$1_=' + z++) : i + (K.test(i) ? '&' : '?') + '_=' + z++)),
                            m.ifModified && (bt.lastModified[i] && S.setRequestHeader('If-Modified-Since', bt.lastModified[i]), bt.etag[i] && S.setRequestHeader('If-None-Match', bt.etag[i])),
                            (m.data && m.hasContent && m.contentType !== !1 || n.contentType) && S.setRequestHeader('Content-Type', m.contentType),
                                S.setRequestHeader('Accept', m.dataTypes[0] && m.accepts[m.dataTypes[0]] ? m.accepts[m.dataTypes[0]] + ('*' !== m.dataTypes[0] ? ', ' + le + '; q=0.01' : '') : m.accepts['*'])
                            for (h in m.headers) {
                                S.setRequestHeader(h, m.headers[h])
                            }
                            if (m.beforeSend && (m.beforeSend.call(g, S, m) === !1 || 2 === C)) {
                                return S.abort()
                            }
                            N = 'abort'
                            for (h in {
                                success: 1,
                                error: 1,
                                complete: 1
                            }) {
                                S[h](m[h])
                            }
                            if (o = l(se, m, n, S)) {
                                if (S.readyState = 1, f && v.trigger('ajaxSend', [
                                    S,
                                    m
                                ]), 2 === C) {
                                    return S
                                }
                                m.async && m.timeout > 0 && (c = e.setTimeout(function () {
                                    S.abort('timeout')
                                }, m.timeout))
                                try {
                                    C = 1,
                                        o.send(E, r)
                                } catch (A) {
                                    if (!(2 > C)) {
                                        throw A
                                    }
                                    r(-1, A)
                                }
                            } else {
                                r(-1, 'No Transport')
                            }
                            return S
                        },
                        getJSON: function (e, t, n) {
                            return bt.get(e, t, n, 'json')
                        },
                        getScript: function (e, t) {
                            return bt.get(e, void 0, t, 'script')
                        }
                    }),
                    bt.each(['get',
                        'post'], function (e, t) {
                        bt[t] = function (e, n, r, o) {
                            return bt.isFunction(n) && (o = o || r, r = n, n = void 0),
                                bt.ajax(bt.extend({
                                    url: e,
                                    type: t,
                                    dataType: o,
                                    data: n,
                                    success: r
                                }, bt.isPlainObject(e) && e))
                        }
                    }),
                    de = [],
                    pe = /(=)\?(?=&|$)|\?\?/,
                    bt.ajaxSetup({
                        jsonp: 'callback',
                        jsonpCallback: function () {
                            var e = de.pop() || bt.expando + '_' + z++
                            return this[e] = !0,
                                e
                        }
                    }),
                    bt.ajaxPrefilter('json jsonp', function (t, n, r) {
                        var o,
                            i,
                            u,
                            a = t.jsonp !== !1 && (pe.test(t.url) ? 'url' : 'string' == typeof t.data && 0 === (t.contentType || '').indexOf('application/x-www-form-urlencoded') && pe.test(t.data) && 'data')
                        return a || 'jsonp' === t.dataTypes[0] ? (o = t.jsonpCallback = bt.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, a ? t[a] = t[a].replace(pe, '$1' + o) : t.jsonp !== !1 && (t.url += (K.test(t.url) ? '&' : '?') + t.jsonp + '=' + o), t.converters['script json'] = function () {
                            return u || bt.error(o + ' was not called'),
                                u[0]
                        }, t.dataTypes[0] = 'json', i = e[o], e[o] = function () {
                            u = arguments
                        }, r.always(function () {
                            void 0 === i ? bt(e).removeProp(o) : e[o] = i,
                            t[o] && (t.jsonpCallback = n.jsonpCallback, de.push(o)),
                            u && bt.isFunction(i) && i(u[0]),
                                u = i = void 0
                        }), 'script') : void 0
                    }),
                    bt.ajaxSetup({
                        accepts: {
                            script: 'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'
                        },
                        contents: {
                            script: /\b(?:java|ecma)script\b/
                        },
                        converters: {
                            'text script': function (e) {
                                return bt.globalEval(e),
                                    e
                            }
                        }
                    }),
                    bt.ajaxPrefilter('script', function (e) {
                        void 0 === e.cache && (e.cache = !1),
                        e.crossDomain && (e.type = 'GET')
                    }),
                    bt.ajaxTransport('script', function (e) {
                        if (e.crossDomain) {
                            var t,
                                n
                            return {
                                send: function (r, o) {
                                    t = bt('<script>').prop({
                                        charset: e.scriptCharset,
                                        src: e.url
                                    }).on('load error', n = function (e) {
                                        t.remove(),
                                            n = null,
                                        e && o('error' === e.type ? 404 : 200, e.type)
                                    }),
                                        st.head.appendChild(t[0])
                                },
                                abort: function () {
                                    n && n()
                                }
                            }
                        }
                    }),
                    bt.ajaxSettings.xhr = function () {
                        try {
                            return new e.XMLHttpRequest
                        } catch (t) {
                        }
                    },
                    he = {
                        0: 200,
                        1223: 204
                    },
                    me = bt.ajaxSettings.xhr(),
                    vt.cors = !!me && 'withCredentials' in me,
                    vt.ajax = me = !!me,
                    bt.ajaxTransport(function (t) {
                        var n,
                            r
                        return vt.cors || me && !t.crossDomain ? {
                                send: function (o, i) {
                                    var u,
                                        a = t.xhr()
                                    if (a.open(t.type, t.url, t.async, t.username, t.password), t.xhrFields) {
                                        for (u in t.xhrFields) {
                                            a[u] = t.xhrFields[u]
                                        }
                                    }
                                    t.mimeType && a.overrideMimeType && a.overrideMimeType(t.mimeType),
                                    t.crossDomain || o['X-Requested-With'] || (o['X-Requested-With'] = 'XMLHttpRequest')
                                    for (u in o) {
                                        a.setRequestHeader(u, o[u])
                                    }
                                    n = function (e) {
                                        return function () {
                                            n && (n = r = a.onload = a.onerror = a.onabort = a.onreadystatechange = null, 'abort' === e ? a.abort() : 'error' === e ? 'number' != typeof a.status ? i(0, 'error') : i(a.status, a.statusText) : i(he[a.status] || a.status, a.statusText, 'text' !== (a.responseType || 'text') || 'string' != typeof a.responseText ? {
                                                    binary: a.response
                                                }
                                                : {
                                                    text: a.responseText
                                                }, a.getAllResponseHeaders()))
                                        }
                                    },
                                        a.onload = n(),
                                        r = a.onerror = n('error'),
                                        void 0 !== a.onabort ? a.onabort = r : a.onreadystatechange = function () {
                                            4 === a.readyState && e.setTimeout(function () {
                                                n && r()
                                            })
                                        },
                                        n = n('abort')
                                    try {
                                        a.send(t.hasContent && t.data || null)
                                    } catch (c) {
                                        if (n) {
                                            throw c
                                        }
                                    }
                                },
                                abort: function () {
                                    n && n()
                                }
                            }
                            : void 0
                    }),
                    ge = function St(e, t, n, r, o, i, u) {
                        var a = 0,
                            c = e.length,
                            s = null == n
                        if ('object' === bt.type(n)) {
                            o = !0
                            for (a in n) {
                                St(e, t, a, n[a], !0, i, u)
                            }
                        } else {
                            if (void 0 !== r && (o = !0, bt.isFunction(r) || (u = !0), s && (u ? (t.call(e, r), t = null) : (s = t, t = function (e, t, n) {
                                return s.call(bt(e), n)
                            })), t)) {
                                for (; c > a; a++) {
                                    t(e[a], n, u ? r : r.call(e[a], a, t(e[a], n)))
                                }
                            }
                        }
                        return o ? e : s ? t.call(e) : c ? t(e[0], n) : i
                    },
                    ve = /^(?:checkbox|radio)$/i,
                    ye = /<([\w:-]+)/,
                    be = /^$|\/(?:java|ecma)script/i,
                    Te = {
                        option: [
                            1,
                            '<select multiple=\'multiple\'>',
                            '</select>'
                        ],
                        thead: [
                            1,
                            '<table>',
                            '</table>'
                        ],
                        col: [
                            2,
                            '<table><colgroup>',
                            '</colgroup></table>'
                        ],
                        tr: [
                            2,
                            '<table><tbody>',
                            '</tbody></table>'
                        ],
                        td: [
                            3,
                            '<table><tbody><tr>',
                            '</tr></tbody></table>'
                        ],
                        _default: [
                            0,
                            '',
                            ''
                        ]
                    },
                    Te.optgroup = Te.option,
                    Te.tbody = Te.tfoot = Te.colgroup = Te.caption = Te.thead,
                    Te.th = Te.td,
                    Ee = /<|&#?\w+;/,
                    function () {
                        var e = st.createDocumentFragment(),
                            t = e.appendChild(st.createElement('div')),
                            n = st.createElement('input')
                        n.setAttribute('type', 'radio'),
                            n.setAttribute('checked', 'checked'),
                            n.setAttribute('name', 't'),
                            t.appendChild(n),
                            vt.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked,
                            t.innerHTML = '<textarea>x</textarea>',
                            vt.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue
                    }(),
                    xe = new r,
                    Ce = function (e, t, n) {
                        for (var r = [], o = void 0 !== n; (e = e[t]) && 9 !== e.nodeType;) {
                            if (1 === e.nodeType) {
                                if (o && bt(e).is(n)) {
                                    break
                                }
                                r.push(e)
                            }
                        }
                        return r
                    },
                    Ne = function (e, t) {
                        for (var n = []; e; e = e.nextSibling) {
                            1 === e.nodeType && e !== t && n.push(e)
                        }
                        return n
                    },
                    Se = /^(?:parents|prev(?:Until|All))/,
                    Ae = {
                        children: !0,
                        contents: !0,
                        next: !0,
                        prev: !0
                    },
                    bt.fn.extend({
                        has: function (e) {
                            var t = bt(e, this),
                                n = t.length
                            return this.filter(function () {
                                for (var e = 0; n > e; e++) {
                                    if (bt.contains(this, t[e])) {
                                        return !0
                                    }
                                }
                            })
                        },
                        closest: function (e, t) {
                            for (var n, r = 0, o = this.length, i = [], u = B.test(e) || 'string' != typeof e ? bt(e, t || this.context) : 0; o > r; r++) {
                                for (n = this[r]; n && n !== t; n = n.parentNode) {
                                    if (n.nodeType < 11 && (u ? u.index(n) > -1 : 1 === n.nodeType && bt.find.matchesSelector(n, e))) {
                                        i.push(n)
                                        break
                                    }
                                }
                            }
                            return this.pushStack(i.length > 1 ? bt.uniqueSort(i) : i)
                        },
                        index: function (e) {
                            return e ? 'string' == typeof e ? pt.call(bt(e), this[0]) : pt.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
                        },
                        add: function (e, t) {
                            return this.pushStack(bt.uniqueSort(bt.merge(this.get(), bt(e, t))))
                        },
                        addBack: function (e) {
                            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
                        }
                    }),
                    bt.each({
                        parent: function At(e) {
                            var At = e.parentNode
                            return At && 11 !== At.nodeType ? At : null
                        },
                        parents: function (e) {
                            return Ce(e, 'parentNode')
                        },
                        parentsUntil: function (e, t, n) {
                            return Ce(e, 'parentNode', n)
                        },
                        next: function (e) {
                            return v(e, 'nextSibling')
                        },
                        prev: function (e) {
                            return v(e, 'previousSibling')
                        },
                        nextAll: function (e) {
                            return Ce(e, 'nextSibling')
                        },
                        prevAll: function (e) {
                            return Ce(e, 'previousSibling')
                        },
                        nextUntil: function (e, t, n) {
                            return Ce(e, 'nextSibling', n)
                        },
                        prevUntil: function (e, t, n) {
                            return Ce(e, 'previousSibling', n)
                        },
                        siblings: function (e) {
                            return Ne((e.parentNode || {}).firstChild, e)
                        },
                        children: function (e) {
                            return Ne(e.firstChild)
                        },
                        contents: function (e) {
                            return e.contentDocument || bt.merge([], e.childNodes)
                        }
                    }, function (e, t) {
                        bt.fn[e] = function (n, r) {
                            var o = bt.map(this, t, n)
                            return 'Until' !== e.slice(-5) && (r = n),
                            r && 'string' == typeof r && (o = bt.filter(r, o)),
                            this.length > 1 && (Ae[e] || bt.uniqueSort(o), Se.test(e) && o.reverse()),
                                this.pushStack(o)
                        }
                    }),
                    Oe = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
                    we = /<script|<style|<link/i,
                    Re = /checked\s*(?:[^=]|=\s*.checked.)/i,
                    De = /^true\/(.*)/,
                    Ie = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
                    bt.extend({
                        htmlPrefilter: function (e) {
                            return e.replace(Oe, '<$1></$2>')
                        },
                        clone: function Ot(e, t, n) {
                            var r,
                                o,
                                i,
                                u,
                                Ot = e.cloneNode(!0),
                                a = bt.contains(e.ownerDocument, e)
                            if (!(vt.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || bt.isXMLDoc(e))) {
                                for (u = h(Ot), i = h(e), r = 0, o = i.length; o > r; r++) {
                                    x(i[r], u[r])
                                }
                            }
                            if (t) {
                                if (n) {
                                    for (i = i || h(e), u = u || h(Ot), r = 0, o = i.length; o > r; r++) {
                                        E(i[r], u[r])
                                    }
                                } else {
                                    E(e, Ot)
                                }
                            }
                            return u = h(Ot, 'script'),
                            u.length > 0 && m(u, !a && h(e, 'script')),
                                Ot
                        },
                        cleanData: function (e) {
                            for (var t, n, r, o = bt.event.special, i = 0; void 0 !== (n = e[i]); i++) {
                                if (G(n)) {
                                    if (t = n[J.expando]) {
                                        if (t.events) {
                                            for (r in t.events) {
                                                o[r] ? bt.event.remove(n, r) : bt.removeEvent(n, r, t.handle)
                                            }
                                        }
                                        n[J.expando] = void 0
                                    }
                                    n[xe.expando] && (n[xe.expando] = void 0)
                                }
                            }
                        }
                    }),
                    bt.fn.extend({
                        domManip: C,
                        detach: function (e) {
                            return N(this, e, !0)
                        },
                        remove: function (e) {
                            return N(this, e)
                        },
                        text: function (e) {
                            return ge(this, function (e) {
                                return void 0 === e ? bt.text(this) : this.empty().each(function () {
                                    (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = e)
                                })
                            }, null, e, arguments.length)
                        },
                        append: function () {
                            return C(this, arguments, function (e) {
                                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                                    var t = y(this, e)
                                    t.appendChild(e)
                                }
                            })
                        },
                        prepend: function () {
                            return C(this, arguments, function (e) {
                                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                                    var t = y(this, e)
                                    t.insertBefore(e, t.firstChild)
                                }
                            })
                        },
                        before: function () {
                            return C(this, arguments, function (e) {
                                this.parentNode && this.parentNode.insertBefore(e, this)
                            })
                        },
                        after: function () {
                            return C(this, arguments, function (e) {
                                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                            })
                        },
                        empty: function () {
                            for (var e, t = 0; null != (e = this[t]); t++) {
                                1 === e.nodeType && (bt.cleanData(h(e, !1)), e.textContent = '')
                            }
                            return this
                        },
                        clone: function (e, t) {
                            return e = null == e ? !1 : e,
                                t = null == t ? e : t,
                                this.map(function () {
                                    return bt.clone(this, e, t)
                                })
                        },
                        html: function (e) {
                            return ge(this, function (e) {
                                var t = this[0] || {},
                                    n = 0,
                                    r = this.length
                                if (void 0 === e && 1 === t.nodeType) {
                                    return t.innerHTML
                                }
                                if ('string' == typeof e && !we.test(e) && !Te[(ye.exec(e) || [
                                    '',
                                    ''
                                ]) [1].toLowerCase()]) {
                                    e = bt.htmlPrefilter(e)
                                    try {
                                        for (; r > n; n++) {
                                            t = this[n] || {},
                                            1 === t.nodeType && (bt.cleanData(h(t, !1)), t.innerHTML = e)
                                        }
                                        t = 0
                                    } catch (o) {
                                    }
                                }
                                t && this.empty().append(e)
                            }, null, e, arguments.length)
                        },
                        replaceWith: function () {
                            var e = []
                            return C(this, arguments, function (t) {
                                var n = this.parentNode
                                bt.inArray(this, e) < 0 && (bt.cleanData(h(this)), n && n.replaceChild(t, this))
                            }, e)
                        }
                    }),
                    bt.each({
                        appendTo: 'append',
                        prependTo: 'prepend',
                        insertBefore: 'before',
                        insertAfter: 'after',
                        replaceAll: 'replaceWith'
                    }, function (e, t) {
                        bt.fn[e] = function (e) {
                            for (var n, r = [], o = bt(e), i = o.length - 1, u = 0; i >= u; u++) {
                                n = u === i ? this : this.clone(!0),
                                    bt(o[u]) [t](n),
                                    dt.apply(r, n.get())
                            }
                            return this.pushStack(r)
                        }
                    }),
                    bt.parseHTML = function (e, t, n) {
                        if (!e || 'string' != typeof e) {
                            return null
                        }
                        'boolean' == typeof t && (n = t, t = !1),
                            t = t || st
                        var r = H.exec(e),
                            o = !n && []
                        return r ? [
                            t.createElement(r[1])
                        ] : (r = g([e], t, o), o && o.length && bt(o).remove(), bt.merge([], r.childNodes))
                    },
                    ke = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
                    Pe = /[A-Z]/g,
                    bt.extend({
                        hasData: function (e) {
                            return xe.hasData(e) || J.hasData(e)
                        },
                        data: function (e, t, n) {
                            return xe.access(e, t, n)
                        },
                        removeData: function (e, t) {
                            xe.remove(e, t)
                        },
                        _data: function (e, t, n) {
                            return J.access(e, t, n)
                        },
                        _removeData: function (e, t) {
                            J.remove(e, t)
                        }
                    }),
                    bt.fn.extend({
                        data: function wt(e, t) {
                            var n,
                                r,
                                wt,
                                o = this[0],
                                i = o && o.attributes
                            if (void 0 === e) {
                                if (this.length && (wt = xe.get(o), 1 === o.nodeType && !J.get(o, 'hasDataAttrs'))) {
                                    for (n = i.length; n--;) {
                                        i[n] && (r = i[n].name, 0 === r.indexOf('data-') && (r = bt.camelCase(r.slice(5)), S(o, r, wt[r])))
                                    }
                                    J.set(o, 'hasDataAttrs', !0)
                                }
                                return wt
                            }
                            return 'object' == typeof e ? this.each(function () {
                                xe.set(this, e)
                            }) : ge(this, function (t) {
                                var n,
                                    r
                                if (o && void 0 === t) {
                                    if (n = xe.get(o, e) || xe.get(o, e.replace(Pe, '-$&').toLowerCase()), void 0 !== n) {
                                        return n
                                    }
                                    if (r = bt.camelCase(e), n = xe.get(o, r), void 0 !== n) {
                                        return n
                                    }
                                    if (n = S(o, r, void 0), void 0 !== n) {
                                        return n
                                    }
                                } else {
                                    r = bt.camelCase(e),
                                        this.each(function () {
                                            var n = xe.get(this, r)
                                            xe.set(this, r, t),
                                            e.indexOf('-') > -1 && void 0 !== n && xe.set(this, e, t)
                                        })
                                }
                            }, null, t, arguments.length > 1, null, !0)
                        },
                        removeData: function (e) {
                            return this.each(function () {
                                xe.remove(this, e)
                            })
                        }
                    }),
                    Le = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
                    _e = /^margin/,
                    je = RegExp('^(?:([+-])=|)(' + Le + ')([a-z%]*)$', 'i'),
                    Me = RegExp('^(' + Le + ')(?!px)[a-z%]+$', 'i'),
                    Fe = [
                        'Top',
                        'Right',
                        'Bottom',
                        'Left'
                    ],
                    He = function (e, t) {
                        return e = t || e,
                        'none' === bt.css(e, 'display') || !bt.contains(e.ownerDocument, e)
                    },
                    qe = function (t) {
                        var n = t.ownerDocument.defaultView
                        return n && n.opener || (n = e),
                            n.getComputedStyle(t)
                    },
                    Be = function (e, t, n, r) {
                        var o,
                            i,
                            u = {}
                        for (i in t) {
                            u[i] = e.style[i],
                                e.style[i] = t[i]
                        }
                        o = n.apply(e, r || [])
                        for (i in t) {
                            e.style[i] = u[i]
                        }
                        return o
                    },
                    Ue = st.documentElement,
                    function () {
                        function t() {
                            a.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%',
                                a.innerHTML = '',
                                Ue.appendChild(u)
                            var t = e.getComputedStyle(a)
                            n = '1%' !== t.top,
                                i = '2px' === t.marginLeft,
                                r = '4px' === t.width,
                                a.style.marginRight = '50%',
                                o = '4px' === t.marginRight,
                                Ue.removeChild(u)
                        }

                        var n,
                            r,
                            o,
                            i,
                            u = st.createElement('div'),
                            a = st.createElement('div')
                        a.style && (a.style.backgroundClip = 'content-box', a.cloneNode(!0).style.backgroundClip = '', vt.clearCloneStyle = 'content-box' === a.style.backgroundClip, u.style.cssText = 'border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute', u.appendChild(a), bt.extend(vt, {
                            pixelPosition: function () {
                                return t(),
                                    n
                            },
                            boxSizingReliable: function () {
                                return null == r && t(),
                                    r
                            },
                            pixelMarginRight: function () {
                                return null == r && t(),
                                    o
                            },
                            reliableMarginLeft: function () {
                                return null == r && t(),
                                    i
                            },
                            reliableMarginRight: function () {
                                var t,
                                    n = a.appendChild(st.createElement('div'))
                                return n.style.cssText = a.style.cssText = '-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0',
                                    n.style.marginRight = n.style.width = '0',
                                    a.style.width = '1px',
                                    Ue.appendChild(u),
                                    t = !parseFloat(e.getComputedStyle(n).marginRight),
                                    Ue.removeChild(u),
                                    a.removeChild(n),
                                    t
                            }
                        }))
                    }(),
                    Ve = {
                        HTML: 'block',
                        BODY: 'block'
                    },
                    bt.fn.ready = function (e) {
                        return bt.ready.promise().done(e),
                            this
                    },
                    bt.extend({
                        isReady: !1,
                        readyWait: 1,
                        holdReady: function (e) {
                            e ? bt.readyWait++ : bt.ready(!0)
                        },
                        ready: function (e) {
                            (e === !0 ? --bt.readyWait : bt.isReady) || (bt.isReady = !0, e !== !0 && --bt.readyWait > 0 || ($e.resolveWith(st, [
                                bt
                            ]), bt.fn.triggerHandler && (bt(st).triggerHandler('ready'), bt(st).off('ready'))))
                        }
                    }),
                    bt.ready.promise = function (t) {
                        return $e || ($e = bt.Deferred(), 'complete' === st.readyState || 'loading' !== st.readyState && !st.documentElement.doScroll ? e.setTimeout(bt.ready) : (st.addEventListener('DOMContentLoaded', I), e.addEventListener('load', I))),
                            $e.promise(t)
                    },
                    bt.ready.promise(),
                    Xe = /^(none|table(?!-c[ea]).+)/,
                    Ye = {
                        position: 'absolute',
                        visibility: 'hidden',
                        display: 'block'
                    },
                    ze = {
                        letterSpacing: '0',
                        fontWeight: '400'
                    },
                    Ke = [
                        'Webkit',
                        'O',
                        'Moz',
                        'ms'
                    ],
                    Ge = st.createElement('div').style,
                    bt.extend({
                        cssHooks: {
                            opacity: {
                                get: function (e, t) {
                                    if (t) {
                                        var n = A(e, 'opacity')
                                        return '' === n ? '1' : n
                                    }
                                }
                            }
                        },
                        cssNumber: {
                            animationIterationCount: !0,
                            columnCount: !0,
                            fillOpacity: !0,
                            flexGrow: !0,
                            flexShrink: !0,
                            fontWeight: !0,
                            lineHeight: !0,
                            opacity: !0,
                            order: !0,
                            orphans: !0,
                            widows: !0,
                            zIndex: !0,
                            zoom: !0
                        },
                        cssProps: {
                            'float': 'cssFloat'
                        },
                        style: function Rt(e, t, n, r) {
                            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                                var o,
                                    i,
                                    u,
                                    a = bt.camelCase(t),
                                    Rt = e.style
                                return t = bt.cssProps[a] || (bt.cssProps[a] = k(a) || a),
                                    u = bt.cssHooks[t] || bt.cssHooks[a],
                                    void 0 === n ? u && 'get' in u && void 0 !== (o = u.get(e, !1, r)) ? o : Rt[t] : (i = typeof n, 'string' === i && (o = je.exec(n)) && o[1] && (n = O(e, t, o), i = 'number'), null != n && n === n && ('number' === i && (n += o && o[3] || (bt.cssNumber[a] ? '' : 'px')), vt.clearCloneStyle || '' !== n || 0 !== t.indexOf('background') || (Rt[t] = 'inherit'), u && 'set' in u && void 0 === (n = u.set(e, n, r)) || (Rt[t] = n)), void 0)
                            }
                        },
                        css: function (e, t, n, r) {
                            var o,
                                i,
                                u,
                                a = bt.camelCase(t)
                            return t = bt.cssProps[a] || (bt.cssProps[a] = k(a) || a),
                                u = bt.cssHooks[t] || bt.cssHooks[a],
                            u && 'get' in u && (o = u.get(e, !0, n)),
                            void 0 === o && (o = A(e, t, r)),
                            'normal' === o && t in ze && (o = ze[t]),
                                '' === n || n ? (i = parseFloat(o), n === !0 || isFinite(i) ? i || 0 : o) : o
                        }
                    }),
                    bt.each(['height',
                        'width'], function (e, t) {
                        bt.cssHooks[t] = {
                            get: function (e, n, r) {
                                return n ? Xe.test(bt.css(e, 'display')) && 0 === e.offsetWidth ? Be(e, Ye, function () {
                                    return _(e, t, r)
                                }) : _(e, t, r) : void 0
                            },
                            set: function (e, n, r) {
                                var o,
                                    i = r && qe(e),
                                    u = r && L(e, t, r, 'border-box' === bt.css(e, 'boxSizing', !1, i), i)
                                return u && (o = je.exec(n)) && 'px' !== (o[3] || 'px') && (e.style[t] = n, n = bt.css(e, t)),
                                    P(e, n, u)
                            }
                        }
                    }),
                    bt.cssHooks.marginLeft = D(vt.reliableMarginLeft, function (e, t) {
                        return t ? (parseFloat(A(e, 'marginLeft')) || e.getBoundingClientRect().left - Be(e, {
                            marginLeft: 0
                        }, function () {
                            return e.getBoundingClientRect().left
                        })) + 'px' : void 0
                    }),
                    bt.cssHooks.marginRight = D(vt.reliableMarginRight, function (e, t) {
                        return t ? Be(e, {
                            display: 'inline-block'
                        }, A, [
                            e,
                            'marginRight'
                        ]) : void 0
                    }),
                    bt.each({
                        margin: '',
                        padding: '',
                        border: 'Width'
                    }, function (e, t) {
                        bt.cssHooks[e + t] = {
                            expand: function (n) {
                                for (var r = 0, o = {}, i = 'string' == typeof n ? n.split(' ') : [
                                    n
                                ]; 4 > r; r++) {
                                    o[e + Fe[r] + t] = i[r] || i[r - 2] || i[0]
                                }
                                return o
                            }
                        },
                        _e.test(e) || (bt.cssHooks[e + t].set = P)
                    }),
                    bt.fn.extend({
                        css: function (e, t) {
                            return ge(this, function (e, t, n) {
                                var r,
                                    o,
                                    i = {},
                                    u = 0
                                if (bt.isArray(t)) {
                                    for (r = qe(e), o = t.length; o > u; u++) {
                                        i[t[u]] = bt.css(e, t[u], !1, r)
                                    }
                                    return i
                                }
                                return void 0 !== n ? bt.style(e, t, n) : bt.css(e, t)
                            }, e, t, arguments.length > 1)
                        },
                        show: function () {
                            return j(this, !0)
                        },
                        hide: function () {
                            return j(this)
                        },
                        toggle: function (e) {
                            return 'boolean' == typeof e ? e ? this.show() : this.hide() : this.each(function () {
                                He(this) ? bt(this).show() : bt(this).hide()
                            })
                        }
                    }),
                    function () {
                        var e = st.createElement('input'),
                            t = st.createElement('select'),
                            n = t.appendChild(st.createElement('option'))
                        e.type = 'checkbox',
                            vt.checkOn = '' !== e.value,
                            vt.optSelected = n.selected,
                            t.disabled = !0,
                            vt.optDisabled = !n.disabled,
                            e = st.createElement('input'),
                            e.value = 't',
                            e.type = 'radio',
                            vt.radioValue = 't' === e.value
                    }(),
                    Qe = bt.expr.attrHandle,
                    bt.fn.extend({
                        attr: function (e, t) {
                            return ge(this, bt.attr, e, t, arguments.length > 1)
                        },
                        removeAttr: function (e) {
                            return this.each(function () {
                                bt.removeAttr(this, e)
                            })
                        }
                    }),
                    bt.extend({
                        attr: function (e, t, n) {
                            var r,
                                o,
                                i = e.nodeType
                            if (3 !== i && 8 !== i && 2 !== i) {
                                return void 0 === e.getAttribute ? bt.prop(e, t, n) : (1 === i && bt.isXMLDoc(e) || (t = t.toLowerCase(), o = bt.attrHooks[t] || (bt.expr.match.bool.test(t) ? Je : void 0)), void 0 !== n ? null === n ? void bt.removeAttr(e, t) : o && 'set' in o && void 0 !== (r = o.set(e, n, t)) ? r : (e.setAttribute(t, n + ''), n) : o && 'get' in o && null !== (r = o.get(e, t)) ? r : (r = bt.find.attr(e, t), null == r ? void 0 : r))
                            }
                        },
                        attrHooks: {
                            type: {
                                set: function (e, t) {
                                    if (!vt.radioValue && 'radio' === t && bt.nodeName(e, 'input')) {
                                        var n = e.value
                                        return e.setAttribute('type', t),
                                        n && (e.value = n),
                                            t
                                    }
                                }
                            }
                        },
                        removeAttr: function (e, t) {
                            var n,
                                r,
                                o = 0,
                                i = t && t.match(X)
                            if (i && 1 === e.nodeType) {
                                for (; n = i[o++];) {
                                    r = bt.propFix[n] || n,
                                    bt.expr.match.bool.test(n) && (e[r] = !1),
                                        e.removeAttribute(n)
                                }
                            }
                        }
                    }),
                    Je = {
                        set: function (e, t, n) {
                            return t === !1 ? bt.removeAttr(e, n) : e.setAttribute(n, n),
                                n
                        }
                    },
                    bt.each(bt.expr.match.bool.source.match(/\w+/g), function (e, t) {
                        var n = Qe[t] || bt.find.attr
                        Qe[t] = function (e, t, r) {
                            var o,
                                i
                            return r || (i = Qe[t], Qe[t] = o, o = null != n(e, t, r) ? t.toLowerCase() : null, Qe[t] = i),
                                o
                        }
                    }),
                    Ze = /^(?:input|select|textarea|button)$/i,
                    et = /^(?:a|area)$/i,
                    bt.fn.extend({
                        prop: function (e, t) {
                            return ge(this, bt.prop, e, t, arguments.length > 1)
                        },
                        removeProp: function (e) {
                            return this.each(function () {
                                delete this[bt.propFix[e] || e]
                            })
                        }
                    }),
                    bt.extend({
                        prop: function (e, t, n) {
                            var r,
                                o,
                                i = e.nodeType
                            if (3 !== i && 8 !== i && 2 !== i) {
                                return 1 === i && bt.isXMLDoc(e) || (t = bt.propFix[t] || t, o = bt.propHooks[t]),
                                    void 0 !== n ? o && 'set' in o && void 0 !== (r = o.set(e, n, t)) ? r : e[t] = n : o && 'get' in o && null !== (r = o.get(e, t)) ? r : e[t]
                            }
                        },
                        propHooks: {
                            tabIndex: {
                                get: function (e) {
                                    var t = bt.find.attr(e, 'tabindex')
                                    return t ? parseInt(t, 10) : Ze.test(e.nodeName) || et.test(e.nodeName) && e.href ? 0 : -1
                                }
                            }
                        },
                        propFix: {
                            'for': 'htmlFor',
                            'class': 'className'
                        }
                    }),
                    vt.optSelected || (bt.propHooks.selected = {
                        get: function (e) {
                            var t = e.parentNode
                            return t && t.parentNode && t.parentNode.selectedIndex,
                                null
                        },
                        set: function (e) {
                            var t = e.parentNode
                            t && (t.selectedIndex, t && t.parentNode && t.parentNode.selectedIndex)
                        }
                    }),
                    bt.each(['tabIndex',
                        'readOnly',
                        'maxLength',
                        'cellSpacing',
                        'cellPadding',
                        'rowSpan',
                        'colSpan',
                        'useMap',
                        'frameBorder',
                        'contentEditable'], function () {
                        bt.propFix[this.toLowerCase()] = this
                    }),
                    tt = /[\t\r\n\f]/g,
                    bt.fn.extend({
                        addClass: function (e) {
                            var t,
                                n,
                                r,
                                o,
                                i,
                                u,
                                a,
                                c = 0
                            if (bt.isFunction(e)) {
                                return this.each(function (t) {
                                    bt(this).addClass(e.call(this, t, M(this)))
                                })
                            }
                            if ('string' == typeof e && e) {
                                for (t = e.match(X) || []; n = this[c++];) {
                                    if (o = M(n), r = 1 === n.nodeType && (' ' + o + ' ').replace(tt, ' ')) {
                                        for (u = 0; i = t[u++];) {
                                            r.indexOf(' ' + i + ' ') < 0 && (r += i + ' ')
                                        }
                                        a = bt.trim(r),
                                        o !== a && n.setAttribute('class', a)
                                    }
                                }
                            }
                            return this
                        },
                        removeClass: function (e) {
                            var t,
                                n,
                                r,
                                o,
                                i,
                                u,
                                a,
                                c = 0
                            if (bt.isFunction(e)) {
                                return this.each(function (t) {
                                    bt(this).removeClass(e.call(this, t, M(this)))
                                })
                            }
                            if (!arguments.length) {
                                return this.attr('class', '')
                            }
                            if ('string' == typeof e && e) {
                                for (t = e.match(X) || []; n = this[c++];) {
                                    if (o = M(n), r = 1 === n.nodeType && (' ' + o + ' ').replace(tt, ' ')) {
                                        for (u = 0; i = t[u++];) {
                                            for (; r.indexOf(' ' + i + ' ') > -1;) {
                                                r = r.replace(' ' + i + ' ', ' ')
                                            }
                                        }
                                        a = bt.trim(r),
                                        o !== a && n.setAttribute('class', a)
                                    }
                                }
                            }
                            return this
                        },
                        toggleClass: function (e, t) {
                            var n = typeof e
                            return 'boolean' == typeof t && 'string' === n ? t ? this.addClass(e) : this.removeClass(e) : bt.isFunction(e) ? this.each(function (n) {
                                bt(this).toggleClass(e.call(this, n, M(this), t), t)
                            }) : this.each(function () {
                                var t,
                                    r,
                                    o,
                                    i
                                if ('string' === n) {
                                    for (r = 0, o = bt(this), i = e.match(X) || []; t = i[r++];) {
                                        o.hasClass(t) ? o.removeClass(t) : o.addClass(t)
                                    }
                                } else {
                                    (void 0 === e || 'boolean' === n) && (t = M(this), t && J.set(this, '__className__', t), this.setAttribute && this.setAttribute('class', t || e === !1 ? '' : J.get(this, '__className__') || ''))
                                }
                            })
                        },
                        hasClass: function (e) {
                            var t,
                                n,
                                r = 0
                            for (t = ' ' + e + ' '; n = this[r++];) {
                                if (1 === n.nodeType && (' ' + M(n) + ' ').replace(tt, ' ').indexOf(t) > -1) {
                                    return !0
                                }
                            }
                            return !1
                        }
                    }),
                    nt = /\r/g,
                    bt.fn.extend({
                        val: function (e) {
                            var t,
                                n,
                                r,
                                o = this[0]
                            if (arguments.length) {
                                return r = bt.isFunction(e),
                                    this.each(function (n) {
                                        var o
                                        1 === this.nodeType && (o = r ? e.call(this, n, bt(this).val()) : e, null == o ? o = '' : 'number' == typeof o ? o += '' : bt.isArray(o) && (o = bt.map(o, function (e) {
                                            return null == e ? '' : e + ''
                                        })), t = bt.valHooks[this.type] || bt.valHooks[this.nodeName.toLowerCase()], t && 'set' in t && void 0 !== t.set(this, o, 'value') || (this.value = o))
                                    })
                            }
                            if (o) {
                                return t = bt.valHooks[o.type] || bt.valHooks[o.nodeName.toLowerCase()],
                                    t && 'get' in t && void 0 !== (n = t.get(o, 'value')) ? n : (n = o.value, 'string' == typeof n ? n.replace(nt, '') : null == n ? '' : n)
                            }
                        }
                    }),
                    bt.extend({
                        valHooks: {
                            option: {
                                get: function (e) {
                                    return bt.trim(e.value)
                                }
                            },
                            select: {
                                get: function (e) {
                                    for (var t, n, r = e.options, o = e.selectedIndex, i = 'select-one' === e.type || 0 > o, u = i ? null : [], a = i ? o + 1 : r.length, c = 0 > o ? a : i ? o : 0; a > c; c++) {
                                        if (n = r[c], (n.selected || c === o) && (vt.optDisabled ? !n.disabled : null === n.getAttribute('disabled')) && (!n.parentNode.disabled || !bt.nodeName(n.parentNode, 'optgroup'))) {
                                            if (t = bt(n).val(), i) {
                                                return t
                                            }
                                            u.push(t)
                                        }
                                    }
                                    return u
                                },
                                set: function (e, t) {
                                    for (var n, r, o = e.options, i = bt.makeArray(t), u = o.length; u--;) {
                                        r = o[u],
                                        (r.selected = bt.inArray(bt.valHooks.option.get(r), i) > -1) && (n = !0)
                                    }
                                    return n || (e.selectedIndex = -1),
                                        i
                                }
                            }
                        }
                    }),
                    bt.each(['radio',
                        'checkbox'], function () {
                        bt.valHooks[this] = {
                            set: function (e, t) {
                                return bt.isArray(t) ? e.checked = bt.inArray(bt(e).val(), t) > -1 : void 0
                            }
                        },
                        vt.checkOn || (bt.valHooks[this].get = function (e) {
                            return null === e.getAttribute('value') ? 'on' : e.value
                        })
                    }),
                    rt = /%20/g,
                    ot = /\[\]$/,
                    it = /\r?\n/g,
                    ut = /^(?:submit|button|image|reset|file)$/i,
                    at = /^(?:input|select|textarea|keygen)/i,
                    bt.param = function (e, t) {
                        var n,
                            r = [],
                            o = function (e, t) {
                                t = bt.isFunction(t) ? t() : null == t ? '' : t,
                                    r[r.length] = encodeURIComponent(e) + '=' + encodeURIComponent(t)
                            }
                        if (void 0 === t && (t = bt.ajaxSettings && bt.ajaxSettings.traditional), bt.isArray(e) || e.jquery && !bt.isPlainObject(e)) {
                            bt.each(e, function () {
                                o(this.name, this.value)
                            })
                        } else {
                            for (n in e) {
                                F(n, e[n], t, o)
                            }
                        }
                        return r.join('&').replace(rt, '+')
                    },
                    bt.fn.extend({
                        serialize: function () {
                            return bt.param(this.serializeArray())
                        },
                        serializeArray: function () {
                            return this.map(function () {
                                var e = bt.prop(this, 'elements')
                                return e ? bt.makeArray(e) : this
                            }).filter(function () {
                                var e = this.type
                                return this.name && !bt(this).is(':disabled') && at.test(this.nodeName) && !ut.test(e) && (this.checked || !ve.test(e))
                            }).map(function (e, t) {
                                var n = bt(this).val()
                                return null == n ? null : bt.isArray(n) ? bt.map(n, function (e) {
                                    return {
                                        name: t.name,
                                        value: e.replace(it, '\r\n')
                                    }
                                }) : {
                                    name: t.name,
                                    value: n.replace(it, '\r\n')
                                }
                            }).get()
                        }
                    }),
                    bt
            })
        n(Pa),
            r(Pa),
            Zr = 60000,
            eo = 'mbox-name-',
            to = 'mboxDefault',
            no = '/m2/{clientCode}/mbox/json',
            ro = 250,
            oo = 'Mbox name is not present or is too long.',
            io = 'the mbox environment is disabled.',
            uo = '-clicked',
            ao = 'x-only',
            co = 'disabled',
            so = 'mboxedge',
            lo = 'Content container not found',
            fo = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
            po = /(?:^|&)([^&=]*)=?([^&]*)/gi,
            ho = [
                'source',
                'protocol',
                'authority',
                'userInfo',
                'user',
                'password',
                'host',
                'port',
                'relative',
                'path',
                'directory',
                'file',
                'query',
                'anchor'
            ],
            mo = 'at-data-src',
            go = 'at-script-marker',
            vo = 'at-id-body-style',
            yo = 'at-flicker-control',
            bo = 'at-id-default-content-style',
            To = 'redirect:event',
            Eo = 'show:body',
            xo = 'script',
            Co = function (e, t) {
                return pe(e).find(t)
            },
            No = 'mboxMCAVID',
            So = 'mboxAAMB',
            Ao = 'mboxMCGLH',
            Oo = 'mboxMCGVID',
            wo = 'mboxMCSDID',
            Ro = 'colorDepth',
            Do = 'screenHeight',
            Io = 'screenWidth',
            ko = 'browserHeight',
            Po = 'browserTimeOffset',
            Lo = 'browserWidth',
            _o = 'mboxCallback',
            jo = 'mboxTarget',
            Mo = 'clickTrackId',
            Fo = 'mboxXDomain',
            Ho = 'mboxCount',
            qo = 'mboxHost',
            Bo = 'mbox',
            Uo = 'mboxPage',
            Wo = 'mboxSession',
            Vo = 'mboxReferrer',
            $o = 'mboxTime',
            Xo = 'mboxPC',
            Yo = 'mboxURL',
            zo = 'mboxVersion',
            Ko = function () {
            },
            Go = '//cdn.tt.omtrdc.net/cdn/target-vec.js',
            Jo = 'success',
            Qo = 'warning',
            Zo = 'error',
            ei = 'optout',
            ti = !1,
            ni = !0,
            ri = 'mboxDebug',
            oi = 'mboxDisable',
            ii = 'mboxEdit',
            ui = '[Target]',
            ai = 'check',
            ci = 'mbox',
            si = 'PC',
            li = 'session',
            fi = 'mboxEdgeServer',
            di = 'mboxDisabled',
            pi = RegExp('(\'|")'),
            hi = 'Visitor Api:',
            mi = 'vst.',
            gi = mi + 'trk',
            vi = mi + 'trks',
            yi = 'Options argument is required',
            bi = {
                MBOX_PARAM_VALIDATOR: Et('mbox', St, oo),
                OPTIONS_IS_REQUIRED: xt(B, yi),
                URL_PARAM_IS_MANDATORY: Et('url', k, Ct('url')),
                SUCCESS_PARAM_IS_MANDATORY: Et('success', F, Ct('success')),
                ERROR_PARAM_IS_MANDATORY: Et('error', F, Ct('error')),
                MBOX_OPTION_PARAM_VALIDATOR: Et('mbox', St, oo)
            },
            Ti = 'executeAjax():',
            Ei = Ti + ' jsonp param requires type param to be jsonp',
            xi = Ti + ' unknown method "{0}"',
            Ci = Ti + ' unknown type "{0}"',
            Ni = Ti + ' timeout param is not a number',
            Si = Ti + ' invalid method "{0}" for request type "{1}"',
            Ai = Ti + ' invalid params, should be object',
            Oi = 'mbox',
            wi = 'type',
            Ri = 'method',
            Di = 'jsonp',
            Ii = 'params',
            ki = 'timeout',
            Pi = [
                bi.OPTIONS_IS_REQUIRED,
                bi.URL_PARAM_IS_MANDATORY
            ],
            Li = {
                JSON: 'json',
                JSONP: 'jsonp',
                SCRIPT: 'script'
            },
            _i = {
                GET: 'get',
                POST: 'post'
            },
            ji = {
                valid: function (e) {
                    var t = e[wi]
                    return j(Li[t.toUpperCase()]) ? _e(Ci.replace('{0}', t)) : Me()
                }
            },
            Mi = {
                valid: function (e) {
                    var t = e[Ri],
                        n = e[wi]
                    return k(t) ? j(_i[t.toUpperCase()]) ? _e(xi.replace('{0}', t)) : t.toUpperCase() !== _i.GET && n !== Li.JSON ? _e(Si.replace('{0}', t).replace('{1}', n)) : Me() : Me()
                }
            },
            Fi = {
                valid: function (e) {
                    return k(e[Di]) && e[wi] !== Li.JSONP ? _e(Ei) : Me()
                }
            },
            Hi = {
                valid: function (e) {
                    var t = e[ki]
                    return j(t) || _(t) ? Me() : _e(Ni)
                }
            },
            qi = {
                valid: function (e) {
                    var t = e[Ii]
                    return B(t) || j(t) ? Me() : B(t) ? void 0 : _e(Ai)
                }
            },
            Bi = [
                ji,
                Mi,
                Fi,
                Hi,
                qi
            ],
            Ui = 'Visitor ID opt-out enabled',
            Wi = 'Track Event:',
            Vi = 'Invalid element: expect object with href attribute.',
        $i = 'Invalid initialization. Cannot access document.location.',
        Xi = 'DEFINED-BEHAVIOR-BUILDER:',
        Yi = 'cannot preventDefault. Unsupported event: "{0}" for "{1}" element.',
        zi = 'undefined element type or event type.',
        Ki = 'cannot preventDefault. Unsupported tag: "{0}".',
        Gi = {},
        Ji = {},
        Qi = 'fetch()',
        Zi = 'script',
        eu = 'img',
        tu = {
            SET_CONTENT: 'setContent',
            SET_ATTRIBUTE: 'setAttribute',
            SET_STYLE: 'setStyle',
            REARRANGE: 'rearrange',
            RESIZE: 'resize',
            MOVE: 'move',
            REMOVE: 'remove',
            CUSTOM_CODE: 'customCode',
            APPEND_CONTENT: 'appendContent',
            REDIRECT: 'redirect',
            TRACK_CLICK: 'trackClick',
            INSERT_BEFORE: 'insertBefore',
            INSERT_AFTER: 'insertAfter',
            PREPEND_CONTENT: 'prependContent',
            REPLACE_CONTENT: 'replaceContent'
        },
        nu = {
            ACTION: 'action',
            ATTRIBUTE: 'attribute',
            ASSET: 'asset',
            CLICK_TRACK_ID: 'clickTrackId',
            CONTENT: 'content',
            CONTENT_TYPE: 'contentType',
            INCLUDE_ALL_URL_PARAMETERS: 'includeAllUrlParameters',
            FINAL_HEIGHT: 'finalHeight',
            FINAL_LEFT_POSITION: 'finalLeftPosition',
            FINAL_TOP_POSITION: 'finalTopPosition',
            FINAL_WIDTH: 'finalWidth',
            FROM: 'from',
            PASS_MBOX_SESSION: 'passMboxSession',
            POSITION: 'position',
            PRIORITY: 'priority',
            PROPERTY: 'property',
            SELECTOR: 'selector',
            CSS_SELECTOR: 'cssSelector',
            TO: 'to',
            URL: 'url',
            VALUE: 'value'
        },
        ru = {
            IMPORTANT: 'important'
        },
        ou = {
            HTML: 'html',
            TEXT: 'text'
        },
        iu = 'script,style,link',
        uu = 'click',
        au = 'a',
        cu = 'at-request-succeeded',
        su = 'at-request-failed',
        lu = 'at-content-rendering-succeeded',
        fu = 'at-content-rendering-failed',
        du = /CLKTRK#(\S+)/,
        pu = /CLKTRK#(\S+)\s/,
        hu = 50,
        mu = 'applied:',
        gu = 'polling:end',
        vu = 'target',
        yu = 'traces',
        bu = '___' + vu + '_' + yu,
        Tu = 86400,
        Eu = '3rd party cookies disabled',
        xu = 'applyOffer():',
        Cu = 'Either element or selector is redundant',
        Nu = 'offer parameter is mandatory',
        Su = [
            bi.OPTIONS_IS_REQUIRED,
            Et('offer', M, Nu),
            xt(Ar, Cu)
        ],
        Au = [
            bi.OPTIONS_IS_REQUIRED,
            bi.MBOX_OPTION_PARAM_VALIDATOR
        ],
        Ou = 'getOffer():',
        wu = [
            bi.OPTIONS_IS_REQUIRED,
            bi.MBOX_OPTION_PARAM_VALIDATOR
        ],
        Ru = 'Track Event:',
        Du = [
            bi.MBOX_PARAM_VALIDATOR
        ],
        Iu = 'Classic:',
        ku = 'DOM node ID not provided for mbox:',
        Pu = 'Unable to load target-vec.js for experience creation.',
        Lu = 'ext',
        _u = RegExp('^[a-zA-Z]+$'),
        ju = [
            bi.SUCCESS_PARAM_IS_MANDATORY,
            bi.ERROR_PARAM_IS_MANDATORY
        ],
        Mu = 'getOffer():',
        Fu = 'success callback throws error',
        Hu = 'error callback throws error',
        qu = [
            Oi,
            ki,
            Ii
        ],
        t(e),
        Bu = window,
        Uu = Bu.document,
        Wu = we(Bu),
        Vu = Wu.generateId(),
        $u = ke(Ie(Bu, Uu), Uu, Vu),
        Xu = Be(Bu, Uu, Wu),
        Yu = Je(Uu),
        zu = et(Yu),
        Ku = ot(Uu, Yu, Wu),
        Gu = dt(Uu, $u, Ku, zu, Wu),
        Ju = vt(Uu, Wu),
        Qu = yt(Bu, Uu, Yu, Wu, Ku, zu),
        Zu = bt(),
        ea = Tt(Bu, Xu),
        ta = At(Wu, Xu),
        na = wt(Ot(Qu, Gu, ta), ea),
        ra = Rt(na, Wu, Xu),
        oa = _t(Uu, Xu),
        ia = jt(Wu, Xu),
        ua = Xt(ia),
        aa = zt(Xu),
        ca = Jt(ra, Kt(Xu), oa),
        sa = rn(ua, aa, ca, Qu),
        la = un(aa, ca),
        fa = cn(sa),
        da = ln(Wu),
        pa = Jt(ra, fn(), oa),
        ha = Ut(ia, Wu, pa, Xu),
        ma = Fn(Bu, Ku),
        ga = Hn(ma),
        va = qn(Bu),
        ya = Bn(ha, Xu, Qu),
        ba = Un(ya, Qu, va, Wu, Xu),
        Ta = Xn(aa, ga, ha, ya, Wu, Xu, Qu, ba),
        Ea = [
            da,
            Ta,
            fa,
            la
        ],
        xa = fr(Ju),
        Ca = pr(xa, Ea),
        Bu.adobe = Bu.adobe || {},
        Bu.adobe.target = {},
        Bu.adobe.target.VERSION = Ia.version,
        Na = {
            tntId: Cr(Uu, zu),
            sessionId: yr(Ku),
            error: vr(Qu),
            disabled: gr(Uu, Qu),
            trace: mr(Bu)
        },
        Sa = Nr(),
        Aa = Sr(Na, Wu),
        Oa = wr(Ea, Xu),
        wa = Dr(Qu, na, Aa, xa, Wu, Xu),
        Ra = Mr(Qu, Bu, ra, oa, Wu, Xu),
        Bu.adobe.target.applyOffer = Oa,
        Bu.adobe.target.trackEvent = Ra,
        Da = Hr(Qu, Zu, na, Aa, Ca, Wu, Xu, Sa),
        Bu.mboxDefine = Da.createMbox,
        Bu.mboxUpdate = Da.fetchAndDisplayMbox,
        Bu.mboxCreate = Da.createFetchAndDisplayMbox,
        Br(Qu, Bu, ta, Xu),
        Ur(Qu, Sa, wa, Oa, Wu),
        Wr(Bu.adobe.target),
        Qr(Bu.adobe.target, wa, Sa, Xu),
        Qu.isEnabled() && Ae(),
        k(Wu.getPageParameter(Uu.location.search, ri)) && Xu.log('settings', Ia)
    }(this.adobe = {}))
}({
    clientCode: 'bankofamerica',
    imsOrgId: 'A9893BC75245B1D70A490D4D@AdobeOrg',
    serverDomain: 'bankofamerica.tt.omtrdc.net',
    crossDomain: 'enabled',
    timeout: 15000,
    globalMboxName: 'target-global-mbox',
    globalMboxAutoCreate: true,
    version: '0.9.4',
    defaultContentHiddenStyle: 'visibility:hidden;',
    defaultContentVisibleStyle: 'visibility:visible;',
    bodyHiddenStyle: 'body{opacity:0}',
    bodyHidingEnabled: true,
    deviceIdLifetime: 63244800000,
    sessionIdLifetime: 1860000,
    selectorsPollingTimeout: 5000,
    visitorApiTimeout: 2000,
    overrideMboxEdgeServer: false,
    overrideMboxEdgeServerTimeout: 1860000,
    optoutEnabled: false,
    secureOnly: false
})
var aam_tnt_cb = function () {
        return ''
    },
    mboxFactory = function () {
        return null
    },
    mboxFactories = function () {
        return null
    }
window.mboxFactoryDefault = {
    getSignaler: function () {
        return {
            signal: function () {
                if (adobe && adobe.target) {
                    var a = arguments[2].substring(arguments[2].indexOf('=') + 1)
                    adobe.target.trackEvent({
                        mbox: arguments[1],
                        event: event,
                        params: {
                            clicked: a
                        }
                    })
                }
            }
        }
    },
    getMboxes: function () {
        return {
            length: function () {
                return 1
            }
        }
    }
}
var SessionTimeout = {
    continueUrl: null,
    timeoutInterval: 0,
    warnRatio: 0.8,
    warnFunction: null,
    timeoutFunction: null,
    init: function (warnFunction, timeoutFunction, timeoutInterval, continueUrl, _warnRatio) {
        this.timeoutInterval = timeoutInterval
        this.continueUrl = continueUrl
        this.warnFunction = warnFunction
        this.timeoutFunction = timeoutFunction
        if (typeof (_warnRatio) !== 'undefined' && _warnRatio !== 0) {
            this.warnRatio = _warnRatio
        }
        this.startTimers()
    },
    startTimers: function () {
        var _timeoutMillis = this.timeoutInterval * 1000
        var _warnMillis = _timeoutMillis * this.warnRatio
        $(document).everyTime(_warnMillis, 'warn', this.warnFunction)
        $(document).everyTime(_timeoutMillis, 'timeout', this.timeoutFunction)
    },
    handleContinue: function () {
        $.get(this.continueUrl, {
            _: $.now()
        }, SessionTimeout.restartTimers)
    },
    restartTimers: function () {
        $(document).stopTime('warn').stopTime('timeout')
        SessionTimeout.startTimers()
    }
};
(function ($) {
    $.fn.slides = function (option) {
        option = $.extend({}, $.fn.slides.option, option)
        return this.each(function () {
            $('.' + option.container, $(this)).children().wrapAll('<div id="carousel" class="slides_control" role="region"/>')
            var elem = $(this),
                control = $('.slides_control', elem),
                total = control.children().size(),
                width = control.children().outerWidth(),
                height = control.children().outerHeight(),
                start = option.start - 1,
                effect = option.effect.indexOf(',') < 0 ? option.effect : option.effect.replace(' ', '').split(',') [0],
                paginationEffect = option.effect.indexOf(',') < 0 ? effect : option.effect.replace(' ', '').split(',') [1],
                next = 0,
                prev = 0,
                number = 0,
                current = 0,
                loaded,
                active,
                clicked,
                position,
                direction,
                imageParent,
                pauseTimeout,
                playInterval
            if (total < 2) {
                $('.' + option.container, $(this)).fadeIn(option.fadeSpeed, option.fadeEasing, function () {
                    loaded = true
                    option.slidesLoaded()
                })
                $('.' + option.next + ', .' + option.prev).fadeOut(0)
                return false
            }

            function animate(direction, effect, clicked) {
                if (!active && loaded) {
                    active = true
                    option.animationStart(current + 1)
                    switch (direction) {
                        case 'next':
                            prev = current
                            next = current + 1
                            next = total === next ? 0 : next
                            position = width * 2
                            direction = -width * 2
                            current = next
                            break
                        case 'prev':
                            prev = current
                            next = current - 1
                            next = next === -1 ? total - 1 : next
                            position = 0
                            direction = 0
                            current = next
                            break
                        case 'pagination':
                            next = parseInt(clicked, 10)
                            prev = $('.' + option.paginationClass + ' li.' + option.currentClass + ' a', elem).attr('href').match('[^#/]+$')
                            if (next > prev) {
                                position = width * 2
                                direction = -width * 2
                            } else {
                                position = 0
                                direction = 0
                            }
                            current = next
                            break
                    }
                    if (effect === 'fade') {
                        if (option.crossfade) {
                            control.children(':eq(' + next + ')', elem).css({
                                zIndex: 10
                            }).fadeIn(option.fadeSpeed, option.fadeEasing, function () {
                                if (option.autoHeight) {
                                    control.animate({
                                        height: control.children(':eq(' + next + ')', elem).outerHeight()
                                    }, option.autoHeightSpeed, function () {
                                        control.children(':eq(' + prev + ')', elem).css({
                                            display: 'none',
                                            zIndex: 0
                                        })
                                        control.children(':eq(' + next + ')', elem).css({
                                            zIndex: 0
                                        })
                                        option.animationComplete(next + 1)
                                        active = false
                                    })
                                } else {
                                    control.children(':eq(' + prev + ')', elem).css({
                                        display: 'none',
                                        zIndex: 0
                                    })
                                    control.children(':eq(' + next + ')', elem).css({
                                        zIndex: 0
                                    })
                                    option.animationComplete(next + 1)
                                    active = false
                                }
                            })
                        } else {
                            control.children(':eq(' + prev + ')', elem).fadeOut(option.fadeSpeed, option.fadeEasing, function () {
                                if (option.autoHeight) {
                                    control.animate({
                                        height: control.children(':eq(' + next + ')', elem).outerHeight()
                                    }, option.autoHeightSpeed, function () {
                                        control.children(':eq(' + next + ')', elem).fadeIn(option.fadeSpeed, option.fadeEasing)
                                    })
                                } else {
                                    control.children(':eq(' + next + ')', elem).fadeIn(option.fadeSpeed, option.fadeEasing, function () {
                                        if ($.browser.msie) {
                                            $(this).get(0).style.removeAttribute('filter')
                                        }
                                    })
                                }
                                option.animationComplete(next + 1)
                                active = false
                            })
                        }
                    } else {
                        control.children(':eq(' + next + ')').css({
                            left: position,
                            display: 'block'
                        })
                        if (option.autoHeight) {
                            control.animate({
                                left: direction,
                                height: control.children(':eq(' + next + ')').outerHeight()
                            }, option.slideSpeed, option.slideEasing, function () {
                                control.css({
                                    left: -width
                                })
                                control.children(':eq(' + next + ')').css({
                                    left: width,
                                    zIndex: 5
                                })
                                control.children(':eq(' + prev + ')').css({
                                    left: width,
                                    display: 'none',
                                    zIndex: 0
                                })
                                option.animationComplete(next + 1)
                                active = false
                            })
                        } else {
                            control.animate({
                                left: direction
                            }, option.slideSpeed, option.slideEasing, function () {
                                control.css({
                                    left: -width
                                })
                                control.children(':eq(' + next + ')').css({
                                    left: width,
                                    zIndex: 5
                                })
                                control.children(':eq(' + prev + ')').css({
                                    left: width,
                                    display: 'none',
                                    zIndex: 0
                                })
                                option.animationComplete(next + 1)
                                active = false
                            })
                        }
                    }
                    if (option.pagination) {
                        $('.' + option.paginationClass + ' li.' + option.currentClass, elem).removeClass(option.currentClass)
                        $('.' + option.paginationClass + ' li:eq(' + next + ')', elem).addClass(option.currentClass)
                    }
                    if (!option.rotation) {
                        if (current == 0) {
                            stop()
                            option.pause = false
                        }
                    }
                }
            }

            function stop() {
                clearTimeout(elem.data('pause'))
                clearInterval(elem.data('interval'))
            }

            function pause() {
                if (option.pause) {
                    clearTimeout(elem.data('pause'))
                    clearInterval(elem.data('interval'))
                    pauseTimeout = setTimeout(function () {
                        clearTimeout(elem.data('pause'))
                        playInterval = setInterval(function () {
                            animate('next', effect)
                        }, option.play)
                        elem.data('interval', playInterval)
                    }, option.pause)
                    elem.data('pause', pauseTimeout)
                } else {
                    stop()
                }
            }

            if (total < 2) {
                return
            }
            if (start < 0) {
                start = 0
            }
            if (start > total) {
                start = total - 1
            }
            if (option.start) {
                current = start
            }
            if (option.randomize) {
                control.randomize()
            }
            $('.' + option.container, elem).css({
                overflow: 'hidden',
                position: 'relative'
            })
            control.children().css({
                position: 'absolute',
                top: 0,
                left: control.children().outerWidth(),
                zIndex: 0,
                display: 'none'
            })
            control.css({
                position: 'relative',
                width: (width * 3),
                height: height,
                left: -width
            })
            $('.' + option.container, elem).css({
                display: 'block'
            })
            if (option.autoHeight) {
                control.children().css({
                    height: 'auto'
                })
                control.animate({
                    height: control.children(':eq(' + start + ')').outerHeight()
                }, option.autoHeightSpeed)
            }
            if (option.preload && control.find('img:eq(' + start + ')').length) {
                $('.' + option.container, elem).css({
                    background: 'url(' + option.preloadImage + ') no-repeat 50% 50%'
                })
                var img = control.find('img:eq(' + start + ')').attr('src') + '?' + (new Date()).getTime()
                if ($('img', elem).parent().attr('class') != 'slides_control') {
                    imageParent = control.children(':eq(0)') [0].tagName.toLowerCase()
                } else {
                    imageParent = control.find('img:eq(' + start + ')')
                }
                control.find('img:eq(' + start + ')').attr('src', img).load(function () {
                    control.find(imageParent + ':eq(' + start + ')').fadeIn(option.fadeSpeed, option.fadeEasing, function () {
                        $(this).css({
                            zIndex: 5
                        })
                        $('.' + option.container, elem).css({
                            background: ''
                        })
                        loaded = true
                        option.slidesLoaded()
                    })
                })
            } else {
                control.children(':eq(' + start + ')').fadeIn(option.fadeSpeed, option.fadeEasing, function () {
                    if ($.browser.msie) {
                        $(this).get(0).style.removeAttribute('filter')
                    }
                    loaded = true
                    option.slidesLoaded()
                })
            }
            if (option.bigTarget) {
                control.children().css({
                    cursor: 'pointer'
                })
                control.children().click(function () {
                    animate('next', effect)
                    return false
                })
            }
            if (option.hoverPause && option.play) {
                control.bind('mouseover', function () {
                    stop()
                })
                control.bind('mouseleave', function () {
                    pause()
                })
            }
            $(document).bind('keyup', function (event) {
                if (event.altKey && event.ctrlKey && event.shiftKey && event.keyCode == 83) {
                    stop()
                } else {
                    if (event.altKey && event.ctrlKey && event.shiftKey && event.keyCode == 80) {
                        if (!option.rotation) {
                            stop()
                            option.pause = false
                        } else {
                            if (option.play) {
                                pause()
                            }
                        }
                        animate('prev', effect)
                    } else {
                        if (event.altKey && event.ctrlKey && event.shiftKey && event.keyCode == 78) {
                            if (!option.rotation) {
                                stop()
                                option.pause = false
                            } else {
                                if (option.play) {
                                    pause()
                                }
                            }
                            animate('next', effect)
                        }
                    }
                }
            })
            if (option.generateNextPrev) {
                if (option.prependNextPrev) {
                    $('.' + option.container, elem).before('<a href="#" class="' + option.prev + '">Prev</a>')
                    $('.' + option.prev, elem).before('<a href="#" class="' + option.next + '">Next</a>')
                } else {
                    $('.' + option.container, elem).after('<a href="#" class="' + option.prev + '">Prev</a>')
                    $('.' + option.prev, elem).after('<a href="#" class="' + option.next + '">Next</a>')
                }
            }
            $('.' + option.next, elem).click(function (e) {
                e.preventDefault()
                if (!option.rotation) {
                    stop()
                    option.pause = false
                } else {
                    if (option.play) {
                        pause()
                    }
                }
                animate('next', effect)
            })
            $('.' + option.prev, elem).click(function (e) {
                e.preventDefault()
                if (!option.rotation) {
                    stop()
                    option.pause = false
                } else {
                    if (option.play) {
                        pause()
                    }
                }
                animate('prev', effect)
            })
            if (option.generatePagination) {
                if (option.prependPagination) {
                    elem.prepend('<ul class=' + option.paginationClass + ' role="presentation"></ul>')
                } else {
                    elem.append('<ul class=' + option.paginationClass + ' role="presentation"></ul>')
                }
                var paginationAdaTitle = 'Banner'
                var paginationAdaPrep = 'of'
                if (option.paginationAdaTitle) {
                    paginationAdaTitle = option.paginationAdaTitle
                    paginationAdaPrep = option.paginationAdaPrep
                }
                control.children().each(function () {
                    $('.' + option.paginationClass, elem).append('<li role="presentation"><a href="#' + number + '"  aria-controls="carousel">' + paginationAdaTitle + ' ' + (number + 1) + ' ' + paginationAdaPrep + ' ' + total + '</a></li>')
                    number++
                })
            } else {
                $('.' + option.paginationClass + ' li a', elem).each(function () {
                    $(this).attr('href', '#' + number)
                    number++
                })
            }
            $('.' + option.paginationClass + ' li:eq(' + start + ')', elem).addClass(option.currentClass)
            $('.' + option.paginationClass + ' li a', elem).click(function () {
                if (!option.rotation) {
                    stop()
                    option.pause = false
                } else {
                    if (option.play) {
                        pause()
                    }
                }
                clicked = $(this).attr('href').match('[^#/]+$')
                if (current != clicked) {
                    animate('pagination', paginationEffect, clicked)
                }
                return false
            })
            $('a.link', elem).click(function () {
                if (!option.rotation) {
                    stop()
                    option.pause = false
                } else {
                    if (option.play) {
                        pause()
                    }
                }
                clicked = $(this).attr('href').match('[^#/]+$') - 1
                if (current != clicked) {
                    animate('pagination', paginationEffect, clicked)
                }
                return false
            })
            if (option.play) {
                playInterval = setInterval(function () {
                    animate('next', effect)
                }, option.play)
                elem.data('interval', playInterval)
            }
        })
    }
    $.fn.slides.option = {
        preload: false,
        preloadImage: '/img/loading.gif',
        container: 'slides_container',
        prependNextPrev: true,
        generateNextPrev: false,
        next: 'next',
        prev: 'prev',
        pagination: true,
        generatePagination: true,
        prependPagination: false,
        paginationClass: 'pagination',
        currentClass: 'current',
        fadeSpeed: 350,
        fadeEasing: '',
        slideSpeed: 350,
        slideEasing: '',
        start: 1,
        effect: 'slide',
        crossfade: false,
        randomize: false,
        play: 0,
        pause: 0,
        hoverPause: false,
        autoHeight: false,
        autoHeightSpeed: 350,
        rotation: true,
        bigTarget: false,
        animationStart: function () {
        },
        animationComplete: function () {
        },
        slidesLoaded: function () {
        }
    }
    $.fn.randomize = function (callback) {
        function randomizeOrder() {
            return (Math.round(Math.random()) - 0.5)
        }

        return ($(this).each(function () {
            var $this = $(this)
            var $children = $this.children()
            var childCount = $children.length
            if (childCount > 1) {
                $children.hide()
                var indices = []
                for (i = 0; i < childCount; i++) {
                    indices[indices.length] = i
                }
                indices = indices.sort(randomizeOrder)
                $.each(indices, function (j, k) {
                    var $child = $children.eq(k)
                    var $clone = $child.clone(true)
                    $clone.show().appendTo($this)
                    if (callback !== undefined) {
                        callback($child, $clone)
                    }
                    $child.remove()
                })
            }
        }))
    }
})(jQuery)
var XEngineWidgetFramework = XEngineWidgetFramework || function () {
    function XEngineWidget(widgetAction, pageLocation, params, divId, locale, deviceId, isCRE2Widget, defaultDivId, widgetTimeout, widgetReponseType) {
        var ranWidgetCallbackOnTimer_l
        var widgetCallbackTimeoutId_l
        var widgetCallbackJsonTimeoutId_l
        var debug_l = 'false'
        var snippetLoadImage = '<div class="ajax-loading-container"><div class="ajax-loading-image-med"></div></div>'
        initializeWidget(widgetAction, pageLocation, params, divId, locale, deviceId, isCRE2Widget, defaultDivId, widgetTimeout, widgetReponseType)

        function initializeWidget(widgetAction, pageLocation, params, divId, locale, deviceId, isCRE2Widget, defaultDivId, widgetTimeout, widgetReponseType) {
            debug('in initializeWidget......' + widgetAction + ':url:' + pageLocation + ':params:' + params + ':divId:' + divId + ':isCRE2Widget:' + isCRE2Widget + 'defaultDivId' + defaultDivId + 'widgetTimeout' + widgetTimeout)
            var widgetUrl = ''
            var isWidget = 'true'
            if (isCRE2Widget !== '' && isCRE2Widget === 'false') {
                isWidget = 'false'
            }
            if (widgetAction == '' || widgetAction == undefined) {
                widgetUrl = pageLocation + '.go'
            } else {
                widgetUrl = widgetAction
            }
            var jsHttp = new BofaJsHttp(widgetUrl)
            jsHttp.addQueryParam('divId', divId)
            jsHttp.addQueryParam('isWidget', isWidget)
            if (params != '') {
                jsHttp.addQueryParam('params', params)
                try {
                    var paramObject = JSON.parse(params, function (key, value) {
                        if (value && typeof value === 'string') {
                            jsHttp.addQueryParam(key, value)
                            return value
                        }
                    })
                } catch (e) {
                    debug('exception=' + e)
                }
            }
            jsHttp.addQueryParam('request_locale', locale)
            jsHttp.addQueryParam('deviceId', deviceId)
            jsHttp.addQueryParam('pageLocation', pageLocation)
            var newUrlStr = jsHttp.createUrlString()
            debug('URLStirng = ' + newUrlStr)
            if (widgetTimeout == undefined || widgetTimeout == null || widgetTimeout == '') {
                widgetTimeout = 20000
            }
            sendJsonWidgetRequest(newUrlStr, divId, widgetTimeout, defaultDivId, widgetReponseType)
        }

        function sendJsonWidgetRequest(url, divId, widgetTimeout, defaultDivId, widgetReponseType) {
            debug('defaultDivId' + defaultDivId)
            $(function () {
                $('#' + divId).html(snippetLoadImage)
            })
            widgetCallbackTimeoutId_l = setTimeout(function () {
                callbackOnWidgetRequestTimeout(defaultDivId, divId)
            }, widgetTimeout)
            widgetCallbackJsonTimeoutId_l = setTimeout(function () {
                callWidgetJSON(url, divId, widgetReponseType)
            }, 5)
        }

        function callWidgetJSON(url, divId, widgetReponseType) {
            debug('in call to callWidgetJSON')
            var surl = url
            if (widgetReponseType == undefined || widgetReponseType == null || widgetReponseType == '' || widgetReponseType.toLowerCase() != 'json') {
                surl = surl + '&callback=?'
            }
            debug('Sending JSON request to ' + surl)
            $.getJSON(surl, function (data) {
                handleWidgetResponse(data, divId)
            })
        }

        function callbackOnWidgetRequestTimeout(defaultDivId, divId) {
            debug('callbackOnWidgetRequestTimeout')
            $(function () {
                $('#' + divId).html('')
            })
            ranWidgetCallbackOnTimer_l = true
            clearTimeouts()
            widget_show(defaultDivId)
        }

        function widget_show(id) {
            debug('in show: ' + id)
            if (document.getElementById(id) != undefined) {
                document.getElementById(id).style.display = 'inline'
            }
        }

        function clearTimeouts() {
            if (widgetCallbackJsonTimeoutId_l != undefined) {
                window.clearTimeout(widgetCallbackJsonTimeoutId_l)
            }
            if (widgetCallbackTimeoutId_l != undefined) {
                window.clearTimeout(widgetCallbackTimeoutId_l)
            }
        }

        function handleWidgetResponse(data, divId) {
            debug('....inside handleWidgetResponse:divId=' + divId + ' ,data:' + data)
            if (ranWidgetCallbackOnTimer_l != true) {
                ranWidgetCallbackOnTimer_l = false
            }
            if (ranWidgetCallbackOnTimer_l == true) {
                clearTimeouts()
                return
            }
            clearTimeouts()
            if (data && data.widgetData) {
                if (data.widgetData.cssList) {
                    loadAllCssJsFiles(data.widgetData.cssList, 'css')
                }
                if (data.widgetData.jsList) {
                    loadAllCssJsFiles(data.widgetData.jsList, 'js')
                }
                if (data.widgetData.htmlSrc) {
                    $(function () {
                        $('#' + divId).html(unescape(data.widgetData.htmlSrc))
                    })
                    return
                }
            }
        }

        function debug(text) {
            if (debug_l == 'true') {
                alert(text)
            }
        }
    }

    return {
        callWidget: function (widgetAction, pageLocation, params, divId, locale, deviceId, isCRE2Widget, defaultDivId, widgetTimeout) {
            debug('in callWidget...' + widgetAction + ':url:' + pageLocation + ':params:' + params + ':divId:' + divId + ':isCRE2Widget:' + isCRE2Widget + ':defaultDivId:' + defaultDivId + ':widgetTimeout:' + widgetTimeout)
            return new XEngineWidget(widgetAction, pageLocation, params, divId, locale, deviceId, isCRE2Widget, defaultDivId, widgetTimeout, '')
        },
        callWidget: function (widgetAction, pageLocation, params, divId, locale, deviceId, isCRE2Widget, defaultDivId, widgetTimeout, widgetReponseType) {
            debug('in callWidget...' + widgetAction + ':url:' + pageLocation + ':params:' + params + ':divId:' + divId + ':isCRE2Widget:' + isCRE2Widget + ':defaultDivId:' + defaultDivId + ':widgetTimeout:' + widgetTimeout + ':widgetReponseType:' + widgetReponseType)
            return new XEngineWidget(widgetAction, pageLocation, params, divId, locale, deviceId, isCRE2Widget, defaultDivId, widgetTimeout, widgetReponseType)
        }
    }
}()
var debug_g
var widgetActionArray_g = new Array()
var widgetPageLocationArray_g = new Array()
var widgetDivIdArray_g = new Array()
var widgetDefaultContentArray_g = new Array()
var callbackTimeoutId_g
var callbackJsonTimeoutId_g
var ranCallbackOnTimer_g
var callbackWidgetTimeoutId_g
var ranCallbackOnWidgetTimer_g
var receivedAdCounter_g = 0
var ranWidgetCallbackOnTimer_g
var widgetCallbackTimeoutId_g
var widgetCallbackJsonTimeoutId_g
var snippetLoadImage = '<div class="ajax-loading-container"><div class="ajax-loading-image-med"></div></div>';

function callWidget(widgetAction, pageLocation, params, divId, locale, deviceId, isCRE2Widget, defaultDivId, widgetTimeout) {
    debug('in initializeWidget......' + widgetAction + ':url:' + pageLocation + ':params:' + params + ':divId:' + divId + ':isCRE2Widget:' + isCRE2Widget + 'defaultDivId' + defaultDivId + 'widgetTimeout' + widgetTimeout)
    var widgetUrl = ''
    var isWidget = 'true'
    if (isCRE2Widget !== '' && isCRE2Widget === 'false') {
        isWidget = 'false'
    }
    if (widgetAction == '' || widgetAction == undefined) {
        widgetUrl = pageLocation + '.go'
    } else {
        widgetUrl = widgetAction
    }
    var jsHttp = new BofaJsHttp(widgetUrl)
    jsHttp.addQueryParam('divId', divId)
    jsHttp.addQueryParam('isWidget', isWidget)
    if (params != '') {
        jsHttp.addQueryParam('params', params)
        try {
            var paramObject = JSON.parse(params, function (key, value) {
                if (value && typeof value === 'string') {
                    jsHttp.addQueryParam(key, value)
                    return value
                }
            })
        } catch (e) {
            debug('exception=' + e)
        }
    }
    jsHttp.addQueryParam('request_locale', locale)
    jsHttp.addQueryParam('deviceId', deviceId)
    jsHttp.addQueryParam('pageLocation', pageLocation)
    var newUrlStr = jsHttp.createUrlString()
    debug('URLStirng = ' + newUrlStr)
    if (widgetTimeout == undefined || widgetTimeout == null || widgetTimeout == '') {
        widgetTimeout = 20000
    }
    sendJsonWidgetRequest(newUrlStr, divId, widgetTimeout, defaultDivId)
}

function sendJsonWidgetRequest(url, divId, widgetTimeout, defaultDivId) {
    debug('defaultDivId' + defaultDivId)
    $(function () {
        $('#' + divId).html(snippetLoadImage)
    })
    widgetCallbackTimeoutId_g = setTimeout(function () {
        callbackOnWidgetRequestTimeout(defaultDivId, divId)
    }, widgetTimeout)
    widgetCallbackJsonTimeoutId_g = setTimeout(function () {
        callWidgetJSON(url, divId)
    }, 5)
}

function callWidgetJSON(url, divId) {
    debug('in call to callWidgetJSON')
    var surl = url + '&callback=?'
    debug('Sending JSON request to ' + surl)
    $.getJSON(surl, function (data) {
        handleWidgetResponse(data, divId)
    })
}

function callbackOnWidgetRequestTimeout(defaultDivId, divId) {
    debug('callbackOnWidgetRequestTimeout')
    $(function () {
        $('#' + divId).html('')
    })
    ranWidgetCallbackOnTimer_g = true
    clearTimeouts()
    widget_show(defaultDivId)
}

function widget_show(id) {
    debug('in show: ' + id)
    if (document.getElementById(id) != undefined) {
        document.getElementById(id).style.display = 'inline'
    }
}

function clearTimeouts() {
    if (widgetCallbackJsonTimeoutId_g != undefined) {
        window.clearTimeout(widgetCallbackJsonTimeoutId_g)
    }
    if (widgetCallbackTimeoutId_g != undefined) {
        window.clearTimeout(widgetCallbackTimeoutId_g)
    }
}

function handleWidgetResponse(data, divId) {
    debug('....inside handleWidgetResponse:divId=' + divId + ' ,data:' + data)
    if (ranWidgetCallbackOnTimer_g != true) {
        ranWidgetCallbackOnTimer_g = false
    }
    if (ranWidgetCallbackOnTimer_g == true) {
        clearTimeouts()
        return
    }
    clearTimeouts()
    if (data && data.widgetData) {
        if (data.widgetData.cssList) {
            loadAllCssJsFiles(data.widgetData.cssList, 'css')
        }
        if (data.widgetData.jsList) {
            loadAllCssJsFiles(data.widgetData.jsList, 'js')
        }
        if (data.widgetData.htmlSrc) {
            $(function () {
                $('#' + divId).html(unescape(data.widgetData.htmlSrc))
            })
            return
        }
    }
}

function sendJsonRequest(url, divId, widgetTimeout) {
    debug('divId:' + divId)
    var divIdStr = divId
    var divIdStr_l = divId
    tc_location = window.document.location.href
    if (tc_location.toLowerCase().match('page_msg=signoff') != null) {
        divIdStr_l = divIdStr_l.replace(/BOA_HOME_SIGNOFF_SERVICE/g, 'BOA_HOME_SIGNON_SERVICE')
        divIdStr_l = divIdStr_l.replace(/BOA_SB_HOME_SIGNOFF_SERVICE/g, 'BOA_SB_HOME_SIGNON_SERVICE')
        divIdStr_l = divIdStr_l.replace(/BOA_HOME_SIGNOFF_HERO/g, 'BOA_HOME_SIGNON_HERO')
        divIdStr_l = divIdStr_l.replace(/BOA_SB_HOME_SIGNOFF_HERO/g, 'BOA_SB_HOME_SIGNON_HERO')
        var divIdStr = divIdStr_l
        url = url + '&page_msg=signoff'
        debug('new divId:' + divIdStr)
    }
    if (widgetTimeout == undefined) {
        widgetTimeout = 20000
    }
    debug('widgetTimeout=' + widgetTimeout)
    callbackWidgetTimeoutId_g = setTimeout(widgetTimeoutCallBackFunction, widgetTimeout)
    $('#' + divIdStr).widgetSnippetLoader({
        url: url,
        data: ({}),
        type: 'GET',
        dataType: 'jsonp',
        timeout: widgetTimeout,
        timeoutCallback: widgetTimeoutCallBackFunction,
        errorCallback: widgetErrorCallBackFunction,
        jsonpCallback: null,
        errorMessage: 'We could not retrieve your information at this time. Please try again later.',
        callbackFunction: handleResponse
    })
}

function widgetTimeoutCallBackFunction() {
    ranCallbackOnWidgetTimer_g = true
    debug('widgetTimeoutCallBackFunction')
}

function widgetErrorCallBackFunction(XMLHTTPRequest, textStatus, errorThrown) {
    ranCallbackOnWidgetTimer_g = true
    debug('widgetErrorCallBackFunction')
}

function displayDefaultContent() {
    if (callbackWidgetTimeoutId_g != undefined) {
        window.clearTimeout(callbackWidgetTimeoutId_g)
    }
    debug('display default content since no response from server')
    for (var i = 0; i < widgetDivIdArray_g.length; i++) {
        var divId = 'widget_' + widgetDivIdArray_g[i]
        debug('display default ad in divid:' + divId)
        debug('default ad html:' + widgetDefaultContentArray[widgetDivIdArray[i]])
        document.getElementById(divId).innerHTML = unescape(widgetDefaultContentArray[widgetDivIdArray[i]])
    }
    DynContentComplete = 'yes'
}

function handleResponse(data, divId, options) {
    debug('....inside handleResponse:divId=' + divId + ' ,data:' + data)
    if (ranCallbackOnWidgetTimer_g != true) {
        ranCallbackOnWidgetTimer_g = false
    }
    if (callbackWidgetTimeoutId_g != undefined) {
        window.clearTimeout(callbackWidgetTimeoutId_g)
    }
    if (data && data.widgetData) {
        if (data.widgetData.cssList) {
            loadAllCssJsFiles(data.widgetData.cssList, 'css')
        }
        if (data.widgetData.jsList) {
            loadAllCssJsFiles(data.widgetData.jsList, 'js')
        }
        if (data.widgetData.htmlSrc) {
            $(function () {
                divId.html(unescape(data.widgetData.htmlSrc))
            })
            receivedAdCounter_g++
            if (receivedAdCounter_g == 4) {
                DynContentComplete = 'yes'
                debug('set the dynacontentcomplete flag to true ')
            }
            return
        }
    }
}

function BofaJsHttp(endPointUrl) {
    this.queryParamList = new Array()
    this.queryParamListExists = false
    this.addQueryParam = function (name, value) {
        if (name == 'widgetUrl') {
            this.queryParamList[escape(name)] = value
        } else {
            if (value != undefined && value.indexOf('+') > 0) {
                this.queryParamList[escape(name)] = value.replace(/\+/g, encodeURIComponent('+'))
            } else {
                this.queryParamList[escape(name)] = escape(value)
            }
        }
        this.queryParamListExists = true
    }
    this.createUrlString = function () {
        this.queryString = ''
        var Result = ''
        var First = true
        if (endPointUrl.indexOf('?') > 0) {
            First = false
        }
        for (var Key in this.queryParamList) {
            this.queryString += ((First) ? '?' : '&') + Key + '=' + this.queryParamList[Key]
            First = false
        }
        Result = endPointUrl + this.queryString
        return Result
    }
}

function initializeTC() {
    debug_g = javascriptDebugEnabled
    var tcTimeout = touchClarityTimeout
    widgetActionArray_g = widgetActionArray
    widgetPageLocationArray_g = widgetPageLocationArray
    widgetDivIdArray_g = widgetDivIdArray
    widgetDefaultContentArray_g = widgetDefaultContentArray
    callbackTimeoutId_g = setTimeout(callbackOnTimeout, tcTimeout)
    callbackJsonTimeoutId_g = setTimeout(callTouchClarity, 5)
}

function callTouchClarity() {
    var tCUrl = touchClarityUrl + getAdditionalRequestParams()
    var tCUrlTemp = tCUrl
    tc_location = window.document.location.href
    if (tc_location.toLowerCase().match('page_msg=signoff') != null) {
        tCUrlTemp = tCUrlTemp.replace(/BOA_HOME_SIGNON_SERVICE/g, 'BOA_HOME_SIGNOFF_SERVICE')
        tCUrlTemp = tCUrlTemp.replace(/BOA_SB_HOME_SIGNON_SERVICE/g, 'BOA_SB_HOME_SIGNOFF_SERVICE')
        tCUrlTemp = tCUrlTemp.replace(/BOA_HOME_SIGNON_HERO/g, 'BOA_HOME_SIGNOFF_HERO')
        tCUrlTemp = tCUrlTemp.replace(/BOA_SB_HOME_SIGNON_HERO/g, 'BOA_SB_HOME_SIGNOFF_HERO')
        var tCUrl = tCUrlTemp
        widgetPageLocationArray_g.BOA_HOME_SIGNOFF_HERO = '/homepage/BOA_HOME_SIGNOFF_HERO'
        widgetActionArray_g.BOA_HOME_SIGNOFF_HERO = ''
        widgetPageLocationArray_g.BOA_HOME_SIGNOFF_SERVICE_01 = '/homepage/BOA_HOME_SIGNOFF_SERVICE'
        widgetActionArray_g.BOA_HOME_SIGNOFF_SERVICE_01 = ''
        widgetPageLocationArray_g.BOA_HOME_SIGNOFF_SERVICE_02 = '/homepage/BOA_HOME_SIGNOFF_SERVICE'
        widgetActionArray_g.BOA_HOME_SIGNOFF_SERVICE_02 = ''
        widgetPageLocationArray_g.BOA_HOME_SIGNOFF_SERVICE_03 = '/homepage/BOA_HOME_SIGNOFF_SERVICE'
        widgetActionArray_g.BOA_HOME_SIGNOFF_SERVICE_03 = ''
        widgetPageLocationArray_g.BOA_SB_HOME_SIGNOFF_HERO = '/homepage/BOA_SB_HOME_SIGNOFF_HERO'
        widgetActionArray_g.BOA_SB_HOME_SIGNOFF_HERO = ''
        widgetPageLocationArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_01 = '/homepage/BOA_SB_HOME_SIGNOFF_SERVICE'
        widgetActionArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_01 = ''
        widgetPageLocationArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_02 = '/homepage/BOA_SB_HOME_SIGNOFF_SERVICE'
        widgetActionArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_02 = ''
        widgetPageLocationArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_03 = '/homepage/BOA_SB_HOME_SIGNOFF_SERVICE'
        widgetActionArray_g.BOA_SB_HOME_SIGNOFF_SERVICE_03 = ''
    }
    tCUrl = tCUrl + '&callback=?'
    debug('Touch Clarity Request URL= ' + tCUrl)
    $.getJSON(tCUrl, callback)
}

function callbackOnTimeout() {
    debug('timed out')
    ranCallbackOnTimer_g = true
    intializeTCTimeOutContent()
}

function callback(data) {
    debug('in callback')
    if (ranCallbackOnTimer_g != true && data != undefined) {
        ranCallbackOnTimer_g = false
        fetchTouchClarityHtml(data)
    } else {
        if (ranCallbackOnTimer_g == undefined || data == undefined) {
            ranCallbackOnTimer_g = true
            intializeTCTimeOutContent()
        }
    }
}

function intializeTCTimeOutContent() {
    debug('display default content')
    if (callbackJsonTimeoutId_g != undefined) {
        window.clearTimeout(callbackJsonTimeoutId_g)
    }
    if (callbackTimeoutId_g != undefined) {
        window.clearTimeout(callbackTimeoutId_g)
    }
    for (var i = 0; i < widgetDivIdArray_g.length; i++) {
        var divId = 'widget_' + widgetDivIdArray_g[i]
        debug('divId=' + divId)
        debug('html text=' + unescape(widgetDefaultContentArray[widgetDivIdArray[i]]))
        document.getElementById(divId).innerHTML = unescape(widgetDefaultContentArray[widgetDivIdArray[i]])
    }
    DynContentComplete = 'yes'
}

function fetchTouchClarityHtml(jsonObj) {
    debug('process vendor data')
    if (callbackJsonTimeoutId_g != undefined) {
        window.clearTimeout(callbackJsonTimeoutId_g)
    }
    if (callbackTimeoutId_g != undefined) {
        window.clearTimeout(callbackTimeoutId_g)
    }
    if (jsonObj != undefined && jsonObj != null && jsonObj.ccid != undefined && jsonObj.ccid != null) {
        for (var i = 0; i < jsonObj.ccid.length; i++) {
            var ccModule = jsonObj.ccid[i]
            debug('ccModule...' + ccModule)
            if (ccModule != undefined) {
                var jsonParamsForDs = ''
                if (ccModule.ds != '' || ccModule.ds != undefined) {
                    jsonParamsForDs = '{"dataSources":' + convertToJSONString(ccModule) + '}'
                }
                var touchClarityUrl = ''
                debug('WidgetActionArray..' + widgetActionArray_g[ccModule.id] + '---' + widgetPageLocationArray_g[ccModule.id])
                if (widgetActionArray_g[ccModule.id] == '' || widgetActionArray_g[ccModule.id] == undefined) {
                    touchClarityUrl = widgetPageLocationArray_g[ccModule.id] + '.go'
                } else {
                    touchClarityUrl = widgetActionArray_g[ccModule.id] + '.go'
                }
                var jsTouchClarityHttp = new BofaJsHttp(touchClarityUrl)
                jsTouchClarityHttp.addQueryParam('isTargetedAd', 'true')
                if (jsonParamsForDs != '' || jsonParamsForDs != undefined) {
                    jsTouchClarityHttp.addQueryParam('params', jsonParamsForDs)
                }
                if (widgetPageLocationArray_g[ccModule.id] != undefined) {
                    jsTouchClarityHttp.addQueryParam('pageLocation', widgetPageLocationArray_g[ccModule.id])
                } else {
                    jsTouchClarityHttp.addQueryParam('pageLocation', '')
                }
                jsTouchClarityHttp.addQueryParam('targetAdId', ccModule.id)
                var newUrlStr = jsTouchClarityHttp.createUrlString()
                debug('Created widget URLString = ' + newUrlStr + ', for divId=' + divId)
                var divId = 'widget_' + ccModule.id
                sendJsonRequest(newUrlStr, divId)
            }
        }
    }
    return
}

function convertToJSONString(jsonDataSource) {
    var convertedJSONString = '[{'
    for (var i = 0; i < jsonDataSource.ds.length; i++) {
        var jsonDS = jsonDataSource.ds[i]
        var name = jsonDS.name
        var id = jsonDS.id
        var coid = jsonDS.coid
        convertedJSONString += 'name:"' + jsonDS.name + '",id:"' + jsonDS.id + '",coid:"' + jsonDS.coid + '"'
    }
    convertedJSONString += '}]'
    debug('Final Json string is:' + convertedJSONString)
    return convertedJSONString
}

function getAdditionalRequestParams() {
    var moreParamsString = ''
    tc_location = window.document.location.href
    tc_referrer = document.referrer
    moreParamsString = escape('&r=' + tc_referrer)
    return moreParamsString
}

function trimValue(value) {
    var temp = value
    var obj = /^(\s*)([\W\w]*)(\b\s*$)/
    if (obj.test(temp)) {
        temp = temp.replace(obj, '$2')
    }
    var obj = / +/g
    temp = temp.replace(obj, ' ')
    if (temp == ' ') {
        temp = ''
    }
    temp = temp.replace(/\n/g, ' ')
    temp = temp.replace(/\s/g, ' ')
    return temp
}

function debug(text) {
    if (debug_g == 'true') {
        alert(text)
    }
}

function boaMboxCreate() {
    var tmpStr = boaMboxCreate.arguments[0]
    if (tmpStr == '' || tmpStr == undefined) {
        return
    }
    tc_location = window.document.location.href
    if (tc_location.toLowerCase().match('page_msg=signoff') != null) {
        tmpStr = tmpStr.replace(/BOA_HOME_SIGNON_SERVICE/g, 'BOA_HOME_SIGNOFF_SERVICE')
        tmpStr = tmpStr.replace(/BOA_SB_HOME_SIGNON_SERVICE/g, 'BOA_SB_HOME_SIGNOFF_SERVICE')
        tmpStr = tmpStr.replace(/BOA_HOME_SIGNON_HERO/g, 'BOA_HOME_SIGNOFF_HERO')
        tmpStr = tmpStr.replace(/BOA_SB_HOME_SIGNON_HERO/g, 'BOA_SB_HOME_SIGNOFF_HERO')
    }
    argStr = ''
    for (var i = 0; i < boaMboxCreate.arguments.length; i++) {
        if (i == 0) {
            argVal = tmpStr
        } else {
            argVal = boaMboxCreate.arguments[i]
        }
        argStr = argStr + '\'' + argVal + '\''
        if (i < boaMboxCreate.arguments.length - 1) {
            argStr += ','
        }
    }
    debug(argStr)
    eval('mboxCreate(' + argStr + ')')
}

function createBOAOnClickBE(trackingId, mboxName, offerCode) {
    logBusinessEvent(trackingId, mboxName, 'click', offerCode)
}

function createBOAImpressionBE(trackingId, mboxName, offerCode) {
    logBusinessEvent(trackingId, mboxName, 'impression', offerCode)
}

function createBOAImpression(coid, offerCode, mboxId, ost, tolaTemplateValue) {
    var inputKeys = [
        'coid',
        'offerCode',
        'channelName',
        'ost',
        'tolaTemplateValue',
        'testimonialValue',
        'mvtArgumentList'
    ]
    var inputTolaData = getTolaData(inputKeys, createBOAImpression.arguments)
    var ajaxCallTimeout
    if (typeof (ecloTolaWidgetTimeout) !== 'undefined') {
        ajaxCallTimeout = parseInt(ecloTolaWidgetTimeout)
    } else {
        ajaxCallTimeout = 10000
    }
    inputTolaData.isBusinessEventEnabled = isBusinessEventEnabled
    renderTola(inputTolaData, ajaxCallTimeout)
}

function showTola(response, mboxId) {
    var tolaContainer = $('.TargetedAd:first')
    if (tolaContainer !== 'undefined') {
        var mboxClickId = '#mboxClick-' + mboxId
        var mboxNameClass = '.mbox-name-' + mboxId
        try {
            if (tolaContainer.find(mboxClickId) !== 'undefined' && tolaContainer.find(mboxClickId).length) {
                tolaContainer.find(mboxClickId).append(response)
            } else {
                if (tolaContainer.find(mboxNameClass) !== 'undefined' && tolaContainer.find(mboxNameClass).length) {
                    tolaContainer.find(mboxNameClass).append(response)
                } else {
                    tolaContainer.append(response)
                }
            }
            tolaContainer.hide()
            if (tolaContainer.find('#tntAltMediaModule').length) {
                tolaContainer.find(mboxClickId).show()
                tolaContainer.show()
                boa.tola.widget.setCtaButtonAlignment()
            }
        } catch (e) {
            tolaContainer.html('')
        }
    }
}

function renderTola(inputTolaData, ajaxCallTimeout) {
    var mboxId = ''
    if (typeof inputTolaData != 'undefined') {
        mboxId = inputTolaData.channelName
    }
    $.ajax({
        type: 'POST',
        url: '/myaccounts/offers/getTolaTemplate.go',
        timeout: ajaxCallTimeout,
        data: inputTolaData,
        success: function (response, textStatus) {
            if (typeof response !== 'undefined' && response !== null) {
                showTola(response, mboxId)
            }
        },
        error: function (response, textStatus, errorThrown) {
        }
    })
}

function getTolaData(inputKeys, mboxArgs) {
    var inputTolaData = {}
    var mvtArgs = []
    for (var i = 0; i < 4; i++) {
        if (mboxArgs[i] != 'undefined') {
            inputTolaData[inputKeys[i]] = mboxArgs[i]
        }
    }
    for (var i = 4; i < mboxArgs.length; i++) {
        if (mboxArgs[i] != 'undefined') {
            if (!isNaN(mboxArgs[i])) {
                inputTolaData.tolaTemplateValue = mboxArgs[i]
            } else {
                if (mboxArgs[i].toLowerCase().indexOf('testimonial') > -1) {
                    inputTolaData.testimonialValue = mboxArgs[i]
                } else {
                    mvtArgs.push(mboxArgs[i])
                }
            }
        } else {
            break
        }
    }
    inputTolaData.mvtArgumentList = mvtArgs
    return inputTolaData
}

function getMVTparams(mvtParams) {
    var argsList = []
    for (var i = 5; i < mvtParams.length; i++) {
        if (mvtParams[i] != 'undefined') {
            argsList.push(mvtParams[i])
        } else {
            break
        }
    }
    return argsList
}

function logBusinessEvent(ADT, mboxName, eventType, offerCode) {
    var newEventUrl = ''
    if (isBusinessEventEnabled != undefined && isBusinessEventEnabled == true) {
        if (eventUrl != '') {
            if (eventUrl.indexOf('?') > 0) {
                newEventUrl = eventUrl + '&'
            } else {
                newEventUrl = eventUrl + '?'
            }
            newEventUrl = newEventUrl + 'ADT=' + ADT + '&mboxName=' + mboxName + '&eventType=' + eventType + '&offerCode=' + offerCode
            $.ajax({
                type: 'POST',
                url: newEventUrl,
                timeout: 5000,
                async: false
            })
        }
    }
}

(function ($) {
    $.fn.widgetSnippetLoader = function (options) {
        var $targetModule = this
        var opts = $.extend({}, $.fn.widgetSnippetLoader.defaults, options)
        if (typeof (opts.url) === 'undefined' || opts.url === null || opts.url.length === 0) {
            widgetSnippetError('widgetSnippetLoader error: Invalid URL.  Abort.')
            return
        }
        if (opts.type !== 'GET' && opts.type !== 'POST') {
            widgetSnippetError('widgetSnippetLoader error: Invalid request type.  Abort.')
            return
        }
        var snippetLoadImage = '<div class="ajax-loading-container"><div class="' + opts.loadingImageClass + '"></div></div>'
        $.ajax({
            url: opts.url,
            dataType: opts.dataType,
            jsonpCallback: opts.jsonpCallback,
            crossDomain: true,
            cache: false,
            data: opts.data,
            type: opts.type,
            timeout: opts.timeout,
            beforeSend: function () {
                $targetModule.html(snippetLoadImage)
            },
            error: function (XMLHTTPRequest, textStatus, errorThrown) {
                widgetSnippetError('widgetSnippetLoader error.  textStatus: ' + textStatus + ' errorThrown: ' + errorThrown)
                if (textStatus === 'timeout' && opts.timeoutCallback !== null && $.isFunction(opts.timeoutCallback) === true) {
                    opts.timeoutCallback(textStatus, errorThrown)
                }
                if (opts.errorCallback !== null && $.isFunction(opts.errorCallback) === true) {
                    opts.errorCallback(textStatus, errorThrown)
                }
            },
            success: function (data) {
                if (typeof (data) === 'undefined' || data.length === 0) {
                    widgetSnippetError('widgetSnippetLoader error.  Response is empty')
                } else {
                    if (opts.callbackFunction !== null && $.isFunction(opts.callbackFunction) === true) {
                        opts.callbackFunction(data, $targetModule, opts)
                    } else {
                        processResponse(data)
                    }
                }
            },
            complete: function (XMLHTTPRequest, textStatus) {
            }
        })

        function processResponse(data) {
            if (opts.datatype === 'html') {
                $targetModule.html(data)
            } else {
                if (opts.dataType === 'jsonp') {
                    if (data && data.widgetData) {
                        if (data.widgetData.htmlSrc) {
                            $targetModule.html(unescape(data.widgetData.htmlSrc))
                            return
                        }
                    }
                } else {
                    widgetSnippetError('widgetSnippetLoader error.  datatype not html, client should implement custom callback function to parse json')
                }
            }
        }

        function widgetSnippetError(errorMessage) {
            var snippetLoadErrorDiv = '<div class="error-page-level hide"><div class="error-corner top-left"></div><div class="error-corner top-right"></div><div class="error-content">' + opts.errorMessage + '</div><div class="error-corner bottom-left"></div><div class="error-corner bottom-right"></div><div id="widgetSnippetErrorCode" class="hide"></div></div>'
            $targetModule.html(snippetLoadErrorDiv).find('#widgetSnippetErrorCode').append(errorMessage)
            if (opts.errorMessage != null && opts.errorMessage.length !== 0) {
                $targetModule.find('.error-page-level').removeClass('hide')
            }
            boaTLAddCustomEvent(errorMessage, 'widgetSnippetError')
        }

        function debug($obj) {
        }
    }
})(jQuery)
$.fn.widgetSnippetLoader.defaults = {
    url: null,
    data: ({}),
    type: 'GET',
    dataType: 'html',
    timeout: 20000,
    loadingImageClass: 'ajax-loading-image-med',
    errorMessage: null,
    callbackFunction: null,
    timeoutCallback: null,
    errorCallback: null,
    jsonpCallback: 'jsonpCallback'
}

function jsonpCallback() {
}

function removejscssfile(filename, filetype) {
    var targetelement = (filetype == 'js') ? 'script' : (filetype == 'css') ? 'link' : 'none'
    var targetattr = (filetype == 'js') ? 'src' : (filetype == 'css') ? 'href' : 'none'
    var allsuspects = document.getElementsByTagName(targetelement)
    for (var i = allsuspects.length; i >= 0; i--) {
        if (allsuspects[i] && allsuspects[i].getAttribute(targetattr) != null && allsuspects[i].getAttribute(targetattr).indexOf(filename) != -1) {
            allsuspects[i].parentNode.removeChild(allsuspects[i])
        }
    }
}

function loadjscssfile(filename, filetype) {
    if (filetype == 'js') {
        var fileref = document.createElement('script')
        fileref.setAttribute('type', 'text/javascript')
        fileref.setAttribute('src', filename)
    } else {
        if (filetype == 'css') {
            var fileref = document.createElement('link')
            fileref.setAttribute('rel', 'stylesheet')
            fileref.setAttribute('type', 'text/css')
            fileref.setAttribute('href', filename)
        }
    }
    if (typeof fileref != undefined) {
        document.getElementsByTagName('head') [0].appendChild(fileref)
    }
}

function loadAllCssJsFiles(cssjsList, type) {
    for (var i = 0; i < cssjsList.length; i++) {
        removejscssfile(cssjsList[i], type)
        loadjscssfile(cssjsList[i], type)
    }
}

function checkDuplicateCsJsFile(fileNm, type) {
    if (fileNm.indexOf('http') == 0) {
        var ind = fileNm.indexOf('/', ind + 1)
        ind = fileNm.indexOf('/', ind + 1)
        ind = fileNm.indexOf('/', ind + 1)
        var newFileName = fileNm.substring(ind)
        return findjscssfile(newFileName, type)
    }
}

function findjscssfile(filename, filetype) {
    var targetelement = (filetype == 'js') ? 'script' : (filetype == 'css') ? 'link' : 'none'
    var targetattr = (filetype == 'js') ? 'src' : (filetype == 'css') ? 'href' : 'none'
    var allsuspects = document.getElementsByTagName(targetelement)
    for (var i = allsuspects.length; i >= 0; i--) {
        if (allsuspects[i] && allsuspects[i].getAttribute(targetattr) != null && allsuspects[i].getAttribute(targetattr).indexOf(filename) != -1) {
            return true
        }
    }
    return false
}

var openSumState, openSumStateUrl, openState

function summaryWidgetLoaded(openSumState, openSumStateUrl) {
    if ($('.olb-summary-widget-container').length > 0) {
        if (($('.account-summary-module', $olbSummaryContainer).length > 0) || ($('.shared-olb-summary-module', $olbSummaryContainer).length > 0)) {
            var $olbSummaryContainer = $('.olb-summary-widget-container')
            var $olbSummaryDetails
            if ($('.account-summary-module', $olbSummaryContainer).length > 0) {
                $olbSummaryDetails = $('.account-summary-module', $olbSummaryContainer)
            } else {
                if ($('.shared-olb-summary-module', $olbSummaryContainer).length > 0) {
                    $olbSummaryDetails = $('.shared-olb-summary-module', $olbSummaryContainer)
                }
            }
            var $olbSummaryCollapse = $('.summary-collapse', $olbSummaryContainer)
            var $olbSummaryADAAction = $('.ada-action', $olbSummaryContainer)
            var olbSummaryEffect = ''
            if (navigator.appVersion.indexOf('MSIE 7') === -1) {
                olbSummaryEffect = 'blind'
            }
            adSummaryWidgetOpenState = openSumState
            pipadUrlForCloseOrOpen = openSumStateUrl
            if (typeof (adSummaryWidgetOpenState) !== 'undefined' && adSummaryWidgetOpenState === 'close') {
                $olbSummaryCollapse.addClass('summary-expand')
                $olbSummaryDetails.hide()
                $olbSummaryADAAction.html($boaLangObj.show)
            } else {
                $olbSummaryCollapse.removeClass('summary-expand')
                $olbSummaryDetails.show(olbSummaryEffect)
                $olbSummaryADAAction.html($boaLangObj.hide)
            }
            $olbSummaryCollapse.show()
            $olbSummaryCollapse.click(function () {
                if ($(this).hasClass('summary-expand')) {
                    $(this).removeClass('summary-expand')
                    $olbSummaryDetails.show(olbSummaryEffect)
                    $olbSummaryADAAction.html($boaLangObj.hide)
                    if ($('#shared-olb-summary-ada-focus-target').length > 0) {
                        $('#shared-olb-summary-ada-focus-target').focus()
                    }
                    setSummaryWidgetState('OP')
                    $('.tabstrip-module').hide()
                    $('.tabstrip-module').show()
                } else {
                    $(this).addClass('summary-expand')
                    $olbSummaryDetails.hide(olbSummaryEffect)
                    $olbSummaryADAAction.html($boaLangObj.show)
                    setSummaryWidgetState('CL')
                    $('.tabstrip-module').hide()
                    $('.tabstrip-module').show()
                }
            })
        }
    }
}

function setSummaryWidgetState(openState) {
    if (typeof (pipadUrlForCloseOrOpen) !== 'undefined' && pipadUrlForCloseOrOpen !== '') {
        $.ajax({
            url: pipadUrlForCloseOrOpen + '&snippetArea=' + openState
        })
    }
}

$(document).ready(function () {
    var $splashPageContent = $('.two-column-wide-left-sasi-layout #main-content .splash-content')
    if (($splashPageContent.length > 0) && ($splashPageContent.height() < 200)) {
        $('#main-content').addClass('short')
    }
});
(function (AuthHub, $, undefined) {
    var stepup = (function () {
        var methods = {
            config: {
                dialogID: 'stepup-modal-dialog',
                modalDialog: undefined,
                dialogClass: 'authhub-modal-popup'
            },
            DEFAULT_OPTIONS: {
                callbacks: {
                    stepupDone: undefined
                },
                formIDToSubmit: 'frmStepupTarget'
            },
            bindEvents: function () {
                var cancelButtonSelector = '#' + methods.config.dialogID + ' #btnACWCancel'
                cancelButtonSelector = cancelButtonSelector + ', #' + methods.config.dialogID + ' #btnARCancel'
                $('body').on('click.clearSession', cancelButtonSelector, function () {
                    methods.clearSession()
                    methods.config.modalDialog.dialog('close')
                })
            },
            clearSession: function () {
                clearSessioncall = true
                var cancelPage = 'processACWEnter'
                console.log('Now clearing acwContent')
                $('#stepup-modal-dialog #acwContent').empty()
                console.log('acwContent removed. Now triggering ajax for clear Session')
                methods.triggerAjax('', 'clearAuthCodeSession.go?action=clearSession&cancelPage=' + cancelPage)
            },
            triggerAjax: function (submitParams, targetState) {
                var $baseURL = ''
                if (typeof (acwServiceURL) !== 'undefined' && acwServiceURL.length > 0) {
                    $baseURL = acwServiceURL
                }
                console.log('$baseURL: ' + $baseURL)
                $.ajax({
                    url: $baseURL + targetState,
                    dataType: 'jsonp',
                    data: submitParams,
                    crossDomain: true,
                    cache: false,
                    timeout: 60000,
                    beforeSend: function () {
                    },
                    error: function (XMLHTTPRequest, textStatus, errorThrown) {
                        console.log('Error:  See console for more')
                        console.log(XMLHTTPRequest)
                        console.log(errorThrown)
                    },
                    success: function (data) {
                        console.log('Success Clear session: No handler for success.')
                    },
                    complete: function (XMLHTTPRequest, textStatus) {
                    }
                })
            },
            init: function () {
                methods.bindEvents()
            },
            stepUpAuth: function (targetUrl, _options) {
                console.log('Inside stepupAuth:')
                console.log('Triggering Ajax: ' + targetUrl)
                var params = {
                    stepUpEnquiryMode: true
                }
                methods.userOptions = $.extend({}, methods.DEFAULT_OPTIONS)
                methods.userOptions = $.extend(true, methods.userOptions, _options)
                $.ajax({
                    url: targetUrl,
                    cache: false,
                    type: 'POST',
                    dataType: 'json',
                    data: params,
                    success: function (XMLHTTPResponse) {
                        console.log('Stepup Authentication Status received : ' + XMLHTTPResponse.stepUpRequired)
                        if (XMLHTTPResponse.stepUpRequired) {
                            params = {
                                stepUpEnquiryMode: false,
                                authDisplayMode: 'modal'
                            }
                            if (_options && _options.page_id) {
                                params.page_id = _options.page_id
                            }
                            methods.processStepup(targetUrl, params)
                        } else {
                            if (methods.userOptions && methods.userOptions.callbacks && methods.userOptions.callbacks.stepupDone && jQuery.type(methods.userOptions.callbacks.stepupDone) === 'function') {
                                methods.userOptions.callbacks.stepupDone()
                            } else {
                                jQuery('#' + methods.userOptions.formIDToSubmit).submit()
                            }
                        }
                    },
                    error: function (XMLHTTPRequest, textStatus, errorThrown) {
                        console.log('ERROR received')
                    }
                })
            },
            prepareDialog: function () {
                var dialog = $('#' + methods.config.dialogID),
                    that = methods
                if (dialog.length === 0) {
                    dialog = $('<div  />', {
                        html: '<div id=\'stepup-modal-content\'></div>',
                        'class': 'stepup-modal hidden',
                        id: that.config.dialogID
                    })
                    $('body').append(dialog)
                }
            },
            processStepup: function (targetUrl, params) {
                methods.prepareDialog()
                var dialogElement = $('#' + methods.config.dialogID),
                    dialogClass = methods.config.dialogClass,
                    closeText = ''
                if (window.$boaLangObj && $boaLangObj.closeText) {
                    closeText = $boaLangObj.closeText
                } else {
                    closeText = methods.getLocalizedCloseText()
                }
                dialogElement.find('#stepup-modal-content').html('')
                methods.config.modalDialog = dialogElement.dialog({
                    autoOpen: false,
                    height: 'auto',
                    width: 800,
                    maxWidth: 1600,
                    modal: true,
                    dialogClass: dialogClass,
                    closeText: closeText,
                    close: function () {
                        methods.clearSession()
                    }
                })
                $.post(targetUrl, params, function (data) {
                    dialogElement.find('#stepup-modal-content').html(data)
                    methods.config.modalDialog.dialog('open')
                }, 'text').done(function () {
                }).fail(function (jqXHR, textStatus) {
                    console.log(jqXHR)
                    console.log(textStatus)
                })
            },
            closeModalDialog: function () {
                if (methods.config.modalDialog) {
                    methods.config.modalDialog.dialog('close')
                    if (methods.userOptions && methods.userOptions.callbacks && methods.userOptions.callbacks.stepupDone && jQuery.type(methods.userOptions.callbacks.stepupDone) === 'function') {
                        methods.userOptions.callbacks.stepupDone()
                    } else {
                        jQuery('#' + methods.userOptions.formIDToSubmit).submit()
                    }
                }
            },
            processReturn: function () {
                console.log('StepUp - Success')
                methods.closeModalDialog()
            },
            getLocalizedCloseText: function () {
                if (methods.DEFAULT_OPTIONS && methods.DEFAULT_OPTIONS.localized === undefined) {
                    methods.initLocalization()
                }
                return methods.DEFAULT_OPTIONS.localized.closeText
            },
            initLocalization: function () {
                var lang = $('html').attr('lang').toLowerCase()
                if (lang === 'es-us') {
                    methods.DEFAULT_OPTIONS.localized = {
                        closeText: 'cerrar',
                        show: 'mostrar',
                        hide: 'cultar',
                        continueText: 'Continuar',
                        cancel: 'Cancelar'
                    }
                } else {
                    methods.DEFAULT_OPTIONS.localized = {
                        closeText: 'close',
                        show: 'show',
                        hide: 'hide',
                        continueText: 'Continue',
                        cancel: 'Cancel'
                    }
                }
            }
        }
        return {
            init: methods.init,
            stepUpAuth: methods.stepUpAuth,
            closeModalDialog: methods.closeModalDialog,
            processReturn: methods.processReturn
        }
    }())
    $.extend(true, AuthHub, {
        stepup: stepup
    })
    jQuery(function () {
        AuthHub.stepup.init()
    })
}(window.AuthHub = window.AuthHub || {}, jQuery))
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 JÃÂ¶rn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
  *
 * 07/26/2011 - Major Change: Rules based on input id instead of input name
 *
 *04/26/2013 - updating not to append -cs for custom dropdowns in IE 7 & 8.
 */
var $errorMessageContent = '';
(function ($) {
    $.extend($.fn, {
        validate: function (options) {
            if (!this.length) {
                if (options && options.debug && window.console) {
                    console.warn('Nothing selected, can\'t validate, returning nothing.')
                }
                return
            }
            var validator = $.data(this[0], 'validator')
            if (validator) {
                return validator
            }
            this.attr('novalidate', 'novalidate')
            validator = new $.validator(options, this[0])
            $.data(this[0], 'validator', validator)
            if (validator.settings.onsubmit) {
                this.validateDelegate(':submit', 'click', function (event) {
                    if (validator.settings.submitHandler) {
                        validator.submitButton = event.target
                    }
                    if ($(event.target).hasClass('cancel')) {
                        validator.cancelSubmit = true
                    }
                    if ($(event.target).attr('formnovalidate') !== undefined) {
                        validator.cancelSubmit = true
                    }
                })
                this.submit(function (event) {
                    if (validator.settings.debug) {
                        event.preventDefault()
                    }

                    function handle() {
                        var hidden
                        if (validator.settings.submitHandler) {
                            if (validator.submitButton) {
                                hidden = $('<input type=\'hidden\'/>').attr('name', validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)
                            }
                            validator.settings.submitHandler.call(validator, validator.currentForm, event)
                            if (validator.submitButton) {
                                hidden.remove()
                            }
                            return false
                        }
                        return true
                    }

                    if (validator.cancelSubmit) {
                        validator.cancelSubmit = false
                        return handle()
                    }
                    if (validator.settings.disableInactiveButtons && ($('form[id=' + this.id + ']').find('a.button-inactive').length > 0 || $('form[id=' + this.id + ']').find('a.btn-disabled').length > 0) || (validator.settings.disableButtonBlueId !== '' && $('#' + validator.settings.disableButtonBlueId).hasClass('btn-disabled') || validator.settings.disableButtonBlueId !== '' && $('#' + validator.settings.disableButtonBlueId).hasClass('button-inactive'))) {
                        return false
                    } else {
                        if (validator.form()) {
                            if (validator.settings.disableInactiveButtons) {
                                if (($('form[id=' + this.id + ']').find('a.btn-bofa-blue')).length === 1) {
                                    $('form[id=' + this.id + ']').find('a.btn-bofa-blue').removeClass('btn-bofa-blue').addClass('btn-disabled')
                                } else {
                                    if (($('form[id=' + this.id + ']').find('a.button-blue')).length === 1) {
                                        $('form[id=' + this.id + ']').find('a.button-blue').removeClass('button-blue').addClass('button-inactive')
                                    }
                                }
                                if (($('form[id=' + this.id + ']').find('a.btn-bofa-blue')).length > 1 && validator.settings.disableButtonBlueId !== '') {
                                    $('#' + validator.settings.disableButtonBlueId).removeClass('btn-bofa-blue').addClass('btn-disabled')
                                } else {
                                    if (($('form[id=' + this.id + ']').find('a.button-blue')).length > 1 && validator.settings.disableButtonBlueId !== '') {
                                        $('#' + validator.settings.disableButtonBlueId).removeClass('button-blue').addClass('button-inactive')
                                    }
                                }
                            }
                            if (validator.pendingRequest) {
                                validator.formSubmitted = true
                                return false
                            }
                            return handle()
                        } else {
                            if (validator.settings.disableInactiveButtons) {
                                if (($('form[id=' + this.id + ']').find('a.btn-disabled')).length === 1 && validator.settings.disableButtonBlueId == '') {
                                    $('form[id=' + this.id + ']').find('a.btn-disabled').removeClass('btn-disabled').addClass('btn-bofa-blue')
                                } else {
                                    if (($('form[id=' + this.id + ']').find('a.button-inactive')).length === 1 && validator.settings.disableButtonBlueId == '') {
                                        $('form[id=' + this.id + ']').find('a.button-inactive').removeClass('button-inactive').addClass('button-blue')
                                    }
                                }
                                if (($('form[id=' + this.id + ']').find('a.btn-disabled')).length > 1 && validator.settings.disableButtonBlueId !== '') {
                                    $('#' + validator.settings.disableButtonBlueId).removeClass('btn-disabled').addClass('btn-bofa-blue')
                                } else {
                                    if (($('form[id=' + this.id + ']').find('a.button-inactive')).length > 1 && validator.settings.disableButtonBlueId !== '') {
                                        $('#' + validator.settings.disableButtonBlueId).removeClass('button-inactive').addClass('button-blue')
                                    }
                                }
                            }
                            validator.focusInvalid()
                            return false
                        }
                    }
                })
            }
            return validator
        },
        valid: function () {
            if ($(this[0]).is('form')) {
                return this.validate().form()
            } else {
                var valid = true
                var validator = $(this[0].form).validate()
                this.each(function () {
                    valid = valid && validator.element(this)
                })
                return valid
            }
        },
        removeAttrs: function (attributes) {
            var result = {},
                $element = this
            $.each(attributes.split(/\s/), function (index, value) {
                result[value] = $element.attr(value)
                $element.removeAttr(value)
            })
            return result
        },
        rules: function (command, argument) {
            var element = this[0]
            if (command) {
                var settings = $.data(element.form, 'validator').settings
                var staticRules = settings.rules
                var existingRules = $.validator.staticRules(element)
                switch (command) {
                    case 'add':
                        $.extend(existingRules, $.validator.normalizeRule(argument))
                        delete existingRules.messages
                        staticRules[element.id] = existingRules
                        if (argument.messages) {
                            settings.messages[element.id] = $.extend(settings.messages[element.id], argument.messages)
                        }
                        break
                    case 'remove':
                        if (!argument) {
                            delete staticRules[element.id]
                            return existingRules
                        }
                        var filtered = {}
                        $.each(argument.split(/\s/), function (index, method) {
                            filtered[method] = existingRules[method]
                            delete existingRules[method]
                        })
                        return filtered
                }
            }
            var data = $.validator.normalizeRules($.extend({}, $.validator.classRules(element), $.validator.attributeRules(element), $.validator.dataRules(element), $.validator.staticRules(element)), element)
            if (data.required) {
                var param = data.required
                delete data.required
                data = $.extend({
                    required: param
                }, data)
            }
            return data
        }
    })
    $.extend($.expr[':'], {
        blank: function (a) {
            return !$.trim('' + $(a).val())
        },
        filled: function (a) {
            return !!$.trim('' + $(a).val())
        },
        unchecked: function (a) {
            return !$(a).prop('checked')
        }
    })
    $.validator = function (options, form) {
        this.settings = $.extend(true, {}, $.validator.defaults, options)
        this.currentForm = form
        this.init()
    }
    $.validator.format = function (source, params) {
        if (arguments.length === 1) {
            return function () {
                var args = $.makeArray(arguments)
                args.unshift(source)
                return $.validator.format.apply(this, args)
            }
        }
        if (arguments.length > 2 && params.constructor !== Array) {
            params = $.makeArray(arguments).slice(1)
        }
        if (params.constructor !== Array) {
            params = [
                params
            ]
        }
        $.each(params, function (i, n) {
            source = source.replace(new RegExp('\\{' + i + '\\}', 'g'), function () {
                return n
            })
        })
        return source
    }
    $.extend($.validator, {
        defaults: {
            messages: {},
            groups: {},
            rules: {},
            orphanFieldLabels: {},
            errorClass: 'field-level-error',
            validClass: 'field-valid',
            errorElement: 'span',
            focusInvalid: true,
            errorFocusID: 'error-message-ada-focus',
            focusOnError: true,
            pageLevelError: '.global-messaging-module .page-error-skin .error-text, .messaging-module .error-message, .messaging-aug-module .error-message, .messaging-vipaa-module .error-message',
            pageLevelErrorDetail: '.global-messaging-module .page-error-skin .error-text, .messaging-module .error-message, .messaging-aug-module .error-message, .messaging-vipaa-module .error-message',
            errorSkin: '.page-error-skin, .error-skin, .error-liveperson-skin, .error-trans-skin',
            errorContainer: '.global-messaging-module, .messaging-module, .messaging-aug-module, .messaging-vipaa-module',
            errorContainerId: 'clientSideErrors',
            errorLabelContainer: '.global-messaging-module .page-error-skin .error-text ul, .messaging-module .error-message ul, .messaging-aug-module .error-message ul, .messaging-vipaa-module .error-message ul',
            wrapper: 'li',
            includeFieldLabel: true,
            disableInactiveButtons: true,
            disableButtonBlueId: '',
            customSelects: true,
            onsubmit: true,
            ignore: [],
            ignoreTitle: false,
            onfocusin: false,
            onfocusout: false,
            onkeyup: false,
            onclick: false,
            highlight: function (element, errorClass, validClass) {
                var $id = this.idOrName(element)
                var $label = $(element.form).find('label[for=' + $id + ']')
                if ($label.size() > 0 && !$label.hasClass('ada-hidden')) {
                    $label.addClass(errorClass).removeClass(validClass)
                } else {
                    $(element.form).find('label[for=' + this.settings.orphanFieldLabels[$id] + ']').addClass(errorClass).removeClass(validClass)
                }
            },
            unhighlight: function (element, errorClass, validClass) {
                var $id = this.idOrName(element)
                var $label = $(element.form).find('label[for=' + $id + ']')
                if ($label.size() > 0 && !$label.hasClass('ada-hidden')) {
                    $label.removeClass(errorClass).addClass(validClass)
                } else {
                    $(element.form).find('label[for=' + this.settings.orphanFieldLabels[$id] + ']').removeClass(errorClass).addClass(validClass)
                }
            }
        },
        setDefaults: function (settings) {
            $.extend($.validator.defaults, settings)
        },
        messages: {
            required: 'This field is required.',
            remote: 'Please fix this field.',
            email: 'Please enter a valid email address.',
            url: 'Please enter a valid URL.',
            date: 'Please enter a valid date.',
            dateISO: 'Please enter a valid date (ISO).',
            number: 'Please enter a valid number.',
            digits: 'Please enter only digits.',
            creditcard: 'Please enter a valid credit card number.',
            equalTo: 'Please enter the same value again.',
            maxlength: $.validator.format('Please enter no more than {0} characters.'),
            minlength: $.validator.format('Please enter at least {0} characters.'),
            rangelength: $.validator.format('Please enter a value between {0} and {1} characters long.'),
            range: $.validator.format('Please enter a value between {0} and {1}.'),
            max: $.validator.format('Please enter a value less than or equal to {0}.'),
            min: $.validator.format('Please enter a value greater than or equal to {0}.')
        },
        autoCreateRanges: false,
        prototype: {
            init: function () {
                var that = this
                if (!$(this.settings.pageLevelErrorDetail).find('ul').length) {
                    $(this.settings.pageLevelErrorDetail).append('<ul></ul>')
                }
                this.labelContainer = $(this.settings.errorLabelContainer)
                this.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm)
                this.containers = $('#' + this.settings.errorContainerId).add(this.settings.errorLabelContainer)
                $(this.settings.errorContainer).each(function () {
                    if ($(this).find(that.settings.errorSkin).length > 0) {
                        that.containers = that.containers.add($(this))
                    }
                })
                this.submitted = {}
                this.valueCache = {}
                this.pendingRequest = 0
                this.pending = {}
                this.invalid = {}
                this.reset()
                var groups = (this.groups = {})
                $.each(this.settings.groups, function (key, value) {
                    if (typeof value === 'string') {
                        value = value.split(/\s/)
                    }
                    $.each(value, function (index, name) {
                        groups[name] = key
                    })
                })
                var rules = this.settings.rules
                $.each(rules, function (key, value) {
                    rules[key] = $.validator.normalizeRule(value)
                })

                function delegate(event) {
                    var validator = $.data(this[0].form, 'validator'),
                        eventType = 'on' + event.type.replace(/^validate/, '')
                    if (validator.settings[eventType]) {
                        validator.settings[eventType].call(validator, this[0], event)
                    }
                }

                $(this.currentForm).validateDelegate(':text, [type=\'password\'], [type=\'file\'], select, textarea, [type=\'number\'], [type=\'search\'] ,[type=\'tel\'], [type=\'url\'], [type=\'email\'], [type=\'datetime\'], [type=\'date\'], [type=\'month\'], [type=\'week\'], [type=\'time\'], [type=\'datetime-local\'], [type=\'range\'], [type=\'color\'] ', 'focusin focusout keyup', delegate).validateDelegate('[type=\'radio\'], [type=\'checkbox\'], select, option', 'click', delegate)
                if (this.settings.invalidHandler) {
                    $(this.currentForm).bind('invalid-form.validate', this.settings.invalidHandler)
                }
            },
            form: function () {
                this.checkForm()
                $.extend(this.submitted, this.errorMap)
                this.invalid = $.extend({}, this.errorMap)
                if (!this.valid()) {
                    $(this.currentForm).triggerHandler('invalid-form', [
                        this
                    ])
                }
                this.showErrors()
                return this.valid()
            },
            checkForm: function () {
                this.prepareForm()
                for (var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++) {
                    this.check(elements[i])
                }
                return this.valid()
            },
            element: function (element) {
                element = this.validationTargetFor(this.clean(element))
                this.lastElement = element
                this.prepareElement(element)
                this.currentElements = $(element)
                var result = this.check(element) !== false
                if (result) {
                    delete this.invalid[element.id]
                } else {
                    this.invalid[element.id] = true
                }
                if (!this.numberOfInvalids()) {
                    this.toHide = this.toHide.add(this.containers)
                }
                this.showErrors()
                return result
            },
            showErrors: function (errors) {
                if (typeof errors !== 'undefined') {
                    $.extend(this.errorMap, errors)
                    this.errorList = []
                    for (var id in errors) {
                        this.errorList.push({
                            message: errors[id],
                            element: $('#' + id).get()
                        })
                    }
                    this.successList = $.grep(this.successList, function (element) {
                        return !(element.id in errors)
                    })
                }
                this.settings.showErrors ? this.settings.showErrors.call(this, this.errorMap, this.errorList) : this.defaultShowErrors()
            },
            sendCMErrorData: function (errorMessage, cmErrorID) {
                var errorCodeCounter = 100
                var cmFuncExists = $.isFunction(window.cmCreateCustomError)
                if (cmFuncExists && typeof (cmPageId) !== 'undefined' && typeof (cmCategoryId) !== 'undefined') {
                    if ($('.messaging-module .error-skin').length > 0 || $('.messaging-aug-module .error-skin').length > 0 || $('.messaging-vipaa-module .error-trans-skin').length > 0 || $('.messaging-vipaa-module .error-skin').length > 0) {
                        cmCreateCustomError(cmPageId.lastIndexOf(locAppendage) == -1 ? cmPageId + locAppendage : cmPageId, typeof (cmappName) !== 'undefined' ? cmappName : null, typeof (cmappStepNumber) !== 'undefined' ? cmappStepNumber : null, typeof (cmappStepName) !== 'undefined' ? cmappStepName : null, 'Vipaa_Action_' + cmErrorID, cmCategoryId, errorMessage)
                        errorCodeCounter = errorCodeCounter + 1
                    }
                }
            },
            resetForm: function () {
                if ($.fn.resetForm) {
                    $(this.currentForm).resetForm()
                }
                this.submitted = {}
                this.lastElement = null
                this.prepareForm()
                this.hideErrors()
                this.elements().removeClass(this.settings.errorClass).removeData('previousValue')
            },
            numberOfInvalids: function () {
                return this.objectLength(this.invalid)
            },
            objectLength: function (obj) {
                var count = 0
                for (var i in obj) {
                    count++
                }
                return count
            },
            hideErrors: function () {
                this.addWrapper(this.toHide).hide()
            },
            valid: function () {
                return this.size() === 0
            },
            size: function () {
                return this.errorList.length
            },
            focusInvalid: function () {
                if (this.settings.focusInvalid) {
                    try {
                        if (this.errorList.length) {
                            $('#ada-form-errors a').focus()
                        }
                    } catch (e) {
                    }
                }
            },
            findLastActive: function () {
                var lastActive = this.lastActive
                return lastActive && $.grep(this.errorList, function (n) {
                    return n.element.id == lastActive.id
                }).length == 1 && lastActive
            },
            elements: function () {
                var validator = this,
                    rulesCache = {}
                return $(this.currentForm).find('input, select, textarea').not(':submit, :reset, :image, [disabled]').not(this.settings.ignore).filter(function () {
                    if (!this.id && validator.settings.debug && window.console) {
                        console.error('%o has no id assigned', this)
                    }
                    if (this.id in rulesCache || !validator.objectLength($(this).rules())) {
                        return false
                    }
                    rulesCache[this.id] = true
                    return true
                })
            },
            clean: function (selector) {
                return $(selector) [0]
            },
            errors: function () {
                var errorClass = this.settings.errorClass.replace(' ', '.')
                return $(this.settings.errorElement + '.' + errorClass, this.errorContext)
            },
            reset: function () {
                this.successList = []
                this.errorList = []
                this.errorMap = {}
                this.toShow = $([])
                this.toHide = $([])
                this.currentElements = $([])
            },
            prepareForm: function () {
                this.reset()
                this.toHide = this.errors().add(this.containers)
            },
            prepareElement: function (element) {
                this.reset()
                this.toHide = this.errorsFor(element)
            },
            elementValue: function (element) {
                var type = $(element).attr('type'),
                    val = $(element).val()
                if (type === 'radio' || type === 'checkbox') {
                    return $('input[name=\'' + $(element).attr('name') + '\']:checked').val()
                }
                if (typeof val === 'string') {
                    return val.replace(/\r/g, '')
                }
                return val
            },
            check: function (element) {
                element = this.validationTargetFor(this.clean(element))
                var rules = $(element).rules()
                var dependencyMismatch = false
                var val = this.elementValue(element)
                var result
                for (var method in rules) {
                    var rule = {
                        method: method,
                        parameters: rules[method]
                    }
                    try {
                        result = $.validator.methods[method].call(this, val, element, rule.parameters)
                        if (result === 'dependency-mismatch') {
                            dependencyMismatch = true
                            continue
                        }
                        dependencyMismatch = false
                        if (result === 'pending') {
                            this.toHide = this.toHide.not(this.errorsFor(element))
                            return
                        }
                        if (!result) {
                            this.formatAndAdd(element, rule)
                            if (method == 'required' && rule.parameters == true) {
                                return false
                            }
                        }
                    } catch (e) {
                        if (this.settings.debug && window.console) {
                            console.log('Exception occurred when checking element ' + element.id + ', check the \'' + rule.method + '\' method.', e)
                        }
                        throw e
                    }
                }
                if (dependencyMismatch) {
                    return
                }
                if (this.objectLength(rules)) {
                    this.successList.push(element)
                }
                return true
            },
            customDataMessage: function (element, method) {
                return $(element).data('msg-' + method.toLowerCase()) || (element.attributes && $(element).attr('data-msg-' + method.toLowerCase()))
            },
            customMessage: function (name, method) {
                var m = this.settings.messages[name]
                return m && (m.constructor === String ? m : m[method])
            },
            findDefined: function () {
                for (var i = 0; i < arguments.length; i++) {
                    if (arguments[i] !== undefined) {
                        return arguments[i]
                    }
                }
                return undefined
            },
            defaultMessage: function (element, method) {
                return this.findDefined(this.customMessage(element.id, method), this.customDataMessage(element, method), !this.settings.ignoreTitle && element.title || undefined, $.validator.messages[method], '<strong>Warning: No message defined for ' + element.id + '</strong>')
            },
            formatAndAdd: function (element, rule) {
                var cmErrorID
                var msgArrayCounter = 0
                var message = this.defaultMessage(element, rule.method),
                    theregex = /\$?\{(\d+)\}/g
                if (typeof message === 'function') {
                    message = message.call(this, rule.parameters, element)
                } else {
                    if (theregex.test(message)) {
                        message = $.validator.format(message.replace(theregex, '{$1}'), rule.parameters)
                    }
                }
                var staticRules = $.data(element.form, 'validator').settings.messages[element.id]
                for (var i in staticRules) {
                    if (staticRules[i] == message || typeof staticRules[i] == 'function') {
                        cmErrorID = message.length * (msgArrayCounter == 0 ? 1 : msgArrayCounter) * ($(element).parent().index() == 0 ? 1 : $(element).parent().index())
                    }
                    msgArrayCounter++
                }
                if (typeof pwdRegexSwitch === 'undefined' || (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch === 'false')) {
                    if (rule.method === 'passcodeSpecialCombo') {
                        if ($('html').attr('lang').toLowerCase() == 'en-us') {
                            message = '"Create a Passcode without spaces and using only these special characters: <br/>$ <> & ^ ! [] .'
                        } else {
                            message = 'Cree una contrase&#241;a sin espacios ni los caracteres especiales: $ <> & ^ ! [] .'
                        }
                    }
                }
                this.errorList.push({
                    message: message,
                    element: element,
                    cmErrorID: cmErrorID
                })
                this.errorMap[element.id] = message
                this.submitted[element.id] = message
            },
            addWrapper: function (toToggle) {
                if (this.settings.wrapper) {
                    toToggle = toToggle.add(toToggle.parent(this.settings.wrapper))
                }
                return toToggle
            },
            defaultShowErrors: function () {
                this.labelContainer.empty()
                var $id,
                    $for_label
                $.each(this.settings.orphanFieldLabels, function (id, for_label) {
                    $.data(document.body, for_label, false)
                })
                for (var i = 0; this.errorList[i]; i++) {
                    var error = this.errorList[i]
                    $id = this.idOrName(error.element)
                    $for_label = this.settings.orphanFieldLabels[$id]
                    if (typeof $for_label != 'undefined') {
                        $.data(document.body, $for_label, true)
                    }
                    this.settings.highlight && this.settings.highlight.call(this, error.element, this.settings.errorClass, this.settings.validClass)
                    this.showSpan(error.element, error.message, error.cmErrorID)
                }
                if (this.errorList.length) {
                    this.toHide = this.toHide.add($(this.settings.pageLevelError).closest(this.settings.errorContainer))
                    this.toShow = this.toShow.add(this.containers)
                }
                if (this.settings.unhighlight) {
                    for (var i = 0, elements = this.validElements(); elements[i]; i++) {
                        $id = this.idOrName(elements[i])
                        $for_label = this.settings.orphanFieldLabels[$id]
                        if ($.data(document.body, $for_label) != true) {
                            this.settings.unhighlight.call(this, elements[i], this.settings.errorClass, this.settings.validClass)
                        }
                    }
                }
                if ($(this.settings.errorContainer).find('#' + this.settings.errorFocusID).length == 0) {
                    $(this.settings.errorContainer).prepend('<a id="' + this.settings.errorFocusID + '" name="' + this.settings.errorFocusID + '" class="ada-hidden" tabindex="0">Error Message</a>')
                }
                this.toHide = this.toHide.not(this.toShow)
                this.hideErrors()
                var spaDuplicateMessage = false
                if ($(this.currentForm).hasClass('spa-form-validation')) {
                    for (var i = 0; i < this.errorList.length; i++) {
                        spaDuplicateMessage = false
                        var spaErrorSpan = $('<span/>').html(this.errorList[i].message)
                        $($(this.errorList[i]).attr('element')).siblings('.spa-input-error-message').each(function () {
                            if ($(this).html() === spaErrorSpan.html()) {
                                spaDuplicateMessage = true
                            }
                        })
                        if (!spaDuplicateMessage) {
                            $($(this.errorList[i]).attr('element')).parent().append('<div class="spa-input-error-message" id="' + $($(this.errorList[i]).attr('element')).attr('id') + '_errorMessage" aria-live="rude">' + this.errorList[i].message + '</div>')
                        }
                    }
                } else {
                    this.addWrapper(this.toShow).show()
                }
                if (this.settings.focusOnError) {
                    $('#' + this.settings.errorFocusID).focus()
                }
            },
            validElements: function () {
                return this.currentElements.not(this.invalidElements())
            },
            invalidElements: function () {
                return $(this.errorList).map(function () {
                    return this.element
                })
            },
            showSpan: function (element, message, cmErrorID) {
                var that = this
                var duplicateMessage = false
                var $fieldLabel = $(element.form).find('label[for=' + this.idOrName(element) + ']')
                var fieldLabel = ($fieldLabel.length != 0 && this.settings.includeFieldLabel) ? $fieldLabel.html() + ': ' : ''
                var span = $('<' + this.settings.errorElement + '/>').html(fieldLabel + message)
                this.labelContainer.children().each(function () {
                    if ($(this).find('span').html() === span.html()) {
                        duplicateMessage = true
                    }
                })
                if (!duplicateMessage) {
                    this.sendCMErrorData(message, cmErrorID)
                    boaTLUIFieldValidationError(fieldLabel + message)
                    if (this.settings.wrapper) {
                        span = span.hide().show().wrap('<' + this.settings.wrapper + '/>').parent()
                    }
                    $('#' + that.settings.errorContainerId).attr('aria-hidden', 'false').attr('aria-live', 'polite')
                    $(this.settings.errorContainer).each(function () {
                        if ($(this).not('#' + that.settings.errorContainerId).length > 0 && $(this).find(that.settings.errorSkin).length > 0) {
                            $(this).remove()
                        }
                    })
                    this.labelContainer.append(span)
                    $errorMessageContent = span.parent().html()
                    this.toShow = this.toShow.add(span)
                }
            },
            errorsFor: function (element) {
                var name = this.idOrName(element)
                return this.errors().filter(function () {
                    return $(this).attr('for') === name
                })
            },
            idOrName: function (element) {
                return this.groups[element.id] || (this.checkable(element) ? element.name : ($(element).is('select') && this.settings.customSelects && !(navigator.appVersion.indexOf('MSIE 7.') != -1 || navigator.appVersion.indexOf('MSIE 8.') != -1) ? element.id + '-cs' : element.id || element.name))
            },
            validationTargetFor: function (element) {
                if (this.checkable(element)) {
                    element = this.findByName(element.name).not(this.settings.ignore) [0]
                }
                return element
            },
            checkable: function (element) {
                return (/radio|checkbox/i).test(element.type)
            },
            findByName: function (name) {
                return $(this.currentForm).find('[name=\'' + name + '\']')
            },
            getLength: function (value, element) {
                switch (element.nodeName.toLowerCase()) {
                    case 'select':
                        return $('option:selected', element).length
                    case 'input':
                        if (this.checkable(element)) {
                            return this.findByName(element.name).filter(':checked').length
                        }
                }
                return value.length
            },
            depend: function (param, element) {
                return this.dependTypes[typeof param] ? this.dependTypes[typeof param](param, element) : true
            },
            dependTypes: {
                'boolean': function (param, element) {
                    return param
                },
                string: function (param, element) {
                    return !!$(param, element.form).length
                },
                'function': function (param, element) {
                    return param(element)
                }
            },
            optional: function (element) {
                return !$.validator.methods.required.call(this, $.trim(element.value), element) && 'dependency-mismatch'
            },
            startRequest: function (element) {
                if (!this.pending[element.name]) {
                    this.pendingRequest++
                    this.pending[element.name] = true
                }
            },
            stopRequest: function (element, valid) {
                this.pendingRequest--
                if (this.pendingRequest < 0) {
                    this.pendingRequest = 0
                }
                delete this.pending[element.name]
                if (valid && this.pendingRequest === 0 && this.formSubmitted && this.form()) {
                    $(this.currentForm).submit()
                    this.formSubmitted = false
                } else {
                    if (!valid && this.pendingRequest === 0 && this.formSubmitted) {
                        $(this.currentForm).triggerHandler('invalid-form', [
                            this
                        ])
                        this.formSubmitted = false
                    }
                }
            },
            previousValue: function (element) {
                return $.data(element, 'previousValue') || $.data(element, 'previousValue', {
                    old: null,
                    valid: true,
                    message: this.defaultMessage(element, 'remote')
                })
            }
        },
        classRuleSettings: {
            required: {
                required: true
            },
            email: {
                email: true
            },
            url: {
                url: true
            },
            date: {
                date: true
            },
            dateISO: {
                dateISO: true
            },
            number: {
                number: true
            },
            digits: {
                digits: true
            },
            creditcard: {
                creditcard: true
            }
        },
        addClassRules: function (className, rules) {
            if (className.constructor === String) {
                this.classRuleSettings[className] = rules
            } else {
                $.extend(this.classRuleSettings, className)
            }
        },
        classRules: function (element) {
            var rules = {}
            var classes = $(element).attr('class')
            if (classes) {
                $.each(classes.split(' '), function () {
                    if (this in $.validator.classRuleSettings) {
                        $.extend(rules, $.validator.classRuleSettings[this])
                    }
                })
            }
            return rules
        },
        attributeRules: function (element) {
            var rules = {}
            var $element = $(element)
            var type = $element[0].getAttribute('type')
            for (var method in $.validator.methods) {
                var value
                if (method === 'required') {
                    value = $element.get(0).getAttribute(method)
                    if (value === '') {
                        value = true
                    }
                    value = !!value
                } else {
                    value = $element.attr(method)
                }
                if (/min|max/.test(method) && (type === null || /number|range|text/.test(type))) {
                    value = Number(value)
                }
                if (value) {
                    rules[method] = value
                } else {
                    if (type === method && type !== 'range') {
                        rules[method] = true
                    }
                }
            }
            if (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {
                delete rules.maxlength
            }
            return rules
        },
        dataRules: function (element) {
            var method,
                value,
                rules = {},
                $element = $(element)
            for (method in $.validator.methods) {
                value = $element.data('rule-' + method.toLowerCase())
                if (value !== undefined) {
                    rules[method] = value
                }
            }
            return rules
        },
        staticRules: function (element) {
            var rules = {}
            var validator = $.data(element.form, 'validator')
            if (validator.settings.rules) {
                rules = $.validator.normalizeRule(validator.settings.rules[element.id]) || {}
            }
            return rules
        },
        normalizeRules: function (rules, element) {
            $.each(rules, function (prop, val) {
                if (val === false) {
                    delete rules[prop]
                    return
                }
                if (val.param || val.depends) {
                    var keepRule = true
                    switch (typeof val.depends) {
                        case 'string':
                            keepRule = !!$(val.depends, element.form).length
                            break
                        case 'function':
                            keepRule = val.depends.call(element, element)
                            break
                    }
                    if (keepRule) {
                        rules[prop] = val.param !== undefined ? val.param : true
                    } else {
                        delete rules[prop]
                    }
                }
            })
            $.each(rules, function (rule, parameter) {
                rules[rule] = $.isFunction(parameter) ? parameter(element) : parameter
            })
            $.each(['minlength',
                'maxlength'], function () {
                if (rules[this]) {
                    rules[this] = Number(rules[this])
                }
            })
            $.each(['rangelength',
                'range'], function () {
                var parts
                if (rules[this]) {
                    if ($.isArray(rules[this])) {
                        rules[this] = [
                            Number(rules[this][0]),
                            Number(rules[this][1])
                        ]
                    } else {
                        if (typeof rules[this] === 'string') {
                            parts = rules[this].split(/[\s,]+/)
                            rules[this] = [
                                Number(parts[0]),
                                Number(parts[1])
                            ]
                        }
                    }
                }
            })
            if ($.validator.autoCreateRanges) {
                if (rules.min && rules.max) {
                    rules.range = [
                        rules.min,
                        rules.max
                    ]
                    delete rules.min
                    delete rules.max
                }
                if (rules.minlength && rules.maxlength) {
                    rules.rangelength = [
                        rules.minlength,
                        rules.maxlength
                    ]
                    delete rules.minlength
                    delete rules.maxlength
                }
            }
            return rules
        },
        normalizeRule: function (data) {
            if (typeof data === 'string') {
                var transformed = {}
                $.each(data.split(/\s/), function () {
                    transformed[this] = true
                })
                data = transformed
            }
            return data
        },
        addMethod: function (name, method, message) {
            $.validator.methods[name] = method
            $.validator.messages[name] = message !== undefined ? message : $.validator.messages[name]
            if (method.length < 3) {
                $.validator.addClassRules(name, $.validator.normalizeRule(name))
            }
        },
        methods: {
            required: function (value, element, param) {
                if (!this.depend(param, element)) {
                    return 'dependency-mismatch'
                }
                if (element.nodeName.toLowerCase() === 'select') {
                    var val = $(element).val()
                    return val && val.length > 0
                }
                if (this.checkable(element)) {
                    return this.getLength(value, element) > 0
                }
                return $.trim(value).length > 0
            },
            remote: function (value, element, param) {
                if (this.optional(element)) {
                    return 'dependency-mismatch'
                }
                var previous = this.previousValue(element)
                if (!this.settings.messages[element.id]) {
                    this.settings.messages[element.id] = {}
                }
                previous.originalMessage = this.settings.messages[element.id].remote
                this.settings.messages[element.id].remote = previous.message
                param = typeof param === 'string' && {
                        url: param
                    }
                    || param
                if (previous.old === value) {
                    return previous.valid
                }
                previous.old = value
                var validator = this
                this.startRequest(element)
                var data = {}
                data[element.id] = value
                $.ajax($.extend(true, {
                    url: param,
                    mode: 'abort',
                    port: 'validate' + element.id,
                    dataType: 'json',
                    data: data,
                    success: function (response) {
                        validator.settings.messages[element.id].remote = previous.originalMessage
                        var valid = response === true || response === 'true'
                        if (valid) {
                            var submitted = validator.formSubmitted
                            validator.prepareElement(element)
                            validator.formSubmitted = submitted
                            validator.successList.push(element)
                            delete validator.invalid[element.id]
                            validator.showErrors()
                        } else {
                            var errors = {}
                            var message = response || validator.defaultMessage(element, 'remote')
                            errors[element.id] = previous.message = $.isFunction(message) ? message(value) : message
                            validator.invalid[element.id] = true
                            validator.showErrors(errors)
                        }
                        previous.valid = valid
                        validator.stopRequest(element, valid)
                    }
                }, param))
                return 'pending'
            },
            email: function (value, element) {
                return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value)
            },
            url: function (value, element) {
                return this.optional(element) || /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)
            },
            date: function (value, element) {
                return this.optional(element) || !/Invalid|NaN/.test(new Date(value).toString())
            },
            dateISO: function (value, element) {
                return this.optional(element) || /^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value)
            },
            number: function (value, element) {
                return this.optional(element) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)
            },
            digits: function (value, element) {
                return this.optional(element) || /^\d+$/.test(value)
            },
            creditcard: function (value, element) {
                if (this.optional(element)) {
                    return 'dependency-mismatch'
                }
                if (/[^0-9 \-]+/.test(value)) {
                    return false
                }
                var nCheck = 0,
                    nDigit = 0,
                    bEven = false
                value = value.replace(/\D/g, '')
                for (var n = value.length - 1; n >= 0; n--) {
                    var cDigit = value.charAt(n)
                    nDigit = parseInt(cDigit, 10)
                    if (bEven) {
                        if ((nDigit *= 2) > 9) {
                            nDigit -= 9
                        }
                    }
                    nCheck += nDigit
                    bEven = !bEven
                }
                return (nCheck % 10) === 0
            },
            minlength: function (value, element, param) {
                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element)
                return this.optional(element) || length >= param
            },
            maxlength: function (value, element, param) {
                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element)
                return this.optional(element) || length <= param
            },
            rangelength: function (value, element, param) {
                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element)
                return this.optional(element) || (length >= param[0] && length <= param[1])
            },
            min: function (value, element, param) {
                return this.optional(element) || value >= param
            },
            max: function (value, element, param) {
                return this.optional(element) || value <= param
            },
            range: function (value, element, param) {
                return this.optional(element) || (value >= param[0] && value <= param[1])
            },
            equalTo: function (value, element, param) {
                var target = $(param)
                if (this.settings.onfocusout) {
                    target.unbind('.validate-equalTo').bind('blur.validate-equalTo', function () {
                        $(element).valid()
                    })
                }
                return value === target.val()
            }
        }
    })
    $.format = $.validator.format
}(jQuery));
(function ($) {
    var pendingRequests = {}
    if ($.ajaxPrefilter) {
        $.ajaxPrefilter(function (settings, _, xhr) {
            var port = settings.port
            if (settings.mode === 'abort') {
                if (pendingRequests[port]) {
                    pendingRequests[port].abort()
                }
                pendingRequests[port] = xhr
            }
        })
    } else {
        var ajax = $.ajax
        $.ajax = function (settings) {
            var mode = ('mode' in settings ? settings : $.ajaxSettings).mode,
                port = ('port' in settings ? settings : $.ajaxSettings).port
            if (mode === 'abort') {
                if (pendingRequests[port]) {
                    pendingRequests[port].abort()
                }
                pendingRequests[port] = ajax.apply(this, arguments)
                return pendingRequests[port]
            }
            return ajax.apply(this, arguments)
        }
    }
}(jQuery));
(function ($) {
    $.extend($.fn, {
        validateDelegate: function (delegate, type, handler) {
            return this.bind(type, function (event) {
                var target = $(event.target)
                if (target.is(delegate)) {
                    return handler.apply(target, arguments)
                }
            })
        }
    })
}(jQuery));
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 JÃÂ¶rn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function () {
    function stripHtml(value) {
        return value.replace(/<.[^<>]*?>/g, ' ').replace(/&nbsp;|&#160;/gi, ' ').replace(/[.(),;:!?%#$'"_+=\/\-]*/g, '')
    }

    jQuery.validator.addMethod('maxWords', function (value, element, params) {
        return this.optional(element) || stripHtml(value).match(/\b\w+\b/g).length <= params
    }, jQuery.validator.format('Please enter {0} words or less.'))
    jQuery.validator.addMethod('minWords', function (value, element, params) {
        return this.optional(element) || stripHtml(value).match(/\b\w+\b/g).length >= params
    }, jQuery.validator.format('Please enter at least {0} words.'))
    jQuery.validator.addMethod('rangeWords', function (value, element, params) {
        var valueStripped = stripHtml(value)
        var regex = /\b\w+\b/g
        return this.optional(element) || valueStripped.match(regex).length >= params[0] && valueStripped.match(regex).length <= params[1]
    }, jQuery.validator.format('Please enter between {0} and {1} words.'))
}())
jQuery.validator.addMethod('alphanumericspacewithpunc', function (value, element, param) {
    var specialRegex = new RegExp('^[a-zA-Z0-9\\s' + param + ']+$')
    return this.optional(element) || specialRegex.test(value)
}, 'Alphanumeric, spaces, and {0} only please')
jQuery.validator.addMethod('ssnvalidation', function (value, element) {
    return this.optional(element) || /^[0-9]{3}-[0-9]{2}-[0-9]{4}$|^[0-9]{9}$/i.test(value)
}, 'Letters or punctuation only please')
jQuery.validator.addMethod('ssnvalidationwithhyphen', function (value, element) {
    return this.optional(element) || new RegExp('^(?!000)[0-9]{3}([-]?)(?!00)[0-9]{2}([-]?)(?!0000)[0-9]{4}$').test(value)
}, 'Letters or punctuation only please')
jQuery.validator.addMethod('suffixrule', function (value, element) {
    return this.optional(element) || /^(Jr|Sr|I|II|III|IV|V|VI|VII|VIII|IX|X)$/i.test(value)
}, 'Letters or punctuation only please')
jQuery.validator.addMethod('letterswithbasicpunc', function (value, element) {
    return this.optional(element) || /^[a-z\-.,()'"\s]+$/i.test(value)
}, 'Letters or punctuation only please')
jQuery.validator.addMethod('alphanumeric', function (value, element) {
    return this.optional(element) || /^\w+$/i.test(value)
}, 'Letters, numbers, and underscores only please')
jQuery.validator.addMethod('alphanumericspace', function (value, element) {
    return this.optional(element) || /^[a-zA-Z0-9 ]+$/.test(value)
}, 'Please use letters, numbers, and spaces')
jQuery.validator.addMethod('isBusinessName', function (value, element) {
    return this.optional(element) || /^[a-zA-Z0-9-&' ]+$/.test(value)
}, 'Please use letters, numbers, and spaces')
jQuery.validator.addMethod('alphawithspacetrim', function (value, element) {
    return this.optional(element) || /^[a-zA-Z ]+$/.test(value.trim())
}, 'Please use letters, numbers, and spaces')
jQuery.validator.addMethod('alphawithspace', function (value, element) {
    return this.optional(element) || /^[a-zA-Z ]+$/.test(value)
}, 'Please use letters, numbers, and spaces')
jQuery.validator.addMethod('onenumberoneletter', function (value, element) {
    return this.optional(element) || /(?=.*\d)(?=.*[a-zA-Z])/.test(value)
}, 'Please use 1 letter and 1 number')
jQuery.validator.addMethod('oneNumOneUpOneLow', function (value, element) {
    var specialRegex = new RegExp('(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])')
    return this.optional(element) || specialRegex.test(value)
}, 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number')
jQuery.validator.addMethod('nonRepeat3Chars', function (value, element) {
    var specialRegex = new RegExp('^$|([a-zA-Z0-9])\\1{3,}', 'i')
    return this.optional(element) || !specialRegex.test(value)
}, 'Your Passcode must not repeat the same number or letter more than 3 times in a row')
jQuery.validator.addMethod('allowedSpecialChars', function (value, element) {
    var specialRegex = /^[a-zA-Z0-9@#*()+={}\/?~;,.\-\_]+$/
    var inputValLen = value.length !== 0 ? true : false
    return this.optional(element) && !inputValLen || specialRegex.test(value)
}, 'Create a Passcode without spaces and using only these special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _')
jQuery.validator.addMethod('equalToIgnoreCase', function (value, element, param) {
    var target = $(param).unbind('.validate-equalTo').bind('blur.validate-equalTo', function () {
        $(element).valid()
    })
    return value.toUpperCase() == target.val().toUpperCase()
}, 'Please enter the same value again')
jQuery.validator.addMethod('nospacesnospecial', function (value, element, param) {
    var specialRegex = new RegExp('^[^' + param + ']*$')
    return this.optional(element) || /^[^\s]*$/.test(value) && specialRegex.test(value)
}, $.validator.format('Please don\'t use space or these special characters {0}'))
jQuery.validator.addMethod('lettersonly', function (value, element) {
    return this.optional(element) || /^[a-z]+$/i.test(value)
}, 'Letters only please')
jQuery.validator.addMethod('nowhitespace', function (value, element) {
    return this.optional(element) || /^\S+$/i.test(value)
}, 'No white space please')
jQuery.validator.addMethod('ziprange', function (value, element) {
    return this.optional(element) || /^90[2-5]\d\{2\}-\d{4}$/.test(value)
}, 'Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx')
jQuery.validator.addMethod('zipcodeUS', function (value, element) {
    return this.optional(element) || /\d{5}-\d{4}$|^\d{5}$/.test(value)
}, 'The specified US ZIP Code is invalid')
jQuery.validator.addMethod('integer', function (value, element) {
    return this.optional(element) || /^-?\d+$/.test(value)
}, 'A positive or negative non-decimal number please')
jQuery.validator.addMethod('dollaramt', function (value, element) {
    return this.optional(element) || /^(\$)$/.test(value) || /^(\$?)(?:\d+)(?:\.\d{2})?$/.test(value)
}, 'Please enter a correct dollar amount')
jQuery.validator.addMethod('maxdollar', function (value, element, param) {
    return this.optional(element) || value.replace('$', '') <= param
}, 'Please enter a dollar amount less than or equal to {0}')
jQuery.validator.addMethod('number2decimal', function (value, element) {
    return this.optional(element) || /^(\d*?)(\.\d{2})$/.test(value)
}, 'Please enter a number with a decimal point')
jQuery.validator.addMethod('numeric', function (value, element) {
    return this.optional(element) || /^(\d*?)(?:\.\d+)?$/.test(value)
}, 'Please enter a numeric value')
jQuery.validator.addMethod('nodigits', function (value, element) {
    return this.optional(element) || !(/^-?\d+$/.test(value))
}, 'No numbers only please')
jQuery.validator.addMethod('noanydigits', function (value, element) {
    return this.optional(element) || !(/[0-9]/.test(value))
}, 'No numbers in user name please')
jQuery.validator.addMethod('StrValidation', function (value, element, params) {
    var flag = true
    for (var i = 0; i < params.length; i++) {
        if (value === params[i]) {
            flag = false
            break
        }
    }
    return this.optional(element) || flag
}, 'Please create an Online ID thats different from your Passcode')
jQuery.validator.addMethod('numberOfDigits', function (value, element, param) {
    var specialRegex = new RegExp('^\\d{' + param + '}$')
    return this.optional(element) || specialRegex.test(value)
}, 'Please enter {0} digits')
jQuery.validator.addMethod('letterNumberSpecialCombo', function (value, element) {
    var specialRegex = new RegExp('(?!^\\d+$)(?!^[@#\\*\\(\\)\\+={}/\\?~;,\\.\\-\\_]+$)^[a-zA-Z0-9@#\\*\\(\\)\\+={}/\\?~;,\\.\\-\\_]{1,32}$')
    return this.optional(element) || /^[^\s]*$/.test(value) && specialRegex.test(value)
}, $.validator.format('A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'))
jQuery.validator.addMethod('streetaddress', function (value, element) {
    return this.optional(element) || (/^(?=.*\d .*)[0-9a-zA-Z\- #\.,&amp;]+$/).test(value)
}, 'Please enter a valid street address')
jQuery.validator.addMethod('passcodeSpecialCombo', function (value, element) {
    var specialRegex = new RegExp('^[^$<>&\\^![\\]]*$')
    if (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch === 'true') {
        specialRegex = /^[a-zA-Z0-9@#*()+={}\/?~;,.\-\_]+$/
    }
    return this.optional(element) || /^[^\s]*$/.test(value) && specialRegex.test(value) || /^\s+$/.test(value)
}, $.validator.format('Create a Passcode without spaces and using only these special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'))
jQuery.validator.addMethod('vinUS', function (v) {
    if (v.length !== 17) {
        return false
    }
    var i,
        n,
        d,
        f,
        cd,
        cdv
    var LL = [
        'A',
        'B',
        'C',
        'D',
        'E',
        'F',
        'G',
        'H',
        'J',
        'K',
        'L',
        'M',
        'N',
        'P',
        'R',
        'S',
        'T',
        'U',
        'V',
        'W',
        'X',
        'Y',
        'Z'
    ]
    var VL = [
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        1,
        2,
        3,
        4,
        5,
        7,
        9,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
    ]
    var FL = [
        8,
        7,
        6,
        5,
        4,
        3,
        2,
        10,
        0,
        9,
        8,
        7,
        6,
        5,
        4,
        3,
        2
    ]
    var rs = 0
    for (i = 0; i < 17; i++) {
        f = FL[i]
        d = v.slice(i, i + 1)
        if (i === 8) {
            cdv = d
        }
        if (!isNaN(d)) {
            d *= f
        } else {
            for (n = 0; n < LL.length; n++) {
                if (d.toUpperCase() === LL[n]) {
                    d = VL[n]
                    d *= f
                    if (isNaN(cdv) && n === 8) {
                        cdv = LL[n]
                    }
                    break
                }
            }
        }
        rs += d
    }
    cd = rs % 11
    if (cd === 10) {
        cd = 'X'
    }
    if (cd === cdv) {
        return true
    }
    return false
}, 'The specified vehicle identification number (VIN) is invalid.')
jQuery.validator.addMethod('dateITA', function (value, element) {
    var check = false
    var re = /^\d{1,2}\/\d{1,2}\/\d{4}$/
    if (re.test(value)) {
        var adata = value.split('/')
        var gg = parseInt(adata[0], 10)
        var mm = parseInt(adata[1], 10)
        var aaaa = parseInt(adata[2], 10)
        var xdata = new Date(aaaa, mm - 1, gg)
        if ((xdata.getFullYear() === aaaa) && (xdata.getMonth() === mm - 1) && (xdata.getDate() === gg)) {
            check = true
        } else {
            check = false
        }
    } else {
        check = false
    }
    return this.optional(element) || check
}, 'Please enter a correct date')
$.validator.addMethod('validateDOB', function (value, element) {
    var isValid = /^\d\d?\/\d\d?\/\d\d\d\d$/.test(value)
    var today = new Date()
    if (isValid) {
        var minDate = Date.parse((new Date(today).getMonth() + 1) + '/' + new Date(today).getDate() + '/' + (new Date(today).getFullYear() - parseInt(jQuery.data(document.body, 'ppwMinAge'))))
        var DOB = Date.parse(value)
        if (new Date(value).getFullYear() < 1900) {
            return false
        }
        if ((DOB >= today || DOB >= minDate) || (new Date(value).getMonth() + 1) != value.split('/') [0]) {
            if (DOB >= today || new Date(value).getDate() != value.split('/') [1] || (new Date(value).getMonth() + 1) != value.split('/') [0]) {
                isValid = false
            } else {
                if (DOB > minDate && typeof (ppwMinAgeRule) !== 'undefined') {
                    ppwMinAgeRule = true
                } else {
                    if (DOB > minDate && typeof (cipMinAgeRule) !== 'undefined') {
                        cipMinAgeRule = true
                    }
                }
            }
            if (DOB != minDate) {
                isValid = false
            } else {
                isValid = true
            }
        } else {
            isValid = true
        }
        return isValid
    }
}, 'Please enter a valid date')
$.validator.addMethod('validateCIPDOB', function (value, element) {
    if (typeof value !== 'undefined' && value.length > 0) {
        var isValid = /^\d\d?\/\d\d?\/\d\d\d\d$/.test(value)
        var today = new Date()
        var DOB = Date.parse(value)
        if (isValid) {
            var dateValue = parseInt(value.split('/') [1], 10)
            var monthValue = parseInt(value.split('/') [0], 10)
            var yearValue = parseInt(value.split('/') [2], 10)
            if (DOB >= today || new Date(value).getFullYear() < 1900 || monthValue > 12 || dateValue > 31 || dateValue == 0 || monthValue == 0 || yearValue == 0) {
                isValid = false
            } else {
                if ((/^(4|6|9|11)$/i.test(monthValue)) && dateValue > 30) {
                    isValid = false
                } else {
                    if (monthValue == 2) {
                        if (yearValue % 4 == 0 && dateValue > 29) {
                            isValid = false
                        } else {
                            if (yearValue % 4 != 0 && dateValue > 28) {
                                isValid = false
                            }
                        }
                    }
                }
            }
        }
        cipDOBFormatValid = isValid
        return isValid
    }
}, 'Please enter a properly formatted date')
$.validator.addMethod('validateCIPMinAge', function (value, element) {
    var isValid
    var today = new Date()
    var minDate = Date.parse((new Date(today).getMonth() + 1) + '/' + new Date(today).getDate() + '/' + (new Date(today).getFullYear() - parseInt(jQuery.data(document.body, 'ppwMinAge'))))
    if (typeof value !== 'undefined' && value.length > 0) {
        if (typeof cipDOBFormatValid !== 'undefined' && cipDOBFormatValid) {
            var DOB = Date.parse(value)
            if (DOB >= minDate) {
                isValid = false
            } else {
                if (new Date(value).getDate() != value.split('/') [1] || (new Date(value).getMonth() + 1) != value.split('/') [0]) {
                    isValid = false
                } else {
                    isValid = true
                }
            }
        } else {
            isValid = true
        }
        return isValid
    }
}, 'You must be at least fifteen years of age to have access to this account.')
jQuery.validator.addMethod('time', function (value, element) {
    return this.optional(element) || /^([01][0-9])|(2[0123]):([0-5])([0-9])$/.test(value)
}, 'Please enter a valid time, between 00:00 and 23:59')
jQuery.validator.addMethod('USZipCodeValidate', function (value, element) {
    return this.optional(element) || /^\d{5}(-\d{4})?$/.test(value)
}, 'Please enter a valid zip code')
jQuery.validator.addMethod('nospecial', function (value, element, param) {
    var specialRegex = new RegExp('^[^' + param + ']*$')
    return this.optional(element) || specialRegex.test(value)
}, $.validator.format('Please don\'t use space or these special characters {0}'))
jQuery.validator.addMethod('iban', function (value, element) {
    if (this.optional(element)) {
        return true
    }
    if (!(/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(value))) {
        return false
    }
    var iban = value.replace(/ /g, '').toUpperCase()
    var countrycode = iban.substring(0, 2)
    var bbancountrypatterns = {
        AL: '\\d{8}[\\dA-Z]{16}',
        AD: '\\d{8}[\\dA-Z]{12}',
        AT: '\\d{16}',
        AZ: '[\\dA-Z]{4}\\d{20}',
        BE: '\\d{12}',
        BH: '[A-Z]{4}[\\dA-Z]{14}',
        BA: '\\d{16}',
        BR: '\\d{23}[A-Z][\\dA-Z]',
        BG: '[A-Z]{4}\\d{6}[\\dA-Z]{8}',
        CR: '\\d{17}',
        HR: '\\d{17}',
        CY: '\\d{8}[\\dA-Z]{16}',
        CZ: '\\d{20}',
        DK: '\\d{14}',
        DO: '[A-Z]{4}\\d{20}',
        EE: '\\d{16}',
        FO: '\\d{14}',
        FI: '\\d{14}',
        FR: '\\d{10}[\\dA-Z]{11}\\d{2}',
        GE: '[\\dA-Z]{2}\\d{16}',
        DE: '\\d{18}',
        GI: '[A-Z]{4}[\\dA-Z]{15}',
        GR: '\\d{7}[\\dA-Z]{16}',
        GL: '\\d{14}',
        GT: '[\\dA-Z]{4}[\\dA-Z]{20}',
        HU: '\\d{24}',
        IS: '\\d{22}',
        IE: '[\\dA-Z]{4}\\d{14}',
        IL: '\\d{19}',
        IT: '[A-Z]\\d{10}[\\dA-Z]{12}',
        KZ: '\\d{3}[\\dA-Z]{13}',
        KW: '[A-Z]{4}[\\dA-Z]{22}',
        LV: '[A-Z]{4}[\\dA-Z]{13}',
        LB: '\\d{4}[\\dA-Z]{20}',
        LI: '\\d{5}[\\dA-Z]{12}',
        LT: '\\d{16}',
        LU: '\\d{3}[\\dA-Z]{13}',
        MK: '\\d{3}[\\dA-Z]{10}\\d{2}',
        MT: '[A-Z]{4}\\d{5}[\\dA-Z]{18}',
        MR: '\\d{23}',
        MU: '[A-Z]{4}\\d{19}[A-Z]{3}',
        MC: '\\d{10}[\\dA-Z]{11}\\d{2}',
        MD: '[\\dA-Z]{2}\\d{18}',
        ME: '\\d{18}',
        NL: '[A-Z]{4}\\d{10}',
        NO: '\\d{11}',
        PK: '[\\dA-Z]{4}\\d{16}',
        PS: '[\\dA-Z]{4}\\d{21}',
        PL: '\\d{24}',
        PT: '\\d{21}',
        RO: '[A-Z]{4}[\\dA-Z]{16}',
        SM: '[A-Z]\\d{10}[\\dA-Z]{12}',
        SA: '\\d{2}[\\dA-Z]{18}',
        RS: '\\d{18}',
        SK: '\\d{20}',
        SI: '\\d{15}',
        ES: '\\d{20}',
        SE: '\\d{20}',
        CH: '\\d{5}[\\dA-Z]{12}',
        TN: '\\d{20}',
        TR: '\\d{5}[\\dA-Z]{17}',
        AE: '\\d{3}\\d{16}',
        GB: '[A-Z]{4}\\d{14}',
        VG: '[\\dA-Z]{4}\\d{16}'
    }
    var bbanpattern = bbancountrypatterns[countrycode]
    if (typeof bbanpattern !== 'undefined') {
        var ibanregexp = new RegExp('^[A-Z]{2}\\d{2}' + bbanpattern + '$', '')
        if (!(ibanregexp.test(iban))) {
            return false
        }
    }
    var ibancheck = iban.substring(4, iban.length) + iban.substring(0, 4)
    var ibancheckdigits = ''
    var leadingZeroes = true
    var charAt
    for (var i = 0; i < ibancheck.length; i++) {
        charAt = ibancheck.charAt(i)
        if (charAt !== '0') {
            leadingZeroes = false
        }
        if (!leadingZeroes) {
            ibancheckdigits += '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'.indexOf(charAt)
        }
    }
    var cRest = ''
    var cOperator = ''
    for (var p = 0; p < ibancheckdigits.length; p++) {
        var cChar = ibancheckdigits.charAt(p)
        cOperator = '' + cRest + '' + cChar
        cRest = cOperator % 97
    }
    return cRest === 1
}, 'Please specify a valid IBAN')
jQuery.validator.addMethod('dateNL', function (value, element) {
    return this.optional(element) || /^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(value)
}, 'Please enter a correct date')
jQuery.validator.addMethod('phoneNL', function (value, element) {
    return this.optional(element) || /^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(value)
}, 'Please specify a valid phone number.')
jQuery.validator.addMethod('mobileNL', function (value, element) {
    return this.optional(element) || /^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(value)
}, 'Please specify a valid mobile number')
jQuery.validator.addMethod('postalcodeNL', function (value, element) {
    return this.optional(element) || /^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(value)
}, 'Please specify a valid postal code')
jQuery.validator.addMethod('bankaccountNL', function (value, element) {
    if (this.optional(element)) {
        return true
    }
    if (!(/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(value))) {
        return false
    }
    var account = value.replace(/ /g, '')
    var sum = 0
    var len = account.length
    for (var pos = 0; pos < len; pos++) {
        var factor = len - pos
        var digit = account.substring(pos, pos + 1)
        sum = sum + factor * digit
    }
    return sum % 11 === 0
}, 'Please specify a valid bank account number')
jQuery.validator.addMethod('giroaccountNL', function (value, element) {
    return this.optional(element) || /^[0-9]{1,7}$/.test(value)
}, 'Please specify a valid giro account number')
jQuery.validator.addMethod('bankorgiroaccountNL', function (value, element) {
    return this.optional(element) || ($.validator.methods.bankaccountNL.call(this, value, element)) || ($.validator.methods.giroaccountNL.call(this, value, element))
}, 'Please specify a valid bank or giro account number')
jQuery.validator.addMethod('time', function (value, element) {
    return this.optional(element) || /^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(value)
}, 'Please enter a valid time, between 00:00 and 23:59')
jQuery.validator.addMethod('time12h', function (value, element) {
    return this.optional(element) || /^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(value)
}, 'Please enter a valid time in 12-hour am/pm format')
jQuery.validator.addMethod('phoneUS', function (phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, '')
    return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)
}, 'Please specify a valid phone number')
jQuery.validator.addMethod('phoneUK', function (phone_number, element) {
    phone_number = phone_number.replace(/\(|\)|\s+|-/g, '')
    return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)
}, 'Please specify a valid phone number')
jQuery.validator.addMethod('mobileUK', function (phone_number, element) {
    phone_number = phone_number.replace(/\(|\)|\s+|-/g, '')
    return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[45789]\d{2}|624)\s?\d{3}\s?\d{3})$/)
}, 'Please specify a valid mobile number')
jQuery.validator.addMethod('phonesUK', function (phone_number, element) {
    phone_number = phone_number.replace(/\(|\)|\s+|-/g, '')
    return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[45789]\d{8}|624\d{6})))$/)
}, 'Please specify a valid uk phone number')
jQuery.validator.addMethod('postcodeUK', function (value, element) {
    return this.optional(element) || /^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(value)
}, 'Please specify a valid UK postcode')
jQuery.validator.addMethod('strippedminlength', function (value, element, param) {
    return jQuery(value).text().length >= param
}, jQuery.validator.format('Please enter at least {0} characters'))
jQuery.validator.addMethod('email3', function (value, element, param) {
    return this.optional(element) || /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value)
}, jQuery.validator.format('Please enter valid email address'))
jQuery.validator.addMethod('email2', function (value, element, param) {
    return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value)
}, jQuery.validator.messages.email)
jQuery.validator.addMethod('url2', function (value, element, param) {
    return this.optional(element) || /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)
}, jQuery.validator.messages.url)
jQuery.validator.addMethod('creditcardtypes', function (value, element, param) {
    if (/[^0-9\-]+/.test(value)) {
        return false
    }
    value = value.replace(/\D/g, '')
    var validTypes = 0
    if (param.mastercard) {
        validTypes |= 1
    }
    if (param.visa) {
        validTypes |= 2
    }
    if (param.amex) {
        validTypes |= 4
    }
    if (param.dinersclub) {
        validTypes |= 8
    }
    if (param.enroute) {
        validTypes |= 16
    }
    if (param.discover) {
        validTypes |= 32
    }
    if (param.jcb) {
        validTypes |= 64
    }
    if (param.unknown) {
        validTypes |= 128
    }
    if (param.all) {
        validTypes = 1 | 2 | 4 | 8 | 16 | 32 | 64 | 128
    }
    if (validTypes & 1 && /^(5[12345])/.test(value)) {
        return value.length === 16
    }
    if (validTypes & 2 && /^(4)/.test(value)) {
        return value.length === 16
    }
    if (validTypes & 4 && /^(3[47])/.test(value)) {
        return value.length === 15
    }
    if (validTypes & 8 && /^(3(0[012345]|[68]))/.test(value)) {
        return value.length === 14
    }
    if (validTypes & 16 && /^(2(014|149))/.test(value)) {
        return value.length === 15
    }
    if (validTypes & 32 && /^(6011)/.test(value)) {
        return value.length === 16
    }
    if (validTypes & 64 && /^(3)/.test(value)) {
        return value.length === 16
    }
    if (validTypes & 64 && /^(2131|1800)/.test(value)) {
        return value.length === 15
    }
    if (validTypes & 128) {
        return true
    }
    return false
}, 'Please enter a valid credit card number.')
jQuery.validator.addMethod('ipv4', function (value, element, param) {
    return this.optional(element) || /^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(value)
}, 'Please enter a valid IP v4 address.')
jQuery.validator.addMethod('ipv6', function (value, element, param) {
    return this.optional(element) || /^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(value)
}, 'Please enter a valid IP v6 address.')
jQuery.validator.addMethod('pattern', function (value, element, param) {
    if (this.optional(element)) {
        return true
    }
    if (typeof param === 'string') {
        param = new RegExp('^(?:' + param + ')$')
    }
    return param.test(value)
}, 'Invalid format.')
jQuery.validator.addMethod('require_from_group', function (value, element, options) {
    var validator = this
    var selector = options[1]
    var validOrNot = $(selector, element.form).filter(function () {
        return validator.elementValue(this)
    }).length >= options[0]
    if (!$(element).data('being_validated')) {
        var fields = $(selector, element.form)
        fields.data('being_validated', true)
        fields.valid()
        fields.data('being_validated', false)
    }
    return validOrNot
}, jQuery.format('Please fill at least {0} of these fields.'))
jQuery.validator.addMethod('skip_or_fill_minimum', function (value, element, options) {
    var validator = this,
        numberRequired = options[0],
        selector = options[1]
    var numberFilled = $(selector, element.form).filter(function () {
        return validator.elementValue(this)
    }).length
    var valid = numberFilled >= numberRequired || numberFilled === 0
    if (!$(element).data('being_validated')) {
        var fields = $(selector, element.form)
        fields.data('being_validated', true)
        fields.valid()
        fields.data('being_validated', false)
    }
    return valid
}, jQuery.format('Please either skip these fields or fill at least {0} of them.'))
jQuery.validator.addMethod('accept', function (value, element, param) {
    var typeParam = typeof param === 'string' ? param.replace(/\s/g, '').replace(/,/g, '|') : 'image/*',
        optionalValue = this.optional(element),
        i,
        file
    if (optionalValue) {
        return optionalValue
    }
    if ($(element).attr('type') === 'file') {
        typeParam = typeParam.replace(/\*/g, '.*')
        if (element.files && element.files.length) {
            for (i = 0; i < element.files.length; i++) {
                file = element.files[i]
                if (!file.type.match(new RegExp('.?(' + typeParam + ')$', 'i'))) {
                    return false
                }
            }
        }
    }
    return true
}, jQuery.format('Please enter a value with a valid mimetype.'))
jQuery.validator.addMethod('extension', function (value, element, param) {
    param = typeof param === 'string' ? param.replace(/,/g, '|') : 'png|jpe?g|gif'
    return this.optional(element) || value.match(new RegExp('.(' + param + ')$', 'i'))
}, jQuery.format('Please enter a value with a valid extension.'));
(function ($) {
    $.widget('ui.selectmenu', {
        getter: 'value',
        version: '1.8',
        eventPrefix: 'selectmenu',
        options: {
            noCreate: navigator.appVersion.indexOf('MSIE 7.') != -1 || navigator.appVersion.indexOf('MSIE 8.') != -1,
            transferClasses: true,
            typeAhead: 'sequential',
            style: 'dropdown',
            positionOptions: {
                my: 'left top',
                at: 'left bottom',
                offset: null
            },
            width: null,
            menuWidth: null,
            handleWidth: 26,
            paddingWidth: 14,
            statusSpanRightPadding: 26,
            maxHeight: null,
            icons: null,
            format: null,
            bgImage: function () {
            },
            wrapperElement: '',
            menuOverhangLine: false,
            menuOverhangPositionOptions: {
                my: 'left bottom',
                at: 'right bottom',
                offset: null
            },
            menuOverhangTopSpacing: true,
            truncateSelectValue: null,
            truncateOptions: null,
            attachToBody: false
        },
        _create: function () {
            var self = this,
                o = this.options
            var selectmenuId = this.element.attr('id') || 'ui-selectmenu-' + Math.random().toString(16).slice(2, 10)
            this.ids = [
                selectmenuId + '-cs',
                selectmenuId + '-cs-menu'
            ]
            this._safemouseup = true
            if ($.browser.msie) {
                o.typeAhead = ''
            }
            if (!this.widgetBaseClass) {
                this.widgetBaseClass = this.widgetFullName ? this.widgetFullName : 'ui-selectmenu'
            }
            this.newelement = $('<div  aria-live="assertive" class="' + this.widgetBaseClass + ' ui-widget ui-state-default ui-corner-all" id="' + this.ids[0] + '" role="combobox" href="#" tabindex="0" aria-haspopup="true" aria-owns="' + this.ids[1] + '"></div>').insertAfter(this.element)
            this.newelement.wrap(o.wrapperElement)
            var tabindex = this.element.attr('tabindex')
            if (tabindex) {
                this.newelement.attr('tabindex', tabindex)
            }
            this.newelement.data('selectelement', this.element)
            this.selectmenuIcon = $('<span class="' + this.widgetBaseClass + '-icon ui-icon"></span>').prependTo(this.newelement)
            this.selectmenuStatus = $('<span class="' + self.widgetBaseClass + '-status" />').prependTo(this.newelement)
            $('label[for="' + this.element.attr('id') + '"]').attr('for', this.ids[0]).bind('click.selectmenu', function (event) {
                self.newelement[0].focus()
                boaTLAddEvent(event)
                return false
            })
            this.newelement.bind('mousedown.selectmenu', function (event) {
                self._toggle(event, true)
                if (o.style == 'popup') {
                    self._safemouseup = false
                    setTimeout(function () {
                        self._safemouseup = true
                    }, 300)
                }
                boaTLAddEvent(event)
                return false
            }).bind('click.selectmenu', function (event) {
                boaTLAddEvent(event)
                return false
            }).bind('keydown.selectmenu', function (event) {
                var ret = false
                switch (event.keyCode) {
                    case $.ui.keyCode.ENTER:
                        ret = true
                        break
                    case $.ui.keyCode.SPACE:
                        self._toggle(event)
                        break
                    case $.ui.keyCode.UP:
                        if (event.altKey) {
                            self.open(event)
                        } else {
                            self._moveSelection(-1)
                        }
                        break
                    case $.ui.keyCode.DOWN:
                        if (event.altKey) {
                            self.open(event)
                        } else {
                            self._toggle(event, true)
                        }
                        break
                    case $.ui.keyCode.LEFT:
                        self._moveSelection(-1)
                        break
                    case $.ui.keyCode.RIGHT:
                        self._moveSelection(1)
                        break
                    case $.ui.keyCode.TAB:
                        ret = true
                        break
                    default:
                        ret = true
                        self._typeAhead(event.keyCode, 'mouseup')
                        break
                }
                boaTLAddEvent(event)
                return ret
            }).bind('mouseover.selectmenu focus.selectmenu', function () {
                if (!o.disabled) {
                    $(this).addClass(self.widgetBaseClass + '-focus ui-state-hover')
                }
            }).bind('mouseout.selectmenu blur.selectmenu', function () {
                if (!o.disabled) {
                    $(this).removeClass(self.widgetBaseClass + '-focus ui-state-hover')
                }
            })
            $(document).bind('mousedown.selectmenu', function (event) {
                self.close(event)
            })
            this.element.bind('click.selectmenu', function () {
                self._refreshValue()
            }).bind('focus.selectmenu', function () {
                if (this.newelement) {
                    this.newelement[0].focus()
                }
            })
            if (navigator.userAgent.indexOf('Mac') != -1 && $.browser.mozilla) {
                o.paddingWidth = 30
            }
            var selectWidth = this.element.width() + o.paddingWidth
            this.newelement.width(o.width ? o.width : selectWidth)
            this.selectmenuStatus.width(this.newelement.width() - o.statusSpanRightPadding)
            this.element.hide()
            if (o.attachToBody) {
                this.list = $('<ul class="' + self.widgetBaseClass + '-menu ui-widget ui-widget-content" aria-hidden="true" aria-expanded="true" role="listbox" aria-labelledby="' + this.ids[0] + '" id="' + this.ids[1] + '"></ul>').appendTo('body')
            } else {
                this.list = $('<ul class="' + self.widgetBaseClass + '-menu ui-widget ui-widget-content" aria-hidden="true" aria-expanded="true" role="listbox" aria-labelledby="' + this.ids[0] + '" id="' + this.ids[1] + '"></ul>').insertAfter(this.newelement)
            }
            if (o.menuOverhangLine) {
                this.overhang = $('<div id="' + this.ids[1] + '-overhang" class="ui-selectmenu-overhang"><!-- --></div>').insertBefore(this.list)
            }
            this.list.wrap(o.wrapperElement)
            this.list.bind('keydown.selectmenu', function (event) {
                var ret = false
                switch (event.keyCode) {
                    case $.ui.keyCode.UP:
                        if (event.altKey) {
                            self.close(event, true)
                        } else {
                            self._moveFocus(-1)
                        }
                        break
                    case $.ui.keyCode.DOWN:
                        if (event.altKey) {
                            self.close(event, true)
                        } else {
                            self._moveFocus(1)
                        }
                        break
                    case $.ui.keyCode.LEFT:
                        self._moveFocus(-1)
                        break
                    case $.ui.keyCode.RIGHT:
                        self._moveFocus(1)
                        break
                    case $.ui.keyCode.HOME:
                        self._moveFocus(':first')
                        break
                    case $.ui.keyCode.PAGE_UP:
                        self._scrollPage('up')
                        break
                    case $.ui.keyCode.PAGE_DOWN:
                        self._scrollPage('down')
                        break
                    case $.ui.keyCode.END:
                        self._moveFocus(':last')
                        break
                    case $.ui.keyCode.ENTER:
                    case $.ui.keyCode.SPACE:
                        self.close(event, true)
                        $(event.target).parents('li:eq(0)').trigger('mouseup')
                        break
                    case $.ui.keyCode.TAB:
                        ret = true
                        self.close(event, true)
                        break
                    case $.ui.keyCode.ESCAPE:
                        self.close(event, true)
                        break
                    default:
                        ret = true
                        self._typeAhead(event.keyCode, 'focus')
                        break
                }
                boaTLAddEvent(event)
                return ret
            })
            $(window).bind('resize.selectmenu', $.proxy(self._refreshPosition, this))
        }, _init: function () {
            var self = this,
                o = this.options
            var selectOptionData = []
            this.element.find('option').each(function () {
                selectOptionData.push({
                    value: $(this).attr('value'),
                    text: self._formatText($(this).text()),
                    selected: $(this).attr('selected'),
                    classes: $(this).attr('class'),
                    typeahead: $(this).attr('typeahead'),
                    parentOptGroup: $(this).parent('optgroup').attr('label'),
                    bgImage: o.bgImage.call($(this))
                })
            })
            var activeClass = (self.options.style == 'popup') ? ' ui-state-active' : ''
            this.list.html('')
            for (var i = 0; i < selectOptionData.length; i++) {
                var thisLi = $('<li id="' + this.ids[1] + '-item' + i + '" role="presentation"><div role="option" tabindex="-1"' + (selectOptionData[i].typeahead ? ' typeahead="' + selectOptionData[i].typeahead + '"' : '') + '>' + selectOptionData[i].text + '</div></li>').data('index', i).addClass(selectOptionData[i].classes).data('optionClasses', selectOptionData[i].classes || '').bind('mouseup.selectmenu', function (event) {
                    if (self._safemouseup) {
                        var changed = $(this).data('index') != self._selectedIndex()
                        self.index($(this).data('index'))
                        self.select(event)
                        if (changed) {
                            self.change(event)
                        }
                        self.close(event, true)
                    }
                    boaTLAddEvent(event)
                    return false
                }).bind('click.selectmenu', function (event) {
                    boaTLAddEvent(event)
                    return false
                }).bind('mouseover.selectmenu focus.selectmenu', function () {
                    self._selectedOptionLi().addClass(activeClass)
                    self._focusedOptionLi().removeClass(self.widgetBaseClass + '-item-focus ui-state-hover')
                    $(this).removeClass('ui-state-active').addClass(self.widgetBaseClass + '-item-focus ui-state-hover')
                }).bind('mouseout.selectmenu blur.selectmenu', function () {
                    if ($(this).attr('aria-selected') == 'true') {
                        $(this).addClass(activeClass)
                    }
                    $(this).removeClass(self.widgetBaseClass + '-item-focus ui-state-hover')
                })
                if (selectOptionData[i].parentOptGroup) {
                    var optGroupName = self.widgetBaseClass + '-group-' + selectOptionData[i].parentOptGroup.replace(/[^a-zA-Z0-9]/g, '')
                    if (this.list.find('li.' + optGroupName).size()) {
                        this.list.find('li.' + optGroupName + ':last ul').append(thisLi)
                    } else {
                        $('<li role="presentation" class="' + self.widgetBaseClass + '-group ' + optGroupName + '"><span class="' + self.widgetBaseClass + '-group-label">' + selectOptionData[i].parentOptGroup + '</span><ul></ul></li>').appendTo(this.list).find('ul').append(thisLi)
                    }
                } else {
                    thisLi.appendTo(this.list)
                }
                if (o.icons) {
                    for (var j in o.icons) {
                        if (thisLi.is(o.icons[j].find)) {
                            thisLi.data('optionClasses', selectOptionData[i].classes + ' ' + self.widgetBaseClass + '-hasIcon').addClass(self.widgetBaseClass + '-hasIcon')
                            var iconClass = o.icons[j].icon || ''
                            thisLi.find('div:eq(0)').prepend('<span class="' + self.widgetBaseClass + '-item-icon ui-icon ' + iconClass + '"></span>')
                            if (selectOptionData[i].bgImage) {
                                thisLi.find('span').css('background-image', selectOptionData[i].bgImage)
                            }
                        }
                    }
                }
            }
            this.list.bind('mousedown.selectmenu mouseup.selectmenu', function (event) {
                boaTLAddEvent(event)
                return false
            })
            var isDropDown = (o.style == 'dropdown')
            this.newelement.toggleClass(self.widgetBaseClass + '-dropdown', isDropDown).toggleClass(self.widgetBaseClass + '-popup', !isDropDown)
            this.list.toggleClass(self.widgetBaseClass + '-menu-dropdown ui-corner-bottom', isDropDown).toggleClass(self.widgetBaseClass + '-menu-popup ui-corner-all', !isDropDown).find('li:first').toggleClass('ui-corner-top', !isDropDown).end().find('li:last').addClass('ui-corner-bottom')
            this.selectmenuIcon.toggleClass('ui-icon-triangle-1-s', isDropDown).toggleClass('ui-icon-triangle-2-n-s', !isDropDown)
            if (o.transferClasses) {
                var transferClasses = this.element.attr('class') || ''
                this.newelement.add(this.list).addClass(transferClasses)
            }
            if (navigator.userAgent.indexOf('Mac') != -1 && $.browser.mozilla) {
                o.paddingWidth = 30
            }
            var selectWidth = this.element.width() + o.paddingWidth
            if (o.style == 'dropdown') {
                var optionWidth = this.element.find('option').first().width()
                this.list.width(o.menuWidth ? o.menuWidth : (optionWidth ? optionWidth : (o.width ? o.width : selectWidth)))
            } else {
                this.list.width(o.menuWidth ? o.menuWidth : (o.width ? o.width - o.handleWidth : selectWidth - o.handleWidth))
            }
            if (o.maxHeight) {
                if (o.maxHeight < this.list.height()) {
                    this.list.height(o.maxHeight)
                }
            } else {
                if (!o.format && ($(window).height() / 3) < this.list.height()) {
                    o.maxHeight = $(window).height() / 3
                    this.list.height(o.maxHeight)
                }
            }
            this._optionLis = this.list.find('li:not(.' + self.widgetBaseClass + '-group)')
            if (this.element.attr('disabled') === true) {
                this.disable()
            }
            this.index(this._selectedIndex())
            window.setTimeout(function () {
                self._refreshPosition()
            }, 200)
        }, destroy: function () {
            this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass + '-disabled ' + this.namespace + '-state-disabled').removeAttr('aria-disabled').unbind('.selectmenu')
            $(window).unbind('.selectmenu')
            $(document).unbind('.selectmenu')
            $('label[for=' + this.newelement.attr('id') + ']').attr('for', this.element.attr('id')).unbind('.selectmenu')
            if (this.options.wrapperElement) {
                this.newelement.find(this.options.wrapperElement).remove()
                this.list.find(this.options.wrapperElement).remove()
            } else {
                this.newelement.remove()
                this.list.remove()
            }
            if (this.options.menuOverhangLine) {
                this.overhang.remove()
            }
            this.element.show()
            $.Widget.prototype.destroy.apply(this, arguments)
        }, _typeAhead: function (code, eventType) {
            var self = this,
                focusFound = false,
                C = String.fromCharCode(code)
            c = C.toLowerCase()
            if (self.options.typeAhead == 'sequential') {
                window.clearTimeout('ui.selectmenu-' + self.selectmenuId)
                var find = typeof (self._prevChar) == 'undefined' ? '' : self._prevChar.join('')

                function focusOptSeq(elem, ind, c) {
                    focusFound = true
                    $(elem).trigger(eventType)
                    typeof (self._prevChar) == 'undefined' ? self._prevChar = [
                        c
                    ] : self._prevChar[self._prevChar.length] = c
                }

                this.list.find('li div').each(function (i) {
                    if (!focusFound) {
                        var thisText = $(this).attr('typeahead') || $(this).text()
                        if (thisText.indexOf(find + C) == 0) {
                            focusOptSeq(this, i, C)
                        } else {
                            if (thisText.indexOf(find + c) == 0) {
                                focusOptSeq(this, i, c)
                            }
                        }
                    }
                })
                if (!focusFound) {
                }
                window.setTimeout(function (el) {
                    el._prevChar = undefined
                }, 1000, self)
            } else {
                if (!self._prevChar) {
                    self._prevChar = [
                        '',
                        0
                    ]
                }
                var focusFound = false

                function focusOpt(elem, ind) {
                    focusFound = true
                    $(elem).trigger(eventType)
                    self._prevChar[1] = ind
                }

                this.list.find('li div').each(function (i) {
                    if (!focusFound) {
                        var thisText = $(this).text()
                        if (thisText.indexOf(C) == 0 || thisText.indexOf(c) == 0) {
                            if (self._prevChar[0] == C) {
                                if (self._prevChar[1] < i) {
                                    focusOpt(this, i)
                                }
                            } else {
                                focusOpt(this, i)
                            }
                        }
                    }
                })
                this._prevChar[0] = C
            }
        }, _uiHash: function () {
            var index = this.index()
            return {
                index: index,
                option: $('option', this.element).get(index),
                value: this.element[0].value
            }
        }, open: function (event) {
            var self = this
            if (this.newelement.attr('aria-disabled') != 'true') {
                this._closeOthers(event)
                this.newelement.addClass('ui-state-active')
                if (self.options.wrapperElement && !self.options.attachToBody) {
                    this.list.parent().insertAfter(this.newelement)
                } else {
                    if (!self.options.attachToBody) {
                        this.list.insertAfter(this.newelement)
                    }
                }
                this.list.attr('aria-hidden', false)
                if (this.options.style == 'dropdown') {
                    this.newelement.removeClass('ui-corner-all').addClass('ui-corner-top')
                    if (this.options.menuOverhangLine) {
                        this.overhang.addClass(self.widgetBaseClass + '-open')
                    }
                }
                this._refreshPosition()
                this.list.addClass(self.widgetBaseClass + '-open').find('li:not(.' + self.widgetBaseClass + '-group):eq(' + this._selectedIndex() + ') div').focus()
                this.list.css('z-index', this.list.css('z-index') + 100)
                this._trigger('open', event, this._uiHash())
            }
        }, close: function (event, retainFocus) {
            if (this.newelement.is('.ui-state-active')) {
                this.newelement.removeClass('ui-state-active')
                this.list.attr('aria-hidden', true).removeClass(this.widgetBaseClass + '-open')
                if (this.options.style == 'dropdown') {
                    this.newelement.removeClass('ui-corner-top').addClass('ui-corner-all')
                    if (this.options.menuOverhangLine) {
                        this.overhang.removeClass(this.widgetBaseClass + '-open')
                    }
                }
                if (retainFocus) {
                    this.newelement.focus()
                }
                this._trigger('close', event, this._uiHash())
            }
        }, change: function (event) {
            this.element.trigger('change')
            this._trigger('change', event, this._uiHash())
        }, select: function (event) {
            this._trigger('select', event, this._uiHash())
        }, _closeOthers: function (event) {
            $('.' + this.widgetBaseClass + '.ui-state-active').not(this.newelement).each(function () {
                $(this).data('selectelement').selectmenu('close', event)
            })
            $('.' + this.widgetBaseClass + '.ui-state-hover').trigger('mouseout')
        }, _toggle: function (event, retainFocus) {
            if (this.list.is('.' + this.widgetBaseClass + '-open')) {
                this.close(event, retainFocus)
            } else {
                this.open(event)
            }
        }, _formatText: function (text) {
            return (this.options.format ? this.options.format(text) : text)
        }, _selectedIndex: function () {
            return this.element[0].selectedIndex
        }, _selectedOptionLi: function () {
            return this._optionLis.eq(this._selectedIndex())
        }, _focusedOptionLi: function () {
            return this.list.find('.' + this.widgetBaseClass + '-item-focus')
        }, _moveSelection: function (amt) {
            var currIndex = parseInt(this._selectedOptionLi().data('index'), 10)
            var newIndex = currIndex + amt
            return this._optionLis.eq(newIndex).trigger('mouseup')
        }, _moveFocus: function (amt) {
            if (!isNaN(amt)) {
                var currIndex = parseInt(this._focusedOptionLi().data('index') || 0, 10)
                var newIndex = currIndex + amt
            } else {
                var newIndex = parseInt(this._optionLis.filter(amt).data('index'), 10)
            }
            if (newIndex < 0) {
                newIndex = 0
            }
            if (newIndex > this._optionLis.size() - 1) {
                newIndex = this._optionLis.size() - 1
            }
            this._focusedOptionLi().find('div:eq(0)')
            this._optionLis.eq(newIndex).find('div:eq(0)').focus()
        }, _scrollPage: function (direction) {
            var numPerPage = Math.floor(this.list.outerHeight() / this.list.find('li:first').outerHeight())
            numPerPage = (direction == 'up' ? -numPerPage : numPerPage)
            this._moveFocus(numPerPage)
        }, _setOption: function (key, value) {
            this.options[key] = value
            if (key == 'disabled') {
                this.close()
                this.element.add(this.newelement).add(this.list) [value ? 'addClass' : 'removeClass'](this.widgetBaseClass + '-disabled ' + this.namespace + '-state-disabled').attr('aria-disabled', value)
            }
        }, index: function (newValue) {
            if (arguments.length) {
                this.element[0].selectedIndex = newValue
                this._refreshValue()
            } else {
                return this._selectedIndex()
            }
        }, value: function (newValue) {
            if (arguments.length) {
                this.element[0].value = newValue
                this._refreshValue()
            } else {
                return this.element[0].value
            }
        }, _refreshValue: function () {
            var activeClass = (this.options.style == 'popup') ? ' ui-state-active' : ''
            this.list.find('.' + this.widgetBaseClass + '-item-selected').removeClass(this.widgetBaseClass + '-item-selected' + activeClass).find('div').attr('aria-selected', 'false')
            this._selectedOptionLi().addClass(this.widgetBaseClass + '-item-selected' + activeClass).find('div').attr('aria-selected', 'true')
            var currentOptionClasses = (this.newelement.data('optionClasses') ? this.newelement.data('optionClasses') : '')
            var newOptionClasses = (this._selectedOptionLi().data('optionClasses') ? this._selectedOptionLi().data('optionClasses') : '')
            var selectDisplayText
            if (this.options.truncateSelectValue) {
                selectDisplayText = this.options.truncateSelectValue(this._selectedOptionLi().find('div:eq(0)').html().replace(/<(.|\n)*?>/g, ''), this.options.truncateOptions)
            } else {
                selectDisplayText = this._selectedOptionLi().find('div:eq(0)').html()
            }
            this.newelement.removeClass(currentOptionClasses).data('optionClasses', newOptionClasses).addClass(newOptionClasses).find('.' + this.widgetBaseClass + '-status').html(selectDisplayText)
        }, _refreshPosition: function () {
            var o = this.options
            if (o.style == 'popup' && !o.positionOptions.offset) {
                var selected = this._selectedOptionLi()
                var _offset = '0 -' + (selected.outerHeight() + selected.offset().top - this.list.offset().top)
            }
            this.list.css({
                zIndex: $.isFunction(this.element.zIndex) ? this.element.zIndex() : '1000'
            }).position({
                of: o.positionOptions.of || this.newelement,
                my: o.positionOptions.my,
                at: o.positionOptions.at,
                collision: 'none',
                offset: o.positionOptions.offset || _offset
            })
            if (o.style == 'dropdown' && o.menuOverhangLine) {
                this.overhang.css({
                    zIndex: $.isFunction(this.element.zIndex) ? this.element.zIndex() : '1000'
                }).width(this.list.width() - this.newelement.width()).position({
                    of: o.positionOptions.of || this.newelement,
                    my: o.menuOverhangPositionOptions.my,
                    at: o.menuOverhangPositionOptions.at,
                    collision: 'none',
                    offset: o.positionOptions.offset
                })
            }
        }
    })
})(jQuery)
$.extend({
    boaConvertTo3LineOption: function (text) {
        var newText = text
        var findreps = [
            {
                find: /^([^\|]+) \|\| /g,
                rep: '<span class="ui-selectmenu-item-header">$1 </span>'
            },
            {
                find: /([^\|><]+) \| /g,
                rep: '<span class="ui-selectmenu-item-content">$1 </span>'
            },
            {
                find: /([^\|><\(\)]+) (\()/g,
                rep: '<span class="ui-selectmenu-item-content">$1 </span>$2'
            },
            {
                find: /([^\|><\(\)]+)$/g,
                rep: '<span class="ui-selectmenu-item-content">$1 </span>'
            },
            {
                find: /(\([^\|><]+\))$/g,
                rep: '<span class="ui-selectmenu-item-footer">$1 </span>'
            }
        ]
        for (var i in findreps) {
            newText = newText.replace(findreps[i].find, findreps[i].rep)
        }
        return newText
    }
})
$.extend({
    boaSelectDisplayTruncate: function (displayText, options) {
        var truncateOptions = {
            splitLocation: 12,
            endingStringMarker: '-',
            endingStringLength: 5,
            ellipsis: '... ',
            maxLength: 20
        }
        var displayTextLength = displayText.length
        if (options) {
            $.extend(truncateOptions, options)
        }
        var lastWordStartIndex = displayText.indexOf(truncateOptions.endingStringMarker)
        var lastWordLength
        var displayTextWords = new Array()
        displayTextWords = displayText.split(' ')
        for (var i = 0; i < displayTextWords.length; i++) {
            if (displayTextWords[i].indexOf(truncateOptions.endingStringMarker) != -1) {
                lastWordLength = displayTextWords[i].length
            }
        }
        if (displayTextLength > truncateOptions.maxLength) {
            if (truncateOptions.splitLocation != -1) {
                displayText = displayText.substring(0, truncateOptions.splitLocation) + truncateOptions.ellipsis + displayText.substring(lastWordStartIndex, (lastWordStartIndex + 1)) + displayText.substring((lastWordStartIndex + lastWordLength - 4), (lastWordStartIndex + lastWordLength))
            }
        }
        return displayText
    }
})
$(function () {
    if (navigator.appVersion.indexOf('MSIE 7.') != -1 || navigator.appVersion.indexOf('MSIE 8.') != -1) {
        $('select.select-IE78').each(function () {
            $(this).data('origWidth', $(this).outerWidth()).bind('mouseenter', function () {
                $(this).css('width', 'auto')
            }).bind('blur change', function () {
                $(this).css('width', $(this).data('origWidth'))
            })
        })
    }
})
$(document).ready(function () {
    $('.custom-select:visible').selectmenu()
})
var EmbedVideoPlayerUtil = {
    config: {
        width: '560',
        height: '315',
        bgcolor: '#000',
        playerKey: 'AQ~~,AAAABUmiWYk~,cCKnzuOBJDjbhfilL6H_MUuDQWw7B4-s',
        playerID: '3189288757001',
        playBtnTxt: 'Play video',
        seekBtnTxt: 'Control ALT N to seek forward and Control ALT M to seek backward',
        captionMenuTxt: 'Closed caption menu. To move through items press tab.',
        captionMenuOffTxt: 'Off',
        captionMenuEnglishTxt: 'English',
        volumeBtnTxt: 'Mute Video Press Space Bar to activate or, Control ALT N to increase volume and Control ALT M to decrease volume',
        cmPageId: '',
        videoAutoPlay: false
    },
    $overlays: $(),
    init: function (config) {
        this.config = $.extend(this.config, config)
        this.structure._build()
        this.BrightCovePlayer._embed()
        this.overlays._build()
    },
    structure: {
        _build: function () {
            var config = EmbedVideoPlayerUtil.config,
                $video = $('#' + config.wrapperId),
                wrapper = 'bofaVideo',
                overlays = 'overlays'
            if (!$video.parent().hasClass(wrapper)) {
                var $wrap = $('<div class="' + wrapper + '"></div>').insertBefore($video)
                $video.find('.' + overlays).appendTo($wrap)
                $wrap.prepend($video.clone(true).empty())
                $video.removeAttr('id').addClass('hide')
            }
        }
    },
    events: {
        ready: function () {
            $(document).trigger('refresh')
        }
    },
    overlays: {
        _show: function (e) {
            var time = parseFloat($(e.target).attr('data-current-time'))
            $overlays.each(function () {
                var $o = $(this),
                    start = $o.data('start-time'),
                    end = $o.data('end-time')
                if (start > end && end > 0) {
                    start = end
                    end = $o.data('start-time')
                }
                if (time >= start && (time <= end || end === 0)) {
                    $o.show().focus()
                } else {
                    $o.hide()
                }
            })
        },
        _build: function () {
            var config = EmbedVideoPlayerUtil.config,
                $container = $('#' + config.wrapperId),
                $overlayContainer = $container.siblings('.overlays')
            $overlays = $overlayContainer.children()
            $overlays.each(function () {
                var $item = $(this)
                if ($item.data('top')) {
                    $item.css({
                        top: $item.data('top') + 'px',
                        bottom: 'auto'
                    })
                }
                if ($item.data('left')) {
                    $item.css({
                        left: $item.data('left') + 'px',
                        right: 'auto'
                    })
                }
                if ($item.data('width')) {
                    $item.css({
                        width: $item.data('width') + 'px'
                    })
                }
                if ($item.data('height')) {
                    $item.css({
                        height: $item.data('height') + 'px'
                    })
                }
                $item.addClass('overlay').appendTo($container)
            })
            $('#' + EmbedVideoPlayerUtil.config.wrapperId).parent().bind('PROGRESS', EmbedVideoPlayerUtil.overlays._show)
            $overlayContainer.remove()
        }
    },
    BrightCovePlayer: {
        player: '',
        videoPlayer: '',
        videoExperience: '',
        isHTML5: false,
        _embed: function () {
            this._loadPlayer()
        },
        _loadPlayer: function () {
            EmbedVideoPlayerUtil.BrightCovePlayer.isHTML5 = false
            var c = EmbedVideoPlayerUtil.config,
                secure = (window.location.protocol === 'https:'),
                bcServer = '//' + (secure ? 's' : '') + 'admin.brightcove.com',
                parameters = ' <param name="bgcolor" value="' + c.bgcolor + '" /> <param name="width" value="' + c.width + '" /> <param name="height" value="' + c.height + '" /> <param name="allowScriptAccess" value="sameDomain" /> <param name="allowFullScreen" value="' + c.allowFullScreen + '" /> <param name="wmode" value="transparent" /> <param name="isVid" value="true" /> <param name="isUI" value="true" /> <param name="dynamicStreaming" value="true" /> <param name="@videoPlayer" value="' + c.videoSrc + '" /> <param name="secureConnections" value="' + secure + '" /> <param name="secureHTMLConnections" value="' + secure + '" /> <param name="playerID" value="' + c.playerID + '" /> <param name="playerKey" value="' + c.playerKey + '" /> <param name="includeAPI" value="true" /> <param name="templateLoadHandler" value="EmbedVideoPlayerUtil.BrightCovePlayer.onTemplateLoad" /> <param name="templateReadyHandler" value="EmbedVideoPlayerUtil.BrightCovePlayer.onTemplateReady" />',
                html = '<div class="video"><object id="bofaVideoExperience" class="BrightcoveExperience" title="HTML5 video player">' + parameters + '</object></div>'
            $('#' + c.wrapperId).css({
                width: c.width,
                height: c.height
            }).html(html)
            var url = bcServer + '/js/BrightcoveExperiences_all.js'
            if (EmbedVideoPlayerUtil.BrightCovePlayer.isHTML5) {
                url = bcServer + '/js/BrightcoveExperiences.js'
            }
            $.ajax({
                url: url,
                dataType: 'script',
                success: function () {
                    if ($.isPlainObject(brightcove)) {
                        brightcove.createExperiences()
                    }
                },
                error: function () {
                    EmbedVideoPlayerUtil.events.ready()
                }
            })
        }
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.videoSeekCounter = 0
EmbedVideoPlayerUtil.BrightCovePlayer.seekBarLength = ''
EmbedVideoPlayerUtil.BrightCovePlayer.videoDuration = ''
EmbedVideoPlayerUtil.BrightCovePlayer.videoCaption = ''
EmbedVideoPlayerUtil.BrightCovePlayer.appendControls = function () {
    var c = EmbedVideoPlayerUtil.config,
        bar = '<div class="video-control-bar" style="width:' + c.width + 'px"><ul><li><button id="playButton" class="video-control play-button"><span class="ada-hidden">' + c.playBtnTxt + '</span></button></li><li class="progress-control" style="width:' + (c.width - 210) + 'px"><button id="videoSeekButton" class="video-control video-seek-handle"><span class="ada-hidden">' + c.seekBtnTxt + '</span></button><div aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" tabindex="-1" class="progress-wrapper" aria-label="Progress"><div class="video-play-progress"><span class="ada-hidden">Progress: 0%</span></div></div></li><li class="video-control control-text"><span class="video-playing-time">00:00</span><span class="time-divider">/</span><span class="video-duration-time"></span></li><li><button class="video-control video-caption"><span class="ada-hidden">' + c.captionMenuTxt + '</span></button><ul class="caption-menu"><li class="caption-menu-title">Captions</li><li class="caption-menu-item"><a href="javascript:void(0)" name="ancbrightcoveCaptionOffBtn" id="captionOffBtn"><span class="ada-hidden">Caption </span>' + c.captionMenuOffTxt + '</a></li><li class="caption-menu-item"><a href="javascript:void(0)" name="ancbrightcoveCaptionEnglishBtn" id="captionEnglishBtn"><span class="ada-hidden">Caption </span>' + c.captionMenuEnglishTxt + '</a></li></ul></li><li><button id="volumeBtn" class="video-control voulme-button"><span class="ada-hidden">' + EmbedVideoPlayerUtil.config.volumeBtnTxt + '</span></button><div aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="volume-bar" aria-label="Volume"><div class="volume-level"><span class="control-text"></span></div><div class="volume-handle"><span class="control-text"></span></div></div><div class="volume-bar-fill"></div></li></ul><div class="clearboth"></div></div>',
        $bar = $(bar)
    $('#' + EmbedVideoPlayerUtil.config.wrapperId).after($bar)
    setTimeout(function () {
        $bar.addClass('open')
    }, 800)
    setTimeout(function () {
        $bar.addClass('overflow')
    }, 1500)
    EmbedVideoPlayerUtil.BrightCovePlayer.appendTranscript()
    if (!$('html').hasClass('platform-handheld') && !$('html').hasClass('platform-tablet')) {
        EmbedVideoPlayerUtil.BrightCovePlayer.setVideoTime()
        EmbedVideoPlayerUtil.BrightCovePlayer.bindEvents()
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.appendTranscript = function () {
    if (typeof EmbedVideoPlayerUtil.config.transcriptUrl != 'undefined' && EmbedVideoPlayerUtil.config.transcriptUrl.length > 0) {
        $.get(EmbedVideoPlayerUtil.config.transcriptUrl, function (data) {
            var $transcript = $('<div class="transcript"><div class="transcript-inner"><div class="transcript-content">' + data + '</div></div></div>')
            $('#' + EmbedVideoPlayerUtil.config.wrapperId).parent().find('.transcript').remove()
            $('#' + EmbedVideoPlayerUtil.config.wrapperId).parent().append($transcript)
            if ($('html').hasClass('platform-handheld') || $('html').hasClass('platform-tablet')) {
                $('a[rel="external"],a[rel="internal"]').on('click', function (e) {
                    e.preventDefault()
                    var boaModalDialogData = {
                        target: '.mw-modm-ds.leaving',
                        buffer: 16,
                        animation: 'left',
                        callbacks: {}
                    }
                    var href = $(this).attr('href')
                    $('.yes', boaModalDialogData.target).on('click', function (e) {
                        window.location.href = href
                    })
                    boaModalDialogData.callbacks.contract = mw.modules.modal.removeRel
                    boaModalDialogData.anchor = $(this)
                    var modal1 = mw.modules.modal.init(boaModalDialogData)
                })
            }
            $('#' + EmbedVideoPlayerUtil.config.wrapperId).trigger('transcriptReady', [
                $transcript
            ])
        })
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.bindEvents = function () {
    var CONTEXT = $('#' + EmbedVideoPlayerUtil.config.wrapperId).parent()
    EmbedVideoPlayerUtil.BrightCovePlayer.playButton = $('.video-control-bar #playButton', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.volumeButton = $('.video-control-bar #volumeBtn', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.ccButton = $('.video-control-bar .caption-menu', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.videoCaption = $('.video-control-bar .video-caption', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.seekButton = $('.video-control-bar #videoSeekButton', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.mediaControlBar = $('.video-control-bar', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayProgress = $('.video-control-bar .video-play-progress span.ada-hidden', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.progressWrapper = $('.video-control-bar .progress-wrapper', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.videoTimer = $('.video-control-bar .video-playing-time', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.volumeBar = $('.video-control-bar .volume-bar', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.volumeBarFill = $('.video-control-bar .volume-bar-fill', CONTEXT)
    EmbedVideoPlayerUtil.BrightCovePlayer.playButton.click(function (e) {
        var isPlaying = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.isPlaying()
        if (isPlaying) {
            EmbedVideoPlayerUtil.BrightCovePlayer.pauseVideo()
        } else {
            EmbedVideoPlayerUtil.BrightCovePlayer.playVideo()
        }
    })
    EmbedVideoPlayerUtil.BrightCovePlayer.volumeButton.click(function (e) {
        var videoPlayer = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer
        var $this = $(this)
        if (!videoPlayer.getVolume()) {
            EmbedVideoPlayerUtil.BrightCovePlayer.unMute(true)
            $this.removeClass('muted')
            $this.find('span.ada-hidden').html('Mute Video Press Space Bar to activate or, Control ALT N to increase volume and Control ALT M to decrease volume')
        } else {
            EmbedVideoPlayerUtil.BrightCovePlayer.mute()
            $this.addClass('muted')
            $this.find('span.ada-hidden').html('UnMute Video Press Space Bar to activate or, Control ALT N to increase volume and Control ALT M to decrease volume')
        }
    }).keydown(function (e) {
        var KEY_LEFT = 37
        var KEY_RIGHT = 39
        var KEY_N = 78
        var KEY_M = 77
        var volumeLevel = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.getVolume()
        volumeLevel = parseFloat(volumeLevel.toFixed(3))
        if (e.keyCode === KEY_RIGHT || (e.ctrlKey && e.altKey && e.which === KEY_N)) {
            EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.setVolume(volumeLevel + 0.01)
            e.preventDefault()
            e.stopPropagation()
            return false
        } else {
            if (e.keyCode === KEY_LEFT || (e.ctrlKey && e.altKey && e.which === KEY_M)) {
                EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.setVolume(volumeLevel - 0.01)
                e.preventDefault()
                e.stopPropagation()
                return false
            }
        }
    }).focus(function () {
        EmbedVideoPlayerUtil.BrightCovePlayer.ccButton.hide()
    })
    EmbedVideoPlayerUtil.BrightCovePlayer.seekButton.keydown(function (e) {
        var $this = $(this)
        var videoPlayer = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer
        var KEY_LEFT = 37
        var KEY_RIGHT = 39
        var KEY_N = 78
        var KEY_M = 77
        var isPlaying = true
        if ((isPlaying && e.keyCode === KEY_RIGHT) || (e.ctrlKey && e.altKey && e.which === KEY_N)) {
            videoPlayer.pause(true)
            videoPlayer.removeEventListener(BCMediaEvent.PROGRESS, EmbedVideoPlayerUtil.BrightCovePlayer.onMediaProgress)
            var seekBarPos = EmbedVideoPlayerUtil.BrightCovePlayer.videoSeekCounter++ > EmbedVideoPlayerUtil.BrightCovePlayer.seekBarLength ? EmbedVideoPlayerUtil.BrightCovePlayer.seekBarLength : EmbedVideoPlayerUtil.BrightCovePlayer.videoSeekCounter
            $this.css('left', seekBarPos + 'px')
        } else {
            if ((isPlaying && e.keyCode === KEY_LEFT) || (e.ctrlKey && e.altKey && e.which === KEY_M)) {
                videoPlayer.pause(true)
                videoPlayer.removeEventListener(BCMediaEvent.PROGRESS, EmbedVideoPlayerUtil.BrightCovePlayer.onMediaProgress)
                var seekBarPos = EmbedVideoPlayerUtil.BrightCovePlayer.videoSeekCounter-- < 0 ? 0 : EmbedVideoPlayerUtil.BrightCovePlayer.videoSeekCounter
                $this.css('left', seekBarPos + 'px')
            }
        }
    }).keyup(function (e) {
        EmbedVideoPlayerUtil.BrightCovePlayer.seekVideo()
    }).focus(function () {
        EmbedVideoPlayerUtil.BrightCovePlayer.ccButton.hide()
    })
    $('.video-control-bar .progress-control', CONTEXT).click(function (e) {
        EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.pause(true)
        EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.removeEventListener(BCMediaEvent.PROGRESS, EmbedVideoPlayerUtil.BrightCovePlayer.onMediaProgress)
        var delta = parseInt((e.pageX - $(this).offset().left), 10)
        EmbedVideoPlayerUtil.BrightCovePlayer.seekButton.css('left', delta + 'px')
        EmbedVideoPlayerUtil.BrightCovePlayer.videoSeekCounter = delta
        EmbedVideoPlayerUtil.BrightCovePlayer.seekVideo()
        EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.play()
        EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.addEventListener(BCMediaEvent.PROGRESS, EmbedVideoPlayerUtil.BrightCovePlayer.onMediaProgress)
    })
    $('.video-control-bar .volume-bar,.video-control-bar .volume-bar-fill', CONTEXT).click(function (e) {
        var $this = $(this)
        $this = $this.hasClass('.volume-bar') ? $this : $('.video-control-bar .volume-bar', CONTEXT)
        var volumeBarWidth = $this.width()
        var delta = e.pageX - parseInt(($this.offset().left), 10)
        var volumeLevel = delta / volumeBarWidth
        volumeLevel = volumeLevel < 0 ? 0 : (volumeLevel > 1 ? 1 : volumeLevel)
        volumeLevel -= 0.06
        EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.setVolume(volumeLevel)
    }).focus(function () {
        EmbedVideoPlayerUtil.BrightCovePlayer.ccButton.hide()
    })
    EmbedVideoPlayerUtil.BrightCovePlayer.ccButton.bind('mouseout', function () {
        var $this = $(this)
        if ($this.hasClass('hover')) {
            $this.removeClass('hover').hide()
        }
    }).bind('click mouseover focus', function () {
        $(this).addClass('hover').show()
    })
    EmbedVideoPlayerUtil.BrightCovePlayer.videoCaption.bind('mouseout', function () {
        EmbedVideoPlayerUtil.BrightCovePlayer.ccButton.removeClass('hover').hide()
    }).bind('click mouseover focus', function () {
        EmbedVideoPlayerUtil.BrightCovePlayer.ccButton.addClass('hover').show()
    })
    $('.video-control-bar #captionEnglishBtn', CONTEXT).click(function () {
        EmbedVideoPlayerUtil.BrightCovePlayer.showDefaultCaption(true)
    })
    $('.video-control-bar #captionOffBtn', CONTEXT).click(function () {
        EmbedVideoPlayerUtil.BrightCovePlayer.showDefaultCaption(false)
    })
}
EmbedVideoPlayerUtil.BrightCovePlayer.setVideoTime = function () {
    var videoDuration = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.getVideoDuration(function () {
    })
    EmbedVideoPlayerUtil.BrightCovePlayer.videoDuration = EmbedVideoPlayerUtil.BrightCovePlayer.formatTime(videoDuration)
    $('.video-control-bar .video-duration-time').text(EmbedVideoPlayerUtil.BrightCovePlayer.videoDuration)
}
EmbedVideoPlayerUtil.BrightCovePlayer.fillVolumeBar = function () {
    var $volumeBar = EmbedVideoPlayerUtil.BrightCovePlayer.volumeBar
    if (typeof $volumeBar !== 'undefined') {
        var volumeLevel = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.getVolume()
        var volumeBarHeight = $volumeBar.width()
        EmbedVideoPlayerUtil.BrightCovePlayer.volumeBarFill.width(volumeBarHeight * volumeLevel)
        $volumeBar.attr('aria-valuenow', Math.round(volumeLevel * 100))
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.playVideo = function () {
    if (this.videoPlayer) {
        EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('playVideoVid' + EmbedVideoPlayerUtil.config.playerID)
        this.videoPlayer.play()
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.pauseVideo = function () {
    if (this.videoPlayer) {
        EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('pauseVideoVid' + EmbedVideoPlayerUtil.config.playerID)
        this.videoPlayer.pause(true)
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.formatTime = function (time) {
    if (typeof time === 'number') {
        var min = parseInt((Math.floor(time) / 60), 10)
        var sec = parseInt((Math.ceil(time) % 60), 10)
        if (min / 10 < 1) {
            min = '0' + min
        }
        if (sec / 10 < 1) {
            sec = '0' + sec
        }
        return min + ':' + sec
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.seekVideo = function () {
    var videoPlayer = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer,
        videoDuration = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.getVideoDuration(function () {
        }),
        seekBarPercentage = EmbedVideoPlayerUtil.BrightCovePlayer.videoSeekCounter / EmbedVideoPlayerUtil.BrightCovePlayer.seekBarLength,
        seekTime = videoDuration * seekBarPercentage
    if (seekTime > 0) {
        videoPlayer.seek(seekTime)
        videoPlayer.play()
        videoPlayer.addEventListener(BCMediaEvent.PROGRESS, EmbedVideoPlayerUtil.BrightCovePlayer.onMediaProgress)
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.onVolumeChange = function (volumeLevel) {
    EmbedVideoPlayerUtil.BrightCovePlayer.fillVolumeBar()
}
EmbedVideoPlayerUtil.BrightCovePlayer.mute = function () {
    EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.setVolume(0)
    EmbedVideoPlayerUtil.BrightCovePlayer.fillVolumeBar()
    EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('muteVideoVid' + EmbedVideoPlayerUtil.config.playerID)
}
EmbedVideoPlayerUtil.BrightCovePlayer.unMute = function (arg) {
    EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer.setVolume(0.5)
    EmbedVideoPlayerUtil.BrightCovePlayer.fillVolumeBar()
    if (arg) {
        EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('unMuteVideoVid' + EmbedVideoPlayerUtil.config.playerID)
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.onMediaBegin = function (e) {
    if (typeof cX === 'function') {
        cX('onload')
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.showDefaultCaption = function (flag) {
    EmbedVideoPlayerUtil.BrightCovePlayer.videoCaption.setLanguage('English')
    EmbedVideoPlayerUtil.BrightCovePlayer.videoCaption.setCaptionsEnabled(flag)
}
EmbedVideoPlayerUtil.BrightCovePlayer.onMediaProgress = function (e) {
    var mediaControlBar = EmbedVideoPlayerUtil.BrightCovePlayer.mediaControlBar
    var currentPosition = e.position
    var videoDuration = e.duration
    var videoPercentage = (currentPosition / videoDuration)
    var videoPlayingPer = parseFloat((videoPercentage * 100), 10)
    var seekBarPosition = parseInt((10 * EmbedVideoPlayerUtil.BrightCovePlayer.seekBarLength * videoPercentage), 10) / 10
    EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayProgress.html('Progress :' + videoPlayingPer + '%')
    EmbedVideoPlayerUtil.BrightCovePlayer.progressWrapper.attr('aria-valuenow', videoPlayingPer)
    EmbedVideoPlayerUtil.BrightCovePlayer.videoSeekCounter = seekBarPosition
    EmbedVideoPlayerUtil.BrightCovePlayer.seekButton.css('left', seekBarPosition)
    EmbedVideoPlayerUtil.BrightCovePlayer.videoTimer.html(EmbedVideoPlayerUtil.BrightCovePlayer.formatTime(currentPosition))
    if (videoPlayingPer > 24 && videoPlayingPer < 29 && typeof mediaControlBar.data('watch25') === 'undefined') {
        EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('watch25Vid' + EmbedVideoPlayerUtil.config.playerID)
        mediaControlBar.data('watch25', true)
    } else {
        if (videoPlayingPer > 49 && videoPlayingPer < 54 && typeof mediaControlBar.data('watch50') === 'undefined') {
            EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('watch50Vid' + EmbedVideoPlayerUtil.config.playerID)
            mediaControlBar.data('watch50', true)
        } else {
            if (videoPlayingPer > 74 && videoPlayingPer < 79 && typeof mediaControlBar.data('watch75') === 'undefined') {
                EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('watch75Vid' + EmbedVideoPlayerUtil.config.playerID)
                mediaControlBar.data('watch75', true)
            }
        }
    }
    $('#' + EmbedVideoPlayerUtil.config.wrapperId).parent().attr('data-current-time', e.position).trigger('PROGRESS')
}
EmbedVideoPlayerUtil.BrightCovePlayer.onVideoPlay = function (e) {
    var $this = EmbedVideoPlayerUtil.BrightCovePlayer.playButton
    $this.addClass('pause-button')
    $this.removeClass('play-button')
    $this.find('span.ada-hidden').html('Pause Video')
}
EmbedVideoPlayerUtil.BrightCovePlayer.onVideoStop = function (e) {
    var $this = EmbedVideoPlayerUtil.BrightCovePlayer.playButton
    $this.addClass('play-button')
    $this.removeClass('pause-button')
    if (e.position >= e.duration) {
        $this.find('span.ada-hidden').html('Replay Video')
    } else {
        $this.find('span.ada-hidden').html('Play Video')
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.onVideoFinish = function (e) {
    EmbedVideoPlayerUtil.BrightCovePlayer.playButton.addClass('play-button').removeClass('pause-button').find('span.ada-hidden').html('Replay video')
    EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('watch100Vid' + EmbedVideoPlayerUtil.config.playerID)
    EmbedVideoPlayerUtil.BrightCovePlayer.mediaControlBar.removeData()
}
EmbedVideoPlayerUtil.BrightCovePlayer.onSendEmailClick = function (e) {
    EmbedVideoPlayerUtil.triggerCMManualLnkClickTag('sendEmailVid' + EmbedVideoPlayerUtil.config.playerID)
}
EmbedVideoPlayerUtil.triggerCMManualLnkClickTag = function (uniquenameval) {
    if (typeof cmCreateManualLinkClickTag === 'function') {
        cmCreateManualLinkClickTag('javascript:void();', uniquenameval, EmbedVideoPlayerUtil.config.cmPageId)
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.autoSeek = function () {
    var seek = typeof boaGetUrlParam === 'function' ? boaGetUrlParam('seek') : null,
        seekTime = 0,
        seekVideo = '',
        videoPlayer = this.videoPlayer,
        config = EmbedVideoPlayerUtil.config,
        seekToRestartPoint = function (e) {
            videoPlayer.removeEventListener(BCMediaEvent.PROGRESS, seekToRestartPoint)
            videoPlayer.seek(seekTime)
            videoPlayer.play()
            videoPlayer.addEventListener(BCMediaEvent.PROGRESS, EmbedVideoPlayerUtil.BrightCovePlayer.onMediaProgress)
        }
    if (seek === null) {
        return
    }
    if (seek.indexOf('|') > 0) {
        seek = seek.split('|')
        seekTime = parseFloat(seek[0])
        seekVideo = seek[1]
    } else {
        seekTime = parseFloat(seek)
    }
    if (typeof seekTime === 'number' && !isNaN(seekTime) && seekTime > 0 && (config.wrapperId === seekVideo || seekVideo === '')) {
        videoPlayer.addEventListener(BCMediaEvent.PROGRESS, seekToRestartPoint)
        videoPlayer.play()
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.selectRendition = function (context) {
    var renditions = context.renditions,
        size = 0,
        smallIndex = -1,
        smallSize = Number.MAX_VALUE,
        largeIndex = -1,
        largeSize = 0
    for (var i = 0; i < renditions.length; i++) {
        size = renditions[i].size
        if (renditions[i].size < smallSize) {
            smallSize = size
            smallIndex = i
        }
        if (renditions[i].size > largeSize) {
            largeSize = size
            largeIndex = i
        }
    }
    return smallIndex
}
EmbedVideoPlayerUtil.BrightCovePlayer.onTemplateLoad = function (id) {
    $('#' + id).attr({
        tabindex: -1,
        title: 'Flash video component',
        name: 'brightcoveobjecttag'
    })
    $('#_container' + id).attr({
        tabindex: -1,
        name: 'spanbrightcovewrapper'
    })
    EmbedVideoPlayerUtil.BrightCovePlayer.player = brightcove.getExperience(id)
    if (!!EmbedVideoPlayerUtil.config.resolution && EmbedVideoPlayerUtil.config.resolution === 'low') {
        var videoPlayer = EmbedVideoPlayerUtil.BrightCovePlayer.player.getModule('videoPlayer')
        if (!!videoPlayer) {
            videoPlayer.setRenditionSelectionCallback(EmbedVideoPlayerUtil.BrightCovePlayer.selectRendition)
        }
    }
}
EmbedVideoPlayerUtil.BrightCovePlayer.onTemplateReady = function (evt, callback) {
    var player = EmbedVideoPlayerUtil.BrightCovePlayer.player || evt.target.experience
    EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer = player.getModule(APIModules.VIDEO_PLAYER)
    var videoPlayer = EmbedVideoPlayerUtil.BrightCovePlayer.videoPlayer
    EmbedVideoPlayerUtil.BrightCovePlayer.appendControls()
    EmbedVideoPlayerUtil.BrightCovePlayer.videoExperience = player.getModule(APIModules.EXPERIENCE)
    EmbedVideoPlayerUtil.BrightCovePlayer.videoCaption = player.getModule(APIModules.CAPTIONS)
    EmbedVideoPlayerUtil.BrightCovePlayer.showDefaultCaption(false)
    if (!$('html').hasClass('platform-handheld') && !$('html').hasClass('platform-tablet')) {
        EmbedVideoPlayerUtil.BrightCovePlayer.seekBarLength = $('.progress-control').width() - EmbedVideoPlayerUtil.BrightCovePlayer.seekButton.width()
        videoPlayer.addEventListener(BCVideoEvent.VOLUME_CHANGE, EmbedVideoPlayerUtil.BrightCovePlayer.onVolumeChange)
        videoPlayer.addEventListener(BCMediaEvent.PROGRESS, EmbedVideoPlayerUtil.BrightCovePlayer.onMediaProgress)
        videoPlayer.addEventListener(BCMediaEvent.BEGIN, EmbedVideoPlayerUtil.BrightCovePlayer.onMediaBegin)
        videoPlayer.addEventListener(BCMediaEvent.COMPLETE, EmbedVideoPlayerUtil.BrightCovePlayer.onVideoFinish)
        videoPlayer.addEventListener(BCMediaEvent.PLAY, EmbedVideoPlayerUtil.BrightCovePlayer.onVideoPlay)
        videoPlayer.addEventListener(BCMediaEvent.STOP, EmbedVideoPlayerUtil.BrightCovePlayer.onVideoStop)
        videoPlayer.addEventListener(BCMenuEvent.SEND_EMAIL_CLICK, EmbedVideoPlayerUtil.BrightCovePlayer.onSendEmailClick)
        EmbedVideoPlayerUtil.BrightCovePlayer.unMute(false)
        EmbedVideoPlayerUtil.BrightCovePlayer.autoSeek()
        $(window).on('online offline', function (e) {
            var $connectivityMessage = $('<span class="connectivity-message ada-hidden">Unable to connect to server. Please try using a different browser or try again later.</span>')
            if (e.type === 'offline') {
                $connectivityMessage.appendTo('#' + EmbedVideoPlayerUtil.config.wrapperId).focus()
            } else {
                $connectivityMessage.remove()
            }
        })
    }
    EmbedVideoPlayerUtil.events.ready()
    if (typeof callback === 'function') {
        return callback(evt)
    }
    if (EmbedVideoPlayerUtil.config.videoAutoPlay === 'true') {
        EmbedVideoPlayerUtil.BrightCovePlayer.playButton.trigger('click')
    }
};
(function ($) {
    $.fn.fieldMatcher = function (options) {
        var $this = $(this)
        var settings = {
            tooltipID: 're-password-tooltip',
            tooltipTop: 200,
            tooltipLeft: 190,
            originFieldID: 'password',
            matchText: 'Fields Match',
            notMatchText: 'Fields do not match',
            matchClass: 'match',
            notMatchClass: 'not-match',
            isCaseSensitive: false,
            formatCheckerCallback: function () {
            }
        }

        function _createTooltip() {
            var $tooltip = $('<div id="' + settings.tooltipID + '" class="field-matcher-tooltip" />')
            var $tooltipContent = $('<div class="tooltip-content" />')
            var $tooltipCarat = $('<div class="tooltip-carat" aria-live="rude"/>')
            $tooltipContent.append('<div class="' + settings.matchClass + '"><div class="field-matcher-match"></div><span class="match-text">' + settings.matchText + '</span></div>')
            $tooltipContent.append('<div class="' + settings.notMatchClass + ' hide"><div class="field-matcher-unmatch"></div><span class="match-text">' + settings.notMatchText + '</span></div>')
            $tooltipCarat.append($tooltipContent)
            $tooltip.append($tooltipCarat)
            $this.after($tooltip)
            $('#' + settings.tooltipID).css('top', settings.tooltipTop + 'px')
            $('#' + settings.tooltipID).css('left', settings.tooltipLeft + 'px')
        }

        function _testMatch(reEnterValue) {
            var originValue = $('#' + settings.originFieldID).val()
            var reEnterLength = reEnterValue.length
            if (settings.isCaseSensitive) {
                reEnterValue = reEnterValue.toLowerCase()
                originValue = originValue.toLowerCase()
            }
            var match = false
            if (reEnterLength > originValue.length || originValue.substring(0, reEnterLength) != reEnterValue) {
                _showNotMatch()
            } else {
                if (originValue === reEnterValue) {
                    _showMatch()
                    match = true
                } else {
                    _hideTooltip()
                }
            }
            return match
        }

        function _showMatch() {
            $('#' + settings.tooltipID + ' .tooltip-content .' + settings.matchClass).show()
            $('#' + settings.tooltipID + ' .tooltip-content .' + settings.notMatchClass).hide()
            settings.formatCheckerCallback.call()
            $('#' + settings.tooltipID).fadeIn()
        }

        function _showNotMatch() {
            $('#' + settings.tooltipID + ' .tooltip-content .' + settings.matchClass).hide()
            $('#' + settings.tooltipID + ' .tooltip-content .' + settings.notMatchClass).show()
            settings.formatCheckerCallback.call()
            $('#' + settings.tooltipID).fadeIn()
        }

        function _hideTooltip() {
            $('#' + settings.tooltipID).fadeOut()
        }

        return this.each(function () {
            if (options) {
                $.extend(settings, options)
            }
            _createTooltip()
            $this.keyup(function (event) {
                _testMatch($this.val())
            })
            $this.blur(function (event) {
                if (_testMatch($this.val())) {
                    _hideTooltip()
                }
            })
        })
    }
})(jQuery);
(function ($) {
    var printObj = typeof JSON != 'undefined' ? JSON.stringify : function (obj) {
        var arr = []
        $.each(obj, function (key, val) {
            var next = key + ': '
            next += $.isPlainObject(val) ? printObj(val) : val
            arr.push(next)
        })
        return '{ ' + arr.join(', ') + ' }'
    }
    $.fn.formatChecker = function (options) {
        var $this = $(this)
        var settings,
            defaultSettings,
            oidSettings = {},
            pwdSettings = {},
            pinSettings = {}
        sbPinSettings = {}
        var $tooltipTitle = 'Format Checker'
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            settings,
                defaultSettings = {
                    oneLetterRule: {
                        applyRule: true,
                        ruleText: 'Atleast 1 letter'
                    },
                    minMaxCharRule: {
                        applyRule: true,
                        ruleText: 'Between 8-20 characters',
                        minChar: 8,
                        maxChar: 20
                    },
                    oneNumberOneLetterRule: {
                        applyRule: true,
                        ruleText: '1 number, 1 letter'
                    },
                    noSpacesRule: {
                        applyRule: true,
                        ruleText: 'any spaces'
                    },
                    noSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'any of these $ &lt; &gt; &amp; ^ ! [ ]',
                        excludedChars: '$<>&\\^![\\]'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: 300,
                    tooltipLeft: 190,
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                oidSettings = {
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 6,
                        maxChar: 32,
                        ruleText: '6 to 32 characters'
                    },
                    letterNumberSpecialComboRule: {
                        applyRule: true,
                        ruleText: 'All letters OR a combination of letters,<br/>numbers and any of these special characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                pwdSettings = {
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Be 8 to 20 characters'
                    },
                    oneNumberOneLetterRule: {
                        applyRule: true,
                        ruleText: 'Use at least 1 letter and 1 number'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Use only these special characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                pinSettings = {
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    noRepeatingNumbersRule: {
                        applyRule: true,
                        ruleText: 'Numbers cannot all be the same'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                sbPinSettings = {
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                newPwdSettings = {
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Be 8 to 20 characters'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Not contain spaces, and may only use these characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                }
        } else {
            settings,
                defaultSettings = {
                    oneLetterRule: {
                        applyRule: true,
                        ruleText: 'Atleast 1 letter'
                    },
                    minMaxCharRule: {
                        applyRule: true,
                        ruleText: 'Entre 8-20 caracteres',
                        minChar: 8,
                        maxChar: 20
                    },
                    oneNumberOneLetterRule: {
                        applyRule: true,
                        ruleText: 'Un n&#250;mero, una letra'
                    },
                    noSpacesRule: {
                        applyRule: true,
                        ruleText: 'sin espacios'
                    },
                    noSpecialCharsRule: {
                        applyRule: true,
                        ruleText: '&#161;No$ &lt; &gt; &amp; ^ ! [ ]',
                        excludedChars: '$<>&\\^![\\]'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: 300,
                    tooltipLeft: 190,
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                oidSettings = {
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 6,
                        maxChar: 32,
                        ruleText: '6 a 32 caracteres'
                    },
                    letterNumberSpecialComboRule: {
                        applyRule: true,
                        ruleText: 'Todas letras O una combinaci&#243;n de letras, n&#250;meros y cualquiera de estos caracteres especiales<br/> @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                pwdSettings = {
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Tener entre 8 y 20 caracteres'
                    },
                    oneNumberOneLetterRule: {
                        applyRule: true,
                        ruleText: 'Tener al menos 1 letra y 1 n&#250;mero'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'No contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                pinSettings = {
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Debe de tener exactamente 4 n&#250;meros'
                    },
                    noRepeatingNumbersRule: {
                        applyRule: true,
                        ruleText: 'Los n&#250;meros no pueden ser todos iguales'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                sbPinSettings = {
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                },
                newPwdSettings = {
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Tener entre 8 y 20 caracteres'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'No contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    markerClasses: {
                        empty: 'format-checker-emptybox',
                        no: 'format-checker-no',
                        yes: 'format-checker-yes'
                    },
                    formatCheckerCallback: function () {
                    },
                    plainText: ''
                }
        }
        var rules = {
            minMaxChar: {
                state: 'empty',
                regex: null,
                ruleClass: 'min-max-char'
            },
            oneNumberOneLetter: {
                state: 'empty',
                regex: null,
                ruleClass: 'one-number-one-letter'
            },
            noSpaces: {
                state: 'empty',
                regex: null,
                ruleClass: 'no-spaces'
            },
            noSpecialChars: {
                state: 'empty',
                regex: null,
                ruleClass: 'no-special-chars'
            },
            exactFourDigits: {
                state: 'empty',
                regex: null,
                ruleClass: 'exact-four-digits'
            },
            noRepeatingNumbers: {
                state: 'empty',
                regex: null,
                ruleClass: 'no-repeating-numbers'
            }
        }
        var oidRules = {
            minMaxChar: {
                state: 'empty',
                regex: null,
                ruleClass: 'min-max-char'
            },
            letterNumberSpecialCombo: {
                state: 'empty',
                regex: null,
                ruleClass: 'letter-number-special'
            }
        }
        var pwdRules = {
            minMaxChar: {
                state: 'empty',
                regex: null,
                ruleClass: 'min-max-char'
            },
            oneNumberOneLetter: {
                state: 'empty',
                regex: null,
                ruleClass: 'one-number-one-letter'
            },
            allowedSpecialChars: {
                state: 'empty',
                regex: null,
                ruleClass: 'allowed-special-chars'
            }
        }
        var pinRules = {
            exactFourDigits: {
                state: 'empty',
                regex: null,
                ruleClass: 'exact-four-digits'
            },
            noRepeatingNumbers: {
                state: 'empty',
                regex: null,
                ruleClass: 'no-repeating-numbers'
            }
        }
        var sbPinRules = {
            exactFourDigits: {
                state: 'empty',
                regex: null,
                ruleClass: 'exact-four-digits'
            }
        }
        var newPwdRules = {
            minMaxChar: {
                state: 'empty',
                regex: null,
                ruleClass: 'min-max-char'
            },
            oneUpCaseOneLowCaseOneNumber: {
                state: 'empty',
                regex: null,
                ruleClass: 'one-uppercase-one-lowercase-one-number'
            },
            nonRepeating3Char: {
                state: 'empty',
                regex: null,
                ruleClass: 'non-repeating-3-char'
            },
            allowedSpecialChars: {
                state: 'empty',
                regex: null,
                ruleClass: 'allowed-special-chars'
            }
        }
        if ($this.hasClass('oid-format-checker')) {
            rules = oidRules
        } else {
            if ($this.hasClass('pwd-format-checker') && (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch === 'true')) {
                rules = pwdRules
            } else {
                if ($this.hasClass('pin-format-checker') && (typeof pinRegexSwitch !== 'undefined' && pinRegexSwitch === 'true')) {
                    rules = pinRules
                } else {
                    if ($this.hasClass('sb-pin-format-checker') && (typeof sbPinRegexSwitch !== 'undefined' && sbPinRegexSwitch === 'true')) {
                        rules = sbPinRules
                    } else {
                        if ($this.hasClass('pwd-format-checker') && (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch === 'true')) {
                            rules = newPwdRules
                        }
                    }
                }
            }
        }

        function _createTooltip() {
            var $tooltip = $('<div id="' + settings.tooltipID + '" class="format-checker-tooltip" />')
            var $tooltipContent = $('<div class="tooltip-content"/>')
            var $tooltipCarat = $('<div class="tooltip-carat"/>')
            var indx = 0
            var addSecondTitle = true
            if (settings.plainText === '') {
                for (var rule in rules) {
                    var sRule = rule.toString() + 'Rule'
                    if (typeof settings[sRule] !== 'undefined' && settings[sRule].applyRule) {
                        $tooltipContent.append('<div class="' + rules[rule].ruleClass + '"><div class="' + settings.markerClasses.empty + '"></div><span class="rule-text">' + settings[sRule].ruleText + '</span></div>')
                    }
                }
                if ($this.hasClass('oid-format-checker')) {
                    $tooltipCarat.addClass('online-id')
                }
                $tooltipContent.prepend('<div class="format-checker-title">' + $tooltipTitle + '</div>')
            } else {
                $tooltipTitle = settings.plainText
                $tooltipContent.prepend($tooltipTitle)
            }
            $tooltipCarat.append($tooltipContent)
            $tooltip.append($tooltipCarat)
            $this.before($tooltip)
            $('#' + settings.tooltipID + ' .tooltip-content > div:last-child').addClass('last')
            $('#' + settings.tooltipID).css('top', settings.tooltipTop + 'px')
            $('#' + settings.tooltipID).css('left', settings.tooltipLeft + 'px')
        }

        function _createRegEx() {
            if (typeof (settings.minMaxCharRule) != 'undefined' && settings.minMaxCharRule.applyRule) {
                rules.minMaxChar.regex = new RegExp('^.{' + settings.minMaxCharRule.minChar + ',' + settings.minMaxCharRule.maxChar + '}$')
            }
            if (typeof (settings.noSpacesRule) != 'undefined' && settings.noSpacesRule.applyRule) {
                rules.noSpaces.regex = new RegExp('^[^\\s]*$')
            }
            if (typeof (settings.noSpecialCharsRule) != 'undefined' && settings.noSpecialCharsRule.applyRule) {
                rules.noSpecialChars.regex = new RegExp('^[^' + settings.noSpecialCharsRule.excludedChars + ']*$')
            }
            if (typeof (settings.oneNumberOneLetterRule) != 'undefined') {
                rules.oneNumberOneLetter.regex = new RegExp('(?=.*\\d)(?=.*[a-zA-Z])')
            }
            if (typeof (settings.noAllNumbersRule) != 'undefined' && settings.noAllNumbersRule.applyRule) {
                rules.noAllNumbers.regex = new RegExp('^[0-9]*$')
            }
            if (typeof (settings.letterNumberSpecialComboRule) != 'undefined' && settings.letterNumberSpecialComboRule.applyRule) {
                rules.letterNumberSpecialCombo.regex = new RegExp('(?!^\\d+$)(?!^[@#\\*\\(\\)\\+={}/\\?~;,\\.\\-\\_]+$)^[a-zA-Z0-9@#\\*\\(\\)\\+={}/\\?~;,\\.\\-\\_]{1,32}$')
            }
            if (typeof (settings.allCharactersRule) != 'undefined' && settings.allCharactersRule.applyRule) {
                rules.allCharacters.regex = new RegExp('^[a-zA-Z]*$')
            }
            if (typeof (settings.allowedSpecialCharsRule) != 'undefined' && settings.allowedSpecialCharsRule.applyRule) {
                rules.allowedSpecialChars.regex = /^[a-zA-Z0-9@#*()+={}\/?~;,.\-\_]*$/
            }
            if (typeof (settings.exactFourDigitsRule) != 'undefined' && settings.exactFourDigitsRule.applyRule) {
                rules.exactFourDigits.regex = new RegExp('^([0-9]{4})$')
            }
            if (typeof (settings.noRepeatingNumbersRule) != 'undefined' && settings.noRepeatingNumbersRule.applyRule) {
                rules.noRepeatingNumbers.regex = new RegExp('^$|(.)\\1{3,}')
            }
            if (typeof (settings.oneUpCaseOneLowCaseOneNumberRule) != 'undefined' && settings.oneUpCaseOneLowCaseOneNumberRule.applyRule) {
                rules.oneUpCaseOneLowCaseOneNumber.regex = new RegExp('(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])')
            }
            if (typeof (settings.nonRepeating3CharRule) != 'undefined' && settings.nonRepeating3CharRule.applyRule) {
                rules.nonRepeating3Char.regex = new RegExp('^$|([a-zA-Z0-9])\\1{3,}', 'i')
            }
        }

        function _testRules(inputValue, finalTest) {
            if (typeof (settings.minMaxCharRule) != 'undefined' && settings.minMaxCharRule.applyRule) {
                rules.minMaxChar.state = rules.minMaxChar.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof (settings.noSpacesRule) != 'undefined' && settings.noSpacesRule.applyRule) {
                rules.noSpaces.state = rules.noSpaces.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof (settings.noSpecialCharsRule) != 'undefined' && settings.noSpecialCharsRule.applyRule) {
                rules.noSpecialChars.state = rules.noSpecialChars.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof (settings.oneNumberOneLetterRule) != 'undefined' && settings.oneNumberOneLetterRule.applyRule) {
                rules.oneNumberOneLetter.state = rules.oneNumberOneLetter.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof settings.noAllNumbersRule != 'undefined' && settings.noAllNumbersRule.applyRule) {
                rules.noAllNumbers.state = rules.noAllNumbers.regex.test(inputValue) ? 'no' : 'yes'
            }
            if (typeof settings.letterNumberSpecialComboRule != 'undefined' && settings.letterNumberSpecialComboRule.applyRule) {
                rules.letterNumberSpecialCombo.state = rules.letterNumberSpecialCombo.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof settings.allCharactersRule != 'undefined' && settings.allCharactersRule.applyRule) {
                rules.allCharacters.state = rules.allCharacters.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof settings.allowedSpecialCharsRule != 'undefined' && settings.allowedSpecialCharsRule.applyRule) {
                rules.allowedSpecialChars.state = rules.allowedSpecialChars.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof settings.exactFourDigitsRule != 'undefined' && settings.exactFourDigitsRule.applyRule) {
                rules.exactFourDigits.state = rules.exactFourDigits.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof settings.noRepeatingNumbersRule != 'undefined' && settings.noRepeatingNumbersRule.applyRule) {
                rules.noRepeatingNumbers.state = rules.noRepeatingNumbers.regex.test(inputValue) ? 'no' : 'yes'
            }
            if (typeof settings.oneUpCaseOneLowCaseOneNumberRule != 'undefined' && settings.oneUpCaseOneLowCaseOneNumberRule.applyRule) {
                rules.oneUpCaseOneLowCaseOneNumber.state = rules.oneUpCaseOneLowCaseOneNumber.regex.test(inputValue) ? 'yes' : 'no'
            }
            if (typeof settings.nonRepeating3CharRule != 'undefined' && settings.nonRepeating3CharRule.applyRule) {
                rules.nonRepeating3Char.state = (inputValue && inputValue.length > 0 && rules.nonRepeating3Char.regex.test(inputValue)) ? 'no' : 'yes'
            }
        }

        function _renderState() {
            for (var rule in rules) {
                var sRule = rule + 'Rule'
                if (typeof (settings[sRule]) == 'object') {
                    if (settings[sRule].applyRule) {
                        switch (rules[rule].state) {
                            case 'empty':
                                $('#' + settings.tooltipID + ' .' + rules[rule].ruleClass + ' div').attr('class', settings.markerClasses.empty)
                                break
                            case 'no':
                                $('#' + settings.tooltipID + ' .' + rules[rule].ruleClass + ' div').attr('class', settings.markerClasses.no)
                                break
                            case 'yes':
                                $('#' + settings.tooltipID + ' .' + rules[rule].ruleClass + ' div').attr('class', settings.markerClasses.yes)
                                break
                            default:
                                break
                        }
                    }
                }
            }
            if (typeof settings.formatCheckerCallback != 'undefined') {
                settings.formatCheckerCallback.call()
            }
        }

        function _allRulesYes() {
            var allYes = true
            for (var rule in rules) {
                var sRule = rule + 'Rule'
                if (typeof (settings[sRule]) == 'object') {
                    if (settings[sRule].applyRule && (rules[rule].state == 'no' || rules[rule].state == 'empty')) {
                        allYes = false
                    }
                }
            }
            return allYes
        }

        return this.each(function () {
            settings = defaultSettings
            if (settings.plainText === '') {
                if (options) {
                    if ($this.hasClass('oid-format-checker')) {
                        settings = oidSettings
                        settings.plainText = ''
                        settings.tooltipTop = (options.tooltipTop + 50),
                            settings.tooltipLeft = options.tooltipLeft,
                            settings.tooltipID = options.tooltipID,
                            settings.formatCheckerCallback = options.formatCheckerCallback,
                            settings.markerClasses = {
                                empty: 'format-checker-emptybox',
                                no: 'format-checker-no',
                                yes: 'format-checker-yes'
                            }
                        if ($('.transcc-override').length > 0) {
                            $tooltipTitle = 'Your Login Name must be:'
                        } else {
                            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                                $tooltipTitle = 'Your Online ID must be'
                            } else {
                                $tooltipTitle = 'Su Identificaci&#243n en l&#237nea debe tener'
                            }
                        }
                    } else {
                        if ($this.hasClass('pwd-format-checker') && (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch === 'true')) {
                            settings = pwdSettings
                            settings.plainText = ''
                            settings.tooltipTop = options.tooltipTop,
                                settings.tooltipLeft = options.tooltipLeft,
                                settings.tooltipID = options.tooltipID,
                                settings.formatCheckerCallback = options.formatCheckerCallback,
                                settings.markerClasses = {
                                    empty: 'format-checker-emptybox',
                                    no: 'format-checker-no',
                                    yes: 'format-checker-yes'
                                }
                            if ($('.transcc-override').length > 0) {
                                $tooltipTitle = 'Your Password must:'
                            } else {
                                if ($('html').attr('lang').toLowerCase() == 'en-us') {
                                    $tooltipTitle = 'Your Passcode must'
                                } else {
                                    $tooltipTitle = 'Su Contrase&#241;a debe'
                                }
                            }
                        } else {
                            if ($this.hasClass('pin-format-checker') && (typeof pinRegexSwitch !== 'undefined' && pinRegexSwitch === 'true')) {
                                settings = pinSettings
                                settings.plainText = ''
                                settings.tooltipTop = options.tooltipTop,
                                    settings.tooltipLeft = options.tooltipLeft,
                                    settings.tooltipID = options.tooltipID,
                                    settings.formatCheckerCallback = options.formatCheckerCallback,
                                    settings.markerClasses = {
                                        empty: 'format-checker-emptybox',
                                        no: 'format-checker-no',
                                        yes: 'format-checker-yes'
                                    }
                                if ($('.transcc-override').length > 0) {
                                    $tooltipTitle = 'Check PIN Format:'
                                } else {
                                    if ($('html').attr('lang').toLowerCase() == 'en-us') {
                                        $tooltipTitle = 'Check PIN Format'
                                    } else {
                                        $tooltipTitle = 'Compruebe PIN Formato'
                                    }
                                }
                            } else {
                                if ($this.hasClass('sb-pin-format-checker') && (typeof sbPinRegexSwitch !== 'undefined' && sbPinRegexSwitch === 'true')) {
                                    settings = sbPinSettings
                                    settings.plainText = ''
                                    settings.tooltipTop = options.tooltipTop,
                                        settings.tooltipLeft = options.tooltipLeft,
                                        settings.tooltipID = options.tooltipID,
                                        settings.formatCheckerCallback = options.formatCheckerCallback,
                                        settings.markerClasses = {
                                            empty: 'format-checker-emptybox',
                                            no: 'format-checker-no',
                                            yes: 'format-checker-yes'
                                        }
                                    if ($('.transcc-override').length > 0) {
                                        $tooltipTitle = 'Check PIN Format:'
                                    } else {
                                        if ($('html').attr('lang').toLowerCase() == 'en-us') {
                                            $tooltipTitle = 'Check PIN Format'
                                        } else {
                                            $tooltipTitle = 'Check PIN Format'
                                        }
                                    }
                                } else {
                                    if ($this.hasClass('pwd-format-checker') && (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch === 'true')) {
                                        settings = newPwdSettings
                                        settings.plainText = ''
                                        settings.tooltipTop = options.tooltipTop - 30,
                                            settings.tooltipLeft = options.tooltipLeft,
                                            settings.tooltipID = options.tooltipID,
                                            settings.formatCheckerCallback = options.formatCheckerCallback,
                                            settings.markerClasses = {
                                                empty: 'format-checker-emptybox',
                                                no: 'format-checker-no',
                                                yes: 'format-checker-yes'
                                            }
                                        if ($('html').attr('lang').toLowerCase() == 'en-us') {
                                            $tooltipTitle = 'Your Passcode must'
                                        } else {
                                            $tooltipTitle = 'Su Contrase&#241;a debe'
                                        }
                                    } else {
                                        $.extend(settings, options)
                                        if ($('html').attr('lang').toLowerCase() == 'en-us') {
                                            $tooltipTitle = 'Format Checker'
                                        } else {
                                            $tooltipTitle = 'Corrector de formato'
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                _createTooltip()
                _createRegEx()
                $this.focus(function (event) {
                    $('#' + settings.tooltipID).delay(1000).fadeIn(400, function () {
                        _testRules($this.val(), false)
                        _renderState()
                    })
                })
                $this.keyup(function (event) {
                    _testRules($this.val(), false)
                    _renderState()
                })
                $this.blur(function (event) {
                    _testRules($this.val(), true)
                    _renderState()
                    if (_allRulesYes()) {
                        $('#' + settings.tooltipID).fadeOut()
                    }
                })
            } else {
                $this.focus(function (event) {
                    _createTooltip()
                })
            }
        })
    }
})(jQuery)
window.boa = window.boa || {}, window.boa.form = window.boa.form || {}, window.boa.form = function () {
    var $ = window.jQuery ? window.jQuery : null,
        BASE_CLASS = 'common-form',
        APPLY_ALL_CLASS = 'ALL',
        APPLY_EVENT = BASE_CLASS + '-apply',
        DISABLE_EVENT = BASE_CLASS + '-disable',
        defaults = {
            form: '.' + BASE_CLASS,
            $form: null
        },
        required = {
            disabled: !1
        },
        settings = {},
        libraries = {},
        _checkLibrary = function (marker) {
            var requested = settings.$form.data(BASE_CLASS) || APPLY_ALL_CLASS
            return requested = $.trim(requested.replace(/([,|\s]+)/gi, ' ')).split(' '),
                $.inArray(marker, requested) >= 0 || marker === APPLY_ALL_CLASS ? !0 : !1
        },
        _initializeLibrary = function (library) {
            _checkLibrary(library.marker) && 'function' == typeof library.create && (library.create($, settings.$form), library.initialized = !0)
        },
        _initialize = function (options) {
            if ('object' == typeof options && options && 'function' == typeof options.jQuery && ($ = options.jQuery), 'function' == typeof $ && (settings = $.extend({}, defaults, options, required), settings.$form = $(settings.form), !settings.disabled)) {
                for (var lib in libraries) {
                    _initializeLibrary(libraries[lib])
                }
                window.boa.form.listen()
            }
        },
        _disable = function () {
            settings.disabled = !0,
                removeLibrary()
        },
        _listen = function () {
            $(document).unbind(APPLY_EVENT).bind(APPLY_EVENT, function (e) {
                _initialize(e.data)
            }).unbind(DISABLE_EVENT).bind(DISABLE_EVENT, _disable)
        },
        addLibrary = function (name, marker, library, create, destroy) {
            libraries[name] = libraries[name] || {},
                libraries[name].marker = marker,
                libraries[name].library = library,
                libraries[name].create = create,
                libraries[name].destroy = destroy,
                libraries[name].initialized = !1
        },
        removeLibrary = function (name) {
            var current = null
            for (library in libraries) {
                current = null,
                    'string' == typeof name ? name === library && (current = libraries[name]) : current = libraries[library],
                null !== current && 'function' == typeof current.destroy && (current.destroy(), delete libraries[library])
            }
        },
        init = function (options) {
            _initialize(options)
        }
    return {
        init: init,
        listen: _listen,
        disable: _disable,
        addLibrary: addLibrary
    }
}(), function () {
    var $ = window.$ ? window.$ : null,
        GISMasking = {
            data: {
                globals: {
                    MASKING_CLASS_BASE: 'gis-mask',
                    MASKING_CLASS_ORIGINAL: 'gis-mask-original',
                    MASKING_CLASS_READY: 'gis-mask-input',
                    MASKING_CLASS_LIVE: 'gis-mask-live',
                    MASKED_INPUT_SUFFIX: '-masked',
                    MASKING_CHARACTER: 'â',
                    FULL_MASK_TOGGLE_SUFFIX: '-cbToggleFullMask'
                },
                maskingPatterns: {
                    allChars: /./g,
                    alphaNumeric: /[a-z\d]/gi
                }
            },
            fn: {
                helpers: {
                    applyMask: function (sValue, sPattern, sMaskType) {
                        var aPatternMatch = sValue.match(new RegExp(sPattern)),
                            sMaskedPortion = sValue,
                            regexMaskPattern = GISMasking.data.maskingPatterns.allChars
                        aPatternMatch && (sMaskedPortion = aPatternMatch[0]),
                        GISMasking.data.maskingPatterns.hasOwnProperty(sMaskType) && (regexMaskPattern = GISMasking.data.maskingPatterns[sMaskType])
                        var sMaskedValue = sMaskedPortion.replace(regexMaskPattern, GISMasking.data.globals.MASKING_CHARACTER)
                        return sValue.replace(sMaskedPortion, sMaskedValue)
                    }
                },
                core: {
                    addMasking: function ($inputGroup) {
                        $inputGroup.each(function () {
                            var $inputField = $(this),
                                sInputMaskId = $inputField.attr('id') + GISMasking.data.globals.MASKED_INPUT_SUFFIX,
                                $inputMask = $('#' + sInputMaskId)
                            0 === $inputMask.length && ($inputMask = $inputField.clone(), $inputField.addClass(GISMasking.data.globals.MASKING_CLASS_ORIGINAL).filter('.' + GISMasking.data.globals.MASKING_CLASS_LIVE).bind('input.gisMasking', GISMasking.fn.core.liveMask), $inputMask.attr('id', sInputMaskId).attr('name', $inputField.attr('name') + GISMasking.data.globals.MASKED_INPUT_SUFFIX).removeClass(GISMasking.data.globals.MASKING_CLASS_BASE).addClass(GISMasking.data.globals.MASKING_CLASS_READY).addClass('hidden').attr('aria-hidden', 'true').bind('focus.gisMasking', function () {
                                var sMaskId = $(this).attr('id')
                                clearTimeout('timeout-' + sMaskId),
                                    $(this).addClass('hidden').attr('aria-hidden', 'true')
                                var sSourceInputId = sMaskId.replace(GISMasking.data.globals.MASKED_INPUT_SUFFIX, '')
                                $('#' + sSourceInputId).attr('aria-hidden', 'false').removeClass('hidden').focus()
                                $('label[for=\'' + sMaskId + '\']').attr('for', sSourceInputId)
                            }), $inputField.after($inputMask)),
                                $(this).bind('blur.gisMasking', function () {
                                    GISMasking.fn.core.maskData($(this), 200)
                                }),
                                GISMasking.fn.core.maskData($(this), 0)
                        })
                    },
                    disableMasking: function () {
                        $('.' + GISMasking.data.globals.MASKING_CLASS_READY).remove(),
                            $('.' + GISMasking.data.globals.MASKING_CLASS_ORIGINAL).removeClass('hidden'),
                            GISMasking.fn.core.maskData = function () {
                                return !0
                            }
                    },
                    liveMask: function () {
                        if ('function' == typeof window.getCaretCoordinates) {
                            getCaretCoordinates(this, this.selectionEnd)
                        }
                    },
                    maskData: function ($element, iDelay) {
                        var sCurrVal = $.trim($element.val())
                        if ('' !== sCurrVal && sCurrVal !== $element.attr('placeholder')) {
                            var sMaskingType = $element.data('field-type'),
                                sInputMaskId = $element.attr('id') + GISMasking.data.globals.MASKED_INPUT_SUFFIX,
                                $inputMask = $('#' + sInputMaskId),
                                sMaskingFunctionName = 'basic'
                            GISMasking.fn.maskingRules.hasOwnProperty(sMaskingType) && (sMaskingFunctionName = sMaskingType),
                                $element.addClass('hidden'),
                                $element.attr('aria-hidden', 'true'),
                                $('label[for=\'' + $element.attr('id') + '\']').attr('for', sInputMaskId),
                                $inputMask.attr('aria-hidden', 'false'),
                                $inputMask.removeClass('hidden'),
                                $inputMask.val(sCurrVal),
                                window['timeout-' + sInputMaskId] = setTimeout(function () {
                                    $inputMask.val(GISMasking.fn.maskingRules[sMaskingFunctionName](sCurrVal))
                                }, iDelay)
                        }
                    }
                },
                maskingRules: {
                    basic: function (sValue) {
                        var sInputPattern = '^.+$',
                            sMaskingPattern = 'allChars'
                        return GISMasking.fn.helpers.applyMask(sValue, sInputPattern, sMaskingPattern)
                    },
                    email: function (sEmailValue) {
                        var sMaskedPortion = sEmailValue.split('@') [0],
                            sMaskedValue = sMaskedPortion,
                            sMaskedPortionLength = sMaskedPortion.length
                        if (3 > sMaskedPortionLength) {
                            sMaskedValue = GISMasking.fn.maskingRules.basic(sMaskedPortion)
                        } else {
                            var sSubstringPortion = sMaskedPortion.substring(1, sMaskedPortionLength - 1),
                                sMaskedSubstringValue = GISMasking.fn.maskingRules.basic(sSubstringPortion)
                            sMaskedValue = sMaskedPortion.charAt(0) + sMaskedSubstringValue + sMaskedPortion.charAt(sMaskedPortionLength - 1)
                        }
                        return sEmailValue.replace(sMaskedPortion, sMaskedValue)
                    },
                    phone: function (sPhoneValue) {
                        var sInputPattern = '^.+(?=.{4}$)',
                            sMaskingPattern = 'alphaNumeric'
                        return GISMasking.fn.helpers.applyMask(sPhoneValue, sInputPattern, sMaskingPattern)
                    },
                    account: function (sAccountValue) {
                        var sInputPattern = '^.+(?=.{4}$)',
                            sMaskingPattern = 'allChars'
                        return GISMasking.fn.helpers.applyMask(sAccountValue, sInputPattern, sMaskingPattern)
                    },
                    date: function (sDateValue) {
                        var sInputPattern = '^.+$',
                            sMaskingPattern = 'alphaNumeric'
                        return GISMasking.fn.helpers.applyMask(sDateValue, sInputPattern, sMaskingPattern)
                    },
                    ssn: function (sSSNValue) {
                        var sInputPattern = '^.+$',
                            sMaskingPattern = 'alphaNumeric'
                        return GISMasking.fn.helpers.applyMask(sSSNValue, sInputPattern, sMaskingPattern)
                    }
                }
            }
        },
        GISMaskingCreate = function (jQuery, $context) {
            $ = jQuery,
                GISMasking.fn.core.addMasking($('.' + GISMasking.data.globals.MASKING_CLASS_BASE, $context))
        },
        GISMaskingDestroy = function () {
            GISMasking.fn.core.disableMasking()
        }
    boa && boa.form && 'function' == typeof boa.form.addLibrary && boa.form.addLibrary('gisMasking', GISMasking.data.globals.MASKING_CLASS_BASE, GISMasking, GISMaskingCreate, GISMaskingDestroy)
}(), function () {
    var $ = window.$ ? window.$ : null,
        fixPatch = {
            data: {},
            fn: {
                patchBoaCSValidate: function () {
                    if ('undefined' != typeof boaCSValidate && 'function' == typeof boaCSValidate.fn.validateFields && 'function' == typeof boaCSValidate.fn.validateClear) {
                        var _validateFunc = boaCSValidate.fn.validateFields
                        boaCSValidate.fn.validateFields = function (objref, message, label) {
                            var $currTarget = $(objref)
                            if ($currTarget.hasClass('hidden')) {
                                var visibleTextId = $currTarget.attr('id') + '-masked'
                                return _validateFunc($('#' + visibleTextId), message, label ? $('label[for=\'' + visibleTextId + '\']') : label)
                            }
                            return _validateFunc(objref, message, label)
                        }
                        var _validateClearFunc = boaCSValidate.fn.validateClear
                        boaCSValidate.fn.validateClear = function (objref, label) {
                            var $currTarget = $(objref)
                            if ($currTarget.hasClass('hidden')) {
                                var visibleTextId = $currTarget.attr('id') + '-masked'
                                return _validateClearFunc($('#' + visibleTextId), label ? $('label[for=\'' + visibleTextId + '\']') : label)
                            }
                            return _validateClearFunc(objref, label)
                        }
                    }
                }
            }
        }
    applyFixPatches = function (jQuery, $context) {
        $ = jQuery,
            fixPatch.fn.patchBoaCSValidate()
    },
    boa && boa.form && 'function' == typeof boa.form.addLibrary && boa.form.addLibrary('fixPatch', 'ALL', fixPatch, applyFixPatches)
}()
input = new function () {
    this.e = (new Date(2005, 0, 15)).getTimezoneOffset()
    this.f = (new Date(2005, 6, 15)).getTimezoneOffset()
    this.plugins = []
    this.d = {
        Flash: [
            'ShockwaveFlash.ShockwaveFlash',
            function (b) {
                return b.getVariable('$version')
            }
        ],
        Director: [
            'SWCtl.SWCtl',
            function (b) {
                return b.ShockwaveVersion('')
            }
        ]
    }
    this.q = function (b) {
        var c
        try {
            c = document.getElementById(b)
        } catch (d) {
        }
        if (c === null || typeof c === 'undefined') {
            try {
                c = document.getElementsByName(b) [0]
            } catch (e) {
            }
        }
        if (c === null || typeof c === 'undefined') {
            for (var f = 0; f < document.forms.length; f++) {
                for (var g = document.forms[f], h = 0; h < g.elements.length; h++) {
                    var a = g[h]
                    if (a.name === b || a.id === b) {
                        return a
                    }
                }
            }
        }
        return c
    }
    this.b = function (b) {
        var c = ''
        try {
            if (typeof this.c.getComponentVersion !== 'undefined') {
                c = this.c.getComponentVersion(b, 'ComponentID')
            }
        } catch (d) {
            b = d.message.length
            b = b > 40 ? 40 : b
            c = escape(d.message.substr(0, b))
        }
        return c
    }
    this.exec = function (b) {
        for (var c = 0; c < b.length; c++) {
            try {
                var d = eval(b[c])
                if (d) {
                    return d
                }
            } catch (e) {
            }
        }
        return ''
    }
    this.n = function (b) {
        var c = ''
        try {
            if (navigator.plugins && navigator.plugins.length) {
                var d = RegExp(b + '.* ([0-9._]+)')
                for (b = 0; b < navigator.plugins.length; b++) {
                    var e = d.exec(navigator.plugins[b].name)
                    if (e === null) {
                        e = d.exec(navigator.plugins[b].description)
                    }
                    if (e) {
                        c = e[1]
                    }
                }
            } else {
                if (window.ActiveXObject && this.d[b]) {
                    try {
                        var f = new ActiveXObject(this.d[b][0])
                        c = this.d[b][1](f)
                    } catch (g) {
                        c = ''
                    }
                }
            }
        } catch (h) {
            c = h.message
        }
        return c
    }
    this.o = function () {
        for (var b = [
            'Acrobat',
            'Flash',
            'QuickTime',
            'Java Plug-in',
            'Director',
            'Office'
        ], c = 0; c < b.length; c++) {
            var d = b[c]
            this.plugins[d] = this.n(d)
        }
    }
    this.g = function () {
        return Math.abs(this.e - this.f)
    }
    this.h = function () {
        return this.g() !== 0
    }
    this.i = function (b) {
        var c = Math.min(this.e, this.f)
        return this.h() && b.getTimezoneOffset() === c
    }
    this.l = function (b) {
        var c = 0
        c = 0
        if (this.i(b)) {
            c = this.g()
        }
        return c = -(b.getTimezoneOffset() + c) / 60
    }
    this.j = function (b, c, d, e) {
        if (typeof e !== 'boolean') {
            e = false
        }
        for (var f = true, g; (g = b.indexOf(c)) >= 0 && (e || f);) {
            b = b.substr(0, g) + d + b.substr(g + c.length)
            f = false
        }
        return b
    }
    this.k = function () {
        return (new Date(2005, 5, 7, 21, 33, 44, 888)).toLocaleString()
    }
    this.r = function (b) {
        var c = new Date,
            d = [
                function () {
                    return 'TF1'
                },
                function () {
                    return '015'
                },
                function () {
                    return ScriptEngineMajorVersion()
                },
                function () {
                    return ScriptEngineMinorVersion()
                },
                function () {
                    return ScriptEngineBuildVersion()
                },
                function (a) {
                    return a.b('{7790769C-0471-11D2-AF11-00C04FA35D02}')
                },
                function (a) {
                    return a.b('{89820200-ECBD-11CF-8B85-00AA005B4340}')
                },
                function (a) {
                    return a.b('{283807B5-2C60-11D0-A31D-00AA00B92C03}')
                },
                function (a) {
                    return a.b('{4F216970-C90C-11D1-B5C7-0000F8051515}')
                },
                function (a) {
                    return a.b('{44BBA848-CC51-11CF-AAFA-00AA00B6015C}')
                },
                function (a) {
                    return a.b('{9381D8F2-0288-11D0-9501-00AA00B911A5}')
                },
                function (a) {
                    return a.b('{4F216970-C90C-11D1-B5C7-0000F8051515}')
                },
                function (a) {
                    return a.b('{5A8D6EE0-3E18-11D0-821E-444553540000}')
                },
                function (a) {
                    return a.b('{89820200-ECBD-11CF-8B85-00AA005B4383}')
                },
                function (a) {
                    return a.b('{08B0E5C0-4FCB-11CF-AAA5-00401C608555}')
                },
                function (a) {
                    return a.b('{45EA75A0-A269-11D1-B5BF-0000F8051515}')
                },
                function (a) {
                    return a.b('{DE5AED00-A4BF-11D1-9948-00C04F98BBC9}')
                },
                function (a) {
                    return a.b('{22D6F312-B0F6-11D0-94AB-0080C74C7E95}')
                },
                function (a) {
                    return a.b('{44BBA842-CC51-11CF-AAFA-00AA00B6015B}')
                },
                function (a) {
                    return a.b('{3AF36230-A269-11D1-B5BF-0000F8051515}')
                },
                function (a) {
                    return a.b('{44BBA840-CC51-11CF-AAFA-00AA00B6015C}')
                },
                function (a) {
                    return a.b('{CC2A9BA0-3BDD-11D0-821E-444553540000}')
                },
                function (a) {
                    return a.b('{08B0E5C0-4FCB-11CF-AAA5-00401C608500}')
                },
                function () {
                    return eval('navigator.appCodeName')
                },
                function () {
                    return eval('navigator.appName')
                },
                function () {
                    return eval('navigator.appVersion')
                },
                function (a) {
                    return a.exec(['navigator.productSub',
                        'navigator.appMinorVersion'])
                },
                function () {
                    return eval('navigator.browserLanguage')
                },
                function () {
                    return eval('navigator.cookieEnabled')
                },
                function (a) {
                    return a.exec(['navigator.oscpu',
                        'navigator.cpuClass'])
                },
                function () {
                    return eval('navigator.onLine')
                },
                function () {
                    return eval('navigator.platform')
                },
                function () {
                    return eval('navigator.systemLanguage')
                },
                function () {
                    return eval('navigator.userAgent')
                },
                function (a) {
                    return a.exec(['navigator.language',
                        'navigator.userLanguage'])
                },
                function () {
                    return eval('document.defaultCharset')
                },
                function () {
                    return eval('document.domain')
                },
                function () {
                    return eval('screen.deviceXDPI')
                },
                function () {
                    return eval('screen.deviceYDPI')
                },
                function () {
                    return eval('screen.fontSmoothingEnabled')
                },
                function () {
                    return eval('screen.updateInterval')
                },
                function (a) {
                    return a.h()
                },
                function (a) {
                    return a.i(c)
                },
                function () {
                    return '@UTC@'
                },
                function (a) {
                    return a.l(c)
                },
                function (a) {
                    return a.k()
                },
                function () {
                    return eval('screen.width')
                },
                function () {
                    return eval('screen.height')
                },
                function (a) {
                    return a.plugins.Acrobat
                },
                function (a) {
                    return a.plugins.Flash
                },
                function (a) {
                    return a.plugins.QuickTime
                },
                function (a) {
                    return a.plugins['Java Plug-in']
                },
                function (a) {
                    return a.plugins.Director
                },
                function (a) {
                    return a.plugins.Office
                },
                function () {
                    return (new Date).getTime() - c.getTime()
                },
                function (a) {
                    return a.e
                },
                function (a) {
                    return a.f
                },
                function () {
                    return c.toLocaleString()
                },
                function () {
                    return eval('screen.colorDepth')
                },
                function () {
                    return eval('window.screen.availWidth')
                },
                function () {
                    return eval('window.screen.availHeight')
                },
                function () {
                    return eval('window.screen.availLeft')
                },
                function () {
                    return eval('window.screen.availTop')
                },
                function (a) {
                    return a.a('Acrobat')
                },
                function (a) {
                    return a.a('Adobe SVG')
                },
                function (a) {
                    return a.a('Authorware')
                },
                function (a) {
                    return a.a('Citrix ICA')
                },
                function (a) {
                    return a.a('Director')
                },
                function (a) {
                    return a.a('Flash')
                },
                function (a) {
                    return a.a('MapGuide')
                },
                function (a) {
                    return a.a('MetaStream')
                },
                function (a) {
                    return a.a('PDFViewer')
                },
                function (a) {
                    return a.a('QuickTime')
                },
                function (a) {
                    return a.a('RealOne')
                },
                function (a) {
                    return a.a('RealPlayer Enterprise')
                },
                function (a) {
                    return a.a('RealPlayer Plugin')
                },
                function (a) {
                    return a.a('Seagate Software Report')
                },
                function (a) {
                    return a.a('Silverlight')
                },
                function (a) {
                    return a.a('Windows Media')
                },
                function (a) {
                    return a.a('iPIX')
                },
                function (a) {
                    return a.a('nppdf.so')
                },
                function (a) {
                    return a.m()
                }
            ]
        this.o()
        for (var e = '', f = 0; f < d.length; f++) {
            if (b) {
                e += this.j(d[f].toString(), '"', '\'', true)
                e += '='
            }
            var g
            try {
                g = d[f](this)
            } catch (h) {
                g = ''
            }
            e += b ? g : escape(g)
            e += ';'
            if (b) {
                e += '\\n'
            }
        }
        return e = this.j(e, escape('@UTC@'), (new Date).getTime())
    }
    this.p = function (b) {
        try {
            var c
            c = this.q(b)
            if (c !== null) {
                try {
                    c.value = this.r()
                } catch (d) {
                    c.value = escape(d.message)
                }
            }
        } catch (e) {
        }
    }
    this.a = function (b) {
        try {
            if (navigator.plugins && navigator.plugins.length) {
                for (var c = 0; c < navigator.plugins.length; c++) {
                    var d = navigator.plugins[c]
                    if (d.name.indexOf(b) >= 0) {
                        return d.name + (d.description ? '|' + d.description : '')
                    }
                }
            }
        } catch (e) {
        }
        return ''
    }
    this.m = function () {
        var b = document.createElement('span')
        b.innerHTML = '&nbsp;'
        b.style.position = 'absolute'
        b.style.left = '-9999px'
        document.body.appendChild(b)
        var c = b.offsetHeight
        document.body.removeChild(b)
        return c
    }
}
try {
    input.c = document.createElement('span')
    typeof input.c.addBehavior !== 'undefined' && input.c.addBehavior('#default#clientCaps')
} catch (i) {
}
window.input = input
window.input.parse_data = input.p
var SEP = '|'
var PAIR = '='

function PM_FP_activeXDetect(componentClassID) {
    var componentVersion = null
    try {
        componentVersion = document.body.getComponentVersion('{' + componentClassID + '}', 'ComponentID')
    } catch (err) {
    }
    return (componentVersion !== null) ? componentVersion : false
}

function PM_FP_stripIllegalChars(value) {
    var t = ''
    value = value.toLowerCase()
    for (var i = 0; i < value.length; i++) {
        if (value.charAt(i) != '\n' && value.charAt(i) != '/' && value.charAt(i) != '\\') {
            t += value.charAt(i)
        } else {
            if (value.charAt(i) == '\n') {
                t += 'n'
            }
        }
    }
    return t
}

function PM_FP_stripFullPath(tempFileName, lastDir) {
    var fileName = tempFileName
    var filenameStart = 0
    filenameStart = fileName.lastIndexOf(lastDir)
    if (filenameStart < 0) {
        return tempFileName
    }
    var filenameFinish = fileName.length
    fileName = fileName.substring(filenameStart + lastDir.length, filenameFinish)
    return fileName
}

var PM_FP_BrowserDetect = {
    init: function () {
        this.browser = this.searchString(this.dataBrowser) || 'An unknown browser'
        this.version = this.searchVersion(navigator.userAgent) || this.searchVersion(navigator.appVersion) || 'an unknown version'
        this.OS = this.searchString(this.dataOS) || 'an unknown OS'
    },
    searchString: function (data) {
        for (var i = 0; i < data.length; i++) {
            var dataString = data[i].string
            var dataProp = data[i].prop
            this.versionSearchString = data[i].versionSearch || data[i].identity
            if (dataString) {
                if (dataString.indexOf(data[i].subString) != -1) {
                    return data[i].identity
                }
            } else {
                if (dataProp) {
                    return data[i].identity
                }
            }
        }
    },
    searchVersion: function (dataString) {
        var index = dataString.indexOf(this.versionSearchString)
        if (index == -1) {
            return
        }
        return parseFloat(dataString.substring(index + this.versionSearchString.length + 1))
    },
    dataBrowser: [
        {
            string: navigator.userAgent,
            subString: 'Chrome',
            identity: 'Chrome',
            id: 1
        },
        {
            string: navigator.userAgent,
            subString: 'OmniWeb',
            versionSearch: 'OmniWeb/',
            identity: 'OmniWeb',
            id: 2
        },
        {
            string: navigator.vendor,
            subString: 'Apple',
            identity: 'Safari',
            versionSearch: 'Version',
            id: 3
        },
        {
            prop: window.opera,
            identity: 'Opera',
            id: 4
        },
        {
            string: navigator.vendor,
            subString: 'iCab',
            identity: 'iCab',
            id: 5
        },
        {
            string: navigator.vendor,
            subString: 'KDE',
            identity: 'Konqueror',
            id: 5
        },
        {
            string: navigator.userAgent,
            subString: 'Firefox',
            identity: 'Firefox',
            id: 6
        },
        {
            string: navigator.vendor,
            subString: 'Camino',
            identity: 'Camino',
            id: 7
        },
        {
            string: navigator.userAgent,
            subString: 'Netscape',
            identity: 'Netscape',
            id: 8
        },
        {
            string: navigator.userAgent,
            subString: 'MSIE',
            identity: 'Explorer',
            versionSearch: 'MSIE',
            id: 9
        },
        {
            string: navigator.userAgent,
            subString: 'Gecko',
            identity: 'Mozilla',
            versionSearch: 'rv',
            id: 10
        },
        {
            string: navigator.userAgent,
            subString: 'Mozilla',
            identity: 'Netscape',
            versionSearch: 'Mozilla',
            id: 11
        }
    ],
    dataOS: [
        {
            string: navigator.platform,
            subString: 'Win',
            identity: 'Windows'
        },
        {
            string: navigator.platform,
            subString: 'Mac',
            identity: 'Mac'
        },
        {
            string: navigator.userAgent,
            subString: 'iPhone',
            identity: 'iPhone/iPod'
        },
        {
            string: navigator.platform,
            subString: 'Linux',
            identity: 'Linux'
        }
    ]
}
Date.prototype.deviceprint_stdTimezoneOffset = function () {
    var jan = new Date(this.getFullYear(), 0, 1)
    var jul = new Date(this.getFullYear(), 6, 1)
    return Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset())
}
Date.prototype.deviceprint_dst = function () {
    return this.getTimezoneOffset() < this.deviceprint_stdTimezoneOffset()
}

function PM_FP_FingerPrint() {
    var ht = new Hashtable()
    ht.put('npnul32', 'def')
    ht.put('npqtplugin6', 'qt6')
    ht.put('npqtplugin5', 'qt5')
    ht.put('npqtplugin4', 'qt4')
    ht.put('npqtplugin3', 'qt3')
    ht.put('npqtplugin2', 'qt2')
    ht.put('npqtplugin', 'qt1')
    ht.put('nppdf32', 'pdf')
    ht.put('NPSWF32', 'swf')
    ht.put('NPJava11', 'j11')
    ht.put('NPJava12', 'j12')
    ht.put('NPJava13', 'j13')
    ht.put('NPJava32', 'j32')
    ht.put('NPJava14', 'j14')
    ht.put('npoji600', 'j61')
    ht.put('NPJava131_16', 'j16')
    ht.put('NPOFFICE', 'mso')
    ht.put('npdsplay', 'wpm')
    ht.put('npwmsdrm', 'drm')
    ht.put('npdrmv2', 'drn')
    ht.put('nprjplug', 'rjl')
    ht.put('nppl3260', 'rpl')
    ht.put('nprpjplug', 'rpv')
    ht.put('npchime', 'chm')
    ht.put('npCortona', 'cor')
    ht.put('np32dsw', 'dsw')
    ht.put('np32asw', 'asw')
    this.deviceprint_version = function () {
        return 1
    }
    this.deviceprint_browser = function () {
        var userAgent = navigator.userAgent
        var ua = userAgent.toLowerCase()
        var t = ua + SEP + navigator.appVersion + SEP + navigator.platform
        return t
    }
    this.deviceprint_software = function () {
        var t = ''
        var isFirst = true
        if (navigator.plugins.length > 0) {
            var temp = ''
            var moz = ''
            var key = ''
            var plugin = ''
            for (i = 0; i < navigator.plugins.length; i++) {
                plugin = navigator.plugins[i]
                moz = plugin.filename
                var index = moz.indexOf('.')
                moz = moz.slice(0, index)
                if (isFirst === true) {
                    key = ht.containsKey(moz)
                    if (key) {
                        temp += ht.get(moz)
                        isFirst = false
                    } else {
                        temp = ''
                        isFirst = false
                    }
                } else {
                    key = ht.containsKey(moz)
                    if (key) {
                        temp += SEP + ht.get(moz)
                    }
                }
            }
            t = PM_FP_stripIllegalChars(temp)
        }
        return t
    }
    this.deviceprint_display = function () {
        var t = ''
        if (self.screen) {
            t += screen.colorDepth + SEP + screen.width + SEP + screen.height + SEP + screen.availHeight
        }
        return t
    }
    this.deviceprint_timezone = function () {
        var gmtHours = (new Date().getTimezoneOffset() / 60) * (-1)
        var today = new Date()
        if (today.deviceprint_dst()) {
            gmtHours--
        } else {
        }
        return gmtHours
    }
    this.deviceprint_language = function () {
        var lang
        if (typeof (navigator.language) !== 'undefined') {
            lang = 'lang' + PAIR + navigator.language + SEP
        } else {
            if (typeof (navigator.browserLanguage) !== 'undefined') {
                lang = 'lang' + PAIR + navigator.browserLanguage + SEP
            } else {
                lang = 'lang' + PAIR + '' + SEP
            }
        }
        if ((typeof (navigator.systemLanguage) !== 'undefined')) {
            lang += 'syslang' + PAIR + navigator.systemLanguage + SEP
        } else {
            lang += 'syslang' + PAIR + '' + SEP
        }
        if ((typeof (navigator.userLanguage) !== 'undefined')) {
            lang += 'userlang' + PAIR + navigator.userLanguage
        } else {
            lang += 'userlang' + PAIR + ''
        }
        return lang
    }
    this.deviceprint_java = function () {
        var javaEnabled = (navigator.javaEnabled()) ? 1 : 0
        return javaEnabled
    }
    this.deviceprint_cookie = function () {
        var cookieEnabled = (navigator.cookieEnabled) ? 1 : 0
        if (typeof navigator.cookieEnabled === 'undefined' && !cookieEnabled) {
            document.cookie = 'testcookie'
            cookieEnabled = (document.cookie.indexOf('testcookie') !== -1) ? 1 : 0
        }
        return cookieEnabled
    }
    this.form_add_data = function (fd, name, value) {
        if (fd && fd.length > 0) {
            fd += '&'
        } else {
            fd = ''
        }
        fd += name + '=' + escape(value.toString())
        return fd
    }
    this.form_add_deviceprint = function (fd, name, value) {
        fd = form_add_data(fd, name + 'd', value)
        return fd
    }
    this.asyncpost_deviceprint = function asyncpost_deviceprint(url) {
        var xmlhttp = false
        /* @cc_on @ */
        if (!xmlhttp && typeof XMLHttpRequest !== 'undefined') {
            xmlhttp = new XMLHttpRequest()
        }
        if (!xmlhttp) {
            return false
        }
        xmlhttp.open('POST', url, true)
        xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
        var fd
        fd = form_add_deviceprint(fd, 'fp_browser', deviceprint_browser())
        fd = form_add_deviceprint(fd, 'fp_display', deviceprint_display())
        fd = form_add_deviceprint(fd, 'fp_software', deviceprint_software())
        fd = form_add_deviceprint(fd, 'fp_timezone', deviceprint_timezone())
        fd = form_add_deviceprint(fd, 'fp_language', deviceprint_language())
        fd = form_add_deviceprint(fd, 'fp_java', deviceprint_java())
        fd = form_add_deviceprint(fd, 'fp_cookie', deviceprint_cookie())
        xmlhttp.send(fd)
        return true
    }
}

function Hashtable() {
    var keysToIndex = {
        __indexToValue: [],
        __indexToKeys: []
    }
    var activeEnum = []
    var tableLength = 0
    var self = this

    function Enumeration(arrNm) {
        var lastIndex = null
        var enumIndex = 0
        while (typeof activeEnum[enumIndex] == 'number') {
            enumIndex += 1
        }
        activeEnum[enumIndex] = 0
        this.hasNext = this.hasMoreElements = function () {
            if (activeEnum[enumIndex] < tableLength) {
                return true
            } else {
                if (typeof activeEnum[enumIndex] == 'number') {
                    activeEnum[enumIndex] = null
                }
                return false
            }
        }
        this.next = this.nextElement = function () {
            if (this.hasNext) {
                lastIndex = activeEnum[enumIndex]
                return keysToIndex[arrNm][activeEnum[enumIndex]++]
            } else {
                return null
            }
        }
        this.remove = function () {
            if (typeof lastIndex == 'number') {
                self.remove(keysToIndex.__indexToKeys[lastIndex])
                lastIndex = null
            }
        }
    }

    this.get = function (key) {
        if (typeof keysToIndex[key] == 'number') {
            return keysToIndex.__indexToValue[keysToIndex[key]]
        } else {
            return null
        }
    }
    this.put = function (key, value) {
        if (typeof keysToIndex[key] == 'number') {
            keysToIndex.__indexToValue[keysToIndex[key]] = value
        } else {
            keysToIndex[key] = tableLength
            keysToIndex.__indexToValue[tableLength] = value
            keysToIndex.__indexToKeys[tableLength++] = key
        }
    }
    this.remove = function (key) {
        var remIndex = keysToIndex[key]
        if (typeof remIndex == 'number') {
            delete keysToIndex[key]
            tableLength -= 1
            for (var c = remIndex; c < tableLength; c++) {
                keysToIndex.__indexToValue[c] = keysToIndex.__indexToValue[c + 1]
                keysToIndex[(keysToIndex.__indexToKeys[c] = keysToIndex.__indexToKeys[c + 1])] = c
            }
            for (var j = 0; j < activeEnum.length; j++) {
                if ((activeEnum[j]) && (remIndex < activeEnum[j])) {
                    activeEnum[j] -= 1
                }
            }
        }
    }
    this.size = function () {
        return tableLength
    }
    this.__enumerate = function (type) {
        return new Enumeration(type)
    }
    Hashtable.prototype.elements = function () {
        return this.__enumerate('__indexToValue')
    }
    Hashtable.prototype.keys = function () {
        return this.__enumerate('__indexToKeys')
    }
    Hashtable.prototype.clear = function () {
        var e = this.keys()
        while (e.hasNext()) {
            this.remove(e.next())
        }
    }
    Hashtable.prototype.toString = function () {
        var n,
            e = this.keys()
        var st = ''
        while (e.hasNext()) {
            n = e.next()
            st += n + ' =&gt; ' + this.get(n) + '\r\n'
        }
        return st
    }
    Hashtable.prototype.contains = function (testVal) {
        var e = this.elements()
        while (e.hasNext()) {
            if (e.next() == testVal) {
                return true
            }
        }
        return false
    }
    Hashtable.prototype.containsValue = Hashtable.prototype.contains
    Hashtable.prototype.containsKey = function (testKey) {
        return (this.get(testKey) !== null)
    }
    Hashtable.prototype.isEmpty = function () {
        return (this.size() === 0)
    }
    Hashtable.prototype.putAll = function (hTable) {
        if (hTable.constructor == Hashtable) {
            var n,
                e = hTable.keys()
            while (e.hasNext()) {
                n = e.next()
                this.put(n, hTable.get(n))
            }
        }
    }
    Hashtable.prototype.clone = function () {
        var ht = new Hashtable()
        ht.putAll(this)
        return ht
    }
    Hashtable.prototype.equals = function (o) {
        return (o == this)
    }
}

function IE_FingerPrint() {
    this.deviceprint_browser = function () {
        var ua = navigator.userAgent.toLowerCase()
        var t = ua + SEP + navigator.appVersion + SEP + navigator.platform
        t += SEP + navigator.appMinorVersion + SEP + navigator.cpuClass + SEP + navigator.browserLanguage
        t += SEP + ScriptEngineBuildVersion()
        return t
    }
    this.deviceprint_software = function deviceprint_software() {
        var t = ''
        var isFirst = true
        try {
            document.body.addBehavior('#default#clientCaps')
            var compVer
            for (var i = 0; i < components.length; i++) {
                compVer = PM_FP_activeXDetect(components[i])
                var name = names[i]
                if (compVer) {
                    if (isFirst === true) {
                        t += name + PAIR + compVer
                        isFirst = false
                    } else {
                        t += SEP + name + PAIR + compVer
                    }
                } else {
                    t += ''
                    isFirst = false
                }
            }
        } catch (err) {
        }
        return t
    }
    var names = new Array('abk', 'wnt', 'aol', 'arb', 'chs', 'cht', 'dht', 'dhj', 'dan', 'dsh', 'heb', 'ie5', 'icw', 'ibe', 'iec', 'ieh', 'iee', 'jap', 'krn', 'lan', 'swf', 'shw', 'msn', 'wmp', 'obp', 'oex', 'net', 'pan', 'thi', 'tks', 'uni', 'vtc', 'vnm', 'mvm', 'vbs', 'wfd')
    var components = new Array('7790769C-0471-11D2-AF11-00C04FA35D02', '89820200-ECBD-11CF-8B85-00AA005B4340', '47F67D00-9E55-11D1-BAEF-00C04FC2D130', '76C19B38-F0C8-11CF-87CC-0020AFEECF20', '76C19B34-F0C8-11CF-87CC-0020AFEECF20', '76C19B33-F0C8-11CF-87CC-0020AFEECF20', '9381D8F2-0288-11D0-9501-00AA00B911A5', '4F216970-C90C-11D1-B5C7-0000F8051515', '283807B5-2C60-11D0-A31D-00AA00B92C03', '44BBA848-CC51-11CF-AAFA-00AA00B6015C', '76C19B36-F0C8-11CF-87CC-0020AFEECF20', '89820200-ECBD-11CF-8B85-00AA005B4383', '5A8D6EE0-3E18-11D0-821E-444553540000', '630B1DA0-B465-11D1-9948-00C04F98BBC9', '08B0E5C0-4FCB-11CF-AAA5-00401C608555', '45EA75A0-A269-11D1-B5BF-0000F8051515', 'DE5AED00-A4BF-11D1-9948-00C04F98BBC9', '76C19B30-F0C8-11CF-87CC-0020AFEECF20', '76C19B31-F0C8-11CF-87CC-0020AFEECF20', '76C19B50-F0C8-11CF-87CC-0020AFEECF20', 'D27CDB6E-AE6D-11CF-96B8-444553540000', '2A202491-F00D-11CF-87CC-0020AFEECF20', '5945C046-LE7D-LLDL-BC44-00C04FD912BE', '22D6F312-B0F6-11D0-94AB-0080C74C7E95', '3AF36230-A269-11D1-B5BF-0000F8051515', '44BBA840-CC51-11CF-AAFA-00AA00B6015C', '44BBA842-CC51-11CF-AAFA-00AA00B6015B', '76C19B32-F0C8-11CF-87CC-0020AFEECF20', '76C19B35-F0C8-11CF-87CC-0020AFEECF20', 'CC2A9BA0-3BDD-11D0-821E-444553540000', '3BF42070-B3B1-11D1-B5C5-0000F8051515', '10072CEC-8CC1-11D1-986E-00A0C955B42F', '76C19B37-F0C8-11CF-87CC-0020AFEECF20', '08B0E5C0-4FCB-11CF-AAA5-00401C608500', '4F645220-306D-11D2-995D-00C04F98BBC9', '73FA19D0-2D75-11D2-995D-00C04F98BBC9')
}

IE_FingerPrint.prototype = new PM_FP_FingerPrint()

function Mozilla_FingerPrint() {
}

Mozilla_FingerPrint.prototype = new PM_FP_FingerPrint()

function Opera_FingerPrint() {
}

Opera_FingerPrint.prototype = new PM_FP_FingerPrint();

function add_deviceprint() {
    PM_FP_BrowserDetect.init()
    var fp
    switch (PM_FP_BrowserDetect.browser) {
        case 'Explorer':
            fp = new IE_FingerPrint()
            break
        case 'Firefox':
            fp = new Mozilla_FingerPrint()
            break
        case 'Opera':
            fp = new Opera_FingerPrint()
            break
        default:
            fp = new PM_FP_FingerPrint()
    }
    var t = 'version=' + fp.deviceprint_version() + '&pm_fpua=' + fp.deviceprint_browser() + '&pm_fpsc=' + fp.deviceprint_display() + '&pm_fpsw=' + fp.deviceprint_software() + '&pm_fptz=' + fp.deviceprint_timezone() + '&pm_fpln=' + fp.deviceprint_language() + '&pm_fpjv=' + fp.deviceprint_java() + '&pm_fpco=' + fp.deviceprint_cookie()
    return t
}

function PM_FP_urlEncode(text) {
    var encodedString = encodeURIComponent(text).replace(/\~/g, '%7E').replace(/\!/g, '%21').replace(/\*/g, '%2A').replace(/\(/g, '%28').replace(/\)/g, '%29').replace(/\'/g, '%27').replace(/\-/g, '%2D').replace(/\_/g, '%5F').replace(/\./g, '%2E')
    return encodedString
}

function encode_deviceprint() {
    var t = add_deviceprint()
    return PM_FP_urlEncode(t)
}

function decode_deviceprint() {
    var t = encode_deviceprint
    return decodeURIComponent(PM_FP_urlEncode(t))
}

function post_deviceprint() {
    if (document.forms[0] !== null && typeof (document.forms[0]) !== 'undefined') {
        if (document.forms[0].pm_fp) {
            document.forms[0].pm_fp.value = encode_deviceprint()
        }
    }
    return true
}

function post_deviceprint_sk() {
    if (typeof (document.forms[1]) !== 'undefined') {
        if (document.forms[1].pm_fp) {
            document.forms[1].pm_fp.value = encode_deviceprint()
        }
    }
    return true
}

function decrypt(encryptedText, key, iv) {
    return CryptoJS.AES.decrypt(encryptedText, CryptoJS.enc.Utf8.parse(key), {
        iv: CryptoJS.enc.Utf8.parse(iv),
        mode: CryptoJS.mode.CBC,
        padding: CryptoJS.pad.Pkcs7
    }).toString(CryptoJS.enc.Utf8)
}

// TODO exact encrypter
function encryptA(plainText, key) {
    var encObj = new JSEncrypt()
    encObj.setPublicKey(key)
    return encObj.encrypt(plainText)
}

function decryptA(encryptedText, key) {
    var encObj = new JSEncrypt()
    encObj.setPrivateKey(key)
    return encObj.decrypt(encryptedText)
}


// TODO CHECK THIS encrypter
function asyncEncryptField() {
    if (typeof vipaaPublicKey !== 'undefined' && typeof $ !== 'undefined') {
        $('input.async-encrypt').each(function (index) {
            var id = $(this).attr('id')
            var name = $(this).attr('name')
            var newid = id + '-val'
            $(this).removeAttr('name')
            var ipelement = '<input id="' + newid + '" name="' + name + '" type="hidden" value="">'
            $(this).after(ipelement)
            var encVal = encryptA($(this).val(), vipaaPublicKey)
            $('#' + newid).val(encVal)
            $(this).val('************************')
        })
    }
}

(function () {
    window.setTimeout(function () {
        if (window.jQuery) {
            jQuery('.js-card-debit input[type=password]').each(function () {
                var $e = jQuery(this)
                var dataValidation = $e.attr('data-validation')
                if (dataValidation) {
                    $e.attr('data-validation', dataValidation.replace('{3,4}', '{4,12}'))
                }
            })
        } else {
        }
    }, 1000)
})()
var JSEncryptExports = {};
(function (Y) {
    function e(a, b, c) {
        null != a && ('number' == typeof a ? this.fromNumber(a, b, c) : null == b && 'string' != typeof a ? this.fromString(a, 256) : this.fromString(a, b))
    }

    function m() {
        return new e(null)
    }

    function Z(a, b, c, d, f, g) {
        for (; 0 <= --g;) {
            var h = b * this[a++] + c[d] + f
            f = Math.floor(h / 67108864)
            c[d++] = h & 67108863
        }
        return f
    }

    function $(a, b, c, d, f, g) {
        var h = b & 32767
        for (b >>= 15; 0 <= --g;) {
            var k = this[a] & 32767,
                e = this[a++] >> 15,
                x = b * k + e * h,
                k = h * k + ((x & 32767) << 15) + c[d] + (f & 1073741823)
            f = (k >>> 30) + (x >>> 15) + b * e + (f >>> 30)
            c[d++] = k & 1073741823
        }
        return f
    }

    function aa(a, b, c, d, f, g) {
        var h = b & 16383
        for (b >>= 14; 0 <= --g;) {
            var k = this[a] & 16383,
                e = this[a++] >> 14,
                x = b * k + e * h,
                k = h * k + ((x & 16383) << 14) + c[d] + f
            f = (k >> 28) + (x >> 14) + b * e
            c[d++] = k & 268435455
        }
        return f
    }

    function S(a, b) {
        var c = I[a.charCodeAt(b)]
        return null == c ? -1 : c
    }

    function z(a) {
        var b = m()
        b.fromInt(a)
        return b
    }

    function J(a) {
        var b = 1,
            c
        0 != (c = a >>> 16) && (a = c, b += 16)
        0 != (c = a >> 8) && (a = c, b += 8)
        0 != (c = a >> 4) && (a = c, b += 4)
        0 != (c = a >> 2) && (a = c, b += 2)
        0 != a >> 1 && (b += 1)
        return b
    }

    function C(a) {
        this.m = a
    }

    function D(a) {
        this.m = a
        this.mp = a.invDigit()
        this.mpl = this.mp & 32767
        this.mph = this.mp >> 15
        this.um = (1 << a.DB - 15) - 1
        this.mt2 = 2 * a.t
    }

    function ba(a, b) {
        return a & b
    }

    function K(a, b) {
        return a | b
    }

    function T(a, b) {
        return a ^ b
    }

    function U(a, b) {
        return a & ~b
    }

    function G() {
    }

    function V(a) {
        return a
    }

    function E(a) {
        this.r2 = m()
        this.q3 = m()
        e.ONE.dlShiftTo(2 * a.t, this.r2)
        this.mu = this.r2.divide(a)
        this.m = a
    }

    function O() {
        this.j = this.i = 0
        this.S = []
    }

    function L() {
    }

    function n(a, b) {
        return new e(a, b)
    }

    function p() {
        this.n = null
        this.e = 0
        this.coeff = this.dmq1 = this.dmp1 = this.q = this.p = this.d = null
    }

    function P(a) {
        var b,
            c,
            d = ''
        for (b = 0; b + 3 <= a.length; b += 3) {
            c = parseInt(a.substring(b, b + 3), 16),
                d += F.charAt(c >> 6) + F.charAt(c & 63)
        }
        b + 1 == a.length ? (c = parseInt(a.substring(b, b + 1), 16), d += F.charAt(c << 2)) : b + 2 == a.length && (c = parseInt(a.substring(b, b + 2), 16), d += F.charAt(c >> 2) + F.charAt((c & 3) << 4))
        for (; 0 < (d.length & 3);) {
            d += W
        }
        return d
    }

    function ca(a) {
        var b = '',
            c,
            d = 0,
            f
        for (c = 0; c < a.length && a.charAt(c) != W; ++c) {
            v = F.indexOf(a.charAt(c)),
            0 > v || (0 == d ? (b += y.charAt(v >> 2), f = v & 3, d = 1) : 1 == d ? (b += y.charAt(f << 2 | v >> 4), f = v & 15, d = 2) : 2 == d ? (b += y.charAt(f), b += y.charAt(v >> 2), f = v & 3, d = 3) : (b += y.charAt(f << 2 | v >> 4), b += y.charAt(v & 15), d = 0))
        }
        1 == d && (b += y.charAt(f << 2))
        return b
    }

    var q
    'Microsoft Internet Explorer' == navigator.appName ? (e.prototype.am = $, q = 30) : 'Netscape' != navigator.appName ? (e.prototype.am = Z, q = 26) : (e.prototype.am = aa, q = 28)
    e.prototype.DB = q
    e.prototype.DM = (1 << q) - 1
    e.prototype.DV = 1 << q
    e.prototype.FV = Math.pow(2, 52)
    e.prototype.F1 = 52 - q
    e.prototype.F2 = 2 * q - 52
    var y = '0123456789abcdefghijklmnopqrstuvwxyz',
        I = [],
        r
    q = 48
    for (r = 0; 9 >= r; ++r) {
        I[q++] = r
    }
    q = 97
    for (r = 10; 36 > r; ++r) {
        I[q++] = r
    }
    q = 65
    for (r = 10; 36 > r; ++r) {
        I[q++] = r
    }
    C.prototype.convert = function (a) {
        return 0 > a.s || 0 <= a.compareTo(this.m) ? a.mod(this.m) : a
    }
    C.prototype.revert = function (a) {
        return a
    }
    C.prototype.reduce = function (a) {
        a.divRemTo(this.m, null, a)
    }
    C.prototype.mulTo = function (a, b, c) {
        a.multiplyTo(b, c)
        this.reduce(c)
    }
    C.prototype.sqrTo = function (a, b) {
        a.squareTo(b)
        this.reduce(b)
    }
    D.prototype.convert = function (a) {
        var b = m()
        a.abs().dlShiftTo(this.m.t, b)
        b.divRemTo(this.m, null, b)
        0 > a.s && 0 < b.compareTo(e.ZERO) && this.m.subTo(b, b)
        return b
    }
    D.prototype.revert = function (a) {
        var b = m()
        a.copyTo(b)
        this.reduce(b)
        return b
    }
    D.prototype.reduce = function (a) {
        for (; a.t <= this.mt2;) {
            a[a.t++] = 0
        }
        for (var b = 0; b < this.m.t; ++b) {
            var c = a[b] & 32767,
                d = c * this.mpl + ((c * this.mph + (a[b] >> 15) * this.mpl & this.um) << 15) & a.DM,
                c = b + this.m.t
            for (a[c] += this.m.am(0, d, a, b, 0, this.m.t); a[c] >= a.DV;) {
                a[c] -= a.DV,
                    a[++c]++
            }
        }
        a.clamp()
        a.drShiftTo(this.m.t, a)
        0 <= a.compareTo(this.m) && a.subTo(this.m, a)
    }
    D.prototype.mulTo = function (a, b, c) {
        a.multiplyTo(b, c)
        this.reduce(c)
    }
    D.prototype.sqrTo = function (a, b) {
        a.squareTo(b)
        this.reduce(b)
    }
    e.prototype.copyTo = function (a) {
        for (var b = this.t - 1; 0 <= b; --b) {
            a[b] = this[b]
        }
        a.t = this.t
        a.s = this.s
    }
    e.prototype.fromInt = function (a) {
        this.t = 1
        this.s = 0 > a ? -1 : 0
        0 < a ? this[0] = a : -1 > a ? this[0] = a + DV : this.t = 0
    }
    e.prototype.fromString = function (a, b) {
        var c
        if (16 == b) {
            c = 4
        } else {
            if (8 == b) {
                c = 3
            } else {
                if (256 == b) {
                    c = 8
                } else {
                    if (2 == b) {
                        c = 1
                    } else {
                        if (32 == b) {
                            c = 5
                        } else {
                            if (4 == b) {
                                c = 2
                            } else {
                                this.fromRadix(a, b)
                                return
                            }
                        }
                    }
                }
            }
        }
        this.s = this.t = 0
        for (var d = a.length, f = !1, g = 0; 0 <= --d;) {
            var h = 8 == c ? a[d] & 255 : S(a, d)
            0 > h ? '-' == a.charAt(d) && (f = !0) : (f = !1, 0 == g ? this[this.t++] = h : g + c > this.DB ? (this[this.t - 1] |= (h & (1 << this.DB - g) - 1) << g, this[this.t++] = h >> this.DB - g) : this[this.t - 1] |= h << g, g += c, g >= this.DB && (g -= this.DB))
        }
        8 == c && 0 != (a[0] & 128) && (this.s = -1, 0 < g && (this[this.t - 1] |= (1 << this.DB - g) - 1 << g))
        this.clamp()
        f && e.ZERO.subTo(this, this)
    }
    e.prototype.clamp = function () {
        for (var a = this.s & this.DM; 0 < this.t && this[this.t - 1] == a;) {
            --this.t
        }
    }
    e.prototype.dlShiftTo = function (a, b) {
        var c
        for (c = this.t - 1; 0 <= c; --c) {
            b[c + a] = this[c]
        }
        for (c = a - 1; 0 <= c; --c) {
            b[c] = 0
        }
        b.t = this.t + a
        b.s = this.s
    }
    e.prototype.drShiftTo = function (a, b) {
        for (var c = a; c < this.t; ++c) {
            b[c - a] = this[c]
        }
        b.t = Math.max(this.t - a, 0)
        b.s = this.s
    }
    e.prototype.lShiftTo = function (a, b) {
        var c = a % this.DB,
            d = this.DB - c,
            f = (1 << d) - 1,
            g = Math.floor(a / this.DB),
            h = this.s << c & this.DM,
            k
        for (k = this.t - 1; 0 <= k; --k) {
            b[k + g + 1] = this[k] >> d | h,
                h = (this[k] & f) << c
        }
        for (k = g - 1; 0 <= k; --k) {
            b[k] = 0
        }
        b[g] = h
        b.t = this.t + g + 1
        b.s = this.s
        b.clamp()
    }
    e.prototype.rShiftTo = function (a, b) {
        b.s = this.s
        var c = Math.floor(a / this.DB)
        if (c >= this.t) {
            b.t = 0
        } else {
            var d = a % this.DB,
                f = this.DB - d,
                g = (1 << d) - 1
            b[0] = this[c] >> d
            for (var h = c + 1; h < this.t; ++h) {
                b[h - c - 1] |= (this[h] & g) << f,
                    b[h - c] = this[h] >> d
            }
            0 < d && (b[this.t - c - 1] |= (this.s & g) << f)
            b.t = this.t - c
            b.clamp()
        }
    }
    e.prototype.subTo = function (a, b) {
        for (var c = 0, d = 0, f = Math.min(a.t, this.t); c < f;) {
            d += this[c] - a[c],
                b[c++] = d & this.DM,
                d >>= this.DB
        }
        if (a.t < this.t) {
            for (d -= a.s; c < this.t;) {
                d += this[c],
                    b[c++] = d & this.DM,
                    d >>= this.DB
            }
            d += this.s
        } else {
            for (d += this.s; c < a.t;) {
                d -= a[c],
                    b[c++] = d & this.DM,
                    d >>= this.DB
            }
            d -= a.s
        }
        b.s = 0 > d ? -1 : 0;
        -1 > d ? b[c++] = this.DV + d : 0 < d && (b[c++] = d)
        b.t = c
        b.clamp()
    }
    e.prototype.multiplyTo = function (a, b) {
        var c = this.abs(),
            d = a.abs(),
            f = c.t
        for (b.t = f + d.t; 0 <= --f;) {
            b[f] = 0
        }
        for (f = 0; f < d.t; ++f) {
            b[f + c.t] = c.am(0, d[f], b, f, 0, c.t)
        }
        b.s = 0
        b.clamp()
        this.s != a.s && e.ZERO.subTo(b, b)
    }
    e.prototype.squareTo = function (a) {
        for (var b = this.abs(), c = a.t = 2 * b.t; 0 <= --c;) {
            a[c] = 0
        }
        for (c = 0; c < b.t - 1; ++c) {
            var d = b.am(c, b[c], a, 2 * c, 0, 1);
            (a[c + b.t] += b.am(c + 1, 2 * b[c], a, 2 * c + 1, d, b.t - c - 1)) >= b.DV && (a[c + b.t] -= b.DV, a[c + b.t + 1] = 1)
        }
        0 < a.t && (a[a.t - 1] += b.am(c, b[c], a, 2 * c, 0, 1))
        a.s = 0
        a.clamp()
    }
    e.prototype.divRemTo = function (a, b, c) {
        var d = a.abs()
        if (!(0 >= d.t)) {
            var f = this.abs()
            if (f.t < d.t) {
                null != b && b.fromInt(0),
                null != c && this.copyTo(c)
            } else {
                null == c && (c = m())
                var g = m(),
                    h = this.s
                a = a.s
                var k = this.DB - J(d[d.t - 1])
                0 < k ? (d.lShiftTo(k, g), f.lShiftTo(k, c)) : (d.copyTo(g), f.copyTo(c))
                d = g.t
                f = g[d - 1]
                if (0 != f) {
                    var u = f * (1 << this.F1) + (1 < d ? g[d - 2] >> this.F2 : 0),
                        x = this.FV / u,
                        u = (1 << this.F1) / u,
                        l = 1 << this.F2,
                        s = c.t,
                        p = s - d,
                        A = null == b ? m() : b
                    g.dlShiftTo(p, A)
                    0 <= c.compareTo(A) && (c[c.t++] = 1, c.subTo(A, c))
                    e.ONE.dlShiftTo(d, A)
                    for (A.subTo(g, g); g.t < d;) {
                        g[g.t++] = 0
                    }
                    for (; 0 <= --p;) {
                        var n = c[--s] == f ? this.DM : Math.floor(c[s] * x + (c[s - 1] + l) * u)
                        if ((c[s] += g.am(0, n, c, p, 0, d)) < n) {
                            for (g.dlShiftTo(p, A), c.subTo(A, c); c[s] < --n;) {
                                c.subTo(A, c)
                            }
                        }
                    }
                    null != b && (c.drShiftTo(d, b), h != a && e.ZERO.subTo(b, b))
                    c.t = d
                    c.clamp()
                    0 < k && c.rShiftTo(k, c)
                    0 > h && e.ZERO.subTo(c, c)
                }
            }
        }
    }
    e.prototype.invDigit = function () {
        if (1 > this.t) {
            return 0
        }
        var a = this[0]
        if (0 == (a & 1)) {
            return 0
        }
        var b = a & 3,
            b = b * (2 - (a & 15) * b) & 15,
            b = b * (2 - (a & 255) * b) & 255,
            b = b * (2 - ((a & 65535) * b & 65535)) & 65535,
            b = b * (2 - a * b % this.DV) % this.DV
        return 0 < b ? this.DV - b : -b
    }
    e.prototype.isEven = function () {
        return 0 == (0 < this.t ? this[0] & 1 : this.s)
    }
    e.prototype.exp = function (a, b) {
        if (4294967295 < a || 1 > a) {
            return e.ONE
        }
        var c = m(),
            d = m(),
            f = b.convert(this),
            g = J(a) - 1
        for (f.copyTo(c); 0 <= --g;) {
            if (b.sqrTo(c, d), 0 < (a & 1 << g)) {
                b.mulTo(d, f, c)
            } else {
                var h = c,
                    c = d,
                    d = h
            }
        }
        return b.revert(c)
    }
    e.prototype.toString = function (a) {
        if (0 > this.s) {
            return '-' + this.negate().toString(a)
        }
        if (16 == a) {
            a = 4
        } else {
            if (8 == a) {
                a = 3
            } else {
                if (2 == a) {
                    a = 1
                } else {
                    if (32 == a) {
                        a = 5
                    } else {
                        if (4 == a) {
                            a = 2
                        } else {
                            return this.toRadix(a)
                        }
                    }
                }
            }
        }
        var b = (1 << a) - 1,
            c,
            d = !1,
            f = '',
            g = this.t,
            h = this.DB - g * this.DB % a
        if (0 < g--) {
            for (h < this.DB && 0 < (c = this[g] >> h) && (d = !0, f = y.charAt(c)); 0 <= g;) {
                h < a ? (c = (this[g] & (1 << h) - 1) << a - h, c |= this[--g] >> (h += this.DB - a)) : (c = this[g] >> (h -= a) & b, 0 >= h && (h += this.DB, --g)),
                0 < c && (d = !0),
                d && (f += y.charAt(c))
            }
        }
        return d ? f : '0'
    }
    e.prototype.negate = function () {
        var a = m()
        e.ZERO.subTo(this, a)
        return a
    }
    e.prototype.abs = function () {
        return 0 > this.s ? this.negate() : this
    }
    e.prototype.compareTo = function (a) {
        var b = this.s - a.s
        if (0 != b) {
            return b
        }
        var c = this.t,
            b = c - a.t
        if (0 != b) {
            return 0 > this.s ? -b : b
        }
        for (; 0 <= --c;) {
            if (0 != (b = this[c] - a[c])) {
                return b
            }
        }
        return 0
    }
    e.prototype.bitLength = function () {
        return 0 >= this.t ? 0 : this.DB * (this.t - 1) + J(this[this.t - 1] ^ this.s & this.DM)
    }
    e.prototype.mod = function (a) {
        var b = m()
        this.abs().divRemTo(a, null, b)
        0 > this.s && 0 < b.compareTo(e.ZERO) && a.subTo(b, b)
        return b
    }
    e.prototype.modPowInt = function (a, b) {
        var c
        c = 256 > a || b.isEven() ? new C(b) : new D(b)
        return this.exp(a, c)
    }
    e.ZERO = z(0)
    e.ONE = z(1)
    G.prototype.convert = V
    G.prototype.revert = V
    G.prototype.mulTo = function (a, b, c) {
        a.multiplyTo(b, c)
    }
    G.prototype.sqrTo = function (a, b) {
        a.squareTo(b)
    }
    E.prototype.convert = function (a) {
        if (0 > a.s || a.t > 2 * this.m.t) {
            return a.mod(this.m)
        }
        if (0 > a.compareTo(this.m)) {
            return a
        }
        var b = m()
        a.copyTo(b)
        this.reduce(b)
        return b
    }
    E.prototype.revert = function (a) {
        return a
    }
    E.prototype.reduce = function (a) {
        a.drShiftTo(this.m.t - 1, this.r2)
        a.t > this.m.t + 1 && (a.t = this.m.t + 1, a.clamp())
        this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3)
        for (this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); 0 > a.compareTo(this.r2);) {
            a.dAddOffset(1, this.m.t + 1)
        }
        for (a.subTo(this.r2, a); 0 <= a.compareTo(this.m);) {
            a.subTo(this.m, a)
        }
    }
    E.prototype.mulTo = function (a, b, c) {
        a.multiplyTo(b, c)
        this.reduce(c)
    }
    E.prototype.sqrTo = function (a, b) {
        a.squareTo(b)
        this.reduce(b)
    }
    var t = [
            2,
            3,
            5,
            7,
            11,
            13,
            17,
            19,
            23,
            29,
            31,
            37,
            41,
            43,
            47,
            53,
            59,
            61,
            67,
            71,
            73,
            79,
            83,
            89,
            97,
            101,
            103,
            107,
            109,
            113,
            127,
            131,
            137,
            139,
            149,
            151,
            157,
            163,
            167,
            173,
            179,
            181,
            191,
            193,
            197,
            199,
            211,
            223,
            227,
            229,
            233,
            239,
            241,
            251,
            257,
            263,
            269,
            271,
            277,
            281,
            283,
            293,
            307,
            311,
            313,
            317,
            331,
            337,
            347,
            349,
            353,
            359,
            367,
            373,
            379,
            383,
            389,
            397,
            401,
            409,
            419,
            421,
            431,
            433,
            439,
            443,
            449,
            457,
            461,
            463,
            467,
            479,
            487,
            491,
            499,
            503,
            509,
            521,
            523,
            541,
            547,
            557,
            563,
            569,
            571,
            577,
            587,
            593,
            599,
            601,
            607,
            613,
            617,
            619,
            631,
            641,
            643,
            647,
            653,
            659,
            661,
            673,
            677,
            683,
            691,
            701,
            709,
            719,
            727,
            733,
            739,
            743,
            751,
            757,
            761,
            769,
            773,
            787,
            797,
            809,
            811,
            821,
            823,
            827,
            829,
            839,
            853,
            857,
            859,
            863,
            877,
            881,
            883,
            887,
            907,
            911,
            919,
            929,
            937,
            941,
            947,
            953,
            967,
            971,
            977,
            983,
            991,
            997
        ],
        da = 67108864 / t[t.length - 1]
    e.prototype.chunkSize = function (a) {
        return Math.floor(Math.LN2 * this.DB / Math.log(a))
    }
    e.prototype.toRadix = function (a) {
        null == a && (a = 10)
        if (0 == this.signum() || 2 > a || 36 < a) {
            return '0'
        }
        var b = this.chunkSize(a),
            b = Math.pow(a, b),
            c = z(b),
            d = m(),
            f = m(),
            g = ''
        for (this.divRemTo(c, d, f); 0 < d.signum();) {
            g = (b + f.intValue()).toString(a).substr(1) + g,
                d.divRemTo(c, d, f)
        }
        return f.intValue().toString(a) + g
    }
    e.prototype.fromRadix = function (a, b) {
        this.fromInt(0)
        null == b && (b = 10)
        for (var c = this.chunkSize(b), d = Math.pow(b, c), f = !1, g = 0, h = 0, k = 0; k < a.length; ++k) {
            var u = S(a, k)
            0 > u ? '-' == a.charAt(k) && 0 == this.signum() && (f = !0) : (h = b * h + u, ++g >= c && (this.dMultiply(d), this.dAddOffset(h, 0), h = g = 0))
        }
        0 < g && (this.dMultiply(Math.pow(b, g)), this.dAddOffset(h, 0))
        f && e.ZERO.subTo(this, this)
    }
    e.prototype.fromNumber = function (a, b, c) {
        if ('number' == typeof b) {
            if (2 > a) {
                this.fromInt(1)
            } else {
                for (this.fromNumber(a, c), this.testBit(a - 1) || this.bitwiseTo(e.ONE.shiftLeft(a - 1), K, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(b);) {
                    this.dAddOffset(2, 0),
                    this.bitLength() > a && this.subTo(e.ONE.shiftLeft(a - 1), this)
                }
            }
        } else {
            c = []
            var d = a & 7
            c.length = (a >> 3) + 1
            b.nextBytes(c)
            c[0] = 0 < d ? c[0] & (1 << d) - 1 : 0
            this.fromString(c, 256)
        }
    }
    e.prototype.bitwiseTo = function (a, b, c) {
        var d,
            f,
            g = Math.min(a.t, this.t)
        for (d = 0; d < g; ++d) {
            c[d] = b(this[d], a[d])
        }
        if (a.t < this.t) {
            f = a.s & this.DM
            for (d = g; d < this.t; ++d) {
                c[d] = b(this[d], f)
            }
            c.t = this.t
        } else {
            f = this.s & this.DM
            for (d = g; d < a.t; ++d) {
                c[d] = b(f, a[d])
            }
            c.t = a.t
        }
        c.s = b(this.s, a.s)
        c.clamp()
    }
    e.prototype.changeBit = function (a, b) {
        var c = e.ONE.shiftLeft(a)
        this.bitwiseTo(c, b, c)
        return c
    }
    e.prototype.addTo = function (a, b) {
        for (var c = 0, d = 0, f = Math.min(a.t, this.t); c < f;) {
            d += this[c] + a[c],
                b[c++] = d & this.DM,
                d >>= this.DB
        }
        if (a.t < this.t) {
            for (d += a.s; c < this.t;) {
                d += this[c],
                    b[c++] = d & this.DM,
                    d >>= this.DB
            }
            d += this.s
        } else {
            for (d += this.s; c < a.t;) {
                d += a[c],
                    b[c++] = d & this.DM,
                    d >>= this.DB
            }
            d += a.s
        }
        b.s = 0 > d ? -1 : 0
        0 < d ? b[c++] = d : -1 > d && (b[c++] = this.DV + d)
        b.t = c
        b.clamp()
    }
    e.prototype.dMultiply = function (a) {
        this[this.t] = this.am(0, a - 1, this, 0, 0, this.t)
        ++this.t
        this.clamp()
    }
    e.prototype.dAddOffset = function (a, b) {
        if (0 != a) {
            for (; this.t <= b;) {
                this[this.t++] = 0
            }
            for (this[b] += a; this[b] >= this.DV;) {
                this[b] -= this.DV,
                ++b >= this.t && (this[this.t++] = 0),
                    ++this[b]
            }
        }
    }
    e.prototype.multiplyLowerTo = function (a, b, c) {
        var d = Math.min(this.t + a.t, b)
        c.s = 0
        for (c.t = d; 0 < d;) {
            c[--d] = 0
        }
        var f
        for (f = c.t - this.t; d < f; ++d) {
            c[d + this.t] = this.am(0, a[d], c, d, 0, this.t)
        }
        for (f = Math.min(a.t, b); d < f; ++d) {
            this.am(0, a[d], c, d, 0, b - d)
        }
        c.clamp()
    }
    e.prototype.multiplyUpperTo = function (a, b, c) {
        --b
        var d = c.t = this.t + a.t - b
        for (c.s = 0; 0 <= --d;) {
            c[d] = 0
        }
        for (d = Math.max(b - this.t, 0); d < a.t; ++d) {
            c[this.t + d - b] = this.am(b - d, a[d], c, 0, 0, this.t + d - b)
        }
        c.clamp()
        c.drShiftTo(1, c)
    }
    e.prototype.modInt = function (a) {
        if (0 >= a) {
            return 0
        }
        var b = this.DV % a,
            c = 0 > this.s ? a - 1 : 0
        if (0 < this.t) {
            if (0 == b) {
                c = this[0] % a
            } else {
                for (var d = this.t - 1; 0 <= d; --d) {
                    c = (b * c + this[d]) % a
                }
            }
        }
        return c
    }
    e.prototype.millerRabin = function (a) {
        var b = this.subtract(e.ONE),
            c = b.getLowestSetBit()
        if (0 >= c) {
            return !1
        }
        var d = b.shiftRight(c)
        a = a + 1 >> 1
        a > t.length && (a = t.length)
        for (var f = m(), g = 0; g < a; ++g) {
            f.fromInt(t[Math.floor(Math.random() * t.length)])
            var h = f.modPow(d, this)
            if (0 != h.compareTo(e.ONE) && 0 != h.compareTo(b)) {
                for (var k = 1; k++ < c && 0 != h.compareTo(b);) {
                    if (h = h.modPowInt(2, this), 0 == h.compareTo(e.ONE)) {
                        return !1
                    }
                }
                if (0 != h.compareTo(b)) {
                    return !1
                }
            }
        }
        return !0
    }
    e.prototype.clone = function () {
        var a = m()
        this.copyTo(a)
        return a
    }
    e.prototype.intValue = function () {
        if (0 > this.s) {
            if (1 == this.t) {
                return this[0] - this.DV
            }
            if (0 == this.t) {
                return -1
            }
        } else {
            if (1 == this.t) {
                return this[0]
            }
            if (0 == this.t) {
                return 0
            }
        }
        return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0]
    }
    e.prototype.byteValue = function () {
        return 0 == this.t ? this.s : this[0] << 24 >> 24
    }
    e.prototype.shortValue = function () {
        return 0 == this.t ? this.s : this[0] << 16 >> 16
    }
    e.prototype.signum = function () {
        return 0 > this.s ? -1 : 0 >= this.t || 1 == this.t && 0 >= this[0] ? 0 : 1
    }
    e.prototype.toByteArray = function () {
        var a = this.t,
            b = []
        b[0] = this.s
        var c = this.DB - a * this.DB % 8,
            d,
            f = 0
        if (0 < a--) {
            for (c < this.DB && (d = this[a] >> c) != (this.s & this.DM) >> c && (b[f++] = d | this.s << this.DB - c); 0 <= a;) {
                if (8 > c ? (d = (this[a] & (1 << c) - 1) << 8 - c, d |= this[--a] >> (c += this.DB - 8)) : (d = this[a] >> (c -= 8) & 255, 0 >= c && (c += this.DB, --a)), 0 != (d & 128) && (d |= -256), 0 == f && (this.s & 128) != (d & 128) && ++f, 0 < f || d != this.s) {
                    b[f++] = d
                }
            }
        }
        return b
    }
    e.prototype.equals = function (a) {
        return 0 == this.compareTo(a)
    }
    e.prototype.min = function (a) {
        return 0 > this.compareTo(a) ? this : a
    }
    e.prototype.max = function (a) {
        return 0 < this.compareTo(a) ? this : a
    }
    e.prototype.and = function (a) {
        var b = m()
        this.bitwiseTo(a, ba, b)
        return b
    }
    e.prototype.or = function (a) {
        var b = m()
        this.bitwiseTo(a, K, b)
        return b
    }
    e.prototype.xor = function (a) {
        var b = m()
        this.bitwiseTo(a, T, b)
        return b
    }
    e.prototype.andNot = function (a) {
        var b = m()
        this.bitwiseTo(a, U, b)
        return b
    }
    e.prototype.not = function () {
        for (var a = m(), b = 0; b < this.t; ++b) {
            a[b] = this.DM & ~this[b]
        }
        a.t = this.t
        a.s = ~this.s
        return a
    }
    e.prototype.shiftLeft = function (a) {
        var b = m()
        0 > a ? this.rShiftTo(-a, b) : this.lShiftTo(a, b)
        return b
    }
    e.prototype.shiftRight = function (a) {
        var b = m()
        0 > a ? this.lShiftTo(-a, b) : this.rShiftTo(a, b)
        return b
    }
    e.prototype.getLowestSetBit = function () {
        for (var a = 0; a < this.t; ++a) {
            if (0 != this[a]) {
                var b = a * this.DB
                a = this[a]
                if (0 == a) {
                    a = -1
                } else {
                    var c = 0
                    0 == (a & 65535) && (a >>= 16, c += 16)
                    0 == (a & 255) && (a >>= 8, c += 8)
                    0 == (a & 15) && (a >>= 4, c += 4)
                    0 == (a & 3) && (a >>= 2, c += 2)
                    0 == (a & 1) && ++c
                    a = c
                }
                return b + a
            }
        }
        return 0 > this.s ? this.t * this.DB : -1
    }
    e.prototype.bitCount = function () {
        for (var a = 0, b = this.s & this.DM, c = 0; c < this.t; ++c) {
            for (var d = this[c] ^ b, f = 0; 0 != d;) {
                d &= d - 1,
                    ++f
            }
            a += f
        }
        return a
    }
    e.prototype.testBit = function (a) {
        var b = Math.floor(a / this.DB)
        return b >= this.t ? 0 != this.s : 0 != (this[b] & 1 << a % this.DB)
    }
    e.prototype.setBit = function (a) {
        return this.changeBit(a, K)
    }
    e.prototype.clearBit = function (a) {
        return this.changeBit(a, U)
    }
    e.prototype.flipBit = function (a) {
        return this.changeBit(a, T)
    }
    e.prototype.add = function (a) {
        var b = m()
        this.addTo(a, b)
        return b
    }
    e.prototype.subtract = function (a) {
        var b = m()
        this.subTo(a, b)
        return b
    }
    e.prototype.multiply = function (a) {
        var b = m()
        this.multiplyTo(a, b)
        return b
    }
    e.prototype.divide = function (a) {
        var b = m()
        this.divRemTo(a, b, null)
        return b
    }
    e.prototype.remainder = function (a) {
        var b = m()
        this.divRemTo(a, null, b)
        return b
    }
    e.prototype.divideAndRemainder = function (a) {
        var b = m(),
            c = m()
        this.divRemTo(a, b, c)
        return [b,
            c]
    }
    e.prototype.modPow = function (a, b) {
        var c = a.bitLength(),
            d,
            f = z(1),
            g
        if (0 >= c) {
            return f
        }
        d = 18 > c ? 1 : 48 > c ? 3 : 144 > c ? 4 : 768 > c ? 5 : 6
        g = 8 > c ? new C(b) : b.isEven() ? new E(b) : new D(b)
        var h = [],
            k = 3,
            e = d - 1,
            x = (1 << d) - 1
        h[1] = g.convert(this)
        if (1 < d) {
            for (c = m(), g.sqrTo(h[1], c); k <= x;) {
                h[k] = m(),
                    g.mulTo(c, h[k - 2], h[k]),
                    k += 2
            }
        }
        for (var l = a.t - 1, s, p = !0, n = m(), c = J(a[l]) - 1; 0 <= l;) {
            c >= e ? s = a[l] >> c - e & x : (s = (a[l] & (1 << c + 1) - 1) << e - c, 0 < l && (s |= a[l - 1] >> this.DB + c - e))
            for (k = d; 0 == (s & 1);) {
                s >>= 1,
                    --k
            }
            0 > (c -= k) && (c += this.DB, --l)
            if (p) {
                h[s].copyTo(f),
                    p = !1
            } else {
                for (; 1 < k;) {
                    g.sqrTo(f, n),
                        g.sqrTo(n, f),
                        k -= 2
                }
                0 < k ? g.sqrTo(f, n) : (k = f, f = n, n = k)
                g.mulTo(n, h[s], f)
            }
            for (; 0 <= l && 0 == (a[l] & 1 << c);) {
                g.sqrTo(f, n),
                    k = f,
                    f = n,
                    n = k,
                0 > --c && (c = this.DB - 1, --l)
            }
        }
        return g.revert(f)
    }
    e.prototype.modInverse = function (a) {
        var b = a.isEven()
        if (this.isEven() && b || 0 == a.signum()) {
            return e.ZERO
        }
        for (var c = a.clone(), d = this.clone(), f = z(1), g = z(0), h = z(0), k = z(1); 0 != c.signum();) {
            for (; c.isEven();) {
                c.rShiftTo(1, c),
                    b ? (f.isEven() && g.isEven() || (f.addTo(this, f), g.subTo(a, g)), f.rShiftTo(1, f)) : g.isEven() || g.subTo(a, g),
                    g.rShiftTo(1, g)
            }
            for (; d.isEven();) {
                d.rShiftTo(1, d),
                    b ? (h.isEven() && k.isEven() || (h.addTo(this, h), k.subTo(a, k)), h.rShiftTo(1, h)) : k.isEven() || k.subTo(a, k),
                    k.rShiftTo(1, k)
            }
            0 <= c.compareTo(d) ? (c.subTo(d, c), b && f.subTo(h, f), g.subTo(k, g)) : (d.subTo(c, d), b && h.subTo(f, h), k.subTo(g, k))
        }
        if (0 != d.compareTo(e.ONE)) {
            return e.ZERO
        }
        if (0 <= k.compareTo(a)) {
            return k.subtract(a)
        }
        if (0 > k.signum()) {
            k.addTo(a, k)
        } else {
            return k
        }
        return 0 > k.signum() ? k.add(a) : k
    }
    e.prototype.pow = function (a) {
        return this.exp(a, new G)
    }
    e.prototype.gcd = function (a) {
        var b = 0 > this.s ? this.negate() : this.clone()
        a = 0 > a.s ? a.negate() : a.clone()
        if (0 > b.compareTo(a)) {
            var c = b,
                b = a
            a = c
        }
        var c = b.getLowestSetBit(),
            d = a.getLowestSetBit()
        if (0 > d) {
            return b
        }
        c < d && (d = c)
        0 < d && (b.rShiftTo(d, b), a.rShiftTo(d, a))
        for (; 0 < b.signum();) {
            0 < (c = b.getLowestSetBit()) && b.rShiftTo(c, b),
            0 < (c = a.getLowestSetBit()) && a.rShiftTo(c, a),
                0 <= b.compareTo(a) ? (b.subTo(a, b), b.rShiftTo(1, b)) : (a.subTo(b, a), a.rShiftTo(1, a))
        }
        0 < d && a.lShiftTo(d, a)
        return a
    }
    e.prototype.isProbablePrime = function (a) {
        var b,
            c = this.abs()
        if (1 == c.t && c[0] <= t[t.length - 1]) {
            for (b = 0; b < t.length; ++b) {
                if (c[0] == t[b]) {
                    return !0
                }
            }
            return !1
        }
        if (c.isEven()) {
            return !1
        }
        for (b = 1; b < t.length;) {
            for (var d = t[b], f = b + 1; f < t.length && d < da;) {
                d *= t[f++]
            }
            for (d = c.modInt(d); b < f;) {
                if (0 == d % t[b++]) {
                    return !1
                }
            }
        }
        return c.millerRabin(a)
    }
    e.prototype.square = function () {
        var a = m()
        this.squareTo(a)
        return a
    }
    O.prototype.init = function (a) {
        var b,
            c,
            d
        for (b = 0; 256 > b; ++b) {
            this.S[b] = b
        }
        for (b = c = 0; 256 > b; ++b) {
            c = c + this.S[b] + a[b % a.length] & 255,
                d = this.S[b],
                this.S[b] = this.S[c],
                this.S[c] = d
        }
        this.j = this.i = 0
    }
    O.prototype.next = function () {
        var a
        this.i = this.i + 1 & 255
        this.j = this.j + this.S[this.i] & 255
        a = this.S[this.i]
        this.S[this.i] = this.S[this.j]
        this.S[this.j] = a
        return this.S[a + this.S[this.i] & 255]
    }
    var M,
        B,
        w
    if (null == B) {
        B = []
        w = 0
        if (window.crypto && window.crypto.getRandomValues) {
            for (r = new Uint32Array(256), window.crypto.getRandomValues(r), q = 0; q < r.length; ++q) {
                B[w++] = r[q] & 255
            }
        }
        var N = function (a) {
            this.count = this.count || 0
            256 <= this.count || 256 <= w ? window.removeEventListener ? window.removeEventListener('mousemove', N) : window.detachEvent && window.detachEvent('onmousemove', N) : (this.count += 1, a = a.x + a.y, B[w++] = a & 255)
        }
        window.addEventListener ? window.addEventListener('mousemove', N) : window.attachEvent && window.attachEvent('onmousemove', N)
    }
    L.prototype.nextBytes = function (a) {
        var b
        for (b = 0; b < a.length; ++b) {
            var c = a,
                d = b,
                f
            if (null == M) {
                for (M = new O; 256 > w;) {
                    f = Math.floor(65536 * Math.random()),
                        B[w++] = f & 255
                }
                M.init(B)
                for (w = 0; w < B.length; ++w) {
                    B[w] = 0
                }
                w = 0
            }
            f = M.next()
            c[d] = f
        }
    }
    p.prototype.doPublic = function (a) {
        return a.modPowInt(this.e, this.n)
    }
    p.prototype.setPublic = function (a, b) {
        null != a && null != b && 0 < a.length && 0 < b.length ? (this.n = n(a, 16), this.e = parseInt(b, 16)) : console.error('Invalid RSA public key')
    }
    p.prototype.encrypt = function (a) {
        var b
        b = this.n.bitLength() + 7 >> 3
        if (b < a.length + 11) {
            console.error('Message too long for RSA'),
                b = null
        } else {
            for (var c = [], d = a.length - 1; 0 <= d && 0 < b;) {
                var f = a.charCodeAt(d--)
                128 > f ? c[--b] = f : 127 < f && 2048 > f ? (c[--b] = f & 63 | 128, c[--b] = f >> 6 | 192) : (c[--b] = f & 63 | 128, c[--b] = f >> 6 & 63 | 128, c[--b] = f >> 12 | 224)
            }
            c[--b] = 0
            a = new L
            for (d = []; 2 < b;) {
                for (d[0] = 0; 0 == d[0];) {
                    a.nextBytes(d)
                }
                c[--b] = d[0]
            }
            c[--b] = 2
            c[--b] = 0
            b = new e(c)
        }
        if (null == b) {
            return null
        }
        b = this.doPublic(b)
        if (null == b) {
            return null
        }
        b = b.toString(16)
        return 0 == (b.length & 1) ? b : '0' + b
    }
    p.prototype.doPrivate = function (a) {
        if (null == this.p || null == this.q) {
            return a.modPow(this.d, this.n)
        }
        var b = a.mod(this.p).modPow(this.dmp1, this.p)
        for (a = a.mod(this.q).modPow(this.dmq1, this.q); 0 > b.compareTo(a);) {
            b = b.add(this.p)
        }
        return b.subtract(a).multiply(this.coeff).mod(this.p).multiply(this.q).add(a)
    }
    p.prototype.setPrivate = function (a, b, c) {
        null != a && null != b && 0 < a.length && 0 < b.length ? (this.n = n(a, 16), this.e = parseInt(b, 16), this.d = n(c, 16)) : console.error('Invalid RSA private key')
    }
    p.prototype.setPrivateEx = function (a, b, c, d, f, g, h, k) {
        null != a && null != b && 0 < a.length && 0 < b.length ? (this.n = n(a, 16), this.e = parseInt(b, 16), this.d = n(c, 16), this.p = n(d, 16), this.q = n(f, 16), this.dmp1 = n(g, 16), this.dmq1 = n(h, 16), this.coeff = n(k, 16)) : console.error('Invalid RSA private key')
    }
    p.prototype.generate = function (a, b) {
        var c = new L,
            d = a >> 1
        this.e = parseInt(b, 16)
        for (var f = new e(b, 16); ;) {
            for (; this.p = new e(a - d, 1, c), 0 != this.p.subtract(e.ONE).gcd(f).compareTo(e.ONE) || !this.p.isProbablePrime(10);) {
            }
            for (; this.q = new e(d, 1, c), 0 != this.q.subtract(e.ONE).gcd(f).compareTo(e.ONE) || !this.q.isProbablePrime(10);) {
            }
            if (0 >= this.p.compareTo(this.q)) {
                var g = this.p
                this.p = this.q
                this.q = g
            }
            var g = this.p.subtract(e.ONE),
                h = this.q.subtract(e.ONE),
                k = g.multiply(h)
            if (0 == k.gcd(f).compareTo(e.ONE)) {
                this.n = this.p.multiply(this.q)
                this.d = f.modInverse(k)
                this.dmp1 = this.d.mod(g)
                this.dmq1 = this.d.mod(h)
                this.coeff = this.q.modInverse(this.p)
                break
            }
        }
    }
    p.prototype.decrypt = function (a) {
        a = n(a, 16)
        a = this.doPrivate(a)
        if (null == a) {
            return null
        }
        a: {
            var b = this.n.bitLength() + 7 >> 3
            a = a.toByteArray()
            for (var c = 0; c < a.length && 0 == a[c];) {
                ++c
            }
            if (a.length - c != b - 1 || 2 != a[c]) {
                a = null
            } else {
                for (++c; 0 != a[c];) {
                    if (++c >= a.length) {
                        a = null
                        break a
                    }
                }
                for (b = ''; ++c < a.length;) {
                    var d = a[c] & 255
                    128 > d ? b += String.fromCharCode(d) : 191 < d && 224 > d ? (b += String.fromCharCode((d & 31) << 6 | a[c + 1] & 63), ++c) : (b += String.fromCharCode((d & 15) << 12 | (a[c + 1] & 63) << 6 | a[c + 2] & 63), c += 2)
                }
                a = b
            }
        }
        return a
    };
    (function () {
        p.prototype.generateAsync = function (a, b, c) {
            var d = new L,
                f = a >> 1
            this.e = parseInt(b, 16)
            var g = new e(b, 16),
                h = this,
                k = function () {
                    var b = function () {
                            if (0 >= h.p.compareTo(h.q)) {
                                var a = h.p
                                h.p = h.q
                                h.q = a
                            }
                            var a = h.p.subtract(e.ONE),
                                b = h.q.subtract(e.ONE),
                                d = a.multiply(b)
                            0 == d.gcd(g).compareTo(e.ONE) ? (h.n = h.p.multiply(h.q), h.d = g.modInverse(d), h.dmp1 = h.d.mod(a), h.dmq1 = h.d.mod(b), h.coeff = h.q.modInverse(h.p), setTimeout(function () {
                                c()
                            }, 0)) : setTimeout(k, 0)
                        },
                        l = function () {
                            h.q = m()
                            h.q.fromNumberAsync(f, 1, d, function () {
                                h.q.subtract(e.ONE).gcda(g, function (a) {
                                    0 == a.compareTo(e.ONE) && h.q.isProbablePrime(10) ? setTimeout(b, 0) : setTimeout(l, 0)
                                })
                            })
                        },
                        n = function () {
                            h.p = m()
                            h.p.fromNumberAsync(a - f, 1, d, function () {
                                h.p.subtract(e.ONE).gcda(g, function (a) {
                                    0 == a.compareTo(e.ONE) && h.p.isProbablePrime(10) ? setTimeout(l, 0) : setTimeout(n, 0)
                                })
                            })
                        }
                    setTimeout(n, 0)
                }
            setTimeout(k, 0)
        }
        e.prototype.gcda = function (a, b) {
            var c = 0 > this.s ? this.negate() : this.clone(),
                d = 0 > a.s ? a.negate() : a.clone()
            if (0 > c.compareTo(d)) {
                var f = c,
                    c = d,
                    d = f
            }
            var g = c.getLowestSetBit(),
                h = d.getLowestSetBit()
            if (0 > h) {
                b(c)
            } else {
                g < h && (h = g)
                0 < h && (c.rShiftTo(h, c), d.rShiftTo(h, d))
                var k = function () {
                    0 < (g = c.getLowestSetBit()) && c.rShiftTo(g, c)
                    0 < (g = d.getLowestSetBit()) && d.rShiftTo(g, d)
                    0 <= c.compareTo(d) ? (c.subTo(d, c), c.rShiftTo(1, c)) : (d.subTo(c, d), d.rShiftTo(1, d))
                    0 < c.signum() ? setTimeout(k, 0) : (0 < h && d.lShiftTo(h, d), setTimeout(function () {
                        b(d)
                    }, 0))
                }
                setTimeout(k, 10)
            }
        }
        e.prototype.fromNumberAsync = function (a, b, c, d) {
            if ('number' == typeof b) {
                if (2 > a) {
                    this.fromInt(1)
                } else {
                    this.fromNumber(a, c)
                    this.testBit(a - 1) || this.bitwiseTo(e.ONE.shiftLeft(a - 1), K, this)
                    this.isEven() && this.dAddOffset(1, 0)
                    var f = this,
                        g = function () {
                            f.dAddOffset(2, 0)
                            f.bitLength() > a && f.subTo(e.ONE.shiftLeft(a - 1), f)
                            f.isProbablePrime(b) ? setTimeout(function () {
                                d()
                            }, 0) : setTimeout(g, 0)
                        }
                    setTimeout(g, 0)
                }
            } else {
                c = []
                var h = a & 7
                c.length = (a >> 3) + 1
                b.nextBytes(c)
                c[0] = 0 < h ? c[0] & (1 << h) - 1 : 0
                this.fromString(c, 256)
            }
        }
    })()
    var F = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',
        W = '=',
        l = l || {}
    l.env = l.env || {}
    var Q = l,
        R = Object.prototype,
        X = [
            'toString',
            'valueOf'
        ]
    l.env.parseUA = function (a) {
        var b = function (a) {
                var b = 0
                return parseFloat(a.replace(/\./g, function () {
                    return 1 == b++ ? '' : '.'
                }))
            },
            c = navigator,
            c = {
                ie: 0,
                opera: 0,
                gecko: 0,
                webkit: 0,
                chrome: 0,
                mobile: null,
                air: 0,
                ipad: 0,
                iphone: 0,
                ipod: 0,
                ios: null,
                android: 0,
                webos: 0,
                caja: c && c.cajaVersion,
                secure: !1,
                os: null
            }
        a = a || navigator && navigator.userAgent
        var d = window && window.location,
            d = d && d.href
        c.secure = d && 0 === d.toLowerCase().indexOf('https')
        if (a) {
            /windows|win32/i.test(a) ? c.os = 'windows' : /macintosh/i.test(a) ? c.os = 'macintosh' : /rhino/i.test(a) && (c.os = 'rhino')
            /KHTML/.test(a) && (c.webkit = 1)
            if ((d = a.match(/AppleWebKit\/([^\s]*)/)) && d[1]) {
                c.webkit = b(d[1])
                if (/ Mobile\//.test(a)) {
                    c.mobile = 'Apple',
                    (d = a.match(/OS ([^\s]*)/)) && d[1] && (d = b(d[1].replace('_', '.'))),
                        c.ios = d,
                        c.ipad = c.ipod = c.iphone = 0,
                    (d = a.match(/iPad|iPod|iPhone/)) && d[0] && (c[d[0].toLowerCase()] = c.ios)
                } else {
                    if (d = a.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/)) {
                        c.mobile = d[0]
                    }
                    /webOS/.test(a) && (c.mobile = 'WebOS', (d = a.match(/webOS\/([^\s]*);/)) && d[1] && (c.webos = b(d[1])))
                    / Android/.test(a) && (c.mobile = 'Android', (d = a.match(/Android ([^\s]*);/)) && d[1] && (c.android = b(d[1])))
                }
                if ((d = a.match(/Chrome\/([^\s]*)/)) && d[1]) {
                    c.chrome = b(d[1])
                } else {
                    if (d = a.match(/AdobeAIR\/([^\s]*)/)) {
                        c.air = d[0]
                    }
                }
            }
            if (!c.webkit) {
                if ((d = a.match(/Opera[\s\/]([^\s]*)/)) && d[1]) {
                    if (c.opera = b(d[1]), (d = a.match(/Version\/([^\s]*)/)) && d[1] && (c.opera = b(d[1])), d = a.match(/Opera Mini[^;]*/)) {
                        c.mobile = d[0]
                    }
                } else {
                    if ((d = a.match(/MSIE\s([^;]*)/)) && d[1]) {
                        c.ie = b(d[1])
                    } else {
                        if (d = a.match(/Gecko\/([^\s]*)/)) {
                            c.gecko = 1,
                            (d = a.match(/rv:([^\s\)]*)/)) && d[1] && (c.gecko = b(d[1]))
                        }
                    }
                }
            }
        }
        return c
    }
    l.env.ua = l.env.parseUA()
    l.isFunction = function (a) {
        return 'function' === typeof a || '[object Function]' === R.toString.apply(a)
    }
    l._IEEnumFix = l.env.ua.ie ? function (a, b) {
            var c,
                d,
                f
            for (c = 0; c < X.length; c += 1) {
                d = X[c],
                    f = b[d],
                Q.isFunction(f) && f != R[d] && (a[d] = f)
            }
        }
        : function () {
        }
    l.extend = function (a, b, c) {
        if (!b || !a) {
            throw Error('extend failed, please check that all dependencies are included.')
        }
        var d = function () {
            },
            f
        d.prototype = b.prototype
        a.prototype = new d
        a.prototype.constructor = a
        a.superclass = b.prototype
        b.prototype.constructor == R.constructor && (b.prototype.constructor = b)
        if (c) {
            for (f in c) {
                Q.hasOwnProperty(c, f) && (a.prototype[f] = c[f])
            }
            Q._IEEnumFix(a.prototype, c)
        }
    }
    'undefined' != typeof KJUR && KJUR || (KJUR = {})
    'undefined' != typeof KJUR.asn1 && KJUR.asn1 || (KJUR.asn1 = {})
    KJUR.asn1.ASN1Util = new function () {
        this.integerToByteHex = function (a) {
            a = a.toString(16)
            1 == a.length % 2 && (a = '0' + a)
            return a
        }
        this.bigIntToMinTwosComplementsHex = function (a) {
            var b = a.toString(16)
            if ('-' != b.substr(0, 1)) {
                1 == b.length % 2 ? b = '0' + b : b.match(/^[0-7]/) || (b = '00' + b)
            } else {
                var c = b.substr(1).length
                1 == c % 2 ? c += 1 : b.match(/^[0-7]/) || (c += 2)
                for (var b = '', d = 0; d < c; d++) {
                    b += 'f'
                }
                b = (new e(b, 16)).xor(a).add(e.ONE).toString(16).replace(/^-/, '')
            }
            return b
        }
        this.getPEMStringFromHex = function (a, b) {
            var c = CryptoJS.enc.Hex.parse(a),
                c = CryptoJS.enc.Base64.stringify(c).replace(/(.{64})/g, '$1\r\n'),
                c = c.replace(/\r\n$/, '')
            return '-----BEGIN ' + b + '-----\r\n' + c + '\r\n-----END ' + b + '-----\r\n'
        }
    }
    KJUR.asn1.ASN1Object = function () {
        this.getLengthHexFromValue = function () {
            if ('undefined' == typeof this.hV || null == this.hV) {
                throw 'this.hV is null or undefined.'
            }
            if (1 == this.hV.length % 2) {
                throw 'value hex must be even length: n=0,v=' + this.hV
            }
            var a = this.hV.length / 2,
                b = a.toString(16)
            1 == b.length % 2 && (b = '0' + b)
            if (128 > a) {
                return b
            }
            var c = b.length / 2
            if (15 < c) {
                throw 'ASN.1 length too long to represent by 8x: n = ' + a.toString(16)
            }
            return (128 + c).toString(16) + b
        }
        this.getEncodedHex = function () {
            if (null == this.hTLV || this.isModified) {
                this.hV = this.getFreshValueHex(),
                    this.hL = this.getLengthHexFromValue(),
                    this.hTLV = this.hT + this.hL + this.hV,
                    this.isModified = !1
            }
            return this.hTLV
        }
        this.getValueHex = function () {
            this.getEncodedHex()
            return this.hV
        }
        this.getFreshValueHex = function () {
            return ''
        }
    }
    KJUR.asn1.DERAbstractString = function (a) {
        KJUR.asn1.DERAbstractString.superclass.constructor.call(this)
        this.getString = function () {
            return this.s
        }
        this.setString = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.s = a
            this.hV = stohex(this.s)
        }
        this.setStringHex = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.s = null
            this.hV = a
        }
        this.getFreshValueHex = function () {
            return this.hV
        }
        'undefined' != typeof a && ('undefined' != typeof a.str ? this.setString(a.str) : 'undefined' != typeof a.hex && this.setStringHex(a.hex))
    }
    l.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object)
    KJUR.asn1.DERAbstractTime = function (a) {
        KJUR.asn1.DERAbstractTime.superclass.constructor.call(this)
        this.localDateToUTC = function (a) {
            utc = a.getTime() + 60000 * a.getTimezoneOffset()
            return new Date(utc)
        }
        this.formatDate = function (a, c) {
            var d = this.zeroPadding,
                f = this.localDateToUTC(a),
                g = String(f.getFullYear())
            'utc' == c && (g = g.substr(2, 2))
            var h = d(String(f.getMonth() + 1), 2),
                k = d(String(f.getDate()), 2),
                e = d(String(f.getHours()), 2),
                l = d(String(f.getMinutes()), 2),
                d = d(String(f.getSeconds()), 2)
            return g + h + k + e + l + d + 'Z'
        }
        this.zeroPadding = function (a, c) {
            return a.length >= c ? a : Array(c - a.length + 1).join('0') + a
        }
        this.getString = function () {
            return this.s
        }
        this.setString = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.s = a
            this.hV = stohex(this.s)
        }
        this.setByDateValue = function (a, c, d, f, g, h) {
            a = new Date(Date.UTC(a, c - 1, d, f, g, h, 0))
            this.setByDate(a)
        }
        this.getFreshValueHex = function () {
            return this.hV
        }
    }
    l.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object)
    KJUR.asn1.DERAbstractStructured = function (a) {
        KJUR.asn1.DERAbstractString.superclass.constructor.call(this)
        this.setByASN1ObjectArray = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.asn1Array = a
        }
        this.appendASN1Object = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.asn1Array.push(a)
        }
        this.asn1Array = []
        'undefined' != typeof a && 'undefined' != typeof a.array && (this.asn1Array = a.array)
    }
    l.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object)
    KJUR.asn1.DERBoolean = function () {
        KJUR.asn1.DERBoolean.superclass.constructor.call(this)
        this.hT = '01'
        this.hTLV = '0101ff'
    }
    l.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object)
    KJUR.asn1.DERInteger = function (a) {
        KJUR.asn1.DERInteger.superclass.constructor.call(this)
        this.hT = '02'
        this.setByBigInteger = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(a)
        }
        this.setByInteger = function (a) {
            a = new e(String(a), 10)
            this.setByBigInteger(a)
        }
        this.setValueHex = function (a) {
            this.hV = a
        }
        this.getFreshValueHex = function () {
            return this.hV
        }
        'undefined' != typeof a && ('undefined' != typeof a.bigint ? this.setByBigInteger(a.bigint) : 'undefined' != typeof a['int'] ? this.setByInteger(a['int']) : 'undefined' != typeof a.hex && this.setValueHex(a.hex))
    }
    l.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object)
    KJUR.asn1.DERBitString = function (a) {
        KJUR.asn1.DERBitString.superclass.constructor.call(this)
        this.hT = '03'
        this.setHexValueIncludingUnusedBits = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.hV = a
        }
        this.setUnusedBitsAndHexValue = function (a, c) {
            if (0 > a || 7 < a) {
                throw 'unused bits shall be from 0 to 7: u = ' + a
            }
            this.hTLV = null
            this.isModified = !0
            this.hV = '0' + a + c
        }
        this.setByBinaryString = function (a) {
            a = a.replace(/0+$/, '')
            var c = 8 - a.length % 8
            8 == c && (c = 0)
            for (var d = 0; d <= c; d++) {
                a += '0'
            }
            for (var f = '', d = 0; d < a.length - 1; d += 8) {
                var g = a.substr(d, 8),
                    g = parseInt(g, 2).toString(16)
                1 == g.length && (g = '0' + g)
                f += g
            }
            this.hTLV = null
            this.isModified = !0
            this.hV = '0' + c + f
        }
        this.setByBooleanArray = function (a) {
            for (var c = '', d = 0; d < a.length; d++) {
                c = !0 == a[d] ? c + '1' : c + '0'
            }
            this.setByBinaryString(c)
        }
        this.newFalseArray = function (a) {
            for (var c = Array(a), d = 0; d < a; d++) {
                c[d] = !1
            }
            return c
        }
        this.getFreshValueHex = function () {
            return this.hV
        }
        'undefined' != typeof a && ('undefined' != typeof a.hex ? this.setHexValueIncludingUnusedBits(a.hex) : 'undefined' != typeof a.bin ? this.setByBinaryString(a.bin) : 'undefined' != typeof a.array && this.setByBooleanArray(a.array))
    }
    l.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object)
    KJUR.asn1.DEROctetString = function (a) {
        KJUR.asn1.DEROctetString.superclass.constructor.call(this, a)
        this.hT = '04'
    }
    l.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString)
    KJUR.asn1.DERNull = function () {
        KJUR.asn1.DERNull.superclass.constructor.call(this)
        this.hT = '05'
        this.hTLV = '0500'
    }
    l.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object)
    KJUR.asn1.DERObjectIdentifier = function (a) {
        var b = function (a) {
            a = a.toString(16)
            1 == a.length && (a = '0' + a)
            return a
        }
        KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this)
        this.hT = '06'
        this.setValueHex = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.s = null
            this.hV = a
        }
        this.setValueOidString = function (a) {
            if (!a.match(/^[0-9.]+$/)) {
                throw 'malformed oid string: ' + a
            }
            var d = ''
            a = a.split('.')
            var f = 40 * parseInt(a[0]) + parseInt(a[1]),
                d = d + b(f)
            a.splice(0, 2)
            for (f = 0; f < a.length; f++) {
                var g = '',
                    h = (new e(a[f], 10)).toString(2),
                    k = 7 - h.length % 7
                7 == k && (k = 0)
                for (var u = '', l = 0; l < k; l++) {
                    u += '0'
                }
                h = u + h
                for (l = 0; l < h.length - 1; l += 7) {
                    k = h.substr(l, 7),
                    l != h.length - 7 && (k = '1' + k),
                        g += b(parseInt(k, 2))
                }
                d += g
            }
            this.hTLV = null
            this.isModified = !0
            this.s = null
            this.hV = d
        }
        this.setValueName = function (a) {
            if ('undefined' != typeof KJUR.asn1.x509.OID.name2oidList[a]) {
                this.setValueOidString(KJUR.asn1.x509.OID.name2oidList[a])
            } else {
                throw 'DERObjectIdentifier oidName undefined: ' + a
            }
        }
        this.getFreshValueHex = function () {
            return this.hV
        }
        'undefined' != typeof a && ('undefined' != typeof a.oid ? this.setValueOidString(a.oid) : 'undefined' != typeof a.hex ? this.setValueHex(a.hex) : 'undefined' != typeof a.name && this.setValueName(a.name))
    }
    l.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object)
    KJUR.asn1.DERUTF8String = function (a) {
        KJUR.asn1.DERUTF8String.superclass.constructor.call(this, a)
        this.hT = '0c'
    }
    l.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString)
    KJUR.asn1.DERNumericString = function (a) {
        KJUR.asn1.DERNumericString.superclass.constructor.call(this, a)
        this.hT = '12'
    }
    l.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString)
    KJUR.asn1.DERPrintableString = function (a) {
        KJUR.asn1.DERPrintableString.superclass.constructor.call(this, a)
        this.hT = '13'
    }
    l.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString)
    KJUR.asn1.DERTeletexString = function (a) {
        KJUR.asn1.DERTeletexString.superclass.constructor.call(this, a)
        this.hT = '14'
    }
    l.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString)
    KJUR.asn1.DERIA5String = function (a) {
        KJUR.asn1.DERIA5String.superclass.constructor.call(this, a)
        this.hT = '16'
    }
    l.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString)
    KJUR.asn1.DERUTCTime = function (a) {
        KJUR.asn1.DERUTCTime.superclass.constructor.call(this, a)
        this.hT = '17'
        this.setByDate = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.date = a
            this.s = this.formatDate(this.date, 'utc')
            this.hV = stohex(this.s)
        }
        'undefined' != typeof a && ('undefined' != typeof a.str ? this.setString(a.str) : 'undefined' != typeof a.hex ? this.setStringHex(a.hex) : 'undefined' != typeof a.date && this.setByDate(a.date))
    }
    l.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime)
    KJUR.asn1.DERGeneralizedTime = function (a) {
        KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, a)
        this.hT = '18'
        this.setByDate = function (a) {
            this.hTLV = null
            this.isModified = !0
            this.date = a
            this.s = this.formatDate(this.date, 'gen')
            this.hV = stohex(this.s)
        }
        'undefined' != typeof a && ('undefined' != typeof a.str ? this.setString(a.str) : 'undefined' != typeof a.hex ? this.setStringHex(a.hex) : 'undefined' != typeof a.date && this.setByDate(a.date))
    }
    l.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime)
    KJUR.asn1.DERSequence = function (a) {
        KJUR.asn1.DERSequence.superclass.constructor.call(this, a)
        this.hT = '30'
        this.getFreshValueHex = function () {
            for (var a = '', c = 0; c < this.asn1Array.length; c++) {
                a += this.asn1Array[c].getEncodedHex()
            }
            return this.hV = a
        }
    }
    l.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured)
    KJUR.asn1.DERSet = function (a) {
        KJUR.asn1.DERSet.superclass.constructor.call(this, a)
        this.hT = '31'
        this.getFreshValueHex = function () {
            for (var a = [], c = 0; c < this.asn1Array.length; c++) {
                a.push(this.asn1Array[c].getEncodedHex())
            }
            a.sort()
            return this.hV = a.join('')
        }
    }
    l.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured)
    KJUR.asn1.DERTaggedObject = function (a) {
        KJUR.asn1.DERTaggedObject.superclass.constructor.call(this)
        this.hT = 'a0'
        this.hV = ''
        this.isExplicit = !0
        this.asn1Object = null
        this.setASN1Object = function (a, c, d) {
            this.hT = c
            this.isExplicit = a
            this.asn1Object = d
            this.isExplicit ? (this.hV = this.asn1Object.getEncodedHex(), this.hTLV = null, this.isModified = !0) : (this.hV = null, this.hTLV = d.getEncodedHex(), this.hTLV = this.hTLV.replace(/^../, c), this.isModified = !1)
        }
        this.getFreshValueHex = function () {
            return this.hV
        }
        'undefined' != typeof a && ('undefined' != typeof a.tag && (this.hT = a.tag), 'undefined' != typeof a.explicit && (this.isExplicit = a.explicit), 'undefined' != typeof a.obj && (this.asn1Object = a.obj, this.setASN1Object(this.isExplicit, this.hT, this.asn1Object)))
    }
    l.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);
    (function (a) {
        var b = {},
            c
        b.decode = function (b) {
            var f
            if (c === a) {
                var g = '0123456789ABCDEF'
                c = []
                for (f = 0; 16 > f; ++f) {
                    c[g.charAt(f)] = f
                }
                g = g.toLowerCase()
                for (f = 10; 16 > f; ++f) {
                    c[g.charAt(f)] = f
                }
                for (f = 0; 8 > f; ++f) {
                    c[' \f\n\r\t â¨â©'.charAt(f)] = -1
                }
            }
            var g = [],
                h = 0,
                k = 0
            for (f = 0; f < b.length; ++f) {
                var e = b.charAt(f)
                if ('=' == e) {
                    break
                }
                e = c[e]
                if (-1 != e) {
                    if (e === a) {
                        throw 'Illegal character at offset ' + f
                    }
                    h |= e
                    2 <= ++k ? (g[g.length] = h, k = h = 0) : h <<= 4
                }
            }
            if (k) {
                throw 'Hex encoding incomplete: 4 bits missing'
            }
            return g
        }
        window.Hex = b
    })();
    (function (a) {
        var b = {},
            c
        b.decode = function (b) {
            var f
            if (c === a) {
                c = []
                for (f = 0; 64 > f; ++f) {
                    c['ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.charAt(f)] = f
                }
                for (f = 0; 9 > f; ++f) {
                    c['= \f\n\r\t â¨â©'.charAt(f)] = -1
                }
            }
            var g = [],
                h = 0,
                k = 0
            for (f = 0; f < b.length; ++f) {
                var e = b.charAt(f)
                if ('=' == e) {
                    break
                }
                e = c[e]
                if (-1 != e) {
                    if (e === a) {
                        throw 'Illegal character at offset ' + f
                    }
                    h |= e
                    4 <= ++k ? (g[g.length] = h >> 16, g[g.length] = h >> 8 & 255, g[g.length] = h & 255, k = h = 0) : h <<= 6
                }
            }
            switch (k) {
                case 1:
                    throw 'Base64 encoding incomplete: at least 2 bits missing'
                case 2:
                    g[g.length] = h >> 10
                    break
                case 3:
                    g[g.length] = h >> 16,
                        g[g.length] = h >> 8 & 255
            }
            return g
        }
        b.re = /-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/
        b.unarmor = function (a) {
            var c = b.re.exec(a)
            if (c) {
                if (c[1]) {
                    a = c[1]
                } else {
                    if (c[2]) {
                        a = c[2]
                    } else {
                        throw 'RegExp out of sync'
                    }
                }
            }
            return b.decode(a)
        }
        window.Base64 = b
    })();
    (function (a) {
        function b(a, c) {
            a instanceof b ? (this.enc = a.enc, this.pos = a.pos) : (this.enc = a, this.pos = c)
        }

        function c(a, b, c, d, e) {
            this.stream = a
            this.header = b
            this.length = c
            this.tag = d
            this.sub = e
        }

        var d = {
            tag: function (a, b) {
                var c = document.createElement(a)
                c.className = b
                return c
            },
            text: function (a) {
                return document.createTextNode(a)
            }
        }
        b.prototype.get = function (b) {
            b === a && (b = this.pos++)
            if (b >= this.enc.length) {
                throw 'Requesting byte offset ' + b + ' on a stream of length ' + this.enc.length
            }
            return this.enc[b]
        }
        b.prototype.hexDigits = '0123456789ABCDEF'
        b.prototype.hexByte = function (a) {
            return this.hexDigits.charAt(a >> 4 & 15) + this.hexDigits.charAt(a & 15)
        }
        b.prototype.hexDump = function (a, b, c) {
            for (var d = ''; a < b; ++a) {
                if (d += this.hexByte(this.get(a)), !0 !== c) {
                    switch (a & 15) {
                        case 7:
                            d += '  '
                            break
                        case 15:
                            d += '\n'
                            break
                        default:
                            d += ' '
                    }
                }
            }
            return d
        }
        b.prototype.parseStringISO = function (a, b) {
            for (var c = '', d = a; d < b; ++d) {
                c += String.fromCharCode(this.get(d))
            }
            return c
        }
        b.prototype.parseStringUTF = function (a, b) {
            for (var c = '', d = a; d < b;) {
                var e = this.get(d++),
                    c = 128 > e ? c + String.fromCharCode(e) : 191 < e && 224 > e ? c + String.fromCharCode((e & 31) << 6 | this.get(d++) & 63) : c + String.fromCharCode((e & 15) << 12 | (this.get(d++) & 63) << 6 | this.get(d++) & 63)
            }
            return c
        }
        b.prototype.parseStringBMP = function (a, b) {
            for (var c = '', d = a; d < b; d += 2) {
                var e = this.get(d),
                    l = this.get(d + 1),
                    c = c + String.fromCharCode((e << 8) + l)
            }
            return c
        }
        b.prototype.reTime = /^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/
        b.prototype.parseTime = function (a, b) {
            var c = this.parseStringISO(a, b),
                d = this.reTime.exec(c)
            if (!d) {
                return 'Unrecognized time: ' + c
            }
            c = d[1] + '-' + d[2] + '-' + d[3] + ' ' + d[4]
            d[5] && (c += ':' + d[5], d[6] && (c += ':' + d[6], d[7] && (c += '.' + d[7])))
            d[8] && (c += ' UTC', 'Z' != d[8] && (c += d[8], d[9] && (c += ':' + d[9])))
            return c
        }
        b.prototype.parseInteger = function (a, c) {
            var b = c - a
            if (4 < b) {
                var b = b << 3,
                    d = this.get(a)
                if (0 === d) {
                    b -= 8
                } else {
                    for (; 128 > d;) {
                        d <<= 1,
                            --b
                    }
                }
                return '(' + b + ' bit)'
            }
            b = 0
            for (d = a; d < c; ++d) {
                b = b << 8 | this.get(d)
            }
            return b
        }
        b.prototype.parseBitString = function (a, b) {
            var c = this.get(a),
                d = (b - a - 1 << 3) - c,
                e = '(' + d + ' bit)'
            if (20 >= d) {
                for (var l = c, e = e + ' ', c = b - 1; c > a; --c) {
                    for (d = this.get(c); 8 > l; ++l) {
                        e += d >> l & 1 ? '1' : '0'
                    }
                    l = 0
                }
            }
            return e
        }
        b.prototype.parseOctetString = function (a, b) {
            var c = b - a,
                d = '(' + c + ' byte) '
            100 < c && (b = a + 100)
            for (var e = a; e < b; ++e) {
                d += this.hexByte(this.get(e))
            }
            100 < c && (d += 'â¦')
            return d
        }
        b.prototype.parseOID = function (a, b) {
            for (var c = '', d = 0, e = 0, l = a; l < b; ++l) {
                var m = this.get(l),
                    d = d << 7 | m & 127,
                    e = e + 7
                m & 128 || ('' === c ? (c = 80 > d ? 40 > d ? 0 : 1 : 2, c = c + '.' + (d - 40 * c)) : c += '.' + (31 <= e ? 'bigint' : d), d = e = 0)
            }
            return c
        }
        c.prototype.typeName = function () {
            if (this.tag === a) {
                return 'unknown'
            }
            var c = this.tag & 31
            switch (this.tag >> 6) {
                case 0:
                    switch (c) {
                        case 0:
                            return 'EOC'
                        case 1:
                            return 'BOOLEAN'
                        case 2:
                            return 'INTEGER'
                        case 3:
                            return 'BIT_STRING'
                        case 4:
                            return 'OCTET_STRING'
                        case 5:
                            return 'NULL'
                        case 6:
                            return 'OBJECT_IDENTIFIER'
                        case 7:
                            return 'ObjectDescriptor'
                        case 8:
                            return 'EXTERNAL'
                        case 9:
                            return 'REAL'
                        case 10:
                            return 'ENUMERATED'
                        case 11:
                            return 'EMBEDDED_PDV'
                        case 12:
                            return 'UTF8String'
                        case 16:
                            return 'SEQUENCE'
                        case 17:
                            return 'SET'
                        case 18:
                            return 'NumericString'
                        case 19:
                            return 'PrintableString'
                        case 20:
                            return 'TeletexString'
                        case 21:
                            return 'VideotexString'
                        case 22:
                            return 'IA5String'
                        case 23:
                            return 'UTCTime'
                        case 24:
                            return 'GeneralizedTime'
                        case 25:
                            return 'GraphicString'
                        case 26:
                            return 'VisibleString'
                        case 27:
                            return 'GeneralString'
                        case 28:
                            return 'UniversalString'
                        case 30:
                            return 'BMPString'
                        default:
                            return 'Universal_' + c.toString(16)
                    }
                case 1:
                    return 'Application_' + c.toString(16)
                case 2:
                    return '[' + c + ']'
                case 3:
                    return 'Private_' + c.toString(16)
            }
        }
        c.prototype.reSeemsASCII = /^[ -~]+$/
        c.prototype.content = function () {
            if (this.tag === a) {
                return null
            }
            var c = this.tag >> 6,
                b = this.tag & 31,
                d = this.posContent(),
                e = Math.abs(this.length)
            if (0 !== c) {
                if (null !== this.sub) {
                    return '(' + this.sub.length + ' elem)'
                }
                c = this.stream.parseStringISO(d, d + Math.min(e, 100))
                return this.reSeemsASCII.test(c) ? c.substring(0, 200) + (200 < c.length ? 'â¦' : '') : this.stream.parseOctetString(d, d + e)
            }
            switch (b) {
                case 1:
                    return 0 === this.stream.get(d) ? 'false' : 'true'
                case 2:
                    return this.stream.parseInteger(d, d + e)
                case 3:
                    return this.sub ? '(' + this.sub.length + ' elem)' : this.stream.parseBitString(d, d + e)
                case 4:
                    return this.sub ? '(' + this.sub.length + ' elem)' : this.stream.parseOctetString(d, d + e)
                case 6:
                    return this.stream.parseOID(d, d + e)
                case 16:
                case 17:
                    return '(' + this.sub.length + ' elem)'
                case 12:
                    return this.stream.parseStringUTF(d, d + e)
                case 18:
                case 19:
                case 20:
                case 21:
                case 22:
                case 26:
                    return this.stream.parseStringISO(d, d + e)
                case 30:
                    return this.stream.parseStringBMP(d, d + e)
                case 23:
                case 24:
                    return this.stream.parseTime(d, d + e)
            }
            return null
        }
        c.prototype.toString = function () {
            return this.typeName() + '@' + this.stream.pos + '[header:' + this.header + ',length:' + this.length + ',sub:' + (null === this.sub ? 'null' : this.sub.length) + ']'
        }
        c.prototype.print = function (c) {
            c === a && (c = '')
            document.writeln(c + this)
            if (null !== this.sub) {
                c += '  '
                for (var b = 0, d = this.sub.length; b < d; ++b) {
                    this.sub[b].print(c)
                }
            }
        }
        c.prototype.toPrettyString = function (c) {
            c === a && (c = '')
            var b = c + this.typeName() + ' @' + this.stream.pos
            0 <= this.length && (b += '+')
            b += this.length
            this.tag & 32 ? b += ' (constructed)' : 3 != this.tag && 4 != this.tag || null === this.sub || (b += ' (encapsulates)')
            b += '\n'
            if (null !== this.sub) {
                c += '  '
                for (var d = 0, e = this.sub.length; d < e; ++d) {
                    b += this.sub[d].toPrettyString(c)
                }
            }
            return b
        }
        c.prototype.toDOM = function () {
            var a = d.tag('div', 'node')
            a.asn1 = this
            var c = d.tag('div', 'head'),
                b = this.typeName().replace(/_/g, ' ')
            c.innerHTML = b
            var e = this.content()
            null !== e && (e = String(e).replace(/</g, '&lt;'), b = d.tag('span', 'preview'), b.appendChild(d.text(e)), c.appendChild(b))
            a.appendChild(c)
            this.node = a
            this.head = c
            var l = d.tag('div', 'value'),
                b = 'Offset: ' + this.stream.pos + '<br/>',
                b = b + ('Length: ' + this.header + '+'),
                b = 0 <= this.length ? b + this.length : b + (-this.length + ' (undefined)')
            this.tag & 32 ? b += '<br/>(constructed)' : 3 != this.tag && 4 != this.tag || null === this.sub || (b += '<br/>(encapsulates)')
            null !== e && (b += '<br/>Value:<br/><b>' + e + '</b>', 'object' === typeof oids && 6 == this.tag && (e = oids[e])) && (e.d && (b += '<br/>' + e.d), e.c && (b += '<br/>' + e.c), e.w && (b += '<br/>(warning!)'))
            l.innerHTML = b
            a.appendChild(l)
            b = d.tag('div', 'sub')
            if (null !== this.sub) {
                for (e = 0, l = this.sub.length; e < l; ++e) {
                    b.appendChild(this.sub[e].toDOM())
                }
            }
            a.appendChild(b)
            c.onclick = function () {
                a.className = 'node collapsed' == a.className ? 'node' : 'node collapsed'
            }
            return a
        }
        c.prototype.posStart = function () {
            return this.stream.pos
        }
        c.prototype.posContent = function () {
            return this.stream.pos + this.header
        }
        c.prototype.posEnd = function () {
            return this.stream.pos + this.header + Math.abs(this.length)
        }
        c.prototype.fakeHover = function (a) {
            this.node.className += ' hover'
            a && (this.head.className += ' hover')
        }
        c.prototype.fakeOut = function (a) {
            var b = / ?hover/
            this.node.className = this.node.className.replace(b, '')
            a && (this.head.className = this.head.className.replace(b, ''))
        }
        c.prototype.toHexDOM_sub = function (a, b, c, e, l) {
            e >= l || (b = d.tag('span', b), b.appendChild(d.text(c.hexDump(e, l))), a.appendChild(b))
        }
        c.prototype.toHexDOM = function (b) {
            var c = d.tag('span', 'hex')
            b === a && (b = c)
            this.head.hexNode = c
            this.head.onmouseover = function () {
                this.hexNode.className = 'hexCurrent'
            }
            this.head.onmouseout = function () {
                this.hexNode.className = 'hex'
            }
            c.asn1 = this
            c.onmouseover = function () {
                var a = !b.selected
                a && (b.selected = this.asn1, this.className = 'hexCurrent')
                this.asn1.fakeHover(a)
            }
            c.onmouseout = function () {
                var a = b.selected == this.asn1
                this.asn1.fakeOut(a)
                a && (b.selected = null, this.className = 'hex')
            }
            this.toHexDOM_sub(c, 'tag', this.stream, this.posStart(), this.posStart() + 1)
            this.toHexDOM_sub(c, 0 <= this.length ? 'dlen' : 'ulen', this.stream, this.posStart() + 1, this.posContent())
            if (null === this.sub) {
                c.appendChild(d.text(this.stream.hexDump(this.posContent(), this.posEnd())))
            } else {
                if (0 < this.sub.length) {
                    var e = this.sub[0],
                        k = this.sub[this.sub.length - 1]
                    this.toHexDOM_sub(c, 'intro', this.stream, this.posContent(), e.posStart())
                    for (var e = 0, l = this.sub.length; e < l; ++e) {
                        c.appendChild(this.sub[e].toHexDOM(b))
                    }
                    this.toHexDOM_sub(c, 'outro', this.stream, k.posEnd(), this.posEnd())
                }
            }
            return c
        }
        c.prototype.toHexString = function (a) {
            return this.stream.hexDump(this.posStart(), this.posEnd(), !0)
        }
        c.decodeLength = function (a) {
            var b = a.get(),
                c = b & 127
            if (c == b) {
                return c
            }
            if (3 < c) {
                throw 'Length over 24 bits not supported at position ' + (a.pos - 1)
            }
            if (0 === c) {
                return -1
            }
            for (var d = b = 0; d < c; ++d) {
                b = b << 8 | a.get()
            }
            return b
        }
        c.hasContent = function (a, d, e) {
            if (a & 32) {
                return !0
            }
            if (3 > a || 4 < a) {
                return !1
            }
            var k = new b(e)
            3 == a && k.get()
            if (k.get() >> 6 & 1) {
                return !1
            }
            try {
                var l = c.decodeLength(k)
                return k.pos - e.pos + l == d
            } catch (m) {
                return !1
            }
        }
        c.decode = function (a) {
            a instanceof b || (a = new b(a, 0))
            var d = new b(a),
                e = a.get(),
                k = c.decodeLength(a),
                l = a.pos - d.pos,
                m = null
            if (c.hasContent(e, k, a)) {
                var n = a.pos
                3 == e && a.get()
                m = []
                if (0 <= k) {
                    for (var p = n + k; a.pos < p;) {
                        m[m.length] = c.decode(a)
                    }
                    if (a.pos != p) {
                        throw 'Content size is not correct for container starting at offset ' + n
                    }
                } else {
                    try {
                        for (; ;) {
                            p = c.decode(a)
                            if (0 === p.tag) {
                                break
                            }
                            m[m.length] = p
                        }
                        k = n - a.pos
                    } catch (q) {
                        throw 'Exception while decoding undefined length content: ' + q
                    }
                }
            } else {
                a.pos += k
            }
            return new c(d, l, k, e, m)
        }
        c.test = function () {
            for (var a = [
                {
                    value: [
                        39
                    ],
                    expected: 39
                },
                {
                    value: [
                        129,
                        201
                    ],
                    expected: 201
                },
                {
                    value: [
                        131,
                        254,
                        220,
                        186
                    ],
                    expected: 16702650
                }
            ], d = 0, e = a.length; d < e; ++d) {
                var k = new b(a[d].value, 0),
                    k = c.decodeLength(k)
                k != a[d].expected && document.write('In test[' + d + '] expected ' + a[d].expected + ' got ' + k + '\n')
            }
        }
        window.ASN1 = c
    })()
    ASN1.prototype.getHexStringValue = function () {
        return this.toHexString().substr(2 * this.header, 2 * this.length)
    }
    p.prototype.parseKey = function (a) {
        try {
            var b = /^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(a) ? Hex.decode(a) : Base64.unarmor(a),
                c = ASN1.decode(b)
            if (9 === c.sub.length) {
                var d = c.sub[1].getHexStringValue()
                this.n = n(d, 16)
                var e = c.sub[2].getHexStringValue()
                this.e = parseInt(e, 16)
                var g = c.sub[3].getHexStringValue()
                this.d = n(g, 16)
                var h = c.sub[4].getHexStringValue()
                this.p = n(h, 16)
                var k = c.sub[5].getHexStringValue()
                this.q = n(k, 16)
                var l = c.sub[6].getHexStringValue()
                this.dmp1 = n(l, 16)
                var m = c.sub[7].getHexStringValue()
                this.dmq1 = n(m, 16)
                var p = c.sub[8].getHexStringValue()
                this.coeff = n(p, 16)
            } else {
                if (2 === c.sub.length) {
                    var q = c.sub[1].sub[0],
                        d = q.sub[0].getHexStringValue()
                    this.n = n(d, 16)
                    e = q.sub[1].getHexStringValue()
                    this.e = parseInt(e, 16)
                } else {
                    return !1
                }
            }
            return !0
        } catch (r) {
            return !1
        }
    }
    p.prototype.getPrivateBaseKey = function () {
        var a = {
            array: [
                new KJUR.asn1.DERInteger({
                    'int': 0
                }),
                new KJUR.asn1.DERInteger({
                    bigint: this.n
                }),
                new KJUR.asn1.DERInteger({
                    'int': this.e
                }),
                new KJUR.asn1.DERInteger({
                    bigint: this.d
                }),
                new KJUR.asn1.DERInteger({
                    bigint: this.p
                }),
                new KJUR.asn1.DERInteger({
                    bigint: this.q
                }),
                new KJUR.asn1.DERInteger({
                    bigint: this.dmp1
                }),
                new KJUR.asn1.DERInteger({
                    bigint: this.dmq1
                }),
                new KJUR.asn1.DERInteger({
                    bigint: this.coeff
                })
            ]
        }
        return (new KJUR.asn1.DERSequence(a)).getEncodedHex()
    }
    p.prototype.getPrivateBaseKeyB64 = function () {
        return P(this.getPrivateBaseKey())
    }
    p.prototype.getPublicBaseKey = function () {
        var a = {
                array: [
                    new KJUR.asn1.DERObjectIdentifier({
                        oid: '1.2.840.113549.1.1.1'
                    }),
                    new KJUR.asn1.DERNull
                ]
            },
            b = new KJUR.asn1.DERSequence(a),
            a = {
                array: [
                    new KJUR.asn1.DERInteger({
                        bigint: this.n
                    }),
                    new KJUR.asn1.DERInteger({
                        'int': this.e
                    })
                ]
            },
            a = {
                hex: '00' + (new KJUR.asn1.DERSequence(a)).getEncodedHex()
            },
            a = new KJUR.asn1.DERBitString(a),
            a = {
                array: [
                    b,
                    a
                ]
            }
        return (new KJUR.asn1.DERSequence(a)).getEncodedHex()
    }
    p.prototype.getPublicBaseKeyB64 = function () {
        return P(this.getPublicBaseKey())
    }
    p.prototype.wordwrap = function (a, b) {
        b = b || 64
        return a ? a.match(RegExp('(.{1,' + b + '})( +|$\n?)|(.{1,' + b + '})', 'g')).join('\n') : a
    }
    p.prototype.getPrivateKey = function () {
        var a
        a = '-----BEGIN RSA PRIVATE KEY-----\n' + (this.wordwrap(this.getPrivateBaseKeyB64()) + '\n')
        return a + '-----END RSA PRIVATE KEY-----'
    }
    p.prototype.getPublicKey = function () {
        var a
        a = '-----BEGIN PUBLIC KEY-----\n' + (this.wordwrap(this.getPublicBaseKeyB64()) + '\n')
        return a + '-----END PUBLIC KEY-----'
    }
    p.prototype.hasPublicKeyProperty = function (a) {
        a = a || {}
        return a.hasOwnProperty('n') && a.hasOwnProperty('e')
    }
    p.prototype.hasPrivateKeyProperty = function (a) {
        a = a || {}
        return a.hasOwnProperty('n') && a.hasOwnProperty('e') && a.hasOwnProperty('d') && a.hasOwnProperty('p') && a.hasOwnProperty('q') && a.hasOwnProperty('dmp1') && a.hasOwnProperty('dmq1') && a.hasOwnProperty('coeff')
    }
    p.prototype.parsePropertiesFrom = function (a) {
        this.n = a.n
        this.e = a.e
        a.hasOwnProperty('d') && (this.d = a.d, this.p = a.p, this.q = a.q, this.dmp1 = a.dmp1, this.dmq1 = a.dmq1, this.coeff = a.coeff)
    }
    var H = function (a) {
        p.call(this)
        a && ('string' === typeof a ? this.parseKey(a) : (this.hasPrivateKeyProperty(a) || this.hasPublicKeyProperty(a)) && this.parsePropertiesFrom(a))
    }
    H.prototype = new p
    H.prototype.constructor = H
    l = function (a) {
        a = a || {}
        this.default_key_size = parseInt(a.default_key_size) || 1024
        this.default_public_exponent = a.default_public_exponent || '010001'
        this.log = a.log || !1
        this.key = null
    }
    l.prototype.setKey = function (a) {
        this.log && this.key && console.warn('A key was already set, overriding existing.')
        this.key = new H(a)
    }
    l.prototype.setPrivateKey = function (a) {
        this.setKey(a)
    }
    l.prototype.setPublicKey = function (a) {
        this.setKey(a)
    }
    l.prototype.decrypt = function (a) {
        try {
            return this.getKey().decrypt(ca(a))
        } catch (b) {
            return !1
        }
    }
    l.prototype.encrypt = function (a) {
        try {
            return P(this.getKey().encrypt(a))
        } catch (b) {
            return !1
        }
    }
    l.prototype.getKey = function (a) {
        if (!this.key) {
            this.key = new H
            if (a && '[object Function]' === {}.toString.call(a)) {
                this.key.generateAsync(this.default_key_size, this.default_public_exponent, a)
                return
            }
            this.key.generate(this.default_key_size, this.default_public_exponent)
        }
        return this.key
    }
    l.prototype.getPrivateKey = function () {
        return this.getKey().getPrivateKey()
    }
    l.prototype.getPrivateKeyB64 = function () {
        return this.getKey().getPrivateBaseKeyB64()
    }
    l.prototype.getPublicKey = function () {
        return this.getKey().getPublicKey()
    }
    l.prototype.getPublicKeyB64 = function () {
        return this.getKey().getPublicBaseKeyB64()
    }
    Y.JSEncrypt = l
})(JSEncryptExports)
var JSEncrypt = JSEncryptExports.JSEncrypt
var CryptoJS = CryptoJS || function (u, p) {
    var d = {},
        l = d.lib = {},
        s = function () {
        },
        t = l.Base = {
            extend: function (a) {
                s.prototype = this
                var c = new s
                a && c.mixIn(a)
                c.hasOwnProperty('init') || (c.init = function () {
                    c.$super.init.apply(this, arguments)
                })
                c.init.prototype = c
                c.$super = this
                return c
            },
            create: function () {
                var a = this.extend()
                a.init.apply(a, arguments)
                return a
            },
            init: function () {
            },
            mixIn: function (a) {
                for (var c in a) {
                    a.hasOwnProperty(c) && (this[c] = a[c])
                }
                a.hasOwnProperty('toString') && (this.toString = a.toString)
            },
            clone: function () {
                return this.init.prototype.extend(this)
            }
        },
        r = l.WordArray = t.extend({
            init: function (a, c) {
                a = this.words = a || []
                this.sigBytes = c != p ? c : 4 * a.length
            },
            toString: function (a) {
                return (a || v).stringify(this)
            },
            concat: function (a) {
                var c = this.words,
                    e = a.words,
                    j = this.sigBytes
                a = a.sigBytes
                this.clamp()
                if (j % 4) {
                    for (var k = 0; k < a; k++) {
                        c[j + k >>> 2] |= (e[k >>> 2] >>> 24 - 8 * (k % 4) & 255) << 24 - 8 * ((j + k) % 4)
                    }
                } else {
                    if (65535 < e.length) {
                        for (k = 0; k < a; k += 4) {
                            c[j + k >>> 2] = e[k >>> 2]
                        }
                    } else {
                        c.push.apply(c, e)
                    }
                }
                this.sigBytes += a
                return this
            },
            clamp: function () {
                var a = this.words,
                    c = this.sigBytes
                a[c >>> 2] &= 4294967295 << 32 - 8 * (c % 4)
                a.length = u.ceil(c / 4)
            },
            clone: function () {
                var a = t.clone.call(this)
                a.words = this.words.slice(0)
                return a
            },
            random: function (a) {
                for (var c = [], e = 0; e < a; e += 4) {
                    c.push(4294967296 * u.random() | 0)
                }
                return new r.init(c, a)
            }
        }),
        w = d.enc = {},
        v = w.Hex = {
            stringify: function (a) {
                var c = a.words
                a = a.sigBytes
                for (var e = [], j = 0; j < a; j++) {
                    var k = c[j >>> 2] >>> 24 - 8 * (j % 4) & 255
                    e.push((k >>> 4).toString(16))
                    e.push((k & 15).toString(16))
                }
                return e.join('')
            },
            parse: function (a) {
                for (var c = a.length, e = [], j = 0; j < c; j += 2) {
                    e[j >>> 3] |= parseInt(a.substr(j, 2), 16) << 24 - 4 * (j % 8)
                }
                return new r.init(e, c / 2)
            }
        },
        b = w.Latin1 = {
            stringify: function (a) {
                var c = a.words
                a = a.sigBytes
                for (var e = [], j = 0; j < a; j++) {
                    e.push(String.fromCharCode(c[j >>> 2] >>> 24 - 8 * (j % 4) & 255))
                }
                return e.join('')
            },
            parse: function (a) {
                for (var c = a.length, e = [], j = 0; j < c; j++) {
                    e[j >>> 2] |= (a.charCodeAt(j) & 255) << 24 - 8 * (j % 4)
                }
                return new r.init(e, c)
            }
        },
        x = w.Utf8 = {
            stringify: function (a) {
                try {
                    return decodeURIComponent(escape(b.stringify(a)))
                } catch (c) {
                    throw Error('Malformed UTF-8 data')
                }
            },
            parse: function (a) {
                return b.parse(unescape(encodeURIComponent(a)))
            }
        },
        q = l.BufferedBlockAlgorithm = t.extend({
            reset: function () {
                this._data = new r.init
                this._nDataBytes = 0
            },
            _append: function (a) {
                'string' == typeof a && (a = x.parse(a))
                this._data.concat(a)
                this._nDataBytes += a.sigBytes
            },
            _process: function (a) {
                var c = this._data,
                    e = c.words,
                    j = c.sigBytes,
                    k = this.blockSize,
                    b = j / (4 * k),
                    b = a ? u.ceil(b) : u.max((b | 0) - this._minBufferSize, 0)
                a = b * k
                j = u.min(4 * a, j)
                if (a) {
                    for (var q = 0; q < a; q += k) {
                        this._doProcessBlock(e, q)
                    }
                    q = e.splice(0, a)
                    c.sigBytes -= j
                }
                return new r.init(q, j)
            },
            clone: function () {
                var a = t.clone.call(this)
                a._data = this._data.clone()
                return a
            },
            _minBufferSize: 0
        })
    l.Hasher = q.extend({
        cfg: t.extend(),
        init: function (a) {
            this.cfg = this.cfg.extend(a)
            this.reset()
        },
        reset: function () {
            q.reset.call(this)
            this._doReset()
        },
        update: function (a) {
            this._append(a)
            this._process()
            return this
        },
        finalize: function (a) {
            a && this._append(a)
            return this._doFinalize()
        },
        blockSize: 16,
        _createHelper: function (a) {
            return function (b, e) {
                return (new a.init(e)).finalize(b)
            }
        },
        _createHmacHelper: function (a) {
            return function (b, e) {
                return (new n.HMAC.init(a, e)).finalize(b)
            }
        }
    })
    var n = d.algo = {}
    return d
}(Math);
(function () {
    var u = CryptoJS,
        p = u.lib.WordArray
    u.enc.Base64 = {
        stringify: function (d) {
            var l = d.words,
                p = d.sigBytes,
                t = this._map
            d.clamp()
            d = []
            for (var r = 0; r < p; r += 3) {
                for (var w = (l[r >>> 2] >>> 24 - 8 * (r % 4) & 255) << 16 | (l[r + 1 >>> 2] >>> 24 - 8 * ((r + 1) % 4) & 255) << 8 | l[r + 2 >>> 2] >>> 24 - 8 * ((r + 2) % 4) & 255, v = 0; 4 > v && r + 0.75 * v < p; v++) {
                    d.push(t.charAt(w >>> 6 * (3 - v) & 63))
                }
            }
            if (l = t.charAt(64)) {
                for (; d.length % 4;) {
                    d.push(l)
                }
            }
            return d.join('')
        },
        parse: function (d) {
            var l = d.length,
                s = this._map,
                t = s.charAt(64)
            t && (t = d.indexOf(t), -1 != t && (l = t))
            for (var t = [], r = 0, w = 0; w < l; w++) {
                if (w % 4) {
                    var v = s.indexOf(d.charAt(w - 1)) << 2 * (w % 4),
                        b = s.indexOf(d.charAt(w)) >>> 6 - 2 * (w % 4)
                    t[r >>> 2] |= (v | b) << 24 - 8 * (r % 4)
                    r++
                }
            }
            return p.create(t, r)
        },
        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='
    }
})();
(function (u) {
    function p(b, n, a, c, e, j, k) {
        b = b + (n & a | ~n & c) + e + k
        return (b << j | b >>> 32 - j) + n
    }

    function d(b, n, a, c, e, j, k) {
        b = b + (n & c | a & ~c) + e + k
        return (b << j | b >>> 32 - j) + n
    }

    function l(b, n, a, c, e, j, k) {
        b = b + (n ^ a ^ c) + e + k
        return (b << j | b >>> 32 - j) + n
    }

    function s(b, n, a, c, e, j, k) {
        b = b + (a ^ (n | ~c)) + e + k
        return (b << j | b >>> 32 - j) + n
    }

    for (var t = CryptoJS, r = t.lib, w = r.WordArray, v = r.Hasher, r = t.algo, b = [], x = 0; 64 > x; x++) {
        b[x] = 4294967296 * u.abs(u.sin(x + 1)) | 0
    }
    r = r.MD5 = v.extend({
        _doReset: function () {
            this._hash = new w.init([1732584193,
                4023233417,
                2562383102,
                271733878])
        },
        _doProcessBlock: function (q, n) {
            for (var a = 0; 16 > a; a++) {
                var c = n + a,
                    e = q[c]
                q[c] = (e << 8 | e >>> 24) & 16711935 | (e << 24 | e >>> 8) & 4278255360
            }
            var a = this._hash.words,
                c = q[n + 0],
                e = q[n + 1],
                j = q[n + 2],
                k = q[n + 3],
                z = q[n + 4],
                r = q[n + 5],
                t = q[n + 6],
                w = q[n + 7],
                v = q[n + 8],
                A = q[n + 9],
                B = q[n + 10],
                C = q[n + 11],
                u = q[n + 12],
                D = q[n + 13],
                E = q[n + 14],
                x = q[n + 15],
                f = a[0],
                m = a[1],
                g = a[2],
                h = a[3],
                f = p(f, m, g, h, c, 7, b[0]),
                h = p(h, f, m, g, e, 12, b[1]),
                g = p(g, h, f, m, j, 17, b[2]),
                m = p(m, g, h, f, k, 22, b[3]),
                f = p(f, m, g, h, z, 7, b[4]),
                h = p(h, f, m, g, r, 12, b[5]),
                g = p(g, h, f, m, t, 17, b[6]),
                m = p(m, g, h, f, w, 22, b[7]),
                f = p(f, m, g, h, v, 7, b[8]),
                h = p(h, f, m, g, A, 12, b[9]),
                g = p(g, h, f, m, B, 17, b[10]),
                m = p(m, g, h, f, C, 22, b[11]),
                f = p(f, m, g, h, u, 7, b[12]),
                h = p(h, f, m, g, D, 12, b[13]),
                g = p(g, h, f, m, E, 17, b[14]),
                m = p(m, g, h, f, x, 22, b[15]),
                f = d(f, m, g, h, e, 5, b[16]),
                h = d(h, f, m, g, t, 9, b[17]),
                g = d(g, h, f, m, C, 14, b[18]),
                m = d(m, g, h, f, c, 20, b[19]),
                f = d(f, m, g, h, r, 5, b[20]),
                h = d(h, f, m, g, B, 9, b[21]),
                g = d(g, h, f, m, x, 14, b[22]),
                m = d(m, g, h, f, z, 20, b[23]),
                f = d(f, m, g, h, A, 5, b[24]),
                h = d(h, f, m, g, E, 9, b[25]),
                g = d(g, h, f, m, k, 14, b[26]),
                m = d(m, g, h, f, v, 20, b[27]),
                f = d(f, m, g, h, D, 5, b[28]),
                h = d(h, f, m, g, j, 9, b[29]),
                g = d(g, h, f, m, w, 14, b[30]),
                m = d(m, g, h, f, u, 20, b[31]),
                f = l(f, m, g, h, r, 4, b[32]),
                h = l(h, f, m, g, v, 11, b[33]),
                g = l(g, h, f, m, C, 16, b[34]),
                m = l(m, g, h, f, E, 23, b[35]),
                f = l(f, m, g, h, e, 4, b[36]),
                h = l(h, f, m, g, z, 11, b[37]),
                g = l(g, h, f, m, w, 16, b[38]),
                m = l(m, g, h, f, B, 23, b[39]),
                f = l(f, m, g, h, D, 4, b[40]),
                h = l(h, f, m, g, c, 11, b[41]),
                g = l(g, h, f, m, k, 16, b[42]),
                m = l(m, g, h, f, t, 23, b[43]),
                f = l(f, m, g, h, A, 4, b[44]),
                h = l(h, f, m, g, u, 11, b[45]),
                g = l(g, h, f, m, x, 16, b[46]),
                m = l(m, g, h, f, j, 23, b[47]),
                f = s(f, m, g, h, c, 6, b[48]),
                h = s(h, f, m, g, w, 10, b[49]),
                g = s(g, h, f, m, E, 15, b[50]),
                m = s(m, g, h, f, r, 21, b[51]),
                f = s(f, m, g, h, u, 6, b[52]),
                h = s(h, f, m, g, k, 10, b[53]),
                g = s(g, h, f, m, B, 15, b[54]),
                m = s(m, g, h, f, e, 21, b[55]),
                f = s(f, m, g, h, v, 6, b[56]),
                h = s(h, f, m, g, x, 10, b[57]),
                g = s(g, h, f, m, t, 15, b[58]),
                m = s(m, g, h, f, D, 21, b[59]),
                f = s(f, m, g, h, z, 6, b[60]),
                h = s(h, f, m, g, C, 10, b[61]),
                g = s(g, h, f, m, j, 15, b[62]),
                m = s(m, g, h, f, A, 21, b[63])
            a[0] = a[0] + f | 0
            a[1] = a[1] + m | 0
            a[2] = a[2] + g | 0
            a[3] = a[3] + h | 0
        },
        _doFinalize: function () {
            var b = this._data,
                n = b.words,
                a = 8 * this._nDataBytes,
                c = 8 * b.sigBytes
            n[c >>> 5] |= 128 << 24 - c % 32
            var e = u.floor(a / 4294967296)
            n[(c + 64 >>> 9 << 4) + 15] = (e << 8 | e >>> 24) & 16711935 | (e << 24 | e >>> 8) & 4278255360
            n[(c + 64 >>> 9 << 4) + 14] = (a << 8 | a >>> 24) & 16711935 | (a << 24 | a >>> 8) & 4278255360
            b.sigBytes = 4 * (n.length + 1)
            this._process()
            b = this._hash
            n = b.words
            for (a = 0; 4 > a; a++) {
                c = n[a],
                    n[a] = (c << 8 | c >>> 24) & 16711935 | (c << 24 | c >>> 8) & 4278255360
            }
            return b
        },
        clone: function () {
            var b = v.clone.call(this)
            b._hash = this._hash.clone()
            return b
        }
    })
    t.MD5 = v._createHelper(r)
    t.HmacMD5 = v._createHmacHelper(r)
})(Math);
(function () {
    var u = CryptoJS,
        p = u.lib,
        d = p.Base,
        l = p.WordArray,
        p = u.algo,
        s = p.EvpKDF = d.extend({
            cfg: d.extend({
                keySize: 4,
                hasher: p.MD5,
                iterations: 1
            }),
            init: function (d) {
                this.cfg = this.cfg.extend(d)
            },
            compute: function (d, r) {
                for (var p = this.cfg, s = p.hasher.create(), b = l.create(), u = b.words, q = p.keySize, p = p.iterations; u.length < q;) {
                    n && s.update(n)
                    var n = s.update(d).finalize(r)
                    s.reset()
                    for (var a = 1; a < p; a++) {
                        n = s.finalize(n),
                            s.reset()
                    }
                    b.concat(n)
                }
                b.sigBytes = 4 * q
                return b
            }
        })
    u.EvpKDF = function (d, l, p) {
        return s.create(p).compute(d, l)
    }
})()
CryptoJS.lib.Cipher || function (u) {
    var p = CryptoJS,
        d = p.lib,
        l = d.Base,
        s = d.WordArray,
        t = d.BufferedBlockAlgorithm,
        r = p.enc.Base64,
        w = p.algo.EvpKDF,
        v = d.Cipher = t.extend({
            cfg: l.extend(),
            createEncryptor: function (e, a) {
                return this.create(this._ENC_XFORM_MODE, e, a)
            },
            createDecryptor: function (e, a) {
                return this.create(this._DEC_XFORM_MODE, e, a)
            },
            init: function (e, a, b) {
                this.cfg = this.cfg.extend(b)
                this._xformMode = e
                this._key = a
                this.reset()
            },
            reset: function () {
                t.reset.call(this)
                this._doReset()
            },
            process: function (e) {
                this._append(e)
                return this._process()
            },
            finalize: function (e) {
                e && this._append(e)
                return this._doFinalize()
            },
            keySize: 4,
            ivSize: 4,
            _ENC_XFORM_MODE: 1,
            _DEC_XFORM_MODE: 2,
            _createHelper: function (e) {
                return {
                    encrypt: function (b, k, d) {
                        return ('string' == typeof k ? c : a).encrypt(e, b, k, d)
                    },
                    decrypt: function (b, k, d) {
                        return ('string' == typeof k ? c : a).decrypt(e, b, k, d)
                    }
                }
            }
        })
    d.StreamCipher = v.extend({
        _doFinalize: function () {
            return this._process(!0)
        },
        blockSize: 1
    })
    var b = p.mode = {},
        x = function (e, a, b) {
            var c = this._iv
            c ? this._iv = u : c = this._prevBlock
            for (var d = 0; d < b; d++) {
                e[a + d] ^= c[d]
            }
        },
        q = (d.BlockCipherMode = l.extend({
            createEncryptor: function (e, a) {
                return this.Encryptor.create(e, a)
            },
            createDecryptor: function (e, a) {
                return this.Decryptor.create(e, a)
            },
            init: function (e, a) {
                this._cipher = e
                this._iv = a
            }
        })).extend()
    q.Encryptor = q.extend({
        processBlock: function (e, a) {
            var b = this._cipher,
                c = b.blockSize
            x.call(this, e, a, c)
            b.encryptBlock(e, a)
            this._prevBlock = e.slice(a, a + c)
        }
    })
    q.Decryptor = q.extend({
        processBlock: function (e, a) {
            var b = this._cipher,
                c = b.blockSize,
                d = e.slice(a, a + c)
            b.decryptBlock(e, a)
            x.call(this, e, a, c)
            this._prevBlock = d
        }
    })
    b = b.CBC = q
    q = (p.pad = {}).Pkcs7 = {
        pad: function (a, b) {
            for (var c = 4 * b, c = c - a.sigBytes % c, d = c << 24 | c << 16 | c << 8 | c, l = [], n = 0; n < c; n += 4) {
                l.push(d)
            }
            c = s.create(l, c)
            a.concat(c)
        },
        unpad: function (a) {
            a.sigBytes -= a.words[a.sigBytes - 1 >>> 2] & 255
        }
    }
    d.BlockCipher = v.extend({
        cfg: v.cfg.extend({
            mode: b,
            padding: q
        }),
        reset: function () {
            v.reset.call(this)
            var a = this.cfg,
                b = a.iv,
                a = a.mode
            if (this._xformMode == this._ENC_XFORM_MODE) {
                var c = a.createEncryptor
            } else {
                c = a.createDecryptor,
                    this._minBufferSize = 1
            }
            this._mode = c.call(a, this, b && b.words)
        },
        _doProcessBlock: function (a, b) {
            this._mode.processBlock(a, b)
        },
        _doFinalize: function () {
            var a = this.cfg.padding
            if (this._xformMode == this._ENC_XFORM_MODE) {
                a.pad(this._data, this.blockSize)
                var b = this._process(!0)
            } else {
                b = this._process(!0),
                    a.unpad(b)
            }
            return b
        },
        blockSize: 4
    })
    var n = d.CipherParams = l.extend({
            init: function (a) {
                this.mixIn(a)
            },
            toString: function (a) {
                return (a || this.formatter).stringify(this)
            }
        }),
        b = (p.format = {}).OpenSSL = {
            stringify: function (a) {
                var b = a.ciphertext
                a = a.salt
                return (a ? s.create([1398893684,
                    1701076831]).concat(a).concat(b) : b).toString(r)
            },
            parse: function (a) {
                a = r.parse(a)
                var b = a.words
                if (1398893684 == b[0] && 1701076831 == b[1]) {
                    var c = s.create(b.slice(2, 4))
                    b.splice(0, 4)
                    a.sigBytes -= 16
                }
                return n.create({
                    ciphertext: a,
                    salt: c
                })
            }
        },
        a = d.SerializableCipher = l.extend({
            cfg: l.extend({
                format: b
            }),
            encrypt: function (a, b, c, d) {
                d = this.cfg.extend(d)
                var l = a.createEncryptor(c, d)
                b = l.finalize(b)
                l = l.cfg
                return n.create({
                    ciphertext: b,
                    key: c,
                    iv: l.iv,
                    algorithm: a,
                    mode: l.mode,
                    padding: l.padding,
                    blockSize: a.blockSize,
                    formatter: d.format
                })
            },
            decrypt: function (a, b, c, d) {
                d = this.cfg.extend(d)
                b = this._parse(b, d.format)
                return a.createDecryptor(c, d).finalize(b.ciphertext)
            },
            _parse: function (a, b) {
                return 'string' == typeof a ? b.parse(a, this) : a
            }
        }),
        p = (p.kdf = {}).OpenSSL = {
            execute: function (a, b, c, d) {
                d || (d = s.random(8))
                a = w.create({
                    keySize: b + c
                }).compute(a, d)
                c = s.create(a.words.slice(b), 4 * c)
                a.sigBytes = 4 * b
                return n.create({
                    key: a,
                    iv: c,
                    salt: d
                })
            }
        },
        c = d.PasswordBasedCipher = a.extend({
            cfg: a.cfg.extend({
                kdf: p
            }),
            encrypt: function (b, c, d, l) {
                l = this.cfg.extend(l)
                d = l.kdf.execute(d, b.keySize, b.ivSize)
                l.iv = d.iv
                b = a.encrypt.call(this, b, c, d.key, l)
                b.mixIn(d)
                return b
            },
            decrypt: function (b, c, d, l) {
                l = this.cfg.extend(l)
                c = this._parse(c, l.format)
                d = l.kdf.execute(d, b.keySize, b.ivSize, c.salt)
                l.iv = d.iv
                return a.decrypt.call(this, b, c, d.key, l)
            }
        })
}();
(function () {
    for (var u = CryptoJS, p = u.lib.BlockCipher, d = u.algo, l = [], s = [], t = [], r = [], w = [], v = [], b = [], x = [], q = [], n = [], a = [], c = 0; 256 > c; c++) {
        a[c] = 128 > c ? c << 1 : c << 1 ^ 283
    }
    for (var e = 0, j = 0, c = 0; 256 > c; c++) {
        var k = j ^ j << 1 ^ j << 2 ^ j << 3 ^ j << 4,
            k = k >>> 8 ^ k & 255 ^ 99
        l[e] = k
        s[k] = e
        var z = a[e],
            F = a[z],
            G = a[F],
            y = 257 * a[k] ^ 16843008 * k
        t[e] = y << 24 | y >>> 8
        r[e] = y << 16 | y >>> 16
        w[e] = y << 8 | y >>> 24
        v[e] = y
        y = 16843009 * G ^ 65537 * F ^ 257 * z ^ 16843008 * e
        b[k] = y << 24 | y >>> 8
        x[k] = y << 16 | y >>> 16
        q[k] = y << 8 | y >>> 24
        n[k] = y
        e ? (e = z ^ a[a[a[G ^ z]]], j ^= a[a[j]]) : e = j = 1
    }
    var H = [
            0,
            1,
            2,
            4,
            8,
            16,
            32,
            64,
            128,
            27,
            54
        ],
        d = d.AES = p.extend({
            _doReset: function () {
                for (var a = this._key, c = a.words, d = a.sigBytes / 4, a = 4 * ((this._nRounds = d + 6) + 1), e = this._keySchedule = [], j = 0; j < a; j++) {
                    if (j < d) {
                        e[j] = c[j]
                    } else {
                        var k = e[j - 1]
                        j % d ? 6 < d && 4 == j % d && (k = l[k >>> 24] << 24 | l[k >>> 16 & 255] << 16 | l[k >>> 8 & 255] << 8 | l[k & 255]) : (k = k << 8 | k >>> 24, k = l[k >>> 24] << 24 | l[k >>> 16 & 255] << 16 | l[k >>> 8 & 255] << 8 | l[k & 255], k ^= H[j / d | 0] << 24)
                        e[j] = e[j - d] ^ k
                    }
                }
                c = this._invKeySchedule = []
                for (d = 0; d < a; d++) {
                    j = a - d,
                        k = d % 4 ? e[j] : e[j - 4],
                        c[d] = 4 > d || 4 >= j ? k : b[l[k >>> 24]] ^ x[l[k >>> 16 & 255]] ^ q[l[k >>> 8 & 255]] ^ n[l[k & 255]]
                }
            },
            encryptBlock: function (a, b) {
                this._doCryptBlock(a, b, this._keySchedule, t, r, w, v, l)
            },
            decryptBlock: function (a, c) {
                var d = a[c + 1]
                a[c + 1] = a[c + 3]
                a[c + 3] = d
                this._doCryptBlock(a, c, this._invKeySchedule, b, x, q, n, s)
                d = a[c + 1]
                a[c + 1] = a[c + 3]
                a[c + 3] = d
            },
            _doCryptBlock: function (a, b, c, d, e, j, l, f) {
                for (var m = this._nRounds, g = a[b] ^ c[0], h = a[b + 1] ^ c[1], k = a[b + 2] ^ c[2], n = a[b + 3] ^ c[3], p = 4, r = 1; r < m; r++) {
                    var q = d[g >>> 24] ^ e[h >>> 16 & 255] ^ j[k >>> 8 & 255] ^ l[n & 255] ^ c[p++],
                        s = d[h >>> 24] ^ e[k >>> 16 & 255] ^ j[n >>> 8 & 255] ^ l[g & 255] ^ c[p++],
                        t = d[k >>> 24] ^ e[n >>> 16 & 255] ^ j[g >>> 8 & 255] ^ l[h & 255] ^ c[p++],
                        n = d[n >>> 24] ^ e[g >>> 16 & 255] ^ j[h >>> 8 & 255] ^ l[k & 255] ^ c[p++],
                        g = q,
                        h = s,
                        k = t
                }
                q = (f[g >>> 24] << 24 | f[h >>> 16 & 255] << 16 | f[k >>> 8 & 255] << 8 | f[n & 255]) ^ c[p++]
                s = (f[h >>> 24] << 24 | f[k >>> 16 & 255] << 16 | f[n >>> 8 & 255] << 8 | f[g & 255]) ^ c[p++]
                t = (f[k >>> 24] << 24 | f[n >>> 16 & 255] << 16 | f[g >>> 8 & 255] << 8 | f[h & 255]) ^ c[p++]
                n = (f[n >>> 24] << 24 | f[g >>> 16 & 255] << 16 | f[h >>> 8 & 255] << 8 | f[k & 255]) ^ c[p++]
                a[b] = q
                a[b + 1] = s
                a[b + 2] = t
                a[b + 3] = n
            },
            keySize: 8
        })
    u.AES = p._createHelper(d)
})()
CryptoJS.mode.ECB = function () {
    var a = CryptoJS.lib.BlockCipherMode.extend()
    a.Encryptor = a.extend({
        processBlock: function (a, b) {
            this._cipher.encryptBlock(a, b)
        }
    })
    a.Decryptor = a.extend({
        processBlock: function (a, b) {
            this._cipher.decryptBlock(a, b)
        }
    })
    return a
}()
var otpAjaxRequest
var otpContainerID = ''
var otpScriptNode
var otpLinkNode
var otpChildIndex = 0
var acwServiceURL = ''
if (typeof (otpInitSettings === 'undefined')) {
    var otpInitSettings = {
        otpWidgetVersion: '',
        otpIFrame: '',
        otpLanguagePreference: 'en-us',
        otpExpand: '',
        otpEncryptParams: '',
        otpEncryptKey: ''
    }
}

function showOTPWidget(pageCode, vipaaServer, divId, appToken, appIv) {
    var progressBarImgSrc = vipaaServer + '/pa/components/utilities/vipaa-otp-widget-client-util/1.1/graphic/processing-no-text.gif'
    var oTPInitUrl = vipaaServer
    if (typeof (appToken) === 'undefined') {
        oTPInitUrl = oTPInitUrl + '/login/authcode/authCodeInitialize.go?acw_page_id=' + pageCode + '&modal=true'
    } else {
        oTPInitUrl = oTPInitUrl + '/login/authcode/reentry/authCodeSafepassInitialize.go?acw_page_id=' + pageCode + '&acw_app_token=' + appToken + '&acw_iv=' + appIv + '&modal=true'
    }
    var spwChildIndex = 0
    var spwScriptNode
    var spwLinkNode
    var spwOtherNode
    if (typeof ($skwjq) === 'undefined') {
        $skwjq = $
    }
    otpContainerID = divId
    otpDivId = '#' + divId
    var containerTest = $skwjq(otpDivId)
    if (typeof (containerTest) != 'undefined' && containerTest.length > 0) {
        containerTest.empty()
    }
    if (typeof (otpAjaxRequest) != 'undefined') {
        otpAjaxRequest.abort()
    }
    $skwjq.ajax({
        url: oTPInitUrl,
        dataType: 'jsonp',
        type: 'GET',
        crossDomain: true,
        cache: false,
        timeout: 180000,
        beforeSend: function () {
            populateSKWOTPData()
            var acwContentNode = document.createElement('div')
            acwContentNode.id = 'acwContent'
            containerTest.append('<div id=\'imageProcessing\' aria-live=\'rude\'><span class=\'ada-hidden\'>Please wait, Loading verification widget</span><img src=\'' + progressBarImgSrc + '\' alt=\'Please wait, Loading verification widget...\' width=\'30px\' height=\'25px\'/></div>')
            $skwjq('#imageProcessing span').attr('tabindex', 0).focus()
            containerTest.append(acwContentNode)
        },
        error: function (XMLHTTPRequest, textStatus, errorThrown) {
            $skwjq(otpDivId).html(XMLHttpRequest.responseText + '<br />TextStatus: ' + textStatus + '<br />ErrorThrown: ' + errorThrown)
        },
        success: function (data) {
            var $spwFileList = $skwjq(data.htmlSource)
            $spwFileList.each(function () {
                var $spwFileName = $skwjq(this)
                if ($spwFileName.attr('src') != undefined && $spwFileName.attr('src').length > 0) {
                    spwScriptNode = document.createElement('script')
                    spwScriptNode.src = $spwFileName.attr('src')
                    spwScriptNode.type = 'text/javascript'
                    document.getElementById(otpContainerID).appendChild(spwScriptNode)
                } else {
                    if ($spwFileName.attr('type') == 'text/css') {
                        spwLinkNode = document.createElement('link')
                        spwLinkNode.href = $spwFileName.attr('href')
                        spwLinkNode.type = 'text/css'
                        spwLinkNode.rel = 'stylesheet'
                        spwLinkNode.media = 'all'
                        document.getElementById(otpContainerID).appendChild(spwLinkNode)
                    } else {
                        spwOtherNode = document.createElement('script')
                        spwOtherNode.type = 'text/javascript'
                        spwOtherNode.text = $spwFileName[0].innerHTML
                        containerTest.append(spwOtherNode)
                    }
                }
            })
            if (typeof ($skwjq('#acwContent')) === 'undefined') {
                var acwContentNode = document.createElement('div')
                acwContentNode.id = 'acwContent'
                document.getElementById(otpContainerID).appendChild(acwContentNode)
            }
            populateOTPData(data)
            $skwjq('#imageProcessing').remove()
        },
        complete: function (XMLHTTPRequest, textStatus) {
        }
    })

    function populateSKWOTPData() {
        if (typeof (skwInitSettings) !== 'undefined') {
            otpInitSettings.otpWidgetVersion = skwInitSettings.skwExpand
            otpInitSettings.otpLanguagePreference = skwInitSettings.skwLanguagePreference
            otpInitSettings.otpEncryptParams = true
            otpInitSettings.otpEncryptKey = skwInitSettings.skwEncryptKey
        }
    }

    function populateOTPData(data) {
        if (typeof (otpInitSettings) !== 'undefined') {
            otpInitSettings.otpEncryptParams = true
            otpInitSettings.otpEncryptKey = data.encryptKey
        }
    }
}

if (typeof Crypto == 'undefined' || !Crypto.util) {
    (function () {
        var n = window.Crypto = {},
            q = n.util = {
                rotl: function (f, j) {
                    return f << j | f >>> 32 - j
                },
                rotr: function (f, j) {
                    return f << 32 - j | f >>> j
                },
                endian: function (f) {
                    if (f.constructor == Number) {
                        return q.rotl(f, 8) & 16711935 | q.rotl(f, 24) & 4278255360
                    }
                    for (var j = 0; j < f.length; j++) {
                        f[j] = q.endian(f[j])
                    }
                    return f
                },
                randomBytes: function (f) {
                    for (var j = []; f > 0; f--) {
                        j.push(Math.floor(Math.random() * 256))
                    }
                    return j
                },
                bytesToWords: function (f) {
                    for (var j = [], b = 0, a = 0; b < f.length; b++, a += 8) {
                        j[a >>> 5] |= f[b] << 24 - a % 32
                    }
                    return j
                },
                wordsToBytes: function (f) {
                    for (var j = [], b = 0; b < f.length * 32; b += 8) {
                        j.push(f[b >>> 5] >>> 24 - b % 32 & 255)
                    }
                    return j
                },
                bytesToHex: function (f) {
                    for (var j = [], b = 0; b < f.length; b++) {
                        j.push((f[b] >>> 4).toString(16))
                        j.push((f[b] & 15).toString(16))
                    }
                    return j.join('')
                },
                hexToBytes: function (f) {
                    for (var j = [], b = 0; b < f.length; b += 2) {
                        j.push(parseInt(f.substr(b, 2), 16))
                    }
                    return j
                },
                bytesToBase64: function (f) {
                    if (typeof btoa == 'function') {
                        return btoa(p.bytesToString(f))
                    }
                    for (var j = [], b = 0; b < f.length; b += 3) {
                        for (var a = f[b] << 16 | f[b + 1] << 8 | f[b + 2], e = 0; e < 4; e++) {
                            b * 8 + e * 6 <= f.length * 8 ? j.push('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.charAt(a >>> 6 * (3 - e) & 63)) : j.push('=')
                        }
                    }
                    return j.join('')
                },
                base64ToBytes: function (f) {
                    if (typeof atob == 'function') {
                        return p.stringToBytes(atob(f))
                    }
                    f = f.replace(/[^A-Z0-9+\/]/gi, '')
                    for (var j = [], b = 0, a = 0; b < f.length; a = ++b % 4) {
                        a != 0 && j.push(('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.indexOf(f.charAt(b - 1)) & Math.pow(2, -2 * a + 8) - 1) << a * 2 | 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.indexOf(f.charAt(b)) >>> 6 - a * 2)
                    }
                    return j
                }
            }
        n = n.charenc = {}
        n.UTF8 = {
            stringToBytes: function (f) {
                return p.stringToBytes(unescape(encodeURIComponent(f)))
            },
            bytesToString: function (f) {
                return decodeURIComponent(escape(p.bytesToString(f)))
            }
        }
        var p = n.Binary = {
            stringToBytes: function (f) {
                for (var j = [], b = 0; b < f.length; b++) {
                    j.push(f.charCodeAt(b) & 255)
                }
                return j
            },
            bytesToString: function (f) {
                for (var j = [], b = 0; b < f.length; b++) {
                    j.push(String.fromCharCode(f[b]))
                }
                return j.join('')
            }
        }
    })()
}
(function () {
    var n = Crypto,
        q = n.util,
        p = n.charenc,
        f = p.UTF8,
        j = p.Binary,
        b = n.SHA1 = function (a, e) {
            var g = q.wordsToBytes(b._sha1(a))
            return e && e.asBytes ? g : e && e.asString ? j.bytesToString(g) : q.bytesToHex(g)
        }
    b._sha1 = function (a) {
        if (a.constructor == String) {
            a = f.stringToBytes(a)
        }
        var e = q.bytesToWords(a),
            g = a.length * 8
        a = []
        var k = 1732584193,
            l = -271733879,
            o = -1732584194,
            r = 271733878,
            x = -1009589776
        e[g >> 5] |= 128 << 24 - g % 32
        e[(g + 64 >>> 9 << 4) + 15] = g
        for (g = 0; g < e.length; g += 16) {
            for (var i = k, t = l, w = o, s = r, u = x, h = 0; h < 80; h++) {
                if (h < 16) {
                    a[h] = e[g + h]
                } else {
                    var m = a[h - 3] ^ a[h - 8] ^ a[h - 14] ^ a[h - 16]
                    a[h] = m << 1 | m >>> 31
                }
                m = (k << 5 | k >>> 27) + x + (a[h] >>> 0) + (h < 20 ? (l & o | ~l & r) + 1518500249 : h < 40 ? (l ^ o ^ r) + 1859775393 : h < 60 ? (l & o | l & r | o & r) - 1894007588 : (l ^ o ^ r) - 899497514)
                x = r
                r = o
                o = l << 30 | l >>> 2
                l = k
                k = m
            }
            k += i
            l += t
            o += w
            r += s
            x += u
        }
        return [k,
            l,
            o,
            r,
            x]
    }
    b._blocksize = 16
    b._digestsize = 20
})();
(function () {
    var n = Crypto,
        q = n.util,
        p = n.charenc,
        f = p.UTF8,
        j = p.Binary
    n.HMAC = function (b, a, e, g) {
        if (a.constructor == String) {
            a = f.stringToBytes(a)
        }
        if (e.constructor == String) {
            e = f.stringToBytes(e)
        }
        if (e.length > b._blocksize * 4) {
            e = b(e, {
                asBytes: true
            })
        }
        var k = e.slice(0)
        e = e.slice(0)
        for (var l = 0; l < b._blocksize * 4; l++) {
            k[l] ^= 92
            e[l] ^= 54
        }
        b = b(k.concat(b(e.concat(a), {
            asBytes: true
        })), {
            asBytes: true
        })
        return g && g.asBytes ? b : g && g.asString ? j.bytesToString(b) : q.bytesToHex(b)
    }
})();
(function () {
    var n = Crypto,
        q = n.util,
        p = n.charenc,
        f = p.UTF8,
        j = p.Binary
    n.PBKDF2 = function (b, a, e, g) {
        function k(u, h) {
            return n.HMAC(l, h, u, {
                asBytes: true
            })
        }

        if (b.constructor == String) {
            b = f.stringToBytes(b)
        }
        if (a.constructor == String) {
            a = f.stringToBytes(a)
        }
        for (var l = g && g.hasher || n.SHA1, o = g && g.iterations || 1, r = [], x = 1; r.length < e;) {
            for (var i = k(b, a.concat(q.wordsToBytes([x]))), t = i, w = 1; w < o; w++) {
                t = k(b, t)
                for (var s = 0; s < i.length; s++) {
                    i[s] ^= t[s]
                }
            }
            r = r.concat(i)
            x++
        }
        r.length = e
        return g && g.asBytes ? r : g && g.asString ? j.bytesToString(r) : q.bytesToHex(r)
    }
})();
(function (n) {
    function q(b, a) {
        var e = b._blocksize * 4
        return e - a.length % e
    }

    var p = n.pad = {},
        f = function (b) {
            for (var a = b.pop(), e = 1; e < a; e++) {
                b.pop()
            }
        }
    p.NoPadding = {
        pad: function () {
        },
        unpad: function () {
        }
    }
    p.ZeroPadding = {
        pad: function (b, a) {
            var e = b._blocksize * 4,
                g = a.length % e
            if (g != 0) {
                for (g = e - g; g > 0; g--) {
                    a.push(0)
                }
            }
        },
        unpad: function () {
        }
    }
    p.iso7816 = {
        pad: function (b, a) {
            var e = q(b, a)
            for (a.push(128); e > 1; e--) {
                a.push(0)
            }
        },
        unpad: function (b) {
            for (; b.pop() != 128;) {
            }
        }
    }
    p.ansix923 = {
        pad: function (b, a) {
            for (var e = q(b, a), g = 1; g < e; g++) {
                a.push(0)
            }
            a.push(e)
        },
        unpad: f
    }
    p.iso10126 = {
        pad: function (b, a) {
            for (var e = q(b, a), g = 1; g < e; g++) {
                a.push(Math.floor(Math.random() * 256))
            }
            a.push(e)
        },
        unpad: f
    }
    p.pkcs7 = {
        pad: function (b, a) {
            for (var e = q(b, a), g = 0; g < e; g++) {
                a.push(e)
            }
        },
        unpad: f
    }
    n = n.mode = {}
    var j = n.Mode = function (b) {
        if (b) {
            this._padding = b
        }
    }
    j.prototype = {
        encrypt: function (b, a, e) {
            this._padding.pad(b, a)
            this._doEncrypt(b, a, e)
        },
        decrypt: function (b, a, e) {
            this._doDecrypt(b, a, e)
            this._padding.unpad(a)
        },
        _padding: p.iso7816
    }
    f = (n.ECB = function () {
        j.apply(this, arguments)
    }).prototype = new j
    f._doEncrypt = function (b, a) {
        for (var e = b._blocksize * 4, g = 0; g < a.length; g += e) {
            b._encryptblock(a, g)
        }
    }
    f._doDecrypt = function (b, a) {
        for (var e = b._blocksize * 4, g = 0; g < a.length; g += e) {
            b._decryptblock(a, g)
        }
    }
    f.fixOptions = function (b) {
        b.iv = []
    }
    f = (n.CBC = function () {
        j.apply(this, arguments)
    }).prototype = new j
    f._doEncrypt = function (b, a, e) {
        for (var g = b._blocksize * 4, k = 0; k < a.length; k += g) {
            if (k == 0) {
                for (var l = 0; l < g; l++) {
                    a[l] ^= e[l]
                }
            } else {
                for (l = 0; l < g; l++) {
                    a[k + l] ^= a[k + l - g]
                }
            }
            b._encryptblock(a, k)
        }
    }
    f._doDecrypt = function (b, a, e) {
        for (var g = b._blocksize * 4, k = 0; k < a.length; k += g) {
            var l = a.slice(k, k + g)
            b._decryptblock(a, k)
            for (var o = 0; o < g; o++) {
                a[k + o] ^= e[o]
            }
            e = l
        }
    }
    f = (n.CFB = function () {
        j.apply(this, arguments)
    }).prototype = new j
    f._padding = p.NoPadding
    f._doEncrypt = function (b, a, e) {
        var g = b._blocksize * 4
        e = e.slice(0)
        for (var k = 0; k < a.length; k++) {
            var l = k % g
            l == 0 && b._encryptblock(e, 0)
            a[k] ^= e[l]
            e[l] = a[k]
        }
    }
    f._doDecrypt = function (b, a, e) {
        var g = b._blocksize * 4
        e = e.slice(0)
        for (var k = 0; k < a.length; k++) {
            var l = k % g
            l == 0 && b._encryptblock(e, 0)
            var o = a[k]
            a[k] ^= e[l]
            e[l] = o
        }
    }
    f = (n.OFB = function () {
        j.apply(this, arguments)
    }).prototype = new j
    f._padding = p.NoPadding
    f._doEncrypt = function (b, a, e) {
        var g = b._blocksize * 4
        e = e.slice(0)
        for (var k = 0; k < a.length; k++) {
            k % g == 0 && b._encryptblock(e, 0)
            a[k] ^= e[k % g]
        }
    }
    f._doDecrypt = f._doEncrypt
    n = (n.CTR = function () {
        j.apply(this, arguments)
    }).prototype = new j
    n._padding = p.NoPadding
    n._doEncrypt = function (b, a, e) {
        for (var g = b._blocksize * 4, k = 0; k < a.length;) {
            var l = e.slice(0)
            b._encryptblock(l, 0)
            for (var o = 0; k < a.length && o < g; o++, k++) {
                a[k] ^= l[o]
            }
            if (++e[g - 1] == 256) {
                e[g - 1] = 0
                if (++e[g - 2] == 256) {
                    e[g - 2] = 0
                    if (++e[g - 3] == 256) {
                        e[g - 3] = 0
                        ++e[g - 4]
                    }
                }
            }
        }
    }
    n._doDecrypt = n._doEncrypt
})(Crypto);
(function () {
    function n(h, m) {
        for (var d = 0, c = 0; c < 8; c++) {
            if (m & 1) {
                d ^= h
            }
            var v = h & 128
            h = h << 1 & 255
            if (v) {
                h ^= 27
            }
            m >>>= 1
        }
        return d
    }

    for (var q = Crypto, p = q.util, f = q.charenc.UTF8, j = [
        99,
        124,
        119,
        123,
        242,
        107,
        111,
        197,
        48,
        1,
        103,
        43,
        254,
        215,
        171,
        118,
        202,
        130,
        201,
        125,
        250,
        89,
        71,
        240,
        173,
        212,
        162,
        175,
        156,
        164,
        114,
        192,
        183,
        253,
        147,
        38,
        54,
        63,
        247,
        204,
        52,
        165,
        229,
        241,
        113,
        216,
        49,
        21,
        4,
        199,
        35,
        195,
        24,
        150,
        5,
        154,
        7,
        18,
        128,
        226,
        235,
        39,
        178,
        117,
        9,
        131,
        44,
        26,
        27,
        110,
        90,
        160,
        82,
        59,
        214,
        179,
        41,
        227,
        47,
        132,
        83,
        209,
        0,
        237,
        32,
        252,
        177,
        91,
        106,
        203,
        190,
        57,
        74,
        76,
        88,
        207,
        208,
        239,
        170,
        251,
        67,
        77,
        51,
        133,
        69,
        249,
        2,
        127,
        80,
        60,
        159,
        168,
        81,
        163,
        64,
        143,
        146,
        157,
        56,
        245,
        188,
        182,
        218,
        33,
        16,
        255,
        243,
        210,
        205,
        12,
        19,
        236,
        95,
        151,
        68,
        23,
        196,
        167,
        126,
        61,
        100,
        93,
        25,
        115,
        96,
        129,
        79,
        220,
        34,
        42,
        144,
        136,
        70,
        238,
        184,
        20,
        222,
        94,
        11,
        219,
        224,
        50,
        58,
        10,
        73,
        6,
        36,
        92,
        194,
        211,
        172,
        98,
        145,
        149,
        228,
        121,
        231,
        200,
        55,
        109,
        141,
        213,
        78,
        169,
        108,
        86,
        244,
        234,
        101,
        122,
        174,
        8,
        186,
        120,
        37,
        46,
        28,
        166,
        180,
        198,
        232,
        221,
        116,
        31,
        75,
        189,
        139,
        138,
        112,
        62,
        181,
        102,
        72,
        3,
        246,
        14,
        97,
        53,
        87,
        185,
        134,
        193,
        29,
        158,
        225,
        248,
        152,
        17,
        105,
        217,
        142,
        148,
        155,
        30,
        135,
        233,
        206,
        85,
        40,
        223,
        140,
        161,
        137,
        13,
        191,
        230,
        66,
        104,
        65,
        153,
        45,
        15,
        176,
        84,
        187,
        22
    ], b = [], a = 0; a < 256; a++) {
        b[j[a]] = a
    }
    var e = [],
        g = [],
        k = [],
        l = [],
        o = [],
        r = []
    for (a = 0; a < 256; a++) {
        e[a] = n(a, 2)
        g[a] = n(a, 3)
        k[a] = n(a, 9)
        l[a] = n(a, 11)
        o[a] = n(a, 13)
        r[a] = n(a, 14)
    }
    var x = [
            0,
            1,
            2,
            4,
            8,
            16,
            32,
            64,
            128,
            27,
            54
        ],
        i = [
            [],
            [],
            [],
            []
        ],
        t,
        w,
        s,
        u = q.AES = {
            encrypt: function (h, m, d) {
                d = d || {}
                var c = d.mode || new q.mode.OFB
                c.fixOptions && c.fixOptions(d)
                h = h.constructor == String ? f.stringToBytes(h) : h
                var v = d.iv || p.randomBytes(u._blocksize * 4)
                m = m.constructor == String ? q.PBKDF2(m, v, 32, {
                    asBytes: true
                }) : m
                u._init(m)
                c.encrypt(u, h, v)
                h = d.iv ? h : v.concat(h)
                return d && d.asBytes ? h : p.bytesToBase64(h)
            },
            decrypt: function (h, m, d) {
                d = d || {}
                var c = d.mode || new q.mode.OFB
                c.fixOptions && c.fixOptions(d)
                h = h.constructor == String ? p.base64ToBytes(h) : h
                var v = d.iv || h.splice(0, u._blocksize * 4)
                m = m.constructor == String ? q.PBKDF2(m, v, 32, {
                    asBytes: true
                }) : m
                u._init(m)
                c.decrypt(u, h, v)
                return d && d.asBytes ? h : f.bytesToString(h)
            },
            _blocksize: 4,
            _encryptblock: function (h, m) {
                for (var d = 0; d < u._blocksize; d++) {
                    for (var c = 0; c < 4; c++) {
                        i[d][c] = h[m + c * 4 + d]
                    }
                }
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] ^= s[c][d]
                    }
                }
                for (var v = 1; v < w; v++) {
                    for (d = 0; d < 4; d++) {
                        for (c = 0; c < 4; c++) {
                            i[d][c] = j[i[d][c]]
                        }
                    }
                    i[1].push(i[1].shift())
                    i[2].push(i[2].shift())
                    i[2].push(i[2].shift())
                    i[3].unshift(i[3].pop())
                    for (c = 0; c < 4; c++) {
                        d = i[0][c]
                        var y = i[1][c],
                            z = i[2][c],
                            A = i[3][c]
                        i[0][c] = e[d] ^ g[y] ^ z ^ A
                        i[1][c] = d ^ e[y] ^ g[z] ^ A
                        i[2][c] = d ^ y ^ e[z] ^ g[A]
                        i[3][c] = g[d] ^ y ^ z ^ e[A]
                    }
                    for (d = 0; d < 4; d++) {
                        for (c = 0; c < 4; c++) {
                            i[d][c] ^= s[v * 4 + c][d]
                        }
                    }
                }
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] = j[i[d][c]]
                    }
                }
                i[1].push(i[1].shift())
                i[2].push(i[2].shift())
                i[2].push(i[2].shift())
                i[3].unshift(i[3].pop())
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] ^= s[w * 4 + c][d]
                    }
                }
                for (d = 0; d < u._blocksize; d++) {
                    for (c = 0; c < 4; c++) {
                        h[m + c * 4 + d] = i[d][c]
                    }
                }
            },
            _decryptblock: function (h, m) {
                for (var d = 0; d < u._blocksize; d++) {
                    for (var c = 0; c < 4; c++) {
                        i[d][c] = h[m + c * 4 + d]
                    }
                }
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] ^= s[w * 4 + c][d]
                    }
                }
                for (var v = 1; v < w; v++) {
                    i[1].unshift(i[1].pop())
                    i[2].push(i[2].shift())
                    i[2].push(i[2].shift())
                    i[3].push(i[3].shift())
                    for (d = 0; d < 4; d++) {
                        for (c = 0; c < 4; c++) {
                            i[d][c] = b[i[d][c]]
                        }
                    }
                    for (d = 0; d < 4; d++) {
                        for (c = 0; c < 4; c++) {
                            i[d][c] ^= s[(w - v) * 4 + c][d]
                        }
                    }
                    for (c = 0; c < 4; c++) {
                        d = i[0][c]
                        var y = i[1][c],
                            z = i[2][c],
                            A = i[3][c]
                        i[0][c] = r[d] ^ l[y] ^ o[z] ^ k[A]
                        i[1][c] = k[d] ^ r[y] ^ l[z] ^ o[A]
                        i[2][c] = o[d] ^ k[y] ^ r[z] ^ l[A]
                        i[3][c] = l[d] ^ o[y] ^ k[z] ^ r[A]
                    }
                }
                i[1].unshift(i[1].pop())
                i[2].push(i[2].shift())
                i[2].push(i[2].shift())
                i[3].push(i[3].shift())
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] = b[i[d][c]]
                    }
                }
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] ^= s[c][d]
                    }
                }
                for (d = 0; d < u._blocksize; d++) {
                    for (c = 0; c < 4; c++) {
                        h[m + c * 4 + d] = i[d][c]
                    }
                }
            },
            _init: function (h) {
                t = h.length / 4
                w = t + 6
                u._keyexpansion(h)
            },
            _keyexpansion: function (h) {
                s = []
                for (var m = 0; m < t; m++) {
                    s[m] = [
                        h[m * 4],
                        h[m * 4 + 1],
                        h[m * 4 + 2],
                        h[m * 4 + 3]
                    ]
                }
                for (m = t; m < u._blocksize * (w + 1); m++) {
                    h = [
                        s[m - 1][0],
                        s[m - 1][1],
                        s[m - 1][2],
                        s[m - 1][3]
                    ]
                    if (m % t == 0) {
                        h.push(h.shift())
                        h[0] = j[h[0]]
                        h[1] = j[h[1]]
                        h[2] = j[h[2]]
                        h[3] = j[h[3]]
                        h[0] ^= x[m / t]
                    } else {
                        if (t > 6 && m % t == 4) {
                            h[0] = j[h[0]]
                            h[1] = j[h[1]]
                            h[2] = j[h[2]]
                            h[3] = j[h[3]]
                        }
                    }
                    s[m] = [
                        s[m - t][0] ^ h[0],
                        s[m - t][1] ^ h[1],
                        s[m - t][2] ^ h[2],
                        s[m - t][3] ^ h[3]
                    ]
                }
            }
        }
})()
PM_FP_BrowserDetect.init()

function getBrowserType() {
    return PM_FP_BrowserDetect.browser
}

function addPassMarkFlash2(swfSrc, action, fsoToken, postURLEnc, gotoUrlEnc) {
    if (swfSrc !== '' && DetectFlashVer(6, 0, 0)) {
        var out = ''
        if (action === 'read') {
            out = out + '<object classid=\'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\'\n'
            out = out + 'width=\'1\' height=\'1\'>\n'
            out = out + '<param name=\'movie\' value=\'' + swfSrc + '\'>\n'
            out = out + '<param name=\'quality\' value=\'high\'>\n'
            out = out + '<param name=\'bgcolor\' value=\'#FFFFFF\'>\n'
            out = out + '<param name=\'allowScriptAccess\' value=\'sameDomain\'>\n'
            out = out + '<param name=\'FlashVars\' value=\'gotoUrl=' + gotoUrlEnc + '&sendUrl=' + postURLEnc + '&browserType=' + getBrowserType() + '\'>\n'
            out = out + '<embed id=\'skFlasher\' name=\'skFlasher\' src=\'' + swfSrc + '\'\n'
            out = out + 'FlashVars=\'gotoUrl=' + gotoUrlEnc + '&sendUrl=' + postURLEnc + '&browserType=' + getBrowserType() + '\'\n'
            out = out + 'quality=\'high\' bgcolor=\'#FFFFFF\' width=\'1\' height=\'1\'\n'
            out = out + 'allowScriptAccess=\'sameDomain\'\n'
            out = out + 'type=\'application/x-shockwave-flash\'>\n'
            out = out + '</embed>\n'
            out = out + '</object>\n'
        } else {
            if (fsoToken !== '' && action === 'write') {
                out = out + '<object classid=\'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\'\n'
                out = out + 'width=\'1\' height=\'1\'>\n'
                out = out + '<param name=\'movie\' value=\'' + swfSrc + '\'>\n'
                out = out + '<param name=\'quality\' value=\'high\'>\n'
                out = out + '<param name=\'bgcolor\' value=\'#FFFFFF\'>\n'
                out = out + '<param name=\'allowScriptAccess\' value=\'sameDomain\'>\n'
                out = out + '<param name=\'FlashVars\' value=\'pmdata=' + fsoToken + '&browserType=' + getBrowserType() + '\'>\n'
                out = out + '<embed src=\'' + swfSrc + '\'\n'
                out = out + 'FlashVars=\'pmdata=' + fsoToken + '&browserType=' + getBrowserType() + '\'\n'
                out = out + 'quality=\'low\' bgcolor=\'#FFFFFF\' width=\'1\' height=\'1\'\n'
                out = out + 'allowScriptAccess=\'sameDomain\'\n'
                out = out + 'type=\'application/x-shockwave-flash\'>\n'
                out = out + '</embed>\n'
                out = out + '</object>\n'
            }
        }
        if (typeof ($skwjq) !== 'undefined' && typeof ($skwjq) !== undefined) {
            $skwjq('#pass-mark-flash').html(out)
        } else {
            out = out.replace('\n', '')
            var htmlObj = document.getElementById('pass-mark-flash')
            if (htmlObj !== 'undefined' && htmlObj !== undefined && htmlObj !== null) {
                htmlObj.innerHTML = out
            } else {
                document.write(out)
            }
        }
    }
}

var isIE = (navigator.appVersion.indexOf('MSIE') != -1) ? true : false
var isWin = (navigator.appVersion.toLowerCase().indexOf('win') != -1) ? true : false
var isOpera = (navigator.userAgent.indexOf('Opera') != -1) ? true : false

function ControlVersion() {
    var version
    var axo
    var e
    try {
        axo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash.7')
        version = axo.GetVariable('$version')
    } catch (e) {
    }
    if (!version) {
        try {
            axo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6')
            version = 'WIN 6,0,21,0'
            axo.AllowScriptAccess = 'sameDomain'
            version = axo.GetVariable('$version')
        } catch (e) {
        }
    }
    if (!version) {
        try {
            axo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash.3')
            version = axo.GetVariable('$version')
        } catch (e) {
        }
    }
    if (!version) {
        try {
            axo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash.3')
            version = 'WIN 3,0,18,0'
        } catch (e) {
        }
    }
    if (!version) {
        try {
            axo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash')
            version = 'WIN 2,0,0,11'
        } catch (e) {
            version = -1
        }
    }
    return version
}

function GetSwfVer() {
    var flashVer = -1
    if (navigator.plugins != null && navigator.plugins.length > 0) {
        if (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']) {
            var swVer2 = navigator.plugins['Shockwave Flash 2.0'] ? ' 2.0' : ''
            var flashDescription = navigator.plugins['Shockwave Flash' + swVer2].description
            var descArray = flashDescription.split(' ')
            var tempArrayMajor = descArray[2].split('.')
            var versionMajor = tempArrayMajor[0]
            var versionMinor = tempArrayMajor[1]
            if (descArray[3] != '') {
                tempArrayMinor = descArray[3].split('r')
            } else {
                tempArrayMinor = descArray[4].split('r')
            }
            var versionRevision = tempArrayMinor[1] > 0 ? tempArrayMinor[1] : 0
            var flashVer = versionMajor + '.' + versionMinor + '.' + versionRevision
        }
    } else {
        if (navigator.userAgent.toLowerCase().indexOf('webtv/2.6') != -1) {
            flashVer = 4
        } else {
            if (navigator.userAgent.toLowerCase().indexOf('webtv/2.5') != -1) {
                flashVer = 3
            } else {
                if (navigator.userAgent.toLowerCase().indexOf('webtv') != -1) {
                    flashVer = 2
                } else {
                    if (isIE && isWin && !isOpera) {
                        flashVer = ControlVersion()
                    }
                }
            }
        }
    }
    return flashVer
}

function DetectFlashVer(reqMajorVer, reqMinorVer, reqRevision) {
    versionStr = GetSwfVer()
    if (versionStr == -1) {
        return false
    } else {
        if (versionStr != 0) {
            if (isIE && isWin && !isOpera) {
                tempArray = versionStr.split(' ')
                tempString = tempArray[1]
                versionArray = tempString.split(',')
            } else {
                versionArray = versionStr.split('.')
            }
            var versionMajor = versionArray[0]
            var versionMinor = versionArray[1]
            var versionRevision = versionArray[2]
            if (versionMajor > parseFloat(reqMajorVer)) {
                return true
            } else {
                if (versionMajor == parseFloat(reqMajorVer)) {
                    if (versionMinor > parseFloat(reqMinorVer)) {
                        return true
                    } else {
                        if (versionMinor == parseFloat(reqMinorVer)) {
                            if (versionRevision >= parseFloat(reqRevision)) {
                                return true
                            }
                        }
                    }
                }
            }
            return false
        }
    }
}

function AC_AddExtension(src, ext) {
    if (src.indexOf('?') != -1) {
        return src.replace(/\?/, ext + '?')
    } else {
        return src + ext
    }
}

function AC_Generateobj(objAttrs, params, embedAttrs) {
    var str = ''
    if (isIE && isWin && !isOpera) {
        str += '<object '
        for (var i in objAttrs) {
            str += i + '="' + objAttrs[i] + '" '
        }
        str += '>'
        for (var i in params) {
            str += '<param name="' + i + '" value="' + params[i] + '" /> '
        }
        str += '</object>'
    } else {
        str += '<embed '
        for (var i in embedAttrs) {
            str += i + '="' + embedAttrs[i] + '" '
        }
        str += '> </embed>'
    }
    if (document.getElementById('safepassWidget') != null) {
        document.getElementById('safepassWidget').innerHTML = str
    } else {
        document.write(str)
    }
}

function AC_FL_RunContent() {
    var ret = AC_GetArgs(arguments, '.swf', 'movie', 'clsid:d27cdb6e-ae6d-11cf-96b8-444553540000', 'application/x-shockwave-flash')
    AC_Generateobj(ret.objAttrs, ret.params, ret.embedAttrs)
}

function AC_GetArgs(args, ext, srcParamName, classid, mimeType) {
    var ret = new Object()
    ret.embedAttrs = new Object()
    ret.params = new Object()
    ret.objAttrs = new Object()
    for (var i = 0; i < args.length; i = i + 2) {
        var currArg = args[i].toLowerCase()
        switch (currArg) {
            case 'classid':
                break
            case 'pluginspage':
                ret.embedAttrs[args[i]] = args[i + 1]
                break
            case 'src':
            case 'movie':
                args[i + 1] = AC_AddExtension(args[i + 1], ext)
                ret.embedAttrs.src = args[i + 1]
                ret.params[srcParamName] = args[i + 1]
                break
            case 'onafterupdate':
            case 'onbeforeupdate':
            case 'onblur':
            case 'oncellchange':
            case 'onclick':
            case 'ondblClick':
            case 'ondrag':
            case 'ondragend':
            case 'ondragenter':
            case 'ondragleave':
            case 'ondragover':
            case 'ondrop':
            case 'onfinish':
            case 'onfocus':
            case 'onhelp':
            case 'onmousedown':
            case 'onmouseup':
            case 'onmouseover':
            case 'onmousemove':
            case 'onmouseout':
            case 'onkeypress':
            case 'onkeydown':
            case 'onkeyup':
            case 'onload':
            case 'onlosecapture':
            case 'onpropertychange':
            case 'onreadystatechange':
            case 'onrowsdelete':
            case 'onrowenter':
            case 'onrowexit':
            case 'onrowsinserted':
            case 'onstart':
            case 'onscroll':
            case 'onbeforeeditfocus':
            case 'onactivate':
            case 'onbeforedeactivate':
            case 'ondeactivate':
            case 'type':
            case 'codebase':
            case 'id':
                ret.objAttrs[args[i]] = args[i + 1]
                break
            case 'width':
            case 'height':
            case 'align':
            case 'vspace':
            case 'hspace':
            case 'class':
            case 'title':
            case 'accesskey':
            case 'name':
            case 'tabindex':
                ret.embedAttrs[args[i]] = ret.objAttrs[args[i]] = args[i + 1]
                break
            default:
                ret.embedAttrs[args[i]] = ret.params[args[i]] = args[i + 1]
        }
    }
    ret.objAttrs.classid = classid
    if (mimeType) {
        ret.embedAttrs.type = mimeType
    }
    return ret
}

function isBrowserIE() {
    if (navigator.userAgent.indexOf('MSIE') != -1) {
        return true
    }
    return false
}

function isBrowserOpera() {
    if (navigator.userAgent.indexOf('Opera') != -1) {
        return true
    }
    return false
}

function getVersionString(versionPosition) {
    var versionString = ''
    if (isBrowserOpera()) {
        var endPosition = navigator.userAgent.indexOf('(')
        if (endPosition < 0) {
            return versionString
        }
        versionString = navigator.userAgent.substring(versionPosition + 1, endPosition - 1)
    } else {
        if (isBrowserIE()) {
            var startIndex = navigator.userAgent.indexOf('MSIE') + 5
            var restOfString = navigator.userAgent.substring(startIndex)
            var stopIndex = startIndex + restOfString.indexOf(';')
            versionString = navigator.userAgent.substring(startIndex, stopIndex)
        } else {
            versionString = navigator.userAgent.substring(versionPosition + 1)
        }
    }
    return versionString
}

function isExternalInterfaceCompatible(theVersionMajor, theVersionMinor) {
    if (navigator.userAgent.toLowerCase().indexOf('firefox') != -1) {
        return true
    } else {
        if (navigator.userAgent.toLowerCase().indexOf('opera') != -1) {
            if (theVersionMajor > 8) {
                if (theVersionMajor < 10) {
                    if (theVersionMinor > 0) {
                        return true
                    }
                } else {
                    return true
                }
            }
        } else {
            if (navigator.userAgent.toLowerCase().indexOf('msie') != -1) {
                if (theVersionMajor > 5) {
                    return true
                }
            } else {
                if (navigator.userAgent.toLowerCase().indexOf('netscape') != -1) {
                    if (theVersionMajor > 7) {
                        return true
                    }
                } else {
                    if (navigator.userAgent.toLowerCase().indexOf('safari') != -1) {
                        if (theVersionMajor > 400) {
                            return true
                        }
                    }
                }
            }
        }
    }
    alert(navigator.userAgent.toLowerCase() + ': ' + theVersionMajor)
    return false
}

function isWidgetCompatible() {
    var versionPosition = navigator.userAgent.lastIndexOf('/')
    if (versionPosition < 0) {
        return false
    }
    var versionString = getVersionString(versionPosition)
    if (isNaN(parseFloat(versionString))) {
        return false
    }
    var theVersionArray = versionString.split('.')
    if (theVersionArray.length < 1) {
        return false
    }
    var theVersionMajor = theVersionArray[0]
    var theVersionMinor
    if (theVersionArray.length > 1) {
        theVersionMinor = theVersionArray[1]
    }
    return isExternalInterfaceCompatible(theVersionMajor, theVersionMinor)
}

function isSitekeyWidgetCompatible() {
    return isWidgetCompatible()
}

var spwSafePassNonFlashUrl = ''
var spwPageCode = ''
var spwFormName = ''
var spwDeviceIndex = '-1'
var spwExpand = ''
var spwDivId = ''
var spwProgressBarEachPercent = (240 / 2) / 100
var spwContainerID = ''
var spwScriptNode
var spwLinkNode

function showNonFlashWidget(pageCode, formName, deviceIndex, vipaaServer, expand, divId) {
    var progressBarImgSrc = vipaaServer + '/pa/components/utilities/safepass-widget-html-util/1.8/graphic/progress-bar.png'
    spwSafePassNonFlashUrl = vipaaServer + '/login/sign-in/safePassNonFlashWidget.go?safePassNonFlashEnabled=true'
    var safePassInitUrl = vipaaServer + '/login/sign-in/safepassInitScreen.go'
    spwPageCode = pageCode
    spwFormName = formName
    spwDeviceIndex = deviceIndex
    spwExpand = expand
    spwDivId = divId
    if (typeof ($skwjq) === 'undefined') {
        $skwjq = $
    }
    if (spwDivId === undefined) {
        spwDivId = '#safepassNonFlashwidget'
        spwContainerID = 'safepassNonFlashwidget'
    } else {
        spwContainerID = spwDivId
        spwDivId = '#' + spwDivId
    }
    $skwjq(spwDivId).html('')
    $skwjq(spwDivId).prepend('<div id="spw-progress-bar" role="region" aria-live="rude" tabindex="0"><span style="margin-right:20px">SafePass Loading</span><img id="spw-progress-bar-img" src="' + progressBarImgSrc + '" alt="" style="background-position: -120px 0px;"/><span id="spw-progress-bar-img-text">0%</span></div>')
    $skwjq.ajax({
        async: (typeof (spwAsynchAll) !== 'undefined' ? spwAsynchAll : false),
        url: safePassInitUrl,
        type: 'GET',
        dataType: 'jsonp',
        crossDomain: true,
        cache: false,
        timeout: 20000,
        beforeSend: function () {
        },
        error: function (XMLHTTPRequest, textStatus, errorThrown) {
            $skwjq(spwDivId).html(XMLHttpRequest.responseText + '<br />TextStatus: ' + textStatus + '<br />ErrorThrown: ' + errorThrown)
        },
        success: function (data) {
            if (self == top) {
                $skwjq(spwDivId).append(data.htmlSource)
            } else {
                var $spwFileList = $skwjq(data.htmlSource)
                $spwFileList.each(function () {
                    var $spwFileName = $skwjq(this)
                    if ($spwFileName.attr('src') != undefined) {
                        spwScriptNode = document.createElement('script')
                        spwScriptNode.src = $spwFileName.attr('src')
                        spwScriptNode.type = 'text/javascript'
                        document.getElementById(spwContainerID).appendChild(spwScriptNode)
                    } else {
                        if ($spwFileName.attr('type') == 'text/css') {
                            spwLinkNode = document.createElement('link')
                            spwLinkNode.href = $spwFileName.attr('href')
                            spwLinkNode.type = 'text/css'
                            spwLinkNode.rel = 'stylesheet'
                            spwLinkNode.media = 'all'
                            document.getElementById(spwContainerID).appendChild(spwLinkNode)
                        } else {
                            if ($spwFileName.attr('tagName') != undefined) {
                                $skwjq('#' + spwContainerID).append($spwFileName.clone().wrap('<p>').parent().html())
                            }
                        }
                    }
                })
            }
            if ($skwjq('#spw-progress-bar').length > 0) {
                spwProgressBar.setPercent(50)
            }
        },
        complete: function (XMLHTTPRequest, textStatus) {
            if ($skwjq('ul.safepass-tab li.sp-mobile').length > 0 && $skwjq('ul.safepass-tab li.sp-card').length > 0) {
                if ($skwjq('ul.safepass-tab li.sp-card:hidden').length > 0) {
                    $skwjq('ul.safepass-tab li.sp-mobile a').removeAttr('href')
                } else {
                    if ($skwjq('ul.safepass-tab li.sp-mobile:hidden').length > 0) {
                        $skwjq('ul.safepass-tab li.sp-card a').removeAttr('href')
                    }
                }
            }
        }
    })
}

var spwProgressBar = (function () {
    var id = '#spw-progress-bar-img'
    var addPercent = function (percent) {
        var currentWidth = $skwjq(id).css('background-position-x').split('px')
        var currentPercent = Math.floor(100 + (currentWidth[0] / spwProgressBarEachPercent)) + parseFloat(percent)
        var percentageWidth = spwProgressBarEachPercent * percent
        var actualWidth = parseFloat(currentWidth[0]) + parseFloat(percentageWidth)
        var newProgress = actualWidth + 'px'
        if (actualWidth >= 0 && percent < 100) {
            $skwjq(id).css('background-position', '1px 0')
            setPercentText(100)
        } else {
            $skwjq(id).css('background-position', (newProgress + ' 0'))
            setPercentText(currentPercent)
        }
    }
    var setPercentText = function (percent) {
        $skwjq(id + '-text').html(percent + '%')
    }
    return {
        goToPercent: function (percent) {
            var currentWidth = $skwjq(id).css('background-position-x').split('px')
            var startPercent = Math.ceil(100 + (currentWidth[0] / spwProgressBarEachPercent)) + 1
            var actualWidth = -120 + (spwProgressBarEachPercent * percent)
            if (startPercent <= percent && currentWidth[0] <= actualWidth) {
                addPercent(1)
                setTimeout('spwProgressBar.goToPercent(' + percent + ')', 10)
            }
        },
        setPercent: function (percent) {
            var percentageWidth = spwProgressBarEachPercent * percent
            var newProgress = -120 + parseFloat(percentageWidth) + 'px'
            if (percent == 100) {
                newProgress = '1px'
            }
            $skwjq(id).css('background-position', (newProgress + ' 0'))
            setPercentText(percent)
        }
    }
})()
var requiredMajorVersion = 9
var requiredMinorVersion = 0
var requiredRevision = 0
var src = ''
var width = '346'
var height = '165'
var application = 'widgetLoader'
var bgcolor = '#ffffff'

function showWidget(pageCode, formName, deviceIndex, gcslServer, loaderSrc) {
    src = loaderSrc + '?random=' + Math.random()
    var hasProductInstall = DetectFlashVer(6, 0, 65)
    var hasRequestedVersion = DetectFlashVer(requiredMajorVersion, requiredMinorVersion, requiredRevision)
    if ((deviceIndex == null) || (deviceIndex == 'undefined')) {
        deviceIndex = '0'
    }
    var user_locale1 = $('#user_locale').val()
    if (null != user_locale1 && user_locale1 != 'undefined' && user_locale1 == 'es-us') {
        var alternateContent = '<h2 class=title1>SafePass&trade;</h2><span class=text1>Esta funci&ograve;n requiere tener activado Javascript y tener una versi&ograve;n actualizada de Flash Player. Para realizar esta acci&ograve;n SafePass protegido, debe activar JavaScript en su navegador y / o <a href=https://www.adobe.com/go/getflash/>actualizar su reproductor Flash </a> la versi&ograve;n m&agrave;s reciente. A continuaci&ograve;n, tendr&agrave; que cerrar este navegador, abra una nueva ventana y acceder de nuevo.</span>'
    } else {
        var alternateContent = '<h2 class=title1>SafePass&trade;</h2><span class=text1> This feature requires you to have JavaScript enabled and have an updated Flash player. To perform this SafePass-protected action, you must turn on JavaScript in your browser settings and/or <a href=https://www.adobe.com/go/getflash/>update your Flash player</a> to the latest version. Then you will need to close this browser, open a new window, and sign in again. </span>'
    }
    if (hasProductInstall && !hasRequestedVersion) {
        document.getElementById('safepassWidget').innerHTML = alternateContent
    } else {
        if (hasRequestedVersion) {
            AC_FL_RunContent('src', src, 'width', width, 'height', height, 'align', 'middle', 'id', 'document.' + formName + '.' + application, 'quality', 'high', 'wmode', 'opaque', 'bgcolor', bgcolor, 'name', application, 'flashvars', 'page=' + pageCode + '&index=' + deviceIndex + '&gcslServer=' + gcslServer + '&widget=' + isWidgetCompatible(), 'allowScriptAccess', 'sameDomain', 'type', 'application/x-shockwave-flash', 'pluginspage', 'https://www.adobe.com/go/getflashplayer', 'codebase', 'https://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab', 'play', 'true', 'loop', 'false')
        } else {
            document.getElementById('safepassWidget').innerHTML = alternateContent
        }
    }
}

$(document).ready(function () {
    if ($('.buttons-module .row-rp-skin').length > 0) {
        $('a.button-blue, a.button-gray').bind('click', function (event) {
            if ($(this).hasClass('button-blue')) {
                $(this).removeClass('button-blue').addClass('button-inactive')
                document.genericButtonsForm.submit()
            } else {
                if ($(this).hasClass('button-gray')) {
                    $(this).removeClass('button-gray').addClass('button-inactive')
                    document.genericButtonsForm.submit()
                } else {
                    event.preventDefault()
                    return false
                }
            }
        })
    }
})
$(document).ready(function () {
    if ($('.buttons-module .row-skin').length > 0) {
        var $intuitVar = 'false'
        if (typeof intuitPayroll !== 'undefined') {
            $intuitVar = intuitPayroll
        }
        if ($intuitVar == 'true') {
            $('a[name="continue_to_payroll"], a[name="no-thanks"]').bind('click', function (event) {
                event.preventDefault()
                return false
            })
        } else {
            $('.buttons-module .row-skin .btn-bofa').click(function () {
                var $this = $(this)
                var $linktext = $.trim($this.text())
                var $ancname = $this.attr('name')
                if ($ancname == 'payrollUpgradeAcceptTnc') {
                    $.post('/adminenrollments/enroll/logBusinessEvent.go?', {
                        statusCode: 100,
                        options: 'ACTION=payrollUpgradeAcceptTnc',
                        reasonCode: 'Upgrade',
                        eventCode: 48084
                    })
                } else {
                    if ($ancname == 'businessToolsUpsell') {
                        $.post('/adminenrollments/enroll/logBusinessEvent.go?', {
                            statusCode: 500,
                            options: 'ACTION=businessToolsUpsell',
                            reasonCode: 'Cancel',
                            eventCode: 48084
                        })
                    } else {
                        if ($ancname == 'redirectToCustomerService') {
                            $.post('/adminenrollments/enroll/logBusinessEvent.go?', {
                                statusCode: 500,
                                options: 'ACTION=businessToolsUpsell',
                                reasonCode: 'Cancel',
                                eventCode: 48084
                            })
                        }
                    }
                }
            })
            $('a.btn-bofa-blue, a.graybtn').bind('click', function (event) {
                var rowskinlinknav = $(this).attr('href')
                if ($(this).hasClass('btn-bofa-blue')) {
                    $(this).removeClass('btn-bofa-blue').addClass('btn-disabled')
                    document.genericButtonsForm.submit()
                    window.location = rowskinlinknav
                } else {
                    if ($(this).hasClass('graybtn')) {
                        $(this).removeClass('graybtn').addClass('btn-disabled')
                        document.genericButtonsForm.submit()
                        window.location = rowskinlinknav
                    } else {
                        event.preventDefault()
                        return false
                    }
                }
            })
            $('a.button-blue, a.button-gray').bind('click', function (event) {
                var rowskinlinkednav = $(this).attr('href')
                if ($(this).hasClass('button-blue')) {
                    $(this).removeClass('button-blue').addClass('button-inactive')
                    document.forms.genericButtonsForm.submit()
                } else {
                    if ($(this).hasClass('button-gray')) {
                        $(this).removeClass('button-gray').addClass('button-inactive')
                        document.genericButtonsForm.submit()
                        window.location = rowskinlinkednav
                    } else {
                        event.preventDefault()
                        return false
                    }
                }
            })
        }
    }
})
$(document).ready(function () {
    $('.button-common', '.buttons-module .sasi-overlay-skin').on('click', function (e) {
        var $this = $(this)
        if ($this.closest('.sasi-overlay-module').size() == 1) {
            var $rel = $this.attr('rel'),
                $target = $this.attr('target')
            $relarr = $rel.split('?'),
                $url = $relarr[0],
                $vararr = [],
                $targetURL = '',
                $ajaxURL = ''
            if ($rel.toLowerCase().indexOf('gotoaction') != -1) {
                window.location.replace($rel)
            } else {
                if ($rel.toLowerCase().indexOf('targeturl') != -1) {
                    var $targetUrlStart = $rel.toLowerCase().indexOf('targeturl'),
                        $targetUrlEnd = $rel.indexOf('&', $targetUrlStart + 1)
                    $ajaxURL = $rel.substring(0, $targetUrlStart - 1) + $rel.substring($targetUrlEnd)
                    $targetURL = $rel.substring($targetUrlStart + 10, $rel.indexOf('&buttonClick'))
                } else {
                    $ajaxURL = $rel
                }
                e.preventDefault()
                if ($relarr.length > 1) {
                    $vararr = $relarr[1].split('&')
                }
                for (var i = 0; i < $vararr.length; i++) {
                    var $data = $vararr[i]
                    if ($.trim($data) !== '') {
                        var $valarr = $data.split('=')
                        $('#' + $valarr[0]).val($valarr[1])
                    }
                }
                if ($ajaxURL.length !== 0) {
                    $.post($ajaxURL)
                }
                var flag = true
                if ($this.hasClass('prnt')) {
                    var $layout = $('body').find('div[class$="layout"]').filter(function () {
                        return $(this).closest('.sasi-overlay-module').size() == 0
                    })
                    $layout.addClass('no-print')
                    $('div.buttons-module div.sasi-overlay-skin').addClass('no-print')
                    $('#oo_bar').addClass('no-print')
                    $('.ui-dialog-titlebar-close', '.dyna-content-skin').addClass('no-print')
                    $('.ui-widget-overlay').css('height', $('.modal-flex').height() + 125)
                    $('.ui-dialog-content').css('overflow', 'hidden')
                    window.print()
                    flag = false
                    setTimeout(function () {
                        $('#sasi-overlay-close,#oo_bar').removeClass('no-print')
                        sasiClosingTasks()
                        var $mainLayout = $('body').find('div[class$="layout"]').filter(function () {
                            return $(this).closest('.sasi-overlay-module').size() == 0
                        })
                        $mainLayout.removeClass('no-print')
                        $('.ui-widget-overlay').css('height', $(document).height())
                    }, 3000)
                }
                if ($.trim($targetURL) !== '') {
                    if ($target === '_blank') {
                        window.open($targetURL)
                    } else {
                        if ($target === '_self') {
                            var $form = $this.closest('form')
                            flag = false
                            $form.attr('action', $targetURL)
                            $form.submit()
                        }
                    }
                }
                if (flag) {
                    sasiClosingTasks()
                }
            }
        } else {
            e.preventDefault()
            var $rel = $this.attr('rel'),
                $formaction = ''
            if ($this.hasClass('prnt')) {
                $('div.buttons-module div.sasi-overlay-skin').addClass('no-print')
                window.print()
            }
            if ($rel.toLowerCase().indexOf('targeturl') != -1) {
                var $targetUrlStart = $rel.toLowerCase().indexOf('targeturl')
                window.open($rel.substring($targetUrlStart + 10, $rel.indexOf('&buttonClick')))
                $formaction = $rel.substring(0, $targetUrlStart - 1) + $rel.substring($rel.indexOf('&buttonClick'))
            } else {
                $formaction = $rel
            }
            var $form = $this.closest('form')
            var $vararr = $formaction.split('?'),
                $vars = []
            if ($vararr.length > 1) {
                $vars = $vararr[1].split('&')
            }
            for (var i = 0; i < $vars.length; i++) {
                var $data = $vars[i]
                if ($.trim($data) !== '') {
                    var $valarr = $data.split('=')
                    $('#' + $valarr[0]).val($valarr[1])
                }
            }
            $form.attr('action', $vararr[0])
            $form.submit()
        }
    })
})
window.boa = window.boa || {}
window.boa.feedback = window.boa.feedback || {}
window.boa.feedback.setup = function (message, language) {
    if (!OOo || !OOo.Ocode) {
        return false
    }
    var config = {
        bar: {
            caption: message
        },
        customVariables: {
            sid: OOo.readCookie('SID')
        },
        disableNoniOS: true,
        disableMobile: false
    }
    if (language === 'es-us') {
        config.referrerRewrite = {
            searchPattern: /:\/\//g,
            replacePattern: '://es-us.'
        }
    }
    window.oo_bar = new OOo.Ocode(config)
    setTimeout(function () {
        var feedbackAdaSpan = document.querySelector('#oo_bar div.ada-hidden')
        if (language === 'es-us' && typeof (feedbackAdaSpan) !== 'undefined' && feedbackAdaSpan !== null) {
            feedbackAdaSpan.innerHTML = 'Abrir tarjeta de comentarios en una nueva ventana'
        }
    }, 1000)
};
(function (b, a) {
    if (('disabled' === 'enabled') && (typeof define === 'function') && define.amd) {
        define([], a)
    } else {
        b.OOo = a()
    }
}(this, function () {
    window.OOo = {
        __detectBrowser: function (b) {
            var a = Object.prototype.toString.call(window.opera) === '[object Opera]',
                c = b.indexOf('MSIE ') > -1 || b.indexOf('Trident/') > -1,
                d = {
                    IE: !!c,
                    MSEdge: b.indexOf('Edge/') > -1,
                    Opera: a,
                    WebKit: b.indexOf('AppleWebKit/') > -1,
                    Chrome: b.indexOf('Chrome') > -1 && b.indexOf('Edge/') === -1,
                    Gecko: b.indexOf('Gecko') > -1 && b.indexOf('KHTML') === -1,
                    MobileSafari: /Apple.*Mobile.*Safari/.test(b),
                    iOs: b.indexOf('iPad') > -1 || b.indexOf('iPhone') > -1 || b.indexOf('iPod') > -1,
                    iOS67: b.search(/OS 6(.*)|7(.*) like Mac OS/i) > -1,
                    BlackBerry: b.indexOf('BlackBerry') > -1,
                    Fennec: b.indexOf('Fennec') > -1,
                    IEMobile: b.indexOf('IEMobile') > -1,
                    WindowsPhone: b.toLowerCase().indexOf('windows phone') > -1,
                    WindowsTablet: b.toLowerCase().indexOf('windows nt') > -1 && b.toLowerCase().indexOf('touch') > -1,
                    OperaMobile: b.search(/Opera (?:Mobi|Mini)/) > -1,
                    Kindle: b.search(/[ ](Kindle|Silk)/) > -1,
                    isChromeIOS: /crios/i.test(b),
                    ua: b,
                    Android: /Android/.test(b),
                    facebookWebview: /FBAV/.test(b),
                    googleWebview: /GSA/.test(b),
                    AndroidChromiumWebview: /Chrome\/.* Mobile/.test(b),
                    iOsWebview: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/.test(b)
                },
                e = false
            d.isMobile = (d.MobileSafari || d.BlackBerry || d.Fennec || d.IEMobile || d.OperaMobile || d.Kindle || d.iOs || d.Android || d.WindowsPhone || d.WindowsTablet || d.AndroidChromiumWebview || d.iOsWebview || d.facebookWebview || d.googleWebview)
            d.isMobileNonIOS = (d.isMobile && !d.iOs)
            return d
        }
    }
    OOo.Browser = OOo.__detectBrowser(navigator.userAgent)
    OOo.Cache = {}
    OOo.instanceCount = 0
    OOo.K = function () {
    }
    var E = E || OOo;
    (function () {
        function x(b) {
            return document.getElementById(b)
        }

        function y(b, a) {
            var c
            for (c in a) {
                if (a.hasOwnProperty(c)) {
                    b[c] = a[c]
                }
            }
            return b
        }

        function u(b, a, c, d) {
            if (b.addEventListener) {
                b.addEventListener(a, c, d)
            } else {
                if (b.attachEvent) {
                    b.attachEvent('on' + a, c)
                }
            }
        }

        function w(b, a, c, d) {
            if (b.removeEventListener) {
                b.removeEventListener(a, c, d)
            } else {
                if (b.detachEvent) {
                    b.detachEvent('on' + a, c)
                }
            }
        }

        function z(b) {
            var a = [],
                c
            for (c in b) {
                if (b.hasOwnProperty(c)) {
                    a.push(c + '=' + (encodeURIComponent(b[c]) || ''))
                }
            }
            return a.join('&')
        }

        function A(b) {
            var a = z(b.metrics),
                c = b.tealeafId + '|' + b.clickTalePID + '/' + b.clickTaleUID + '/' + b.clickTaleSID
            a += '&custom_var=' + OOo.createLegacyVars(b.legacyVariables, c)
            if (b.metrics.type === 'OnPage') {
                a += '|iframe'
            }
            if (b.asm) {
                a += '&asm=2'
            }
            a += '&_rev=2'
            if (b.customVariables) {
                a += '&customVars=' + encodeURIComponent(OOo.serialize(b.customVariables))
            }
            return a
        }

        function C(b, a) {
            var c = document,
                d = c.createElement('form'),
                e = c.createElement('input'),
                g = b.referrerRewrite
            b.metrics.referer = location.href
            if (g) {
                b.metrics.referer = OOo.referrerRewrite(g)
            }
            d.style.display = 'none'
            d.method = 'post'
            d.target = a || 'OnlineOpinion'
            d.action = b.onPageCard ? 'https://secure.opinionlab.com/ccc01/comment_card_json_4_0_b.asp?r=' + location.href : 'https://secure.opinionlab.com/ccc01/comment_card_d.asp'
            if (b.commentCardUrl) {
                d.action = b.commentCardUrl
                if (b.onPageCard) {
                    d.action += '?r=' + location.href
                }
            }
            e.name = 'params'
            e.value = A(b)
            d.appendChild(e)
            c.body.appendChild(d)
            return d
        }

        function B() {
            return {
                width: screen.width,
                height: screen.height,
                referer: location.href,
                prev: document.referrer,
                time1: (new Date()).getTime(),
                time2: null,
                currentURL: location.href,
                ocodeVersion: '5.9.9'
            }
        }

        function F(b) {
            var a = ''
            if (b && b.search('://') > -1) {
                var c = b.split('/')
                for (var d = 3; d < c.length; d++) {
                    a += '/'
                    a += c[d]
                }
            }
            return a
        }

        function G(b, a) {
            b = b || {}
            if (typeof b === 'string') {
                return a + '|' + b
            }
            return b.override ? b.vars : a + (b.vars ? '|' + b.vars : '')
        }

        function H(b, a) {
            if (!a) {
                a = location
            }
            if (typeof b === 'string') {
                return b
            }
            return b.searchPattern ? a.href.replace(b.searchPattern, b.replacePattern) : b.replacePattern
        }

        function T(b) {
            var a,
                c = false,
                d = document.getElementsByTagName('meta')
            if (d !== 'undefined') {
                for (a = 0; a < d.length; a += 1) {
                    if (d[a].getAttribute('name') === b) {
                        c = true
                    }
                }
            }
            return c
        }

        var I = (function () {
            if (navigator.appName === 'Microsoft Internet Explorer' && navigator.userAgent.search('MSIE 6') !== -1) {
                return true
            }
            var b = document.body,
                a,
                c
            if (document.createElement && b && b.appendChild && b.removeChild) {
                a = document.createElement('iframe')
                c = false
                a.setAttribute('name', 'oo_test')
                a.style.display = 'none'
                b.appendChild(a)
                c = !!!document.getElementsByName('oo_test') [0]
                b.removeChild(a)
                return c
            } else {
                return null
            }
        }())

        function J(b, a) {
            var c = b || window.event,
                d = OOo.$('oo_waypoint_content'),
                e = OOo.$('oo_waypoint_company_logo'),
                g = OOo.$('oo_waypoint_close_prompt'),
                h = c.target
            if (c.srcElement && !c.target) {
                h = c.srcElement
            }
            if (c.preventDefault && c.stopPropagation) {
                c.preventDefault()
                c.stopPropagation()
            } else {
                c.returnValue = false
            }
            if ((h !== d && !d.contains(h)) && (h !== e && !e.contains(h)) || (h.className === 'waypoint_icon' || h.className === 'waypoint_icon last')) {
                var f = OOo.$('oo_waypoint_container'),
                    l = f.parentNode
                l.removeChild(f)
            }
            if (a) {
                a.focus()
            }
        }

        function K() {
            var b = this.options
            var a = '<div id=\'oo_waypoint_prompt\' role=\'dialogue\' aria-describedby=\'oo_waypoint_message\'><div id=\'oo_waypoint_company_logo\'></div><div id=\'oo_waypoint_content\'><p id=\'oo_waypoint_message\'>Select a category</p><p id=\'waypoint_icons\'></p><p id=\'ol_waypoint_brand_logo\'><span aria-label=\'Powered by OpinionLab.\'></span></p></div><a id=\'oo_waypoint_close_prompt\' href=\'#\' aria-label=\'Close dialog\'><div class=\'screen_reader\'>Close dialogue</div><span aria-hidden=\'true\'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_waypoint_prompt #oo_waypoint_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->'
            if (typeof b.wpmarkup !== 'undefined') {
                a = b.wpmarkup
            }
            var c = OOo.$('oo_waypoint_prompt')
            if (c) {
                var d = OOo.$('oo_waypoint_container')
                this.showWaypoint(d)
                return
            }
            this.showWaypoint(a)
        }

        function L(d) {
            var e = document,
                g = 0,
                h = typeof d === 'string' ? e.createElement('div') : d,
                f = e.createElement('div'),
                l,
                j,
                m,
                i,
                k = this.options,
                o = k.categories,
                n,
                p,
                q = e.activeElement,
                t
            f.id = 'oo_waypoint_overlay'
            h.id = 'oo_waypoint_container'
            h.style.visibility = 'hidden'
            if (typeof d === 'string') {
                h.innerHTML = d
                e.body.appendChild(h)
            }
            h.appendChild(f)
            if (k.companyLogo && k.companySlogan) {
                l = new Image()
                l.src = k.companyLogo
                l.alt = k.companySlogan
                OOo.$('oo_waypoint_company_logo').appendChild(l)
                OOo.$('oo_waypoint_prompt').setAttribute('aria-label', k.companySlogan)
            }
            m = new Image()
            m.src = k.pathToAssets + 'oo_opinionlab_logo.png'
            m.alt = 'powered by OpinionLab'
            OOo.$('ol_waypoint_brand_logo').children[0].appendChild(m)
            n = OOo.$('oo_waypoint_close_prompt')
            for (var r in o) {
                if (o.hasOwnProperty(r)) {
                    var s = document.createElement('a'),
                        v = k.categories[r].icon,
                        D = k.categories[r].buttonText
                    s.className = 'waypoint_icon'
                    s.href = '#'
                    s.innerHTML = D + '<span class="screen_reader">This will open a new window</span>'
                    if (v && e.addEventListener) {
                        s.style.backgroundImage = 'url(' + k.pathToAssets + v + ')'
                    }
                    if (typeof k.categories[r].oCode === 'string') {
                        OOo.addEventListener(s, 'click', (function (c) {
                            return function (b) {
                                var a = b || window.event
                                window.open(k.categories[c].oCode, '_0', 'scrollbars=yes,location=yes,menubar=yes,resizable=yes')
                                OOo.hideWaypoint(a, q)
                            }
                        })(r), false)
                        s.onkeydown = (function (c) {
                            return function (b) {
                                var a = b || window.event
                                if (a.keyCode !== 13) {
                                    return
                                }
                                window.open(k.categories[c].oCode, '_0', 'scrollbars=yes,location=yes,menubar=yes,resizable=yes')
                                OOo.hideWaypoint(a, q)
                            }
                        })(r)
                    } else {
                        OOo.addEventListener(s, 'click', (function (c) {
                            return function (b) {
                                var a = b || window.event
                                OOo.Waypoint[c].show(a)
                                OOo.hideWaypoint(a, q)
                            }
                        })(r), false)
                        s.onkeydown = (function (c) {
                            return function (b) {
                                var a = b || window.event
                                if (a.keyCode !== 13) {
                                    return
                                }
                                OOo.Waypoint[c].show(a)
                                OOo.hideWaypoint(a, q)
                            }
                        })(r)
                    }
                    g++
                    OOo.$('waypoint_icons').appendChild(s)
                }
            }
            OOo.addEventListener(h, 'click', function (b) {
                var a = b || window.event
                OOo.hideWaypoint(a, q)
            }, false)
            i = OOo.$('waypoint_icons').children
            p = i[0]
            p.onkeydown = function (b) {
                var a = b || window.event
                if (a.keyCode === 9) {
                    if (a.shiftKey) {
                        n.focus()
                        return false
                    }
                }
            }
            n.onkeyup = function (b) {
                var a = b || window.event
                if (a.keyCode !== 13) {
                    return
                }
                OOo.hideWaypoint(a, q)
            }
            n.onkeydown = function (b) {
                var a = b || window.event
                if (a.keyCode === 9) {
                    if (!a.shiftKey) {
                        p.focus()
                        return false
                    }
                }
            }
            i[g - 1].className = 'waypoint_icon last'
            h.style.visibility = 'visible'
            h.style.display = 'block'
            f.className = 'no_loading'
            if (k.linkFocus === true) {
                p.focus()
            }
        }

        function M(b, a) {
            var c = b || window.event
            if (c.preventDefault && c.stopPropagation) {
                c.preventDefault()
                c.stopPropagation()
            } else {
                c.returnValue = false
            }
            OOo.$('oo_container').style.display = 'none'
            if (a) {
                a.focus()
            }
        }

        function N() {
            var b = '<div id=\'oo_invitation_prompt\' role=\'dialog\' aria-describedby=\'oo_invite_message\'><div id=\'oo_invitation_company_logo\'></div><div id=\'oo_invite_content\'><p id=\'oo_invite_message\'>After your visit, would you be willing to provide some quick feedback?<br /><br />(It will only take a minute)</p><p class=\'prompt_button\'><a href=\'#\' id=\'oo_launch_prompt\'>Yes<span class=\'screen_reader\'>This will open a new window</span></a></p><p class=\'prompt_button\'><a href=\'#\' id=\'oo_no_thanks\'>No Thanks</a></p><p id=\'ol_invitation_brand_logo\'><span aria-label=\'Powered by OpinionLab.\'></span></p></div><a id=\'oo_close_prompt\' href=\'#\' aria-label=\'Close dialog\'><div class=\'screen_reader\'>Close dialog</div><span aria-hidden=\'true\'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_invitation_prompt #oo_invite_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->'
            var a = this.options
            if (typeof a.inviteMarkup !== 'undefined') {
                b = a.inviteMarkup
            } else {
                if (typeof a.events.prompt.promptMarkup) {
                    b = a.events.prompt.promptMarkup
                }
            }
            var c = OOo.$('oo_invitation_prompt')
            if (c) {
                var d = OOo.$('oo_container')
                this.showPrompt(d)
                return
            }
            this.showPrompt(b)
        }

        function O(c, d) {
            var e = document,
                g = typeof c === 'string' ? e.createElement('div') : c,
                h = e.createElement('div'),
                f,
                l,
                j,
                m,
                i = this.options,
                k,
                o,
                n,
                p,
                q = e.activeElement
            h.id = 'oo_invitation_overlay'
            g.id = 'oo_container'
            g.style.visibility = 'hidden'
            if (typeof c === 'string') {
                g.innerHTML = c
                e.body.appendChild(g)
            }
            g.appendChild(h)
            k = OOo.$('oo_launch_prompt')
            o = OOo.$('oo_no_thanks')
            n = OOo.$('oo_close_prompt')
            p = OOo.$('oo_invitation_company_logo')
            if (i.companyLogo && i.companySlogan) {
                f = new Image()
                f.src = i.companyLogo
                f.alt = i.companySlogan
                p.appendChild(f)
                OOo.$('oo_invitation_prompt').setAttribute('aria-label', i.companySlogan)
            } else {
                if (i.events.prompt.companyLogo && i.events.prompt.companySlogan) {
                    f = new Image()
                    f.src = i.events.prompt.companyLogo
                    f.alt = i.events.prompt.companySlogan
                    p.appendChild(f)
                    OOo.$('oo_invitation_prompt').setAttribute('aria-label', i.events.prompt.companySlogan)
                }
            }
            j = new Image()
            j.src = i.pathToAssets + 'oo_opinionlab_logo.png'
            j.alt = 'powered by OpinionLab'
            OOo.$('ol_invitation_brand_logo').children[0].appendChild(j)
            if (i.callBacks) {
                if (typeof i.callBacks.prompt === 'function') {
                    i.callBacks.prompt()
                }
                if (typeof i.callBacks.yesClick === 'function') {
                    OOo.addEventListener(k, 'click', function () {
                        i.callBacks.yesClick()
                    }, false)
                }
                if (typeof i.callBacks.noClick === 'function') {
                    OOo.addEventListener(o, 'click', function () {
                        i.callBacks.noClick()
                    }, false)
                }
                if (typeof i.callBacks.closeClick === 'function') {
                    OOo.addEventListener(n, 'click', function () {
                        i.callBacks.closeClick()
                    }, false)
                }
            }
            OOo.addEventListener(k, 'click', d.bind(this), false)
            OOo.addEventListener(o, 'click', function (b) {
                var a = b || window.event
                OOo.hidePrompt(a, q)
            }, false)
            OOo.addEventListener(n, 'click', function (b) {
                var a = b || window.event
                OOo.hidePrompt(a, q)
            }, false)
            k.onkeyup = function (b) {
                var a = b || window.event
                if (a.keyCode !== 13) {
                    return
                }
                d.bind(this)
            }.bind(this)
            k.onkeydown = function (b) {
                var a = b || window.event
                if (a.keyCode === 9) {
                    if (a.shiftKey) {
                        n.focus()
                        return false
                    }
                }
            }
            o.onkeyup = function (b) {
                var a = b || window.event
                if (a.keyCode !== 13) {
                    return
                }
                OOo.hidePrompt(a, q)
            }
            n.onkeyup = function (b) {
                var a = b || window.event
                if (a.keyCode !== 13) {
                    return
                }
                OOo.hidePrompt(a, q)
            }
            n.onkeydown = function (b) {
                var a = b || window.event
                if (a.keyCode === 9) {
                    if (!a.shiftKey) {
                        k.focus()
                        return false
                    }
                }
            }
            g.style.visibility = 'visible'
            g.style.display = 'block'
            h.className = 'no_loading'
            q.blur()
            k.focus()
        }

        function P() {
            var b = '<div id=\'oo_entry_prompt\' role=\'dialog\' aria-describedby=\'oo_entry_message\'><div id=\'oo_entry_company_logo\'></div><div id=\'oo_entry_content\'><p id=\'oo_entry_message\'>After your visit, would you be willing to provide some quick feedback?<br /><br />(It will only take a minute)</p><p class=\'entry_prompt_button\'><a href=\'#\' id=\'oo_launch_entry_prompt\'>Yes<span class=\'screen_reader\'>This will open a new window</span></a></p><p class=\'entry_prompt_button\'><a href=\'#\' id=\'oo_entry_no_thanks\'>No Thanks</a></p><p id=\'ol_entry_brand_logo\'><span aria-label=\'Powered by OpinionLab.\'></span></p></div><a id=\'oo_entry_close_prompt\' href=\'#\' aria-label=\'Close dialog\'><div class=\'screen_reader\'>Close dialog</div><span aria-hidden=\'true\'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_entry_prompt #oo_entry_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->'
            var a = this.options
            if (typeof a.events.prompt.promptMarkup) {
                b = a.events.prompt.promptMarkup
            }
            var c = OOo.$('oo_entry_prompt')
            if (c) {
                var d = OOo.$('oo_container')
                this.showEntryPrompt(d)
                return
            }
            this.showEntryPrompt(b)
        }

        function Q(c, d) {
            var e = document,
                g = typeof c === 'string' ? e.createElement('div') : c,
                h = e.createElement('div'),
                f,
                l,
                j,
                m,
                i = this.options,
                k,
                o,
                n,
                p,
                q = e.activeElement
            h.id = 'oo_entry_overlay'
            g.id = 'oo_container'
            g.style.visibility = 'hidden'
            if (typeof c === 'string') {
                g.innerHTML = c
                e.body.appendChild(g)
            }
            g.appendChild(h)
            k = OOo.$('oo_launch_entry_prompt')
            o = OOo.$('oo_entry_no_thanks')
            n = OOo.$('oo_entry_close_prompt')
            p = OOo.$('oo_entry_company_logo')
            if (i.companyLogo && i.companySlogan) {
                f = new Image()
                f.src = i.companyLogo
                f.alt = i.companySlogan
                p.appendChild(f)
                OOo.$('oo_entry_prompt').setAttribute('aria-label', i.companySlogan)
            } else {
                if (i.events.prompt.companyLogo && i.events.prompt.companySlogan) {
                    f = new Image()
                    f.src = i.events.prompt.companyLogo
                    f.alt = i.events.prompt.companySlogan
                    p.appendChild(f)
                    OOo.$('oo_entry_prompt').setAttribute('aria-label', i.events.prompt.companySlogan)
                }
            }
            j = new Image()
            j.src = i.pathToAssets + 'oo_opinionlab_logo.png'
            j.alt = 'powered by OpinionLab'
            OOo.$('ol_entry_brand_logo').children[0].appendChild(j)
            OOo.addEventListener(k, 'click', d.bind(this), false)
            OOo.addEventListener(o, 'click', function (b) {
                var a = b || window.event
                OOo.hidePrompt(a, q)
            }, false)
            OOo.addEventListener(n, 'click', function (b) {
                var a = b || window.event
                OOo.hidePrompt(a, q)
            }, false)
            k.onkeyup = function (b) {
                var a = b || window.event
                if (a.keyCode !== 13) {
                    return
                }
                d.bind(this)
            }.bind(this)
            k.onkeydown = function (b) {
                var a = b || window.event
                if (a.keyCode === 9) {
                    if (a.shiftKey) {
                        n.focus()
                        return false
                    }
                }
            }
            o.onkeyup = function (b) {
                var a = b || window.event
                if (a.keyCode !== 13) {
                    return
                }
                OOo.hidePrompt(a, q)
            }
            n.onkeyup = function (b) {
                var a = b || window.event
                if (a.keyCode !== 13) {
                    return
                }
                OOo.hidePrompt(a, q)
            }
            n.onkeydown = function (b) {
                var a = b || window.event
                if (a.keyCode === 9) {
                    if (!a.shiftKey) {
                        k.focus()
                        return false
                    }
                }
            }
            g.style.visibility = 'visible'
            g.style.display = 'block'
            h.className = 'no_loading'
            q.blur()
            k.focus()
        }

        var R = function (b, a, c, d) {
            var e = 'width=' + c
            var g = 'height=' + d
            var h = window.open(b, a, e, g)
            var f = window.setInterval(function () {
                if (h.closed !== false) {
                    window.clearInterval(f)
                    OOo.oo_feedback.launchOOPopup()
                }
            }, 200)
        }
        var S = function () {
            return /MSIE\s/.test(navigator.userAgent) && parseFloat(navigator.appVersion.split('MSIE') [1]) < 10
        }
        y(OOo, {
            extend: y,
            toQueryString: z,
            addEventListener: u,
            $: x,
            appendOOForm: C,
            removeEventListener: w,
            createMetrics: B,
            truncateMetric: F,
            createLegacyVars: G,
            DYNAMIC_FRAME_NAME_IS_BUGGY: I,
            getFormParams: A,
            referrerRewrite: H,
            hidePrompt: M,
            getPrompt: N,
            showPrompt: O,
            hideWaypoint: J,
            getWaypoint: K,
            showWaypoint: L,
            getEntryPrompt: P,
            showEntryPrompt: Q,
            exitChat: R,
            checkIfIE9orBelow: S
        })
    }());
    (function () {
        function g(b) {
            if (!b) {
                return null
            }
            switch (typeof b) {
                case 'number':
                case 'boolean':
                case 'function':
                    return b
                case 'string':
                    return '"' + b + '"'
                case 'object':
                    var a,
                        c,
                        d,
                        e
                    if (b.constructor === Array || typeof b.callee !== 'undefined') {
                        a = '['
                        d = b.length
                        for (c = 0; c < d - 1; c += 1) {
                            a += g(b[c]) + ','
                        }
                        a += g(b[c]) + ']'
                    } else {
                        a = '{'
                        for (e in b) {
                            if (b.hasOwnProperty(e)) {
                                a += e + ':' + g(b[e]) + ','
                            }
                        }
                        a = a.replace(/\,$/, '') + '}'
                    }
                    return a
                default:
                    return null
            }
        }

        OOo.extend(OOo, {
            serialize: g
        })
    }());
    (function () {
        function e(b, a, c) {
            var d
            if (b.search(a[0]) !== -1) {
                OOo.createCookie(c, 0)
                return false
            } else {
                if (OOo.readCookie(c)) {
                    d = parseInt(OOo.readCookie(c), 10)
                    if ((b.search(a[d + 1]) !== -1) && (d + 1 !== a.length - 1)) {
                        OOo.createCookie(c, d + 1)
                        return false
                    } else {
                        if (b.search(a[d]) !== -1) {
                            return false
                        } else {
                            if (d + 1 === a.length - 1 && b.search(a.pop()) !== -1) {
                                OOo.eraseCookie(c)
                                return true
                            } else {
                                OOo.eraseCookie(c)
                                return false
                            }
                        }
                    }
                } else {
                    return false
                }
            }
        }

        OOo.extend(OOo, {
            checkTunnel: e
        })
    }());
    (function () {
        function q(b) {
            var a = '',
                c
            for (c = 7; c >= 0; c -= 1) {
                a += '0123456789abcdef'.charAt((b >> (c * 4)) & 15)
            }
            return a
        }

        function t(b) {
            var a = ((b.length + 8) >> 6) + 1,
                c = new Array(a * 16),
                d
            for (d = 0; d < a * 16; d += 1) {
                c[d] = 0
            }
            for (d = 0; d < b.length; d += 1) {
                c[d >> 2] |= b.charCodeAt(d) << (24 - (d % 4) * 8)
            }
            c[d >> 2] |= 128 << (24 - (d % 4) * 8)
            c[a * 16 - 1] = b.length * 8
            return c
        }

        function r(b, a) {
            var c = (b & 65535) + (a & 65535),
                d = (b >> 16) + (a >> 16) + (c >> 16)
            return (d << 16) | (c & 65535)
        }

        function s(b, a) {
            return (b << a) | (b >>> (32 - a))
        }

        function v(b, a, c, d) {
            if (b < 20) {
                return (a & c) | ((~a) & d)
            }
            if (b < 40) {
                return a ^ c ^ d
            }
            if (b < 60) {
                return (a & c) | (a & d) | (c & d)
            }
            return a ^ c ^ d
        }

        function D(b) {
            return (b < 20) ? 1518500249 : (b < 40) ? 1859775393 : (b < 60) ? -1894007588 : -899497514
        }

        function x(b) {
            var a = t(b),
                c = new Array(80),
                d = 1732584193,
                e = -271733879,
                g = -1732584194,
                h = 271733878,
                f = -1009589776,
                l,
                j,
                m,
                i,
                k,
                o,
                n,
                p
            for (n = 0; n < a.length; n += 16) {
                l = d
                j = e
                m = g
                i = h
                k = f
                for (p = 0; p < 80; p += 1) {
                    if (p < 16) {
                        c[p] = a[n + p]
                    } else {
                        c[p] = s(c[p - 3] ^ c[p - 8] ^ c[p - 14] ^ c[p - 16], 1)
                    }
                    o = r(r(s(d, 5), v(p, e, g, h)), r(r(f, c[p]), D(p)))
                    f = h
                    h = g
                    g = s(e, 30)
                    e = d
                    d = o
                }
                d = r(d, l)
                e = r(e, j)
                g = r(g, m)
                h = r(h, i)
                f = r(f, k)
            }
            return q(d) + q(e) + q(g) + q(h) + q(f)
        }

        OOo.extend(OOo, {
            sha1: x
        })
    }());
    (function () {
        function f(b, a) {
            if (!a) {
                a = location
            }
            var c = b.cookieName || 'oo_abandon',
                d = OOo.readCookie(c),
                e = b.startPage,
                g = b.endPage,
                h = b.middle
            if (!d) {
                if (a.pathname.indexOf(e) !== -1) {
                    OOo.createCookie(c)
                }
                return false
            } else {
                if (a.pathname.indexOf(g) !== -1) {
                    OOo.eraseCookie(c)
                    return false
                } else {
                    if (a.pathname.search(h) !== -1) {
                        return false
                    } else {
                        OOo.eraseCookie(c)
                        return true
                    }
                }
            }
        }

        OOo.extend(OOo, {
            checkAbandonment: f
        })
    }());
    (function () {
        function d(b) {
            var a,
                c
            for (a = b.length - 1; a >= 0; a -= 1) {
                if (b[a].read) {
                    c = OOo.readCookie(b[a].name)
                    if (!!c && c === b[a].value) {
                        return true
                    } else {
                        if (typeof b[a].value === 'undefined' && !!OOo.readCookie(b[a].name)) {
                            return true
                        }
                    }
                }
            }
            return false
        }

        function e(b) {
            var a
            for (a = b.length - 1; a >= 0; a -= 1) {
                if (b[a].set) {
                    OOo.createCookie(b[a].name, b[a].value, b[a].expiration)
                }
            }
        }

        OOo.extend(OOo, {
            checkThirdPartyCookies: d,
            setThirdPartyCookies: e
        })
    }())
    OOo.extend(Function.prototype, (function () {
        if (typeof Function.prototype.bind !== 'undefined') {
            return
        }
        var e = Array.prototype.slice

        function g(b, a) {
            var c = b.length,
                d = a.length
            while (d) {
                d -= 1
                b[c + d] = a[d]
            }
            return b
        }

        function h(b, a) {
            b = e.call(b, 0)
            return g(b, a)
        }

        function f(a) {
            if (arguments.length < 2 && typeof a === 'undefined') {
                return this
            }
            var c = this,
                d = e.call(arguments, 1)
            return function () {
                var b = h(d, arguments)
                return c.apply(a, b)
            }
        }

        return {
            bind: f
        }
    }()));
    (function () {
        function g(b) {
            if (!b) {
                b = location
            }
            var a
            if (b.host.search(/\.[a-z]+/) !== -1) {
                a = b.host.split('.').reverse()
                if (a.length > 3) {
                    return b.host
                }
                a = '.' + a[1] + '.' + a[0]
            } else {
                a = b.host
            }
            return a
        }

        function h(b, a, c) {
            var d = '',
                e = ''
            if (c) {
                d = new Date()
                d.setTime(d.getTime() + (c * 1000))
                e = '; expires=' + d.toGMTString()
            }
            if (location.host !== g()) {
                document.cookie = b + '=' + a + e + '; path=/; domain=' + g() + ';'
            } else {
                document.cookie = b + '=' + a + e + '; path=/;'
            }
        }

        function f(b) {
            var a = b + '=',
                c = document.cookie.split(';'),
                d,
                e
            for (e = 0; e < c.length; e += 1) {
                d = c[e]
                while (d.charAt(0) === ' ') {
                    d = d.substring(1, d.length)
                }
                if (d.indexOf(a) === 0) {
                    return d.substring(a.length, d.length)
                }
            }
            return null
        }

        function l(b) {
            h(b, '', -1)
        }

        OOo.extend(OOo, {
            getCookieDomain: g,
            createCookie: h,
            readCookie: f,
            eraseCookie: l
        })
    }())
    OOo.Ocode = function (b) {
        var a = OOo.Browser,
            c,
            d
        if (b.disableMobile && a.isMobile) {
            return
        }
        if (b.disableNoniOS && a.isMobileNonIOS) {
            return
        }
        OOo.instanceCount += 1
        this.options = {
            tealeafCookieName: 'TLTSID'
        }
        OOo.extend(this.options, b)
        c = this.options
        c.metrics = OOo.createMetrics()
        this.frameName = c.onPageCard ? 'OnlineOpinion' + OOo.instanceCount : 'OnlineOpinion'
        if (c.cookie && OOo.Ocode.matchUrl(c.cookie, location)) {
            return
        }
        if (c.thirdPartyCookies && OOo.checkThirdPartyCookies(c.thirdPartyCookies)) {
            return
        }
        if (c.abandonment && !OOo.checkAbandonment(c.abandonment)) {
            return
        }
        if (c.tunnel && !OOo.checkTunnel(location.pathname, c.tunnel.path, c.tunnel.cookieName)) {
            return
        }
        if (c.events && c.events.onSingleClick) {
            this.singProbability = Math.random() < 1 - c.events.onSingleClick / 100
        }
        c.tealeafId = OOo.readCookie(c.tealeafCookieName) || OOo.readCookie(c.sessionCookieName)
        if (c.events) {
            this.setupEvents()
            if (c.events.disableLinks || c.events.disableFormElements) {
                this.setupDisableElements()
            }
        }
        if (c.floating) {
            this.floating()
        } else {
            if (c.bar) {
                this.bar()
            } else {
                if (c.tab) {
                    this.tab()
                }
            }
        }
    }
    OOo.Ocode.prototype = {
        show: function (e, g) {
            var h = e || window.event
            if (g !== 'exit' && g !== 'entry' && g !== 'onSingleClick') {
                if (h.preventDefault && h.stopPropagation) {
                    h.preventDefault()
                    h.stopPropagation()
                } else {
                    h.returnValue = false
                }
            }
            if (this.onPageCardVisible) {
                return
            }
            var f = this.options,
                l
            if (f.events && f.events.prompt) {
                if (f.cookie) {
                    OOo.eraseCookie(f.cookie.name || 'oo_r')
                }
                OOo.hidePrompt(h)
            }
            if (this.interruptShow) {
                return
            }
            if (!this.floatingLogo && f.cookie && OOo.Ocode.matchUrl(f.cookie)) {
                return
            }
            if (!f.floating && f.events && this.singProbability) {
                return
            }
            if (f.events && f.events.onSingleClick) {
                this.singProbability = true
            }
            if (f.cookie) {
                OOo.Ocode.tagUrl(f.cookie)
            }
            if (f.thirdPartyCookies) {
                if (OOo.checkThirdPartyCookies(f.thirdPartyCookies)) {
                    return
                }
                OOo.setThirdPartyCookies(f.thirdPartyCookies)
            }
            if (this.floatingLogo) {
                this.floatingLogo.children[0].blur()
            }
            if (this.floatingLogo && f.disappearOnClick) {
                this.floatingLogo.style.display = 'none'
            }
            if (typeof window.ClickTale === 'function') {
                if (!f.clickTalePID) {
                    f.clickTalePID = window.ClickTaleGetPID() || null
                }
                f.clickTaleUID = window.ClickTaleGetUID() || null
                f.clickTaleSID = window.ClickTaleGetSID() || null
                var j = function (b) {
                    if (b.origin === 'https://secure.opinionlab.com') {
                        if (typeof window.ClickTaleEvent === 'function' && b.data !== '') {
                            var a = JSON.parse(b.data),
                                c = window.ClickTaleEvent
                            for (var d in a) {
                                c(d + ':' + a[d])
                            }
                        }
                    }
                }
                OOo.addEventListener(window, 'message', j, false)
            }
            if (f.onPageCard && !OOo.Browser.isMobile) {
                this.setupOnPageCC()
            } else {
                this.launchOOPopup()
            }
            l = f.floating || f.tab || f.bar
            if (l && typeof l.onClickCallback === 'function') {
                l.onClickCallback()
            }
        }
    }
    OOo.extend(OOo.Ocode, {
        tagUrl: function (b, a) {
            if (!a) {
                a = location
            }
            var c = b.name || 'oo_r',
                d = b.type === 'page' ? a.href : a.hostname,
                e = OOo.readCookie(c) || ''
            if (OOo.Ocode.matchUrl(b, a)) {
                return
            }
            OOo.createCookie(c, e + OOo.sha1(d), b.expiration)
        },
        matchUrl: function (b, a) {
            if (!a) {
                a = location
            }
            var c = OOo.readCookie(b.name || 'oo_r'),
                d
            if (!c) {
                return false
            }
            d = b.type === 'page' ? a.href : a.hostname
            return c.search(OOo.sha1(d)) !== -1
        }
    });
    (function () {
        var l = 0

        function j() {
            var b = this.options,
                a = b.newWindowSize || [
                    545,
                    325
                ],
                c = [
                    parseInt((b.metrics.height - a[1]) / 2, 10),
                    parseInt((b.metrics.width - a[0]) / 2, 10)
                ],
                d,
                e,
                g = 'resizable=yes,location=no,status=no,scrollbars=1,width=' + a[0] + ',height=' + a[1] + ',top=' + c[0] + ',left=' + c[1],
                h = 'OnlineOpinion'
            if (b.newWindow) {
                h = h + (l++)
            }
            b.metrics.time2 = (new Date()).getTime()
            b.metrics.type = 'Popup'
            d = OOo.appendOOForm(b, h)
            var f = 'https://secure.opinionlab.com/ccc01/comment_card_d.asp?' + d.children[0].value
            if (b.commentCardUrl) {
                f = b.commentCardUrl + '?' + d.children[0].value
            }
            if (OOo.Browser.isChromeIOS) {
                h = '_0'
            }
            if (OOo.Browser.isMobile && OOo.Browser.ua.search('Android') !== -1) {
                d.submit()
            } else {
                e = window.open(f, h, g)
                if (e && !OOo.Browser.isChromeIOS) {
                    d.submit()
                }
            }
        }

        OOo.extend(OOo.Ocode.prototype, {
            launchOOPopup: j
        })
    }());
    (function () {
        function i() {
            var c = this.options.events,
                d = [
                    false,
                    false
                ],
                e = [
                    'onExit',
                    'onEntry'
                ],
                g = 'beforeunload',
                h,
                f,
                l,
                j,
                m
            if (OOo.Browser.Opera) {
                g = 'unload'
            }
            if (OOo.Browser.iOs) {
                g = 'pagehide'
            }
            if (c.prompt) {
                OOo.extend(this.options, {
                    promptMarkup: c.prompt.promptMarkup,
                    neverShowAgainButton: false,
                    pathToAssets: c.prompt.pathToAssets
                })
            }
            for (l = e.length - 1; l >= 0; l -= 1) {
                h = e[l]
                if (c[h] instanceof Array) {
                    j = c[h]
                    m = j.length
                    while (m && !d[l]) {
                        m -= 1
                        if (window.location.href.search(j[m].url) !== -1 && Math.random() >= 1 - j[m].p / 100) {
                            d[l] = true
                        }
                    }
                } else {
                    if (c[h] && Math.random() >= 1 - c[h] / 100) {
                        d[l] = true
                    }
                }
            }
            if (d[0]) {
                OOo.addEventListener(window, g, function (b) {
                    var a = b || window.event
                    this.show(a, 'exit')
                }.bind(this), false)
            }
            if (d[1]) {
                if (c.delayEntry) {
                    window.setTimeout(function (b) {
                        var a = b || window.event
                        if (c.prompt) {
                            this.getEntryPrompt()
                        } else {
                            this.show(a, 'entry')
                        }
                    }.bind(this), c.delayEntry * 1000)
                } else {
                    if (c.prompt) {
                        this.getEntryPrompt()
                    } else {
                        (function (b) {
                            var a = b || window.event
                            this.show(a, 'entry')
                        }).bind(this)()
                    }
                }
            }
        }

        function k(b) {
            var a = b || window.event,
                c = b.target || b.srcElement,
                d = this.options.events,
                e = c.parentNode,
                g = 5,
                h = 0
            while (e && (c.nodeName !== 'A' || c.nodeName !== 'INPUT') && h !== g) {
                if (e.nodeName === 'A') {
                    c = e
                }
                e = e.parentNode
                h += 1
            }
            if (d.disableFormElements && (c.tagName === 'INPUT' || c.tagName === 'BUTTON') && (c.type === 'submit' || c.type === 'image' || c.type === 'reset' || c.type === 'button')) {
                this.interruptShow = true
            }
            if (d.disableLinks && (c.nodeName === 'A' || c.nodeName === 'AREA') && c.href.substr(0, 4) === 'http' && c.href.search(d.disableLinks) !== -1) {
                this.interruptShow = true
            }
        }

        function o(b) {
            this.interruptShow = true
        }

        function n() {
            OOo.addEventListener(document.body, 'mousedown', k.bind(this))
            if (!this.options.events.disableFormElements) {
                return
            }
            var b = document.getElementsByTagName('form'),
                a
            for (a = b.length - 1; a >= 0; a -= 1) {
                OOo.addEventListener(b[a], 'submit', o.bind(this))
            }
        }

        OOo.extend(OOo.Ocode.prototype, {
            setupEvents: i,
            setupDisableElements: n,
            getEntryPrompt: function () {
                OOo.getEntryPrompt.call(this)
            },
            showEntryPrompt: function (b) {
                if (this.options.cookie) {
                    OOo.Ocode.tagUrl(this.options.cookie)
                }
                OOo.showEntryPrompt.call(this, b, this.show)
            }
        })
    }())
    OOo.extend(OOo.Ocode.prototype, {
        floating: function () {
            var d = document,
                e = this.floatingLogo = document.createElement('div'),
                g = d.createElement('div'),
                h = d.createElement('div'),
                f = d.createElement('div'),
                l = d.createElement('span'),
                j = this.options.floating,
                m = OOo.$(j.contentId),
                i = '10px',
                k = j.id,
                o = d.createElement('span'),
                n,
                p,
                q,
                t,
                r,
                s,
                v,
                D,
                x = this.options.mobileTouches || 2,
                y = 0

            function u(b) {
                return b.offsetLeft + b.offsetWidth
            }

            function w(b) {
                t.style.left = u(m) + 'px'
            }

            o.innerHTML = 'Screen reader users: Please switch to forms mode for this link.'
            o.className = 'screen_reader'
            if (k) {
                e.id = k
            }
            e.className = 'oo_feedback_float'
            h.className = 'oo_transparent'
            g.className = 'olUp'
            f.className = 'olOver'
            g.tabIndex = 0
            g.onkeyup = function (b) {
                n = b || window.event
                if (n.keyCode !== 13) {
                    return
                }
                this.show(n)
            }.bind(this)
            g.innerHTML = j.caption || 'Feedback'
            e.appendChild(o)
            e.appendChild(g)
            l.innerHTML = j.hoverCaption || 'Click here to<br>rate this page'
            f.appendChild(l)
            e.appendChild(f)
            e.appendChild(h)

            function z(b) {
                var a = d.documentElement.scrollTop || d.body.scrollTop,
                    c = d.documentElement.clientHeight || document.body.clientHeight
                e.style.top = (a + c - (v || 0) - 10) + 'px'
            }

            if (j.position && j.position.search(/Content/) && m) {
                t = this.spacer = d.createElement('div')
                r = OOo.Browser.WebKit ? d.body : d.documentElement
                t.id = 'oo_feedback_fl_spacer'
                t.style.left = u(m) + 'px'
                d.body.appendChild(t)
                switch (j.position) {
                    case 'rightOfContent':
                        s = function (b) {
                            e.style.left = (u(m) - r.scrollLeft) + 'px'
                        }
                        break
                    case 'fixedPreserveContent':
                        s = function (b) {
                            var a = OOo.Browser.IE ? d.body.clientWidth : window.innerWidth,
                                c = r.scrollLeft
                            if (a <= u(m) + e.offsetWidth + parseInt(i, 10)) {
                                e.style.left = (u(m) - c) + 'px'
                            } else {
                                e.style.left = ''
                                e.style.right = i
                            }
                        }
                        break
                    case 'fixedContentMax':
                        s = function (b) {
                            var a = OOo.Browser.IE ? d.body.clientWidth : window.innerWidth
                            if (a <= u(m) + e.offsetWidth + parseInt(i, 10)) {
                                e.style.left = ''
                                e.style.right = i
                            } else {
                                e.style.left = (u(m) - r.scrollLeft) + 'px'
                                e.style.right = ''
                            }
                        }
                        break
                }
                window.setTimeout(s, 0)
                OOo.addEventListener(window, 'scroll', s, false)
                OOo.addEventListener(window, 'resize', s, false)
                OOo.addEventListener(window, 'resize', w, false)
            } else {
                e.style.right = i
            }
            if (!this.options.disableShow === true) {
                e.onkeyup = function (b) {
                    var a = b || window.event
                    if (a.keyCode !== 13) {
                        return
                    }
                    this.show(a)
                }.bind(this)
                if (OOo.Browser.isMobile) {
                    if ('ontouchstart' in window) {
                        e.ontouchstart = function (b) {
                            var a = b || window.event
                            if (a.preventDefault && a.stopPropagation) {
                                a.preventDefault()
                                a.stopPropagation()
                            } else {
                                a.returnValue = false
                            }
                            y++
                        }.bind(this)
                        e.ontouchend = function (b) {
                            var a = b || window.event
                            if (y >= x) {
                                this.show(a)
                                y = 0
                            }
                        }.bind(this)
                    } else {
                        e.onclick = function (b) {
                            var a = b || window.event
                            this.show(a)
                        }.bind(this)
                    }
                } else {
                    e.onclick = function (b) {
                        var a = b || window.event
                        this.show(a)
                    }.bind(this)
                }
            } else {
                OOo.appendWaypointMobile(e, x)
            }
            d.body.appendChild(e)
        },
        removeFloatingLogo: function () {
            document.body.removeChild(this.floatingLogo)
            if (this.spacer) {
                document.body.removeChild(this.spacer)
            }
        }
    })
    OOo.extend(OOo.Ocode.prototype, {
        bar: function () {
            var d = document,
                e = this.floatingLogo = d.createElement('a'),
                g,
                h,
                f,
                l = d.documentElement.scrollTop || d.body.scrollTop,
                j = d.createElement('div'),
                m = this.options,
                i = this.options.mobileTouches || 2,
                k = 0,
                o = d.createElement('span')

            function n(b) {
                var a = 0,
                    c = 0
                if (b.offsetParent) {
                    do {
                        a += b.offsetLeft
                        c += b.offsetTop
                    } while (b == b.offsetParent)
                    return [a,
                        c]
                }
            }

            function p(b) {
                var a = document.activeElement,
                    c
                if (!a) {
                    return
                }
                c = n(a)
                if (!c) {
                    return
                }
                if (c[1] + a.clientHeight > (window.innerHeight || document.body.clientHeight) + (window.pageYOffset || document.body.scrollTop) - e.clientHeight) {
                    if (navigator.appVersion.indexOf('MSIE 7.') !== -1) {
                        window.scrollBy(0, 0)
                    } else {
                        window.scrollBy(0, a.clientHeight + 20)
                    }
                }
            }

            j.innerHTML = 'Launches comment card in new window'
            j.className = 'ada-hidden'
            this.reflowBar = OOo.K
            e.id = 'oo_bar'
            e.href = '#'
            o.innerHTML = m.bar.caption || 'Feedback'
            e.appendChild(j)
            e.appendChild(o)
            if (typeof m.tabIndex === 'number') {
                e.tabIndex = m.tabIndex
            } else {
                e.tabIndex = 0
            }
            if (!this.options.disableShow === true) {
                e.onkeyup = function (b) {
                    var a = b || window.event
                    if (a.keyCode !== 13) {
                        return
                    }
                    this.show(a)
                }.bind(this)
                if (OOo.Browser.isMobile) {
                    if ('ontouchstart' in window) {
                        e.ontouchstart = function (b) {
                            var a = b || window.event
                            if (a.preventDefault && a.stopPropagation) {
                                a.preventDefault()
                                a.stopPropagation()
                            } else {
                                a.returnValue = false
                            }
                            k++
                        }.bind(this)
                        e.ontouchend = function (b) {
                            var a = b || window.event
                            if (k >= i) {
                                this.show(a)
                                k = 0
                            }
                        }.bind(this)
                    } else {
                        e.onclick = function (b) {
                            var a = b || window.event
                            this.show(a)
                        }.bind(this)
                    }
                } else {
                    e.onclick = function (b) {
                        var a = b || window.event
                        this.show(a)
                    }.bind(this)
                }
            } else {
                OOo.appendWaypointMobile(e, i)
            }
            document.body.className += document.body.className < 1 ? 'oo_bar' : ' oo_bar'
            document.body.appendChild(e)
            OOo.addEventListener(document.body, 'keyup', p, false)
        }
    })
    OOo.extend(OOo.Ocode.prototype, {
        tab: function () {
            var c = document,
                d = this.floatingLogo = c.createElement('div'),
                e = c.createElement('span'),
                g = c.createElement('div'),
                h = c.createElement('span'),
                f = this.options.tab,
                l = c.createElement('a'),
                j = 'Feedback',
                m = f.tabType,
                i = 'right',
                k = this.options.mobileTouches || 2,
                o = 0,
                n = 0,
                p = OOo.readCookie('oo_tab_extend'),
                q = 2592000
            switch (m) {
                case 1:
                    var t = c.createElement('span')
                    d = this.floatingLogo = c.createElement('a')
                    e = c.createElement('span')
                    d.href = '#'
                    d.id = 'oo_tab_' + m
                    if (f.position) {
                        i = f.position
                    }
                    if (f.extendEveryPage) {
                        n = f.extendEveryPage
                    }
                    if (f.extendExpiration) {
                        q = f.extendExpiration
                    }
                    d.className = tabClass = 'oo_tab_' + i + '_' + m
                    e.className = 'screen_reader'
                    t.className = 'icon'
                    if (typeof f.tabIndex === 'number') {
                        d.tabIndex = f.tabIndex
                    } else {
                        d.tabIndex = 0
                    }
                    if (f.verbiage) {
                        j = f.verbiage
                    }
                    d.innerHTML = j
                    e.innerHTML = 'Launches comment card in new window'
                    d.appendChild(e)
                    d.appendChild(t)
                    if (n == 1) {
                        setTimeout(function () {
                            d.className += ' small'
                        }, 2500)
                    } else {
                        if (p === 'prevent') {
                            d.className += ' small'
                        } else {
                            OOo.createCookie('oo_tab_extend', 'prevent', q)
                            setTimeout(function () {
                                d.className += ' small'
                            }, 2500)
                        }
                    }
                    break
                default:
                    d = this.floatingLogo = c.createElement('a')
                    d.id = 'oo_tab'
                    d.className = 'oo_tab_' + (f.position || i)
                    d.href = '#'
                    if (!document.addEventListener || OOo.checkIfIE9orBelow()) {
                        d.className += ' oo_legacy'
                    }
                    if (f.wcagBasePath) {
                        d.className += ' wcag'
                    }
                    var r = document.createElement('img')
                    if (f.iconPath) {
                        r.setAttribute('src', f.iconPath + 'oo_tab_icon_retina.gif')
                    } else {
                        r.setAttribute('src', '/onlineopinionV5/oo_tab_icon_retina.gif')
                    }
                    r.setAttribute('alt', '')
                    if (f.verbiage) {
                        j = f.verbiage
                    }
                    var s = document.createTextNode(j)
                    d.appendChild(r)
                    d.appendChild(s)
                    if (e) {
                        e.className = 'screen_reader'
                        e.innerHTML = ' Will open a new window'
                        d.appendChild(e)
                    }
            }
            if (!this.options.disableShow === true) {
                d.onkeyup = function (b) {
                    var a = b || window.event
                    if (a.keyCode !== 13) {
                        return
                    }
                    this.show(a)
                }.bind(this)
                if (OOo.Browser.isMobile) {
                    if ('ontouchstart' in window) {
                        d.ontouchstart = function (b) {
                            var a = b || window.event
                            if (a.preventDefault && a.stopPropagation) {
                                a.preventDefault()
                                a.stopPropagation()
                            } else {
                                a.returnValue = false
                            }
                            o++
                        }.bind(this)
                        d.ontouchend = function (b) {
                            var a = b || window.event
                            if (o >= k) {
                                this.show(a)
                                o = 0
                            }
                        }.bind(this)
                    } else {
                        d.onclick = function (b) {
                            var a = b || window.event
                            this.show(a)
                        }.bind(this)
                    }
                } else {
                    d.onclick = function (b) {
                        var a = b || window.event
                        this.show(a)
                    }.bind(this)
                }
            } else {
                OOo.appendWaypointMobile(d, k)
            }
            c.body.appendChild(d)
        }
    })
    OOo.extend(OOo.Ocode.prototype, {
        setupOnPageCC: function () {
            var e = document,
                g = OOo.Cache.overlay || e.createElement('div'),
                h = this.wrapper = e.createElement('div'),
                f = e.createElement('a'),
                l = e.createElement('div'),
                j = e.createElement('span'),
                m = this.frameName,
                i = e.createElement(OOo.DYNAMIC_FRAME_NAME_IS_BUGGY ? '<iframe name="' + m + '">' : 'iframe'),
                k = e.createDocumentFragment(),
                o = this.options,
                n = o.onPageCard,
                p = 'https://secure.opinionlab.com/ccc01/comment_card_json_4_0_b.asp',
                q,
                t,
                r,
                s = false,
                v = this,
                D,
                x,
                y,
                u,
                w,
                z,
                A,
                C = e.createElement('span')

            function B(b) {
                if (b && b.preventDefault) {
                    b.preventDefault()
                }
                document.body.focus()
                i.tabIndex = -1
                i.title = 'empty'
                i['aria-hidden'] = 'true'
                g.style.display = 'none'
                g.className = ''
                e.body.removeChild(h)
                if (window.postMessage) {
                    OOo.removeEventListener(window, 'message', w)
                } else {
                    window.clearInterval(t)
                }
                s = false
                v.onPageCardVisible = false
                return false
            }

            w = OOo.Ocode.postMessageHandler(function (b) {
                var a = parseInt(b, 10),
                    c,
                    d
                if (a > 0) {
                    if (s) {
                        return
                    }
                    s = true
                    c = window.innerHeight || e.documentElement.clientHeight || e.body.clientHeight
                    d = a
                    A = h.offsetTop
                    if (d + A > c) {
                        d = c - 40 - A
                    }
                    i.style.width = '555px'
                    l.style.width = '555px'
                    i.style.height = d + 'px'
                    h.style.visibility = 'visible'
                    if (j.clientHeight < 20) {
                        j.style.height = h.offsetHeight + 'px'
                    }
                    g.className = 'no_loading'
                    v.onPageCardVisible = true
                    q && e.body.removeChild(q)
                } else {
                    if (b === 'submitted') {
                        B()
                    }
                }
                if (OOo.Browser.IE && e.compatMode === 'BackCompat') {
                    window.scrollTo(0, 0)
                }
            }, v.options.commentCardUrl)
            o.metrics.type = 'OnPage'
            OOo.Cache.overlay = g
            g.id = 'oo_overlay'
            g.style.display = 'block'
            g.className = ''
            l.className = 'iwrapper'
            h.className = 'oo_cc_wrapper'
            h.setAttribute('role', 'alert')
            h.setAttribute('aria-describedby', 'comment_card_description')
            C.className = 'screen_reader'
            C.id = 'comment_card_description'
            C.innerHTML = 'Please leave your feedback in the comment card you just activated'
            h.appendChild(C)
            f.className = 'oo_cc_close'
            f.innerHTML = '<span class="screen_reader">Close dialog</span><span aria-hidden="true">&#10006;</span>'
            f.title = o.closeTitle ? o.closeTitle : 'Close dialog'
            if (!e.addEventListener) {
                l.style.outline = '1px solid #cdcdcd'
            }
            h.style.visibility = 'hidden'
            f.tabIndex = 0
            f.onkeyup = function (b) {
                var a = b || window.event
                if (a.keyCode !== 13) {
                    return
                }
                B()
            }
            if (OOo.Browser.IE) {
                i.frameBorder = '0'
                if (!window.XMLHttpRequest || e.compatMode === 'BackCompat') {
                    z = Math.max(e.documentElement.clientWidth, e.body.offsetWidth)
                    g.style.position = 'absolute'
                    g.style.width = e.compatMode === 'BackCompat' ? (z - 21) + 'px' : z + 'px'
                    g.style.height = Math.max(e.documentElement.clientHeight, e.body.offsetHeight) + 'px'
                    h.style.position = 'absolute'
                    OOo.addEventListener(window, 'scroll', function () {
                        g.style.top = (e.body.scrollTop + document.body.clientHeight - g.clientHeight) + 'px'
                        h.style.top = (e.body.scrollTop + A + 25) + 'px'
                    })
                }
            }
            OOo.addEventListener(f, 'click', B)
            if (n.closeWithOverlay && !OOo.Browser.isMobile) {
                h.appendChild(j)
                j.onclick = B
                g.onclick = B
            }
            i.src = ' '
            i.name = m
            i.title = 'Comment Card'
            l.appendChild(f)
            l.appendChild(i)
            h.appendChild(l)
            k.appendChild(h)
            k.appendChild(g)
            e.body.appendChild(k)
            if (window.postMessage) {
                OOo.addEventListener(window, 'message', w)
            } else {
                t = setInterval(w, 500)
            }
            o.metrics.time2 = (new Date()).getTime()
            q = OOo.appendOOForm(o, m)
            q.submit()
        }
    })
    OOo.extend(OOo.Ocode, {
        postMessageHandler: function (d, e, g) {
            return function (b) {
                var a = 'https://secure.opinionlab.com',
                    c
                if (!g) {
                    g = location
                }
                if ((b && !(b.origin === a || b.origin.indexOf(e) !== 0)) || (!b && g.hash.search('OL=') === -1)) {
                    return false
                }
                c = b ? b.data : g.hash.split('=').pop()
                if (!b && location.hash) {
                    location.hash = ''
                }
                d(c)
                return c
            }
        }
    })
    OOo.Invitation = function (b) {
        this.options = {
            tunnelCookie: 'oo_inv_tunnel',
            repromptTime: 604800,
            responseRate: 50,
            repromptCookie: 'oo_inv_reprompt',
            promptMarkup: 'oo_inv_prompt.html',
            promptStyles: 'oo_inverstitial_style.css',
            percentageCookie: 'oo_inv_percent',
            pagesHitCookie: 'oo_inv_hit',
            popupType: 'popunder',
            promptDelay: 0,
            neverShowAgainButton: false,
            loadPopupInBackground: false,
            truncatePrevCurrentMetrics: false,
            disablePrevCurrentMetrics: false,
            tealeafCookieName: 'TLTSID',
            monitorWindow: 'oo_inv_monitor.html',
            companySlogan: 'We value your opinion',
            beforePrompt: OOo.K,
            callBacks: {
                prompt: '',
                yesClick: '',
                noClick: '',
                closeClick: ''
            },
            inviteMarkup: '<div id=\'oo_invitation_prompt\' role=\'dialog\' aria-describedby=\'oo_invite_message\'><div id=\'oo_invitation_company_logo\'></div><div id=\'oo_invite_content\'><p id=\'oo_invite_message\'>After your visit, would you be willing to provide some quick feedback?<br /><br />(It will only take a minute)</p><p class=\'prompt_button\'><a href=\'#\' id=\'oo_launch_prompt\'>Yes<span class=\'screen_reader\'>This will open a new window</span></a></p><p class=\'prompt_button\'><a href=\'#\' id=\'oo_no_thanks\'>No Thanks</a></p><p id=\'ol_invitation_brand_logo\'><span aria-label=\'Powered by OpinionLab.\'></span></p></div><a id=\'oo_close_prompt\' href=\'#\' aria-label=\'Close dialog\'><div class=\'screen_reader\'>Close dialog</div><span aria-hidden=\'true\'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_invitation_prompt #oo_invite_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->',
            skipInvitePrompt: false
        }
        this.popupShown = false
        OOo.extend(this.options, b)
        var a = this.options,
            c = parseInt(OOo.readCookie(a.pagesHitCookie), 10) || 0
        OOo.Invitation.friendlyDomains = a.friendlyDomains || null
        var d = {
            weight: Number(OOo.readCookie('oo_OODynamicRewrite_weight')),
            searchPattern: OOo.readCookie('oo_OODynamicRewrite_searchPattern'),
            replacePattern: OOo.readCookie('oo_OODynamicRewrite_replacePattern')
        }
        OOo.eraseCookie('oo_OODynamicRewrite_weight')
        OOo.eraseCookie('oo_OODynamicRewrite_searchPattern')
        OOo.eraseCookie('oo_OODynamicRewrite_replacePattern')
        if (!window.OOoDynamicRewrite || window.OOoDynamicRewrite.weight < d.weight) {
            window.OOoDynamicRewrite = d
        }
        if (window.OOoDynamicRewrite && ('number' === typeof window.OOoDynamicRewrite.weight) && !isNaN(window.OOoDynamicRewrite.weight)) {
            OOo.createCookie('oo_OODynamicRewrite_weight', window.OOoDynamicRewrite.weight)
            if (window.OOoDynamicRewrite.searchPattern) {
                OOo.createCookie('oo_OODynamicRewrite_searchPattern', window.OOoDynamicRewrite.searchPattern)
            }
            if (window.OOoDynamicRewrite.replacePattern) {
                OOo.createCookie('oo_OODynamicRewrite_replacePattern', window.OOoDynamicRewrite.replacePattern)
            }
        }
        if (location.search.search('evs') !== -1 || OOo.readCookie('oo_evs_friendly') === 'yes') {
            OOo.eraseCookie('oo_evs_friendly')
            a.loadPopupInBackground = true
            this.launchPopup()
            OOo.createCookie(a.repromptCookie, 1, a.repromptTime === -1 ? 0 : a.repromptTime)
        }
        setTimeout(function () {
            if (!window.oo_inv_monitor) {
                return
            }
            if (a.area && location.href.search(a.area) === -1) {
                this.options.popupType = 'popup'
                this.launchPopup()
            } else {
                if (a.goal && location.href.search(a.goal) !== -1) {
                    window.oo_inv_monitor.close()
                }
            }
        }.bind(this), 1600)
        if (OOo.readCookie(a.repromptCookie)) {
            return
        }
        if (a.thirdPartyCookies && OOo.checkThirdPartyCookies(a.thirdPartyCookies)) {
            return
        }
        if (!OOo.readCookie(a.percentageCookie)) {
            OOo.createCookie(a.percentageCookie, (Math.random() > 1 - (a.responseRate / 100)) ? '1' : '0')
        }
        if (typeof a.promptTrigger !== 'undefined') {
            if (a.promptTrigger instanceof RegExp) {
                if (!window.location.href.match(a.promptTrigger)) {
                    return
                }
            } else {
                if (a.promptTrigger instanceof Array) {
                    if (!OOo.checkTunnel(location.pathname, a.promptTrigger, a.tunnelCookie)) {
                        return
                    }
                }
            }
        }
        c += 1
        OOo.createCookie(a.pagesHitCookie, c)
        if (a.pagesHit && c < a.pagesHit) {
            return
        }
        OOo.eraseCookie(a.tunnelCookie)
        if (OOo.readCookie(a.percentageCookie) === '1') {
            window.setTimeout(function () {
                OOo.createCookie(a.repromptCookie, 1, a.repromptTime)
                this.options.beforePrompt()
                this.getPrompt()
            }.bind(this), a.promptDelay * 1000)
        }
    }
    OOo.Invitation.notifyFriendlyLocationChange = function (b) {
        if (window.oo_inv_monitor) {
            OOo.createCookie('oo_evs_friendly', 'yes')
        }
    }
    OOo.Invitation.prototype = {
        getPrompt: function () {
            OOo.getPrompt.call(this)
        },
        showPrompt: function (b) {
            if (!this.options.skipInvitePrompt) {
                OOo.showPrompt.call(this, b, this.launchPopup)
            } else {
                this.launchPopup()
            }
        },
        launchPopup: function (b) {
            if (this.popupShown) {
                return
            }
            this.popupShown = true
            var a = b || window.event
            if (typeof a !== 'undefined') {
                if (a.preventDefault && a.stopPropagation) {
                    a.preventDefault()
                    a.stopPropagation()
                } else {
                    a.returnValue = false
                }
            }
            var c = this.options,
                d = window.location.href,
                e = c.popupType === 'popup' ? 'https://secure.opinionlab.com/ccc01/comment_card.asp?' : c.pathToAssets + c.monitorWindow + '?time1=' + (new Date()).getTime() + '&',
                g,
                h = [],
                f = c.asm ? [
                    555,
                    500
                ] : (OOo.Browser.Chrome ? [
                    400,
                    400
                ] : [
                    400,
                    350
                ]),
                l,
                j = OOo.createMetrics(),
                m = OOo.readCookie(c.tealeafCookieName),
                i
            if (c.clickTalePID && window.ClickTaleGetUID && window.ClickTaleGetSID || window.ClickTaleGetPID && window.ClickTaleGetUID && window.ClickTaleGetSID) {
                m += '|' + [c.clickTalePID || window.ClickTaleGetPID(),
                    window.ClickTaleGetUID(),
                    window.ClickTaleGetSID()].join('/')
            }
            f = c.newWindowSize || f
            i = 'scrollbars=1,resizable=1,location=no,status=no,width=' + f[0] + ',height=' + f[1]
            if (c.referrerRewrite) {
                j.referer = OOo.referrerRewrite(c.referrerRewrite)
            }
            if (c.truncatePrevCurrentMetrics) {
                j.prev = OOo.truncateMetric(j.prev)
                j.currentURL = OOo.truncateMetric(j.currentURL)
            }
            if (c.disablePrevCurrentMetrics) {
                j.prev = ''
                j.currentURL = ''
            }
            if (c.thirdPartyCookies) {
                OOo.setThirdPartyCookies(c.thirdPartyCookies)
            }
            g = OOo.toQueryString(j) + '&type=Invitation'
            if (c.customVariables) {
                g += '&customVars=' + encodeURIComponent(OOo.serialize(c.customVariables))
            }
            g += '&custom_var=' + OOo.createLegacyVars(c.legacyVariables, m)
            if (c.asm) {
                g += '&asm=2'
                i += ',scrollbars=1'
            }
            e += g
            if (e.match(/\?/g).length === 2) {
                e = e.replace(/\?([^?]*)$/, '&$1')
            }
            this.popup = l = window.open(e, 'OnlineOpinionInvitation', i)
            if (!c.loadPopupInBackground && OOo.$('oo_container')) {
                OOo.hidePrompt(a)
            }
        },
        killPrompt: function (b) {
            var a = b || window.event
            if (this.options.callBacks && typeof this.options.callBacks.noClick === 'function') {
                this.options.callBacks.noClick()
            }
            OOo.createCookie(this.options.repromptCookie, 1, 157680000)
            OOo.hidePrompt(a)
        }
    }
    OOo.extend(OOo.Invitation, {
        navigateToFriendlyDomain: function (b) {
            location.href = b
        }
    })
    OOo.Waypoint = function (b) {
        var a = OOo.Browser
        if (b.disableMobile && a.isMobile) {
            return
        }
        if (b.disableNoniOS && a.isMobileNonIOS) {
            return
        }
        this.options = {
            pathToAssets: '/onlineopinionV5/',
            waypointMarkup: 'oo_waypoint.html',
            companySlogan: 'Give us feedback',
            companyLogo: 'waypoint_logo.png',
            linkFocus: true,
            categories: {
                website: {
                    tealeafCookieName: 'TLTSID',
                    waypointIcon: 'waypoint_icon.png',
                    buttonText: 'Website'
                },
                store: {
                    referrerRewrite: {
                        searchPattern: /:\/\//,
                        replacePattern: '://store.'
                    },
                    tealeafCookieName: 'TLTSID',
                    waypointIcon: 'waypoint_icon.png',
                    buttonText: 'Store'
                },
                product: {
                    referrerRewrite: {
                        searchPattern: /:\/\//,
                        replacePattern: '://product.'
                    },
                    tealeafCookieName: 'TLTSID',
                    waypointIcon: 'waypoint_icon.png',
                    buttonText: 'Product'
                },
                other: {
                    referrerRewrite: {
                        searchPattern: /:\/\//,
                        replacePattern: '://other.'
                    },
                    tealeafCookieName: 'TLTSID',
                    waypointIcon: 'waypoint_icon.png',
                    buttonText: 'Other'
                }
            },
            wpmarkup: '<div id=\'oo_waypoint_prompt\' role=\'dialogue\' aria-describedby=\'oo_waypoint_message\'><div id=\'oo_waypoint_company_logo\'></div><div id=\'oo_waypoint_content\'><p id=\'oo_waypoint_message\'>Select a category</p><p id=\'waypoint_icons\'></p><p id=\'ol_waypoint_brand_logo\'><span aria-label=\'Powered by OpinionLab.\'></span></p></div><a id=\'oo_waypoint_close_prompt\' href=\'#\' aria-label=\'Close dialog\'><div class=\'screen_reader\'>Close dialogue</div><span aria-hidden=\'true\'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_waypoint_prompt #oo_waypoint_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->'
        }
        OOo.extend(this.options, b)
        var c = this.options,
            d = c.categories
        for (var e in d) {
            if (d.hasOwnProperty(e)) {
                if (typeof c.categories[e].oCode === 'object') {
                    var g = {}
                    g[e] = new OOo.Ocode(d[e].oCode)
                    OOo.extend(OOo.Waypoint, g)
                }
            }
        }
        OOo.extend(OOo.Waypoint, {
            getWaypoint: function () {
                this.getWaypoint()
            }.bind(this)
        })
    }
    OOo.Waypoint.prototype = {
        getWaypoint: function () {
            OOo.getWaypoint.call(this)
        },
        showWaypoint: function (b) {
            OOo.showWaypoint.call(this, b)
        },
        killWaypoint: function (b) {
            var a = b || window.event
            OOo.hideWaypoint(a)
        }
    }
    OOo.extend(OOo, {
        appendWaypoint: function (c) {
            var d = OOo.$(c)
            if (!!d) {
                if (!OOo.Browser.isMobile) {
                    OOo.addEventListener(d, 'click', function (b) {
                        var a = b || window.event
                        if (a.preventDefault && a.stopPropagation) {
                            a.preventDefault()
                            a.stopPropagation()
                        } else {
                            a.returnValue = false
                        }
                        OOo.Waypoint.getWaypoint()
                    }, false)
                    OOo.addEventListener(d, 'keydown', function (b) {
                        var a = b || window.event
                        if (a.keyCode !== 13) {
                            return
                        }
                        if (a.preventDefault && a.stopPropagation) {
                            a.preventDefault()
                            a.stopPropagation()
                        } else {
                            a.returnValue = false
                        }
                        OOo.Waypoint.getWaypoint()
                    }, false)
                }
            }
        }
    })
    OOo.extend(OOo, {
        appendWaypointMobile: function (c, d) {
            var e = 0
            var g = d || 2
            if (typeof c === 'string') {
                var c = OOo.$(c)
            }
            if (!!c) {
                if (OOo.Browser.isMobile) {
                    if ('ontouchstart' in window) {
                        OOo.addEventListener(c, 'touchstart', function (b) {
                            var a = b || window.event
                            if (a.preventDefault && a.stopPropagation) {
                                a.preventDefault()
                                a.stopPropagation()
                            } else {
                                a.returnValue = false
                            }
                            e++
                        }, false)
                        OOo.addEventListener(c, 'touchend', function (b) {
                            var a = b || window.event
                            if (e >= g) {
                                OOo.Waypoint.getWaypoint()
                                e = 0
                            }
                        }, false)
                    } else {
                        OOo.addEventListener(c, 'click', function (b) {
                            var a = b || window.event
                            if (a.preventDefault && a.stopPropagation) {
                                a.preventDefault()
                                a.stopPropagation()
                            } else {
                                a.returnValue = false
                            }
                            OOo.Waypoint.getWaypoint()
                        }, false)
                    }
                }
            }
        }
    })
    return OOo
}))
$(document).ready(function () {
    var CONTEXT = $('.electronic-comm-disclosure-module .ol-bank-skin')
    $('.checkClick').attr('checked', false)
    var onClickAttr = $('#agree-button').attr('onclick')
    $('#agree-button').removeAttr('onclick')
    var disabledText = $('#agree-button .ada-hidden', CONTEXT).html()
    var $tocDotIndex = 0
    var $tocListItem = ''
    $('.electronic-comm-disclosure-module .ol-bank-skin ol.cat-list li > a').each(function () {
        if ($(this).html().indexOf('. ') != -1) {
            if ($(this).children('span.ada-hidden').length > 0) {
                $tocListItem = $(this).clone().children(':first').remove().end().text()
                $tocDotIndex = ($tocListItem.indexOf('. ') - 2)
                $tocListItem = $tocListItem.replace($tocListItem.substring($tocDotIndex, ($tocDotIndex + 4)), '')
                $tocListItem = $tocListItem.replace('TM', '<sup>TM</sup>')
                $(this).html('<span class="ada-hidden">' + $(this).children(':first').text() + '</span>' + $.trim($tocListItem))
                if ($(this).siblings('.section-intro').length > 0) {
                    $(this).siblings('.section-intro').children(':first').prepend('<span class="ada-hidden">' + $.trim($tocListItem) + ' </span>')
                }
            } else {
                $tocListItem = $(this).text()
                $tocDotIndex = ($(this).text().indexOf('. ') - 2)
                $(this).text($.trim($(this).text().replace($(this).text().substring($tocDotIndex, ($tocDotIndex + 3)), '')))
                $(this).text($(this).text().replace('TM', '<sup>TM</sup>'))
                if ($(this).siblings('.section-intro').length > 0) {
                    $(this).siblings('.section-intro').children(':first').prepend('<span class="ada-hidden">' + $(this).text() + ' </span>')
                }
            }
        }
    })
    var $serviceAgreementModuleOlbSkin = $('.electronic-comm-disclosure-module .ol-bank-skin')
    if ($serviceAgreementModuleOlbSkin.length > 0) {
        var $serviceAgreementTopicToggle = $('.electronic-comm-disclosure-module .ol-bank-skin .topic-toggle')
        var $serviceAgreementCategoryLink = $('.electronic-comm-disclosure-module .ol-bank-skin .category-link')
        var $serviceAgreementCategoryLinkADAText = $('.electronic-comm-disclosure-module .ol-bank-skin .category-link .ada-hidden')
        var $serviceAgreementTopicList = $('.electronic-comm-disclosure-module .ol-bank-skin .cat-list ol')
        var $serviceAgreementSectionIntro = $('.electronic-comm-disclosure-module .ol-bank-skin .cat-list .section-intro')
        $serviceAgreementCategoryLinkADAText.text(ADAShowTopicsText)
        $serviceAgreementTopicToggle.click(function () {
            $serviceAgreementTopicToggle.toggleClass('hide')
            if ($('#show-topics').hasClass('hide')) {
                $serviceAgreementTopicList.show()
                $serviceAgreementSectionIntro.show()
                $serviceAgreementCategoryLinkADAText.text(ADAHideTopicsText)
            } else {
                $serviceAgreementTopicList.hide()
                $serviceAgreementSectionIntro.hide()
                $serviceAgreementCategoryLinkADAText.text(ADAShowTopicsText)
            }
        })
        $serviceAgreementCategoryLink.click(function () {
            if ($(this).children('.ada-hidden').text() == ADAShowTopicsText) {
                $(this).children('.ada-hidden').text(ADAHideTopicsText)
            } else {
                $(this).children('.ada-hidden').text(ADAShowTopicsText)
            }
            $(this).siblings().toggle()
        })
    }
    $('#agree-button').click(function (e) {
        if ($(this).hasClass('inactive')) {
            e.preventDefault()
            return false
        } else {
            $('#agree-button').attr('onclick', onClickAttr)
            $(this).bind('click')
            return true
        }
    })
    $('.checkClick', CONTEXT).click(function () {
        if ($('.checkClick:checked', CONTEXT).length == $('.checkClick').length) {
            $('#agree-button', CONTEXT).addClass('button-blue').removeClass('inactive')
            $('#agree-button .ada-hidden', CONTEXT).text('')
        } else {
            $('#agree-button', CONTEXT).addClass('inactive').removeClass('button-blue')
            $('#agree-button .ada-hidden', CONTEXT).text(disabledText)
        }
    })
})

function actionECDParam(loginURI, formName) {
    var postAction = loginURI.split('postAction=')
    var formAction = loginURI.split('?')
    if (postAction.length > 0) {
        if (document.getElementById('postAction') != undefined) {
            document.getElementById('postAction').value = postAction[1]
        }
    }
    if (formAction.length > 0) {
        document.getElementById(formName).action = formAction[0]
    }
    document.getElementById(formName).submit()
}

var $popupFsdHeader
$(document).ready(function () {
    $popupFsdHeader = $('.header-module .popup-fsd-skin .popup-header')
    if ($popupFsdHeader.length > 0) {
        $('.close-fsd').prepend('<span class="ada-hidden">Close Online Banking Security Guarantee&nbsp;</span>')
        $('.close-window-button', $popupFsdHeader).hover(function () {
            $('.close-window-text', $popupFsdHeader).removeClass('hide')
        })
    }
})
var setupInterstitialModal = (function () {
    var settings = {
            target: '.com-interstitial-modal',
            $target: $(),
            classes: {
                link: 'com-interstitial-modal-link',
                wired: 'wired'
            },
            event: 'refresh.com-interstitial-modal'
        },
        triggerInterstitialFn = function (e) {
            e.preventDefault()
            var $this = $(e.target)
            if (!$this.is('a')) {
                $this = $this.closest('a')
            }
            $cacheInterstitialModalButton_init = $this
            var classes = $this.attr('class'),
                m = (classes ? classes : '').match(/ boa-index-(\d+)/),
                index = m && m[1] ? m[1] : 0
            var options = {
                skin: 'modal-flex',
                width: 740,
                closeTriggers: '.com-interstitial-modal-' + index + '-modalClose'
            }
            var $modal = $('#com-interstitial-modal-' + index),
                interstitialTo = $this.attr('rel'),
                targetWindow = $this.attr('data-window')
            $modal.boaFlexModal(options).find('.button-blue, .iml-continue').attr('href', interstitialTo)
            if (targetWindow !== undefined && targetWindow !== null) {
                if (!targetWindow.match('^_')) {
                    targetWindow = '_' + targetWindow
                }
                $modal.find('.button-blue, .iml-continue').attr('target', targetWindow)
            }
            $modal.find('.close-com-interstitial').click(function () {
                setTimeout(function () {
                    $modal.find('.button-blue, .iml-continue').removeAttr('target')
                }, 1)
                $modal.closest('.modal-flex').find('.ui-dialog-titlebar-close').click()
            })
        },
        _individualizeModals = function () {
            var count = 0,
                base = 'com-interstitial-modal-'
            while ($('#' + base + count).length > 0) {
                count++
            }
            settings.$target.each(function () {
                $(this).attr('id', base + count++)
            })
        },
        _wireLinks = function () {
            var already = settings.classes.link + '-' + settings.classes.wired
            $('.' + settings.classes.link).not('.' + already).each(function () {
                var $link = $(this).addClass(already)
                if (boaVerCheck('1.7', 'jquery')) {
                    $link.on('click', triggerInterstitialFn)
                } else {
                    $link.click(triggerInterstitialFn)
                }
            })
        },
        _listenEvents = function () {
            $(document).unbind(settings.event).bind(settings.event, function () {
                var count = 0,
                    max = 25,
                    interval = 400,
                    links = '.' + settings.classes.link,
                    linkCount = $(links).length,
                    readyAction = setInterval(function () {
                        _wireLinks()
                        if (++count >= max || $(links).length > linkCount) {
                            clearInterval(readyAction)
                        }
                    }, interval)
            })
        },
        _initialize = function (options) {
            $.extend({}, settings, options, true)
            settings.$target = $(settings.target)
            _individualizeModals()
            _wireLinks()
            _listenEvents()
        }
    return {
        init: _initialize
    }
}())
$(document).ready(function () {
    setupInterstitialModal.init()
})

function actionOnlineIDParam(loginURI) {
    var gotoActionset = loginURI.indexOf('oasMandatory')
    var formAction = loginURI.split('?')
    if (gotoActionset != -1) {
        if (document.getElementById('gotoSplashAction') != undefined) {
            document.getElementById('gotoSplashAction').value = 'oasMandatory'
        }
    }
    var postAction = loginURI.split('postSplashAction=')
    if (postAction.length > 0) {
        if (document.getElementById('postSplashAction') != undefined) {
            document.getElementById('postSplashAction').value = postAction[1]
        }
    }
    if (formAction.length > 0) {
        document.getElementById('mediaform').action = formAction[0]
    }
    document.getElementById('mediaform').submit()
}

$(document).ready(function () {
    if ($('.messaging-module .error-liveperson-rp-skin').length > 0) {
        if ($('.messaging-module').is(':visible')) {
            $('.messaging-module .error-liveperson-rp-skin .error-message').attr('tabindex', '-1').focus().css('outline', 'none')
        }
        var $skin = $('.messaging-module .error-liveperson-rp-skin .error-message')
        window.checkLPButtonState = function (state) {
            if (state != 'online') {
                $('.chat-avail', $skin).hide()
                $('.chat-unavail', $skin).show()
            } else {
                $('.chat-avail', $skin).show()
                $('.chat-unavail', $skin).hide()
            }
        }
        checkLPButtonState('')
    }
})
$(document).ready(function () {
    var moduleContext = $('.messaging-module .generic-skin')
    var locIndex = location.search.indexOf('currentPageURL=')
    if (locIndex > 0) {
        var cancelBtnURL = location.search.substring(locIndex + 14)
        if (typeof cancelBtnURL != 'undefined' && cancelBtnURL.length > 0) {
            $('a.button-gray', moduleContext).attr('href', cancelBtnURL)
        }
    }
})
$(document).ready(function () {
    if ($('.messaging-module .info-rp-skin').length > 0) {
        $('.messaging-module .info-rp-skin .info-close').click(function () {
            $('.messaging-module .info-rp-skin').hide()
        })
        if ($('.messaging-module').is(':visible')) {
            $('.messaging-module .info-rp-skin .info-message').attr('tabindex', '-1').focus().css('outline', 'none')
        }
        if ($('div.bottom-row').length > 0 && $('div.bottom-row').children().length > 0) {
            $('div.bottom-row').css('padding-bottom', $(window).height() / 2 + 'px')
        }
        if ($('div.single-column-row').length > 0 && $('div.single-column-row').children().length > 0) {
            $('div.single-column-row').css('padding-bottom', $(window).height() / 2 + 'px')
        }
    }
})
$(document).ready(function () {
    $('.messaging-module .info-skin .info-close,.messaging-module .info-skin .info-close-text').click(function () {
        $('.messaging-module .info-skin').hide()
    })
})
$(document).ready(function () {
    if ($('.modal-content-bdf-exit-olb-module .olb-exit-skin').length > 0) {
        $('a.show-olb-cancel-modal').click(function () {
            var targetModalId = $(this).attr('rel')
            var $targetModal = $('#' + targetModalId)
            var options = {
                size: 'flex-width',
                buttons: {},
                width: 742
            }
            $targetModal.boaModal(options)
            $('.ui-dialog-titlebar-close,.olb-cancel-modal-close-button', $targetModal).click(function () {
                $targetModal.dialog('close')
            })
        })
    }
})

function actionModalParam(loginURI) {
    var postAction = loginURI.split('postAction=')
    var formAction = loginURI.split('?')
    if (postAction.length > 0) {
        if (document.getElementById('postAction') != undefined) {
            document.getElementById('postAction').value = postAction[1]
        }
    }
    if (formAction.length > 0) {
        document.getElementById('splashForm').action = formAction[0]
    }
    document.getElementById('splashForm').submit()
}

$(document).ready(function () {
    $('a.lang-pref-popup').click(function () {
        var options = {
            size: 'small',
            buttons: {}
        }
        $('.modal-description').boaModal(options)
        $('.cancel-button-modal').click(function () {
            $('.modal-description').dialog('close')
        })
        if ($(this).attr('rel').length > 0) {
            $('a.continue-button-modal').attr('href', $(this).attr('rel'))
        }
    })
})
var vendorURL
$(document).ready(function () {
    if ($('.modal-content-bdf-module .no-account-skin').length > 0) {
        $('a.olbs-no-account-modal').click(function () {
            vendorURL = $(this).attr('rel')
            var options = {
                size: 'medium',
                buttons: {},
                callback: gotoVendor
            }

            function gotoVendor(val) {
                if (val) {
                    location.href = vendorURL
                }
            }

            $('#olbs-no-account-modal').boaModal(options)
            $('#boa-interstitial-layer-close').click(function () {
                $('#olbs-no-account-modal').dialog('close')
            })
        })
    }
})
$(document).ready(function () {
    var $sitekeyAffinityModal = $('.sitekey-affinity-modal')
    if ($('.sitekey-affinity-modal').length > 0) {
        var options = {
            size: 'medium'
        }
        if ((window.location.href).search('QKN') < 0) {
            $sitekeyAffinityModal.boaModal(options)
            $('.ui-dialog-titlebar-close,.sitekey-affinity-modal-close-button', $sitekeyAffinityModal).click(function () {
                $sitekeyAffinityModal.dialog('close')
            })
        }
    }
})
$(document).ready(function () {
    if ($('.modal-content-bdf-module .sitekey-cancel-skin').length > 0) {
        $('a.show-sitekey-cancel-modal').click(function () {
            var targetModalId = $(this).attr('rel')
            var $targetModal = $('#' + targetModalId)
            var options = {
                size: 'medium'
            }
            $targetModal.boaModal(options)
            $('.ui-dialog-titlebar-close,.sitekey-cancel-modal-close-button', $targetModal).click(function () {
                $targetModal.dialog('close')
            })
        })
        var $cancelInfoMsg = $('#infoNonChatText').html()
        $('a.show-cancel-enroll-modal').click(function () {
            var targetModalId = $(this).attr('rel')
            var $targetModal = $('#' + targetModalId)
            var options = {
                size: 'flex-width',
                buttons: {},
                width: 742
            }
            $targetModal.boaModal(options)
            $('.sitekey-cancel-modal-leave-button').click(function () {
                $('#CancelEnrollmentForm').submit()
            })
            $('.ui-dialog-titlebar-close,.sitekey-cancel-modal-close-button').click(function () {
                $targetModal.dialog('close')
                $('#infoNonChatText').html($cancelInfoMsg)
                if (typeof lpSendData == 'function') {
                    if (typeof ConversionStage != 'undefined') {
                        lpSendData('page', 'ConversionStage', ConversionStage)
                    }
                }
            })
            if ($('#lpButtonDivCancel').has('a').length == 0) {
                $('#lpButtonDivCancel').addClass('hide')
                $('#infoNonChatText').append('.')
            }
        })
    }
})
$(document).ready(function () {
    var $shOlbFtrBtm = $('.olb-footer-shared-module .olb-footer-common .gf-olb-btm')
    if ($shOlbFtrBtm.length > 0) {
        boaEqualHeight($('.olb-footer-shared-module .olb-footer-common .disclaimer-top'))
        boaEqualHeight($('.olb-footer-shared-module .olb-footer-common .disclaimer-btm'))
        $('.olb-footer-shared-module .olb-footer-common .gf-olb-btm span').boaVertAlign()
    }
})
$(document).ready(function () {
    var $tocDotIndex = 0
    var $tocListItem = ''
    var $serviceAgreementModuleOlbPrintSkin = $('.olb-popup-content-module .standard-print-olb-skin')
    if ($serviceAgreementModuleOlbPrintSkin.length > 0) {
        $('.olb-popup-content-module .standard-print-olb-skin ol.cat-list li > a').each(function () {
            if ($(this).html().indexOf('. ') != -1) {
                if ($(this).children('span.ada-hidden').length > 0) {
                    $tocListItem = $(this).clone().children(':first').remove().end().text()
                    $tocDotIndex = ($tocListItem.indexOf('. ') - 2)
                    $tocListItem = $tocListItem.replace($tocListItem.substring($tocDotIndex, ($tocDotIndex + 4)), '')
                    $tocListItem = $tocListItem.replace('TM', '<sup>TM</sup>')
                    $(this).html('<span class="ada-hidden">' + $(this).children(':first').text() + '</span>' + $.trim($tocListItem))
                    if ($(this).siblings('.section-intro').length > 0) {
                        $(this).siblings('.section-intro').children(':first').prepend('<span class="ada-hidden">' + $.trim($tocListItem) + ' </span>')
                    }
                } else {
                    $tocListItem = $(this).text()
                    $tocDotIndex = ($(this).text().indexOf('. ') - 2)
                    $(this).text($.trim($(this).text().replace($(this).text().substring($tocDotIndex, ($tocDotIndex + 3)), '')))
                    $(this).text($(this).text().replace('TM', '<sup>TM</sup>'))
                    if ($(this).siblings('.section-intro').length > 0) {
                        $(this).siblings('.section-intro').children(':first').prepend('<span class="ada-hidden">' + $(this).text() + ' </span>')
                    }
                }
            }
        })
        var $serviceAgreementTopicToggle = $('.olb-popup-content-module .standard-print-olb-skin .topic-toggle')
        var $serviceAgreementCategoryLink = $('.olb-popup-content-module .standard-print-olb-skin .category-link')
        var $serviceAgreementCategoryLinkADAText = $('.olb-popup-content-module .standard-print-olb-skin .category-link .ada-hidden')
        var $serviceAgreementTopicList = $('.olb-popup-content-module .standard-print-olb-skin .cat-list ol')
        var $serviceAgreementSectionIntro = $('.olb-popup-content-module .standard-print-olb-skin .cat-list .section-intro')
        $serviceAgreementCategoryLinkADAText.text(ADAShowTopicsText)
        $serviceAgreementTopicToggle.click(function () {
            $serviceAgreementTopicToggle.toggleClass('hide')
            if ($('#show-topics').hasClass('hide')) {
                $serviceAgreementTopicList.show()
                $serviceAgreementSectionIntro.show()
                $serviceAgreementCategoryLinkADAText.text(ADAHideTopicsText)
            } else {
                $serviceAgreementTopicList.hide()
                $serviceAgreementSectionIntro.hide()
                $serviceAgreementCategoryLinkADAText.text(ADAShowTopicsText)
            }
        })
        $serviceAgreementCategoryLink.click(function () {
            if ($(this).children('.ada-hidden').text() == ADAShowTopicsText) {
                $(this).children('.ada-hidden').text(ADAHideTopicsText)
            } else {
                $(this).children('.ada-hidden').text(ADAShowTopicsText)
            }
            $(this).siblings().toggle()
        })
    }
})
var CONTEXT = '.olb-tnc-module .two-scrollables-skin'
var olbTnCModuleTwoScrollSkin = {
    fn: {}
}
olbTnCModuleTwoScrollSkin.fn.init = function () {
    if ($('#tac-submit', CONTEXT).length > 0 && $('.nrm-checkbox', CONTEXT).length > 0) {
        $('#tac-submit', CONTEXT).removeAttr('href')
        $('#tac-submit span.ada-hidden').text(' button will be enabled if Electronic Communication Disclosure and Service Agreement Check boxes are checked')
        $('#tac-submit', CONTEXT).addClass('button-inactive').removeClass('button-blue')
    }
    $('.nrm-checkbox', CONTEXT).click(function () {
        if ($('.nrm-checkbox:checked', CONTEXT).length == $('.nrm-checkbox').length) {
            $('#tac-submit', CONTEXT).addClass('button-blue').removeClass('button-inactive').attr('href', 'javascript:void(0);')
            $('#tac-submit span.ada-hidden').text('')
        } else {
            $('#tac-submit', CONTEXT).addClass('button-inactive').removeClass('button-blue')
            $('#tac-submit span.ada-hidden').text(' button will be enabled if Electronic Communication Disclosure and Service Agreement Check boxes are checked')
        }
    })
    $('#tac-submit', CONTEXT).click(function () {
        var _this = $(this)
        if (!_this.hasClass('button-inactive')) {
            $('#VerifyEmailAddressForm').submit()
        } else {
            return false
        }
    })
    var $serviceAgreementModuleOlbTncSkin = $('.olb-tnc-module .two-scrollables-skin')
    if ($serviceAgreementModuleOlbTncSkin.length > 0) {
        $('.olb-tnc-module .two-scrollables-skin ol.cat-list li > a').each(function () {
            if ($(this).html().indexOf('. ') != -1) {
                if ($(this).children('span.ada-hidden').length > 0) {
                    $tocListItem = $(this).clone().children(':first').remove().end().text()
                    $tocDotIndex = ($tocListItem.indexOf('. ') - 2)
                    $tocListItem = $tocListItem.replace($tocListItem.substring($tocDotIndex, ($tocDotIndex + 4)), '')
                    $tocListItem = $tocListItem.replace('TM', '<sup>TM</sup>')
                    $(this).html('<span class="ada-hidden">' + $(this).children(':first').text() + '</span>' + $.trim($tocListItem))
                    if ($(this).siblings('.section-intro').length > 0) {
                        $(this).siblings('.section-intro').children(':first').prepend('<span class="ada-hidden">' + $.trim($tocListItem) + ' </span>')
                    }
                } else {
                    $tocListItem = $(this).text()
                    $tocDotIndex = ($(this).text().indexOf('. ') - 2)
                    $(this).text($.trim($(this).text().replace($(this).text().substring($tocDotIndex, ($tocDotIndex + 3)), '')))
                    $(this).text($(this).text().replace('TM', '<sup>TM</sup>'))
                    if ($(this).siblings('.section-intro').length > 0) {
                        $(this).siblings('.section-intro').children(':first').prepend('<span class="ada-hidden">' + $(this).text() + ' </span>')
                    }
                }
            }
        })
        var $serviceAgreementTopicToggle = $('.olb-tnc-module .two-scrollables-skin .topic-toggle')
        var $serviceAgreementCategoryLink = $('.olb-tnc-module .two-scrollables-skin .category-link')
        var $serviceAgreementCategoryLinkADAText = $('.olb-tnc-module .two-scrollables-skin .category-link .ada-hidden')
        var $serviceAgreementTopicList = $('.olb-tnc-module .two-scrollables-skin .cat-list ol')
        var $serviceAgreementSectionIntro = $('.olb-tnc-module .two-scrollables-skin .cat-list .section-intro')
        $serviceAgreementCategoryLinkADAText.text(ADAShowTopicsText)
        $serviceAgreementTopicToggle.click(function () {
            $serviceAgreementTopicToggle.toggleClass('hide')
            if ($('#show-topics').hasClass('hide')) {
                $serviceAgreementTopicList.show()
                $serviceAgreementSectionIntro.show()
                $serviceAgreementCategoryLinkADAText.text(ADAHideTopicsText)
            } else {
                $serviceAgreementTopicList.hide()
                $serviceAgreementSectionIntro.hide()
                $serviceAgreementCategoryLinkADAText.text(ADAShowTopicsText)
            }
        })
        $serviceAgreementCategoryLink.click(function () {
            if ($(this).children('.ada-hidden').text() == ADAShowTopicsText) {
                $(this).children('.ada-hidden').text(ADAHideTopicsText)
            } else {
                $(this).children('.ada-hidden').text(ADAShowTopicsText)
            }
            $(this).siblings().toggle()
        })
    }
}
$(document).ready(function () {
    olbTnCModuleTwoScrollSkin.fn.init()
})
$('document').ready(function () {
    $('#questionbox').blur(function () {
        ada_info($(this))
    })

    function ada_info($this) {
        var $val = $this.val(),
            $search_button = $('#nav-module-mag-glass'),
            $title = $search_button.attr('title')
        $search_button.attr('alt', $val + ' ' + $title)
    }

    ada_info($('#questionbox'))
})
if (typeof Crypto == 'undefined' || !Crypto.util) {
    (function () {
        var n = window.Crypto = {},
            q = n.util = {
                rotl: function (f, j) {
                    return f << j | f >>> 32 - j
                },
                rotr: function (f, j) {
                    return f << 32 - j | f >>> j
                },
                endian: function (f) {
                    if (f.constructor == Number) {
                        return q.rotl(f, 8) & 16711935 | q.rotl(f, 24) & 4278255360
                    }
                    for (var j = 0; j < f.length; j++) {
                        f[j] = q.endian(f[j])
                    }
                    return f
                },
                randomBytes: function (f) {
                    for (var j = []; f > 0; f--) {
                        j.push(Math.floor(Math.random() * 256))
                    }
                    return j
                },
                bytesToWords: function (f) {
                    for (var j = [], b = 0, a = 0; b < f.length; b++, a += 8) {
                        j[a >>> 5] |= f[b] << 24 - a % 32
                    }
                    return j
                },
                wordsToBytes: function (f) {
                    for (var j = [], b = 0; b < f.length * 32; b += 8) {
                        j.push(f[b >>> 5] >>> 24 - b % 32 & 255)
                    }
                    return j
                },
                bytesToHex: function (f) {
                    for (var j = [], b = 0; b < f.length; b++) {
                        j.push((f[b] >>> 4).toString(16))
                        j.push((f[b] & 15).toString(16))
                    }
                    return j.join('')
                },
                hexToBytes: function (f) {
                    for (var j = [], b = 0; b < f.length; b += 2) {
                        j.push(parseInt(f.substr(b, 2), 16))
                    }
                    return j
                },
                bytesToBase64: function (f) {
                    if (typeof btoa == 'function') {
                        return btoa(p.bytesToString(f))
                    }
                    for (var j = [], b = 0; b < f.length; b += 3) {
                        for (var a = f[b] << 16 | f[b + 1] << 8 | f[b + 2], e = 0; e < 4; e++) {
                            b * 8 + e * 6 <= f.length * 8 ? j.push('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.charAt(a >>> 6 * (3 - e) & 63)) : j.push('=')
                        }
                    }
                    return j.join('')
                },
                base64ToBytes: function (f) {
                    if (typeof atob == 'function') {
                        return p.stringToBytes(atob(f))
                    }
                    f = f.replace(/[^A-Z0-9+\/]/gi, '')
                    for (var j = [], b = 0, a = 0; b < f.length; a = ++b % 4) {
                        a != 0 && j.push(('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.indexOf(f.charAt(b - 1)) & Math.pow(2, -2 * a + 8) - 1) << a * 2 | 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.indexOf(f.charAt(b)) >>> 6 - a * 2)
                    }
                    return j
                }
            }
        n = n.charenc = {}
        n.UTF8 = {
            stringToBytes: function (f) {
                return p.stringToBytes(unescape(encodeURIComponent(f)))
            },
            bytesToString: function (f) {
                return decodeURIComponent(escape(p.bytesToString(f)))
            }
        }
        var p = n.Binary = {
            stringToBytes: function (f) {
                for (var j = [], b = 0; b < f.length; b++) {
                    j.push(f.charCodeAt(b) & 255)
                }
                return j
            },
            bytesToString: function (f) {
                for (var j = [], b = 0; b < f.length; b++) {
                    j.push(String.fromCharCode(f[b]))
                }
                return j.join('')
            }
        }
    })()
}
(function () {
    var n = Crypto,
        q = n.util,
        p = n.charenc,
        f = p.UTF8,
        j = p.Binary,
        b = n.SHA1 = function (a, e) {
            var g = q.wordsToBytes(b._sha1(a))
            return e && e.asBytes ? g : e && e.asString ? j.bytesToString(g) : q.bytesToHex(g)
        }
    b._sha1 = function (a) {
        if (a.constructor == String) {
            a = f.stringToBytes(a)
        }
        var e = q.bytesToWords(a),
            g = a.length * 8
        a = []
        var k = 1732584193,
            l = -271733879,
            o = -1732584194,
            r = 271733878,
            x = -1009589776
        e[g >> 5] |= 128 << 24 - g % 32
        e[(g + 64 >>> 9 << 4) + 15] = g
        for (g = 0; g < e.length; g += 16) {
            for (var i = k, t = l, w = o, s = r, u = x, h = 0; h < 80; h++) {
                if (h < 16) {
                    a[h] = e[g + h]
                } else {
                    var m = a[h - 3] ^ a[h - 8] ^ a[h - 14] ^ a[h - 16]
                    a[h] = m << 1 | m >>> 31
                }
                m = (k << 5 | k >>> 27) + x + (a[h] >>> 0) + (h < 20 ? (l & o | ~l & r) + 1518500249 : h < 40 ? (l ^ o ^ r) + 1859775393 : h < 60 ? (l & o | l & r | o & r) - 1894007588 : (l ^ o ^ r) - 899497514)
                x = r
                r = o
                o = l << 30 | l >>> 2
                l = k
                k = m
            }
            k += i
            l += t
            o += w
            r += s
            x += u
        }
        return [k,
            l,
            o,
            r,
            x]
    }
    b._blocksize = 16
    b._digestsize = 20
})();
(function () {
    var n = Crypto,
        q = n.util,
        p = n.charenc,
        f = p.UTF8,
        j = p.Binary
    n.HMAC = function (b, a, e, g) {
        if (a.constructor == String) {
            a = f.stringToBytes(a)
        }
        if (e.constructor == String) {
            e = f.stringToBytes(e)
        }
        if (e.length > b._blocksize * 4) {
            e = b(e, {
                asBytes: true
            })
        }
        var k = e.slice(0)
        e = e.slice(0)
        for (var l = 0; l < b._blocksize * 4; l++) {
            k[l] ^= 92
            e[l] ^= 54
        }
        b = b(k.concat(b(e.concat(a), {
            asBytes: true
        })), {
            asBytes: true
        })
        return g && g.asBytes ? b : g && g.asString ? j.bytesToString(b) : q.bytesToHex(b)
    }
})();
(function () {
    var n = Crypto,
        q = n.util,
        p = n.charenc,
        f = p.UTF8,
        j = p.Binary
    n.PBKDF2 = function (b, a, e, g) {
        function k(u, h) {
            return n.HMAC(l, h, u, {
                asBytes: true
            })
        }

        if (b.constructor == String) {
            b = f.stringToBytes(b)
        }
        if (a.constructor == String) {
            a = f.stringToBytes(a)
        }
        for (var l = g && g.hasher || n.SHA1, o = g && g.iterations || 1, r = [], x = 1; r.length < e;) {
            for (var i = k(b, a.concat(q.wordsToBytes([x]))), t = i, w = 1; w < o; w++) {
                t = k(b, t)
                for (var s = 0; s < i.length; s++) {
                    i[s] ^= t[s]
                }
            }
            r = r.concat(i)
            x++
        }
        r.length = e
        return g && g.asBytes ? r : g && g.asString ? j.bytesToString(r) : q.bytesToHex(r)
    }
})();
(function (n) {
    function q(b, a) {
        var e = b._blocksize * 4
        return e - a.length % e
    }

    var p = n.pad = {},
        f = function (b) {
            for (var a = b.pop(), e = 1; e < a; e++) {
                b.pop()
            }
        }
    p.NoPadding = {
        pad: function () {
        },
        unpad: function () {
        }
    }
    p.ZeroPadding = {
        pad: function (b, a) {
            var e = b._blocksize * 4,
                g = a.length % e
            if (g != 0) {
                for (g = e - g; g > 0; g--) {
                    a.push(0)
                }
            }
        },
        unpad: function () {
        }
    }
    p.iso7816 = {
        pad: function (b, a) {
            var e = q(b, a)
            for (a.push(128); e > 1; e--) {
                a.push(0)
            }
        },
        unpad: function (b) {
            for (; b.pop() != 128;) {
            }
        }
    }
    p.ansix923 = {
        pad: function (b, a) {
            for (var e = q(b, a), g = 1; g < e; g++) {
                a.push(0)
            }
            a.push(e)
        },
        unpad: f
    }
    p.iso10126 = {
        pad: function (b, a) {
            for (var e = q(b, a), g = 1; g < e; g++) {
                a.push(Math.floor(Math.random() * 256))
            }
            a.push(e)
        },
        unpad: f
    }
    p.pkcs7 = {
        pad: function (b, a) {
            for (var e = q(b, a), g = 0; g < e; g++) {
                a.push(e)
            }
        },
        unpad: f
    }
    n = n.mode = {}
    var j = n.Mode = function (b) {
        if (b) {
            this._padding = b
        }
    }
    j.prototype = {
        encrypt: function (b, a, e) {
            this._padding.pad(b, a)
            this._doEncrypt(b, a, e)
        },
        decrypt: function (b, a, e) {
            this._doDecrypt(b, a, e)
            this._padding.unpad(a)
        },
        _padding: p.iso7816
    }
    f = (n.ECB = function () {
        j.apply(this, arguments)
    }).prototype = new j
    f._doEncrypt = function (b, a) {
        for (var e = b._blocksize * 4, g = 0; g < a.length; g += e) {
            b._encryptblock(a, g)
        }
    }
    f._doDecrypt = function (b, a) {
        for (var e = b._blocksize * 4, g = 0; g < a.length; g += e) {
            b._decryptblock(a, g)
        }
    }
    f.fixOptions = function (b) {
        b.iv = []
    }
    f = (n.CBC = function () {
        j.apply(this, arguments)
    }).prototype = new j
    f._doEncrypt = function (b, a, e) {
        for (var g = b._blocksize * 4, k = 0; k < a.length; k += g) {
            if (k == 0) {
                for (var l = 0; l < g; l++) {
                    a[l] ^= e[l]
                }
            } else {
                for (l = 0; l < g; l++) {
                    a[k + l] ^= a[k + l - g]
                }
            }
            b._encryptblock(a, k)
        }
    }
    f._doDecrypt = function (b, a, e) {
        for (var g = b._blocksize * 4, k = 0; k < a.length; k += g) {
            var l = a.slice(k, k + g)
            b._decryptblock(a, k)
            for (var o = 0; o < g; o++) {
                a[k + o] ^= e[o]
            }
            e = l
        }
    }
    f = (n.CFB = function () {
        j.apply(this, arguments)
    }).prototype = new j
    f._padding = p.NoPadding
    f._doEncrypt = function (b, a, e) {
        var g = b._blocksize * 4
        e = e.slice(0)
        for (var k = 0; k < a.length; k++) {
            var l = k % g
            l == 0 && b._encryptblock(e, 0)
            a[k] ^= e[l]
            e[l] = a[k]
        }
    }
    f._doDecrypt = function (b, a, e) {
        var g = b._blocksize * 4
        e = e.slice(0)
        for (var k = 0; k < a.length; k++) {
            var l = k % g
            l == 0 && b._encryptblock(e, 0)
            var o = a[k]
            a[k] ^= e[l]
            e[l] = o
        }
    }
    f = (n.OFB = function () {
        j.apply(this, arguments)
    }).prototype = new j
    f._padding = p.NoPadding
    f._doEncrypt = function (b, a, e) {
        var g = b._blocksize * 4
        e = e.slice(0)
        for (var k = 0; k < a.length; k++) {
            k % g == 0 && b._encryptblock(e, 0)
            a[k] ^= e[k % g]
        }
    }
    f._doDecrypt = f._doEncrypt
    n = (n.CTR = function () {
        j.apply(this, arguments)
    }).prototype = new j
    n._padding = p.NoPadding
    n._doEncrypt = function (b, a, e) {
        for (var g = b._blocksize * 4, k = 0; k < a.length;) {
            var l = e.slice(0)
            b._encryptblock(l, 0)
            for (var o = 0; k < a.length && o < g; o++, k++) {
                a[k] ^= l[o]
            }
            if (++e[g - 1] == 256) {
                e[g - 1] = 0
                if (++e[g - 2] == 256) {
                    e[g - 2] = 0
                    if (++e[g - 3] == 256) {
                        e[g - 3] = 0
                        ++e[g - 4]
                    }
                }
            }
        }
    }
    n._doDecrypt = n._doEncrypt
})(Crypto);
(function () {
    function n(h, m) {
        for (var d = 0, c = 0; c < 8; c++) {
            if (m & 1) {
                d ^= h
            }
            var v = h & 128
            h = h << 1 & 255
            if (v) {
                h ^= 27
            }
            m >>>= 1
        }
        return d
    }

    for (var q = Crypto, p = q.util, f = q.charenc.UTF8, j = [
        99,
        124,
        119,
        123,
        242,
        107,
        111,
        197,
        48,
        1,
        103,
        43,
        254,
        215,
        171,
        118,
        202,
        130,
        201,
        125,
        250,
        89,
        71,
        240,
        173,
        212,
        162,
        175,
        156,
        164,
        114,
        192,
        183,
        253,
        147,
        38,
        54,
        63,
        247,
        204,
        52,
        165,
        229,
        241,
        113,
        216,
        49,
        21,
        4,
        199,
        35,
        195,
        24,
        150,
        5,
        154,
        7,
        18,
        128,
        226,
        235,
        39,
        178,
        117,
        9,
        131,
        44,
        26,
        27,
        110,
        90,
        160,
        82,
        59,
        214,
        179,
        41,
        227,
        47,
        132,
        83,
        209,
        0,
        237,
        32,
        252,
        177,
        91,
        106,
        203,
        190,
        57,
        74,
        76,
        88,
        207,
        208,
        239,
        170,
        251,
        67,
        77,
        51,
        133,
        69,
        249,
        2,
        127,
        80,
        60,
        159,
        168,
        81,
        163,
        64,
        143,
        146,
        157,
        56,
        245,
        188,
        182,
        218,
        33,
        16,
        255,
        243,
        210,
        205,
        12,
        19,
        236,
        95,
        151,
        68,
        23,
        196,
        167,
        126,
        61,
        100,
        93,
        25,
        115,
        96,
        129,
        79,
        220,
        34,
        42,
        144,
        136,
        70,
        238,
        184,
        20,
        222,
        94,
        11,
        219,
        224,
        50,
        58,
        10,
        73,
        6,
        36,
        92,
        194,
        211,
        172,
        98,
        145,
        149,
        228,
        121,
        231,
        200,
        55,
        109,
        141,
        213,
        78,
        169,
        108,
        86,
        244,
        234,
        101,
        122,
        174,
        8,
        186,
        120,
        37,
        46,
        28,
        166,
        180,
        198,
        232,
        221,
        116,
        31,
        75,
        189,
        139,
        138,
        112,
        62,
        181,
        102,
        72,
        3,
        246,
        14,
        97,
        53,
        87,
        185,
        134,
        193,
        29,
        158,
        225,
        248,
        152,
        17,
        105,
        217,
        142,
        148,
        155,
        30,
        135,
        233,
        206,
        85,
        40,
        223,
        140,
        161,
        137,
        13,
        191,
        230,
        66,
        104,
        65,
        153,
        45,
        15,
        176,
        84,
        187,
        22
    ], b = [], a = 0; a < 256; a++) {
        b[j[a]] = a
    }
    var e = [],
        g = [],
        k = [],
        l = [],
        o = [],
        r = []
    for (a = 0; a < 256; a++) {
        e[a] = n(a, 2)
        g[a] = n(a, 3)
        k[a] = n(a, 9)
        l[a] = n(a, 11)
        o[a] = n(a, 13)
        r[a] = n(a, 14)
    }
    var x = [
            0,
            1,
            2,
            4,
            8,
            16,
            32,
            64,
            128,
            27,
            54
        ],
        i = [
            [],
            [],
            [],
            []
        ],
        t,
        w,
        s,
        u = q.AES = {
            encrypt: function (h, m, d) {
                d = d || {}
                var c = d.mode || new q.mode.OFB
                c.fixOptions && c.fixOptions(d)
                h = h.constructor == String ? f.stringToBytes(h) : h
                var v = d.iv || p.randomBytes(u._blocksize * 4)
                m = m.constructor == String ? q.PBKDF2(m, v, 32, {
                    asBytes: true
                }) : m
                u._init(m)
                c.encrypt(u, h, v)
                h = d.iv ? h : v.concat(h)
                return d && d.asBytes ? h : p.bytesToBase64(h)
            },
            decrypt: function (h, m, d) {
                d = d || {}
                var c = d.mode || new q.mode.OFB
                c.fixOptions && c.fixOptions(d)
                h = h.constructor == String ? p.base64ToBytes(h) : h
                var v = d.iv || h.splice(0, u._blocksize * 4)
                m = m.constructor == String ? q.PBKDF2(m, v, 32, {
                    asBytes: true
                }) : m
                u._init(m)
                c.decrypt(u, h, v)
                return d && d.asBytes ? h : f.bytesToString(h)
            },
            _blocksize: 4,
            _encryptblock: function (h, m) {
                for (var d = 0; d < u._blocksize; d++) {
                    for (var c = 0; c < 4; c++) {
                        i[d][c] = h[m + c * 4 + d]
                    }
                }
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] ^= s[c][d]
                    }
                }
                for (var v = 1; v < w; v++) {
                    for (d = 0; d < 4; d++) {
                        for (c = 0; c < 4; c++) {
                            i[d][c] = j[i[d][c]]
                        }
                    }
                    i[1].push(i[1].shift())
                    i[2].push(i[2].shift())
                    i[2].push(i[2].shift())
                    i[3].unshift(i[3].pop())
                    for (c = 0; c < 4; c++) {
                        d = i[0][c]
                        var y = i[1][c],
                            z = i[2][c],
                            A = i[3][c]
                        i[0][c] = e[d] ^ g[y] ^ z ^ A
                        i[1][c] = d ^ e[y] ^ g[z] ^ A
                        i[2][c] = d ^ y ^ e[z] ^ g[A]
                        i[3][c] = g[d] ^ y ^ z ^ e[A]
                    }
                    for (d = 0; d < 4; d++) {
                        for (c = 0; c < 4; c++) {
                            i[d][c] ^= s[v * 4 + c][d]
                        }
                    }
                }
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] = j[i[d][c]]
                    }
                }
                i[1].push(i[1].shift())
                i[2].push(i[2].shift())
                i[2].push(i[2].shift())
                i[3].unshift(i[3].pop())
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] ^= s[w * 4 + c][d]
                    }
                }
                for (d = 0; d < u._blocksize; d++) {
                    for (c = 0; c < 4; c++) {
                        h[m + c * 4 + d] = i[d][c]
                    }
                }
            },
            _decryptblock: function (h, m) {
                for (var d = 0; d < u._blocksize; d++) {
                    for (var c = 0; c < 4; c++) {
                        i[d][c] = h[m + c * 4 + d]
                    }
                }
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] ^= s[w * 4 + c][d]
                    }
                }
                for (var v = 1; v < w; v++) {
                    i[1].unshift(i[1].pop())
                    i[2].push(i[2].shift())
                    i[2].push(i[2].shift())
                    i[3].push(i[3].shift())
                    for (d = 0; d < 4; d++) {
                        for (c = 0; c < 4; c++) {
                            i[d][c] = b[i[d][c]]
                        }
                    }
                    for (d = 0; d < 4; d++) {
                        for (c = 0; c < 4; c++) {
                            i[d][c] ^= s[(w - v) * 4 + c][d]
                        }
                    }
                    for (c = 0; c < 4; c++) {
                        d = i[0][c]
                        var y = i[1][c],
                            z = i[2][c],
                            A = i[3][c]
                        i[0][c] = r[d] ^ l[y] ^ o[z] ^ k[A]
                        i[1][c] = k[d] ^ r[y] ^ l[z] ^ o[A]
                        i[2][c] = o[d] ^ k[y] ^ r[z] ^ l[A]
                        i[3][c] = l[d] ^ o[y] ^ k[z] ^ r[A]
                    }
                }
                i[1].unshift(i[1].pop())
                i[2].push(i[2].shift())
                i[2].push(i[2].shift())
                i[3].push(i[3].shift())
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] = b[i[d][c]]
                    }
                }
                for (d = 0; d < 4; d++) {
                    for (c = 0; c < 4; c++) {
                        i[d][c] ^= s[c][d]
                    }
                }
                for (d = 0; d < u._blocksize; d++) {
                    for (c = 0; c < 4; c++) {
                        h[m + c * 4 + d] = i[d][c]
                    }
                }
            },
            _init: function (h) {
                t = h.length / 4
                w = t + 6
                u._keyexpansion(h)
            },
            _keyexpansion: function (h) {
                s = []
                for (var m = 0; m < t; m++) {
                    s[m] = [
                        h[m * 4],
                        h[m * 4 + 1],
                        h[m * 4 + 2],
                        h[m * 4 + 3]
                    ]
                }
                for (m = t; m < u._blocksize * (w + 1); m++) {
                    h = [
                        s[m - 1][0],
                        s[m - 1][1],
                        s[m - 1][2],
                        s[m - 1][3]
                    ]
                    if (m % t == 0) {
                        h.push(h.shift())
                        h[0] = j[h[0]]
                        h[1] = j[h[1]]
                        h[2] = j[h[2]]
                        h[3] = j[h[3]]
                        h[0] ^= x[m / t]
                    } else {
                        if (t > 6 && m % t == 4) {
                            h[0] = j[h[0]]
                            h[1] = j[h[1]]
                            h[2] = j[h[2]]
                            h[3] = j[h[3]]
                        }
                    }
                    s[m] = [
                        s[m - t][0] ^ h[0],
                        s[m - t][1] ^ h[1],
                        s[m - t][2] ^ h[2],
                        s[m - t][3] ^ h[3]
                    ]
                }
            }
        }
})()
$(document).ready(function () {
    if ($('.online-id-module .bc-enroll-skin').length > 0) {
        var count = 0
        $('.messaging-module#clientSideErrors').each(function () {
            count++
            if (count == 2) {
                $(this).remove()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#CreateEnrollmentForm').validate({
                messages: {
                    'enroll-olb-id': {
                        required: 'Create an Online ID that is 6 to 32 characters in length.',
                        nodigits: 'Create an Online ID that does not contain all numbers.',
                        rangelength: $.validator.format('Create an Online ID that is {0} to {1} characters in length.'),
                        letterNumberSpecialCombo: 'Enter an Online ID with no spaces and using only the allowed special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-enter-enroll-pass': {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-enroll-pass': {
                        required: 'Re-enter your Passcode correctly to continue.',
                        equalTo: 'Re-enter your Passcode correctly to continue.'
                    },
                    'tlpvt-enter-email': {
                        required: 'The email address entered is not valid. Please enter a valid address.',
                        email: 'The email address entered is not valid. Please enter a valid address.'
                    },
                    'tlpvt-reenter-email': {
                        required: 'The email address entered is not valid. Please enter a valid address.',
                        equalTo: 'The email addresses don\'t match. Please re-enter your valid email address.'
                    },
                    'tlpvt-mob-first3': {
                        required: 'Your mobile number should contain 10 digits. Please enter a valid number.',
                        integer: 'Your mobile number should contain 10 digits. Please enter a valid number.',
                        minlength: 'Your mobile number should contain 10 digits. Please enter a valid number.'
                    },
                    'tlpvt-mob-middle3': {
                        required: 'Your mobile number should contain 10 digits. Please enter a valid number.',
                        integer: 'Your mobile number should contain 10 digits. Please enter a valid number.',
                        minlength: 'Your mobile number should contain 10 digits. Please enter a valid number.'
                    },
                    'tlpvt-mob-last4': {
                        required: 'Your mobile number should contain 10 digits. Please enter a valid number.',
                        integer: 'Your mobile number should contain 10 digits. Please enter a valid number.',
                        minlength: 'Your mobile number should contain 10 digits. Please enter a valid number.'
                    }
                },
                rules: {
                    'enroll-olb-id': {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    },
                    'tlpvt-enter-enroll-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-enter-enroll-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-enroll-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-reenter-enroll-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-enroll-pass')
                    },
                    'tlpvt-enter-email': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-enter-email:visible').length > 0) {
                                    return true
                                } else {
                                    return false
                                }
                            }
                        },
                        email: true
                    },
                    'tlpvt-reenter-email': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-reenter-email:visible').length > 0) {
                                    return true
                                } else {
                                    return false
                                }
                            }
                        },
                        equalTo: $('#tlpvt-enter-email')
                    },
                    'tlpvt-mob-first3': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-mob-middle3').val().length > 0 || $('#tlpvt-mob-last4').val().length > 0) {
                                    req = true
                                }
                                return req
                            }
                        },
                        integer: true,
                        minlength: 3
                    },
                    'tlpvt-mob-middle3': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-mob-first3').val().length > 0 || $('#tlpvt-mob-last4').val().length > 0) {
                                    req = true
                                }
                                return req
                            }
                        },
                        integer: true,
                        minlength: 3
                    },
                    'tlpvt-mob-last4': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-mob-first3').val().length > 0 || $('#tlpvt-mob-middle3').val().length > 0) {
                                    req = true
                                }
                                return req
                            }
                        },
                        integer: true,
                        minlength: 4
                    }
                },
                includeFieldLabel: false,
                disableButtonBlueId: 'create-passcode-submit',
                invalidHandler: function (form, validator) {
                    for (var i = 0; i < validator.errorList.length; i++) {
                        if ($($(validator.errorList[i]).attr('element')).hasClass('mob-lrg')) {
                            $('span.mob-title').addClass('field-level-error').css('display', 'block')
                        } else {
                            $('span.mob-title').removeClass('field-level-error').css('display', 'block')
                        }
                    }
                }
            })
        } else {
            $('#CreateEnrollmentForm').validate({
                messages: {
                    'enroll-olb-id': {
                        required: 'Cree una Identificaci&#243;n en l&#237;nea que tenga entre 6 y 32 caracteres de longitud.',
                        nodigits: 'Cree una Identificaci&#243;n en l&#237;nea que no contenga s&#243;lo n&#250;meros.',
                        rangelength: $.validator.format('Cree una Identificaci&#243;n en l&#237;nea que tenga entre {0} y {1} caracteres de longitud.'),
                        letterNumberSpecialCombo: 'Indique una Identificaci&#243;n en L&#237;nea sin espacios y usando s&#243;lo los caracteres especiales permitidos: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-enter-enroll-pass': {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-enroll-pass': {
                        required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                        equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                    },
                    'tlpvt-enter-email': {
                        required: 'La direcci&#243;n de correo electr&#243;nico indicada no es v&#225;lida. Por favor, indique una direcci&#243;n v&#225;lida.',
                        email: 'La direcci&#243;n de correo electr&#243;nico indicada no es v&#225;lida. Por favor, indique una direcci&#243;n v&#225;lida.'
                    },
                    'tlpvt-reenter-email': {
                        required: 'La direcci&#243;n de correo electr&#243;nico indicada no es v&#225;lida. Por favor, indique una direcci&#243;n v&#225;lida.',
                        equalTo: 'Las direcciones de correo electr&#243;nico no coinciden. Por favor, vuelva a indicar su direcci&#243;n de correo electr&#243;nico v&#225;lida.'
                    },
                    'tlpvt-mob-first3': {
                        required: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.',
                        integer: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.',
                        minlength: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.'
                    },
                    'tlpvt-mob-middle3': {
                        required: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.',
                        integer: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.',
                        minlength: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.'
                    },
                    'tlpvt-mob-last4': {
                        required: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.',
                        integer: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.',
                        minlength: 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.'
                    }
                },
                rules: {
                    'enroll-olb-id': {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    },
                    'tlpvt-enter-enroll-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-enter-enroll-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-enroll-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-reenter-enroll-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-enroll-pass')
                    },
                    'tlpvt-enter-email': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-enter-email:visible').length > 0) {
                                    return true
                                } else {
                                    return false
                                }
                            }
                        },
                        email: true
                    },
                    'tlpvt-reenter-email': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-reenter-email:visible').length > 0) {
                                    return true
                                } else {
                                    return false
                                }
                            }
                        },
                        equalTo: $('#tlpvt-enter-email')
                    },
                    'tlpvt-mob-first3': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-mob-middle3').val().length > 0 || $('#tlpvt-mob-last4').val().length > 0) {
                                    req = true
                                }
                                return req
                            }
                        },
                        integer: true,
                        minlength: 3
                    },
                    'tlpvt-mob-middle3': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-mob-first3').val().length > 0 || $('#tlpvt-mob-last4').val().length > 0) {
                                    req = true
                                }
                                return req
                            }
                        },
                        integer: true,
                        minlength: 3
                    },
                    'tlpvt-mob-last4': {
                        required: {
                            depends: function (element) {
                                var req = false
                                if ($('#tlpvt-mob-first3').val().length > 0 || $('#tlpvt-mob-middle3').val().length > 0) {
                                    req = true
                                }
                                return req
                            }
                        },
                        integer: true,
                        minlength: 4
                    }
                },
                includeFieldLabel: false,
                disableButtonBlueId: 'create-passcode-submit',
                invalidHandler: function (form, validator) {
                    for (var i = 0; i < validator.errorList.length; i++) {
                        if ($($(validator.errorList[i]).attr('element')).hasClass('mob-lrg')) {
                            $('span.mob-title').addClass('field-level-error').css('display', 'block')
                        } else {
                            $('span.mob-title').removeClass('field-level-error').css('display', 'block')
                        }
                    }
                }
            })
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#enroll-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Between 6-32 characters'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Spaces'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Special Characters EXCEPT <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -65,
                tooltipLeft: 242
            })
            $('#tlpvt-reenter-enroll-pass').fieldMatcher({
                tooltipID: 'reenter-new-pass-tooltip',
                originFieldID: 'tlpvt-enter-enroll-pass',
                tooltipLeft: 243,
                tooltipTop: 225,
                matchText: 'Passcodes match',
                notMatchText: 'Passcodes do not match',
                formatCheckerCallback: function () {
                    $('#reenter-new-pass-tooltip').css('top', ($('#tlpvt-reenter-enroll-pass').position().top - 5) + 'px')
                    $('#reenter-new-pass-tooltip').css('left', ($('#tlpvt-reenter-enroll-pass').position().left + 243) + 'px')
                }
            })
            $('#tlpvt-enter-enroll-pass').formatChecker({
                tooltipID: 'enter-new-pass-tooltip',
                tooltipTop: 64,
                tooltipLeft: 245,
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Be 8 to 20 characters'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Use only these special characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                }
            })
            $('#tlpvt-reenter-email').fieldMatcher({
                tooltipID: 'reenter-email-tooltip',
                originFieldID: 'tlpvt-enter-email',
                tooltipLeft: 410,
                tooltipTop: 889,
                matchText: 'Email addresses match',
                notMatchText: 'Email addresses don\'t match',
                formatCheckerCallback: function () {
                    $('#reenter-email-tooltip').css('top', ($('#tlpvt-reenter-email').position().top - 5) + 'px')
                    $('#reenter-email-tooltip').css('left', ($('#tlpvt-reenter-email').position().left + 243) + 'px')
                }
            })
        } else {
            $('#enroll-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Entre 6 y 32 caracteres'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'Una combinaci&#243;n de 2 tipos de caracteres (letras, n&#250;meros y especiales) o tener s&#243;lo letras'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Espacios'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Caracteres especiales EXCEPTO <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -65,
                tooltipLeft: 242
            })
            $('#tlpvt-reenter-enroll-pass').fieldMatcher({
                tooltipID: 'reenter-new-pass-tooltip',
                originFieldID: 'tlpvt-enter-enroll-pass',
                tooltipLeft: 243,
                tooltipTop: 225,
                matchText: 'Las contrase&#241;as coinciden',
                notMatchText: 'Las contrase&#241;as no coinciden',
                formatCheckerCallback: function () {
                    $('#reenter-new-pass-tooltip').css('top', ($('#tlpvt-reenter-enroll-pass').position().top - 5) + 'px')
                    $('#reenter-new-pass-tooltip').css('left', ($('#tlpvt-reenter-enroll-pass').position().left + 243) + 'px')
                }
            })
            $('#tlpvt-enter-enroll-pass').formatChecker({
                tooltipID: 'enter-new-pass-tooltip',
                tooltipTop: 64,
                tooltipLeft: 245,
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Tener entre 8 y 20 caracteres'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Tener s&#243;lo estos caracteres especiales <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                }
            })
            $('#tlpvt-reenter-email').fieldMatcher({
                tooltipID: 'reenter-email-tooltip',
                originFieldID: 'tlpvt-enter-email',
                tooltipLeft: 410,
                tooltipTop: 889,
                matchText: 'Las direcciones de correo electr&#243;nico coinciden',
                notMatchText: 'Las direcciones de correo electr&#243;nico no coinciden',
                formatCheckerCallback: function () {
                    $('#reenter-email-tooltip').css('top', ($('#tlpvt-reenter-email').position().top - 5) + 'px')
                    $('#reenter-email-tooltip').css('left', ($('#tlpvt-reenter-email').position().left + 243) + 'px')
                    $('#reenter-email-tooltip .tooltip-content').css('padding', '10px 5px')
                }
            })
        }
        var bcphonenumber = {
            autotab: function (currentEle, size, nextElem) {
                var $currentElement = $('#' + currentEle)
                var $currTxtVal
                $currentElement.keyup(function (e) {
                    var $keyID = (window.event) ? event.keyCode : e.keyCode
                    var $nextElement = $('#' + nextElem)
                    $currTxtVal = $currentElement.val()
                    if (isNaN($currTxtVal)) {
                        var pattern = new RegExp('[^0-9]+', 'g')
                        $currTxtVal = $currTxtVal.replace(pattern, '')
                        $currentElement.val($currTxtVal)
                    }
                    if ($currentElement.val().length >= size && (($keyID >= 48 && $keyID <= 90) || ($keyID >= 96 && $keyID <= 105))) {
                        $currentElement.blur()
                        $nextElement.focus()
                    }
                })
            }
        }
        bcphonenumber.autotab('tlpvt-mob-first3', 3, 'tlpvt-mob-middle3')
        bcphonenumber.autotab('tlpvt-mob-middle3', 3, 'tlpvt-mob-last4')
        bcphonenumber.autotab('tlpvt-mob-last4', 4, 'tlpvt-mob-last4')
        $('.phone-section .edit').click(function () {
            $('.phone-section').hide()
            $('.mobile-num ').show()
        })
        $('.email-section .edit').click(function () {
            $('.email-section').hide()
            $('.email-id').show()
        })
        $('.online-id-module .bc-enroll-skin .alt-id a, .online-id-module .bc-enroll-skin .alt-id-check a').click(function () {
            $('#enroll-olb-id').val($(this).html())
            $('.online-id-module .bc-enroll-skin .alt-id, .online-id-module .bc-enroll-skin .alt-id-check').hide().removeClass('m-40')
            $('.online-id-module .bc-enroll-skin .input-container').removeClass('no-btm-margin').addClass('m-40')
        })
        $('#create-passcode-submit').click(function () {
            if ($('label[for=enroll-olb-id]').hasClass('field-level-error')) {
                $('#enter-new-olb-id-tooltip').addClass('enrollOlbIdTop')
            } else {
                $('#enter-new-olb-id-tooltip').removeClass('enrollOlbIdTop')
            }
            if ($('label[for=tlpvt-reenter-email]').hasClass('field-level-error')) {
                $('#reenter-email-tooltip').css('top', ($('#tlpvt-reenter-email').position().top - 5) + 'px')
                $('#reenter-email-tooltip').css('left', ($('#tlpvt-reenter-email').position().left + 243) + 'px')
            }
        })
        $('#enroll-olb-id').on('keyup', function () {
            var $thisButton = $(this)
            if ($thisButton.val().length > 0) {
                $('#check-id-available,#create-passcode-submit', '#CreateEnrollmentForm').removeClass('button-inactive')
                $('#check-id-available', '#CreateEnrollmentForm').attr('href', 'javascript:void(0);')
            } else {
                $('#check-id-available,#create-passcode-submit', '#CreateEnrollmentForm').addClass('button-inactive')
                $('#check-id-available', '#CreateEnrollmentForm').removeAttr('href')
            }
        })
        $('#check-id-available').click(function () {
            $('div#clientSideErrors').addClass('hide')
            $('.bc-enroll-skin .simple-form .input-container label[for="enroll-olb-id"]').removeClass('field-level-error')
            var $thisButton = $(this)
            if (!$thisButton.hasClass('button-inactive')) {
                if (typeof cmCreateManualLinkClickTag !== 'undefined') {
                    cmCreateManualLinkClickTag('javascript:void(0);', 'check-id-available', typeof cmPageId !== 'undefined' ? cmPageId : 'PVParamsMissing')
                }
                $.ajax({
                    url: '/login/enroll/checkOIDAvailability.go',
                    dataType: 'jsonp',
                    data: {
                        onlineId: bcEnrollEncrypt($('#enroll-olb-id').val()),
                        action: 'checkOIDAvailability'
                    },
                    crossDomain: true,
                    cache: false,
                    timeout: 10000,
                    beforeSend: function () {
                    },
                    error: function (XMLHTTPRequest, textStatus, errorThrown) {
                        recordTLErrorInfo(textStatus + errorThrown)
                    },
                    success: function (data) {
                        if (data.onlineIdAvailable == false) {
                            $('.alt-id-check a', '#CreateEnrollmentForm').html('' + data.suggestedISSPOnlineID)
                            $('.alt-id-check', '#CreateEnrollmentForm').removeClass('hide').addClass('m-40')
                            $('.input-container', '#CreateEnrollmentForm').removeClass('m-40')
                            displayErrorMesg()
                        } else {
                            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                                $('.id-available').html('<p>Online ID is available</p>')
                            } else {
                                $('.id-available').html('La Identificaci&#243;n en l&#237;nea est&#225; disponible').focus()
                            }
                            $thisButton.addClass('hide')
                            $('.id-available').removeClass('hide').focus()
                            $('.online-id-module .bc-enroll-skin .alt-id-check').hide().removeClass('m-40')
                            $('.online-id-module .bc-enroll-skin .input-container').removeClass('no-btm-margin').addClass('m-40')
                            $('.id-available p').attr('aria-live', 'rude')
                        }
                    },
                    complete: function (XMLHTTPRequest, textStatus) {
                    }
                })
            }
        })

        function recordTLErrorInfo(errorMessage) {
            if ((typeof TeaLeaf != 'undefined') && (typeof TeaLeaf.Event.tlAddCustomEvent != 'undefined')) {
                var $errorType = 'OnlineIDAvailabilityError'
                var $errorPage
                $errorPage = $('title').html()
                var $errorMsg = errorMessage
                var $nVO = {
                    Page: $errorPage,
                    ErrorMessage: $errorMsg
                }
                TeaLeaf.Event.tlAddCustomEvent($errorType, $nVO)
            }
        }

        function bcEnrollEncrypt(data) {
            return Crypto.AES.encrypt(data, Crypto.charenc.UTF8.stringToBytes(isspDecryptionKey), {
                mode: new Crypto.mode.ECB(Crypto.pad.NoPadding)
            })
        }

        function displayErrorMesg() {
            var titleError = ''
            var errorMsg1 = ''
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                titleError = 'We can&#39;t process your request.'
                errorMsg1 = '<li><span>The Online ID you requested is already taken. Please enter a different Online ID.</span></li>'
            } else {
                titleError = 'No podemos procesar su solicitud.'
                errorMsg1 = '<li><span>La Identificaci&#243;n en l&#237;nea que ha solicitado ya se encuentra en uso. Por favor, indique una Identificaci&#243;n en l&#237;nea diferente.</li>'
            }
            $('.bc-enroll-skin .simple-form .input-container label[for="enroll-olb-id"]').addClass('field-level-error')
            $('div#clientSideErrors .error-skin .error-message p.title').empty().append(titleError)
            $('div#clientSideErrors .error-skin .error-message ul').empty().append(errorMsg1)
            $('div#clientSideErrors').removeClass('hide').focus()
            var errorContainerClass = '.global-messaging-module, .messaging-module, .messaging-aug-module'
            $(errorContainerClass).each(function () {
                if ($(this).not('#clientSideErrors').length > 0 && $(this).find('.page-error-skin, .error-skin, .error-liveperson-skin').length > 0) {
                    $(this).remove()
                }
            })
        }
    }
})
var lpfielderror = 0
$(document).ready(function () {
    if ($('.online-id-module .change-enroll-skin').length > 0) {
        $('#btnChangeOnlineId').click(function () {
            if ($('label[for=\'new-olb-id\']').hasClass('field-level-error')) {
                if (typeof lpSendData == 'function') {
                    lpfielderror++
                    lpSendData('page', 'FieldErrorCounter', lpfielderror)
                }
            }
            if ($('label[for=\'new-olb-id-trans\']').hasClass('field-error')) {
                if (typeof lpSendData == 'function') {
                    lpfielderror++
                    lpSendData('page', 'FieldErrorCounter', lpfielderror)
                }
            }
        })
        $('#new-olb-id,#new-olb-id-trans').keypress(function (e) {
            if (e.keyCode == 13) {
                $('#ChangeOnlineIDForm').submit()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#ChangeOnlineIDForm').validate({
                messages: {
                    'new-olb-id': {
                        required: 'Create an Online ID that is 6 to 32 characters in length.',
                        nodigits: 'Create an Online ID that does not contain all numbers.',
                        rangelength: $.validator.format('Create an Online ID that is {0} to {1} characters in length.'),
                        letterNumberSpecialCombo: 'Enter an Online ID with no spaces and using only the allowed special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'new-olb-id-trans': {
                        required: 'Enter a new Online ID.',
                        nodigits: 'Enter an Online ID that doesn\'t contain all numbers.',
                        nospacesnospecial: 'Enter a new Online ID without spaces or these special characters: ! % & ^ < > : [ ] " \' ` $  |',
                        rangelength: $.validator.format('Enter an online ID that\'s {0}-{1} characters in length.'),
                        onenumberoneletter: 'The Online ID you entered is not correct, it needs to have at least 1 number and 1 letter. Please correct and reenter your Online ID.'
                    }
                },
                rules: {
                    'new-olb-id': {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    },
                    'new-olb-id-trans': {
                        required: true,
                        nospacesnospecial: ':"%<>&^![\\]\'`$\\\\|',
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ]
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#ChangeOnlineIDForm').validate({
                messages: {
                    'new-olb-id': {
                        required: 'Cree una Identificaci&#243;n en l&#237;nea que tenga entre 6 y 32 caracteres de longitud.',
                        nodigits: 'Cree una Identificaci&#243;n en l&#237;nea que no contenga s&#243;lo n&#250;meros.',
                        rangelength: $.validator.format('Cree una Identificaci&#243;n en l&#237;nea que tenga entre {0} y {1} caracteres de longitud.'),
                        letterNumberSpecialCombo: 'Indique una Identificaci&#243;n en L&#237;nea sin espacios y usando s&#243;lo los caracteres especiales permitidos: @ # * ( ) + = { } / ? ~ ; , . - _'
                    }
                },
                rules: {
                    'new-olb-id': {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    }
                },
                includeFieldLabel: false
            })
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#new-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Between 6 and 32 characters'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Spaces'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Special Characters EXCEPT <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -60,
                tooltipLeft: 244
            })
            $('#new-olb-id-trans').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Between 6 to 32 characters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'No spaces'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'No ! % &amp; ^ &quot; &lt; &gt; : [ ] \' ` $ \\ |',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                oneNumberOneLetterRule: {
                    applyRule: false,
                    ruleText: '1 number, 1 letter'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -5,
                tooltipLeft: 244
            })
        } else {
            $('#new-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Entre 6 y 32 caracteres'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Espacios'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Caracteres especiales EXCEPTO <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -55,
                tooltipLeft: 244
            })
        }
        if ($('#new-olb-id,#new-olb-id-trans').is(':visible')) {
            $('#new-olb-id,#new-olb-id-trans').focus()
        }
        $('#new-olb-id,#new-olb-id-trans').blur(function () {
            if ($('#btnSuggestOnlineId').length > 0) {
                $('#enter-new-olb-id-tooltip').css('display', 'none')
            }
        })
    }
})
$(document).ready(function () {
    if ($('.online-id-module .change-skin').size() > 0) {
        $('body').keypress(function (e) {
            if (e.keyCode == 13 && (e.target.id == 'new-olb-id' || e.target.id == 're-enter-olb-id')) {
                $('#CreateOnlineIDForm').submit()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#CreateOnlineIDForm').validate({
                messages: {
                    'new-olb-id': {
                        required: 'Create an Online ID that is 6 to 32 characters in length.',
                        nodigits: 'Create an Online ID that does not contain all numbers.',
                        rangelength: $.validator.format('Create an Online ID that is {0} to {1} characters in length.'),
                        letterNumberSpecialCombo: 'Enter an Online ID with no spaces and using only the allowed special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        StrValidation: 'Please create an Online ID that\'s different from your Passcode.'
                    },
                    're-enter-olb-id': {
                        required: 'Please re-enter your Online ID to continue.',
                        StrValidation: 'Please create an Online ID that\'s different from your Passcode.',
                        equalToIgnoreCase: 'Please re-enter the Online ID twice, exactly the same, to confirm.'
                    }
                },
                rules: {
                    'new-olb-id': {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        StrValidation: [
                            'passcode',
                            'passc0de'
                        ],
                        letterNumberSpecialCombo: true
                    },
                    're-enter-olb-id': {
                        required: true,
                        StrValidation: [
                            'passcode',
                            'passc0de'
                        ],
                        equalToIgnoreCase: $('#new-olb-id')
                    }
                },
                includeFieldLabel: false,
                invalidHandler: function (form, validator) {
                    for (var i = 0; i < validator.errorList.length; i++) {
                        if ($(validator.errorList[i].element).is('#new-olb-id')) {
                            $('#enter-new-olb-id-tooltip').addClass('error')
                        } else {
                            if ($(validator.errorList[i].element).is('#re-enter-olb-id')) {
                                $('#reenter-new-olb-id-tooltip').addClass('error')
                            }
                        }
                    }
                }
            })
        } else {
            $('#CreateOnlineIDForm').validate({
                messages: {
                    'new-olb-id': {
                        required: 'Cree una Identificaci&#243;n en l&#237;nea que tenga entre 6 y 32 caracteres de longitud.',
                        nodigits: 'Cree una Identificaci&#243;n en l&#237;nea que no contenga s&#243;lo n&#250;meros.',
                        rangelength: $.validator.format('Cree una Identificaci&#243;n en l&#237;nea que tenga entre {0} y {1} caracteres de longitud.'),
                        letterNumberSpecialCombo: 'Indique una Identificaci&#243;n en L&#237;nea sin espacios y usando s&#243;lo los caracteres especiales permitidos: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    're-enter-olb-id': {
                        required: 'Por favor, indique la Identificaci&#243;n en l&#237;nea dos veces, exactamente igual, para confirmar.',
                        equalToIgnoreCase: 'Por favor, introduzca el ID de l&#237;nea dos veces, exactamente lo mismo, para confirmar.'
                    }
                },
                rules: {
                    'new-olb-id': {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    },
                    're-enter-olb-id': {
                        required: true,
                        equalToIgnoreCase: $('#new-olb-id')
                    }
                },
                includeFieldLabel: false,
                invalidHandler: function (form, validator) {
                    for (var i = 0; i < validator.errorList.length; i++) {
                        if ($(validator.errorList[i].element).is('#new-olb-id')) {
                            $('#enter-new-olb-id-tooltip').addClass('error')
                        } else {
                            if ($(validator.errorList[i].element).is('#re-enter-olb-id')) {
                                $('#reenter-new-olb-id-tooltip').addClass('error')
                            }
                        }
                    }
                }
            })
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#new-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Between 6-32 characters'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Spaces'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Special Characters EXCEPT <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -69,
                tooltipLeft: 239,
                setAutoPos: true,
                regex: '[A-Z]'
            })
            $('#re-enter-olb-id').fieldMatcher({
                tooltipID: 'reenter-new-olb-id-tooltip',
                originFieldID: 'new-olb-id',
                tooltipLeft: 175,
                tooltipTop: 20,
                matchText: 'Online IDs match',
                notMatchText: 'Online IDs do not match',
                formatCheckerCallback: function () {
                },
                isCaseSensitive: true
            })
        } else {
            $('#new-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Entre 6 y 32 caracteres'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'Una combinaci&#243;n de 2 tipos de caracteres (letras, n&#250;meros y especiales) o tener s&#243;lo letras'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Espacios'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Caracteres especiales EXCEPTO <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -69,
                tooltipLeft: 239,
                setAutoPos: true
            })
            $('#re-enter-olb-id').fieldMatcher({
                tooltipID: 'reenter-new-olb-id-tooltip',
                originFieldID: 'new-olb-id',
                tooltipLeft: 175,
                tooltipTop: 20,
                matchText: 'Las Identificaciones en l&#237;nea coinciden',
                notMatchText: 'Las Identificaciones en l&#237;nea no coinciden',
                formatCheckerCallback: function () {
                    $('#enter-new-olb-id-tooltip:visible').addClass('shift-up')
                },
                isCaseSensitive: true
            })
        }
        $('.online-id-module .change-skin .input-container .alt-id a').click(function () {
            $('#new-olb-id').val($(this).html())
            $('.online-id-module .change-skin .input-container .alt-id').hide()
        })
    }
})
$(document).ready(function () {
    var userChange = false
    var $language = $('html').attr('lang').toLowerCase()
    var CONTEXT = '.edit-remove-skin'
    if (typeof (onlineidEidtNickName) !== 'undefined') {
        if ($('.online-id-module .edit-remove-skin').length > 0) {
            if ($('#continue-submit').length > 0) {
                $('#continue-submit .ada-hidden', CONTEXT).text(' disabled')
            }
            var $oidVal = $('#oid-newnickname', CONTEXT).val()
            $('#oid-newnickname', CONTEXT).keyup(function (e) {
                var $this = $(this),
                    $val = $this.val()
                var $continueSubmit = $('#continue-submit', CONTEXT)
                if ($oidVal !== $.trim($val)) {
                    userChange = true
                    $('#oid-newnickname').val($.trim($('#oid-newnickname').val()))
                    $continueSubmit.addClass('button-blue').removeClass('button-inactive')
                    $('#continue-submit .ada-hidden', CONTEXT).text('')
                    if (e.keyCode == 13) {
                        $continueSubmit.click()
                    }
                }
                if ($continueSubmit.hasClass('button-blue')) {
                    $('#continue-submit .ada-hidden', CONTEXT).text('Enabled')
                } else {
                    $('#continue-submit .ada-hidden', CONTEXT).text('Disabled')
                }
            })
            $('#continue-submit', CONTEXT).click(function () {
                $oidVal = $('#oid-newnickname', CONTEXT).val()
                $('#clientSideErrors .error-message ul').remove()
                $('#clientSideErrors').addClass('hide')
                var $this = $(this),
                    $inActiveButton = $this.hasClass('button-inactive'),
                    $oidVal = $('#oid-newnickname', CONTEXT).val(),
                    $createUl = $('<ul>'),
                    $cbSize = $('#oid-newnickname', CONTEXT).closest('table').find('input:checkbox:checked').size(),
                    $label = $this.closest('form').find('label[for=oid-nickname]'),
                    $createLi = null,
                    $clientSideError = $('#clientSideErrors'),
                    $clientErrorMsg = $('#clientSideErrors .error-message')
                $label.addClass('ada-hidden').removeClass('field-level-error')
                if (!$inActiveButton) {
                    if ($cbSize == 0 && $.trim($oidVal) == '') {
                        if ($('.pos-ack-skin').length > 0) {
                            $('.pos-ack-skin').hide()
                        }
                        $('#clientSideErrors .error-message .error').html(onlineidEidtNickName.errorMessage.GENERICMSG)
                        $createLi = $('<li>' + onlineidEidtNickName.errorMessage.BLANK + '</li>')
                        $createUl.append($createLi)
                        $clientErrorMsg.append($createUl)
                        $clientSideError.removeClass('hide')
                        $('label[for=oid-nickname]').html(onlineidEidtNickName.errorMessage.VALIDNICKNAME)
                        $label.addClass('field-level-error').removeClass('ada-hidden')
                    } else {
                        if ($cbSize == 0 && (!isValid($oidVal) || !validNumeriChars())) {
                            if ($('.pos-ack-skin').length > 0) {
                                $('.pos-ack-skin').hide()
                            }
                            $('#clientSideErrors .error-message').removeClass('hide')
                            $('#clientSideErrors .error-message .error').html(onlineidEidtNickName.errorMessage.NICKNAMEMSG)
                            $createLi2 = $('<li>' + onlineidEidtNickName.errorMessage.NOSPECIALCHARS + '</li>')
                            $createLi3 = $('<li>' + onlineidEidtNickName.errorMessage.SPECIALCHARSANDNUM + '</li>')
                            $createLi4 = $('<li>' + onlineidEidtNickName.errorMessage.ONECHAR + '</li>')
                            $createLi5 = $('<li>' + onlineidEidtNickName.errorMessage.INVALIDNUM + '</li>')
                            $createUl.append($createLi2)
                            $createUl.append($createLi3)
                            $createUl.append($createLi4)
                            $createUl.append($createLi5)
                            $clientErrorMsg.append($createUl)
                            $clientSideError.removeClass('hide')
                            $('label[for=oid-nickname]').html(onlineidEidtNickName.errorMessage.VALIDNICKNAME)
                            $label.addClass('field-level-error').removeClass('ada-hidden')
                        } else {
                            if (!userChange && $cbSize == 0) {
                                if ($('.pos-ack-skin').length > 0) {
                                    $('.pos-ack-skin').hide()
                                }
                                $('#clientSideErrors .error-message').removeClass('hide')
                                $('#clientSideErrors .error-message .error').html(onlineidEidtNickName.errorMessage.GENERICMSG)
                                $createLi = $('<li>' + onlineidEidtNickName.errorMessage.BLANKCHECKBOX + '</li>')
                                $createUl.append($createLi)
                                $clientErrorMsg.append($createUl)
                                $clientSideError.removeClass('hide')
                            } else {
                                if (verifySubmit(userChange)) {
                                    $('#clientSideErrors').hide()
                                    $clientSideError.addClass('hide')
                                    var authenticatedContinue = actionURL
                                    document.getElementById('editRemoveOnlineIDForm').action = authenticatedContinue
                                    document.getElementById('editRemoveOnlineIDForm').submit()
                                    $('#continue-submit').addClass('button-inactive').removeClass('button-blue')
                                    $('#continue-submit .ada-hidden', CONTEXT).text(' disabled')
                                }
                            }
                        }
                    }
                }
            })
        }
        $('input:checkbox', CONTEXT).click(function () {
            var chksz = $('input:checked', CONTEXT).size()
            var $continueSubmit = $('#continue-submit', CONTEXT)
            if (chksz > 0) {
                $continueSubmit.addClass('button-blue').removeClass('button-inactive')
                $('#continue-submit .ada-hidden', CONTEXT).text('')
            } else {
                if (chksz == 0) {
                    if (userChange == true) {
                        $continueSubmit.addClass('button-blue').removeClass('button-inactive')
                        $('#continue-submit .ada-hidden', CONTEXT).text('Enabled')
                    } else {
                        $continueSubmit.addClass('button-inactive').removeClass('button-blue')
                        $('#continue-submit .ada-hidden', CONTEXT).text('Disabled')
                    }
                }
            }
        })
        $('.online-id-module .edit-remove-skin table tr').each(function () {
            var $this = $(this),
                $tdval = $this.find('td:first').html()
            $this.find('td:last').find('span').append(' ' + $tdval + ' ')
        })
    }
})

function validNumeriChars() {
    var $nickName = $('#oid-newnickname', '.edit-remove-skin').val()
    var $numericNickname = $nickName.replace(/\D/g, '')
    if ($.trim($nickName) != '') {
        if ($numericNickname.length <= 8) {
            return true
        }
    }
    return false
}

function isValid(str) {
    return /^(?=.*?[A-Za-z])[^\$%#\^&]+$/.test(str)
}

function verifySubmit(userValue) {
    var chkName = document.getElementById('chkOwnTemp').value
    if (chkName == 'yes') {
        if (userValue) {
            var actulName = document.getElementById('oid-nickname').value,
                nickName = document.getElementById('oid-newnickname').value
            if ($.trim(nickName) != '') {
                if (actulName != nickName) {
                    return true
                }
            }
        }
    }
    var chksz = $('input:checked').size()
    if (chksz > 0) {
        return true
    } else {
        return false
    }
    return true
}

function redirectPage() {
    var redirectUrl = redirectPageUrl
    if (redirectUrl == 'https://www.bankofamerica.com') {
        $.post('unauthCancelBiz.go')
    }
    window.location.href = redirectUrl
}

$(document).ready(function () {
    if ($('.online-id-module .enrollment-skin').length > 0) {
        $('input#enroll-olb-id').focus(function () {
            $('#enter-new-olb-id-tooltip').addClass('enrollOlbIdTopDefault')
            $('#tlpvt-reenter-enroll-pass').addClass('reenternewpassTopDefault')
        })
        $('input#tlpvt-reenter-enroll-pass').focus(function () {
            $('#enter-new-olb-id-tooltip').addClass('enrollOlbIdTopDefault')
            $('#reenter-new-pass-tooltip').addClass('reenternewpassTopDefault')
        })
        var count = 0
        $('.messaging-module#clientSideErrors').each(function () {
            count++
            if (count == 2) {
                $(this).remove()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#CreateEnrollmentForm').validate({
                messages: {
                    'enroll-olb-id': {
                        required: 'Create an Online ID that is 6 to 32 characters in length.',
                        nodigits: 'Create an Online ID that does not contain all numbers.',
                        rangelength: $.validator.format('Create an Online ID that is {0} to {1} characters in length.'),
                        letterNumberSpecialCombo: 'Enter an Online ID with no spaces and using only the allowed special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-enter-enroll-pass': {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-enroll-pass': {
                        required: 'Re-enter your Passcode correctly to continue.',
                        equalTo: 'Re-enter your Passcode correctly to continue.'
                    }
                },
                rules: {
                    'enroll-olb-id': {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    },
                    'tlpvt-enter-enroll-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-enter-enroll-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-enroll-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-reenter-enroll-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-enroll-pass')
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#CreateEnrollmentForm').validate({
                messages: {
                    'enroll-olb-id': {
                        required: 'Cree una Identificaci&#243;n en l&#237;nea que tenga entre 6 y 32 caracteres de longitud.',
                        nodigits: 'Cree una Identificaci&#243;n en l&#237;nea que no contenga s&#243;lo n&#250;meros.',
                        rangelength: $.validator.format('Cree una Identificaci&#243;n en l&#237;nea que tenga entre {0} y {1} caracteres de longitud.'),
                        letterNumberSpecialCombo: 'Indique una Identificaci&#243;n en L&#237;nea sin espacios y usando s&#243;lo los caracteres especiales permitidos: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-enter-enroll-pass': {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-enroll-pass': {
                        required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                        equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                    }
                },
                rules: {
                    'enroll-olb-id': {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    },
                    'tlpvt-enter-enroll-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-enter-enroll-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-enroll-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-reenter-enroll-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-enroll-pass')
                    }
                },
                includeFieldLabel: false
            })
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#enroll-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Between 6-32 characters'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special characters) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Spaces'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Special Characters EXCEPT <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -52,
                tooltipLeft: 243
            })
            $('#tlpvt-reenter-enroll-pass').fieldMatcher({
                tooltipID: 'reenter-new-pass-tooltip',
                originFieldID: 'tlpvt-enter-enroll-pass',
                tooltipLeft: 244,
                tooltipTop: 145,
                matchText: 'Passcodes match',
                notMatchText: 'Passcodes do not match',
                formatCheckerCallback: function () {
                }
            })
            $('#tlpvt-enter-enroll-pass').formatChecker({
                tooltipID: 'enter-new-pass-tooltip',
                tooltipTop: -21,
                tooltipLeft: 244,
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Be 8 to 20 characters'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Not contain spaces, and may only use these characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                }
            })
        } else {
            $('#enroll-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Entre 6 y 32 caracteres'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special characters) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Espacios'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Caracteres especiales EXCEPTO <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -54,
                tooltipLeft: 242
            })
            $('#tlpvt-reenter-enroll-pass').fieldMatcher({
                tooltipID: 'reenter-new-pass-tooltip',
                originFieldID: 'tlpvt-enter-enroll-pass',
                tooltipLeft: 244,
                tooltipTop: 202,
                matchText: 'Las contrase&#241;as coinciden',
                notMatchText: 'Las contrase&#241;as no coinciden',
                formatCheckerCallback: function () {
                    $('#reenter-new-pass-tooltip').css('top', ($('#tlpvt-reenter-enroll-pass').position().top - 5) + 'px')
                    $('#reenter-new-pass-tooltip').css('left', ($('#tlpvt-reenter-enroll-pass').position().left + 243) + 'px')
                }
            })
            $('#tlpvt-enter-enroll-pass').formatChecker({
                tooltipID: 'enter-new-pass-tooltip',
                tooltipTop: -19,
                tooltipLeft: 244,
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Tener entre 8 y 20 caracteres'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                }
            })
        }
        $('.online-id-module .enrollment-skin .alt-id a').click(function () {
            $('#enroll-olb-id').val($(this).html())
            $('.online-id-module .enrollment-skin .alt-id').hide()
        })
        $('#create-passcode-submit', '#CreateEnrollmentForm').click(function () {
            if ($('label[for=enroll-olb-id]').hasClass('field-level-error')) {
                $('#enter-new-olb-id-tooltip').addClass('enrollOlbIdTop')
            } else {
                $('#enter-new-olb-id-tooltip').removeClass('enrollOlbIdTop')
            }
        })
        $('#create-passcode-submit', '#CreateEnrollmentForm').click(function () {
            if ($('label[for=tlpvt-enter-enroll-pass]').hasClass('field-level-error')) {
                $('#enter-new-pass-tooltip').addClass('enternewpassTop')
            } else {
                $('#enter-new-pass-tooltip').removeClass('enternewpassTop')
            }
        })
        $('#create-passcode-submit', '#CreateEnrollmentForm').click(function () {
            if ($('label[for=tlpvt-reenter-enroll-pass]').hasClass('field-level-error')) {
                $('#reenter-new-pass-tooltip').addClass('reenternewpassTop')
            } else {
                $('#reenter-new-pass-tooltip').removeClass('reenternewpassTop')
            }
        })
    }
})
var boa = window.boa || {}
boa.phoenix = (function () {
    return {
        addOnlineID: function () {
            $('#select-id-div').hide()
            $('#enter-id-div').show()
            $('#another-online-id-flag').val('Y')
            $('#enterID-known-input').focus()
        }
    }
})()
$(document).ready(function () {
    if ($('.online-id-module .enter-skin').length > 0) {
        $('#online-id-select').change(function (event) {
            if ($(this).val() === 'addID') {
                boa.phoenix.addOnlineID()
                return false
            }
        })
        $('#enterID-input, #enterID-known-input, #online-id-select').bind('keypress', function (e) {
            if (e.keyCode == 13) {
                if (e.target.id == 'enterID-known-input') {
                    $('#EnterOnlineIDKnownForm').submit()
                } else {
                    if (e.target.id == 'enterID-input') {
                        $('#EnterOnlineIDForm').submit()
                    } else {
                        if (e.target.id == 'online-id-select' && $('#online-id-select').val() === 'addID') {
                            boa.phoenix.addOnlineID()
                        } else {
                            $('#EnterOnlineIDKnownForm').submit()
                        }
                    }
                }
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#EnterOnlineIDForm').validate({
                messages: {
                    'enterID-input': {
                        required: 'Please enter your Online ID to continue signing in.'
                    }
                },
                rules: {
                    'enterID-input': {
                        required: true
                    }
                },
                includeFieldLabel: false
            })
            $('#EnterOnlineIDKnownForm').validate({
                messages: {
                    'enterID-known-input': {
                        required: 'Please enter your Online ID to continue signing in.'
                    }
                },
                rules: {
                    'enterID-known-input': {
                        required: {
                            depends: function (element) {
                                return $('#enter-id-div').is(':visible')
                            }
                        }
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#EnterOnlineIDForm').validate({
                messages: {
                    'enterID-input': {
                        required: 'Indique su Identificaci&#243;n en l&#237;nea para continuar con el inicio de sesi&#243;n.'
                    }
                },
                rules: {
                    'enterID-input': {
                        required: true
                    }
                },
                includeFieldLabel: false
            })
            $('#EnterOnlineIDKnownForm').validate({
                messages: {
                    'enterID-known-input': {
                        required: 'Indique su Identificaci&#243;n en l&#237;nea para continuar con el inicio de sesi&#243;n.'
                    }
                },
                rules: {
                    'enterID-known-input': {
                        required: {
                            depends: function (element) {
                                return $('#enter-id-div').is(':visible')
                            }
                        }
                    }
                },
                includeFieldLabel: false
            })
        }
        $('#enter-oid-submit').click(function (e) {
            if ($(this).hasClass('btn-bofa-blue')) {
                e.preventDefault()
                $('#EnterOnlineIDForm').submit()
            } else {
                e.stopPropagation()
                return false
            }
        })
        $('#enter-oid-known-submit').click(function (e) {
            if ($(this).hasClass('btn-bofa-blue')) {
                e.preventDefault()
                $('#EnterOnlineIDKnownForm').submit()
            } else {
                e.stopPropagation()
                return false
            }
        })
        if ($('#enterID-input').is(':visible') && !$('div.messaging-module div.error-skin').is(':visible')) {
            $('#enterID-input').focus()
        }
        $('.online-id-module .enter-skin a.btn-disabled').removeClass('btn-disabled').addClass('btn-bofa-blue')
        $('#online-id-select').removeAttr('disabled')
        post_deviceprint()
    }
})
$(document).ready(function () {
    if ($('.online-id-module .login-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        if ($('.sbcc-override .legacy-layout .side-well-module .links-list-sbcc-skin').length > 0) {
            $('.sbcc-override > div.legacy-layout .two-columns .short-col').css('width', '250px')
            $('.sbcc-override > div.legacy-layout .two-columns .wide-col').css('width', '710px')
        }
        $('#enroll-sbcc-id, #tlpvt-enter-sbcc-pass').bind('keypress', function (e) {
            if (e.keyCode == 13) {
                if (e.target.id == 'enroll-sbcc-id') {
                    $('#SBCCLoginForm').submit()
                } else {
                    $('#SBCCLoginForm').submit()
                }
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#SBCCLoginForm').validate({
                messages: {
                    'enroll-sbcc-id': {
                        required: 'Please enter your Online ID to sign in.'
                    },
                    'tlpvt-enter-sbcc-pass': {
                        required: 'Please enter your Passcode to Continue.'
                    }
                },
                rules: {
                    'enroll-sbcc-id': {
                        required: true
                    },
                    'tlpvt-enter-sbcc-pass': {
                        required: true
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#SBCCLoginForm').validate({
                messages: {
                    'enroll-sbcc-id': {
                        required: 'Por favor, introduzca su identificaci&#243;n en l&#237;nea para iniciar sesi&#243;n en.'
                    },
                    'tlpvt-enter-sbcc-pass': {
                        required: 'Por favor, introduzca su contrase&#209;a para continuar.'
                    }
                },
                rules: {
                    'enroll-sbcc-id': {
                        required: true
                    },
                    'tlpvt-enter-sbcc-pass': {
                        required: true
                    }
                },
                includeFieldLabel: false
            })
        }
        if ($('#enroll-sbcc-id').is(':visible')) {
            $('#enroll-sbcc-id').focus()
        }
        post_deviceprint()
    }
})
$(document).ready(function () {
    if ($('.online-id-module .rp-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        $('#enterID-input').keypress(function (e) {
            if (e.keyCode == 13) {
                $('#EnterOnlineIDForm').submit()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#EnterOnlineIDForm').validate({
                messages: {
                    'enterID-input': {
                        required: 'Please enter your Online ID to continue signing in.'
                    }
                },
                rules: {
                    'enterID-input': {
                        required: true
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#EnterOnlineIDForm').validate({
                messages: {
                    'enterID-input': {
                        required: 'Indique su Identificaci&#243;n en l&#237;nea para continuar con el inicio de sesi&#243;n.'
                    }
                },
                rules: {
                    'enterID-input': {
                        required: true
                    }
                },
                includeFieldLabel: false
            })
        }
        $('#enterID-input').focus()
    }
})
$(document).ready(function () {
    if ($('.online-id-module .sb-create-credentials-skin').length > 0) {
        $('#tlpvt-enroll-olb-id').focus(function () {
            if ($.browser.msie && parseInt($.browser.version, 10) == 9) {
                $('.online-id-module .sb-create-credentials-skin .format-checker-tooltip .tooltip-carat').css('top', '35px')
            } else {
                $('.online-id-module .sb-create-credentials-skin .format-checker-tooltip .tooltip-carat').css('top', '40px')
            }
        })
        $('#create-sb-passcode-submit').click(function () {
            if ($('#clientSideErrors .error-message ul').length == 0) {
                $('#clientSideErrors .error-message').append('<ul type="disc">' + $errorMessageContent + '</ul>')
            }
        })
        var count = 0
        $('.messaging-module#clientSideErrors').each(function () {
            count++
            if (count == 2) {
                $(this).remove()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#CreateSBEnrollmentForm').validate({
                messages: {
                    'tlpvt-enroll-olb-id': {
                        required: 'Please enter your valid Online id',
                        nodigits: 'Please create an Online ID that does not contain all numbers',
                        nospacesnospecial: 'Please enter an Online ID without spaces or these special characters: ! % & ^ " < >: [ ] . \' ` $ \\ |',
                        rangelength: $.validator.format('Please create a Online ID between 6-32 characters in length'),
                        onenumberoneletter: 'The Online ID you entered is not correct, it needs to have at least 1 number and 1  \t\t\t\tletter. Please correct and reenter your Online ID.'
                    },
                    'tlpvt-sb-enter-enroll-pass': {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-sb-reenter-enroll-pass': {
                        required: 'Please re-enter your Passcode to continue',
                        equalTo: 'The passcode don\'t match. Please re-enter your valid passcode.'
                    }
                },
                rules: {
                    'tlpvt-enroll-olb-id': {
                        required: true,
                        nospacesnospecial: ':"%<>&^![\\]\'`$\\\\|',
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ]
                    },
                    'tlpvt-sb-enter-enroll-pass': {
                        required: true,
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-sb-reenter-enroll-pass': {
                        required: true,
                        equalTo: $('#tlpvt-sb-enter-enroll-pass')
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#CreateSBEnrollmentForm').validate({
                messages: {
                    'tlpvt-enroll-olb-id': {
                        required: 'Por favor, introduzca su identificaci&#243;n en l&#237;nea v&#225;lida',
                        nodigits: 'Por favor cree una identificaci&#243;n en l&#237;nea que no contiene todos los n&#250;meros.',
                        nospacesnospecial: 'Por favor cree una identificaci&#243;n en l&#237;nea, sin espacios ni los caracteres especiales: !% & ^ " <>: [] . \' ` $ \\ |',
                        rangelength: $.validator.format('Por favor, cree una l&#237;nea de la identificaci&#243;n entre {0}-{1} caracteres.'),
                        onenumberoneletter: 'La identificaci&#243;n en l&#237;nea que ha introducido no es correcta, es necesario tener al menos 1 n&#250;mero y letra 1. Por favor, corrija y vuelva a introducir su identificaci&#243;n en l&#237;nea'
                    },
                    'tlpvt-sb-enter-enroll-pass': {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-sb-reenter-enroll-pass': {
                        required: 'Por favor, introduzca su contrase&#241;a para continuar',
                        equalTo: 'Por favor, vuelva a introducir su c&#243;digo de acceso v&#225;lido.'
                    }
                },
                rules: {
                    'tlpvt-enroll-olb-id': {
                        required: true,
                        nospacesnospecial: ':"%<>&^![\\]\'`$\\\\|',
                        nodigits: false,
                        rangelength: [
                            6,
                            32
                        ]
                    },
                    'tlpvt-sb-enter-enroll-pass': {
                        required: true,
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-sb-reenter-enroll-pass': {
                        required: true,
                        equalTo: $('#tlpvt-sb-enter-enroll-pass')
                    }
                },
                includeFieldLabel: false
            })
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            if ($.browser.msie) {
                $('#tlpvt-sb-enter-enroll-pass').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Be 8 to 20 characters'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Not contain spaces, and may only use these characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'enter-new-pass-tooltip',
                    tooltipTop: -102,
                    tooltipLeft: 174
                })
                $('.online-id-module .sb-create-credentials-skin .format-checker-title').html('Format checker')
            } else {
                $('#tlpvt-sb-enter-enroll-pass').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Be 8 to 20 characters'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Not contain spaces, and may only use these characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'enter-new-pass-tooltip',
                    tooltipTop: -144,
                    tooltipLeft: 186
                })
                $('.online-id-module .sb-create-credentials-skin .format-checker-title').html('Format checker')
            }
        } else {
            if ($.browser.msie) {
                $('#tlpvt-sb-enter-enroll-pass').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Tener entre 8 y 20 caracteres'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'enter-new-pass-tooltip',
                    tooltipTop: -102,
                    tooltipLeft: 174
                })
                $('.online-id-module .sb-create-credentials-skin .format-checker-title').html('Corrector de formato')
            } else {
                $('#tlpvt-sb-enter-enroll-pass').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Tener entre 8 y 20 caracteres'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'enter-new-pass-tooltip',
                    tooltipTop: -144,
                    tooltipLeft: 186
                })
                $('.online-id-module .sb-create-credentials-skin .format-checker-title').html('Corrector de formato')
            }
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            if ($.browser.msie) {
                $('#tlpvt-enroll-olb-id').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 6,
                        maxChar: 32,
                        ruleText: 'Between 6 to 32 characters'
                    },
                    noSpacesRule: {
                        applyRule: true,
                        ruleText: 'No spaces'
                    },
                    noSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'No ! % &amp; ^ &quot; &lt; &gt; : [ ] \' ` $ \\ |',
                        excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                    },
                    oneNumberOneLetterRule: {
                        applyRule: false,
                        ruleText: '1 number, 1 letter'
                    },
                    tooltipID: 'enter-new-olb-id-tooltip',
                    formatCheckerCallback: function () {
                        $('#enter-new-olb-id-tooltip').css('top', ($('#tlpvt-enroll-olb-id').position().top - 45) + 'px')
                        $('#enter-new-olb-id-tooltip').css('left', ($('#tlpvt-enroll-olb-id').position().left + 243) + 'px')
                    }
                })
                $('#tlpvt-sb-reenter-enroll-pass').fieldMatcher({
                    tooltipID: 'reenter-sb-new-pass-tooltip',
                    originFieldID: 'tlpvt-sb-enter-enroll-pass',
                    tooltipLeft: 175,
                    tooltipTop: -115,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                    }
                })
                $('.online-id-module .sb-create-credentials-skin .format-checker-title').html('Format checker')
            } else {
                $('#tlpvt-enroll-olb-id').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 6,
                        maxChar: 32,
                        ruleText: 'Between 6 to 32 characters'
                    },
                    noSpacesRule: {
                        applyRule: true,
                        ruleText: 'No spaces'
                    },
                    noSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'No ! % &amp; ^ &quot; &lt; &gt; : [ ] \' ` $ \\ |',
                        excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                    },
                    oneNumberOneLetterRule: {
                        applyRule: false,
                        ruleText: '1 number, 1 letter'
                    },
                    tooltipID: 'enter-new-olb-id-tooltip',
                    formatCheckerCallback: function () {
                        $('#enter-new-olb-id-tooltip').css('top', ($('#tlpvt-enroll-olb-id').position().top - 45) + 'px')
                        $('#enter-new-olb-id-tooltip').css('left', ($('#tlpvt-enroll-olb-id').position().left + 243) + 'px')
                    }
                })
                $('.online-id-module .sb-create-credentials-skin .format-checker-title').html('Format checker')
                $('#tlpvt-sb-reenter-enroll-pass').fieldMatcher({
                    tooltipID: 'reenter-sb-new-pass-tooltip',
                    originFieldID: 'tlpvt-sb-enter-enroll-pass',
                    tooltipLeft: 175,
                    tooltipTop: -115,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                    }
                })
            }
        } else {
            $('#tlpvt-enroll-olb-id').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Entre 6 to 32 caracteres'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Sin espacios'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Sin ! % &amp; ^ &quot; &lt; &gt; : [ ] \' ` $ \\ |',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                oneNumberOneLetterRule: {
                    applyRule: false,
                    ruleText: '1 n&#250;mero, 1 letra'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                formatCheckerCallback: function () {
                    $('#enter-new-olb-id-tooltip').css('top', ($('#tlpvt-enroll-olb-id').position().top - 45) + 'px')
                    $('#enter-new-olb-id-tooltip').css('left', ($('#tlpvt-enroll-olb-id').position().left + 243) + 'px')
                }
            })
            $('.online-id-module .sb-create-credentials-skin .format-checker-title').html('Corrector de formato')
            $('#tlpvt-sb-reenter-enroll-pass').fieldMatcher({
                tooltipID: 'reenter-sb-new-pass-tooltip',
                originFieldID: 'tlpvt-sb-enter-enroll-pass',
                tooltipLeft: 175,
                tooltipTop: -115,
                matchText: 'Contrase&#241;as coinciden',
                notMatchText: 'Contrase&#241;as no coinciden',
                formatCheckerCallback: function () {
                }
            })
        }
        $('.online-id-module .sb-create-credentials-skin .alt-id a').click(function () {
            $('#tlpvt-enroll-olb-id').val($(this).html())
            $('.online-id-module .sb-create-credentials-skin .alt-id').hide()
        })
        $('#suggestIDbutton').click(function () {
            $('.online-id-module .sb-create-credentials-skin .alt-id').removeClass('hide')
        })
        $('#tlpvt-enroll-olb-id').blur(function () {
            if ($('#btnSuggestOnlineId').length > 0) {
                $('#enter-new-olb-id-tooltip').css('display', 'none')
            }
        })
    }
})
$(document).ready(function () {
    if ($('.online-id-module .update-email-skin').length > 0) {
        $('.online-id-module .update-email-skin #tlpvt-update-email').change(function () {
            $(this).val($.trim($(this).val()))
        })
        $('.online-id-module .update-email-skin #tlpvt-reupdate-email').change(function () {
            $(this).val($.trim($(this).val()))
        })
        var onlineIDModuleUpdateEmail = {
            constants: {
                nospacenospecialtext: 'Please enter your valid email address.',
                equaltotext: 'The email addresses don\'t match. Please re-enter your valid email address.'
            }
        }
        if ($('html').attr('lang').toLowerCase() == 'es-us') {
            onlineIDModuleUpdateEmail.constants.nospacenospecialtext = 'Por favor, indique una direcci&#243;n de correo electr&#243;nico v&#225;lida.'
            onlineIDModuleUpdateEmail.constants.equaltotext = 'Por favor, indique la Contrase&#241;a dos veces, exactamente igual, para confirmar.'
        }
        $('#ValidateMBOEmailForm').validate({
            messages: {
                'tlpvt-update-email': {
                    required: onlineIDModuleUpdateEmail.constants.nospacenospecialtext,
                    nospacesnospecial: onlineIDModuleUpdateEmail.constants.nospacenospecialtext,
                    email: onlineIDModuleUpdateEmail.constants.nospacenospecialtext
                },
                'tlpvt-reupdate-email': {
                    required: onlineIDModuleUpdateEmail.constants.nospacenospecialtext,
                    nospacesnospecial: onlineIDModuleUpdateEmail.constants.nospacenospecialtext,
                    email: onlineIDModuleUpdateEmail.constants.nospacenospecialtext,
                    equalToIgnoreCase: onlineIDModuleUpdateEmail.constants.equaltotext
                }
            },
            rules: {
                'tlpvt-update-email': {
                    required: {
                        depends: function (element) {
                            return $('.email-address-section').is(':visible')
                        }
                    },
                    nospacesnospecial: '$%<>&\\^![\\]',
                    email: true
                },
                'tlpvt-reupdate-email': {
                    required: {
                        depends: function (element) {
                            return $('.email-address-section').is(':visible')
                        }
                    },
                    nospacesnospecial: '$%<>&\\^![\\]',
                    email: true,
                    equalToIgnoreCase: $('#tlpvt-update-email')
                }
            },

            submitHandler: function (form) {
                $('input[name=emailAddressMBO]').val($('#tlpvt-update-email').val())
                document.forms.splashform.action = $('#agree-mbo-button').attr('rel')
                document.forms.splashform.submit()
            },
            includeFieldLabel: false,
            disableInactiveButtons: true
        })
        $('#show-update-email').click(function () {
            $('.online-id-module .update-email-skin .email-address-section').removeClass('hide')
            $(this).addClass('hide')
        })
        $('#cancel-update-email').on('click', function (event) {
            $('.online-id-module .update-email-skin .email-address-section label').removeClass('field-level-error')
            $('.online-id-module .update-email-skin .email-address-section').addClass('hide')
            $('.messaging-module#clientSideErrors').addClass('hide').css('display', 'none')
            $('.online-id-module .update-email-skin #show-update-email').removeClass('hide')
        })
        var $ecdSAContextMBO = $('.electronic-comm-disclosure-module .ol-bank-skin')
        var $ecdSAMBOADATxt = $('#agree-mbo-button .ada-hidden', $ecdSAContextMBO).html()
        if ($ecdSAContextMBO.length > 0) {
            $('.electronic-comm-disclosure-module .ol-bank-skin #splashForm').append('<input type="hidden" name="emailAddressMBO" value="" />')
            $('.electronic-comm-disclosure-module .ol-bank-skin a.button-blue').attr('id', 'agree-mbo-button').removeAttr('onclick')
            $('.electronic-comm-disclosure-module .terms-conditions-content, .electronic-comm-disclosure-module .terms-conditions-content .generic-content-skin').css('position', 'relative')
            $('#agree-mbo-button').removeClass('inactive').removeClass('button-blue').addClass('button-inactive')
            $('#agree-mbo-button').on('click', function (event) {
                if (!$(this).hasClass('button-inactive')) {
                    $('#ValidateMBOEmailForm').submit()
                }
            })
            $('#tc-review-sa, #tc-review', $ecdSAContextMBO).on('click', function (event) {
                if ($('.checkClick:checked', $ecdSAContextMBO).length == $('.checkClick').length) {
                    $('#agree-mbo-button', $ecdSAContextMBO).addClass('button-blue').removeClass('button-inactive')
                    $('#agree-mbo-button .ada-hidden', $ecdSAContextMBO).text('')
                } else {
                    $('#agree-mbo-button', $ecdSAContextMBO).addClass('button-inactive').removeClass('button-blue')
                    $('#agree-mbo-button .ada-hidden', $ecdSAContextMBO).text($ecdSAMBOADATxt)
                }
            })
        }
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13) {
                if (!$(this).hasClass('button-inactive')) {
                    $('#ValidateMBOEmailForm').submit()
                }
            }
        })
    }
})
$(document).ready(function () {
    if ($('.online-id-module .verify-email-skin').length > 0) {
        $('.online-id-module .verify-email-skin').closest('form').attr({
            method: 'post',
            autocomplete: 'off',
            action: $('#agree-button').length > 0 ? $('#agree-button').attr('rel') : $('#tac-submit').attr('rel'),
            id: 'VerifyEmailAddressForm',
            'class': 'common-form',
            'data-common-form': 'gis-mask'
        })
        if (navigator.userAgent.indexOf('MSIE') != -1 && parseInt(navigator.userAgent.indexOf('MSIE'), 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        $('.online-id-module #tlpvt-enter-email').change(function () {
            $(this).val($.trim($(this).val()))
        })
        $('.online-id-module #tlpvt-reenter-email').change(function () {
            $(this).val($.trim($(this).val()))
        })
        var $message = 'There was a problem processing your request'
        if ($('html').attr('lang').toLowerCase() == 'es-us') {
            $message = 'Hubo un problema al procesar su solicitud'
        }
        $('.messaging-module#clientSideErrors .error-message  #Vipaa_Client_0').append('<div id="customError" class="mlt-20 hide">' + $message + '</div>')
        var onlineIDModuleVerifyEmail = {
            constants: {
                nospacenospecialtext: 'Please enter your valid email address.',
                equaltotext: 'The email addresses don\'t match. Please re-enter your valid email address.',
                mobilePhoneMessage: 'Your mobile phone number should contain 10 digits. Please enter a valid number.'
            }
        }
        if ($('html').attr('lang').toLowerCase() == 'es-us') {
            onlineIDModuleVerifyEmail.constants.nospacenospecialtext = 'Por favor, indique una direcci&#243;n de correo electr&#243;nico v&#225;lida.'
            onlineIDModuleVerifyEmail.constants.equaltotext = 'Las direcciones de correo electr&#243;nico no coinciden. Por favor, vuelva a indicar su direcci&#243;n de correo electr&#243;nico v&#225;lida.'
            onlineIDModuleVerifyEmail.constants.mobilePhoneMessage = 'Su n&#250;mero de tel&#233;fono m&#243;vil debe contener 10 d&#237;gitos. Por favor, introduzca un n&#250;mero v&#225;lido.'
        }
        $('#agree-button').click(function () {
            var _this = $(this)
            if (!_this.hasClass('button-inactive')) {
                $('#VerifyEmailAddressForm').submit()
            } else {
                return false
            }
        })
        $('#VerifyEmailAddressForm').validate({
            messages: {
                'tlpvt-enter-email': {
                    required: onlineIDModuleVerifyEmail.constants.nospacenospecialtext,
                    nospacesnospecial: onlineIDModuleVerifyEmail.constants.nospacenospecialtext,
                    email: onlineIDModuleVerifyEmail.constants.nospacenospecialtext
                },
                'tlpvt-reenter-email': {
                    required: onlineIDModuleVerifyEmail.constants.nospacenospecialtext,
                    nospacesnospecial: onlineIDModuleVerifyEmail.constants.nospacenospecialtext,
                    email: onlineIDModuleVerifyEmail.constants.nospacenospecialtext,
                    equalToIgnoreCase: onlineIDModuleVerifyEmail.constants.equaltotext
                },
                'tlpvt-mob-first3': {
                    required: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage,
                    integer: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage,
                    minlength: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage
                },
                'tlpvt-mob-middle3': {
                    required: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage,
                    integer: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage,
                    minlength: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage
                },
                'tlpvt-mob-last4': {
                    required: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage,
                    integer: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage,
                    minlength: onlineIDModuleVerifyEmail.constants.mobilePhoneMessage
                }
            },
            rules: {
                'tlpvt-enter-email': {
                    required: true,
                    nospacesnospecial: '$%<>&\\^![\\]',
                    email: true
                },
                'tlpvt-reenter-email': {
                    required: true,
                    nospacesnospecial: '$%<>&\\^![\\]',
                    email: true,
                    equalToIgnoreCase: $('#tlpvt-enter-email')
                },
                'tlpvt-mob-first3': {
                    required: {
                        depends: function (element) {
                            var req = false
                            if ($('#tlpvt-mob-middle3').val().length > 0 || $('#tlpvt-mob-last4').val().length > 0) {
                                req = true
                            }
                            return req
                        }
                    },
                    integer: true,
                    minlength: 3
                },
                'tlpvt-mob-middle3': {
                    required: {
                        depends: function (element) {
                            var req = false
                            if ($('#tlpvt-mob-first3').val().length > 0 || $('#tlpvt-mob-last4').val().length > 0) {
                                req = true
                            }
                            return req
                        }
                    },
                    integer: true,
                    minlength: 3
                },
                'tlpvt-mob-last4': {
                    required: {
                        depends: function (element) {
                            var req = false
                            if ($('#tlpvt-mob-first3').val().length > 0 || $('#tlpvt-mob-middle3').val().length > 0) {
                                req = true
                            }
                            return req
                        }
                    },
                    integer: true,
                    minlength: 4
                }
            },
            includeFieldLabel: false,
            invalidHandler: function (form, validator) {
                for (var i = 0; i < validator.errorList.length; i++) {
                    if ($($(validator.errorList[i]).attr('element')).hasClass('mobile-phone')) {
                        $('span.mob-title').addClass('field-level-error')
                    } else {
                        $('span.mob-title').removeClass('field-level-error')
                    }
                }
            }
        })
        onlineidverifyEmail.autotab('tlpvt-mob-first3', 3, 'tlpvt-mob-middle3')
        onlineidverifyEmail.autotab('tlpvt-mob-middle3', 3, 'tlpvt-mob-last4')
        onlineidverifyEmail.autotab('tlpvt-mob-last4', 4, 'tlpvt-mob-first3')
    }
})
var onlineidverifyEmail = {
    autotab: function (currentEle, size, nextElem) {
        var $currentElement = $('#' + currentEle)
        var $currTxtVal
        $currentElement.keyup(function (e) {
            var $keyID = (window.event) ? event.keyCode : e.keyCode
            var $nextElement = $('#' + nextElem)
            $currTxtVal = $currentElement.val()
            if (isNaN($currTxtVal)) {
                var pattern = new RegExp('[^0-9]+', 'g')
                $currTxtVal = $currTxtVal.replace(pattern, '')
                $currentElement.val($currTxtVal)
            }
            if ($currentElement.val().length >= size && (($keyID >= 48 && $keyID <= 90) || ($keyID >= 96 && $keyID <= 105))) {
                $currentElement.blur()
                $nextElement.focus()
            }
        })
    }
}
var $ssnfirst
var $ssnmiddle
var $ssnlast
$(document).ready(function () {
    if ($('.online-id-module .verify-identity-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        var $onlineIdModuleVerifyIdSkin = $('.online-id-module .verify-identity-skin')
        $('input[name=\'ssnTinIndicator\']').click(function () {
            if ($('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN') {
                $('.verify-ssn', $onlineIdModuleVerifyIdSkin).show()
                $('.verify-tin', $onlineIdModuleVerifyIdSkin).hide()
                $('#tlpvt-tin-first2,#tlpvt-tin-last7').val('').blur()
            } else {
                if ($('input[name=\'ssnTinIndicator\']:checked').val() === 'TaxId') {
                    $('.verify-tin', $onlineIdModuleVerifyIdSkin).show()
                    $('.verify-ssn', $onlineIdModuleVerifyIdSkin).hide()
                    $('#tlpvt-ssn-first3,#tlpvt-ssn-middle2,#tlpvt-ssn-last4').val('').blur()
                }
            }
            $('label[for=radio-ssn],label[for=radio-tin]').removeClass('field-level-error')
            $('.verify-ssn,.verify-tin').children().removeClass('field-level-error')
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#OlbVerifyForm').validate({
                includeFieldLabel: false,
                orphanFieldLabels: {
                    'tlpvt-ssn-first3': 'radio-ssn',
                    'tlpvt-ssn-middle2': 'radio-ssn',
                    'tlpvt-ssn-last4': 'radio-ssn',
                    'tlpvt-tin-first2': 'radio-tin',
                    'tlpvt-tin-last7': 'radio-tin'
                },
                messages: {
                    'tlpvt-ssn-first3': {
                        required: 'Please enter your valid Social Security number.',
                        minlength: 'Please enter your valid Social Security number.'
                    },
                    'tlpvt-ssn-middle2': {
                        required: 'Please enter your valid Social Security number.',
                        minlength: 'Please enter your valid Social Security number.'
                    },
                    'tlpvt-ssn-last4': {
                        required: 'Please enter your valid Social Security number.',
                        minlength: 'Please enter your valid Social Security number.'
                    },
                    'tlpvt-tin-first2': {
                        required: 'Please enter your valid Tax Identification Number.',
                        minlength: 'Please enter your valid Tax Identification Number.'
                    },
                    'tlpvt-tin-last7': {
                        required: 'Please enter your valid Tax Identification Number.',
                        minlength: 'Please enter your valid Tax Identification Number.'
                    }
                },
                rules: {
                    'tlpvt-ssn-first3': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN'
                            }
                        },
                        minlength: 3
                    },
                    'tlpvt-ssn-middle2': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN'
                            }
                        },
                        minlength: 2
                    },
                    'tlpvt-ssn-last4': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN'
                            }
                        },
                        minlength: 4
                    },
                    'tlpvt-tin-first2': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'TaxId'
                            }
                        },
                        minlength: 2
                    },
                    'tlpvt-tin-last7': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'TaxId'
                            }
                        },
                        minlength: 7
                    }
                }
            })
        } else {
            $('#OlbVerifyForm').validate({
                includeFieldLabel: false,
                orphanFieldLabels: {
                    'tlpvt-ssn-first3': 'radio-ssn',
                    'tlpvt-ssn-middle2': 'radio-ssn',
                    'tlpvt-ssn-last4': 'radio-ssn',
                    'tlpvt-tin-first2': 'radio-tin',
                    'tlpvt-tin-last7': 'radio-tin'
                },
                messages: {
                    'tlpvt-ssn-first3': {
                        required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                        minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                    },
                    'tlpvt-ssn-middle2': {
                        required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                        minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                    },
                    'tlpvt-ssn-last4': {
                        required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                        minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                    },
                    'tlpvt-tin-first2': {
                        required: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    },
                    'tlpvt-tin-last7': {
                        required: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    }
                },
                rules: {
                    'tlpvt-ssn-first3': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN'
                            }
                        },
                        minlength: 3
                    },
                    'tlpvt-ssn-middle2': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN'
                            }
                        },
                        minlength: 2
                    },
                    'tlpvt-ssn-last4': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN'
                            }
                        },
                        minlength: 4
                    },
                    'tlpvt-tin-first2': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'TaxId'
                            }
                        },
                        minlength: 2
                    },
                    'tlpvt-tin-last7': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnTinIndicator\']:checked').val() === 'TaxId'
                            }
                        },
                        minlength: 7
                    }
                }
            })
        }
        $('#tlpvt-ssn-first3,#tlpvt-ssn-middle2,#tlpvt-ssn-last4,#tlpvt-tin-first2,#tlpvt-tin-last7').bind('keypress', function (e) {
            if (e.keyCode == 13) {
                $(this).blur()
                $('#OlbVerifyForm').submit()
            }
        })
        $('input[name=\'ssnTinIndicator\']:checked').click()
        onlineidverify.autotab('tlpvt-ssn-first3', 3, 'tlpvt-ssn-middle2')
        onlineidverify.autotab('tlpvt-ssn-middle2', 2, 'tlpvt-ssn-last4')
        onlineidverify.autotab('tlpvt-tin-first2', 2, 'tlpvt-tin-last7')
        $('#tlpvt-ssn-first3,#tlpvt-ssn-middle2,#tlpvt-ssn-last4,#tlpvt-tin-first2,#tlpvt-tin-last7').blur(function () {
            onlineidverify.maskSSNChar($(this))
        }).focus(function () {
            onlineidverify.unMaskSSNChar($(this))
        })
        $('#continue-submit', '.online-id-module .verify-identity-skin').click(function () {
            if (typeof setFlexLayoutFooterHeight != 'undefined') {
                setFlexLayoutFooterHeight()
            }
        })
        post_deviceprint()
        if ($('div.messaging-module div.error-skin').is(':visible')) {
            $('#error-message-ada-focus').parent().attr('tabindex', 0).attr('aria-live', 'rude').focus()
        }
    }
})
var onlineidverify = {
    autotab: function (currentEle, size, nextElem) {
        var $currentElement = $('#' + currentEle)
        var $currTxtVal
        $currentElement.keyup(function (e) {
            var $keyID = (window.event) ? event.keyCode : e.keyCode
            var $nextElement = $('#' + nextElem)
            $currTxtVal = $currentElement.val()
            if (isNaN($currTxtVal)) {
                var pattern = new RegExp('[^0-9]+', 'g')
                $currTxtVal = $currTxtVal.replace(pattern, '')
                $currentElement.val($currTxtVal)
            }
            if ($currentElement.val().length >= size && (($keyID >= 48 && $keyID <= 90) || ($keyID >= 96 && $keyID <= 105))) {
                $currentElement.blur()
                $nextElement.focus()
            }
        })
    },
    maskSSNChar: function ($this) {
        var attrVal = $this.val()
        var attrId = $this.attr('id')
        var maskVal = ''
        if (attrVal.indexOf('*') == -1) {
            $('#' + attrId + '-hidden').val(attrVal)
        }
        for (var i = 0; i < attrVal.length; i++) {
            maskVal += '*'
        }
        $this.val(maskVal)
    },
    unMaskSSNChar: function ($this) {
        var attrId = $this.attr('id')
        var unmaskVal = $('#' + attrId + '-hidden').val()
        $this.val(unmaskVal)
    }
}
$(document).ready(function () {
    if ($('.passcode-module .create-rp-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#CreatePasscodeForm').validate({
                messages: {
                    'tlpvt-enter-new-pass': {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-new-pass': {
                        required: 'Re-enter your Passcode correctly to continue.',
                        equalTo: 'Re-enter your Passcode correctly to continue.'
                    },
                    ecdAccepted: ('You must consent to the eCommunications Disclosure to use Online Banking.<br><li>After consenting, you can change your preferences for receiving certain electronic communications at any time, and you&#8217;ll be able to take advantage of the many features and benefits that Online Banking has to offer.</li>')
                },
                rules: {
                    'tlpvt-enter-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-enter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-reenter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-new-pass')
                    },
                    ecdAccepted: {
                        required: {
                            depends: function (element) {
                                return $('#ecdAccepted').is(':visible')
                            }
                        }
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#CreatePasscodeForm').validate({
                messages: {
                    'tlpvt-enter-new-pass': {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-new-pass': {
                        required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                        equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                    },
                    ecdAccepted: ('Usted debe aceptar la Divulgaci&#243;n de comunicaciones electr&#243;nicas para utilizar la Banca en L&#237;nea.<br><li>Una vez que acepte, usted puede cambiar sus preferencias para recibir determinadas comunicaciones electr&#243;nicas en cualquier momento y \t\t\t\t\t                  podr&#225; aprovechar la gran cantidad de ventajas y beneficios que la Banca en L&#237;nea tiene para ofrecer.</li>')
                },
                rules: {
                    'tlpvt-enter-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-enter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-reenter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-new-pass')
                    },
                    ecdAccepted: {
                        required: {
                            depends: function (element) {
                                return $('#ecdAccepted').is(':visible')
                            }
                        }
                    }
                },
                includeFieldLabel: false
            })
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#tlpvt-enter-new-pass').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Between 8 - 20 characters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'No spaces'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Use only these special characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                },
                tooltipID: 'enter-new-pass-tooltip',
                tooltipTop: 20,
                tooltipLeft: 182
            })
        } else {
            $('#tlpvt-enter-new-pass').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Tener entre 8 y 20 caracteres'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Sin espacios'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Tener s&#243;lo estos caracteres especiales <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                },
                tooltipID: 'enter-new-pass-tooltip',
                tooltipTop: 80,
                tooltipLeft: 182
            })
        }
        if (!($('html').attr('lang').toLowerCase() == 'en-us')) {
            $('.passcode-module .create-rp-skin .format-checker-title').html('Corrector de formato')
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            if ($.browser.msie) {
                $('#tlpvt-reenter-new-pass').fieldMatcher({
                    tooltipID: 'reenter-new-pass-tooltip',
                    originFieldID: 'tlpvt-enter-new-pass',
                    setAutoPos: true,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-reenter-new-pass').fieldMatcher({
                    tooltipID: 'reenter-new-pass-tooltip',
                    originFieldID: 'tlpvt-enter-new-pass',
                    setAutoPos: true,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                    }
                })
            }
        } else {
            if ($.browser.msie) {
                $('#tlpvt-reenter-new-pass').fieldMatcher({
                    tooltipID: 'reenter-new-pass-tooltip',
                    originFieldID: 'tlpvt-enter-new-pass',
                    setAutoPos: true,
                    matchText: 'Contrase&#241;as coinciden',
                    notMatchText: 'Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-reenter-new-pass').fieldMatcher({
                    tooltipID: 'reenter-new-pass-tooltip',
                    originFieldID: 'tlpvt-enter-new-pass',
                    setAutoPos: true,
                    matchText: 'Contrase&#241;as coinciden',
                    notMatchText: 'Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            }
        }
        $('#create-passcode-submit').click(function (e) {
            boaTLAddEvent(e)
            var $currentPass = $('#tlpvt-enter-new-pass').val()
            var $newPass = $('#tlpvt-reenter-new-pass').val()
            if ($('label[for=tlpvt-reenter-new-pass]').hasClass('field-level-error')) {
                $('#reenter-new-pass-tooltip').addClass('shift-up')
            }
            if (($currentPass == '' || $currentPass == undefined || $currentPass == null) && ($newPass == '' || $newPass == undefined || $newPass == null)) {
                if ($('.messaging-module .error-rp-skin').length > 0) {
                    $('.messaging-module .error-rp-skin ul li').eq(1).hide()
                    $('label:eq(1)').removeClass('field-level-error')
                }
            } else {
                if ($('.messaging-module .error-rp-skin').length > 0) {
                    $('.messaging-module .error-rp-skin ul li').eq(1).show()
                }
            }
        })
        if ($('.passcode-module .create-rp-skin').length > 0) {
            $('body').bind('keypress', function (e) {
                if (e.keyCode == 13 && (e.target.id === 'tlpvt-enter-new-pass' || e.target.id === 'tlpvt-reenter-new-pass')) {
                    $('#CreatePasscodeForm').submit()
                }
            })
        }
    }
})
var $scIsIE = false
if (navigator.userAgent.indexOf('MSIE') != -1) {
    $scIsIE = true
}
$(document).ready(function () {
    window.passcodeCreateSkin = {}
    passcodeCreateSkin.curLang = $('html').attr('lang').toLowerCase()
    if ($('.passcode-module .create-skin').length > 0) {
        if ($scIsIE && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        if (passcodeCreateSkin.curLang == 'en-us') {
            $('#CreatePasscodeForm').validate({
                messages: {
                    'tlpvt-enter-new-pass': {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-new-pass': {
                        required: 'Re-enter your Passcode correctly to continue.',
                        equalTo: 'Re-enter your Passcode correctly to continue.'
                    },
                    ecdAccepted: ('You must consent to the eCommunications Disclosure to use Online Banking.<br><li>After consenting, you can change your preferences for receiving certain electronic communications at any time, and you&#8217;ll be able to take advantage of the many features and benefits that Online Banking has to offer.</li>')
                },
                rules: {
                    'tlpvt-enter-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-enter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-reenter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-new-pass')
                    },
                    ecdAccepted: {
                        required: {
                            depends: function (element) {
                                return $('#ecdAccepted').is(':visible')
                            }
                        }
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#CreatePasscodeForm').validate({
                messages: {
                    'tlpvt-enter-new-pass': {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-new-pass': {
                        required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                        equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                    },
                    ecdAccepted: ('Usted debe aceptar la Divulgaci&#243;n de comunicaciones electr&#243;nicas para utilizar la Banca en L&#237;nea.<br><li>Una vez que acepte, usted puede cambiar sus preferencias para recibir determinadas comunicaciones electr&#243;nicas en cualquier momento y \t\t\t\t\t                  podr&#225; aprovechar la gran cantidad de ventajas y beneficios que la Banca en L&#237;nea tiene para ofrecer.</li>')
                },
                rules: {
                    'tlpvt-enter-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-enter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-reenter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-new-pass')
                    },
                    ecdAccepted: {
                        required: {
                            depends: function (element) {
                                return $('#ecdAccepted').is(':visible')
                            }
                        }
                    }
                },
                includeFieldLabel: false
            })
        }
        $('#tlpvt-enter-new-pass').formatChecker({
            tooltipID: 'enter-new-pass-tooltip',
            tooltipTop: 80,
            tooltipLeft: 182
        })
        if (!($('html').attr('lang').toLowerCase() == 'en-us')) {
            $('.passcode-module .create-skin .format-checker-title').html('Corrector de formato')
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            if ($scIsIE) {
                $('#tlpvt-reenter-new-pass').fieldMatcher({
                    tooltipID: 'reenter-new-pass-tooltip',
                    originFieldID: 'tlpvt-enter-new-pass',
                    setAutoPos: true,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-reenter-new-pass').fieldMatcher({
                    tooltipID: 'reenter-new-pass-tooltip',
                    originFieldID: 'tlpvt-enter-new-pass',
                    setAutoPos: true,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                    }
                })
            }
        } else {
            if ($scIsIE) {
                $('#tlpvt-reenter-new-pass').fieldMatcher({
                    tooltipID: 'reenter-new-pass-tooltip',
                    originFieldID: 'tlpvt-enter-new-pass',
                    setAutoPos: true,
                    matchText: 'Contrase&#241;as coinciden',
                    notMatchText: 'Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-reenter-new-pass').fieldMatcher({
                    tooltipID: 'reenter-new-pass-tooltip',
                    originFieldID: 'tlpvt-enter-new-pass',
                    setAutoPos: true,
                    matchText: 'Contrase&#241;as coinciden',
                    notMatchText: 'Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            }
        }
        $('#create-passcode-submit').click(function (e) {
            boaTLAddEvent(e)
            var $currentPass = $('#tlpvt-enter-new-pass').val()
            var $newPass = $('#tlpvt-reenter-new-pass').val()
            if ($('label[for=tlpvt-reenter-new-pass]').hasClass('field-level-error')) {
                $('#reenter-new-pass-tooltip').addClass('shift-up')
            }
        })
        if ($('.passcode-module .create-skin').length > 0) {
            $('#tlpvt-enter-new-pass,body,#tlpvt-reenter-new-pass').bind('keypress', function (e) {
                if (e.keyCode == 13) {
                    $('#CreatePasscodeForm').submit()
                }
            })
        }
    }
})
var lpfielderror = 0

function checkLists() {
    var totalErrors = $('#clientSideErrors.trans .error-message ul li').length
    if (totalErrors > 1) {
        $('#clientSideErrors.trans .error-message ul').removeClass('no-bullets')
    } else {
        $('#clientSideErrors.trans .error-message ul').addClass('no-bullets')
    }
}

$(document).ready(function () {
    if ($('.passcode-module .edit-passcode-skin').length > 0) {
        $('#tlpvt-new-passcode-trans').focus(function () {
            if (($.browser.msie && parseInt($.browser.version, 10) == 9)) {
                $('.passcode-module .edit-passcode-skin .format-checker-tooltip .tooltip-carat').css('top', '52px')
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#editPasscodeForm').validate({
                messages: {
                    'tlpvt-new-passcode': {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-confirm-new-pass': {
                        required: 'Re-enter your Passcode correctly to continue.',
                        equalTo: 'Re-enter your Passcode correctly to continue.'
                    },
                    'tlpvt-current-passcode': {
                        required: 'Please enter your current Passcode correctly.',
                        onenumberoneletter: 'Please create a Passcode that does not contain all numbers.',
                        nospacesnospecial: 'Please enter your current Passcode without spaces or these special characters: $ & ^ < > ! [ ]'
                    },
                    'tlpvt-new-passcode-trans': {
                        required: 'Enter a new Passcode.',
                        onenumberoneletter: 'Enter a Passcode that\'s 8-20 characters in length and contains at least 1 number and 1 letter  .',
                        nospacesnospecial: 'Enter a new Passcode without spaces or these special characters: $ & ^ < > ! [ ]',
                        rangelength: $.validator.format('Enter a Passcode that\'s between {0}-{1} characters in length.'),
                        onlineId: 'Enter a Passcode that\'s different from your Online ID.',
                        samePasscode: 'Enter a Passcode that\'s different from your current Passcode.'
                    },
                    'tlpvt-confirm-new-pass-trans': {
                        required: 'Re-enter your Passcode information below.',
                        equalTo: 'Re-enter your Passcode. The Passcode you entered as confirmation doesn\'t match your new Passcode.'
                    },
                    'tlpvt-current-passcode-trans': {
                        required: 'Enter your current Passcode to continue.',
                        onenumberoneletter: 'Enter your current Passcode that does not contain all numbers.',
                        nospacesnospecial: 'Enter your current Passcode without spaces or these special characters: $ & ^ < > ! [ ]'
                    }
                },
                rules: {
                    'tlpvt-new-passcode': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-new-passcode').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-confirm-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-confirm-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-new-passcode')
                    },
                    'tlpvt-current-passcode': {
                        required: true,
                        nospacesnospecial: '$<>&\\^![\\]'
                    },
                    'tlpvt-new-passcode-trans': {
                        required: true,
                        nospacesnospecial: '$<>&\\^![\\]',
                        onenumberoneletter: true,
                        rangelength: [
                            8,
                            20
                        ]
                    },
                    'tlpvt-confirm-new-pass-trans': {
                        required: true,
                        equalTo: $('#tlpvt-new-passcode-trans')
                    },
                    'tlpvt-current-passcode-trans': {
                        required: true,
                        nospacesnospecial: '$<>&\\^![\\]'
                    }
                },
                includeFieldLabel: false,
                invalidHandler: function (form, validator) {
                    setTimeout(function () {
                        checkLists()
                    }, 100)
                }
            })
        } else {
            $('#editPasscodeForm').validate({
                messages: {
                    'tlpvt-new-passcode': {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-confirm-new-pass': {
                        required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                        equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                    },
                    'tlpvt-current-passcode': {
                        required: 'Por favor, indique su Contrase&#241;a actual correctamente.',
                        onenumberoneletter: 'Por favor, cree una contrase&#241;a que no contenga todos los n&#250;meros.',
                        nospacesnospecial: 'Por favor, introduzca su contrase&#241;a actual, sin espacios ni los caracteres especiales : $ & ^ < > ! [ ]'
                    }
                },
                rules: {
                    'tlpvt-new-passcode': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-new-passcode').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-confirm-new-pass': {
                        required: {
                            depends: function (element) {
                                return (($('#tlpvt-confirm-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-new-passcode')
                    },
                    'tlpvt-current-passcode': {
                        required: true,
                        nospacesnospecial: '$<>&\\^![\\]'
                    }
                },
                includeFieldLabel: false
            })
        }
        if ($.browser.msie) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-new-passcode,#tlpvt-new-passcode-trans').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Be 8 to 20 characters'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Not contain spaces, and may only use these characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: -43,
                    tooltipLeft: 185
                })
            } else {
                $('#tlpvt-new-passcode').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Tener entre 8 y 20 caracteres'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: -43,
                    tooltipLeft: 185
                })
            }
        } else {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-new-passcode,#tlpvt-new-passcode-trans').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Be 8 to 20 characters'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Not contain spaces, and may only use these characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: -43,
                    tooltipLeft: 185
                })
            } else {
                $('#tlpvt-new-passcode').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Tener entre 8 y 20 caracteres'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: -43,
                    tooltipLeft: 185
                })
            }
        }
        if ($.browser.msie) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-confirm-new-pass').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'tlpvt-new-passcode',
                    tooltipLeft: 183,
                    tooltipTop: -9,
                    matchText: passcodeMatch,
                    notMatchText: passcodeNotMatch,
                    formatCheckerCallback: function () {
                    }
                })
                $('#tlpvt-confirm-new-pass-trans').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'tlpvt-new-passcode-trans',
                    tooltipLeft: 183,
                    tooltipTop: -9,
                    matchText: passcodeMatch,
                    notMatchText: passcodeNotMatch,
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-confirm-new-pass').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'tlpvt-new-passcode',
                    tooltipLeft: 183,
                    tooltipTop: -9,
                    matchText: 'Las Contrase&#241;as coinciden',
                    notMatchText: 'Las Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            }
        } else {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-confirm-new-pass').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'tlpvt-new-passcode',
                    tooltipLeft: 183,
                    tooltipTop: -9,
                    matchText: passcodeMatch,
                    notMatchText: passcodeNotMatch,
                    formatCheckerCallback: function () {
                    }
                })
                $('#tlpvt-confirm-new-pass-trans').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'tlpvt-new-passcode-trans',
                    tooltipLeft: 183,
                    tooltipTop: -9,
                    matchText: passcodeMatch,
                    notMatchText: passcodeNotMatch,
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-confirm-new-pass').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'tlpvt-new-passcode',
                    tooltipLeft: 183,
                    tooltipTop: -9,
                    matchText: 'Las Contrase&#241;as coinciden',
                    notMatchText: 'Las Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            }
        }
        if ($('#tlpvt-current-passcode,#tlpvt-current-passcode-trans').is(':visible')) {
            $('#tlpvt-current-passcode,#tlpvt-current-passcode-trans').focus()
        }
        if ($('.passcode-module .edit-passcode-skin').length > 0) {
            $('#tlpvt-new-passcode,body,#tlpvt-confirm-new-pass,#tlpvt-new-passcode-trans,#tlpvt-confirm-new-pass-trans').bind('keypress', function (e) {
                if (e.keyCode == 13) {
                    $('#editPasscodeForm').submit()
                }
            })
        }
        $('#editPasscodeSubmit').click(function (e) {
            if ($('.messaging-module .error-skin').is(':visible')) {
            }
        })
        $('input,select,a').focus(function () {
            var $this = $(this),
                $fieldTop = $this.offset().top,
                $fieldBottom = $fieldTop + $this.height(),
                $scrollTop = $(window).scrollTop(),
                $docBottom = $scrollTop + $(window).height()
            if ($fieldTop >= $docBottom - 50) {
                var $diffspace = $fieldBottom - $docBottom
                $(window).scrollTop($scrollTop + $diffspace + 150)
            }
        })
        $('#editPasscodeSubmit').click(function () {
            if ($('label[for=\'tlpvt-current-passcode\'],label[for=\'tlpvt-new-passcode\'],label[for=\'tlpvt-confirm-new-pass\']').hasClass('field-level-error')) {
                if (typeof lpSendData == 'function') {
                    lpfielderror++
                    lpSendData('page', 'FieldErrorCounter', lpfielderror)
                }
            }
            if ($('label[for=\'tlpvt-current-passcode-trans\'],label[for=\'tlpvt-new-passcode-trans\'],label[for=\'tlpvt-confirm-new-pass-trans\']').hasClass('field-error')) {
                if (typeof lpSendData == 'function') {
                    lpfielderror++
                    lpSendData('page', 'FieldErrorCounter', lpfielderror)
                }
            }
        })
    }
})
$(document).ready(function () {
    if ($('.passcode-module .enter-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        $('#passcode-enter-submit').click(function (e) {
            $('#EnterPasscodeForm').submit()
        })
        $('#tlpvt-passcode-input').keypress(function (e) {
            if (e.keyCode == 13) {
                $('#EnterPasscodeForm').submit()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#EnterPasscodeForm').validate({
                messages: {
                    'tlpvt-passcode-input': {
                        required: 'Please enter your Passcode to continue.'
                    }
                },
                rules: {
                    'tlpvt-passcode-input': {
                        required: true
                    }
                },
                submitHandler: function (form) {
                    if (typeof (input) !== 'undefined') {
                        input.parse_data('f_variable')
                    }
                    form.submit()
                },
                includeFieldLabel: false
            })
        } else {
            $('#EnterPasscodeForm').validate({
                messages: {
                    'tlpvt-passcode-input': {
                        required: 'Por favor, indique su Contrase&#241;a para continuar.'
                    }
                },
                rules: {
                    'tlpvt-passcode-input': {
                        required: true
                    }
                },
                submitHandler: function (form) {
                    if (typeof (input) !== 'undefined') {
                        input.parse_data('f_variable')
                    }
                    form.submit()
                },
                includeFieldLabel: false
            })
        }
        $('#tlpvt-passcode-input').focus()
    }
})
$(document).ready(function () {
    var $passcodeModuleGetStartedSkin = $('.passcode-module .sb-get-started-skin')
    $('input:text', $passcodeModuleGetStartedSkin).unbind('focus')
    if ($passcodeModuleGetStartedSkin.length > 0) {
        $('#btnStartContinue').click(function () {
            if ($('#clientSideErrors .error-message ul').length == 0) {
                $('#clientSideErrors .error-message').append('<ul type="disc">' + $errorMessageContent + '</ul>')
            }
        })
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpMonth') {
                $('#tlpvt-ccExpMonth').change()
            } else {
                if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpYear') {
                    $('#tlpvt-ccExpYear').change()
                }
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#getStartedForm', $passcodeModuleGetStartedSkin).validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-ccExpMonth': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-CC': {
                        required: 'Please enter your 15- to 16-digit credit card number.',
                        integer: 'Please enter your 15- to 16-digit credit card number.',
                        minlength: $.validator.format('Please enter your 15- to 16-digit credit card number.')
                    },
                    'tlpvt-SSN': {
                        required: 'Please enter your SSN/TIN Number.',
                        integer: 'Please enter your SSN/TIN Number.',
                        minlength: $.validator.format('Please enter your SSN/TIN Number.')
                    },
                    'tlpvt-CVV': {
                        required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        rangelength: $.validator.format('Please enter your {0} or {1} digit security code shown on your credit card.')
                    }
                },
                rules: {
                    'tlpvt-ccExpMonth': {
                        required: true
                    },
                    'tlpvt-ccExpYear': {
                        required: true
                    },
                    'tlpvt-CC': {
                        required: true,
                        integer: true,
                        minlength: 16
                    },
                    'tlpvt-SSN': {
                        required: true,
                        integer: true,
                        minlength: 4
                    },
                    'tlpvt-CVV': {
                        required: true,
                        integer: true,
                        rangelength: [
                            3,
                            4
                        ]
                    }
                }
            })
        } else {
            $('#getStartedForm', $passcodeModuleGetStartedSkin).validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-ssn-last4': {
                        required: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        integer: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    },
                    'tlpvt-CC': {
                        required: 'Por favor, introduzca su 15 - a 16 dÃÂ­gitos del nÃÂºmero de tarjeta de crÃÂ©dito.',
                        integer: 'Por favor, introduzca su 15 - a 16 dÃÂ­gitos del nÃÂºmero de tarjeta de crÃÂ©dito.',
                        minlength: $.validator.format('Por favor, introduzca su 15 - a 16 dÃÂ­gitos del nÃÂºmero de tarjeta de crÃÂ©dito.')
                    },
                    'tlpvt-SSN': {
                        required: 'Por favor, ingrese su nÃÂºmero de Seguro Social / N&#250;mero TIN.',
                        integer: 'Por favor, ingrese su nÃÂºmero de Seguro Social / N&#250;mero TIN.',
                        minlength: $.validator.format('Por favor, ingrese su nÃÂºmero de Seguro Social / N&#250;mero TIN.')
                    }
                },
                rules: {
                    'tlpvt-ccExpMonth': {
                        required: true
                    },
                    'tlpvt-ccExpYear': {
                        required: true
                    },
                    'tlpvt-CC': {
                        required: true,
                        integer: true,
                        minlength: 15
                    },
                    'tlpvt-SSN': {
                        required: true,
                        integer: true,
                        minlength: 4
                    }
                }
            })
        }
        $('#btnStartContinue', $passcodeModuleGetStartedSkin).click(function (e) {
            if ($('label[for=\'tlpvt-CVV\']').hasClass('field-level-error')) {
                $('label[for=\'tlpvt-CVV\']').next().css('margin', '5px 0 0 5px')
            }
            if ($('#tlpvt-ccExpMonth').attr('selectedIndex') == 0 || $('#tlpvt-ccExpYear').attr('selectedIndex') == 0) {
                boaTLAddEvent(e)
                $('label[for=\'tlpvt-ccExpMonth\']').addClass('field-level-error')
            } else {
                boaTLAddEvent(e)
                $('label[for=\'tlpvt-ccExpMonth\']').removeClass('field-level-error')
            }
        })
    }
})
$(document).ready(function () {
    var $passcodeModuleSelfEnrollIdSkin = $('.passcode-module .self-enroll-skin')
    $('input:text', $passcodeModuleSelfEnrollIdSkin).unbind('focus')
    if ($passcodeModuleSelfEnrollIdSkin.length > 0) {
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && e.target.id != 'no-account-modal' && e.target.name != 'cancel-passcode-self-submit' && $('.ui-widget-overlay').size() == 0) {
                $('#SelfEnrollAccountForm').attr('action', $('input[name=' + $(this).val() + 'Action]:hidden').val())
                $('#SelfEnrollAccountForm').submit()
                $('#passcode-self-submit').click()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#SelfEnrollAccountForm').validate({
                customSelects: false,
                includeFieldLabel: false,
                messages: {
                    'tlpvt-atm-pin': {
                        required: 'Please enter your 4- to 12-digit PIN.',
                        integer: 'Please enter your 4- to 12-digit PIN.',
                        minlength: 'Please enter your 4- to 12-digit PIN.'
                    },
                    'tlpvt-debit-or-atm': {
                        required: 'Please enter a valid ATM or debit card number.',
                        integer: 'Please enter a valid ATM or debit card number.',
                        minlength: 'Please enter a valid ATM or debit card number.'
                    },
                    'tlpvt-sixdigit-debit-or-atm': {
                        required: 'Please enter valid last 6 digits of your ATM or Debit Card number.',
                        integer: 'Please enter valid last 6 digits of your ATM or Debit Card number.',
                        minlength: 'Please enter valid last 6 digits of your ATM or Debit Card number.'
                    },
                    'tlpvt-acct-num': {
                        required: 'Please enter your account number.',
                        integer: 'Please enter your account number.',
                        minlength: 'Please enter your account number.'
                    },
                    'tlpvt-CVV': {
                        required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        minlength: 'Please enter your 3- or 4- digit security code shown on your credit card.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Please enter the valid expiration date on your card.'
                    }
                },
                rules: {
                    'tlpvt-debit-or-atm': {
                        required: {
                            depends: function (element) {
                                return ($('#tlpvt-debit-or-atm').is(':visible') && !$('#tlpvt-debit-or-atm').attr('disabled'))
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return ($('#tlpvt-debit-or-atm').is(':visible') && !$('#tlpvt-debit-or-atm').attr('disabled'))
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-debit-or-atm').is(':visible') && !$('#tlpvt-debit-or-atm').attr('disabled')) {
                                return 16
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-sixdigit-debit-or-atm': {
                        required: {
                            depends: function (element) {
                                return ($('#tlpvt-sixdigit-debit-or-atm').is(':visible') && !$('#tlpvt-sixdigit-debit-or-atm').attr('disabled'))
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return ($('#tlpvt-sixdigit-debit-or-atm').is(':visible') && !$('#tlpvt-sixdigit-debit-or-atm').attr('disabled'))
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-sixdigit-debit-or-atm').is(':visible') && !$('#tlpvt-sixdigit-debit-or-atm').attr('disabled')) {
                                return 6
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-atm-pin': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').length > 0
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').length > 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-atm-pin').length > 0) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-acct-num': {
                        required: {
                            depends: function (element) {
                                return ($('#tlpvt-acct-num').is(':visible') && !$('#tlpvt-acct-num').attr('disabled'))
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return ($('#tlpvt-acct-num').is(':visible') && !$('#tlpvt-acct-num').attr('disabled'))
                            }
                        },
                        minlength: 8
                    },
                    'tlpvt-CVV': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').length > 0
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').length > 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CVV').length > 0) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-ccExpMonth': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ccExpMonth').is(':visible')
                            }
                        }
                    },
                    'tlpvt-ccExpYear': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ccExpYear').is(':visible')
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    $('#tlpvt-atm-pin-Val').val($('#tlpvt-atm-pin').val())
                    $('#tlpvt-atm-pin').val('')
                    $('#tlpvt-CVV-Val').val($('#tlpvt-CVV').val())
                    $('#tlpvt-CVV').val('')
                    form.submit()
                }
            })
        } else {
            $('#SelfEnrollAccountForm').validate({
                customSelects: false,
                includeFieldLabel: false,
                messages: {
                    'tlpvt-debit-or-atm': {
                        required: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.',
                        integer: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.',
                        minlength: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.'
                    },
                    'tlpvt-sixdigit-debit-or-atm': {
                        required: 'Por favor, indique los &#250;ltimos 6 d&#237;gitos v&#225;lidos del n&#250;mero de su tarjeta de cajero autom&#225;tico (ATM) o de d&#233;bito.',
                        integer: 'Por favor, indique los &#250;ltimos 6 d&#237;gitos v&#225;lidos del n&#250;mero de su tarjeta de cajero autom&#225;tico (ATM) o de d&#233;bito.',
                        minlength: 'Por favor, indique los &#250;ltimos 6 d&#237;gitos v&#225;lidos del n&#250;mero de su tarjeta de cajero autom&#225;tico (ATM) o de d&#233;bito.'
                    },
                    'tlpvt-atm-pin': {
                        required: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                        integer: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                        minlength: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.'
                    },
                    'tlpvt-acct-num': {
                        required: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        integer: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        minlength: 'Por favor, introduzca su n&#250;mero de cuenta.'
                    },
                    'tlpvt-CVV': {
                        required: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                        integer: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                        minlength: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    }
                },
                rules: {
                    'tlpvt-debit-or-atm': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-debit-or-atm').is(':visible')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-debit-or-atm').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-debit-or-atm').is(':visible')) {
                                return 16
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-sixdigit-debit-or-atm': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-sixdigit-debit-or-atm').is(':visible')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-sixdigit-debit-or-atm').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-sixdigit-debit-or-atm').is(':visible')) {
                                return 6
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-atm-pin': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').length > 0
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').length > 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-atm-pin').length > 0) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-acct-num': {
                        required: {
                            depends: function (element) {
                                return ($('#tlpvt-acct-num').is(':visible') && !$('#tlpvt-acct-num').attr('disabled'))
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return ($('#tlpvt-acct-num').is(':visible') && !$('#tlpvt-acct-num').attr('disabled'))
                            }
                        },
                        minlength: 8
                    },
                    'tlpvt-CVV': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').length > 0
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').length > 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CVV').length > 0) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-ccExpMonth': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ccExpMonth').is(':visible')
                            }
                        }
                    },
                    'tlpvt-ccExpYear': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ccExpYear').is(':visible')
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    $('#tlpvt-atm-pin-Val').val($('#tlpvt-atm-pin').val())
                    $('#tlpvt-atm-pin').val('')
                    $('#tlpvt-CVV-Val').val($('#tlpvt-CVV').val())
                    $('#tlpvt-CVV').val('')
                    form.submit()
                }
            })
        }
        $('#passcode-self-submit').click(function () {
            if (($('#tlpvt-ccExpMonth').is(':visible') && $('#tlpvt-ccExpMonth').attr('selectedIndex') == 0) || ($('#tlpvt-ccExpYear').is(':visible') && $('#tlpvt-ccExpYear').attr('selectedIndex') == 0)) {
                $('label[for=\'tlpvt-ccExpMonth\']').addClass('field-level-error')
            } else {
                $('label[for=\'tlpvt-ccExpMonth\']').removeClass('field-level-error')
            }
            if ($('input[name=\'enrollProductSelected\']').is(':visible') && $('input:checked').length == 0) {
                $('div.verify-title').addClass('field-level-error')
                $('.messaging-module .error-skin .error-message div').find('ul').remove()
                $('html').attr('lang').toLowerCase() == 'en-us' ? $('.messaging-module .error-skin .error-message div').append('<ul><li>Please select one account to verify.</li></ul>') : $('.messaging-module .error-skin .error-message div').append('<ul><li>Por favor, seleccione una cuenta para verificarla.</li></ul>')
                $('.messaging-module#clientSideErrors').removeClass('hide')
                return false
            } else {
                $('div.verify-title').removeClass('field-level-error')
                $('#SelfEnrollAccountForm').submit()
            }
            if ($('label[for=\'tlpvt-atm-pin\']').hasClass('field-level-error')) {
                $('#tlpvt-atm-pin').val('')
            }
        })
        $('input[name=\'enrollProductSelected\']:checked').change()
    }
})
$(document).ready(function () {
    if ($('.passcode-module .success-rp-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        var cmPosAck = $('body').find('.pos-ack-skin').length
        var cm = {}
        if (typeof initCoremetricsVars === 'function') {
            cm = new initCoremetricsVars()
        }
        if (typeof cm.pageCategoryID != 'undefined' && typeof cm.pageID != 'undefined' && typeof cm.appName != 'undefined') {
            if (cmPosAck > 1) {
                cm.appStepName = 'Enroll_Complete_Loan'
            } else {
                cm.appStepName = 'Enroll_Complete_Loan_Degraded'
            }
            cm.pageID = cm.pageCategoryID + ';' + cm.appName + ':' + cm.appStepNumber + ':' + cm.appStepName
            bofaCM(cm.pageCategoryID, cm.pageID, cm.appName, null, cm.CMConversionEvent, null, null, null, null, cm.appID)
        }
        $('a.button-blue').bind('click', function (event) {
            if ($(this).hasClass('button-blue')) {
                $(this).removeClass('button-blue').addClass('button-inactive')
                return true
            } else {
                event.preventDefault()
                return false
            }
        })
    }
})
$(document).ready(function () {
    if ($('.passcode-module .success-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        var cmPosAck = $('body').find('.pos-ack-skin').length
        var cm = {}
        if (typeof initCoremetricsVars === 'function') {
            cm = new initCoremetricsVars()
        }
        if (typeof cm.pageCategoryID != 'undefined' && typeof cm.pageID != 'undefined' && typeof cm.appName != 'undefined') {
            if (cmPosAck > 1) {
                cm.appStepName = 'Enroll_Complete_Loan'
            } else {
                cm.appStepName = 'Enroll_Complete_Loan_Degraded'
            }
            cm.pageID = cm.pageCategoryID + ';' + cm.appName + ':' + cm.appStepNumber + ':' + cm.appStepName
            bofaCM(cm.pageCategoryID, cm.pageID, cm.appName, null, cm.CMConversionEvent, null, null, null, null, cm.appID)
        }
        $('a.button-blue').bind('click', function (event) {
            if ($(this).hasClass('button-blue')) {
                $(this).removeClass('button-blue').addClass('button-inactive')
                return true
            } else {
                event.preventDefault()
                return false
            }
        })
    }
})
$(document).ready(function () {
    var $passcodeModuleValidateCCSkin = $('.passcode-module .validate-cc-skin')
    if ($passcodeModuleValidateCCSkin.length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpMonth') {
                $('#tlpvt-ccExpMonth').change()
            } else {
                if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpYear') {
                    $('#tlpvt-ccExpYear').change()
                } else {
                    if (e.keyCode == 13 && e.target.id == 'tlpvt-dobMonth') {
                        $('#tlpvt-dobMonth').change()
                    } else {
                        if (e.keyCode == 13 && e.target.id == 'tlpvt-dobDate') {
                            $('#tlpvt-dobDate').change()
                        } else {
                            if (e.keyCode == 13 && e.target.id == 'tlpvt-dobYear') {
                                $('#tlpvt-dobYear').change()
                            } else {
                                if (e.keyCode == 13 && e.target.id == 'tlpvt-CVV') {
                                    $('#tlpvt-CVV').change()
                                } else {
                                    if (e.keyCode == 13 && e.target.id == 'tlpvt-SSN') {
                                        $('#tlpvt-SSN').change()
                                    } else {
                                        if (e.keyCode == 13 && e.target.id == 'tlpvt-mmn') {
                                            $('#tlpvt-mmn').change()
                                        } else {
                                            if (e.keyCode == 13 && e.target.id != 'selectVerifyAccount') {
                                                $('#ValidateCCForm').submit()
                                                $('#passcode-verify-submit').click()
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#ValidateCCForm').validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-CVV': {
                        required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        minlength: 'Please enter your 3- or 4- digit security code shown on your credit card.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-SSN': {
                        required: 'Please enter the last 4 digits of your SSN or TIN.',
                        integer: 'Please enter the last 4 digits of your SSN or TIN.',
                        minlength: 'Please enter the last 4 digits of your SSN or TIN.'
                    },
                    'tlpvt-dobMonth': {
                        required: 'Please enter the Date of Birth.'
                    },
                    'tlpvt-dobDate': {
                        required: 'Please enter the Date of Birth.'
                    },
                    'tlpvt-dobYear': {
                        required: 'Please enter the Date of Birth.'
                    },
                    'tlpvt-mmn': {
                        required: 'Please enter your mother\'s maiden name.'
                    }
                },
                rules: {
                    'tlpvt-ccExpMonth': {
                        required: true
                    },
                    'tlpvt-ccExpYear': {
                        required: true
                    },
                    'tlpvt-CVV': {
                        required: true,
                        integer: true,
                        minlength: function () {
                            if ($('#tlpvt-CVV').is(':visible')) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-SSN': {
                        required: true,
                        integer: true,
                        minlength: function () {
                            if ($('#tlpvt-SSN').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-dobMonth': {
                        required: true
                    },
                    'tlpvt-dobDate': {
                        required: true
                    },
                    'tlpvt-dobYear': {
                        required: true
                    },
                    'tlpvt-mmn': {
                        required: true
                    }
                }
            })
        } else {
            $('#ValidateCCForm').validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-CVV': {
                        required: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                        integer: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                        minlength: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    },
                    'tlpvt-SSN': {
                        required: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        integer: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    },
                    'tlpvt-dobMonth': {
                        required: 'Por favor, introduzca la fecha de nacimiento.'
                    },
                    'tlpvt-dobDate': {
                        required: 'Por favor, introduzca la fecha de nacimiento.'
                    },
                    'tlpvt-dobYear': {
                        required: 'Por favor, introduzca la fecha de nacimiento.'
                    },
                    'tlpvt-mmn': {
                        required: 'Por favor, introduzca el nombre de soltera de la madre.'
                    }
                },
                rules: {
                    'tlpvt-ccExpMonth': {
                        required: true
                    },
                    'tlpvt-ccExpYear': {
                        required: true
                    },
                    'tlpvt-CVV': {
                        required: true,
                        integer: true,
                        minlength: function () {
                            if ($('#tlpvt-CVV').is(':visible')) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-SSN': {
                        required: true,
                        integer: true,
                        minlength: function () {
                            if ($('#tlpvt-SSN').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-dobMonth': {
                        required: true
                    },
                    'tlpvt-dobDate': {
                        required: true
                    },
                    'tlpvt-dobYear': {
                        required: true
                    },
                    'tlpvt-mmn': {
                        required: true
                    }
                }
            })
        }
        $('#passcode-verify-submit').click(function () {
            if ($('#tlpvt-ccExpMonth').attr('selectedIndex') == 0 || $('#tlpvt-ccExpYear').attr('selectedIndex') == 0) {
                $('label[for=\'tlpvt-ccExpMonth\']').addClass('field-level-error')
            } else {
                $('label[for=\'tlpvt-ccExpMonth\']').removeClass('field-level-error')
            }
            if ($('#tlpvt-dobMonth').attr('selectedIndex') == 0 || $('#tlpvt-dobYear').attr('selectedIndex') == 0 || $('#tlpvt-dobDate').attr('selectedIndex') == 0) {
                $('label[for=\'tlpvt-dobMonth\']').addClass('field-level-error')
            } else {
                $('label[for=\'tlpvt-dobMonth\']').removeClass('field-level-error')
            }
        })
    }
})

function trimVal(stringToTrim) {
    return stringToTrim.replace(/^\s+|\s+$/g, '')
}

var passcodeVerifyEnroll = {
    maskSSNChar: function ($this) {
        var attrVal = $this.val()
        var attrId = $this.attr('id')
        var maskVal = ''
        if (attrVal.indexOf('*') == -1) {
            $('#' + attrId + '-hidden').val(attrVal)
        }
        for (var i = 0; i < attrVal.length; i++) {
            maskVal += '*'
        }
        $this.val(maskVal)
    },
    unMaskSSNChar: function ($this) {
        var attrId = $this.attr('id')
        var unmaskVal = $('#' + attrId + '-hidden').val()
        $this.val(unmaskVal)
    }
}
$(document).ready(function () {
    var $passcodeModuleVerifyEnrollIdSkin = $('.passcode-module .verify-enroll-skin')
    var maoTitle = $('.passcode-module #mortgage-auto-others').html()
    var infoMsgTxt = $('.passcode-module .verify-enroll-skin .mao-title').html()
    $('input:text', $passcodeModuleVerifyEnrollIdSkin).unbind('focus')
    if ($passcodeModuleVerifyEnrollIdSkin.length > 0) {
        if ($('#tlpvt-sixdigit-account-num').is(':visible')) {
            $('html').attr('lang').toLowerCase() == 'en-us' ? $('#tlpvt-sixdigit-account-num').val('Numbers only') : $('#tlpvt-sixdigit-account-num').val('NÃºmeros solamente')
            $('#tlpvt-sixdigit-account-num').addClass('hint-text')
        } else {
            $('html').attr('lang').toLowerCase() == 'en-us' ? $('#tlpvt-account-num-val').val('Numbers only') : $('#tlpvt-account-num-val').val('NÃºmeros solamente')
            $('#tlpvt-account-num-val').addClass('hint-text')
        }
        $('#tlpvt-account-num-val, #tlpvt-sixdigit-account-num').on('focus blur', function (event) {
            if ($('#tlpvt-sixdigit-account-num').is(':visible')) {
                if (event.type == 'focus' && ($.trim($('#tlpvt-sixdigit-account-num').val()) == 'Numbers only' || $.trim($('#tlpvt-sixdigit-account-num').val()) == 'NÃºmeros solamente')) {
                    $('#tlpvt-sixdigit-account-num').removeClass('hint-text')
                    $('#tlpvt-sixdigit-account-num').val('')
                    $('#VerifyEnrollAccountForm').attr({
                        'class': 'common-form',
                        'data-common-form': 'gis-mask'
                    })
                    if (typeof vipaaGISMaskingEnabled !== 'undefined' && vipaaGISMaskingEnabled == 'true') {
                        boa.form.init()
                    }
                } else {
                    if ($('#tlpvt-sixdigit-account-num').val() == '') {
                        setTimeout(function () {
                            $('html').attr('lang').toLowerCase() == 'en-us' ? $('#tlpvt-sixdigit-account-num').val('Numbers only') : $('#tlpvt-sixdigit-account-num').val('NÃºmeros solamente')
                            $('#tlpvt-sixdigit-account-num').addClass('hint-text')
                        }, 100)
                    }
                }
            } else {
                if (event.type == 'focus' && ($.trim($('#tlpvt-account-num-val').val()) == 'Numbers only' || $.trim($('#tlpvt-account-num-val').val()) == 'NÃºmeros solamente')) {
                    $('#tlpvt-account-num-val').removeClass('hint-text')
                    $('#tlpvt-account-num-val').val('')
                    $('#VerifyEnrollAccountForm').attr({
                        'class': 'common-form',
                        'data-common-form': 'gis-mask'
                    })
                    if (typeof vipaaGISMaskingEnabled !== 'undefined' && vipaaGISMaskingEnabled == 'true') {
                        boa.form.init()
                    }
                } else {
                    if ($('#tlpvt-account-num-val').val() == '') {
                        setTimeout(function () {
                            $('html').attr('lang').toLowerCase() == 'en-us' ? $('#tlpvt-account-num-val').val('Numbers only') : $('#tlpvt-account-num-val').val('NÃºmeros solamente')
                            $('#tlpvt-account-num-val').addClass('hint-text')
                        }, 100)
                    }
                }
            }
        })
        $('div.label-container label[for="tlpvt-loan-atm-pin"]').addClass('nineDigitSSN')
        $('#reload-atm-section').on('click', function () {
            $('#selectVerifyAccount').attr('selectedIndex', 1)
            $('#selectVerifyAccount').change()
        })
        $('#reload-cc-section').on('click', function () {
            $('#selectVerifyAccount').attr('selectedIndex', 2)
            $('#selectVerifyAccount').change()
        })
        $('#selectVerifyAccount').change(function () {
            var $trimmedValue = $.trim($('#selectVerifyAccount option:selected').text())
            $('.messaging-module#clientSideErrors').css('display', 'none')
            $('div,label').removeClass('field-level-error')
            var $skVerifyDiv = this.value == '' ? 'default' : this.value
            $('#' + $skVerifyDiv).removeClass('hide').siblings().addClass('hide')
            $('#VerifyEnrollAccountForm').attr('action', $('input[name=' + $skVerifyDiv + 'Action]:hidden').val())
            if ($(this).attr('selectedIndex') > 3) {
                $('.passcode-module #mortgage-auto-others').html(maoTitle)
                $('.passcode-module .verify-enroll-skin .mao-title').html(infoMsgTxt.replace('dropdown-value', $trimmedValue).replace('Mortgage', $trimmedValue).replace('Auto Loan', $trimmedValue).replace('Other Account types', $trimmedValue))
                $('#mortgage-auto-others').removeClass('hide').siblings().addClass('hide')
            }
            processCoremetrics($trimmedValue)
            if ($(this).attr('selectedIndex') == 2) {
                lpSendData('page', 'OLB_AccountType', 'consumer')
            } else {
                if ($(this).attr('selectedIndex') == 3) {
                    lpSendData('page', 'OLB_AccountType', 'small_business')
                }
            }
        })
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && e.target.id == 'selectVerifyAccount') {
                $('#selectVerifyAccount').change()
            } else {
                if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpMonth') {
                    $('#tlpvt-ccExpMonth').change()
                } else {
                    if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpYear') {
                        $('#tlpvt-ccExpYear').change()
                    } else {
                        if (e.keyCode == 13 && e.target.id == 'state-select') {
                            $('#state-select').change()
                        } else {
                            if (e.keyCode == 13 && e.target.id != 'selectVerifyAccount' && e.target.id != 'no-account-modal' && e.target.name != 'cancel-passcode-verify-submit' && $('.ui-widget-overlay').size() == 0) {
                                $('#VerifyEnrollAccountForm').attr('action', $('input[name=' + $('#selectVerifyAccount').val() + 'Action]:hidden').val())
                                $('#VerifyEnrollAccountForm').submit()
                                $('#passcode-verify-submit').click()
                            }
                        }
                    }
                }
            }
        })
        $('input[name=\'ssnAcctNum\']').click(function () {
            if ($(this).val() == 'SSN') {
                $('.verify-ssn', $passcodeModuleVerifyEnrollIdSkin).show()
                $('label[for=ssnAcctNum]').removeClass('field-level-error')
                $('.account-num', $passcodeModuleVerifyEnrollIdSkin).hide()
            } else {
                $('.account-num', $passcodeModuleVerifyEnrollIdSkin).show()
                $('label[for=radio-ssn]').removeClass('field-level-error')
                $('.verify-ssn', $passcodeModuleVerifyEnrollIdSkin).hide()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#VerifyEnrollAccountForm').validate({
                includeFieldLabel: false,
                orphanFieldLabels: {
                    'tlpvt-ssn-last4': 'radio-ssn',
                    'tlpvt-acct-num': 'ssnAcctNum'
                },
                messages: {
                    'tlpvt-debit-or-atm': {
                        required: 'Please enter a valid ATM or debit card number.',
                        integer: 'Please enter a valid ATM or debit card number.',
                        minlength: 'Please enter a valid ATM or debit card number.'
                    },
                    'tlpvt-atm-pin': {
                        required: 'Please enter your 4- to 12-digit PIN.',
                        integer: 'Please enter your 4- to 12-digit PIN.',
                        minlength: 'Please enter your 4- to 12-digit PIN.'
                    },
                    'tlpvt-acct-num': {
                        required: 'Please enter your account number.',
                        integer: 'Please enter your account number.',
                        minlength: 'Please enter your account number.'
                    },
                    'tlpvt-ssn-last4': {
                        required: 'Please enter the last 4 digits of your SSN or TIN.',
                        integer: 'Please enter the last 4 digits of your SSN or TIN.',
                        minlength: 'Please enter the last 4 digits of your SSN or TIN.'
                    },
                    selectVerifyAccount: {
                        required: 'Please select one account to verify.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-CC': {
                        required: 'Please enter your 15- to 16-digit credit card number.',
                        integer: 'Please enter your 15- to 16-digit credit card number.',
                        minlength: 'Please enter your 15- to 16-digit credit card number.'
                    },
                    'tlpvt-CVV': {
                        required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        minlength: 'Please enter your 3- or 4- digit security code shown on your credit card.'
                    },
                    'tlpvt-SSN': {
                        required: 'Please enter the last 4 digits of your SSN or TIN.',
                        integer: 'Please enter the last 4 digits of your SSN or TIN.',
                        minlength: 'Please enter the last 4 digits of your SSN or TIN.'
                    },
                    'tlpvt-personalCC': {
                        required: 'Please enter your 15- to 16-digit credit card number.',
                        integer: 'Please enter your 15- to 16-digit credit card number.',
                        minlength: 'Please enter your 15- to 16-digit credit card number.'
                    },
                    'cc-zip': {
                        required: 'Please enter the 5 digit zip code.',
                        integer: 'Please enter the 5 digit zip code.',
                        minlength: 'Please enter the 5 digit zip code.'
                    },
                    'tlpvt-loan-debit-or-atm': {
                        required: 'Please enter your account number.',
                        integer: 'Please enter your account number.',
                        minlength: 'Please enter your account number.'
                    },
                    'tlpvt-loan-atm-pin': {
                        required: 'Please enter 9 digits of your SSN or TIN.',
                        integer: 'Please enter 9 digits of your SSN or TIN.',
                        minlength: 'Please enter 9 digits of your SSN or TIN.'
                    },
                    'tlpvt-account-num-val': {
                        required: 'Please enter your account number.',
                        integer: 'Please enter your account number.',
                        minlength: 'Please enter your account number.'
                    },
                    'tlpvt-sixdigit-account-num': {
                        required: 'Please enter valid last 6 digits of your card or account.',
                        integer: 'Please enter valid last 6 digits of your card or account.',
                        minlength: 'Please enter valid last 6 digits of your card or account.',
                        maxlength: 'Please enter valid last 6 digits of your card or account.'
                    },
                    'tlpvt-ssn-num-val': {
                        required: 'Please enter 9 digits of your SSN or TIN.',
                        integer: 'Please enter 9 digits of your SSN or TIN.',
                        minlength: 'Please enter 9 digits of your SSN or TIN.'
                    }
                },
                rules: {
                    'tlpvt-debit-or-atm': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'atmDebit'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-debit-or-atm').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-debit-or-atm').is(':visible')) {
                                return 16
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-atm-pin': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'atmDebit'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-atm-pin').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-acct-num': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnAcctNum\']:checked').val() == 'AccountNumber'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('input[name=\'ssnAcctNum\']:checked').val() == 'AccountNumber'
                            }
                        },
                        minlength: 8
                    },
                    'tlpvt-ssn-last4': {
                        required: {
                            depends: function (element) {
                                return $('.verify-ssn').is(':visible')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-ssn-last4').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-ssn-last4').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    selectVerifyAccount: {
                        required: true
                    },
                    'tlpvt-ccExpMonth': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        }
                    },
                    'tlpvt-ccExpYear': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        }
                    },
                    'tlpvt-CC': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CC').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CC').is(':visible')) {
                                return 15
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-CVV': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CVV').is(':visible')) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-SSN': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-SSN').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-SSN').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-personalCC': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'personalCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-personalCC').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-personalCC').is(':visible')) {
                                return 15
                            } else {
                                return 0
                            }
                        }
                    },
                    'cc-zip': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'personalCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#cc-zip').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#cc-zip').is(':visible')) {
                                return 5
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-loan-debit-or-atm': {
                        required: {
                            depends: function (element) {
                                return ($('#selectVerifyAccount').val() == 'mortgage' || $('#selectVerifyAccount').val() == 'auto' || $('#selectVerifyAccount').val() == 'others')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-loan-debit-or-atm').is(':visible')
                            }
                        },
                        maxlength: function () {
                            if ($('#tlpvt-loan-debit-or-atm').is(':visible')) {
                                return 16
                            } else {
                                return 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-loan-debit-or-atm').is(':visible')) {
                                return 8
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-loan-atm-pin': {
                        required: {
                            depends: function (element) {
                                return ($('#selectVerifyAccount').val() == 'mortgage' || $('#selectVerifyAccount').val() == 'auto' || $('#selectVerifyAccount').val() == 'others')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-loan-atm-pin').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-loan-atm-pin').is(':visible')) {
                                return 9
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-account-num-val': {
                        required: {
                            depends: function (element) {
                                return ($('#tlpvt-account-num-val-masked').is(':visible') || $('#tlpvt-account-num-val').is(':visible'))
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return ($('#tlpvt-account-num-val-masked').is(':visible') || $('#tlpvt-account-num-val').is(':visible'))
                            }
                        },
                        maxlength: function () {
                            if ($('#tlpvt-account-num-val-masked').is(':visible') || $('#tlpvt-account-num-val').is(':visible')) {
                                return 16
                            } else {
                                return 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-account-num-val-masked').is(':visible') || $('#tlpvt-account-num-val').is(':visible')) {
                                return 9
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-sixdigit-account-num': {
                        required: {
                            depends: function (element) {
                                return ($('#tlpvt-sixdigit-account-num-masked').is(':visible') || $('#tlpvt-sixdigit-account-num').is(':visible'))
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return ($('#tlpvt-sixdigit-account-num-masked').is(':visible') || $('#tlpvt-sixdigit-account-num').is(':visible'))
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-sixdigit-account-num-masked').is(':visible') || $('#tlpvt-sixdigit-account-num').is(':visible')) {
                                return 6
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-ssn-num-val': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ssn-num-val').is(':visible')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-ssn-num-val').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-ssn-num').is(':visible')) {
                                return 9
                            } else {
                                return 0
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    var actnum
                    var ssnnum
                    if ($('#tlpvt-sixdigit-account-num-masked').is(':visible')) {
                        actnum = $('#tlpvt-sixdigit-account-num').val()
                        ssnnum = $('#tlpvt-ssn-num-val').val()
                        if (typeof (vipaaPublicKey) !== 'undefined') {
                            var encAccountnum = encryptA(actnum, vipaaPublicKey)
                            var encssn = encryptA(ssnnum, vipaaPublicKey)
                            $('#tlpvt-account-num').val(encAccountnum)
                            $('#tlpvt-ssn-num').val(encssn)
                            $('#tlpvt-sixdigit-account-num').val('')
                            $('#tlpvt-ssn-num-val').val('')
                        } else {
                            $('#tlpvt-account-num').val(actnum)
                            $('#tlpvt-ssn-num').val(ssnnum)
                            $('#tlpvt-sixdigit-account-num').val('')
                            $('#tlpvt-ssn-num-val').val('')
                        }
                    } else {
                        actnum = $('#tlpvt-account-num-val').val()
                        ssnnum = $('#tlpvt-ssn-num-val').val()
                        if (typeof (vipaaPublicKey) !== 'undefined') {
                            var encAccountnum = encryptA(actnum, vipaaPublicKey)
                            var encssn = encryptA(ssnnum, vipaaPublicKey)
                            $('#tlpvt-account-num').val(encAccountnum)
                            $('#tlpvt-ssn-num').val(encssn)
                            $('#tlpvt-account-num-val').val('')
                            $('#tlpvt-ssn-num-val').val('')
                        } else {
                            $('#tlpvt-account-num').val(actnum)
                            $('#tlpvt-ssn-num').val(ssnnum)
                            $('#tlpvt-account-num-val').val('')
                            $('#tlpvt-ssn-num-val').val('')
                        }
                    }
                    form.submit()
                }
            })
        } else {
            $('#VerifyEnrollAccountForm').validate({
                includeFieldLabel: false,
                orphanFieldLabels: {
                    'tlpvt-ssn-last4': 'radio-ssn',
                    'tlpvt-acct-num': 'ssnAcctNum'
                },
                messages: {
                    'tlpvt-debit-or-atm': {
                        required: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.',
                        integer: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.',
                        minlength: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.'
                    },
                    'tlpvt-atm-pin': {
                        required: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                        integer: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                        minlength: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.'
                    },
                    'tlpvt-acct-num': {
                        required: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        integer: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        minlength: 'Por favor, introduzca su n&#250;mero de cuenta.'
                    },
                    'tlpvt-ssn-last4': {
                        required: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        integer: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    },
                    selectVerifyAccount: {
                        required: 'Por favor, seleccione una cuenta para verificarla.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    },
                    'tlpvt-CC': {
                        required: 'Por favor, indique su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito.',
                        integer: 'Por favor, indique su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito.',
                        minlength: 'Por favor, indique su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito.'
                    },
                    'tlpvt-CVV': {
                        required: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                        integer: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                        minlength: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.'
                    },
                    'tlpvt-SSN': {
                        required: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        integer: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    },
                    'tlpvt-personalCC': {
                        required: 'Por favor, indique su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito.',
                        integer: 'Por favor, indique su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito.',
                        minlength: 'Por favor, indique su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito.'
                    },
                    'cc-zip': {
                        required: 'Por favor indique el c&#243;digo postal de 5 d&#237;gitos.',
                        integer: 'Por favor indique el c&#243;digo postal de 5 d&#237;gitos.',
                        minlength: 'Por favor indique el c&#243;digo postal de 5 d&#237;gitos.'
                    },
                    'tlpvt-loan-debit-or-atm': {
                        required: 'Por favor, indique su n&#250;mero de cuenta.',
                        integer: 'Por favor, indique su n&#250;mero de cuenta.',
                        minlength: 'Por favor, indique su n&#250;mero de cuenta.'
                    },
                    'tlpvt-loan-atm-pin': {
                        required: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        integer: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    },
                    'tlpvt-account-num-val': {
                        required: 'Por favor, indique su n&#250;mero de cuenta.',
                        integer: 'Por favor, indique su n&#250;mero de cuenta.',
                        minlength: 'Por favor, indique su n&#250;mero de cuenta.',
                        maxlength: 'Por favor, indique su n&#250;mero de cuenta.'
                    },
                    'tlpvt-sixdigit-account-num': {
                        required: 'Por favor, indique los &#250;ltimos 6 d&#237;gitos v&#225;lidos de su tarjeta o cuenta.',
                        integer: 'Por favor, indique los &#250;ltimos 6 d&#237;gitos v&#225;lidos de su tarjeta o cuenta.',
                        minlength: 'Por favor, indique los &#250;ltimos 6 d&#237;gitos v&#225;lidos de su tarjeta o cuenta.',
                        maxlength: 'Por favor, indique los &#250;ltimos 6 d&#237;gitos v&#225;lidos de su tarjeta o cuenta.'
                    },
                    'tlpvt-ssn-num-val': {
                        required: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        integer: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    }
                },
                rules: {
                    'tlpvt-debit-or-atm': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'atmDebit'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-debit-or-atm').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-debit-or-atm').is(':visible')) {
                                return 16
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-atm-pin': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'atmDebit'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-atm-pin').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-acct-num': {
                        required: {
                            depends: function (element) {
                                return $('input[name=\'ssnAcctNum\']:checked').val() === 'AccountNumber'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('input[name=\'ssnAcctNum\']:checked').val() === 'AccountNumber'
                            }
                        },
                        minlength: 8
                    },
                    'tlpvt-ssn-last4': {
                        required: {
                            depends: function (element) {
                                return $('.verify-ssn').is(':visible')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-ssn-last4').is(':visible')
                            }
                        },
                        minlength: 4
                    },
                    selectVerifyAccount: {
                        required: true
                    },
                    'tlpvt-ccExpMonth': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        }
                    },
                    'tlpvt-ccExpYear': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        }
                    },
                    'tlpvt-CC': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CC').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CC').is(':visible')) {
                                return 15
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-CVV': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CVV').is(':visible')) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-SSN': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'sbCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-SSN').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-SSN').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-personalCC': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'personalCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-personalCC').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-personalCC').is(':visible')) {
                                return 15
                            } else {
                                return 0
                            }
                        }
                    },
                    'cc-zip': {
                        required: {
                            depends: function (element) {
                                return $('#selectVerifyAccount').val() == 'personalCC'
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#cc-zip').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#cc-zip').is(':visible')) {
                                return 5
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-loan-debit-or-atm': {
                        required: {
                            depends: function (element) {
                                return ($('#selectVerifyAccount').val() == 'mortgage' || $('#selectVerifyAccount').val() == 'auto' || $('#selectVerifyAccount').val() == 'others')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-loan-debit-or-atm').is(':visible')
                            }
                        },
                        maxlength: function () {
                            if ($('#tlpvt-loan-debit-or-atm').is(':visible')) {
                                return 16
                            } else {
                                return 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-loan-debit-or-atm').is(':visible')) {
                                return 8
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-loan-atm-pin': {
                        required: {
                            depends: function (element) {
                                return ($('#selectVerifyAccount').val() == 'mortgage' || $('#selectVerifyAccount').val() == 'auto' || $('#selectVerifyAccount').val() == 'others')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-loan-atm-pin').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-loan-atm-pin').is(':visible')) {
                                return 9
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-account-num-val': {
                        required: {
                            depends: function (element) {
                                return ($('#tlpvt-account-num-val-masked').is(':visible') || $('#tlpvt-account-num-val').is(':visible'))
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return ($('#tlpvt-account-num-val-masked').is(':visible') || $('#tlpvt-account-num-val').is(':visible'))
                            }
                        },
                        maxlength: function () {
                            if ($('#tlpvt-account-num-val-masked').is(':visible') || $('#tlpvt-account-num-val').is(':visible')) {
                                return 16
                            } else {
                                return 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-account-num-val-masked').is(':visible') || $('#tlpvt-account-num-val').is(':visible')) {
                                return 9
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-sixdigit-account-num': {
                        required: {
                            depends: function (element) {
                                return ($('#tlpvt-sixdigit-account-num-masked').is(':visible') || $('#tlpvt-sixdigit-account-num').is(':visible'))
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return ($('#tlpvt-sixdigit-account-num-masked').is(':visible') || $('#tlpvt-sixdigit-account-num').is(':visible'))
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-sixdigit-account-num-masked').is(':visible') || $('#tlpvt-sixdigit-account-num').is(':visible')) {
                                return 6
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-ssn-num-val': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ssn-num-val').is(':visible')
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-ssn-num-val').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-ssn-num-val').is(':visible')) {
                                return 9
                            } else {
                                return 0
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    var actnum
                    var ssnnum
                    if ($('#tlpvt-sixdigit-account-num-masked').is(':visible')) {
                        actnum = $('#tlpvt-sixdigit-account-num').val()
                        ssnnum = $('#tlpvt-ssn-num-val').val()
                        if (typeof (vipaaPublicKey) !== 'undefined') {
                            var encAccountnum = encryptA(actnum, vipaaPublicKey)
                            var encssn = encryptA(ssnnum, vipaaPublicKey)
                            $('#tlpvt-account-num').val(encAccountnum)
                            $('#tlpvt-ssn-num').val(encssn)
                            $('#tlpvt-sixdigit-account-num').val('')
                            $('#tlpvt-ssn-num-val').val('')
                        } else {
                            $('#tlpvt-account-num').val(actnum)
                            $('#tlpvt-ssn-num').val(ssnnum)
                            $('#tlpvt-sixdigit-account-num').val('')
                            $('#tlpvt-ssn-num-val').val('')
                        }
                    } else {
                        actnum = $('#tlpvt-account-num-val').val()
                        ssnnum = $('#tlpvt-ssn-num-val').val()
                        if (typeof (vipaaPublicKey) !== 'undefined') {
                            var encAccountnum = encryptA(actnum, vipaaPublicKey)
                            var encssn = encryptA(ssnnum, vipaaPublicKey)
                            $('#tlpvt-account-num').val(encAccountnum)
                            $('#tlpvt-ssn-num').val(encssn)
                            $('#tlpvt-account-num-val').val('')
                            $('#tlpvt-ssn-num-val').val('')
                        } else {
                            $('#tlpvt-account-num').val(actnum)
                            $('#tlpvt-ssn-num').val(ssnnum)
                            $('#tlpvt-account-num-val').val('')
                            $('#tlpvt-ssn-num-val').val('')
                        }
                    }
                    form.submit()
                }
            })
        }
        $('#passcode-verify-submit').click(function () {
            if ($('#selectVerifyAccount').val() == 'sbCC') {
                if ($('#tlpvt-ccExpMonth').attr('selectedIndex') == 0 || $('#tlpvt-ccExpYear').attr('selectedIndex') == 0) {
                    $('label[for=\'tlpvt-ccExpMonth\']').addClass('field-level-error')
                } else {
                    $('label[for=\'tlpvt-ccExpMonth\']').removeClass('field-level-error')
                }
            } else {
                $('select').each(function () {
                    if ($(this).attr('id') == 'selectVerifyAccount') {
                        if ($(this).attr('selectedIndex') == 0) {
                            $('div.verify-title:eq(' + ($('div.verify-title').length - 1) + ')').addClass('field-level-error')
                        } else {
                            $('div.verify-title:eq(' + ($('div.verify-title').length - 1) + ')').removeClass('field-level-error')
                        }
                    } else {
                        if ($(this).attr('selectedIndex') == 0) {
                            $('label[for=\'' + $(this).attr('id') + '-cs\']').addClass('field-level-error')
                        } else {
                            $('label[for=\'' + $(this).attr('id') + '-cs\']').removeClass('field-level-error')
                        }
                    }
                })
            }
            if ($('label[for=\'tlpvt-atm-pin\']').hasClass('field-level-error')) {
                $('#tlpvt-atm-pin').val('')
            }
            var count = 0
            $('.messaging-module#clientSideErrors').each(function () {
                count++
                if (count >= 2) {
                    $(this).remove()
                }
            })
        })
        $('#selectVerifyAccount').change()
        $('input[name=\'ssnTinIndicator\']:checked').click()
    }
})

function processCoremetrics(trimmedValue) {
    var cmFailure = $('body').find('.error-skin').length
    var cm = {}
    var errorMessage
    if (typeof initCoremetricsVars === 'function') {
        cm = new initCoremetricsVars()
    }
    if (typeof cm.pageCategoryID != 'undefined' && typeof cm.pageID != 'undefined' && typeof cm.appName != 'undefined') {
        cm.CMConversionEvent = ''
        if (trimmedValue == 'Personal Credit card') {
            if (cmFailure > 1) {
                cm.appStepName = 'Your_Info_PersonalCC_Error'
            } else {
                cm.appStepName = 'Your_Info_PersonalCC'
            }
        }
        if (trimmedValue == 'ATM or debit card') {
            if (cmFailure > 1) {
                cm.appStepName = 'Your_Info_Dep_Error'
            } else {
                cm.appStepName = 'Your_Info_Dep'
            }
        }
        if (trimmedValue == 'Small Business Credit card') {
            if (cmFailure > 1) {
                cm.appStepName = 'Your_Info_SMBCC_Error'
            } else {
                cm.appStepName = 'Your_Info_SMBCC'
            }
        }
        if (trimmedValue == 'Mortgage' || trimmedValue == 'Auto Loan') {
            if (cmFailure > 1) {
                cm.appStepName = 'Your_Info_Loan_Error'
            } else {
                cm.appStepName = 'Your_Info_Loan'
            }
        }
        cm.pageID = cm.pageCategoryID + ';' + cm.appName + ':' + cm.appStepNumber + ':' + cm.appStepName
        bofaCM(cm.pageCategoryID, cm.pageID, cm.appName, null, cm.CMConversionEvent, null, null, null, null, cm.appID)
        if (cmFailure > 1) {
            $('.error-skin ul li').each(function (count) {
                errorMessage = $(this).text()
                cmCreateCustomError(cm.pageID, cm.appName, cm.appStepNumber, cm.appStepName, cm.errorCodes, cm.pageCategoryID, errorMessage)
            })
        }
    }
}

$(document).ready(function () {
    if ($('.passcode-module .verify-rp-skin').length > 0 || $('.sbcc-override .passcode-module .verify-rp-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        $('#atmDebit a.show-sitekey-cancel-modal').attr('name', 'no-atm-debit-card')
        $('#credit a.show-sitekey-cancel-modal').attr('name', 'no-credit-card')
        $('#ssnTin a.show-sitekey-cancel-modal').attr('name', 'no-ssn-tin')
        if ($('.sbcc-override .passcode-module .verify-rp-skin').length > 0) {
            $('#selectVerifyAccount').hide()
            $('#credit').show()
            $('.verify-title, p.mbtm-15').hide()
            $('#VerifyAccountForm').validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-ccExpMonth': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-SSN-hidden': {
                        required: 'Please enter the last 4 digits of your SSN or TIN.',
                        minlength: 'Please enter the last 4 digits of your SSN or TIN.'
                    },
                    'tlpvt-CC': {
                        required: 'Please enter your 15- to 16-digit credit card number.',
                        integer: 'Please enter your 15- to 16-digit credit card number.',
                        minlength: 'Please enter your 15- to 16-digit credit card number.'
                    },
                    'tlpvt-CVV': {
                        required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        minlength: 'Please enter your 3- or 4- digit security code shown on your credit card.'
                    }
                },
                rules: {
                    'tlpvt-ccExpMonth': {
                        required: true
                    },
                    'tlpvt-ccExpYear': {
                        required: true
                    },
                    'tlpvt-SSN-hidden': {
                        required: true,
                        minlength: function () {
                            if ($('#tlpvt-SSN').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-CC': {
                        required: true,
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CC').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CC').is(':visible')) {
                                return 15
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-CVV': {
                        required: true,
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CVV').is(':visible')) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    }
                }
            })
            $('#passcode-verify-submit').click(function (e) {
                boaTLAddEvent(e)
                if ($('#tlpvt-ccExpMonth').attr('selectedIndex') == 0 || $('#tlpvt-ccExpYear').attr('selectedIndex') == 0) {
                    $('label[for=\'tlpvt-ccExpMonth-cs\']').addClass('field-level-error')
                } else {
                    $('label[for=\'tlpvt-ccExpMonth-cs\']').removeClass('field-level-error')
                }
            })
            $('#tlpvt-SSN', '.passcode-module .verify-rp-skin').blur(function () {
                passcodeVerify.maskSSNChar($(this))
            }).focus(function () {
                passcodeVerify.unMaskSSNChar($(this))
            })
        } else {
            if ($('.passcode-module .verify-rp-skin').length > 0) {
                $('#selectVerifyAccount').change(function () {
                    $('.messaging-module#clientSideErrors').css('display', 'none')
                    $('div,label').removeClass('field-level-error')
                    var $skVerifyDiv = this.value == '' ? 'default' : this.value
                    if ($skVerifyDiv == 'ssnTin' && $('#return-collision-hp').length > 0) {
                        $('a.button-blue, a.button-gray').addClass('hide')
                        $('#return-collision-hp').removeClass('hide')
                    } else {
                        if ($('#return-collision-hp').length > 0) {
                            $('a.button-blue, a.button-gray').removeClass('hide')
                            $('#return-collision-hp').addClass('hide')
                        }
                    }
                    var lpFuncExists = $.isFunction(window.lpAddVars)
                    $('#' + $skVerifyDiv).removeClass('hide').siblings().addClass('hide')
                    $('#VerifyAccountForm').attr('action', $('input[name=' + $skVerifyDiv + 'Action]:hidden').val())
                    if (lpFuncExists) {
                        var conversionActionVal = ''
                        if ($('#selectVerifyAccount').attr('selectedIndex') == 1) {
                            conversionActionVal = 'atm'
                        } else {
                            if ($('#selectVerifyAccount').attr('selectedIndex') == 2) {
                                conversionActionVal = 'credit card'
                            } else {
                                conversionActionVal = 'other'
                            }
                        }
                        lpAddVars('page', 'ConversionAction', conversionActionVal)
                    }
                })
                if ($('.passcode-module .verify-rp-skin').length > 0) {
                    $('body').bind('keypress', function (e) {
                        if (e.keyCode == 13 && e.target.id == 'selectVerifyAccount') {
                            $('#selectVerifyAccount').change()
                        } else {
                            if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpMonth') {
                                $('#tlpvt-ccExpMonth').change()
                            } else {
                                if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpYear') {
                                    $('#tlpvt-ccExpYear').change()
                                } else {
                                    if (e.keyCode == 13 && e.target.id == 'state-select') {
                                        $('#state-select').change()
                                    } else {
                                        if (e.keyCode == 13 && e.target.id != 'selectVerifyAccount') {
                                            $('#VerifyAccountForm').attr('action', $('input[name=' + $('#selectVerifyAccount').val() + 'Action]:hidden').val())
                                            $('#VerifyAccountForm').submit()
                                            $('#passcode-verify-submit').click(function (e) {
                                                boaTLAddEvent(e)
                                            })
                                        }
                                    }
                                }
                            }
                        }
                    })
                }
                $('#sitekey-ssn-modal a.sitekey-cancel-modal-leave-button').click(function (e) {
                    boaTLAddEvent(e)
                    $('input[name=modalSelected]:hidden').val('SSN')
                    document.ModalCancelForm.submit()
                })
                $('#sitekey-goldoption-modal a.sitekey-cancel-modal-leave-button').click(function (e) {
                    boaTLAddEvent(e)
                    $('input[name=modalSelected]:hidden').val('Gold')
                    document.ModalCancelForm.submit()
                })
                var $passcodeModuleVerifyIdSkin = $('.passcode-module .verify-rp-skin')
                $('input[name=\'ssnTinIndicator\']').click(function (e) {
                    boaTLAddEvent(e)
                    if ($('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN') {
                        $('.verify-ssn', $passcodeModuleVerifyIdSkin).show()
                        $('.verify-tin', $passcodeModuleVerifyIdSkin).hide()
                        $('#tlpvt-ssn-first3,#tlpvt-ssn-middle2,#tlpvt-ssn-last4').val('').blur()
                    } else {
                        if ($('input[name=\'ssnTinIndicator\']:checked').val() === 'TaxId') {
                            $('.verify-tin', $passcodeModuleVerifyIdSkin).show()
                            $('.verify-ssn', $passcodeModuleVerifyIdSkin).hide()
                            $('#tlpvt-tin-first2,#tlpvt-tin-last7').val('').blur()
                        }
                    }
                    $('label[for=radio-ssn],label[for=radio-tin]').removeClass('field-level-error')
                })
                if ($('html').attr('lang').toLowerCase() == 'es-us') {
                    $('#VerifyAccountForm').validate({
                        includeFieldLabel: false,
                        orphanFieldLabels: {
                            'tlpvt-ssn-first3': 'radio-ssn',
                            'tlpvt-ssn-middle2': 'radio-ssn',
                            'tlpvt-ssn-last4': 'radio-ssn',
                            'tlpvt-tin-first2': 'radio-tin',
                            'tlpvt-tin-last7': 'radio-tin'
                        },
                        messages: {
                            'tlpvt-debit-or-atm': {
                                required: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.',
                                integer: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.',
                                minlength: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.'
                            },
                            'tlpvt-atm-pin': {
                                required: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                                integer: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                                minlength: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.'
                            },
                            'state-select': {
                                required: 'Por favor, d&#237;ganos qu&#233; estado usted abri&#243; su cuenta en.'
                            },
                            selectVerifyAccount: {
                                required: 'Por favor, seleccione una cuenta para verificarla.'
                            },
                            'tlpvt-ccExpMonth': {
                                required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                            },
                            'tlpvt-ccExpYear': {
                                required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                            },
                            'tlpvt-SSN-hidden': {
                                required: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                minlength: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                            },
                            'tlpvt-CC': {
                                required: 'Por favor, introduzca su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito .',
                                integer: 'Por favor, introduzca su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito .',
                                minlength: 'Por favor, introduzca su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito .'
                            },
                            'tlpvt-CVV': {
                                required: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                                integer: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                                minlength: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.'
                            },
                            'tlpvt-ssn-first3': {
                                required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                                minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                            },
                            'tlpvt-ssn-middle2': {
                                required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                                minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                            },
                            'tlpvt-ssn-last4': {
                                required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                                minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                            },
                            'tlpvt-tin-first2': {
                                required: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                integer: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                minlength: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                            },
                            'tlpvt-tin-last7': {
                                required: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                integer: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                minlength: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                            }
                        },
                        rules: {
                            'tlpvt-debit-or-atm': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-debit-or-atm').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-debit-or-atm').is(':visible')) {
                                        return 16
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-atm-pin': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-atm-pin').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-atm-pin').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            selectVerifyAccount: {
                                required: true
                            },
                            'state-select': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                }
                            },
                            'tlpvt-ccExpMonth': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                }
                            },
                            'tlpvt-ccExpYear': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                }
                            },
                            'tlpvt-SSN-hidden': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-SSN').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-CC': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-CC').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-CC').is(':visible')) {
                                        return 15
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-CVV': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-CVV').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-CVV').is(':visible')) {
                                        return 3
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-first3': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible') && passcodeVerify.validateSSN()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-first3').is(':visible')) {
                                        return 3
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-middle2': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible') && passcodeVerify.validateSSN()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-middle2').is(':visible')) {
                                        return 2
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-last4': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible') && passcodeVerify.validateSSN()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-last4').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-tin-first2': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-tin').is(':visible') && passcodeVerify.validateTin()
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return passcodeVerify.validateTin()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-tin-first2').is(':visible')) {
                                        return 2
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-tin-last7': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-tin').is(':visible') && passcodeVerify.validateTin()
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return passcodeVerify.validateTin()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-tin-last7').is(':visible')) {
                                        return 7
                                    } else {
                                        return 0
                                    }
                                }
                            }
                        }
                    })
                } else {
                    $('#VerifyAccountForm').validate({
                        includeFieldLabel: false,
                        orphanFieldLabels: {
                            'tlpvt-ssn-first3': 'radio-ssn',
                            'tlpvt-ssn-middle2': 'radio-ssn',
                            'tlpvt-ssn-last4': 'radio-ssn',
                            'tlpvt-tin-first2': 'radio-tin',
                            'tlpvt-tin-last7': 'radio-tin'
                        },
                        messages: {
                            'tlpvt-debit-or-atm': {
                                required: 'Please enter a valid ATM or debit card number.',
                                integer: 'Please enter a valid ATM or debit card number.',
                                minlength: 'Please enter a valid ATM or debit card number.'
                            },
                            'tlpvt-atm-pin': {
                                required: 'Please enter your 4- to 12-digit PIN.',
                                integer: 'Please enter your 4- to 12-digit PIN.',
                                minlength: 'Please enter your 4- to 12-digit PIN.'
                            },
                            'state-select': {
                                required: 'Please tell us which state you opened your account in.'
                            },
                            selectVerifyAccount: {
                                required: 'Please select one account to verify.'
                            },
                            'tlpvt-ccExpMonth': {
                                required: 'Please enter the valid expiration date on your card.'
                            },
                            'tlpvt-ccExpYear': {
                                required: 'Please enter the valid expiration date on your card.'
                            },
                            'tlpvt-SSN-hidden': {
                                required: 'Please enter the last 4 digits of your SSN or TIN.',
                                minlength: 'Please enter the last 4 digits of your SSN or TIN.'
                            },
                            'tlpvt-CC': {
                                required: 'Please enter your 15- to 16-digit credit card number.',
                                integer: 'Please enter your 15- to 16-digit credit card number.',
                                minlength: 'Please enter your 15- to 16-digit credit card number.'
                            },
                            'tlpvt-CVV': {
                                required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                                integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                                minlength: 'Please enter your 3- or 4- digit security code shown on your credit card.'
                            },
                            'tlpvt-ssn-first3': {
                                required: 'Please enter your valid Social Security number.',
                                minlength: 'Please enter your valid Social Security number.'
                            },
                            'tlpvt-ssn-middle2': {
                                required: 'Please enter your valid Social Security number.',
                                minlength: 'Please enter your valid Social Security number.'
                            },
                            'tlpvt-ssn-last4': {
                                required: 'Please enter your valid Social Security number.',
                                minlength: 'Please enter your valid Social Security number.'
                            },
                            'tlpvt-tin-first2': {
                                required: 'Please enter your valid Tax Identification Number.',
                                minlength: 'Please enter your valid Tax Identification Number.'
                            },
                            'tlpvt-tin-last7': {
                                required: 'Please enter your valid Tax Identification Number.',
                                minlength: 'Please enter your valid Tax Identification Number.'
                            }
                        },
                        rules: {
                            'tlpvt-debit-or-atm': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-debit-or-atm').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-debit-or-atm').is(':visible')) {
                                        return 16
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-atm-pin': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-atm-pin').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-atm-pin').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            selectVerifyAccount: {
                                required: true
                            },
                            'state-select': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                }
                            },
                            'tlpvt-ccExpMonth': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                }
                            },
                            'tlpvt-ccExpYear': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                }
                            },
                            'tlpvt-SSN-hidden': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-SSN').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-CC': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-CC').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-CC').is(':visible')) {
                                        return 15
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-CVV': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-CVV').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-CVV').is(':visible')) {
                                        return 3
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-first3': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-first3').is(':visible')) {
                                        return 3
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-middle2': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-middle2').is(':visible')) {
                                        return 2
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-last4': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-last4').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-tin-first2': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-tin').is(':visible') && passcodeVerify.validateTin()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-tin-first2').is(':visible')) {
                                        return 2
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-tin-last7': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-tin').is(':visible') && passcodeVerify.validateTin()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-tin-last7').is(':visible')) {
                                        return 7
                                    } else {
                                        return 0
                                    }
                                }
                            }
                        }
                    })
                }
                $('#passcode-verify-submit').click(function (e) {
                    boaTLAddEvent(e)
                    if ($('#selectVerifyAccount').val() == 'credit') {
                        if ($('#tlpvt-ccExpMonth').attr('selectedIndex') == 0 || $('#tlpvt-ccExpYear').attr('selectedIndex') == 0) {
                            $('label[for=\'tlpvt-ccExpMonth-cs\']').addClass('field-level-error')
                        } else {
                            $('label[for=\'tlpvt-ccExpMonth-cs\']').removeClass('field-level-error')
                        }
                    } else {
                        $('select').each(function (e) {
                            boaTLAddEvent(e)
                            if ($(this).attr('id') == 'selectVerifyAccount') {
                                if ($(this).attr('selectedIndex') == 0) {
                                    $('div.verify-title:eq(' + ($('div.verify-title').length - 1) + ')').addClass('field-level-error')
                                } else {
                                    $('div.verify-title:eq(' + ($('div.verify-title').length - 1) + ')').removeClass('field-level-error')
                                }
                            } else {
                                if ($(this).attr('selectedIndex') == 0) {
                                    $('label[for=\'' + $(this).attr('id') + '-cs\']').addClass('field-level-error')
                                } else {
                                    $('label[for=\'' + $(this).attr('id') + '-cs\']').removeClass('field-level-error')
                                }
                            }
                        })
                    }
                    if ($('label[for=\'tlpvt-atm-pin\']').hasClass('field-level-error')) {
                        $('#tlpvt-atm-pin').val('')
                    }
                })
                $('#selectVerifyAccount').change()
                $('input[name=\'ssnTinIndicator\']:checked').click(function (e) {
                    boaTLAddEvent(e)
                })
                passcodeVerify.autotab('tlpvt-ssn-first3', 3, 'tlpvt-ssn-middle2')
                passcodeVerify.autotab('tlpvt-ssn-middle2', 2, 'tlpvt-ssn-last4')
                passcodeVerify.autotab('tlpvt-tin-first2', 2, 'tlpvt-tin-last7')
                $('#tlpvt-SSN', '.passcode-module .verify-rp-skin').keyup(function (e) {
                    var $currTxtVal = $('#tlpvt-SSN').val()
                    if (isNaN($currTxtVal)) {
                        var pattern = new RegExp('[^0-9]+', 'g')
                        $currTxtVal = $currTxtVal.replace(pattern, '')
                        $('#tlpvt-SSN').val($currTxtVal)
                    }
                })
                $('#tlpvt-ssn-first3,#tlpvt-ssn-middle2,#tlpvt-ssn-last4,#tlpvt-SSN,#tlpvt-tin-first2,#tlpvt-tin-last7').blur(function (e) {
                    boaTLAddEvent(e)
                    passcodeVerify.maskSSNChar($(this))
                }).focus(function () {
                    passcodeVerify.unMaskSSNChar($(this))
                })
            }
        }
        $('#VerifyAccountForm').submit(function () {
            if ($('label[for="tlpvt-SSN-hidden"]').hasClass('field-level-error')) {
                $('label[for="tlpvt-SSN"]').addClass('field-level-error')
            } else {
                $('label[for="tlpvt-SSN"]').removeClass('field-level-error')
            }
        })
    }
})
var passcodeVerify = {
    validateTin: function (e) {
        boaTLAddEvent(e)
        var $tinVal = $('#tinLast4').val(),
            $tinSPart = $('#tlpvt-tin-last7').val(),
            $tinFPart = $('#tlpvt-tin-first2').val()
        if ($tinVal != '' && $tinFPart == '**' && $tinSPart.substring(0, 3) == '***' && $tinSPart.substring(3, 7) == $tinVal) {
            return false
        } else {
            if ($tinVal != '' && ($tinFPart.indexOf('*') != -1 || $tinSPart.indexOf('*') != -1)) {
                $('#tlpvt-tin-last7').val('')
                $('#tlpvt-tin-first2').val('')
                return true
            } else {
                return true
            }
        }
    },
    validateSSN: function (e) {
        boaTLAddEvent(e)
        var $ssnVal = $('#ssnLast4').val(),
            $ssnFPart = $('#tlpvt-ssn-first3').val(),
            $ssnSPart = $('#tlpvt-ssn-middle2').val(),
            $ssnTPart = $('#tlpvt-ssn-last4').val()
        if ($ssnVal != '' && $ssnFPart == '***' && $ssnSPart == '**' && $ssnTPart == $ssnVal) {
            return false
        } else {
            if ($ssnVal != '' && ($ssnFPart.indexOf('*') != -1 || $ssnSPart.indexOf('*') != -1)) {
                $('#tlpvt-ssn-first3').val('')
                $('#tlpvt-ssn-middle2').val('')
                $('#tlpvt-ssn-last4').val('')
                return true
            } else {
                return true
            }
        }
    },
    autotab: function (currentEle, size, nextElem) {
        var $currentElement = $('#' + currentEle)
        $currentElement.keyup(function (e) {
            var $keyID = (window.event) ? event.keyCode : e.keyCode
            var $nextElement = $('#' + nextElem)
            var $currTxtVal = $currentElement.val()
            if (isNaN($currTxtVal)) {
                var pattern = new RegExp('[^0-9]+', 'g')
                $currTxtVal = $currTxtVal.replace(pattern, '')
                $currentElement.val($currTxtVal)
            }
            if ($currentElement.val().length >= size && (($keyID >= 48 && $keyID <= 90) || ($keyID >= 96 && $keyID <= 105))) {
                $currentElement.blur()
                $nextElement.focus()
            }
        })
    },
    maskSSNChar: function ($this) {
        var attrVal = $this.val()
        var attrId = $this.attr('id')
        var maskVal = ''
        if (attrVal.indexOf('*') == -1) {
            $('#' + attrId + '-hidden').val(attrVal)
        }
        for (var i = 0; i < attrVal.length; i++) {
            maskVal += '*'
        }
        $this.val(maskVal)
    },
    unMaskSSNChar: function ($this) {
        var attrId = $this.attr('id')
        var unmaskVal = $('#' + attrId + '-hidden').val()
        $this.val(unmaskVal)
    }
}
$(document).ready(function () {
    if ($('.passcode-module .verify-skin').length > 0 || $('.sbcc-override .passcode-module .verify-skin').length > 0) {
        if ($.browser.msie && parseInt($.browser.version, 10) === 7) {
            $.each($('.sbcc-override .legacy-layout .two-columns div'), function () {
                if ($(this).text() != '') {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
                    return false
                } else {
                    $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '0px')
                }
            })
        }
        if ($('.sbcc-override .passcode-module .verify-skin').length > 0) {
            $('#selectVerifyAccount').hide()
            $('#credit').show()
            $('.verify-title, p.mbtm-15').hide()
            $('#VerifyAccountForm').validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-ccExpMonth': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-SSN': {
                        required: 'Please enter the last 4 digits of your SSN or TIN.',
                        minlength: 'Please enter the last 4 digits of your SSN or TIN.'
                    },
                    'tlpvt-CC': {
                        required: 'Please enter your 15- to 16-digit credit card number.',
                        integer: 'Please enter your 15- to 16-digit credit card number.',
                        minlength: 'Please enter your 15- to 16-digit credit card number.'
                    },
                    'tlpvt-CVV': {
                        required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        minlength: 'Please enter your 3- or 4- digit security code shown on your credit card.'
                    }
                },
                rules: {
                    'tlpvt-ccExpMonth': {
                        required: true
                    },
                    'tlpvt-ccExpYear': {
                        required: true
                    },
                    'tlpvt-SSN': {
                        required: true,
                        minlength: function () {
                            if ($('#tlpvt-SSN').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-CC': {
                        required: true,
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CC').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CC').is(':visible')) {
                                return 15
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-CVV': {
                        required: true,
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').is(':visible')
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CVV').is(':visible')) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    }
                }
            })
            $('#passcode-verify-submit').click(function () {
                if ($('#tlpvt-ccExpMonth').attr('selectedIndex') == 0 || $('#tlpvt-ccExpYear').attr('selectedIndex') == 0) {
                    $('label[for=\'tlpvt-ccExpMonth-cs\']').addClass('field-level-error')
                } else {
                    $('label[for=\'tlpvt-ccExpMonth-cs\']').removeClass('field-level-error')
                }
            })
            $('#tlpvt-SSN', '.passcode-module .verify-skin').blur(function () {
                passcodeVerify.maskSSNChar($(this))
            }).focus(function () {
                passcodeVerify.unMaskSSNChar($(this))
            })
        } else {
            if ($('.passcode-module .verify-skin').length > 0) {
                $('#selectVerifyAccount').change(function () {
                    $('.messaging-module#clientSideErrors').css('display', 'none')
                    $('div,label').removeClass('field-level-error')
                    var $skVerifyDiv = this.value == '' ? 'default' : this.value
                    if ($skVerifyDiv == 'ssnTin' && $('#return-collision-hp').length > 0) {
                        $('a.button-blue, a.button-gray').addClass('hide')
                        $('#return-collision-hp').removeClass('hide')
                    } else {
                        if ($('#return-collision-hp').length > 0) {
                            $('a.button-blue, a.button-gray').removeClass('hide')
                            $('#return-collision-hp').addClass('hide')
                        }
                    }
                    var lpFuncExists = $.isFunction(window.lpAddVars)
                    $('#' + $skVerifyDiv).removeClass('hide').siblings().addClass('hide')
                    $('#VerifyAccountForm').attr('action', $('input[name=' + $skVerifyDiv + 'Action]:hidden').val())
                    if (lpFuncExists) {
                        var conversionActionVal = ''
                        if ($('#selectVerifyAccount').attr('selectedIndex') == 1) {
                            conversionActionVal = 'atm'
                        } else {
                            if ($('#selectVerifyAccount').attr('selectedIndex') == 2) {
                                conversionActionVal = 'credit card'
                            } else {
                                conversionActionVal = 'other'
                            }
                        }
                        lpAddVars('page', 'ConversionAction', conversionActionVal)
                    }
                })
                $('#sitekey-ssn-modal a.sitekey-cancel-modal-leave-button').click(function () {
                    $('input[name=modalSelected]:hidden').val('SSN')
                    document.ModalCancelForm.submit()
                })
                $('#sitekey-goldoption-modal a.sitekey-cancel-modal-leave-button').click(function () {
                    $('input[name=modalSelected]:hidden').val('Gold')
                    document.ModalCancelForm.submit()
                })
                var $passcodeModuleVerifyIdSkin = $('.passcode-module .verify-skin')
                $('input[name=\'ssnTinIndicator\']').click(function () {
                    if ($('input[name=\'ssnTinIndicator\']:checked').val() === 'SSN') {
                        $('.verify-ssn', $passcodeModuleVerifyIdSkin).show()
                        $('.verify-tin', $passcodeModuleVerifyIdSkin).hide()
                        $('#tlpvt-ssn-first3,#tlpvt-ssn-middle2,#tlpvt-ssn-last4').val('').blur()
                    } else {
                        if ($('input[name=\'ssnTinIndicator\']:checked').val() === 'TaxId') {
                            $('.verify-tin', $passcodeModuleVerifyIdSkin).show()
                            $('.verify-ssn', $passcodeModuleVerifyIdSkin).hide()
                            $('#tlpvt-tin-first2,#tlpvt-tin-last7').val('').blur()
                        }
                    }
                    $('label[for=radio-ssn],label[for=radio-tin]').removeClass('field-level-error')
                })
                if ($('html').attr('lang').toLowerCase() == 'es-us') {
                    $('#VerifyAccountForm').validate({
                        includeFieldLabel: false,
                        orphanFieldLabels: {
                            'tlpvt-ssn-first3': 'radio-ssn',
                            'tlpvt-ssn-middle2': 'radio-ssn',
                            'tlpvt-ssn-last4': 'radio-ssn',
                            'tlpvt-tin-first2': 'radio-tin',
                            'tlpvt-tin-last7': 'radio-tin'
                        },
                        messages: {
                            'tlpvt-debit-or-atm': {
                                required: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.',
                                integer: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.',
                                minlength: 'Por favor, indique un n&#250;mero de tarjeta de d&#233;bito o cajero autom&#225;tico (ATM) v&#225;lido.'
                            },
                            'tlpvt-atm-pin': {
                                required: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                                integer: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                                minlength: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.'
                            },
                            'state-select': {
                                required: 'Por favor, d&#237;ganos qu&#233; estado usted abri&#243; su cuenta en.'
                            },
                            selectVerifyAccount: {
                                required: 'Por favor, seleccione una cuenta para verificarla.'
                            },
                            'tlpvt-ccExpMonth': {
                                required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                            },
                            'tlpvt-ccExpYear': {
                                required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                            },
                            'tlpvt-SSN': {
                                required: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                minlength: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                            },
                            'tlpvt-CC': {
                                required: 'Por favor, introduzca su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito .',
                                integer: 'Por favor, introduzca su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito .',
                                minlength: 'Por favor, introduzca su 15 - a 16 d&#237;gitos del n&#250;mero de tarjeta de cr&#233;dito .'
                            },
                            'tlpvt-CVV': {
                                required: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                                integer: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                                minlength: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.'
                            },
                            'tlpvt-ssn-first3': {
                                required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                                minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                            },
                            'tlpvt-ssn-middle2': {
                                required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                                minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                            },
                            'tlpvt-ssn-last4': {
                                required: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.',
                                minlength: 'Por favor, indique un n&#250;mero de Seguro Social v&#225;lido.'
                            },
                            'tlpvt-tin-first2': {
                                required: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                integer: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                minlength: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                            },
                            'tlpvt-tin-last7': {
                                required: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                integer: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                                minlength: 'Por favor, indique un n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                            }
                        },
                        rules: {
                            'tlpvt-debit-or-atm': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-debit-or-atm').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-debit-or-atm').is(':visible')) {
                                        return 16
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-atm-pin': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-atm-pin').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-atm-pin').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            selectVerifyAccount: {
                                required: true
                            },
                            'state-select': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                }
                            },
                            'tlpvt-ccExpMonth': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                }
                            },
                            'tlpvt-ccExpYear': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                }
                            },
                            'tlpvt-SSN': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-SSN').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-CC': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-CC').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-CC').is(':visible')) {
                                        return 15
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-CVV': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-CVV').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-CVV').is(':visible')) {
                                        return 3
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-first3': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible') && passcodeVerify.validateSSN()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-first3').is(':visible')) {
                                        return 3
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-middle2': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible') && passcodeVerify.validateSSN()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-middle2').is(':visible')) {
                                        return 2
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-last4': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible') && passcodeVerify.validateSSN()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-last4').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-tin-first2': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-tin').is(':visible') && passcodeVerify.validateTin()
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return passcodeVerify.validateTin()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-tin-first2').is(':visible')) {
                                        return 2
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-tin-last7': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-tin').is(':visible') && passcodeVerify.validateTin()
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return passcodeVerify.validateTin()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-tin-last7').is(':visible')) {
                                        return 7
                                    } else {
                                        return 0
                                    }
                                }
                            }
                        }
                    })
                } else {
                    $('#VerifyAccountForm').validate({
                        includeFieldLabel: false,
                        orphanFieldLabels: {
                            'tlpvt-ssn-first3': 'radio-ssn',
                            'tlpvt-ssn-middle2': 'radio-ssn',
                            'tlpvt-ssn-last4': 'radio-ssn',
                            'tlpvt-tin-first2': 'radio-tin',
                            'tlpvt-tin-last7': 'radio-tin'
                        },
                        messages: {
                            'tlpvt-debit-or-atm': {
                                required: 'Please enter a valid ATM or debit card number.',
                                integer: 'Please enter a valid ATM or debit card number.',
                                minlength: 'Please enter a valid ATM or debit card number.'
                            },
                            'tlpvt-atm-pin': {
                                required: 'Please enter your 4- to 12-digit PIN.',
                                integer: 'Please enter your 4- to 12-digit PIN.',
                                minlength: 'Please enter your 4- to 12-digit PIN.'
                            },
                            'state-select': {
                                required: 'Please tell us which state you opened your account in.'
                            },
                            selectVerifyAccount: {
                                required: 'Please select one account to verify.'
                            },
                            'tlpvt-ccExpMonth': {
                                required: 'Please enter the valid expiration date on your card.'
                            },
                            'tlpvt-ccExpYear': {
                                required: 'Please enter the valid expiration date on your card.'
                            },
                            'tlpvt-SSN': {
                                required: 'Please enter the last 4 digits of your SSN or TIN.',
                                minlength: 'Please enter the last 4 digits of your SSN or TIN.'
                            },
                            'tlpvt-CC': {
                                required: 'Please enter your 15- to 16-digit credit card number.',
                                integer: 'Please enter your 15- to 16-digit credit card number.',
                                minlength: 'Please enter your 15- to 16-digit credit card number.'
                            },
                            'tlpvt-CVV': {
                                required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                                integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                                minlength: 'Please enter your 3- or 4- digit security code shown on your credit card.'
                            },
                            'tlpvt-ssn-first3': {
                                required: 'Please enter your valid Social Security number.',
                                minlength: 'Please enter your valid Social Security number.'
                            },
                            'tlpvt-ssn-middle2': {
                                required: 'Please enter your valid Social Security number.',
                                minlength: 'Please enter your valid Social Security number.'
                            },
                            'tlpvt-ssn-last4': {
                                required: 'Please enter your valid Social Security number.',
                                minlength: 'Please enter your valid Social Security number.'
                            },
                            'tlpvt-tin-first2': {
                                required: 'Please enter your valid Tax Identification Number.',
                                minlength: 'Please enter your valid Tax Identification Number.'
                            },
                            'tlpvt-tin-last7': {
                                required: 'Please enter your valid Tax Identification Number.',
                                minlength: 'Please enter your valid Tax Identification Number.'
                            }
                        },
                        rules: {
                            'tlpvt-debit-or-atm': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-debit-or-atm').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-debit-or-atm').is(':visible')) {
                                        return 16
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-atm-pin': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-atm-pin').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-atm-pin').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            selectVerifyAccount: {
                                required: true
                            },
                            'state-select': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'atmDebit'
                                    }
                                }
                            },
                            'tlpvt-ccExpMonth': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                }
                            },
                            'tlpvt-ccExpYear': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                }
                            },
                            'tlpvt-SSN': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-SSN').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-CC': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-CC').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-CC').is(':visible')) {
                                        return 15
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-CVV': {
                                required: {
                                    depends: function (element) {
                                        return $('#selectVerifyAccount').val() == 'credit'
                                    }
                                },
                                integer: {
                                    depends: function (element) {
                                        return $('#tlpvt-CVV').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-CVV').is(':visible')) {
                                        return 3
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-first3': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-first3').is(':visible')) {
                                        return 3
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-middle2': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-middle2').is(':visible')) {
                                        return 2
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-ssn-last4': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-ssn').is(':visible')
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-ssn-last4').is(':visible')) {
                                        return 4
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-tin-first2': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-tin').is(':visible') && passcodeVerify.validateTin()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-tin-first2').is(':visible')) {
                                        return 2
                                    } else {
                                        return 0
                                    }
                                }
                            },
                            'tlpvt-tin-last7': {
                                required: {
                                    depends: function (element) {
                                        return $('.verify-tin').is(':visible') && passcodeVerify.validateTin()
                                    }
                                },
                                minlength: function () {
                                    if ($('#tlpvt-tin-last7').is(':visible')) {
                                        return 7
                                    } else {
                                        return 0
                                    }
                                }
                            }
                        }
                    })
                }
                $('#passcode-verify-submit').click(function () {
                    if ($('#selectVerifyAccount').val() == 'credit') {
                        if ($('#tlpvt-ccExpMonth').attr('selectedIndex') == 0 || $('#tlpvt-ccExpYear').attr('selectedIndex') == 0) {
                            $('label[for=\'tlpvt-ccExpMonth\']').addClass('field-level-error')
                        } else {
                            $('label[for=\'tlpvt-ccExpMonth\']').removeClass('field-level-error')
                        }
                    } else {
                        $('select').each(function () {
                            if ($(this).attr('id') == 'selectVerifyAccount') {
                                if ($(this).attr('selectedIndex') == 0) {
                                    $('div.verify-title:eq(' + ($('div.verify-title').length - 1) + ')').addClass('field-level-error')
                                } else {
                                    $('div.verify-title:eq(' + ($('div.verify-title').length - 1) + ')').removeClass('field-level-error')
                                }
                            } else {
                                if ($(this).attr('selectedIndex') == 0) {
                                    $('label[for=\'' + $(this).attr('id') + '-cs\']').addClass('field-level-error')
                                } else {
                                    $('label[for=\'' + $(this).attr('id') + '-cs\']').removeClass('field-level-error')
                                }
                            }
                        })
                    }
                    if ($('label[for=\'tlpvt-atm-pin\']').hasClass('field-level-error')) {
                        $('#tlpvt-atm-pin').val('')
                    }
                })
                $('#selectVerifyAccount').change()
                $('input[name=\'ssnTinIndicator\']:checked').click()
                passcodeVerify.autotab('tlpvt-ssn-first3', 3, 'tlpvt-ssn-middle2')
                passcodeVerify.autotab('tlpvt-ssn-middle2', 2, 'tlpvt-ssn-last4')
                passcodeVerify.autotab('tlpvt-tin-first2', 2, 'tlpvt-tin-last7')
                $('#tlpvt-ssn-first3,#tlpvt-ssn-middle2,#tlpvt-ssn-last4,#tlpvt-SSN,#tlpvt-tin-first2,#tlpvt-tin-last7').blur(function () {
                    passcodeVerify.maskSSNChar($(this))
                }).focus(function () {
                    passcodeVerify.unMaskSSNChar($(this))
                })
            }
        }
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && e.target.id == 'selectVerifyAccount') {
                $('#selectVerifyAccount').change()
            } else {
                if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpMonth') {
                    $('#tlpvt-ccExpMonth').change()
                } else {
                    if (e.keyCode == 13 && e.target.id == 'tlpvt-ccExpYear') {
                        $('#tlpvt-ccExpYear').change()
                    } else {
                        if (e.keyCode == 13 && e.target.id == 'state-select') {
                            $('#state-select').change()
                        } else {
                            if (e.keyCode == 13 && e.target.id != 'selectVerifyAccount') {
                                $('#VerifyAccountForm').attr('action', $('input[name=' + $('#selectVerifyAccount').val() + 'Action]:hidden').val())
                                $('#VerifyAccountForm').submit()
                                $('#passcode-verify-submit').click()
                            }
                        }
                    }
                }
            }
        })
    }
})
var passcodeVerify = {
    validateTin: function () {
        var $tinVal = $('#tinLast4').val(),
            $tinSPart = $('#tlpvt-tin-last7').val(),
            $tinFPart = $('#tlpvt-tin-first2').val()
        if ($tinVal != '' && $tinFPart == '**' && $tinSPart.substring(0, 3) == '***' && $tinSPart.substring(3, 7) == $tinVal) {
            return false
        } else {
            if ($tinVal != '' && ($tinFPart.indexOf('*') != -1 || $tinSPart.indexOf('*') != -1)) {
                $('#tlpvt-tin-last7').val('')
                $('#tlpvt-tin-first2').val('')
                return true
            } else {
                return true
            }
        }
    },
    validateSSN: function () {
        var $ssnVal = $('#ssnLast4').val(),
            $ssnFPart = $('#tlpvt-ssn-first3').val(),
            $ssnSPart = $('#tlpvt-ssn-middle2').val(),
            $ssnTPart = $('#tlpvt-ssn-last4').val()
        if ($ssnVal != '' && $ssnFPart == '***' && $ssnSPart == '**' && $ssnTPart == $ssnVal) {
            return false
        } else {
            if ($ssnVal != '' && ($ssnFPart.indexOf('*') != -1 || $ssnSPart.indexOf('*') != -1)) {
                $('#tlpvt-ssn-first3').val('')
                $('#tlpvt-ssn-middle2').val('')
                $('#tlpvt-ssn-last4').val('')
                return true
            } else {
                return true
            }
        }
    },
    autotab: function (currentEle, size, nextElem) {
        var $currentElement = $('#' + currentEle)
        $currentElement.keyup(function (e) {
            var $keyID = (window.event) ? event.keyCode : e.keyCode
            var $nextElement = $('#' + nextElem)
            var $currTxtVal = $currentElement.val()
            if (isNaN($currTxtVal)) {
                var pattern = new RegExp('[^0-9]+', 'g')
                $currTxtVal = $currTxtVal.replace(pattern, '')
                $currentElement.val($currTxtVal)
            }
            if ($currentElement.val().length >= size && (($keyID >= 48 && $keyID <= 90) || ($keyID >= 96 && $keyID <= 105))) {
                $currentElement.blur()
                $nextElement.focus()
            }
        })
    },
    maskSSNChar: function ($this) {
        var attrVal = $this.val()
        var attrId = $this.attr('id')
        var maskVal = ''
        if (attrVal.indexOf('*') == -1) {
            $('#' + attrId + '-hidden').val(attrVal)
        }
        for (var i = 0; i < attrVal.length; i++) {
            maskVal += '*'
        }
        $this.val(maskVal)
    },
    unMaskSSNChar: function ($this) {
        var attrId = $this.attr('id')
        var unmaskVal = $('#' + attrId + '-hidden').val()
        $this.val(unmaskVal)
    }
}
$(document).ready(function () {
    if ($('.passcode-safepass-module .enter-skin').length > 0) {
        $('#tlpvt-passcode-input').bind('keypress', function (e) {
            if (e.keyCode == 13) {
                return false
            }
        })
    }
})
$(document).ready(function () {
    var $serviceAgreementModulePopupSkin = $('.popup-content-module .standard-print-skin')
    if ($serviceAgreementModulePopupSkin.length > 0) {
        var $tocDotIndex = 0
        var $tocListItem = ''
        $('.popup-content-module .standard-print-skin ol.cat-list li > a').each(function () {
            if ($(this).html().indexOf('. ') != -1) {
                if ($(this).children('span.ada-hidden').length > 0) {
                    $tocListItem = $(this).clone().children(':first').remove().end().text()
                    $tocDotIndex = ($tocListItem.indexOf('. ') - 2)
                    $tocListItem = $tocListItem.replace($tocListItem.substring($tocDotIndex, ($tocDotIndex + 4)), '')
                    $tocListItem = $tocListItem.replace('TM', '<sup>TM</sup>')
                    $(this).html('<span class="ada-hidden">' + $(this).children(':first').text() + '</span>' + $.trim($tocListItem))
                    if ($(this).siblings('.section-intro').length > 0) {
                        $(this).siblings('.section-intro').children(':first').prepend('<span class="ada-hidden">' + $.trim($tocListItem) + ' </span>')
                    }
                } else {
                    $tocListItem = $(this).text()
                    $tocDotIndex = ($(this).text().indexOf('. ') - 2)
                    $(this).text($.trim($(this).text().replace($(this).text().substring($tocDotIndex, ($tocDotIndex + 3)), '')))
                    $(this).text($(this).text().replace('TM', '<sup>TM</sup>'))
                    if ($(this).siblings('.section-intro').length > 0) {
                        $(this).siblings('.section-intro').children(':first').prepend('<span class="ada-hidden">' + $(this).text() + ' </span>')
                    }
                }
            }
        })
        var $serviceAgreementTopicToggle = $('.popup-content-module .standard-print-skin .topic-toggle')
        var $serviceAgreementCategoryLink = $('.popup-content-module .standard-print-skin .category-link')
        var $serviceAgreementCategoryLinkADAText = $('.popup-content-module .standard-print-skin .category-link .ada-hidden')
        var $serviceAgreementTopicList = $('.popup-content-module .standard-print-skin .cat-list ol')
        var $serviceAgreementSectionIntro = $('.popup-content-module .standard-print-skin .cat-list .section-intro')
        $serviceAgreementCategoryLinkADAText.text(ADAShowTopicsText)
        $serviceAgreementTopicToggle.click(function () {
            $serviceAgreementTopicToggle.toggleClass('hide')
            if ($('#show-topics').hasClass('hide')) {
                $serviceAgreementTopicList.show()
                $serviceAgreementSectionIntro.show()
                $serviceAgreementCategoryLinkADAText.text(ADAHideTopicsText)
            } else {
                $serviceAgreementTopicList.hide()
                $serviceAgreementSectionIntro.hide()
                $serviceAgreementCategoryLinkADAText.text(ADAShowTopicsText)
            }
        })
        $serviceAgreementCategoryLink.click(function () {
            if ($(this).children('.ada-hidden').text() == ADAShowTopicsText) {
                $(this).children('.ada-hidden').text(ADAHideTopicsText)
            } else {
                $(this).children('.ada-hidden').text(ADAShowTopicsText)
            }
            $(this).siblings().toggle()
        })
    }
})
var $quickHelpBoaLangObj = {}
$quickHelpBoaLangObj.show = 'Activate to expand. '
$quickHelpBoaLangObj.hide = 'Activate to collapse. '
$(document).ready(function () {
    if ($('.quick-help-module .fsd-liveperson-rp-skin').length > 0) {
        $quickHelp = $('.quick-help-module .fsd-liveperson-rp-skin .help-link .heading')
        $('.quick-help-module .fsd-liveperson-rp-skin .help-link').addClass('collapsed')
        $('.quick-help-module .fsd-liveperson-rp-skin .help-link .ada-hidden').text($quickHelpBoaLangObj.show + ' ')
        $('.quick-help-module .fsd-liveperson-rp-skin .help-link').click(function (event) {
            event.preventDefault()
            var $this = $(this),
                $toggleADA = $this.find('span.ada-hidden')
            var $thisLinkState = $this.hasClass('collapsed') ? 'Collapsed' : 'Expanded'
            $('.quick-help-module .fsd-liveperson-rp-skin .help-link-answer').addClass('hide').removeAttr('aria-live')
            $('.quick-help-module .fsd-liveperson-rp-skin .help-link .ada-hidden').text($quickHelpBoaLangObj.show + ' ')
            $('.quick-help-module .fsd-liveperson-rp-skin .help-link').attr('aria-expanded', false).addClass('collapsed').removeClass('expanded')
            if ($thisLinkState == 'Collapsed') {
                $toggleADA.text($quickHelpBoaLangObj.hide + ' ')
                $this.attr('aria-expanded', true)
                $this.next('.help-link-answer').removeClass('hide').attr('aria-live', 'rude').focus()
                $this.addClass('expanded').removeClass('collapsed')
            } else {
                if ($thisLinkState == 'Expanded') {
                    $toggleADA.text($quickHelpBoaLangObj.show + ' ')
                    $this.attr('aria-expanded', false)
                    $this.next('.help-link-answer').addClass('hide').removeAttr('aria-live')
                    $this.addClass('collapsed').removeClass('expanded')
                }
            }
            if (typeof quickHelpRequestURL != 'undefined' && quickHelpRequestURL !== null && quickHelpRequestURL.length > 0) {
                var name = $.trim($this.text())
                var length = name.length
                var link = name.substr(5, length)
                $.post(quickHelpRequestURL + '&linkName=' + link)
            }
        })
        $(document).on('keyup', '.quick-help-module .fsd-liveperson-rp-skin .help-link .heading', function (event) {
            if (event.keyCode == 13) {
                event.preventDefault()
                $quickHelp.removeAttr('tabindex')
            }
        })
    }
})
$(document).ready(function () {
    if ($('.quick-help-module .fsd-liveperson-skin').length > 0) {
        $quickHelp = $('.quick-help-module .fsd-liveperson-skin .help-link .heading')
        $('.quick-help-module .fsd-liveperson-skin .help-link').addClass('collapsed')
        $('.quick-help-module .fsd-liveperson-skin .help-link .ada-hidden').text(ADA.expand)
        $('.quick-help-module .fsd-liveperson-skin .help-link').click(function (event) {
            event.preventDefault()
            var $this = $(this),
                $toggleADA = $this.find('span.ada-hidden')
            var $thisLinkState = $this.hasClass('collapsed') ? 'Collapsed' : 'Expanded'
            $('.quick-help-module .fsd-liveperson-skin .help-link-answer').addClass('hide').removeAttr('aria-live')
            $('.quick-help-module .fsd-liveperson-skin .help-link .ada-hidden').text(ADA.expand)
            $('.quick-help-module .fsd-liveperson-skin .help-link').attr('aria-expanded', false).addClass('collapsed').removeClass('expanded')
            if ($thisLinkState == 'Collapsed') {
                $toggleADA.text(ADA.collapse)
                $this.attr('aria-expanded', true)
                $this.next('.help-link-answer').removeClass('hide').attr('aria-live', 'rude').focus()
                $this.addClass('expanded').removeClass('collapsed')
            } else {
                if ($thisLinkState == 'Expanded') {
                    $toggleADA.text(ADA.expand)
                    $this.attr('aria-expanded', false)
                    $this.next('.help-link-answer').addClass('hide').removeAttr('aria-live')
                    $this.addClass('collapsed').removeClass('expanded')
                }
            }
            if (typeof quickHelpRequestURL != 'undefined' && quickHelpRequestURL !== null && quickHelpRequestURL.length > 0) {
                var name = $.trim($this.text())
                var length = name.length
                var link = name.substr(5, length)
                $.post(quickHelpRequestURL + '&linkName=' + link)
            }
        })
        $(document).on('keyup', '.quick-help-module .fsd-liveperson-skin .help-link .heading', function (event) {
            if (event.keyCode == 13) {
                event.preventDefault()
                $quickHelp.removeAttr('tabindex')
            }
        })
    }
})
var $quickHelpBoaLangObj = boaLangSetup()
$(document).ready(function () {
    var options = {
            active: false,
            multipleOpen: false,
            alwaysOpen: false,
            collapsible: true
        },
        $quickHelp = $('.quick-help-module .accordion .heading')
    $('.quick-help-module .accordion').accordion(options)
    $('span.ui-icon').remove()
    $('.ui-accordion-content').css('height', 'auto')
    $('.quick-help-module .accordion .ada-hidden').text($quickHelpBoaLangObj.show + ' ')
    $quickHelp.click(function () {
        var $this = $(this),
            $context = $this.closest('.accordion')
        $('li a', $context).each(function () {
            var $this = $(this),
                $toggleADA = $this.find('span.ada-hidden')
            if ($this.hasClass('ui-state-active')) {
                $toggleADA.text($quickHelpBoaLangObj.hide + ' ')
            } else {
                if ($this.hasClass('ui-state-default')) {
                    $toggleADA.text($quickHelpBoaLangObj.show + ' ')
                }
            }
        })
    })
    $quickHelp.removeAttr('role')
})
$(document).ready(function () {
    if ($('.sitekey-enroll-module .confirm-skin').length > 0) {
        $('a.button-blue').bind('click', function (event) {
            if ($(this).hasClass('button-blue')) {
                $(this).removeClass('button-blue').addClass('button-inactive')
                $('#SSKReviewNextAction').val('Continue')
                $(this).blur()
                document.ReviewForm.submit()
            } else {
                event.preventDefault()
                return false
            }
        })
        $('a.button-blue').keypress(function (e) {
            if (e.keyCode == 13) {
                $(this).click()
            }
        })
    }
    if ($('.sitekey-enroll-module .success-skin').length > 0) {
        $('a.button-blue').bind('click', function (event) {
            if ($(this).hasClass('button-blue')) {
                $(this).removeClass('button-blue').addClass('button-inactive')
                document.enrollSuccessForm.submit()
            } else {
                event.preventDefault()
                return false
            }
        })
        $('a.button-blue').keypress(function (e) {
            if (e.keyCode == 13) {
                document.enrollSuccessForm.nextAction.value = 'GoToOnLineBanking'
                document.enrollSuccessForm.submit()
            }
        })
    }
})
$(document).ready(function () {
    $('.sitekey-enroll-module .review-skin .question-section').last().addClass('last-question-section')
    if ($('.sitekey-enroll-module .review-skin').length > 0) {
        $('a.button-blue').bind('click', function (event) {
            if ($(this).hasClass('button-blue')) {
                $('a.button-blue').unbind('click')
                $(this).removeClass('button-blue').addClass('button-inactive')
                $('#SSKReviewNextAction').val('Continue')
                $(this).blur()
                document.ReviewForm.submit()
            } else {
                event.preventDefault()
                return false
            }
        })
        $('a.button-blue').keypress(function (e) {
            if (e.keyCode == 13) {
                $(this).click()
            }
        })
        $('a.edit-sk-image').bind('click', function (event) {
            document.ReviewForm.nextAction.value = 'EditSKImage'
            document.ReviewForm.submit()
        })
        $('a.edit-sk-ques').bind('click', function (event) {
            document.ReviewForm.nextAction.value = 'EditSKQues'
            document.ReviewForm.submit()
        })
        $('a.enroll-review-submit').bind('click', function (event) {
            document.ReviewForm.nextAction.value = 'Continue'
        })
    }
})
var questionValue = ''
var duplicateExists = false
var lpfielderror = 0
$(document).ready(function () {
    if ($('.sitekey-questions-module .challenge-qanda-skin, .sitekey-questions-module .legacy-challenge-qanda-skin').length > 0) {
        $('#answer1,#answer2,#answer3').bind('keypress', function (e) {
            if (e.keyCode == 13) {
                $('#challengeSelectForm').submit()
            }
        })
        $('#continue-questions-submit').click(function () {
            if ($('label[for=\'question1\'],label[for=\'question2\'],label[for=\'question3\'],label[for=\'answer1\'],label[for=\'answer2\'],label[for=\'answer3\']').hasClass('field-level-error')) {
                if (typeof lpSendData == 'function') {
                    lpfielderror++
                    lpSendData('page', 'ErrorCounter', lpfielderror)
                    lpSendData('page', 'FieldErrorCounter', lpfielderror)
                }
            }
        })
        $('a.button-blue').bind('click', function (event) {
            if (!$('label[for=\'question1\'],label[for=\'question2\'],label[for=\'question3\'],label[for=\'answer1\'],label[for=\'answer2\'],label[for=\'answer3\']').hasClass('field-level-error')) {
                if ($(this).hasClass('button-blue')) {
                    $(this).removeClass('button-blue').addClass('button-inactive')
                } else {
                    event.preventDefault()
                }
            }
        })
        $('#continue-questions-submit').bind('click', function (event) {
            if ($(this).hasClass('button-blue')) {
                $(this).removeClass('button-blue').addClass('button-inactive')
                $('#challengeSelectForm').submit()
            } else {
                event.preventDefault()
            }
        })
    }
    if ($('html').attr('lang').toLowerCase() == 'en-us') {
        $('#challengeSelectForm').validate({
            includeFieldLabel: false,
            customSelects: false,
            messages: {
                question1: {
                    required: 'Please complete all 3 questions and answers.'
                },
                question2: {
                    required: 'Please complete all 3 questions and answers.'
                },
                question3: {
                    required: 'Please complete all 3 questions and answers.'
                },
                answer1: {
                    required: 'Please complete all of the required field(s).',
                    alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &, &aacute;, &ntilde;).'
                },
                answer2: {
                    required: 'Please complete all of the required field(s).',
                    alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &, &aacute;, &ntilde;).'
                },
                answer3: {
                    required: 'Please complete all of the required field(s).',
                    alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &, &aacute;, &ntilde;).'
                }
            },
            rules: {
                question1: {
                    required: true
                },
                question2: {
                    required: true
                },
                question3: {
                    required: true
                },
                answer1: {
                    required: true,
                    alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                },
                answer2: {
                    required: true,
                    alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                },
                answer3: {
                    required: true,
                    alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                }
            }
        })
    } else {
        $('#challengeSelectForm').validate({
            includeFieldLabel: false,
            customSelects: false,
            messages: {
                question1: {
                    required: 'Por favor, complete todas las preguntas y respuestas.'
                },
                question2: {
                    required: 'Por favor, complete todas las preguntas y respuestas.'
                },
                question3: {
                    required: 'Por favor, complete todas las preguntas y respuestas.'
                },
                answer1: {
                    required: 'Por favor, complete todos los campos obligatorios.',
                    alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &, &aacute;, &ntilde;).'
                },
                answer2: {
                    required: 'Por favor, complete todos los campos obligatorios.',
                    alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &, &aacute;, &ntilde;).'
                },
                answer3: {
                    required: 'Por favor, complete todos los campos obligatorios.',
                    alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &, &aacute;, &ntilde;).'
                }
            },
            rules: {
                question1: {
                    required: true
                },
                question2: {
                    required: true
                },
                question3: {
                    required: true
                },
                answer1: {
                    required: true,
                    alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                },
                answer2: {
                    required: true,
                    alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                },
                answer3: {
                    required: true,
                    alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                }
            }
        })
    }
    $('#answer1,#answer2,#answer3').focus(function () {
        if ($('#continue-questions-submit').hasClass('button-inactive')) {
            $('#continue-questions-submit').removeClass('button-inactive').addClass('button-blue')
        }
    })
    $('select').change(function () {
        questionValue = $('option:selected', this).text()
        duplicateExists = false
        $('select').not('#' + $(this).attr('id')).each(function () {
            if (!$('option:eq(0)', this).attr('selected')) {
                if ($('option:selected', this).text() == questionValue) {
                    if ($(this).hasClass('custom-select')) {
                        $('#' + $(this).attr('id') + '-cs span:eq(0)').html($('#' + $(this).attr('id') + '-cs li:eq(0) div').html())
                        $('#' + $(this).attr('id') + '-cs li:eq(0)').trigger('mouseup')
                        $('label[for=\'' + $(this).attr('id') + '-cs\']').addClass('field-level-error')
                    } else {
                        $('option:eq(0)', this).attr('selected', 'selected')
                        $('label[for=\'' + $(this).attr('id') + '\']').addClass('field-level-error')
                    }
                    duplicateExists = true
                } else {
                    if ($(this).hasClass('custom-select')) {
                        $('label[for=\'' + $(this).attr('id') + '-cs\']').removeClass('field-level-error')
                    } else {
                        $('label[for=\'' + $(this).attr('id') + '\']').removeClass('field-level-error')
                    }
                }
            }
        })
        if (!duplicateExists) {
            if ($(this).hasClass('custom-select')) {
                $('label[for=\'' + $(this).attr('id') + '-cs\']').removeClass('field-level-error')
            } else {
                $('label[for=\'' + $(this).attr('id') + '\']').removeClass('field-level-error')
            }
            $('.messaging-module#clientSideErrors').css('display', 'none')
        } else {
            $('.messaging-module#clientSideErrors').css('display', 'block')
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('.messaging-module#clientSideErrors .error-message ul').empty().append('<li><span style="display: block;">Please select 3 different questions.</span></li>')
            } else {
                $('.messaging-module#clientSideErrors .error-message ul').empty().append('<li><span style="display: block;">Por favor, complete las 3 preguntas y respuestas.</span></li>')
            }
        }
    })
    post_deviceprint()
})
$(document).ready(function () {
    if ($('.sitekey-questions-module .confirm-change-skin').length > 0) {
        $('a.button-blue').bind('click', function (event) {
            if ($(this).hasClass('button-blue')) {
                $(this).removeClass('button-blue').addClass('button-inactive')
                document.confirmChangeForm.nextAction.value = 'Continue'
                document.confirmChangeForm.submit()
            } else {
                event.preventDefault()
                return false
            }
        })
    }
})
$(document).ready(function () {
    if ($('.sitekey-questions-module .verify-comp-skin').length > 0) {
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#VerifyCompForm').validate({
                messages: {
                    'tlpvt-challenge-answer': {
                        required: 'Please provide an answer to your challenge question'
                    }
                },
                rules: {
                    'tlpvt-challenge-answer': {
                        required: true
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#VerifyCompForm').validate({
                messages: {
                    'tlpvt-challenge-answer': {
                        required: 'Por favor, proporcione una respuesta para su pregunta de seguridad'
                    }
                },
                rules: {
                    'tlpvt-challenge-answer': {
                        required: true
                    }
                },
                includeFieldLabel: false
            })
        }
        $('#tlpvt-challenge-answer', '.sitekey-questions-module .verify-comp-skin').focus().keypress(function (e) {
            if (e.keyCode == 13) {
                $('#VerifyCompForm').submit()
            }
        })
        $('#verify-cq-submit').click(function (e) {
            if ($(this).hasClass('btn-bofa-blue')) {
                e.preventDefault()
                $('#VerifyCompForm').submit()
            } else {
                e.stopPropagation()
                return false
            }
        })
    }
})

function printContinue(forward_url) {
    print()
    if ((forward_url) != null) {
        window.location = forward_url
    }
}

function dualActionClick(newWinHref) {
    window.open(newWinHref)
    return true
}

function actionSplashParam(loginURI) {
    var gotoActionset = loginURI.indexOf('oasMandatory')
    var formAction = loginURI.split('?')
    if (gotoActionset != -1) {
        if (document.getElementById('gotoAction') != undefined) {
            document.getElementById('gotoAction').value = 'oasMandatory'
        }
    }
    var postAction = loginURI.split('postAction=')
    if (postAction.length > 0) {
        if (document.getElementById('postAction') != undefined) {
            document.getElementById('postAction').value = postAction[1]
        }
    }
    if (formAction.length > 0) {
        document.getElementById('splashForm').action = formAction[0]
    }
    document.getElementById('splashForm').submit()
}

$(document).ready(function () {
    if ($('.splash-content-with-buttons-module .org-splash-skin').length > 0) {
        $('.splash-content-with-buttons-module .org-splash-skin a.btn-bofa').click(function () {
            if ($(this).attr('rel') !== 'undefined') {
                actionSplashParam($(this).attr('rel'))
            }
        })
    }
})
$(document).ready(function () {
    var $termsconditions = $('.sbcc-taxstatement-tandc-skin')
    $('#cbEDConsent', $termsconditions).on('click', function () {
        var $this = $(this)
        if ($this.attr('checked')) {
            $('#btnEDContinue').removeClass('button-inactive').addClass('button-blue')
        } else {
            $('#btnEDContinue').addClass('button-inactive').removeClass('button-blue')
        }
    })
    $('#btnEDContinue').click(function (e) {
        e.preventDefault()
        var _this = $(this)
        if (!_this.hasClass('button-inactive')) {
            _this.closest('form').attr({
                method: 'post',
                autocomplete: 'off',
                action: _this.attr('rel')
            }).submit()
        }
    })
    $('input,select,a', $termsconditions).on('focus', function () {
        var $this = $(this),
            $fieldTop = $this.offset().top,
            $fieldBottom = $fieldTop + $this.height(),
            $scrollTop = $(window).scrollTop(),
            $docBottom = $scrollTop + $(window).height()
        if ($fieldTop >= $docBottom - 50) {
            var $diffspace = $fieldBottom - $docBottom
            $(window).scrollTop($scrollTop + $diffspace + 150)
        }
    })
})
$(document).ready(function () {
    var $statusBarModuleMultiStepSkin = $('.status-bar-bdf-module .multi-step-skin')
    if ($statusBarModuleMultiStepSkin.length > 0) {
        var sbTotalWidth = $statusBarModuleMultiStepSkin.outerWidth()
        var sbWidthCount = 0
        $('.status-bar-bdf-module .multi-step-skin .sb-step').each(function () {
            var sbStepWidth = $(this).outerWidth()
            sbWidthCount = sbStepWidth + sbWidthCount
        })
    }
})
var requestAuthUrl = ''
if (typeof requestOneUrl !== 'undefined') {
    requestAuthUrl = requestOneUrl
} else {
    requestAuthUrl = '/login/sign-in/displayAuthCodeScreen.go'
}
$(document).ready(function () {
    if ($('.unlock-account-module .auth-num-rp-skin').length > 0) {
        if ($('#txtAuthNum').is(':visible')) {
            $('#txtAuthNum').focus()
        }
        $('#EnterAuthNumberForm').validate({
            rules: {
                txtAuthNum: {
                    required: true
                }
            },
            messages: {
                txtAuthNum: fieldLevelErrors.label_enter_auth_code + ' ' + fieldLevelErrors.label_req_auth_code
            },
            includeFieldLabel: false,
            disableInactiveButtons: true
        })
    }
    $('#EnterAuthNumberForm').submit(function () {
        if ($('#txtAuthNum').is(':visible')) {
            $('#txtAuthNum').focus()
        }
        if ($('.messaging-module').length > 0) {
            $('.messaging-module .error-message ul').css('margin-left', 0)
            $('.messaging-module .error-message ul li').css('list-style', 'none')
        }
    })
})
$(document).ready(function () {
    if ($('.sbcc-override .legacy-layout .unsupported-browser-module').length > 0) {
        var ua = $.browser
        if (ua.mozilla && ua.version.slice(0, 3) <= '2.2') {
            $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
        }
        if (ua.webkit) {
            $('.sbcc-override > div.legacy-layout .two-columns').css('margin-top', '15px')
        }
    }
})
var moduleContext = ''
$(document).ready(function () {
    var moduleContext = $('.vipaa-bump-flow-module .checkbox-skin')
    if ($('.vipaa-bump-flow-module .checkbox-skin').length > 0) {
        var currentLocation = window.location.href
        var $pageURL = ''
        if (currentLocation.indexOf('bankofamerica.com') > 0) {
            $pageURL = 'https://' + location.host
        } else {
            $pageURL = 'https://www.bankofamerica.com'
        }
        $('#continue.btn-bofa.btn-bofa-small.btn-disabled').append('<span class="ada-hidden"> - disabled</span>')
        var targetState = '/login/sign-in/getKey.go'
        $.ajax({
            url: $pageURL + targetState,
            dataType: 'text',
            crossDomain: true,
            cache: false,
            timeout: 180000,
            beforeSend: function () {
            },
            error: function (XMLHTTPRequest, textStatus, errorThrown) {
                ajaxCheckBoxRequestCallBack('TBDID')
            },
            success: function (data) {
                ajaxCheckBoxRequestCallBack(data)
            },
            complete: function (XMLHTTPRequest, textStatus) {
            }
        })
        $('#continue', moduleContext).click(function () {
            if ($('#continue', moduleContext).hasClass('btn-bofa-blue')) {
                var checked = $('.dyna-checkbox input:checked', moduleContext).length
                $('#clientSideErrors').addClass('hide')
                if (checked == 0) {
                    $('#clientSideErrors').toggleClass('hide')
                } else {
                    $('#BumpFlowForm', moduleContext).submit()
                }
            }
        })
    }
})

function ajaxCheckBoxRequestCallBack(data) {
    var element1 = document.createElement('input')
    element1.type = 'checkbox'
    element1.id = $.trim(data)
    element1.name = $.trim(data)
    $('.vipaa-bump-flow-module .checkbox-skin .dyna-checkbox').append(element1)
    var label = document.createElement('label')
    label.htmlFor = $.trim(data)
    if ($('html').attr('lang').toLowerCase() === 'en-us') {
        label.innerHTML = 'For security purposes, please check the box.'
    } else {
        label.innerHTML = 'Por razones de seguridad, por favor, marque la casilla.'
    }
    $('.vipaa-bump-flow-module .checkbox-skin .dyna-checkbox').append(label)
    $('.vipaa-bump-flow-module .checkbox-skin .dyna-checkbox input:checkbox').change(function () {
        if ($(this).is(':checked')) {
            $('#continue', moduleContext).removeClass('btn-disabled').addClass('btn-bofa-blue')
            $('#continue span.ada-hidden', moduleContext).empty()
        } else {
            $('#continue', moduleContext).removeClass('btn-bofa-blue').addClass('btn-disabled')
            $('#continue span.ada-hidden', moduleContext).append(' - disabled')
        }
    })
}

var moduleContext = ''
var speedBumpEnterKey = false
$(document).ready(function () {
    if ($('.vipaa-bump-flow-module .textbox-slow-skin').length > 0) {
        var moduleContext = $('.vipaa-bump-flow-module .textbox-slow-skin')
        var imgUrl = ''
        if ($.trim(imgUrl).length <= 0) {
            imgUrl = $('img#imageText').attr('src')
        }
        $('a.img-refresh', moduleContext).click(function () {
            $('img#imageText').attr('src', imgUrl + '?' + Math.random())
            return false
        })
        $('#captchaKey').focus()
        $('#captchaKey').keyup(function () {
            if ($('#captchaKey').val().length == 0) {
                $('#continue', moduleContext).removeClass('btn-bofa-blue').addClass('btn-disabled')
                $('#continue span.ada-hidden', moduleContext).append(' - disabled')
            } else {
                if (!speedBumpEnterKey) {
                    $('#continue', moduleContext).removeClass('btn-disabled').addClass('btn-bofa-blue')
                    $('#continue span.ada-hidden', moduleContext).empty()
                }
            }
        })
        $('a.audio', moduleContext).bind('click', function () {
            var soundElem,
                bodyElem,
                isHTML5 = true
            var randomNum = Math.random()
            var isSafari = navigator.userAgent.toLowerCase().indexOf('safari') > -1 && navigator.userAgent.toLowerCase().indexOf('chrome') < 0
            try {
                if (typeof document.createElement('audio').play == 'undefined') {
                    isHTML5 = false
                }
            } catch (ex) {
                isHTML5 = false
            }
            bodyElem = document.getElementsByTagName('body') [0]
            if (!bodyElem) {
                bodyElem = document.getElementsByTagName('html') [0]
            }
            soundElem = document.getElementById('jBeep')
            if (soundElem) {
                bodyElem.removeChild(soundElem)
            }
            if (isSafari) {
                var soundElem
                if ($('#jBeep').length > 0) {
                    $('#jBeep').remove()
                }
                soundElem = document.createElement('object')
                soundElem.setAttribute('type', 'audio/wav')
                soundElem.setAttribute('id', 'jBeep')
                soundElem.setAttribute('height', '1px')
                soundElem.setAttribute('width', '1px')
                soundElem.setAttribute('data', '/login/audioCaptcha?randomNum=' + randomNum)
                bodyElem.appendChild(soundElem)
            } else {
                if ($('html.ie-8').length > 0 || $('html.ie-7').length > 0) {
                    $('#dummyspan').html('<embed src="/login/audioCaptcha" autostart="true" type="audio/x-wav" loop="false" controls="" width="0" height="0">')
                } else {
                    if (navigator.userAgent.toLowerCase().indexOf('msie') > -1) {
                        soundElem = document.createElement('bgsound')
                        soundElem.setAttribute('id', 'jBeep')
                        soundElem.setAttribute('loop', 'false')
                        soundElem.setAttribute('src', '/login/audioCaptcha?randomNum=' + randomNum)
                        bodyElem.appendChild(soundElem)
                    } else {
                        if (isHTML5) {
                            soundElem = document.createElement('audio')
                            if (soundElem.canPlayType('audio/x-wav')) {
                                soundElem.setAttribute('id', 'jBeep')
                                soundElem.setAttribute('type', 'audio/x-wav')
                                soundElem.setAttribute('src', '/login/audioCaptcha?randomNum=' + randomNum)
                                soundElem.play()
                            } else {
                                $('#dummyspan').html('<embed src="/login/audioCaptcha" autostart="false" type="audio/x-wav" loop="false" controls="" width="0" height="0">')
                            }
                        } else {
                            var paramElem
                            soundElem = document.createElement('object')
                            soundElem.setAttribute('id', 'jBeep')
                            soundElem.setAttribute('type', 'audio/wav')
                            soundElem.setAttribute('style', 'display:none;')
                            soundElem.setAttribute('data', '/login/audioCaptcha')
                            paramElem = document.createElement('param')
                            paramElem.setAttribute('name', 'autostart')
                            paramElem.setAttribute('value', 'false')
                            soundElem.appendChild(paramElem)
                            bodyElem.appendChild(soundElem)
                            try {
                                soundElem.play()
                            } catch (ex) {
                                soundElem.object.play()
                            }
                        }
                    }
                }
            }
        })
        var currentLocation = window.location.href
        var $pageURL = ''
        if (currentLocation.indexOf('bankofamerica.com') > 0) {
            $pageURL = currentLocation.substring(0, currentLocation.indexOf('bankofamerica.com') + 17)
        } else {
            $pageURL = 'https://www.bankofamerica.com'
        }
        $('#continue', moduleContext).click(function () {
            if ($('#continue', moduleContext).hasClass('btn-bofa-blue')) {
                $('#continue', moduleContext).removeClass('btn-bofa-blue').addClass('btn-disabled')
                $('#BumpFlowForm', moduleContext).submit()
            }
        })
        $('.vipaa-bump-flow-module .textbox-slow-skin #captchaKey').keypress(function (e) {
            if (e.keyCode == 13) {
                if ($('#continue', moduleContext).hasClass('btn-bofa-blue')) {
                    speedBumpEnterKey = true
                    $('#continue', moduleContext).removeClass('btn-bofa-blue').addClass('btn-disabled')
                    $('#BumpFlowForm', moduleContext).submit()
                    e.preventDefault()
                } else {
                    e.stopPropagation()
                    return false
                }
            }
        })
    }
})
var opt = 'toolbar=no,directories=no,location=no,status=no,scrollbars=yes,resizable=yes,copyhistory=no'
var opt480 = opt + ',width=600,height=480'

function englishOnlyPopUp(url) {
    var iMyWidth
    var iMyHeight
    var urlToUse = url
    if (null == urlToUse || undefined == urlToUse) {
        urlToUse = '/InterstitialManager.go'
    }
    iMyWidth = (window.screen.width / 2) - (200 + 10)
    iMyHeight = (window.screen.height / 2) - (100 + 50)
    if (window.showModalDialog) {
        window.showModalDialog(url, self, 'status,height=370,width=500,resizable=no,left=' + iMyWidth + ',top=' + iMyHeight + ',screenX=' + iMyWidth + ',screenY=' + iMyHeight + ',scrollbars=no,menubar=no,titlebar=no,toolbar=no,location=no')
    } else {
        window.open(urlToUse, self, 'status,height=370,width=500,resizable=no,left=' + iMyWidth + ',top=' + iMyHeight + ',screenX=' + iMyWidth + ',screenY=' + iMyHeight + ',scrollbars=no,menubar=no,titlebar=no,toolbar=no,location=no,modal=yes')
    }
}

function SborOOLPopUp(link, contentId, appName) {
    var redirectLink = '/accounts-overview/ContinueApp.go?src=redir&href='
    redirectLink = redirectLink + link
    var options = {
        size: 'small',
        buttons: {}
    }
    $('#continue').show()
    $('#' + contentId).boaModal(options)
    $('#cancel a').click(function () {
        $('.modal-description').dialog('close')
        $('.modal-description').dialog('destroy')
    })
    $('#continue a').click(function () {
        $('.modal-description').dialog('close')
        $('.modal-description').dialog('destroy')
        OOLCallback(true)
    })

    function OOLCallback(val) {
        if (val) {
            if (appName == 'overview' || appName == 'offers') {
                redirectLink = redirectLink + '&OOLSuppVal=' + $('#OOLSuppression').attr('checked')
            }
            window.open(redirectLink)
            val = false
        }
        return false
    }

    return false
}

function ORCCOutagePopUp(contentId) {
    var options = {
        size: 'med',
        buttons: {}
    }
    $('#' + contentId).boaModal(options)
    $('#cancel a').click(function () {
        $('.modal-description').dialog('close')
        $('.modal-description').dialog('destroy')
    })
    $('#Close').click(function () {
        $('.modal-description').dialog('close')
        $('.modal-description').dialog('destroy')
    })
    return false
}

function openHelp(url) {
    window.open(url, 'helpwindow', opt480)
}

function openHelpWindow(url, esLang, file) {
    var locale
    var urlValue
    if (esLang == 'true') {
        locale = 'es_US/'
    } else {
        locale = 'en_US/'
    }
    if (url.indexOf('http') == -1) {
        urlValue = 'https://' + url + '/cmsContent/' + locale + file
    } else {
        urlValue = url + '/cmsContent/' + locale + file
    }
    openHelp(urlValue)
}

function openHelpHeaderModelWindow(url, locale, file) {
    var urlValue
    if (url == 'IGNORE') {
        urlValue = file
    } else {
        urlValue = url + '/cmsContent/' + locale + '/' + file
    }
    openHelp(urlValue)
}

function openHelpHeaderNWWindow(url, file) {
    var urlValue = url + '/' + file
    openHelp(urlValue)
}

function openNWHelpWindow(url, file) {
    var urlValue = 'https://' + url + '/' + file
    openHelp(urlValue)
}

$(document).ready(function () {
    $('.vipaa-header-module a.arrow-link, .language-layer').mouseover(function () {
        showNestedLayer('.language-layer')
        hideNestedLayer('#SiteSearchForm')
    })
    $('.vipaa-header-module a.arrow-link, .language-layer').mouseout(function () {
        hideNestedLayer('.language-layer')
        showNestedLayer('#SiteSearchForm')
    })
    $('.vipaa-header-module a.arrow-link, .language-layer').click(function () {
        showNestedLayer('.language-layer')
        hideNestedLayer('#SiteSearchForm')
    })
})

function MLOOLPopUp(accessToken, contentId, target) {
    var MLlink = 'ContinueApp.go?target=' + target + '&app=ML&accessToken='
    MLlink = MLlink + accessToken
    var options = {
        size: 'small',
        buttons: {}
    }
    $('#mlContinue').show()
    $('#' + contentId).boaModal(options)
    $('#cancel a').click(function () {
        $('.modal-description').dialog('close')
        $('.modal-description').dialog('destroy')
    })
    $('#mlContinue a').click(function () {
        $('.modal-description').dialog('close')
        $('.modal-description').dialog('destroy')
        MLOOLCallback(true)
    })

    function MLOOLCallback(val) {
        if (val) {
            MLlink = MLlink + '&OOLSuppVal=' + $('#OOLSuppression').attr('checked')
            window.location = MLlink
        }
    }

    return false
}

function OOLPopUp(link, contentId, appName) {
    var redirectLink = '/accounts-overview/ContinueApp.go?src=redir&href='
    redirectLink = redirectLink + encodeURIComponent(link)
    var options = {
        size: 'small',
        buttons: {}
    }
    $('#continue').show()
    $('#' + contentId).boaModal(options)
    $('#cancel a').click(function () {
        $('.modal-description').dialog('close')
        $('.modal-description').dialog('destroy')
    })
    $('#continue a').click(function () {
        $('.modal-description').dialog('close')
        $('.modal-description').dialog('destroy')
        OOLCallback(true)
    })

    function OOLCallback(val) {
        if (val) {
            if (appName == 'overview') {
                redirectLink = redirectLink + '&OOLSuppVal=' + $('#OOLSuppression').attr('checked')
            }
            window.location = redirectLink
        }
    }

    return false
}

function showNestedLayer(showLayer) {
    if ($(showLayer).hasClass('hide')) {
        $(showLayer).removeClass('hide')
    }
}

function hideNestedLayer(hideLeayer) {
    if (!$(hideLeayer).hasClass('hide')) {
        $(hideLeayer).addClass('hide')
    }
}

var vendorURL
$(document).ready(function () {
    $('a.boa-interstitial').click(function () {
        vendorURL = $(this).attr('rel')
        var options = {
            size: 'medium',
            buttons: {
                Continue: true,
                Cancel: false
            },
            callback: gotoVendor
        }

        function gotoVendor(val) {
            var isBrowserIE6 = $.browser.msie == true ? (parseInt($.browser.version, 10) == 6 ? true : false) : false
            if (val) {
                if (isBrowserIE6) {
                    var url = location.protocol + '//' + location.host + vendorURL
                    setTimeout(function () {
                        window.location.href = url
                    }, 10)
                } else {
                    location.replace(vendorURL)
                }
            } else {
                if (typeof vipaaModalContentModuleInterstitialCancelURL != 'undefined') {
                    if (isBrowserIE6) {
                        var url = location.protocol + '//' + location.host + vipaaModalContentModuleInterstitialCancelURL
                        setTimeout(function () {
                            window.location.href = url
                        }, 10)
                    } else {
                        location.replace(vipaaModalContentModuleInterstitialCancelURL)
                    }
                } else {
                    if (isBrowserIE6) {
                        var url = location.protocol + '//' + location.host + '/login/sign-in/cancelBrowserUpgrade.go'
                        setTimeout(function () {
                            window.location.href = url
                        }, 10)
                    } else {
                        location.replace('/login/sign-in/cancelBrowserUpgrade.go')
                    }
                }
            }
        }

        $('#boa-interstitial-layer').boaModal(options)
        $('#boa-interstitial-layer-close').click(function () {
            $('#boa-interstitial-layer').dialog('close')
        })
        $('#boa-interstitial-layer div.buttons').addClass('plt-15 pbtm-10')
    })
})
$(document).ready(function () {
    var $sitekeyAffinityModal = $('#sitekey-affinity-aaa-modal')
    if ($sitekeyAffinityModal.length > 0) {
        var options = {
            size: 'medium',
            focusCloseLink: true
        }
        $sitekeyAffinityModal.boaModal(options)
        if (window.boaBrowserObject.mobile == true) {
            $('.ui-dialog-titlebar-close,.sitekey-affinity-modal-close-button', $sitekeyAffinityModal).attr('href', 'https://www.bankofamerica.com/mweb/index.html?app=signon')
        }
        $('.ui-dialog-titlebar-close,.sitekey-affinity-modal-close-button', $sitekeyAffinityModal).click(function () {
            $sitekeyAffinityModal.dialog('close')
        })
    }
})
$(document).ready(function () {
    if ($('.vipaa-modal-content-module .sitekey-cancel-rp-skin').length > 0) {
        $('a.show-sitekey-cancel-modal').click(function () {
            var targetModalId = $(this).attr('rel')
            var $targetModal = $('#' + targetModalId)
            var options = {
                size: 'flex-width',
                buttons: {},
                width: 742
            }
            if ((targetModalId == 'sitekey-atm-card-modal' || targetModalId == 'sitekey-ssn-tin-modal' || targetModalId == 'sitekey-credit-card-modal') && (typeof cmPageId_Modal != 'undefined')) {
                cmPageViewForModal.sendCMPageViewData()
            }
            $targetModal.boaModal(options)
            $('.ui-dialog-titlebar-close,.sitekey-cancel-modal-close-button', $targetModal).click(function () {
                $targetModal.dialog('close')
            })
        })
    }
})
var cmPageViewForModal = {
    sendCMPageViewData: function () {
        var cmPageViewFuncExists = $.isFunction(window.cmCreatePageviewTag)
        if (cmPageViewFuncExists) {
            cmCreatePageviewTag(cmPageId_Modal + locAppendage, null, null, cmCategoryId, false, false, null, false, false, null, null, null, null, cmSessionID, null, null, null, null, null, null, null)
        }
    }
}
$(document).ready(function () {
    if ($('.vipaa-modal-content-module .sitekey-cancel-skin').length > 0) {
        $('a.show-sitekey-cancel-modal').click(function () {
            var targetModalId = $(this).attr('rel')
            var $targetModal = $('#' + targetModalId)
            var options = {
                size: 'medium'
            }
            $targetModal.boaModal(options)
            $('.ui-dialog-titlebar-close,.sitekey-cancel-modal-close-button', $targetModal).click(function () {
                $targetModal.dialog('close')
            })
        })
    }
})
$(function () {
    var timeoutInterval = 600

    function readCookie(name) {
        var nameEQ = name + '='
        var ca = document.cookie.split(';')
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i]
            while (c.charAt(0) == ' ') {
                c = c.substring(1, c.length)
            }
            if (c.indexOf(nameEQ) == 0) {
                return c.substring(nameEQ.length, c.length)
            }
        }
        return null
    }

    function createCookie(name, value, days) {
        if (days) {
            var date = new Date()
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000))
            var expires = '; expires=' + date.toGMTString()
        } else {
            var expires = ''
        }
        document.cookie = name + '=' + value + expires + '; path=/'
    }

    if ($('div.vipaa-timeout-module').length > 0 && (typeof fsdNavClientOptions === 'undefined')) {
        setupTimeOut()
    }
    if ($('div.vipaa-timeout-module').length > 0 && (typeof fsdNavClientOptions !== 'undefined') && (typeof fsdNavClientOptions.chatVendor !== 'undefined') && (fsdNavClientOptions.chatVendor === 'TouchCommerce')) {
        setupTimeOut()
    }

    function setupTimeOut() {
        SessionTimeout.init(myWarnFunction, myTimeOut, timeoutInterval, continueURL)
    }

    function myWarnFunction() {
        var options = {
            size: 'small',
            buttons: {
                OK: true
            },
            callback: myHandleContinue
        }
        var transOptions = {
            size: 'med',
            buttons: {
                OK: true
            },
            callback: myHandleContinue
        }
        if (readCookie('LPActive') != null && readCookie('LPActive') == 'true') {
            createCookie('LPActive', 'false', 0.002)
        } else {
            if ($('#timeoutDialog').hasClass('trans')) {
                $('#timeoutDialog').boaModal(transOptions)
                $('#timeoutDialog .buttons a').removeClass('button-common button-gray mrt-15').addClass('btn-bofa btn-bofa-blue btn-bofa-small mbtm-15')
                $('#timeoutDialog .buttons').addClass('trans')
            } else {
                $('#timeoutDialog').boaModal(options)
            }
        }
    }

    function myHandleContinue() {
        SessionTimeout.handleContinue()
    }

    function myTimeOut() {
        var options = {
            size: 'small',
            buttons: {
                OK: true
            },
            callback: myUrl
        }
        if (readCookie('LPActive') != null && readCookie('LPActive') == 'true') {
            createCookie('LPActive', 'false', 0.002)
        } else {
            $('#timeoutDialog').dialog('close')
            myUrl()
        }
    }
})
$(document).ready(function () {
    $('.nav2 li a').click(function () {
        $(this).parent('li').parent('ul').find('a').removeClass('selected')
        $(this).addClass('selected')
        var id = $(this).attr('rel')
        $('.sub-nav').hide()
        if (id && id != '') {
            $('#' + id).show()
        }
    })
    if ($('li a.show-on-load', $('.nav-tier-2-module ul')).length > 0) {
        $('.nav-tier-2-module ul').find('li a.show-on-load').trigger('click')
    } else {
        $('.nav-tier-2-module ul').find('li:first').find('a').trigger('click')
    }
    $('.sub-nav ul li a').click(function () {
        $(this).parent('li').parent('ul').find('a').removeClass('selected')
        $(this).addClass('selected')
    })
    if ($('li a.show-on-load', $('.sub-nav ul')).length > 0) {
        $('.sub-nav ul').find('li a.show-on-load').trigger('click')
    } else {
        $('.sub-nav ul').find('li:first').find('a').trigger('click')
    }
    var active_color = '#000'
    var inactive_color = '#ccc'
    $('input.search-box').css('color', inactive_color)
    var default_values = new Array()
    $('input.search-box').focus(function () {
        if (!default_values[this.id]) {
            default_values[this.id] = this.value
        }
        if (this.value == default_values[this.id]) {
            this.value = ''
            this.style.color = active_color
        }
        $(this).blur(function () {
            if (this.value == '') {
                this.style.color = inactive_color
                this.value = default_values[this.id]
            }
        })
    })
    $('.modal-link').click(function () {
        var options = {
            size: 'small',
            buttons: {}
        }
        $('.modal-description').boaModal(options)
        $('.cancel-button').click(function () {
            temp = ''
            $('.modal-description').dialog('close')
            $('.modal-description').dialog('destroy')
        })
    })
    $('#questionbox').blur(function () {
        $('#nav-module-mag-glass').focus()
    })
})
$(document).ready(function () {
    if ($('html').attr('lang').toLowerCase() == 'en-us') {
        $('#OutofWalletForm').validate({
            includeFieldLabel: false,
            messages: {
                'tlpvt-radiooutofWallet1': {
                    required: 'Please provide answers to the questions below'
                },
                'tlpvt-radiooutofWallet6': {
                    required: 'Please provide answers to the questions below'
                },
                'tlpvt-radiooutofWallet11': {
                    required: 'Please provide answers to the questions below'
                }
            },
            rules: {
                'tlpvt-radiooutofWallet1': {
                    required: true
                },
                'tlpvt-radiooutofWallet6': {
                    required: true
                },
                'tlpvt-radiooutofWallet11': {
                    required: true
                }
            }
        })
    } else {
        $('#OutofWalletForm').validate({
            includeFieldLabel: false,
            messages: {
                'tlpvt-radiooutofWallet1': {
                    required: 'Por favor, proporcione respuestas a las siguientes preguntas'
                },
                'tlpvt-radiooutofWallet6': {
                    required: 'Por favor, proporcione respuestas a las siguientes preguntas'
                },
                'tlpvt-radiooutofWallet11': {
                    required: 'Por favor, proporcione respuestas a las siguientes preguntas'
                }
            },
            rules: {
                'tlpvt-radiooutofWallet1': {
                    required: true
                },
                'tlpvt-radiooutofWallet6': {
                    required: true
                },
                'tlpvt-radiooutofWallet11': {
                    required: true
                }
            }
        })
    }
})
$(document).ready(function () {
    if ($('.vipaa-verify-identity-module .splash-skin').length > 0) {
        boaEqualHeight($('.vipaa-verify-identity-module .splash-skin'))
    }
    $('.vipaa-verify-identity-module .splash-skin a.btn-bofa-blue').pie()
})
var csrfTokenHiddenValue = ''
var isModalOpen = ''
var $scIsIE = false
if (navigator.userAgent.indexOf('MSIE') != -1) {
    $scIsIE = true
}
$(document).ready(function () {
    if ($('.change-pin-vipaa-module .change-pin-skin').length > 0) {
        if (typeof (changePINStatus) != 'undefined' && (changePINStatus == 'success' || changePINStatus == 'ineligible_error' || changePINStatus == 'outage_error' || changePINStatus == 'pinChanged_error')) {
            var options = {
                skin: 'modal-flex',
                width: 600,
                onClose: function () {
                }
            }
            if (changePINStatus == 'success') {
                $('#success-cc-change-pin-modal').before('<h3>' + changePINSuccessTitle + '</h3>')
            } else {
                if (changePINStatus == 'ineligible_error' || changePINStatus == 'outage_error' || changePINStatus == 'pinChanged_error') {
                    $('#failure-cc-change-pin-modal').before('<h3>' + changePINFailureTitle + '</h3>')
                }
            }
            $('#changePINModal').boaFlexModal(options)
            var isModalOpen = true
            if (changePINStatus == 'success') {
                $('.successContent').removeClass('hide')
            } else {
                if (changePINStatus == 'ineligible_error' || changePINStatus == 'outage_error' || changePINStatus == 'pinChanged_error') {
                    $('.failureContent').removeClass('hide')
                } else {
                }
            }
            if (isModalOpen == true) {
                $('.ui-dialog-titlebar-close').click(function () {
                    if (options.onClose !== null && $.isFunction(options.onClose) === true) {
                        if ($(this).hasClass('hide')) {
                            event.preventDefault()
                        } else {
                            $(this).addClass('hide')
                            window.location.href = returnToCS
                        }
                    }
                })
            }
        }
        $('#tlpvt-cc-new-pin, #tlpvt-cc-confirm-new-pin').keyup(function () {
            var consecutiveRegexpr = /^(\d)\1{3,}/
            newPinCons = consecutiveRegexpr.test($('#tlpvt-cc-new-pin').val())
            confPinCons = consecutiveRegexpr.test($('#tlpvt-cc-confirm-new-pin').val())
            if (($('#tlpvt-cc-new-pin').val().length) === 4 && ($('#tlpvt-cc-confirm-new-pin').val().length) === 4 && (isNaN($('#tlpvt-cc-new-pin').val())) != true && (isNaN($('#tlpvt-cc-confirm-new-pin').val())) != true && newPinCons != true && confPinCons != true && ($('#tlpvt-cc-new-pin').val()) === ($('#tlpvt-cc-confirm-new-pin').val())) {
                $('#changePINSubmit').removeClass('btn-disabled').addClass('btn-bofa-blue')
            } else {
                $('#changePINSubmit').removeClass('btn-bofa-blue').addClass('btn-disabled')
            }
        })
        $('#tlpvt-cc-new-pin, #tlpvt-cc-confirm-new-pin').on('keyup mouseout', function () {
            this.value = this.value.replace(/[^0-9\.]/g, '')
        })
        $('#cancelPINChange').click(function () {
            var options = {
                skin: 'modal-flex',
                width: 480,
                onClose: function () {
                }
            }
            $('#confirm-cancel-modal').boaFlexModal(options)
            isModalOpen = true
            if (isModalOpen == true) {
                $('.ui-dialog-titlebar-close').click(function () {
                    if (options.onClose !== null && $.isFunction(options.onClose) === true) {
                        if ($(this).hasClass('hide')) {
                            event.preventDefault()
                        } else {
                            $(this).addClass('hide')
                            window.location.href = cancelURL
                        }
                    }
                })
            }
        })
        $('#yesCancel').click(function () {
            if ($(this).hasClass('btn-disabled')) {
                event.preventDefault()
            } else {
                $(this).removeClass('btn-bofa-blue').addClass('btn-disabled')
                window.location.href = $(this).attr('rel')
            }
        })
        $('#noReturnHome').click(function () {
            $('#confirm-cancel-modal').dialog('close')
        })
        $('#changePINSubmit').click(function (event) {
            if (typeof vipaaPublicKey !== 'undefined') {
                var newPin = $('#tlpvt-cc-new-pin').val(),
                    confnewPin = $('#tlpvt-cc-confirm-new-pin').val()
                encnewPin = encryptA(newPin, vipaaPublicKey),
                    encconfnewPin = encryptA(confnewPin, vipaaPublicKey)
                $('#newPin').val(encnewPin)
                $('#confirmNewPin').val(encconfnewPin)
                $('#tlpvt-cc-new-pin').val('')
                $('#tlpvt-cc-confirm-new-pin').val('')
            }
            if ($('#changePINSubmit').hasClass('btn-disabled')) {
                event.preventDefault()
            } else {
                $('#ChangePINForm').submit()
                $('#changePINSubmit').removeClass('btn-bofa-blue').addClass('btn-disabled')
            }
        })
        $('.ui-dialog-titlebar-close').click(function () {
            if (options.onClose !== null && $.isFunction(options.onClose) === true) {
                if ($(this).hasClass('hide')) {
                    event.preventDefault()
                } else {
                    $(this).addClass('hide')
                    window.location.href = returnToCS
                }
            }
        })
        if ($scIsIE) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-cc-confirm-new-pin').fieldMatcher({
                    tooltipID: 'confirm-new-pin-tooltip',
                    originFieldID: 'tlpvt-cc-new-pin',
                    tooltipLeft: 185,
                    tooltipTop: -7,
                    matchText: 'PIN matches',
                    notMatchText: 'PIN does not match',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-cc-confirm-new-pin').fieldMatcher({
                    tooltipID: 'confirm-new-pin-tooltip',
                    originFieldID: 'tlpvt-cc-new-pin',
                    tooltipLeft: 185,
                    tooltipTop: -13,
                    matchText: 'El PIN coincide',
                    notMatchText: 'Los N&#250;meros de identificaci&#243;n personal (PIN) no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            }
        } else {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-cc-confirm-new-pin').fieldMatcher({
                    tooltipID: 'confirm-new-pin-tooltip',
                    originFieldID: 'tlpvt-cc-new-pin',
                    tooltipLeft: 185,
                    tooltipTop: -7,
                    matchText: 'PIN matches',
                    notMatchText: 'PIN does not match',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-cc-confirm-new-pin').fieldMatcher({
                    tooltipID: 'confirm-new-pin-tooltip',
                    originFieldID: 'tlpvt-cc-new-pin',
                    tooltipLeft: 185,
                    tooltipTop: -3,
                    matchText: 'El PIN coincide',
                    notMatchText: 'Los N&#250;meros de identificaci&#243;n personal (PIN) no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            }
        }
        if ($scIsIE) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-cc-new-pin').formatChecker({
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    noRepeatingNumbersRule: {
                        applyRule: true,
                        ruleText: 'Numbers cannot all be the same'
                    },
                    tooltipID: 'pin-tooltip',
                    tooltipTop: -20,
                    tooltipLeft: 185
                })
            } else {
                $('#tlpvt-cc-new-pin').formatChecker({
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Debe de tener exactamente 4 n&#250;meros'
                    },
                    noRepeatingNumbersRule: {
                        applyRule: true,
                        ruleText: 'Los n&#250;meros no pueden ser todos iguales'
                    },
                    tooltipID: 'pin-tooltip',
                    tooltipTop: -20,
                    tooltipLeft: 185
                })
            }
        } else {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-cc-new-pin').formatChecker({
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    noRepeatingNumbersRule: {
                        applyRule: true,
                        ruleText: 'Numbers cannot all be the same'
                    },
                    tooltipID: 'pin-tooltip',
                    tooltipTop: -20,
                    tooltipLeft: 185
                })
            } else {
                $('#tlpvt-cc-new-pin').formatChecker({
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Debe de tener exactamente 4 n&#250;meros'
                    },
                    noRepeatingNumbersRule: {
                        applyRule: true,
                        ruleText: 'Los n&#250;meros no pueden ser todos iguales'
                    },
                    tooltipID: 'pin-tooltip',
                    tooltipTop: -30,
                    tooltipLeft: 185
                })
            }
        }
    }
})
var csrfTokenHiddenValue = ''
var isSBModalOpen = ''
var SBLangPostfix = 'en-US'
var $scIsIE = false
if (navigator.userAgent.indexOf('MSIE') != -1) {
    $scIsIE = true
}

function removeSBChangePINPageLoadedIndicator() {
    if (typeof window.sessionStorage != 'undefined' && window.sessionStorage !== null && window.sessionStorage !== null && window.sessionStorage.getItem('SBChangePINPageLoaded') !== null) {
        window.sessionStorage.removeItem('SBChangePINPageLoaded')
    }
}

$(document).ready(function () {
    if ($('.change-pin-vipaa-module .sb-change-pin-skin').length > 0) {
        if ((typeof window.sessionStorage != 'undefined' && window.sessionStorage !== null && window.sessionStorage !== null && window.sessionStorage.getItem('SBChangePINLanguage') !== null) || (typeof window.sessionStorage != 'undefined' && window.sessionStorage !== null && window.sessionStorage !== null && window.sessionStorage.getItem('SBChangePINPageLoaded') !== null)) {
            SBLangPostfix = 'es-US'
            var returnToCardSettingsHref = $('#returnToCardSettings').attr('rel')
            $('#returnToCardSettings').attr('rel', returnToCardSettingsHref + '?request_locale=' + SBLangPostfix)
            var returnCardSettingsHref = $('#returnCardSettings').attr('rel')
            $('#returnCardSettings').attr('rel', returnCardSettingsHref + '?request_locale=' + SBLangPostfix)
            cancelSBChangePin = cancelSBChangePin + '?request_locale=' + SBLangPostfix
            $('#yesCPCancel').attr('rel', cancelSBChangePin)
            returnToSBCSPage = returnToSBCSPage + '?request_locale=' + SBLangPostfix
            if (typeof window.sessionStorage != 'undefined' && window.sessionStorage !== null && window.sessionStorage !== null && window.sessionStorage.getItem('SBChangePINLanguage') !== null) {
                window.sessionStorage.removeItem('SBChangePINLanguage')
            }
            removeSBChangePINPageLoadedIndicator()
        }
        setTimeout(function () {
            if (typeof (changePINStatus) === 'undefined') {
                if (typeof window.sessionStorage != 'undefined' && window.sessionStorage !== null && window.sessionStorage !== null && $('#oo_bar span:first').text().toLowerCase() !== 'share website feedback') {
                    try {
                        var SBStorage = window.sessionStorage
                        SBStorage.setItem('SBChangePINPageLoaded', 'es-US')
                    } catch (e) {
                    }
                }
            }
            if (($('#oo_bar span:first').text().toLowerCase() !== 'share website feedback') && SBLangPostfix !== 'es-US') {
                SBLangPostfix = 'es-US'
                var returnToCardSettingsHref = $('#returnToCardSettings').attr('rel')
                $('#returnToCardSettings').attr('rel', returnToCardSettingsHref + '?request_locale=' + SBLangPostfix)
                var returnCardSettingsHref = $('#returnCardSettings').attr('rel')
                $('#returnCardSettings').attr('rel', returnCardSettingsHref + '?request_locale=' + SBLangPostfix)
                cancelSBChangePin = cancelSBChangePin + '?request_locale=' + SBLangPostfix
                $('#yesCPCancel').attr('rel', cancelSBChangePin)
                returnToSBCSPage = returnToSBCSPage + '?request_locale=' + SBLangPostfix
            }
        }, 500)
        if (typeof (changePINStatus) != 'undefined' && (changePINStatus == 'success' || changePINStatus == 'ineligible_error' || changePINStatus == 'outage_error' || changePINStatus == 'pinChanged_error')) {
            var options = {
                skin: 'modal-flex',
                width: 600,
                onClose: function () {
                }
            }
            if (changePINStatus == 'success') {
                $('#success-change-pin-modal').before('<h3>' + changePINSuccessTitle + '</h3>')
            } else {
                if (changePINStatus == 'ineligible_error' || changePINStatus == 'outage_error') {
                    $('#failure-change-pin-modal').before('<h3>' + changePINFailureTitle + '</h3>')
                } else {
                    if (changePINStatus == 'pinChanged_error') {
                        $('#failure-change-pin-modal').before('<h3>' + alreadychangedPINFailureTitle + '</h3>')
                    }
                }
            }
            $('#sbChangePINModal').boaFlexModal(options)
            var isSBModalOpen = true
            if (changePINStatus == 'success') {
                $('.sbChangePINSuccessContent').removeClass('hide')
            } else {
                if (changePINStatus == 'ineligible_error' || changePINStatus == 'outage_error' || changePINStatus == 'pinChanged_error') {
                    $('.sbChangePINFailureContent').removeClass('hide')
                } else {
                }
            }
            if (isSBModalOpen == true) {
                $('.ui-dialog-titlebar-close').click(function () {
                    if (options.onClose !== null && $.isFunction(options.onClose) === true) {
                        if ($(this).hasClass('hide')) {
                            event.preventDefault()
                        } else {
                            $(this).addClass('hide')
                            if (($('#oo_bar span:first').text().toLowerCase() !== 'share website feedback') && SBLangPostfix !== 'es-US' && ($('#oo_bar span:first').text().toLowerCase() !== '')) {
                                SBLangPostfix = 'es-US'
                                window.location.href = returnToSBCSPage + '?request_locale=' + SBLangPostfix
                            } else {
                                window.location.href = returnToSBCSPage
                            }
                            removeSBChangePINPageLoadedIndicator()
                        }
                    }
                })
            }
        }
        $('#tlpvt-sb-cc-new-pin, #tlpvt-sb-cc-confirm-new-pin').keyup(function () {
            if (($('#tlpvt-sb-cc-new-pin').val().length) === 4 && ($('#tlpvt-sb-cc-confirm-new-pin').val().length) === 4 && (isNaN($('#tlpvt-sb-cc-new-pin').val())) != true && (isNaN($('#tlpvt-sb-cc-confirm-new-pin').val())) != true && ($('#tlpvt-sb-cc-new-pin').val()) === ($('#tlpvt-sb-cc-confirm-new-pin').val())) {
                $('#changeSBPINSubmit').removeClass('btn-disabled').addClass('btn-bofa-blue')
            } else {
                $('#changeSBPINSubmit').removeClass('btn-bofa-blue').addClass('btn-disabled')
            }
        })
        $('#tlpvt-sb-cc-new-pin, #tlpvt-sb-cc-confirm-new-pin').on('keyup mouseout', function () {
            this.value = this.value.replace(/[^0-9\.]/g, '')
        })
        $('#cancelSBPINChange').click(function () {
            var options = {
                skin: 'modal-flex',
                width: 480,
                onClose: function () {
                },
                onOpen: function () {
                }
            }
            $('#sbpod-confirm-cancel-modal').boaFlexModal(options)
            $('#sbpod-confirm-cancel-modal-modalClose').text('close')
            isSBModalOpen = true
            if (isSBModalOpen == true) {
                $('.ui-dialog-titlebar-close').click(function () {
                    if (options.onClose !== null && $.isFunction(options.onClose) === true) {
                        if ($(this).hasClass('hide')) {
                            event.preventDefault()
                        } else {
                            $(this).addClass('hide')
                            if (($('#oo_bar span:first').text().toLowerCase() !== 'share website feedback') && SBLangPostfix !== 'es-US' && ($('#oo_bar span:first').text().toLowerCase() !== '')) {
                                SBLangPostfix = 'es-US'
                                window.location.href = cancelSBChangePin + '?request_locale=' + SBLangPostfix
                            } else {
                                window.location.href = cancelSBChangePin
                            }
                            removeSBChangePINPageLoadedIndicator()
                        }
                    }
                })
            }
        })
        $('#returnToCardSettings, #returnCardSettings, #yesCPCancel').on('click', function (event) {
            if ($(this).hasClass('btn-disabled')) {
                event.preventDefault()
            } else {
                $('.ui-dialog-titlebar-close:visible').hide()
                $(this).removeClass('btn-bofa-blue').addClass('btn-disabled')
                if (($('#oo_bar span:first').text().toLowerCase() !== 'share website feedback') && SBLangPostfix !== 'es-US' && ($('#oo_bar span:first').text().toLowerCase() !== '')) {
                    event.preventDefault()
                    SBLangPostfix = 'es-US'
                    if (event.target.id == 'returnToCardSettings') {
                        window.location.href = $('#returnToCardSettings').attr('rel') + '?request_locale=' + SBLangPostfix
                    } else {
                        if (event.target.id == 'returnCardSettings') {
                            window.location.href = $('#returnCardSettings').attr('rel') + '?request_locale=' + SBLangPostfix
                        } else {
                            if (event.target.id == 'yesCPCancel') {
                                window.location.href = $('#yesCPCancel').attr('rel') + '?request_locale=' + SBLangPostfix
                            }
                        }
                    }
                } else {
                    if (event.target.id == 'returnToCardSettings') {
                        window.location.href = $('#returnToCardSettings').attr('rel')
                    } else {
                        if (event.target.id == 'returnCardSettings') {
                            window.location.href = $('#returnCardSettings').attr('rel')
                        } else {
                            if (event.target.id == 'yesCPCancel') {
                                window.location.href = $('#yesCPCancel').attr('rel')
                            }
                        }
                    }
                }
                removeSBChangePINPageLoadedIndicator()
            }
        })
        $('#noReturnCPHome').click(function () {
            $('#sbpod-confirm-cancel-modal').dialog('close')
        })
        $('#changeSBPINSubmit').click(function (event) {
            if (typeof vipaaPublicKey !== 'undefined') {
                var newPin = $('#tlpvt-sb-cc-new-pin').val(),
                    confnewPin = $('#tlpvt-sb-cc-confirm-new-pin').val()
                encnewPin = encryptA(newPin, vipaaPublicKey),
                    encconfnewPin = encryptA(confnewPin, vipaaPublicKey)
                $('#newPin').val(encnewPin)
                $('#confirmNewPin').val(encconfnewPin)
                $('#tlpvt-sb-cc-new-pin').val('')
                $('#tlpvt-sb-cc-confirm-new-pin').val('')
            }
            if ($('#changeSBPINSubmit').hasClass('btn-disabled')) {
                event.preventDefault()
            } else {
                $('#sbChangePINForm').submit()
                $('#changeSBPINSubmit').removeClass('btn-bofa-blue').addClass('btn-disabled')
            }
        })
        $('.ui-dialog-titlebar-close').click(function () {
            if (options.onClose !== null && $.isFunction(options.onClose) === true) {
                if ($(this).hasClass('hide')) {
                    event.preventDefault()
                } else {
                    $(this).addClass('hide')
                    if (($('#oo_bar span:first').text().toLowerCase() !== 'share website feedback') && SBLangPostfix !== 'es-US' && ($('#oo_bar span:first').text().toLowerCase() !== '')) {
                        SBLangPostfix = 'es-US'
                        window.location.href = returnToSBCSPage + '?request_locale=' + SBLangPostfix
                    } else {
                        window.location.href = returnToSBCSPage
                    }
                    removeSBChangePINPageLoadedIndicator()
                }
            }
        })
        if ($scIsIE) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-sb-cc-confirm-new-pin').fieldMatcher({
                    tooltipID: 'confirm-new-pin-tooltip',
                    originFieldID: 'tlpvt-sb-cc-new-pin',
                    tooltipLeft: 185,
                    tooltipTop: -7,
                    matchText: 'PIN matches',
                    notMatchText: 'PIN does not match',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-sb-cc-confirm-new-pin').fieldMatcher({
                    tooltipID: 'confirm-new-pin-tooltip',
                    originFieldID: 'tlpvt-sb-cc-new-pin',
                    tooltipLeft: 185,
                    tooltipTop: -13,
                    matchText: 'PIN matches',
                    notMatchText: 'PIN does not match',
                    formatCheckerCallback: function () {
                    }
                })
            }
        } else {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-sb-cc-confirm-new-pin').fieldMatcher({
                    tooltipID: 'confirm-new-pin-tooltip',
                    originFieldID: 'tlpvt-sb-cc-new-pin',
                    tooltipLeft: 185,
                    tooltipTop: -7,
                    matchText: 'PIN matches',
                    notMatchText: 'PIN does not match',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#tlpvt-sb-cc-confirm-new-pin').fieldMatcher({
                    tooltipID: 'confirm-new-pin-tooltip',
                    originFieldID: 'tlpvt-sb-cc-new-pin',
                    tooltipLeft: 185,
                    tooltipTop: -3,
                    matchText: 'PIN matches',
                    notMatchText: 'PIN does not match',
                    formatCheckerCallback: function () {
                    }
                })
            }
        }
        if ($scIsIE) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-sb-cc-new-pin').formatChecker({
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    tooltipID: 'pin-tooltip',
                    tooltipTop: -10,
                    tooltipLeft: 185
                })
            } else {
                $('#tlpvt-sb-cc-new-pin').formatChecker({
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    tooltipID: 'pin-tooltip',
                    tooltipTop: -10,
                    tooltipLeft: 185
                })
            }
        } else {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#tlpvt-sb-cc-new-pin').formatChecker({
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    tooltipID: 'pin-tooltip',
                    tooltipTop: -10,
                    tooltipLeft: 185
                })
            } else {
                $('#tlpvt-sb-cc-new-pin').formatChecker({
                    exactFourDigitsRule: {
                        applyRule: true,
                        ruleText: 'Must be exactly 4 numbers'
                    },
                    tooltipID: 'pin-tooltip',
                    tooltipTop: -10,
                    tooltipLeft: 185
                })
            }
        }
    }
})
$(document).ready(function () {
    var $forgotModuleAtmCCSkin = $('.forgot-vipaa-module .atm-cc-skin')
    if ($forgotModuleAtmCCSkin.length > 0) {
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && (e.target.id === 'tlpvt-atm-pin' || e.target.id === 'tlpvt-CVV' || e.target.id === 'tlpvt-ccExpMonth' || e.target.id === 'tlpvt-ccExpYear')) {
                $('#forgot-atmcc-submit').click()
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#forgotatmccform').validate({
                customSelects: false,
                includeFieldLabel: false,
                messages: {
                    'tlpvt-atm-pin': {
                        required: 'Please enter your 4- to 12-digit PIN.',
                        integer: 'Please enter your 4- to 12-digit PIN.',
                        minlength: 'Please enter your 4- to 12-digit PIN.'
                    },
                    'tlpvt-CVV': {
                        required: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        integer: 'Please enter your 3- or 4- digit security code shown on your credit card.',
                        minlength: 'Please enter your 3- or 4- digit security code shown on your credit card.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Please enter the valid expiration date on your card.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Please enter the valid expiration date on your card.'
                    }
                },
                rules: {
                    'tlpvt-atm-pin': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').length > 0
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').length > 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-atm-pin').length > 0) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-CVV': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').length > 0
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').length > 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CVV').length > 0) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-ccExpMonth': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ccExpMonth').is(':visible')
                            }
                        }
                    },
                    'tlpvt-ccExpYear': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ccExpYear').is(':visible')
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    $('#tlpvt-atm-pin-Val').val($('#tlpvt-atm-pin').val())
                    $('#tlpvt-atm-pin').val('')
                    $('#tlpvt-CVV-Val').val($('#tlpvt-CVV').val())
                    $('#ttlpvt-CVV').val('')
                    form.submit()
                }
            })
        } else {
            $('#forgotatmccform').validate({
                customSelects: false,
                includeFieldLabel: false,
                messages: {
                    'tlpvt-atm-pin': {
                        required: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                        integer: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.',
                        minlength: 'Por favor, indique su n&#250;mero de identificaci&#243;n personal de 4 a 12 d&#237;gitos.'
                    },
                    'tlpvt-CVV': {
                        required: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                        integer: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.',
                        minlength: 'Por favor, indique el c&#243;digo de seguridad de 3 &#243; 4 d&#237;gitos que se muestra en su tarjeta de cr&#233;dito.'
                    },
                    'tlpvt-ccExpMonth': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.'
                    },
                    'tlpvt-ccExpYear': {
                        required: 'Por favor, indique la fecha de caducidad v&#225;lida de su tarjeta.sss'
                    }
                },
                rules: {
                    'tlpvt-atm-pin': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').length > 0
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-atm-pin').length > 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-atm-pin').length > 0) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-CVV': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').length > 0
                            }
                        },
                        integer: {
                            depends: function (element) {
                                return $('#tlpvt-CVV').length > 0
                            }
                        },
                        minlength: function () {
                            if ($('#tlpvt-CVV').length > 0) {
                                return 3
                            } else {
                                return 0
                            }
                        }
                    },
                    'tlpvt-ccExpMonth': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ccExpMonth').is(':visible')
                            }
                        }
                    },
                    'tlpvt-ccExpYear': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-ccExpYear').is(':visible')
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    $('#tlpvt-atm-pin-Val').val($('#tlpvt-atm-pin').val())
                    $('#tlpvt-atm-pin').val('')
                    $('#tlpvt-CVV-Val').val($('#tlpvt-CVV').val())
                    $('#ttlpvt-CVV').val('')
                    form.submit()
                }
            })
        }
        $('#forgot-atmcc-submit').click(function () {
            $('#forgotatmccform').submit()
            if (($('#tlpvt-ccExpMonth').is(':visible') && $('#tlpvt-ccExpMonth').prop('selectedIndex') == 0) || ($('#tlpvt-ccExpYear').is(':visible') && $('#tlpvt-ccExpYear').prop('selectedIndex') == 0)) {
                $('label[for=\'tlpvt-ccExpMonth\']').addClass('field-level-error')
            } else {
                $('label[for=\'tlpvt-ccExpMonth\']').removeClass('field-level-error')
            }
        })
    }
})
$(document).ready(function () {
    $forgotModuleIdpwdSkin = $('.forgot-vipaa-module .id-pwd-skin')
    window.forgotIDPWdSkin = {}
    forgotIDPWdSkin.curLang = $('html').attr('lang').toLowerCase()
    if ($forgotModuleIdpwdSkin.length > 0) {
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && (e.target.id === 'tlpvt-enter-new-pass' || e.target.id === 'tlpvt-reenter-new-pass')) {
                $('#forgot-id-pwd-submit').click()
            }
        })
        if (forgotIDPWdSkin.curLang == 'en-us') {
            $('#forgotIdPwdChangeForm').validate({
                messages: {
                    'tlpvt-enter-new-pass': {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-new-pass': {
                        required: 'Re-enter your Passcode correctly to continue.',
                        equalTo: 'Re-enter your Passcode correctly to continue.'
                    }
                },
                rules: {
                    'tlpvt-enter-new-pass': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-enter-new-pass').is(':visible') && (($('#tlpvt-enter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-new-pass': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-reenter-new-pass').is(':visible') && (($('#tlpvt-reenter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-new-pass')
                    },
                    submitHandler: function (form) {
                        form.submit()
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#forgotIdPwdChangeForm').validate({
                messages: {
                    'tlpvt-enter-new-pass': {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    'tlpvt-reenter-new-pass': {
                        required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                        equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                    }
                },
                rules: {
                    'tlpvt-enter-new-pass': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-enter-new-pass').is(':visible') && (($('#tlpvt-enter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    'tlpvt-reenter-new-pass': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-reenter-new-pass').is(':visible') && (($('#tlpvt-reenter-new-pass').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#tlpvt-enter-new-pass')
                    },
                    submitHandler: function (form) {
                        form.submit()
                    }
                },
                includeFieldLabel: false
            })
        }
        if (forgotIDPWdSkin.curLang == 'en-us') {
            $('#tlpvt-enter-new-pass').formatChecker({
                tooltipID: 'enter-new-pass-tooltip',
                tooltipTop: -43,
                tooltipLeft: 185,
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Be 8 to 20 characters'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Use only these special characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                }
            })
        } else {
            $('#tlpvt-enter-new-pass').formatChecker({
                tooltipID: 'enter-new-pass-tooltip',
                tooltipTop: -43,
                tooltipLeft: 185,
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Tener entre 8 y 20 caracteres'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Tener s&#243;lo estos caracteres especiales <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                }
            })
        }
        if (!(forgotIDPWdSkin.curLang == 'en-us')) {
            $('.forgot-vipaa-module .id-pwd-skin .format-checker-title').html('Corrector de formato')
        }
        if (forgotIDPWdSkin.curLang == 'en-us') {
            $('#tlpvt-reenter-new-pass').fieldMatcher({
                tooltipID: 'reenter-new-pass-tooltip',
                originFieldID: 'tlpvt-enter-new-pass',
                setAutoPos: true,
                matchText: 'Passcodes match',
                notMatchText: 'Passcodes do not match',
                tooltipTop: -9,
                tooltipLeft: 185,
                formatCheckerCallback: function () {
                }
            })
        } else {
            $('#tlpvt-reenter-new-pass').fieldMatcher({
                tooltipID: 'reenter-new-pass-tooltip',
                originFieldID: 'tlpvt-enter-new-pass',
                setAutoPos: true,
                matchText: 'Contrase&#241;as coinciden',
                notMatchText: 'Contrase&#241;as no coinciden',
                tooltipTop: -5,
                tooltipLeft: 185,
                formatCheckerCallback: function () {
                }
            })
        }
        $('#forgot-id-pwd-submit').click(function () {
            $('#forgotIdPwdChangeForm').submit()
        })
        $('#forgotIdPwdChangeForm').removeAttr('novalidate')
    }
})
$(document).ready(function () {
    var $forgotVipaaModuleSkin = $('.forgot-vipaa-module .ssn-pwd-skin')
    if ($forgotVipaaModuleSkin.length > 0) {
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && (e.target.id === 'tlpvt-account-num' || e.target.id === 'tlpvt-personalSSN-tin' || e.target.id === 'tlpvt-pwd' || e.target.id === 'tlpvt-id')) {
                $('#forgot-submit').click()
            }
        })
        $('#dont-have-ssn-tin').on('click', function (e) {
            e.preventDefault()
            $('.messaging-vipaa-module .info-blue-bground-skin').removeClass('hide').focus()
            $('.messaging-vipaa-module .info-blue-bground-skin .info-message').attr('aria-live', 'rude').focus()
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#forgotOnlineidPasscodeForm').validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-account-num': {
                        required: 'Please enter your account number.',
                        integer: 'Please enter your account number.',
                        minlength: 'Please enter your account number.',
                        maxlength: 'Please enter your account number.'
                    },
                    'tlpvt-personalSSN-tin': {
                        required: 'Please enter 9 digits of your SSN or TIN.',
                        integer: 'Please enter 9 digits of your SSN or TIN.',
                        minlength: 'Please enter 9 digits of your SSN or TIN.',
                        maxlength: 'Please enter 9 digits of your SSN or TIN.'
                    },
                    'tlpvt-pwd': {
                        required: 'Please enter your Passcode to continue.'
                    },
                    'tlpvt-id': {
                        required: 'Please enter your Online ID to continue.'
                    }
                },
                rules: {
                    'tlpvt-account-num': {
                        required: true,
                        integer: true,
                        minlength: 9,
                        maxlength: 16
                    },
                    'tlpvt-personalSSN-tin': {
                        required: true,
                        integer: true,
                        minlength: 9
                    },
                    'tlpvt-pwd': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-pwd').length > 0
                            }
                        }
                    },
                    'tlpvt-id': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-id').length > 0
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    if (typeof asyncEncryptField !== 'undefined') {
                        asyncEncryptField()
                    }
                    form.submit()
                }
            })
        } else {
            $('#forgotOnlineidPasscodeForm').validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-account-num': {
                        required: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        integer: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        minlength: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        maxlength: 'Por favor, introduzca su n&#250;mero de cuenta.'
                    },
                    'tlpvt-personalSSN-tin': {
                        required: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        integer: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    },
                    'tlpvt-pwd': {
                        required: 'Por favor Indique su Identificaci&#243;n en l&#237;nea para continuar'
                    },
                    'tlpvt-id': {
                        required: 'Por favor, indique su Contrase&#241;a para continuar.'
                    }
                },
                rules: {
                    'tlpvt-account-num': {
                        required: true,
                        integer: true,
                        minlength: 9,
                        maxlength: 16
                    },
                    'tlpvt-personalSSN-tin': {
                        required: true,
                        integer: true,
                        minlength: 9
                    },
                    'tlpvt-pwd': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-pwd').length > 0
                            }
                        }
                    },
                    'tlpvt-id': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-id').length > 0
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    if (typeof asyncEncryptField !== 'undefined') {
                        asyncEncryptField()
                    }
                    form.submit()
                }
            })
        }
        $('#forgot-submit').click(function () {
            $('#forgotOnlineidPasscodeForm').submit()
        })
        post_deviceprint()
    }
})
$(document).ready(function () {
    var $forgotVipaaModuleSkin = $('.forgot-vipaa-module .ssn-pwd-skin')
    if ($forgotVipaaModuleSkin.length > 0) {
        $('body').bind('keypress', function (e) {
            if (e.keyCode == 13 && (e.target.id === 'tlpvt-account-num' || e.target.id === 'tlpvt-personalSSN-tin' || e.target.id === 'tlpvt-pwd' || e.target.id === 'tlpvt-id')) {
                $('#forgot-submit').click()
            }
        })
        $('#dont-have-ssn-tin').on('click', function (e) {
            e.preventDefault()
            $('.messaging-vipaa-module .info-blue-bground-skin').removeClass('hide').focus()
            $('.messaging-vipaa-module .info-blue-bground-skin .info-message').attr('aria-live', 'rude').focus()
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#forgotOnlineidPasscodeForm').validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-account-num': {
                        required: 'Please enter your account number.',
                        integer: 'Please enter your account number.',
                        minlength: 'Please enter your account number.',
                        maxlength: 'Please enter your account number.'
                    },
                    'tlpvt-personalSSN-tin': {
                        required: 'Please enter 9 digits of your SSN or TIN.',
                        integer: 'Please enter 9 digits of your SSN or TIN.',
                        minlength: 'Please enter 9 digits of your SSN or TIN.',
                        maxlength: 'Please enter 9 digits of your SSN or TIN.'
                    },
                    'tlpvt-pwd': {
                        required: 'Please enter your Passcode to continue.'
                    },
                    'tlpvt-id': {
                        required: 'Please enter your Online ID to continue.'
                    }
                },
                rules: {
                    'tlpvt-account-num': {
                        required: true,
                        integer: true,
                        minlength: 9,
                        maxlength: 16
                    },
                    'tlpvt-personalSSN-tin': {
                        required: true,
                        integer: true,
                        minlength: 9
                    },
                    'tlpvt-pwd': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-pwd').length > 0
                            }
                        }
                    },
                    'tlpvt-id': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-id').length > 0
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    if (typeof asyncEncryptField !== 'undefined') {
                        asyncEncryptField()
                    }
                    form.submit()
                }
            })
        } else {
            $('#forgotOnlineidPasscodeForm').validate({
                includeFieldLabel: false,
                messages: {
                    'tlpvt-account-num': {
                        required: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        integer: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        minlength: 'Por favor, introduzca su n&#250;mero de cuenta.',
                        maxlength: 'Por favor, introduzca su n&#250;mero de cuenta.'
                    },
                    'tlpvt-personalSSN-tin': {
                        required: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        integer: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.',
                        minlength: 'Por favor, indique 9 d&#237;gitos de su n&#250;mero de Seguro Social v&#225;lido (SSN) o n&#250;mero de identificaci&#243;n de impuestos del contribuyente.'
                    },
                    'tlpvt-pwd': {
                        required: 'Por favor Indique su Identificaci&#243;n en l&#237;nea para continuar'
                    },
                    'tlpvt-id': {
                        required: 'Por favor, indique su Contrase&#241;a para continuar.'
                    }
                },
                rules: {
                    'tlpvt-account-num': {
                        required: true,
                        integer: true,
                        minlength: 9,
                        maxlength: 16
                    },
                    'tlpvt-personalSSN-tin': {
                        required: true,
                        integer: true,
                        minlength: 9
                    },
                    'tlpvt-pwd': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-pwd').length > 0
                            }
                        }
                    },
                    'tlpvt-id': {
                        required: {
                            depends: function (element) {
                                return $('#tlpvt-id').length > 0
                            }
                        }
                    }
                },
                submitHandler: function (form) {
                    if (typeof asyncEncryptField !== 'undefined') {
                        asyncEncryptField()
                    }
                    form.submit()
                }
            })
        }
        $('#forgot-submit').click(function () {
            $('#forgotOnlineidPasscodeForm').submit()
        })
        post_deviceprint()
    }
})
$(document).ready(function () {
    if ($('.modal-content-vipaa-module .intel-fp-tnc-skin').length > 0) {
        $('body').delegate('[id^=\'FP-TnC\']', 'click', function () {
            var options = {
                size: 'large',
                width: '550',
                buttons: '',
                onClose: function () {
                }
            }
            $('#intel-fp-tnc').boaFlexModal(options)
            $('#intel-fp-tnc-modalClose').contents().filter(function () {
                return this.nodeType === 3
            }).remove()
        })
        $('#okay-TnC').on('click', function () {
            $('#intel-fp-tnc').dialog('close')
        })
    }
})
$(document).ready(function () {
    if ($('.modal-content-vipaa-module .add-safepass-skin').length > 0) {
        $('a.show-add-safepass-modal').click(function () {
            var targetModalId = $(this).attr('rel')
            var $targetModal = $('#' + targetModalId)
            var options = {
                size: 'flex-width',
                buttons: {},
                width: 742
            }
            $targetModal.boaModal(options)
            $('.add-safepass-modal-leave-button').click(function () {
                $('#CancelEnrollmentForm').submit()
            })
            $('.add-safepass-modal-close-button', $targetModal).click(function () {
                $targetModal.dialog('close')
            })
        })
    }
})
var defaultemailaddress = 'mm@mn.com'
var createusererrormsg = 'Please enter a valid email address.'
var vipaaModalContentModuleCreateUserSkin = {
    fn: {
        validateData: '',
        bringFocus: '',
        errorHelp: ''
    }
}
vipaaModalContentModuleCreateUserSkin.fn.validateData = function () {
}

function validateEmail($email) {
    var $emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/
    if (!$emailReg.test($email)) {
        return false
    } else {
        return true
    }
}

var moduleLoad = false
var subUserModalContentModuleCreateUserSkinObj = {
    CONTEXT: '.modal-content-vipaa-module .create-user-skin'
}
$(document).ready(function () {
    if ($('.modal-content-vipaa-module .create-user-skin').length > 0) {
        var url = ''
        var index
        var currentId = ''
        var pattern = /^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/
        var allowClick = true
        if (typeof loadModuleOnload !== 'undefined' && loadModuleOnload) {
            loadmodallayer()
        }
        $('#txtEmailAddr').fieldMatcher({
            tooltipID: 'txtEmailAddr-tooltip',
            originFieldID: 'txtEmailAddr',
            tooltipLeft: 341,
            tooltipTop: 336,
            matchText: '<p id=\'\'><span class=\'bold\'>Correct Format</span><br/>name@mail.com</p>',
            notMatchText: '',
            formatCheckerCallback: function () {
                if ((validateEmail($('#txtEmailAddr').val()) === false)) {
                    $('#txtEmailAddr-tooltip').css('top', ($('#txtEmailAddr').position().top - 35) + 'px')
                    $('#txtEmailAddr-tooltip').css('left', ($('#txtEmailAddr').position().left + 241) + 'px')
                    $('#txtEmailAddr-tooltip .match .field-matcher-match').remove()
                } else {
                    $('#txtEmailAddr-tooltip').css('display', 'none')
                }
            }
        })
        $('body').delegate('[id^=\'trigger-modal-create-user\']', 'click', function () {
            loadmodallayer()
        })
        $('[id^=\'copy-settings\']').click(function () {
            var $EditProfileSkin = $('.sub-user-vipaa-module .details-skin')
            var $AccServicesSkin = $('.asa-service-module .account-services-skin')
            if ($EditProfileSkin.length > 0) {
                $('.button', $EditProfileSkin).each(function (i) {
                    if ($(this).attr('id') == 'admin-settings') {
                        if (!$(this).hasClass($(this).data('initial_value'))) {
                            formChanged = true
                        }
                    }
                    if ($(this).attr('id') == 'safepass-on-off') {
                        if ($(this).data('initial_value') == 'button-on' && $(this).hasClass('button-off')) {
                            formChanged = true
                        }
                    }
                })
            }
            if ($AccServicesSkin.length > 0) {
                $('input[type=checkbox]', $AccServicesSkin).each(function (i) {
                    if ($(this).is(':checked') != $(this).data('initial_value')) {
                        formChanged = true
                    }
                })
                $('.button', $AccServicesSkin).each(function (i) {
                    if (!$(this).hasClass($(this).data('initial_value'))) {
                        formChanged = true
                    }
                })
            }
            if (typeof isCustomerOBO !== 'undefined' && isCustomerOBO == 'false' && formChanged == true) {
                saveProfModalDisplay(formChanged, $(this))
            } else {
                loadmodallayer()
                currentId = $(this).attr('id')
                index = currentId.slice(14)
                index++
                adaText = 'copy setting of '
                $('#chkCopyAcctAccess', subUserModalContentModuleCreateUserSkinObj.CONTEXT).attr('checked', true)
                $('.modal-content-vipaa-module .create-user-skin .divSelectUser').show()
                $('.modal-content-vipaa-module .create-user-skin .divSelectUser .existing-user') [0].selectedIndex = index
                $('.modal-content-vipaa-module .create-user-skin .divSelectUser .existing-user').prev('label').children('span.ada-hidden').text(adaText)
            }
        })
        $('[id^=\'btn-add-user\']').click(function (e) {
            if (!$('.modal-content-vipaa-module .create-user-skin #PWDsameasOID').hasClass('hide') || !$('.modal-content-vipaa-module .create-user-skin #duplicateOID').hasClass('hide') || !$('.modal-content-vipaa-module .create-user-skin #backendFailure').hasClass('hide')) {
                $('.modal-content-vipaa-module .create-user-skin #duplicateOID').addClass('hide')
                $('.modal-content-vipaa-module .create-user-skin #PWDsameasOID').addClass('hide')
                $('.modal-content-vipaa-module .create-user-skin #backendFailure').addClass('hide')
            }
            var userform = $('#frmCreateUserForm')
            if ($(this).hasClass('btn-bofa-blue') && userform.valid()) {
                if ($('#frmCreateUserForm').find('.field-level-error').length === 0) {
                    $('.create-user-skin .error-message-box').addClass('hide')
                    $('#backendFailure').addClass('hide')
                    removeCreateUserFormatError($(this))
                    if (allowClick == true) {
                        allowClick = false
                        $('#btn-add-user').removeClass('btn-bofa-blue').addClass('btn-bofa-inactive').addClass('btn-disabled')
                        $('#btn-cancel-add-user').removeClass('btn-bofa-gray').addClass('btn-bofa-inactive').addClass('btn-disabled')
                        var ajaxCallError = 'false'
                        var postURL = '/login/sub-user/sm/addSubUser.go'
                        var name = $('#txtUserName').val()
                        var onlineId = encodeURIComponent($('#txtOID').val())
                        var passcode = encodeURIComponent($('#txtPassword').val())
                        var tempPasscode = encodeURIComponent($('#txtReEnterPassword').val())
                        var emailAddress = $('#txtEmailAddr').val()
                        var copySettingsEligible = $('#chkCopyAcctAccess').is(':checked')
                        var copyUserIndex = $('#copyUserIndex').val()
                        var csrfTokenHidden = $('input[id^=\'csrfTokenHidden\']', userform).val()
                        $('[id^=\'txt\']').each(function () {
                            $(this).attr('disabled', 'disabled')
                        })
                        var userData = 'name=' + name + '&onlineId=' + onlineId + '&usrValCredential=' + passcode + '&emailAddress=' + emailAddress + '&copySettingsEligible=' + copySettingsEligible + '&copyUserIndex=' + copyUserIndex
                        $.ajax({
                            url: postURL,
                            type: 'POST',
                            data: {
                                userData: encryptSensitive(userData),
                                csrfTokenHidden: csrfTokenHidden
                            },
                            error: function (XMLHTTPRequest, textStatus, errorThrown) {
                                $('.create-user-skin #backendFailure').removeClass('hide')
                                callCoremetricsForCreateUserLib()
                                $('#btn-add-user').addClass('btn-bofa-blue').removeClass('btn-bofa-inactive').removeClass('btn-disabled')
                                $('#btn-cancel-add-user').addClass('btn-bofa-gray').removeClass('btn-bofa-inactive').removeClass('btn-disabled')
                                $('[id^=\'txt\']').each(function () {
                                    $(this).removeAttr('disabled')
                                })
                                $('.format-checker-tooltip,.field-matcher-tooltip').fadeOut()
                                allowClick = true
                            },
                            success: function (data) {
                                if (data != null && data != 'undefined' && data != '') {
                                    if (data.toUpperCase() == 'SUCCESS') {
                                        $('.create-user-skin .error-message-box').addClass('hide')
                                        window.location = '/login/sub-user/sm/subuserMaint.go?sourcePage=addModal'
                                    } else {
                                        if (data.toUpperCase() == 'DUPLICATE') {
                                            ajaxCallError = 'true'
                                            addCreateUserFormatError($('#txtOID'))
                                            $('.create-user-skin .error-message-box').addClass('hide')
                                            $('#duplicateOID').removeClass('hide').attr('tabindex', 0).attr('aria-live', 'rude').focus()
                                        } else {
                                            if (data.toUpperCase() == 'OIDSAMEASPWD') {
                                                ajaxCallError = 'true'
                                                addCreateUserFormatError($('#txtPassword'))
                                                $('.create-user-skin .error-message-box').addClass('hide')
                                                $('#PWDsameasOID').removeClass('hide').attr('tabindex', 0).attr('aria-live', 'rude').focus()
                                            } else {
                                                if (data.toUpperCase() == 'ADDUSERFAILED') {
                                                    ajaxCallError = 'true'
                                                    $('.create-user-skin .error-message-box').addClass('hide')
                                                    $('#backendFailure').removeClass('hide').attr('tabindex', 0).attr('aria-live', 'rude').focus()
                                                } else {
                                                    if (data.toUpperCase() == 'OID_CONTAINS_SSN_ATM') {
                                                        ajaxCallError = 'true'
                                                        $('.create-user-skin .error-message-box').addClass('hide')
                                                        $('#oidContainSSN').removeClass('hide').attr('tabindex', 0).attr('aria-live', 'rude').focus()
                                                    } else {
                                                        if (data.toUpperCase() == 'INVALIDEMAIL') {
                                                            ajaxCallError = 'true'
                                                            $('.create-user-skin .error-message-box').addClass('hide')
                                                            $('#invalidEmail').removeClass('hide').attr('tabindex', 0).attr('aria-live', 'rude').focus()
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    if (ajaxCallError == 'true') {
                                        callCoremetricsForCreateUserLib()
                                        $('#btn-add-user').addClass('btn-bofa-blue').removeClass('btn-bofa-inactive').removeClass('btn-disabled')
                                        $('#btn-cancel-add-user').addClass('btn-bofa-gray').removeClass('btn-bofa-inactive').removeClass('btn-disabled')
                                        $('[id^=\'txt\']').each(function () {
                                            $(this).removeAttr('disabled')
                                        })
                                        $('.format-checker-tooltip,.field-matcher-tooltip').fadeOut()
                                        allowClick = true
                                    }
                                }
                            }
                        })
                    }
                } else {
                    $('.format-checker-tooltip,.field-matcher-tooltip').hide()
                    $('#validationError').removeClass('hide').attr('tabindex', 0).attr('aria-live', 'rude').focus()
                }
            } else {
                callCoremetricsForCreateUserLib()
            }
        })
        if ($(subUserModalContentModuleCreateUserSkinObj.CONTEXT).length > 0) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#frmCreateUserForm').validate({
                    messages: {
                        txtUserName: {
                            required: 'Please enter a new user name to continue.',
                            nodigits: 'Please create an user name that does not contain any numbers.',
                            alphawithspace: 'Please use only letters and spaces.',
                            nospecial: 'Please enter an user name without these special characters: ` ! $ % ^ & [ ]  | " \' : < > ',
                            rangelength: 'Please create an user name between 6-30 characters in length.'
                        },
                        txtOID: {
                            required: 'Create an Online ID that is 6 to 32 characters in length.',
                            nodigits: 'Create an Online ID that does not contain all numbers.',
                            rangelength: $.validator.format('Create an Online ID that is {0} to {1} characters in length.'),
                            letterNumberSpecialCombo: 'Enter an Online ID with no spaces and using only the allowed special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                        },
                        txtPassword: {
                            required: 'Enter a new Passcode to continue.',
                            rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                            oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                            nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                            allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                            onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                            passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                        },
                        txtReEnterPassword: {
                            required: 'Re-enter your Passcode correctly to continue.',
                            equalTo: 'Re-enter your Passcode correctly to continue.'
                        },
                        txtEmailAddr: {
                            required: 'Please enter your email id to continue.',
                            nospacesnospecial: 'Please enter your valid email address.',
                            email: 'Please provide email id in proper format',
                            rangelength: 'Please create an email maximum of 63 characters in length.'
                        }
                    },
                    rules: {
                        txtUserName: {
                            required: true,
                            nospecial: '%"<>&^![\\]`|\'$:',
                            nodigits: true,
                            alphawithspace: true,
                            rangelength: [
                                6,
                                30
                            ]
                        },
                        txtOID: {
                            required: true,
                            nodigits: true,
                            rangelength: [
                                6,
                                32
                            ],
                            letterNumberSpecialCombo: true
                        },
                        txtPassword: {
                            required: {
                                depends: function (element) {
                                    return (($('#txtPassword').val().length === 0) ? true : false)
                                }
                            },
                            rangelength: [
                                8,
                                20
                            ],
                            oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                            nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                            allowedSpecialChars: true,
                            onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                            passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                        },
                        txtReEnterPassword: {
                            required: {
                                depends: function (element) {
                                    return (($('#txtReEnterPassword').val().length === 0) ? true : false)
                                }
                            },
                            equalTo: $('#txtPassword')
                        },
                        txtEmailAddr: {
                            required: true,
                            nospacesnospecial: '$%<>&\\^![\\]',
                            email: true,
                            rangelength: [
                                3,
                                63
                            ]
                        }
                    },
                    includeFieldLabel: false
                })
                $('#txtOID').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 6,
                        maxChar: 32,
                        ruleText: 'Between 6 to 32 characters'
                    },
                    letterNumberSpecialComboRule: {
                        applyRule: true,
                        ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'
                    },
                    noSpacesRule: {
                        applyRule: true,
                        ruleText: 'Spaces'
                    },
                    noSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Special Characters EXCEPT <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                        excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                    },
                    noAllNumbersRule: {
                        applyRule: true,
                        ruleText: 'All numbers'
                    },
                    tooltipID: 'txtOID-tooltip',
                    tooltipTop: -63,
                    tooltipLeft: 240,
                    formatCheckerCallback: function () {
                    }
                })
                $('#txtPassword').formatChecker({
                    tooltipID: 'txtPassword-tooltip',
                    tooltipTop: -24,
                    tooltipLeft: 240,
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Be 8 to 20 characters'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Not contain spaces, and may only use these characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    formatCheckerCallback: function () {
                    }
                })
                $('#txtReEnterPassword').fieldMatcher({
                    tooltipID: 'txtReEnterPassword-tooltip',
                    originFieldID: 'txtPassword',
                    tooltipLeft: $('#txtReEnterPassword').offset().left + $('#txtReEnterPassword').width() + 115,
                    tooltipTop: $('#txtReEnterPassword').offset().top + 370,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                        var $tooltip = $('#txtReEnterPassword-tooltip')
                        $tooltip.css('top', $('#txtReEnterPassword').position().top - ($tooltip.height() / 2 - 12) + 'px')
                        if (loadModuleOnload) {
                            $tooltip.css('left', ($('#txtOID').width() + 115) + 'px')
                        }
                    }
                })
            } else {
                $('#frmCreateUserForm').validate({
                    messages: {
                        txtUserName: {
                            required: 'Please enter a new user name to continue.',
                            nodigits: 'Please create an user name that does not contain any numbers.',
                            alphawithspace: 'Please use only letters and spaces.',
                            nospecial: 'Please enter an user name without these special characters: ` ! $ % ^ & [ ]  | " \' : < > ',
                            rangelength: $.validator.format('Please create an user name between 6-30 characters in length.')
                        },
                        txtOID: {
                            required: 'Cree una Identificaci&#243;n en l&#237;nea que tenga entre 6 y 32 caracteres de longitud.',
                            nodigits: 'Cree una Identificaci&#243;n en l&#237;nea que no contenga s&#243;lo n&#250;meros.',
                            rangelength: $.validator.format('Cree una Identificaci&#243;n en l&#237;nea que tenga entre {0} y {1} caracteres de longitud.'),
                            letterNumberSpecialCombo: 'Indique una Identificaci&#243;n en L&#237;nea sin espacios y usando s&#243;lo los caracteres especiales permitidos: @ # * ( ) + = { } / ? ~ ; , . - _'
                        },
                        txtPassword: {
                            required: 'Indique una nueva Contrase&#241;a para continuar.',
                            rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                            oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                            nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                            allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                            onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                            passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                        },
                        txtReEnterPassword: {
                            required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                            equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                        },
                        txtEmailAddr: {
                            required: 'Please enter your email id to continue.',
                            nospacesnospecial: 'Please enter your valid email address.',
                            email: 'Please provide email id in proper format',
                            rangelength: $.validator.format('Please create an email maximum of 63 characters in length.')
                        }
                    },
                    rules: {
                        txtUserName: {
                            required: true,
                            nospecial: '%"<>&^![\\]`|\'$:',
                            nodigits: true,
                            alphawithspace: true,
                            rangelength: [
                                6,
                                30
                            ]
                        },
                        txtOID: {
                            required: true,
                            nodigits: true,
                            rangelength: [
                                6,
                                32
                            ],
                            letterNumberSpecialCombo: true
                        },
                        txtPassword: {
                            required: {
                                depends: function (element) {
                                    return (($('#txtPassword').val().length === 0) ? true : false)
                                }
                            },
                            rangelength: [
                                8,
                                20
                            ],
                            oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                            nonRepeat3Chars: (typeof newPwdStandardSwitch && newPwdStandardSwitch == 'true') ? true : false,
                            allowedSpecialChars: true,
                            onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                            passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                        },
                        txtReEnterPassword: {
                            required: {
                                depends: function (element) {
                                    return (($('#txtReEnterPassword').val().length === 0) ? true : false)
                                }
                            },
                            equalTo: $('#txtPassword')
                        },
                        txtEmailAddr: {
                            required: true,
                            nospacesnospecial: '$%<>&\\^![\\]',
                            email: true,
                            rangelength: [
                                3,
                                63
                            ]
                        }
                    },
                    includeFieldLabel: false
                })
                $('#txtOID').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 6,
                        maxChar: 32,
                        ruleText: 'Entre 6 y 32 caracteres'
                    },
                    letterNumberSpecialComboRule: {
                        applyRule: true,
                        ruleText: 'Una combinaci&#243;n de 2 tipos de caracteres (letras, n&#250;meros y especiales) o tener s&#243;lo letras'
                    },
                    noSpacesRule: {
                        applyRule: true,
                        ruleText: 'Espacios'
                    },
                    noSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Caracteres especiales EXCEPTO <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                        excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                    },
                    noAllNumbersRule: {
                        applyRule: true,
                        ruleText: 'All numbers'
                    },
                    tooltipID: 'txtOID-tooltip',
                    tooltipTop: -63,
                    tooltipLeft: 240,
                    formatCheckerCallback: function () {
                    }
                })
                $('#txtReEnterPassword').fieldMatcher({
                    tooltipID: 'txtReEnterPassword-tooltip',
                    originFieldID: 'txtPassword',
                    tooltipLeft: $('#txtReEnterPassword').offset().left + $('#txtReEnterPassword').width() + 115,
                    tooltipTop: $('#txtReEnterPassword').offset().top + 370,
                    matchText: 'Contrase&#241;as coinciden',
                    notMatchText: 'Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                        var $tooltip = $('#txtReEnterPassword-tooltip')
                        $tooltip.css('top', $('#txtReEnterPassword').position().top - ($tooltip.height() / 2 - 12) + 'px')
                        if (loadModuleOnload) {
                            $tooltip.css('left', ($('#txtOID').width() + 115) + 'px')
                        }
                    }
                })
                $('#txtPassword').formatChecker({
                    tooltipID: 'txtPassword-tooltip',
                    tooltipTop: -24,
                    tooltipLeft: 240,
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Tener entre 8 y 20 caracteres'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    formatCheckerCallback: function () {
                        var $tooltip = $('#txtPassword-tooltip')
                        $('#txtPassword-tooltip .tooltip-carat').css('top', ($tooltip.height() / 2 - 15) + 'px')
                        $tooltip.css('top', $('#txtPassword').position().top - ($tooltip.height() / 2 + 34) + 'px')
                        if (loadModuleOnload) {
                            $tooltip.css('left', ($('#txtPassword').width() + 115) + 'px')
                        }
                    }
                })
            }
        }
        var $btnCancel = function () {
            if (allowClick == true && $(this).hasClass('btn-bofa-gray')) {
                $('.create-user-skin #clientSideErrors').css('display', 'none')
                $('#modal-create-user').dialog('close')
                var copyUserIndex = '',
                    onlineId = '',
                    name = '',
                    emailAddress = ''
                name = $('#txtUserName').val()
                onlineId = $('#txtOID').val()
                emailAddress = $('#txtEmailAddr').val()
                copyUserIndex = $('#copyUserIndex').val()
                if (typeof (cG7) !== 'undefined' && typeof (cm_ClientID) !== 'undefined' && typeof (cmPageId) !== 'undefined') {
                    cG7.cM0[cm_ClientID] = cmPageId
                }
                if ($('.modal-content-vipaa-module .create-user-skin .divSelectUser').length > 0) {
                    $('.modal-content-vipaa-module .create-user-skin .divSelectUser .existing-user') [0].selectedIndex = 0
                }
                $.post('/login/sub-user/sm/sbUserEventLog.go?Action=Add&copyUserIndex=' + copyUserIndex + '&onlineId=' + onlineId + '&name=' + name + '&emailAddress=' + emailAddress)
            }
        }
        $('#btn-cancel-add-user').click($btnCancel)
        $('#chkCopyAcctAccess', subUserModalContentModuleCreateUserSkinObj.CONTEXT).click(function () {
            if (this.checked) {
                $('.modal-content-vipaa-module .create-user-skin .divSelectUser').show()
            } else {
                $('.modal-content-vipaa-module .create-user-skin .divSelectUser').hide()
            }
        })
        $('#txtReEnterPassword').bind('paste', function (e) {
            e.preventDefault()
        })
        $('#txtEmailAddr').blur(function () {
            $('#txtEmailAddress-tooltip').hide()
        })
        $('#txtEmailAddr').bind('keyup', vipaaModalContentModuleCreateUserSkin.fn.validateData)
    }
})

function fullModelOnOpen() {
    $('.summary-area > #clientSideErrors').attr('id', 'clientSideError')
    if ($('#modal-create-user .create-user-skin #clientSideError').length > 0) {
        $('#modal-create-user .create-user-skin #clientSideError').attr('id', 'clientSideErrors')
    }
}

function fullModelOnClose() {
    $('.summary-area > #clientSideError').attr('id', 'clientSideErrors')
    $('#modal-create-user .create-user-skin #clientSideErrors').attr('id', 'clientSideError')
    if (typeof (cG7) !== 'undefined' && typeof (cm_ClientID) !== 'undefined' && typeof (cmPageId) !== 'undefined') {
        cG7.cM0[cm_ClientID] = cmPageId
    }
}

function loadmodallayer() {
    var subUserModalContentModuleCreateUserSkinObj = {
        CONTEXT: '.modal-content-vipaa-module .create-user-skin'
    }
    var options = {
        size: 'large',
        width: '750',
        buttons: '',
        onOpen: fullModelOnOpen,
        onClose: fullModelOnClose
    }
    $('#modal-create-user').boaFlexModal(options)
    $('#modal-create-user-modalClose').click(function () {
        if (typeof (cG7) !== 'undefined' && typeof (cm_ClientID) !== 'undefined' && typeof (cmPageId) !== 'undefined') {
            cG7.cM0[cm_ClientID] = cmPageId
        }
    })
    $('.modal-content-vipaa-module .create-user-skin .create-user-form').find('input[type="text"]').val('')
    $('.modal-content-vipaa-module .create-user-skin .create-user-form').find('input[type="password"]').val('')
    $('.modal-content-vipaa-module .create-user-skin .create-user-form').find('input[type="checkbox"]').val('')
    $('.modal-content-vipaa-module .create-user-skin label').removeClass('field-level-error')
    $('.modal-content-vipaa-module .create-user-skin #clientSideErrors').css('display', 'none')
    $('.modal-content-vipaa-module .create-user-skin #validationError').addClass('hide')
    $('.modal-content-vipaa-module .create-user-skin #duplicateOID').addClass('hide')
    $('.modal-content-vipaa-module .create-user-skin #PWDsameasOID').addClass('hide')
    $('.modal-content-vipaa-module .create-user-skin #backendFailure').addClass('hide')
    if ($('.modal-content-vipaa-module .create-user-skin .required').is('[disabled]')) {
        $('.modal-content-vipaa-module .create-user-skin .required').removeAttr('disabled')
    }
    if ($('.modal-content-vipaa-module .create-user-skin .btn-bofa').hasClass('btn-bofa-inactive btn-disabled')) {
        $('.modal-content-vipaa-module .create-user-skin .btn-bofa').removeClass('btn-bofa-inactive btn-disabled').addClass('btn-bofa-blue')
    }
    $('.field-matcher-tooltip,.format-checker-tooltip').css('display', 'none')
    $('#chkCopyAcctAccess', subUserModalContentModuleCreateUserSkinObj.CONTEXT).attr('checked', false)
    $('.modal-content-vipaa-module .create-user-skin .divSelectUser').hide()
    if (typeof (cmCreatePageviewTag) === 'function' && typeof cmSessionID !== 'undefined') {
        cmCreatePageviewTag('smbus:tool:OLBs:Service;user-management-add-new-user', null, null, 'smbus:tool:OLBs:Service', false, false, null, false, false, null, null, null, null, cmSessionID, null, null, null, null, null, null, null)
    }
    moduleLoad = true
}

function addCreateUserFormatError(context) {
    $errorLabel = $(context).prev('label')
    if (!$errorLabel.hasClass('field-error')) {
        $errorLabel.addClass('field-error')
        if ($errorLabel.find('span.ada-hidden').length === 0) {
            var errorLabelText = '<span class="ada-hidden">&nbsp; Error in this field</span>'
            $errorLabel.append(errorLabelText)
        }
    }
}

function removeCreateUserFormatError(context) {
    $errorLabel = $(context).prev('label')
    if ($errorLabel.hasClass('field-error')) {
        $errorLabel.removeClass('field-error').find('span.ada-hidden').remove()
    }
}

function callCoremetricsForCreateUserLib() {
    var errorCodes = ''
    var errorMessage = ''
    var errorMsg = ''
    var errorCnt = 1
    if ($('.modal-content-vipaa-module .create-user-skin .error-message-box').length > 0) {
        if (typeof (cmCreatePageviewTag) === 'function' && typeof cmSessionID !== 'undefined') {
            cmCreatePageviewTag('smbus:tool:OLBs:Service;user-management-add-new-user-error', null, null, 'smbus:tool:OLBs:Service', false, false, null, false, false, null, null, null, null, cmSessionID, null, null, null, null, null, null, null)
        }
        errorMessage = $('.modal-content-vipaa-module .create-user-skin .error-message-box li:visible')
        for (var errorMsgsCnt = 0; errorMsgsCnt < errorMessage.length; errorMsgsCnt++) {
            errorMsg = errorMessage[errorMsgsCnt].innerHTML
            if (typeof (cmCreateCustomError) === 'function') {
                cmCreateCustomError('smbus:tool:OLBs:Service;user-management-add-new-user-error', null, null, null, 'OLBS_' + errorCnt, 'smbus:tool:OLBs:Service', errorMsg)
            }
        }
    }
    $('label.field-level-error').each(function () {
        errorMsg = $(this).clone().children().remove().end().text()
        if (typeof (cmCreateCustomError) === 'function') {
            cmCreateCustomError('smbus:tool:OLBs:Service;user-management-add-new-user-error', null, null, null, 'OLBS_' + errorCnt, 'smbus:tool:OLBs:Service', 'Error in ' + errorMsg + ' field')
        }
        errorCnt++
    })
}

function encryptSensitive(data) {
    return Crypto.AES.encrypt(data, Crypto.charenc.UTF8.stringToBytes(privateKey), {
        mode: new Crypto.mode.ECB(Crypto.pad.NoPadding)
    })
}

var modalContentVipaaDeleteSkin = {
    CONTEXT: '.modal-content-vipaa-module .delete-user-skin'
}
$(document).ready(function () {
    var modalContainer = $('#modal-delete-user')
    if ($(modalContentVipaaDeleteSkin.CONTEXT).length > 0) {
        var csrfTokenHidden = $('input[id^=\'csrfTokenHidden\']', $('#frmDeleteSubUserForm')).val()
        var baseUrl = '/login/sub-user/sm/deleteSubUser.go?deleteIndex='
        var postUrl = '',
            index = ''
        $('#cancel-enrollment-confirm', modalContainer).click(function () {
            $('#modal-delete-user').dialog('close')
            $.ajax({
                url: postUrl,
                type: 'POST',
                data: {
                    csrfTokenHidden: csrfTokenHidden
                },
                success: function (data) {
                    if (data != null && data != 'undefined' && data != '') {
                        if (data.toUpperCase() == 'DELETE_SUCCESS' || data.toUpperCase() == 'DELETE_ERROR') {
                            $('.modal-delete-user').addClass('hide')
                            window.location = '/login/sub-user/sm/subusersManagement.go?updateStatus=' + data
                        }
                    }
                }
            })
        })
        $('#back-to-enrollment', modalContainer).click(function () {
            $('#modal-delete-user').dialog('close')
            $.post('/login/sub-user/sm/sbUserEventLog.go?Action=Delete&deleteIndex=' + index)
            if (typeof (cG7) !== 'undefined' && typeof (cm_ClientID) !== 'undefined' && typeof (cmPageId) !== 'undefined') {
                cG7.cM0[cm_ClientID] = cmPageId
            }
        })
        $('body').delegate('[id^=\'deleteUserModalSkinLink\']', 'click', function () {
            currentId = $(this).attr('id')
            index = currentId.slice(24)
            postUrl = baseUrl + index
            var options = {
                skin: 'modal-flex',
                width: 480,
                onOpen: function () {
                    if ($('#modal-delete-user-modalClose').length > 0) {
                        $('#modal-delete-user-modalClose>.ada-hidden').text(' layer: Are you sure you want to delete this user?')
                    }
                }
            }
            $('#modal-delete-user-modalClose').click(function () {
                if (typeof (cG7) !== 'undefined' && typeof (cm_ClientID) !== 'undefined' && typeof (cmPageId) !== 'undefined') {
                    cG7.cM0[cm_ClientID] = cmPageId
                }
            })
            $('#modal-delete-user').boaFlexModal(options)
            if (typeof (cmCreatePageviewTag) === 'function' && typeof cmSessionID !== 'undefined') {
                cmCreatePageviewTag('smbus:tool:OLBs:Service;user-management-delete-user', null, null, 'smbus:tool:OLBs:Service', false, false, null, false, false, null, null, null, null, cmSessionID, null, null, null, null, null, null, null)
            }
        })
    }
})
var modalskwContainerID = 'skwContainer'
$(document).ready(function () {
    if ($('.modal-content-vipaa-module .ita-skin').length > 0) {
        $('.ita-modal-content .modal-close-button').focus()
        $.fn.center = function () {
            this.css('top', Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + $(window).scrollTop()) + 'px')
            this.css('left', Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) + $(window).scrollLeft()) + 'px')
            return this
        }
        if ($('#olbModalLogin').is(':checked')) {
            $('.prospect-overlay').removeClass('hide')
            $('.modal-content-vipaa-module .ita-skin').center()
            $('.modal-content-vipaa-module .ita-skin').removeClass('hide')
            $('.ita-modal-content .modal-close-button').focus()
        }
        $('#olbModalLogin').click(function () {
            if ($('#boaFormHelp').css('display') == 'block') {
                return false
            }
            if ($('#olbModalLogin').is(':checked')) {
                $('.prospect-overlay').removeClass('hide')
                $('.modal-content-vipaa-module .ita-skin').center()
                $('.modal-content-vipaa-module .ita-skin').removeClass('hide')
                $('.ita-modal-content .modal-close-button').focus()
            }
        })
        $(document.body).on('keydown', '[name=close-prospect-modal]', function (e) {
            if ($('this:focus') && (e.which == 9)) {
                e.preventDefault()
                $('.ita-modal-content .modal-close-button').focus()
            }
        })
        $(document.body).on('click', '.close-ita-modal', function (event) {
            event.preventDefault()
            $('.prospect-overlay,.modal-content-vipaa-module .ita-skin').addClass('hide')
            $('#olbModalLogin').prop('checked', false)
            $('#olbModalLogin').focus()
        })
        if ($('#skipCardTypeSelection').length <= 0) {
            setupModalValidation()
        }
        if ($('.prospect-overlay').length <= 0) {
            $('body').append('<div class="ui-widget-overlay ui-front prospect-overlay hide"></div>')
        }
    }
})

function setupModalValidation() {
    if ($('.modal-content-vipaa-module .ita-skin input:radio[name=creditCardType]').length == 0) {
        $(document.body).on('click', '.skw-btn-container a', function (event) {
            if ($('#modal-card-type option:selected').text() == 'Select' || $('#modal-card-type option:selected').text() == 'Seleccionar') {
                $('.modal-content-vipaa-module .ita-skin legend').attr('aria-live', 'rude').addClass('field-level-error')
                return false
            } else {
                $('.modal-content-vipaa-module .ita-skin legend').attr('aria-live', '').removeClass('field-level-error')
            }
        })
        $(document.body).on('keypress', '#skw-enter-online-id, #tlpvt-skw-enter-pass', function (event) {
            if (event.keyCode == 13) {
                if ($('#modal-card-type option:selected').text() == 'Select' || $('#modal-card-type option:selected').text() == 'Seleccionar') {
                    $('.modal-content-vipaa-module .ita-skin legend').attr('aria-live', 'rude').addClass('field-level-error')
                    return false
                } else {
                    $('.modal-content-vipaa-module .ita-skin legend').attr('aria-live', '').removeClass('field-level-error')
                }
            }
        })
    } else {
        $(document.body).on('click', '.skw-btn-container a', function (event) {
            if ($('.modal-content-vipaa-module .ita-skin input:radio[name=creditCardType]:checked').length > 0) {
                $('.modal-content-vipaa-module .ita-skin legend').attr('aria-live', '').removeClass('field-level-error')
            } else {
                $('.modal-content-vipaa-module .ita-skin legend').attr('aria-live', 'rude').addClass('field-level-error')
                return false
            }
        })
        $(document.body).on('keypress', '#skw-enter-online-id, #tlpvt-skw-enter-pass', function (event) {
            if (event.keyCode == 13) {
                if ($('.modal-content-vipaa-module .ita-skin input:radio[name=creditCardType]:checked').length > 0) {
                    $('.modal-content-vipaa-module .ita-skin legend').attr('aria-live', '').removeClass('field-level-error')
                } else {
                    $('.modal-content-vipaa-module .ita-skin legend').attr('aria-live', 'rude').addClass('field-level-error')
                    return false
                }
            }
        })
    }
}

var vendorURL
$(document).ready(function () {
    if ($('.modal-content-bdf-module .safepass-remove-skin').length > 0) {
        var $empSettingsFlag = false,
            $form = '',
            $linkClicked = '',
            $unsubscribeMobileNo = ''
        $spIndexToAct = ''
        $('a.remove-sp-modal,a.unsubscribe-sp-modal').click(function () {
            $linkClicked = $(this).hasClass('remove-sp-modal')
            $unsubscribeMobileNo = $(this).parent().find('[name=mobileNbr]').val()
            if ($linkClicked) {
                var options = {
                    size: 'medium',
                    width: 706
                }
            } else {
                var options = {
                    skin: 'modal-flex',
                    width: 706,
                    onClose: resetSafePassModal
                }
            }
            $('.btnCloseTestMob', AddSafePass.CONTEXT).click()
            $('.btnActivateCancel', AddSafePass.CONTEXT).click()
            $('.safepass-vipaa-module .settings-skin').addClass('hide')
            var $this = $(this),
                $parentContainer = ''
            $empSettingsFlag = $this.hasClass('emp-settings-device')
            if ($empSettingsFlag) {
                $form = $this.closest('form')
                if ($form == '') {
                    $form = $('<form>')
                }
                $form.attr('action', 'removeSBOSafePassDevice.go')
                $parentContainer = $this.closest('.remove-device')
                document.activeElement.blur()
            } else {
                $form = $this.closest('div.safepass-container').find('form:last')
                if ($form == '') {
                    $form = $('<form>')
                }
                $form.attr('action', 'removeSafepassCard.go')
                $parentContainer = $this.closest('.place-request')
                $spIndexToAct = $($form).find('input[name="indexToActOn"]').val()
            }
            var $deviceType = $parentContainer.find('.typeof-device').val()
            if ($linkClicked) {
                $('#safepassMobile,#safepassCard').addClass('hide')
            } else {
                $('#divUnsubscribeMobile,#divSuccessUnsubscribe').addClass('hide')
            }
            if ($deviceType == 'MD' && $linkClicked) {
                var $safepassMobile = $('#safepassMobile')
                $('#rspMobileNum', $safepassMobile).text($parentContainer.find('.mobile-number').val())
                $safepassMobile.removeClass('hide')
            } else {
                if ($deviceType == 'MD' && uciPilot) {
                    var $safepassMobile = $('#divUnsubscribeMobile')
                    var $successMobile = $('#divSuccessUnsubscribe')
                    var $mbnbr = $parentContainer.find('.mobile-number').val()
                    $mbnbr = $mbnbr.substr($mbnbr.length - 4) + ' '
                    $('#rspPilotMobileNum', $successMobile).text($mbnbr)
                    $safepassMobile.removeClass('hide')
                } else {
                    var $safepassCard = $('#safepassCard')
                    $('#rspCardNum', $safepassCard).text($parentContainer.find('.mobile-number').val())
                    $safepassCard.removeClass('hide')
                }
            }
            if ($linkClicked) {
                var $modalContainer = $('#remove-sp-modal')
                $modalContainer.boaFlexModal(options)
                $modalContainer.dialog({
                    closeOnEscape: false
                })
                $('#btn-dont-remove-sp', $modalContainer).click(function () {
                    $('#remove-sp-modal').dialog('close')
                })
                $('#btn-remove-sp').addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                $('#remove-sp-modal').removeClass('hide')
                $('#remove-sp-modal-ModalContainer .ui-dialog-titlebar-close').click(function () {
                    $('.safepass-vipaa-module .settings-skin').removeClass('hide')
                })
                $('.ui-widget-overlay').css('height', $(document).height())
                if (typeof VIPAAServer != 'undefined' && typeof spwPageName != 'undefined' && typeof showNonFlashWidget != 'undefined') {
                    if (typeof AddSafePass != 'undefined') {
                        AddSafePass.btnToEnable = $('#btn-remove-sp')
                    } else {
                        if (typeof ValidateMobile != 'undefined') {
                            ValidateMobile.btnToEnable = $('#btn-remove-sp')
                        }
                    }
                    $('#safePassWgtRemoveContainer').children().remove()
                    showNonFlashWidget(spwPageName, '', '-1', VIPAAServer, true, 'safePassWgtRemoveContainer')
                    if ($('#spw-progress-bar').length > 0) {
                        $('#spw-progress-bar').removeAttr('role').removeAttr('aria-live')
                    }
                }
            } else {
                var $modalContainer = $('#divUnsubscribeModalcontainer')
                $modalContainer.boaFlexModal(options)
                $modalContainer.dialog({
                    closeOnEscape: false
                })
                $('#btn-cancel-unsubscribe', $modalContainer).click(function () {
                    $('#divUnsubscribeModalcontainer').dialog('close')
                    $('.safepass-vipaa-module .settings-skin').removeClass('hide')
                    if (!$empSettingsFlag) {
                        $.post('removeBizEvent.go')
                    }
                })
                $('#btn-continue-unsubscribe').addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                if ($('#btn-continue-unsubscribe span.ada-hidden').text() == '' || $('#btn-continue-unsubscribe span.ada-hidden').text() == undefined) {
                    var elemts = $(document.createElement('span'))
                    elemts.attr('class', 'ada-hidden').text(' Unavailable: Button will be enabled once your information is verified. ')
                    $('#btn-continue-unsubscribe').append(elemts)
                }
                $('#divUnsubscribeModalcontainer').removeClass('hide')
                $('#divUnsubscribeModalcontainer-ModalContainer .ui-dialog-titlebar-close').click(function () {
                    $('.safepass-vipaa-module .settings-skin').removeClass('hide')
                    window.location.href = 'cancelUnsubscribe.go'
                })
                $('.ui-widget-overlay').css('height', $(document).height())
                if (typeof VIPAAServer != 'undefined' && typeof spwPageName != 'undefined' && typeof showNonFlashWidget != 'undefined') {
                    if (typeof AddSafePass != 'undefined') {
                        AddSafePass.btnToEnable = $('#btn-continue-unsubscribe')
                    } else {
                        if (typeof ValidateMobile != 'undefined') {
                            ValidateMobile.btnToEnable = $('#btn-continue-unsubscribe')
                        }
                    }
                    $('#safePassWgtUnsubscribeContainer').children().remove()
                    showNonFlashWidget(spwPageName, '', '-1', VIPAAServer, true, 'safePassWgtUnsubscribeContainer')
                    if ($('#spw-progress-bar').length > 0) {
                        $('#spw-progress-bar').removeAttr('role').removeAttr('aria-live')
                    }
                }
            }
            if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                if (typeof AddSafePass != 'undefined') {
                    AddSafePass.fn.doSPWidgetCallback('bypassingwidget')
                } else {
                    if (typeof ValidateMobile != 'undefined') {
                        ValidateMobile.fn.doSPWidgetCallback('bypassingwidget')
                    }
                }
            }
            if ($linkClicked) {
                $('#btn-remove-sp').click(function (event) {
                    if ($(this).hasClass('btn-disabled')) {
                        event.preventDefault()
                    } else {
                        if (typeof AddSafePass != 'undefined') {
                            $('<input>').attr({
                                type: 'hidden',
                                id: 'artifact',
                                name: 'artifact',
                                value: AddSafePass.btnToEnable.data('artifactVal')
                            }).appendTo($form)
                        } else {
                            if (typeof ValidateMobile != 'undefined') {
                                $('<input>').attr({
                                    type: 'hidden',
                                    id: 'artifact',
                                    name: 'artifact',
                                    value: ValidateMobile.btnToEnable.data('artifactVal')
                                }).appendTo($form)
                            }
                        }
                        $form.submit()
                    }
                })
                $('#btn-dont-remove-sp').click(function () {
                    $('.safepass-vipaa-module .settings-skin').removeClass('hide')
                    if (!$empSettingsFlag) {
                        $.post('removeBizEvent.go')
                    }
                })
            } else {
                $('#btn-continue-unsubscribe').click(function (event) {
                    if ($(this).hasClass('btn-disabled')) {
                        event.preventDefault()
                    } else {
                        $(this).addClass('btn-disabled').removeAttr('href')
                        $spArtifact = ''
                        if (typeof AddSafePass != 'undefined') {
                            $spArtifact = AddSafePass.btnToEnable.data('artifactVal')
                        } else {
                            if (typeof ValidateMobile != 'undefined') {
                                $spArtifact = ValidateMobile.btnToEnable.data('artifactVal')
                            }
                        }
                        $.ajax({
                            url: 'safePassUnsubscribe.go',
                            data: {
                                phoneNumber: $unsubscribeMobileNo,
                                artifact: $spArtifact
                            },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {
                                displayModalErrors('<p class=\'title aspErrMsg\'>' + spTechnicalErrmsg + '</p>')
                            },
                            success: function (data) {
                                data = $.parseJSON(data)
                                if (null != data.result && data.result == 'success') {
                                    $('#divUnsubscribeMobile').hide()
                                    $('#divSuccessUnsubscribe').show()
                                } else {
                                    displayModalErrors('<p class=\'title aspErrMsg\'>' + $updateErrorMsg + '</p>')
                                }
                            }
                        })
                    }
                })
                $('#btn-success-close').click(function () {
                    window.location.href = 'closeUnsubscribe.go'
                    $(this).addClass('btn-disabled').removeAttr('href')
                })
            }

            function resetSafePassModal() {
                $('#divUnsubscribeMobile').show()
                $('#divSuccessUnsubscribe').hide()
                if ($('.error-message', '#ModalMessageErrors').length > 0) {
                    $('#ModalMessageErrors').hide()
                }
            }

            function displayModalErrors(errorContent) {
                var $errorMsg = $('.error-message', '#ModalMessageErrors')
                $('.messaging-module').addClass('hide')
                if ($errorMsg.length > 0 && errorContent != '') {
                    $errorMsg.find('ul').remove()
                    $errorMsg.find('p.aspErrMsg').remove()
                    $errorMsg.append(errorContent)
                    $('#ModalMessageErrors').removeClass('hide').attr('aria-live', 'rude').attr('tabindex', '-1').focus()
                }
            }
        })
    }
});
(function ($) {
    $(document).ready(function () {
        if ($('.online-id-vipaa-module .enter-skin, .online-id-vipaa-module .enter-transcc-skin').length > 0) {
            window.boa = window.boa || {}
            window.boa.fingerprint = window.boa.fingerprint || {}
            // TODO check this init
            var ns = window.boa.fingerprint
            ns.config = {
                collector: {
                    src: ccPath || '/login/sign-in/cc.go',
                    async: true,
                  // TODO will be used as cf_flags
                    flags: window.flagsToCollect || 155687923
                },
                formIdentifier: window.formIdentifier || '.collector-form-marker',
                inputname: '_ia',
                submitBtnSelector: window.__submitBtnSelector || 'a.btn-bofa-blue[name=enter-online-id-submit]'
            }
            ns.init = function () {
                window._cc = window._cc || []
                _cc.push(['bfdc',
                    [
                        3,
                        100,
                        15
                    ]])
                _cc.push(['ci',
                    {
                        sid: '0602497b-ac9e-40d3-88f0-6501ae64e714',
                        tid: '5678'
                    }
                ])
                _cc.push(['cf',
                    ns.config.collector.flags])
                _cc.push(['run',
                    ('https:' == document.location.protocol ? 'https://' : 'http://') + 'www.bankofamerica.com'])
                $('<script/>').attr(ns.config.collector).appendTo('head')
                $('<input/>').attr({
                    type: 'hidden',
                    name: ns.config.inputname,
                    id: ns.config.inputname + 'ID'
                }).appendTo(ns.config.formIdentifier)
            }
            // TODO _ia val here
            ns.prepareIAData = function (callback) {
                if (window._cc && window._cc.loaded === !0 && window.boa && window.boa.fingerprint && boa.fingerprint.config && boa.fingerprint.config.inputname) {
                    _cc.push(['cfp',
                        function (payload) {
                            $('#' + boa.fingerprint.config.inputname + 'ID').val(payload)
                            if (callback) {
                                callback(payload)
                            }
                        }
                    ])
                } else {
                    if (callback) {
                        callback()
                    }
                }
            }
            ns.init()
        }
    })
})(jQuery)
$(function () {
    if ($('.online-id-vipaa-module .enter-skin').length > 0) {
        var oidselect = $('select#online-id-select')
        var oidinput = $('input#enterID-input')
        var pcinput = $('input#tlpvt-passcode-input')
        $('.TL_NPI_Pass').after('<input type="hidden" name="_ib" id="_ib" value="" />')
        var detectorProps_1 = {
            oidkeypress: false,
            oidpaste: false,
            pckeypress: false,
            pcpaste: false,
            userAgent: window.navigator.userAgent,
            pwMan: true
        }

        function updateResult(el) {
            if (el === 'init') {
                detectorProps_1.pwMan = true
            } else {
                detectorProps_1.pwMan = false
                detectorProps_1[el] = true
            }
            $('input#_ib').val(JSON.stringify(detectorProps_1))
        }

        updateResult('init')
        if (!oidselect.length) {
            oidinput.on('keypress', function (e) {
                updateResult('oidkeypress')
            })
            oidinput.on('paste', function (e) {
                updateResult('oidpaste')
            })
        }
        pcinput.on('keypress', function (e) {
            updateResult('pckeypress')
        })
        pcinput.on('paste', function (e) {
            updateResult('pcpaste')
        })
    }
})
var boa = window.boa || {}
var FPInitAuthResponse = ''
boa.phoenix = (function () {
    return {
        addOnlineID: function () {
            $('#select-id-div').hide()
            $('#enter-id-div').show()
            $('#another-online-id-flag').val('Y')
            $('#enterID-known-input').focus()
            $('#tlpvt-passcode-input').attr('disabled', 'disabled')
        }
    }
})()
if ($.fn.off) {
    $(function () {
        $('a[name="enter-online-id-submit"]').off('click.processFormSubmission').on('click.processFormSubmission', function () {
            var that = $(this)
            if (window.boa && window.boa.fingerprint && window.boa.fingerprint.prepareIAData) {
                boa.fingerprint.prepareIAData(function () {
                    if (window.boa.oidVipaaModule && window.boa.oidVipaaModule.formSubmit) {
                        window.boa.oidVipaaModule.formSubmit()
                    }
                })
            } else {
                setTimeout(function () {
                    if ($('input[name="_ia"]').val() === '') {
                        boa.fingerprint.prepareIAData(function () {
                            if (window.boa.oidVipaaModule && window.boa.oidVipaaModule.formSubmit) {
                                window.boa.oidVipaaModule.formSubmit()
                            }
                        })
                    } else {
                        if (window.boa.oidVipaaModule && window.boa.oidVipaaModule.formSubmit) {
                            window.boa.oidVipaaModule.formSubmit()
                        }
                    }
                }, 2000)
            }
        })
    })
}
window.boa.oidVipaaModule = window.boa.oidVipaaModule || {}
window.boa.oidVipaaModule.formSubmit = function () {
    var that = $('a[name="enter-online-id-submit"]')
    if (that.parents('.simple-form').attr('id') === 'EnterOnlineIDForm') {
        enterOnlineIDFormSubmit()
    } else {
        if (that.parents('.simple-form').attr('id') === 'EnterOnlineIDKnownForm') {
            $('#EnterOnlineIDKnownForm').submit()
        }
    }
}

function enterOnlineIDFormSubmit() {
    $('#EnterOnlineIDForm').submit()
    if ($('label[for="enterID-input"]').hasClass('field-level-error')) {
        $('label[for="enterID-input"]').prepend('<span class="ada-hidden">Error,</span>')
    }
}

$(document).ready(function () {
    if ($('.online-id-vipaa-module .enter-skin').length > 0) {
        function makeCheckPolicy(data) {
            var initResponse = data
            var fidoClient = window.navigator.fido.uaf
            var uafAuthMessage = new Object()
            uafAuthMessage.uafProtocolMessage = JSON.stringify(initResponse)
            FPInitAuthResponse = uafAuthMessage
            fidoClient.checkPolicy(uafAuthMessage, cpErrorHandler)
        }

        function cpErrorHandler(responseCode) {
            if (responseCode === 0) {
            } else {
            }
        }

        function fpWidgetLoad() {
            var locale = ''
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                locale = 'en'
            } else {
                locale = 'es'
            }
            var datainit = {
                widgetName: 'secure-fingerprint-auth-widget',
                widgetVersion: '1.0.0',
                ContainerId: 'fpContainer',
                widgetEventName: 'AH_FP_INITIALIZE',
                language: locale,
                payload: {
                    isModal: 'true',
                    successCallback: function (responseToken) {
                        var theForm = $('#EnterOnlineIDKnownForm input, #EnterOnlineIDKnownForm select')
                        var dupFPForm = $('#IntelFPForm')
                        theForm.clone(true).appendTo(dupFPForm)
                        $('#IntelFPForm #selectedOnlineId').val($('#EnterOnlineIDKnownForm #online-id-select').val())
                        if (responseToken) {
                            $('#IntelFPForm #eligibilityToken').val(responseToken)
                        }
                        $('#IntelFPForm').submit()
                    },
                    failureCallback: function () {
                        $('#fpContainer').addClass('hidden')
                        $('#EnterOnlineIDKnownForm').removeClass('hidden')
                        $('#EnterOnlineIDForm').removeClass('hidden')
                    },
                    userInfo: {
                        onlineId: $('select#online-id-select option:selected').text(),
                        onlineIdIndex: $('select#online-id-select option:selected').val()
                    },
                    initAuthResponse: FPInitAuthResponse,
                    usecase: 'FP',
                    lob: 'FP',
                    client: 'FP',
                    clientAIT: ''
                }
            }
            var config = datainit
            var fpCustomEvent = new CustomEvent('LOAD_SPARTA_WIDGET', {
                detail: {
                    config: config
                }
            })
            document.dispatchEvent(fpCustomEvent)
            window.sparta.widgetLoader.sub('SPARTA_WIDGET_READY.spartaWidgetUtility', function (event) {
                $('#EnterOnlineIDForm').addClass('hidden')
                $('#EnterOnlineIDKnownForm').addClass('hidden')
                $('#fpContainer').removeClass('hidden')
            })
        }

        function InitiateFp(oid) {
            if (!oid) {
                var inputjson = {
                    filterRules: [
                        {
                            name: 'USECASE',
                            value: 'INTELFP'
                        },
                        {
                            name: 'selectedOnlineIdIndex',
                            value: '0'
                        }
                    ]
                }
            } else {
                var inputjson = {
                    filterRules: [
                        {
                            name: 'USECASE',
                            value: 'INTELFP'
                        },
                        {
                            name: 'selectedOnlineIdIndex',
                            value: oid
                        }
                    ]
                }
            }
            $.ajax({
                type: 'POST',
                url: '/login/rest/sas/uafInitiateAuthentication',
                data: JSON.stringify(inputjson),
                crossDomain: true,
                cache: false,
                timeout: 60000,
                processData: false,
                xhrFields: {
                    withCredentials: true
                },
                dataType: 'json',
                headers: {
                    'content-type': 'application/json',
                    clientAIT: '41339',
                    accept: 'application/json',
                    'cache-control': 'no-cache'
                },
                error: function (XMLHTTPRequest, textStatus, errorThrown) {
                },
                success: function (data) {
                },
                complete: function (XMLHTTPRequest, textStatus) {
                }
            })
        }

        var aaIDString = ''
        if (window.navigator && window.navigator.fido && window.navigator.fido.uaf && window.navigator.fido.uaf.discover !== 'undefined') {
            window.navigator.fido.uaf.discover(function (data) {
                if (typeof data !== 'undefined' && typeof data.availableAuthenticators !== 'undefined' && data.availableAuthenticators.length > 0) {
                    for (i = 0; i < data.availableAuthenticators.length; i++) {
                        if (aaIDString !== '') {
                            aaIDString = aaIDString + '|' + data.availableAuthenticators[i].aaid
                        } else {
                            aaIDString = aaIDString + data.availableAuthenticators[i].aaid
                        }
                    }
                    aaIDString = aaIDString.replace(/[#]/gi, '@')
                }
                $('<input/>').attr({
                    type: 'hidden',
                    name: 'uafAuthEnabled',
                    value: aaIDString
                }).appendTo($('#EnterOnlineIDForm').length > 0 ? '#EnterOnlineIDForm' : '#EnterOnlineIDKnownForm')
                if (aaIDString.length > 0) {
                    if (typeof InitiateFp === 'function') {
                        if ($('#EnterOnlineIDForm').length === 0) {
                            if (isFPEnabled && isFPEnabled === true) {
                            }
                        }
                    }
                }
            }, function () {
                $('<input/>').attr({
                    type: 'hidden',
                    name: 'uafAuthEnabled',
                    value: 'fpNotSupported'
                }).appendTo($('#EnterOnlineIDForm').length > 0 ? '#EnterOnlineIDForm' : '#EnterOnlineIDKnownForm')
            })
        }
        jQuery('.messaging-vipaa-module:eq(1)').addClass('vipaa-pwd').prepend(jQuery('<div class="ico-bg"></div>'))
        jQuery('.messaging-vipaa-module.vipaa-pwd .ico-bg').height(jQuery('.messaging-vipaa-module.vipaa-pwd').outerHeight() - 2)
        $('#online-id-select').change(function (event) {
            if ($(this).val() === 'addID') {
                boa.phoenix.addOnlineID()
                return false
            } else {
                if (aaIDString.length > 0) {
                }
            }
        })
        var getCookie = function (cName) {
            var value = '; ' + document.cookie
            var parts = value.split('; ' + cName + '=')
            if (parts.length == 2) {
                return parts.pop().split(';').shift()
            }
        }
        var gsID = getCookie('retainGsId')
        if (gsID) {
            $('#contGsid').val(gsID)
        }
        $('#enterID-input, #enterID-known-input, #online-id-select, #tlpvt-passcode-input').bind('keypress', function (e) {
            if (e.keyCode == 13 && $('a[name="enter-online-id-submit"]').hasClass('btn-bofa-blue')) {
                if (e.target.id == 'enterID-known-input' || (e.target.id == 'tlpvt-passcode-input' && $('#EnterOnlineIDKnownForm').length)) {
                    $('#EnterOnlineIDKnownForm').submit()
                } else {
                    if (e.target.id == 'enterID-input' || (e.target.id == 'tlpvt-passcode-input' && $('#EnterOnlineIDForm').length)) {
                        $('#EnterOnlineIDForm').submit()
                    } else {
                        if (e.target.id == 'online-id-select' && $('#online-id-select').val() === 'addID') {
                            boa.phoenix.addOnlineID()
                        } else {
                            $('#EnterOnlineIDKnownForm').submit()
                        }
                    }
                }
            } else {
                if ((e.target.id == 'enterID-input' && $('#enterID-input').val().length > 5) || (e.target.id == 'enterID-known-input' && $('#enterID-known-input').val().length >= 5)) {
                    $('#tlpvt-passcode-input').removeAttr('disabled')
                }
            }
        })
        $('#enterID-input,#enterID-known-input').on('paste', function (e) {
            setTimeout(function () {
                if ((e.target.id == 'enterID-input' && $('#enterID-input').val().length > 5) || (e.target.id == 'enterID-known-input' && $('#enterID-known-input').val().length > 5)) {
                    $('#tlpvt-passcode-input').removeAttr('disabled')
                }
            }, 100)
        })
        $('#enterID-input').bind('keyup', function (e) {
            if (e.target.id == 'enterID-input' && e.keyCode !== 13) {
                if ($('#enterID-input').val().length < 6) {
                    $('#tlpvt-passcode-input').attr('disabled', 'disabled').val('')
                    $('label[for="tlpvt-passcode-input"] span').text(' is unavailable. Please enter atleast 6 characters of online id to enable Passcode')
                    $('label[for="enterID-input"] span').text(' Must be at least 6 characters long')
                } else {
                    $('#tlpvt-passcode-input').removeAttr('disabled')
                    $('label[for="tlpvt-passcode-input"] span').text('')
                }
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#EnterOnlineIDForm').validate({
                messages: {
                    'enterID-input': {
                        required: 'Please enter all the required information to proceed.',
                        minlength: 'Please enter all the required information to proceed.'
                    },
                    'tlpvt-passcode-input': {
                        required: 'Please enter all the required information to proceed.'
                    }
                },
                rules: {
                    'enterID-input': {
                        required: true,
                        minlength: 6
                    },
                    'tlpvt-passcode-input': {
                        required: true
                    }
                },

                // TODO SUBMIT AUTH FORM
                submitHandler: function (form) {
                    if ($('a.btn-bofa-blue span').hasClass('btn-bofa-blue-lock')) {
                        $('a.btn-bofa-blue span').removeClass('btn-bofa-blue-lock').addClass('btn-bofa-disabled-lock')
                    }
                    if (typeof (input) !== 'undefined') {
                        input.parse_data('f_variable')
                    }
                    $('#passcodeVal').val($('#tlpvt-passcode-input').val())
                    $('#tlpvt-passcode-input').val('')
                    $('#onlineIdVal').val($('#enterID-input').val())
                    $('#enterID-input').val('')
                    $('#enterID-input').removeAttr('name')
                    $('#tlpvt-passcode-input').removeAttr('name')
                    if (window.boa && window.boa.fingerprint && window.boa.fingerprint.prepareIAData) {
                        boa.fingerprint.prepareIAData(function () {
                            form.submit()
                        })
                    } else {
                        setTimeout(function () {
                            if ($('input[name="_ia"]').val() === '') {
                                boa.fingerprint.prepareIAData(function () {
                                    form.submit()
                                })
                            } else {
                                form.submit()
                            }
                        }, 2000)
                    }
                },
                includeFieldLabel: false
            })
            $('#EnterOnlineIDKnownForm').validate({
                messages: {
                    'enterID-known-input': {
                        required: 'Please enter all the required information to proceed.'
                    },
                    'tlpvt-passcode-input': {
                        required: 'Please enter all the required information to proceed.'
                    }
                },
                rules: {
                    'enterID-known-input': {
                        required: {
                            depends: function (element) {
                                return $('#enter-id-div').is(':visible')
                            }
                        }
                    },
                    'tlpvt-passcode-input': {
                        required: true
                    }
                },
                submitHandler: function (form) {
                    if (typeof (input) !== 'undefined') {
                        input.parse_data('f_variable')
                    }
                    if ($('a.btn-bofa-blue span').hasClass('btn-bofa-blue-lock')) {
                        $('a.btn-bofa-blue span').removeClass('btn-bofa-blue-lock').addClass('btn-bofa-disabled-lock')
                    }
                    $('#passcodeVal').val($('#tlpvt-passcode-input').val())
                    $('#tlpvt-passcode-input').val('')
                    if ($.trim($('#enterID-known-input').val()) !== '') {
                        $('#onlineIdVal').val($('#enterID-known-input').val())
                        $('#enterID-known-input').val('')
                        $('#enterID-known-input').removeAttr('name')
                    } else {
                        $('#selectedOnlineId').val($('#online-id-select').val())
                        $('#online-id-select').removeAttr('name')
                        $('#enterID-known-input').removeAttr('name')
                        $('#tlpvt-passcode-input').removeAttr('name')
                    }
                    if (window.boa && window.boa.fingerprint && window.boa.fingerprint.prepareIAData) {
                        boa.fingerprint.prepareIAData(function () {
                            form.submit()
                        })
                    } else {
                        setTimeout(function () {
                            if ($('input[name="_ia"]').val() === '') {
                                boa.fingerprint.prepareIAData(function () {
                                    form.submit()
                                })
                            } else {
                                form.submit()
                            }
                        }, 2000)
                    }
                },
                includeFieldLabel: false
            })
        } else {
            $('#EnterOnlineIDForm').validate({
                messages: {
                    'enterID-input': {
                        required: 'Por favor, indique toda la informaci&#243;n solicitada para continuar.',
                        minlength: 'Por favor, indique toda la informaci&#243;n solicitada para continuar.'
                    },
                    'tlpvt-passcode-input': {
                        required: 'Por favor, indique toda la informaci&#243;n solicitada para continuar.'
                    }
                },
                rules: {
                    'enterID-input': {
                        required: true,
                        minlength: 6
                    },
                    'tlpvt-passcode-input': {
                        required: true
                    }
                },
                submitHandler: function (form) {
                    if (typeof (input) !== 'undefined') {
                        input.parse_data('f_variable')
                    }
                    if ($('a.btn-bofa-blue span').hasClass('btn-bofa-blue-lock')) {
                        $('a.btn-bofa-blue span').removeClass('btn-bofa-blue-lock').addClass('btn-bofa-disabled-lock')
                    }
                    $('#passcodeVal').val($('#tlpvt-passcode-input').val())
                    $('#tlpvt-passcode-input').val('')
                    $('#onlineIdVal').val($('#enterID-input').val())
                    $('#enterID-input').val('')
                    $('#enterID-input').removeAttr('name')
                    $('#tlpvt-passcode-input').removeAttr('name')
                    if (window.boa && window.boa.fingerprint && window.boa.fingerprint.prepareIAData) {
                        boa.fingerprint.prepareIAData(function () {
                            form.submit()
                        })
                    } else {
                        setTimeout(function () {
                            if ($('input[name="_ia"]').val() === '') {
                                boa.fingerprint.prepareIAData(function () {
                                    form.submit()
                                })
                            } else {
                                form.submit()
                            }
                        }, 2000)
                    }
                },
                includeFieldLabel: false
            })
            $('#EnterOnlineIDKnownForm').validate({
                messages: {
                    'enterID-known-input': {
                        required: 'Por favor, indique toda la informaci&#243;n solicitada para continuar.'
                    },
                    'tlpvt-passcode-input': {
                        required: 'Por favor, indique toda la informaci&#243;n solicitada para continuar.'
                    }
                },
                rules: {
                    'enterID-known-input': {
                        required: {
                            depends: function (element) {
                                return $('#enter-id-div').is(':visible')
                            }
                        }
                    },
                    'tlpvt-passcode-input': {
                        required: true
                    }
                },
                submitHandler: function (form) {
                    if (typeof (input) !== 'undefined') {
                        input.parse_data('f_variable')
                    }
                    $('#passcodeVal').val($('#tlpvt-passcode-input').val())
                    $('#tlpvt-passcode-input').val('')
                    if ($.trim($('#enterID-known-input').val()) !== '') {
                        $('#onlineIdVal').val($('#enterID-known-input').val())
                        $('#enterID-known-input').val('')
                        $('#enterID-known-input').removeAttr('name')
                    } else {
                        $('#selectedOnlineId').val($('#online-id-select').val())
                        $('#online-id-select').removeAttr('name')
                        $('#enterID-known-input').removeAttr('name')
                        $('#tlpvt-passcode-input').removeAttr('name')
                    }
                    if (window.boa && window.boa.fingerprint && window.boa.fingerprint.prepareIAData) {
                        boa.fingerprint.prepareIAData(function () {
                            form.submit()
                        })
                    } else {
                        setTimeout(function () {
                            if ($('input[name="_ia"]').val() === '') {
                                boa.fingerprint.prepareIAData(function () {
                                    form.submit()
                                })
                            } else {
                                form.submit()
                            }
                        }, 2000)
                    }
                },
                includeFieldLabel: false
            })
        }
        if ($('#enterID-input').is(':visible') && !$('div.messaging-module div.error-skin').is(':visible')) {
            $('#enterID-input').focus()
        }
        $('.online-id-vipaa-module .enter-skin a.btn-disabled').removeClass('btn-disabled').addClass('btn-bofa-blue')
        $('#online-id-select').removeAttr('disabled')
        post_deviceprint()
        try {
            var u2InputID = 'u2supportID'
            $('<input/>').attr({
                type: 'hidden',
                name: '_u2support',
                id: u2InputID
            }).appendTo('#EnterOnlineIDKnownForm,#EnterOnlineIDForm')
            if (typeof chrome != 'undefined' && chrome.runtime) {
                var EXTENSION_ID = 'kmendfapggjehodndflmmgagdbamhnfd',
                    u2InputID = 'u2supportID'
                chrome.runtime.sendMessage(EXTENSION_ID, {}, function (r) {
                    if (r) {
                        $('#' + u2InputID).val('2')
                    } else {
                        $('#' + u2InputID).val('1')
                    }
                })
            } else {
                $('#' + u2InputID).val('-1')
            }
        } catch (e) {
            console.log('Failed. ' + e)
        }
    }
})
var ppwNonBlankFieldCount = 0
var ppwNextButtonADAText = ' button will be enabled when all the required fields are filled with valid entries'
var ppwSpanishErrorText = ' Error in '
var currentErrorElement
$(document).ready(function () {
    if ($('.prospect-vipaa-module .ita-skin').length > 0) {
        ppwAttachSubmitHandlers()
        validatePPWForm()
        if ($('html').attr('lang').toLowerCase() != 'en-us') {
            ppwNextButtonADAText = ' bot&#243;n se activa cuando todos los campos obligatorios tienen datos v&#225;lidos '
            ppwSpanishErrorText = ' Error en '
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            if ($.trim($('#txtAddress1').val()) === '') {
                $('#txtAddress1').val('(No P.O. boxes, please)')
            }
            if ($.trim($('#txtAddress2').val()) === '') {
                $('#txtAddress2').val('(Apartment/suite number)')
            }
            if ($.trim($('#txtDOB').val()) === '') {
                $('#txtDOB').val('MM/DD/YYYY')
            }
        } else {
            if ($.trim($('#txtAddress1').val()) === '') {
                $('#txtAddress1').val('(Apartados postales no, por favor)')
            }
            if ($.trim($('#txtAddress2').val()) === '') {
                $('#txtAddress2').val('(NÃºmero de apartamento/oficina)')
            }
            if ($.trim($('#txtDOB').val()) === '') {
                $('#txtDOB').val('MM/DD/AAAA')
            }
        }
        $('#txtAddress1').addClass('hint-text').on('focus blur', function (event) {
            if (event.type == 'focusin' && ($.trim($(this).val()) == '(No P.O. boxes, please)' || $.trim($(this).val()) == '(Apartados postales no, por favor)')) {
                $(this).removeClass('hint-text')
                $(this).val('')
            } else {
                if ($(this).val() == '') {
                    $('html').attr('lang').toLowerCase() == 'en-us' ? $(this).val('(No P.O. boxes, please)') : $(this).val('(Apartados postales no, por favor)')
                    $(this).addClass('hint-text')
                }
            }
        })
        $('#txtAddress2').addClass('hint-text').on('focus blur', function (event) {
            if (event.type == 'focusin' && ($.trim($(this).val()) == '(Apartment/suite number)' || $.trim($(this).val()) == '(NÃºmero de apartamento/oficina)')) {
                $(this).removeClass('hint-text')
                $(this).val('')
            } else {
                if ($(this).val() == '') {
                    $('html').attr('lang').toLowerCase() == 'en-us' ? $(this).val('(Apartment/suite number)') : $(this).val('(NÃºmero de apartamento/oficina)')
                    $(this).addClass('hint-text')
                }
            }
        })
        $('#txtDOB').addClass('hint-text').on('focus blur', function (event) {
            if (event.type == 'focusin' && ($.trim($('#txtDOB').val()) == 'MM/DD/YYYY' || $.trim($('#txtDOB').val()) == 'MM/DD/AAAA')) {
                $('#txtDOB').removeClass('hint-text')
                $('#txtDOB').val('')
            } else {
                if ($('#txtDOB').val() == '') {
                    setTimeout(function () {
                        $('html').attr('lang').toLowerCase() == 'en-us' ? $('#txtDOB').val('MM/DD/YYYY') : $('#txtDOB').val('MM/DD/AAAA')
                        $('#txtDOB').addClass('hint-text')
                    }, 100)
                }
            }
        })
        eCLO.dateofbirth('txtDOB')
        if ($('.prospect-overlay').length <= 0) {
            $('body').append('<div class="ui-widget-overlay ui-front prospect-overlay hide"></div>')
        }
    }
})
var eCLO = {
    dateofbirth: function (currentEle) {
        var $currentElement = $('#' + currentEle)
        var $currTxtVal
        $currentElement.keyup(function (e) {
            var $keyID = (window.event) ? event.keyCode : e.keyCode
            if (($currentElement.val().length == 2 || $currentElement.val().length == 5) && (($keyID >= 48 && $keyID <= 57) || ($keyID >= 96 && $keyID <= 105))) {
                $currTxtVal = $currentElement.val()
                $currentElement.val($currTxtVal + '/')
            }
        })
    }
}

function validatePPWForm() {
    if ($('.prospect-vipaa-module .ita-skin').length > 0) {
        $('#boaFormHelp').hide()
        $('#prospect-ita-form a.btn-bofa-blue').removeClass('btn-bofa-blue').addClass('btn-disabled')
        $('#prospect-ita-form a.btn-disabled span.ada-hidden').remove()
        $('#prospect-ita-form a.btn-disabled').append('<span class="ada-hidden">' + ppwNextButtonADAText + '</span>')
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#prospect-ita-form').validate({
                includeFieldLabel: false,
                messages: {
                    txtMiddleName: {
                        alphawithspace: 'Please check and re-enter your middle name.(Letters only,please.)'
                    },
                    txtFirstName: {
                        alphawithspace: 'Please enter your first name.'
                    },
                    txtLastName: {
                        alphawithspace: 'Please enter your last name.'
                    },
                    txtAddress1: {
                        nospecial: 'Please enter your residential street address.',
                        streetaddress: 'Please enter your residential street address.'
                    },
                    txtAddress2: {
                        nospecial: 'Please enter your residential street address.'
                    },
                    txtCity: {
                        alphanumericspace: 'Please enter your city.'
                    },
                    txtZipcode: {
                        minlength: 'Please enter a valid 5-digit ZIP code.',
                        nospecial: 'Please enter a valid 5-digit ZIP code.',
                        USZipCodeValidate: 'Please enter a valid 5-digit ZIP code.'
                    },
                    txtDOB: {
                        minlength: 'Please enter a valid birthdate.',
                        validateDOB: 'Please enter a valid birthdate.',
                        nospecial: 'Please enter a valid birthdate.'
                    },
                    txtSSN: {
                        minlength: 'Please enter the last 4 digits of your Social Security number.',
                        integer: 'Please enter the last 4 digits of your Social Security number.'
                    },
                    txtFullSSN: {
                        minlength: 'Please enter your 9-digit Social Security number.',
                        integer: 'Please enter your 9-digit Social Security number.'
                    }
                },
                rules: {
                    txtMiddleName: {
                        alphawithspace: true
                    },
                    txtFirstName: {
                        alphawithspace: true
                    },
                    txtLastName: {
                        alphawithspace: true
                    },
                    txtAddress1: {
                        nospecial: '*<>@{}"\'%;)(+:!?\\][\\/\\^~`|_$=',
                        streetaddress: true
                    },
                    txtAddress2: {
                        nospecial: '*<>@{}"\'%;+:!?\\][\\^~`|_$='
                    },
                    txtCity: {
                        alphanumericspace: true
                    },
                    txtZipcode: {
                        minlength: function () {
                            if ($('#txtZipcode').is(':visible')) {
                                return 5
                            } else {
                                return 0
                            }
                        },
                        nospecial: '*<>@{}"\'%;)(&+:#',
                        USZipCodeValidate: true
                    },
                    txtDOB: {
                        minlength: function () {
                            if ($('#txtDOB').is(':visible')) {
                                return 10
                            } else {
                                return 0
                            }
                        },
                        validateDOB: {
                            depends: function (element) {
                                return ($('#txtDOB').val() != '')
                            }
                        },
                        nospecial: '*<>@{}"\'%;)(&+:#'
                    },
                    txtSSN: {
                        minlength: function () {
                            if ($('#txtSSN').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        }
                    },
                    txtFullSSN: {
                        minlength: function () {
                            if ($('#txtFullSSN').is(':visible')) {
                                return 9
                            } else {
                                return 0
                            }
                        }
                    }
                },
                onfocusout: function (element, event) {
                    $(element).valid()
                    if (this.errorList[0] != null) {
                        $('#boaFormHelp').attr('aria-live', 'rude')
                        currentErrorElement = $(element)
                        showError(element, this.errorList[0].message)
                        $('label[for=\'' + $(element).attr('id') + '\'] span.ada-hidden:eq(0)').text(ppwSpanishErrorText)
                        setTimeout(function () {
                            $(element).focus()
                        }, 0)
                    } else {
                        if (!$('.prospect-vipaa-module .ita-skin label').hasClass('field-level-error')) {
                            resetPPWErrorBubble()
                        }
                    }
                    updateNextButtonState(this.errorList[0], false)
                },
                submitHandler: function (form) {
                    if (typeof asyncEncryptField !== 'undefined' && $('input.async-encrypt').length > 0) {
                        asyncEncryptField()
                    }
                    if ($.trim($('#txtAddress2').val()) === '(Apartment/suite number)') {
                        $('#txtAddress2').val('')
                    }
                    $('.prospect-success-modal,.prospect-overlay').removeClass('hide')
                    form.submit()
                },
                focusOnError: false
            })
        } else {
            $('#prospect-ita-form').validate({
                includeFieldLabel: false,
                messages: {
                    txtMiddleName: {
                        alphawithspace: 'Por favor, verifique y vuelva a indicar su segundo nombre. (Letras solamente, por favor.)'
                    },
                    txtFirstName: {
                        alphawithspace: 'Por favor, indique su nombre de pila.'
                    },
                    txtLastName: {
                        alphawithspace: 'Por favor, indique su apellido.'
                    },
                    txtAddress1: {
                        nospecial: 'Por favor, indique su domicilio de residencia.',
                        streetaddress: 'Por favor, indique su domicilio de residencia.'
                    },
                    txtAddress2: {
                        nospecial: 'Por favor, indique su domicilio de residencia.'
                    },
                    txtCity: {
                        alphanumericspace: 'Por favor, indique su ciudad.'
                    },
                    txtZipcode: {
                        minlength: 'Por favor, indique un C&#243;digo postal v&#225;lido de 5 d&#237;gitos.',
                        nospecial: 'Por favor, indique un C&#243;digo postal v&#225;lido de 5 d&#237;gitos.',
                        USZipCodeValidate: 'Por favor, indique un C&#243;digo postal v&#225;lido de 5 d&#237;gitos.'
                    },
                    txtDOB: {
                        minlength: 'Por favor, indique una fecha de nacimiento v&#225;lida.',
                        validateDOB: 'Por favor, indique una fecha de nacimiento v&#225;lida.',
                        nospecial: 'Por favor, indique una fecha de nacimiento v&#225;lida.'
                    },
                    txtSSN: {
                        minlength: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social.',
                        integer: 'Por favor, indique los &#250;ltimos 4 d&#237;gitos de su n&#250;mero de Seguro Social.'
                    },
                    txtFullSSN: {
                        minlength: 'Por favor, indique su n&#250;mero de Seguro Social de 9 d&#237;gitos.',
                        integer: 'Por favor, indique su n&#250;mero de Seguro Social de 9 d&#237;gitos.'
                    }
                },
                rules: {
                    txtMiddleName: {
                        alphawithspace: true
                    },
                    txtFirstName: {
                        alphawithspace: true
                    },
                    txtLastName: {
                        alphawithspace: true
                    },
                    txtAddress1: {
                        nospecial: '*<>@{}"\'%;)(+:!?\\][\\/\\^~`|_$=',
                        streetaddress: true
                    },
                    txtAddress2: {
                        nospecial: '*<>@{}"\'%;+:!?\\][\\^~`|_$='
                    },
                    txtCity: {
                        alphanumericspace: true
                    },
                    txtZipcode: {
                        minlength: function () {
                            if ($('#txtZipcode').is(':visible')) {
                                return 5
                            } else {
                                return 0
                            }
                        },
                        nospecial: '*<>@{}"\'%;)(&+:#',
                        USZipCodeValidate: true
                    },
                    txtDOB: {
                        minlength: function () {
                            if ($('#txtDOB').is(':visible')) {
                                return 10
                            } else {
                                return 0
                            }
                        },
                        validateDOB: {
                            depends: function (element) {
                                return ($('#txtDOB').val() != '')
                            }
                        },
                        nospecial: '*<>@{}"\'%;)(&+:#'
                    },
                    txtSSN: {
                        minlength: function () {
                            if ($('#txtSSN').is(':visible')) {
                                return 4
                            } else {
                                return 0
                            }
                        },
                        integer: true
                    },
                    txtFullSSN: {
                        minlength: function () {
                            if ($('#txtFullSSN').is(':visible')) {
                                return 9
                            } else {
                                return 0
                            }
                        },
                        integer: true
                    }
                },
                onfocusout: function (element, event) {
                    $(element).valid()
                    if (this.errorList[0] != null) {
                        $('#boaFormHelp').attr('aria-live', 'rude')
                        showError(element, this.errorList[0].message)
                        $('label[for=\'' + $(element).attr('id') + '\'] span.ada-hidden:eq(0)').text(ppwSpanishErrorText)
                        setTimeout(function () {
                            $(element).focus()
                        }, 0)
                    } else {
                        if (!$('.prospect-vipaa-module .ita-skin label').hasClass('field-level-error')) {
                            resetPPWErrorBubble()
                        }
                    }
                    updateNextButtonState(this.errorList[0], false)
                },
                submitHandler: function (form) {
                    if (typeof asyncEncryptField !== 'undefined' && $('input.async-encrypt').length > 0) {
                        asyncEncryptField()
                    }
                    if ($.trim($('#txtAddress2').val()) === '(NÃºmero de apartamento/oficina)') {
                        $('#txtAddress2').val('')
                    }
                    $('.prospect-success-modal,.prospect-overlay').removeClass('hide')
                    form.submit()
                },
                focusOnError: false
            })
        }
        $('a.boa-dialog').click(function () {
            if ($('#boaFormHelp').css('display') == 'block') {
                return false
            }
        })
        $('input:radio,input:checkbox').click(function () {
            if ($('#boaFormHelp').css('display') == 'block') {
                currentErrorElement.focus()
            } else {
                $('label').removeClass('field-level-error')
                $('#boaFormHelp').hide()
                updateNextButtonState(null, false)
            }
        })
        $('#chkTcCreditScore').click(function () {
            if ($('#boaFormHelp').css('display') == 'block') {
                return false
            }
        })
        $('#comboState').change(function () {
            validateState($('#comboState'))
        })
        $('#txtZipcode').keyup(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which)
            if ((keycode > 47 && keycode < 58) || keycode == 189 || keycode == 37 || keycode == 39 || keycode == 8) {
                if ($(this).val().length == 5) {
                    $('label[for=\'' + $(this).attr('id') + '\']').removeClass('field-level-error')
                    resetPPWErrorBubble()
                    updateNextButtonState(null, false)
                } else {
                    updateNextButtonState(null, true)
                }
            } else {
                updateNextButtonState(null, true)
            }
        })
        $('#txtDOB').keyup(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which)
            if ((keycode > 47 && keycode < 58) || keycode == 191 || keycode == 37 || keycode == 39 || keycode == 8) {
                if ($(this).val().length == 10) {
                    $('label[for=\'' + $(this).attr('id') + '\']').removeClass('field-level-error')
                    resetPPWErrorBubble()
                    updateNextButtonState(null, false)
                } else {
                    updateNextButtonState(null, true)
                }
            } else {
                updateNextButtonState(null, true)
            }
        })
    }
}

function validateState(stateObj) {
    if (stateObj.prop('selectedIndex') == 0) {
        $('label[for=\'' + stateObj.attr('id') + '\']').addClass('field-level-error')
        $('#prospect-ita-form a.btn-bofa-blue').removeClass('btn-bofa-blue').addClass('btn-disabled')
        $('#prospect-ita-form a.btn-bofa-blue span.ada-hidden').text(ppwNextButtonADAText)
        showError('#comboState', $('html').attr('lang').toLowerCase() == 'en-us' ? 'Please enter a valid state' : 'Por favor, seleccione su estado.')
        $('label[for=\'comboState\'] span.ada-hidden').text(ppwSpanishErrorText)
        return false
    } else {
        $('label[for=\'' + stateObj.attr('id') + '\']').removeClass('field-level-error')
        $('label[for=\'comboState\'] span.ada-hidden').text('')
        $('#boaFormHelp').hide()
        updateNextButtonState(null, false)
    }
}

function updateNextButtonState(errorList, disableButton) {
    ppwNonBlankFieldCount = 0
    $('.prospect-vipaa-module .ita-skin .ppw-required:visible').each(function () {
        if ($(this).val() != '' && trim($(this).val()) != '' && !$('label[for=\'' + $(this).attr('id') + '\']').hasClass('field-level-error')) {
            ppwNonBlankFieldCount++
        }
    })
    var cardTypeFlag = false
    if (($('input:radio[name=creditCardType]').length > 0 && $('input:radio[name=creditCardType]:checked').length > 0) || $('#page-card-type').length > 0 && ($('#page-card-type option:selected').text() != 'Select' || $('#page-card-type option:selected').text() != 'Seleccionar')) {
        cardTypeFlag = true
    } else {
        if ($('#skipCardTypeSelection').length > 0) {
            cardTypeFlag = true
        }
    }
    if (disableButton) {
        ppwNonBlankFieldCount = ppwNonBlankFieldCount - 1
    }
    if ((ppwNonBlankFieldCount == $('.prospect-vipaa-module .ita-skin .ppw-required:visible').length) && errorList == null && $('#comboState').prop('selectedIndex') > 0 && cardTypeFlag == true && $('#chkTcCreditScore').is(':checked')) {
        $('#prospect-ita-form a.btn-disabled').removeClass('btn-disabled').addClass('btn-bofa-blue')
        $('#prospect-ita-form a.btn-bofa-blue span.ada-hidden').text('. submits your contact information').toggleClass('ada-buffer')
    } else {
        $('#prospect-ita-form a.btn-bofa-blue').removeClass('btn-bofa-blue').addClass('btn-disabled')
        $('#prospect-ita-form a.btn-disabled span.ada-hidden').text(ppwNextButtonADAText)
    }
}

function trim(stringToTrim) {
    return stringToTrim.replace(/^\s+|\s+$/g, '')
}

function resetPPWErrorBubble() {
    $('#boaFormHelp').removeAttr('aria-live')
    $('#boaFormHelp').hide()
    $('.prospect-vipaa-module .ita-skin label span.ada-hidden').text('')
}

function ppwAttachSubmitHandlers() {
    $('.prospect-vipaa-module .ita-skin').on('keypress', function (event) {
        if (event.keyCode == 13 && $('#prospect-ita-form a.btn-bofa-blue').length > 0) {
            event.preventDefault()
            $('#prospect-ita-form').submit()
        }
    })
}

function ppwError(customErrorMessage, e) {
    var errorMessage = 'Credit Card Prospect Error.  '
    if (typeof customErrorMessage !== 'undefined') {
        errorMessage += customErrorMessage
    }
    if (typeof e !== 'undefined') {
        if (typeof e.name !== 'undefined') {
            errorMessage += '. Error Name: ' + e.name
        }
        if (typeof e.message !== 'undefined') {
            errorMessage += '. Error message: ' + e.message
        }
        if (typeof e.description !== 'undefined') {
            errorMessage += '. Error description: ' + e.description
        }
        if (typeof e.number !== 'undefined') {
            errorMessage += '. Error number: ' + e.number
        }
    }
    if ((typeof TeaLeaf != 'undefined') && (typeof TeaLeaf.Event.tlAddCustomEvent != 'undefined')) {
        var $errorType = 'ProspectWidgetError'
        var $errorPage
        if (typeof errorPage != 'undefined' && errorPage.length > 0) {
            $errorPage = errorPage
        } else {
            $errorPage = $('title').html()
        }
        var $errorMsg = errorMessage
        var $nVO = {
            Page: $errorPage,
            ErrorMessage: $errorMsg
        }
        TeaLeaf.Event.tlAddCustomEvent($errorType, $nVO)
    }
    return
}

function showError(objref, message) {
    var formhelp = $('#boaFormHelp')
    formhelp.css({
        top: -1000,
        left: -1000
    })
    $('#boaFormHelp-content').empty()
    $('#boaFormHelp-content').append(message)
    $('#boaFormHelp-content').css({
        'font-size': '1em'
    })
    var position = {
        t: $(objref).offset().top - (formhelp.height() + 30) - 20,
        l: $(objref).offset().left + ($(objref).width() / 2) - (formhelp.width() / 2)
    }
    formhelp.css({
        top: position.t,
        left: position.l
    })
    $('#boaFormHelp_iframe').css({
        top: position.t,
        left: position.l,
        height: formhelp.height(),
        width: formhelp.width()
    })
    formhelp.show()
}

var $quickHelpBoaLangObj = {}
$(document).ready(function () {
    if ($('.quick-help-vipaa-module .fsd-lp-skin').length > 0) {
        var qhLang = $('html').attr('lang').toLowerCase()
        if (qhLang == 'es-us') {
            $quickHelpBoaLangObj.show = 'Activar para expandir. '
            $quickHelpBoaLangObj.hide = 'Activar para contraer. '
        } else {
            $quickHelpBoaLangObj.show = 'Activate to expand. '
            $quickHelpBoaLangObj.hide = 'Activate to collapse. '
        }
        $quickHelp = $('.quick-help-vipaa-module .fsd-lp-skin .help-link .heading')
        $('.quick-help-vipaa-module .fsd-lp-skin .help-link').addClass('collapsed')
        $('.quick-help-vipaa-module .fsd-lp-skin .help-link .ada-hidden').text($quickHelpBoaLangObj.show + ' ')
        $('.quick-help-vipaa-module .fsd-lp-skin .help-link').click(function (event) {
            event.preventDefault()
            var $this = $(this),
                $toggleADA = $this.find('span.ada-hidden')
            var $thisLinkState = $this.hasClass('collapsed') ? 'Collapsed' : 'Expanded'
            $('.quick-help-vipaa-module .fsd-lp-skin .help-link-answer').addClass('hide').removeAttr('aria-live')
            $('.quick-help-vipaa-module .fsd-lp-skin .help-link .ada-hidden').text($quickHelpBoaLangObj.show + ' ')
            $('.quick-help-vipaa-module .fsd-lp-skin .help-link').attr('aria-expanded', false).addClass('collapsed').removeClass('expanded')
            if ($thisLinkState == 'Collapsed') {
                $toggleADA.text($quickHelpBoaLangObj.hide + ' ')
                $this.attr('aria-expanded', true)
                $this.next('.help-link-answer').removeClass('hide').attr('aria-live', 'rude').focus()
                $this.addClass('expanded').removeClass('collapsed')
            } else {
                if ($thisLinkState == 'Expanded') {
                    $toggleADA.text($quickHelpBoaLangObj.show + ' ')
                    $this.attr('aria-expanded', false)
                    $this.next('.help-link-answer').addClass('hide').removeAttr('aria-live')
                    $this.addClass('collapsed').removeClass('expanded')
                }
            }
            if (typeof quickHelpRequestURL != 'undefined' && quickHelpRequestURL !== null && quickHelpRequestURL.length > 0) {
                var name = $.trim($this.text())
                var length = name.length
                var link = name.substr(5, length)
                $.post(quickHelpRequestURL + '&linkName=' + link)
            }
        })
        $quickHelp.on('keyup', function (event) {
            if (event.keyCode == 13) {
                event.preventDefault()
                $quickHelp.removeAttr('tabindex')
            }
        })
    }
})
var uciPilot = true,
    widgetPageCode = 0
var languagePrefURLUpdate = ''
var AddSafePass = {
    CONTEXT: '.add-skin',
    btnToEnable: '',
    primaryIndicator: false,
    secondaryIndicator: false,
    primaryDeviceVerified: 'false',
    secondaryDeviceVerified: 'false',
    fn: {
        displayClientError: function (errorContent) {
            var $errorMsg = $('.error-message', '#clientSideErrors')
            $errorMsg.find('#commonError').removeClass('hide')
            $('.messaging-module').addClass('hide')
            if (errorContent === '') {
                $('#clientSideErrors').addClass('hide')
                return true
            } else {
                if ($errorMsg.length > 0 && errorContent != '') {
                    $errorMsg.find('ul').remove()
                    $errorMsg.find('p.aspErrMsg').remove()
                    $errorMsg.append(errorContent)
                    $('#clientSideErrors').removeClass('hide').attr('aria-live', 'rude').attr('tabindex', '-1').focus()
                    return false
                }
            }
            return false
        },
        showProcessingWheel: function () {
            var options = {
                skin: 'modal-flex',
                width: 740
            }
            $('#SPProcessingContainer').boaFlexModal(options)
            $('#SPProcessingContainer-modalClose').hide()
        },
        hideProcessingWheel: function () {
            $('#SPProcessingContainer').dialog('close')
        },
        getSafePassWidget: function ($widgetContainerID, btnToEnable, pageCode, indexNum) {
            if (btnToEnable != '') {
                AddSafePass.btnToEnable = btnToEnable
                AddSafePass.btnToEnable.addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                AddSafePass.btnToEnable.find('.un-available').remove()
                AddSafePass.btnToEnable.append(' ' + btnDisable)
            } else {
                AddSafePass.btnToEnable = ''
            }
            if (typeof VIPAAServer != 'undefined' && typeof showNonFlashWidget != 'undefined') {
                $('#' + $widgetContainerID).children().remove()
                showNonFlashWidget(pageCode, '', indexNum, VIPAAServer, true, $widgetContainerID)
            }
            if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                AddSafePass.fn.doSPWidgetCallback('bypassingwidget')
            }
        },
        doSPWidgetCallback: function (artifactValue) {
            if (AddSafePass.primaryIndicator) {
                var $activateSection = $('#primaryMobile', AddSafePass.CONTEXT)
                AddSafePass.primaryIndicator = false
                if (!uciPilot) {
                    AddSafePass.fn.getSafePassWidget($activateSection.data('containerID'), $activateSection.data('btnToEnable'), spwMobPageCode, widgetPageCode)
                } else {
                    if (AddSafePass.primaryDeviceVerified == 'true') {
                        AddSafePass.btnToEnable.data('artifactVal', 'mobileVerified')
                        AddSafePass.btnToEnable.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                        AddSafePass.btnToEnable.find('.un-available').remove()
                    } else {
                        if (typeof PlaceOrder != 'undefined') {
                            PlaceOrder.otpPlaceOrderPage = 'false'
                        }
                        AddSafePass.fn.getOTPAddWidget($('#txteditMob1').val())
                    }
                }
            } else {
                if (AddSafePass.secondaryIndicator) {
                    var $activateSection = $('#secondaryMobile', AddSafePass.CONTEXT)
                    AddSafePass.secondaryIndicator = false
                    if (!uciPilot) {
                        AddSafePass.fn.getSafePassWidget($activateSection.data('containerID'), $activateSection.data('btnToEnable'), spwMobPageCode, widgetPageCode)
                    } else {
                        if (AddSafePass.secondaryDeviceVerified == 'true') {
                            AddSafePass.btnToEnable.data('artifactVal', 'mobileVerified')
                            AddSafePass.btnToEnable.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                            AddSafePass.btnToEnable.find('.un-available').remove()
                        } else {
                            if (typeof PlaceOrder != 'undefined') {
                                PlaceOrder.otpPlaceOrderPage = 'false'
                            }
                            AddSafePass.fn.getOTPAddWidget($('#txteditMob2').val())
                        }
                    }
                } else {
                    if (AddSafePass.btnToEnable != '') {
                        AddSafePass.btnToEnable.data('artifactVal', artifactValue)
                        AddSafePass.btnToEnable.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                        if (AddSafePass.btnToEnable.find('ada-hidden')) {
                            AddSafePass.btnToEnable.find('.ada-hidden').remove()
                            $('.safepass-load').attr('aria-live', 'rude')
                        }
                        AddSafePass.btnToEnable.find('.un-available').remove()
                    }
                }
            }
        },
        displayOTPModalErrors: function (errorContent) {
            var $errorMsg = $('.error-message', '#OTPModalMessageErrors')
            $('.messaging-module').addClass('hide')
            if ($errorMsg.length > 0 && errorContent != '') {
                $errorMsg.find('ul').remove()
                $errorMsg.find('p.aspErrMsg').remove()
                $errorMsg.append(errorContent)
                $('#OTPModalMessageErrors').removeClass('hide').attr('aria-live', 'rude').attr('tabindex', '-1').focus()
            }
        },
        getOTPAddWidget: function (mobileNbr) {
            if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                sendToOTPClientASA('mobileVerified', 'SUCCESS', 'Y')
            } else {
                var $safepassOptions = {
                    skin: 'modal-flex',
                    width: 480
                }
                $.ajax({
                    url: languagePrefURLUpdate + 'getOtpValues.go',
                    type: 'POST',
                    data: {
                        primaryMobileNumber: mobileNbr
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        $('.otp-sp-add-modal').children().remove()
                        $('.otp-sp-add-modal').append('<div id="OTPModalMessageErrors" class="messaging-module hide"><div class="error-skin"><div class="error-message"></div></div></div>')
                        AddSafePass.fn.displayOTPModalErrors('<p class=\'title aspErrMsg\'>' + spTechnicalErrmsg + '</p>')
                        $('.otp-sp-add-modal').boaFlexModal($safepassOptions)
                    },
                    success: function (data) {
                        data = $.parseJSON(data)
                        if (data != '' && data.result == 'success') {
                            $('.otp-sp-add-modal').children().remove()
                            showOTPWidget('VIPAA-OTP-SAFEPASS', location.protocol + '//' + location.host, 'otpSPAddModal', data.acwEncryptedToken, data.acwEncryptedIv)
                            $('.modal-content-vipaa-module').boaFlexModal($safepassOptions)
                            $('.ui-widget-overlay').css('height', $(document).height())
                        } else {
                            if (data.result == 'error') {
                                $('.otp-sp-add-modal').children().remove()
                                $('.otp-sp-add-modal').append('<div id="OTPModalMessageErrors" class="messaging-module hide"><div class="error-skin"><div class="error-message"></div></div></div>')
                                AddSafePass.fn.displayOTPModalErrors('<p class=\'title aspErrMsg\'>' + spTechnicalErrmsg + '</p>')
                                $('.otp-sp-add-modal').boaFlexModal($safepassOptions)
                            }
                        }
                    }
                })
            }
        },
        doTestMobile: function ($this) {
            $this.unbind('click')
            var $parentContainer = $this.closest('.safepass-container'),
                $testMobile = $parentContainer.find('.test-mobile'),
                $widgetContainer = $testMobile.find('.safepassWidget'),
                $count = $('.safepassWidget', AddSafePass.CONTEXT).index($widgetContainer),
                $id = $parentContainer.attr('id')
            if (!$this.hasClass('activated')) {
                $this.addClass('activated')
                $widgetContainer.attr('id', 'spTestWidget' + $count)
                AddSafePass.fn.getSafePassWidget('spTestWidget' + $count, '', spwMobPageCode, widgetPageCode)
                $testMobile.removeClass('hide')
                $('.safepass-vipaa-module .settings-skin').addClass('hide')
                $('.btnActivateCancel', AddSafePass.CONTEXT).click()
                $('.btnCloseTestMob', $testMobile).unbind('click')
                $('.btnCloseTestMob', $testMobile).click(function () {
                    $testMobile.addClass('hide')
                    $('.safepass-vipaa-module .settings-skin').removeClass('hide')
                    $this.click(function () {
                        $('.btnCloseTestMob', AddSafePass.CONTEXT).click()
                        AddSafePass.fn.doTestMobile($this)
                    })
                })
                $this.removeClass('activated')
            }
        },
        cntFormvalid: function () {
            if (!uciPilot) {
                var $firstMob = $('#txtFirstMob', AddSafePass.CONTEXT),
                    $firstMobval = $firstMob.val(),
                    $secondMob = $('#txtSecondMob', AddSafePass.CONTEXT),
                    $secondMobVal = $secondMob.val(),
                    $fldMbleOne = $('label[for=cbAddMobile1]'),
                    $fldMbleTwo = $('label[for=cbAddMobile2]')
            }
            var $txtcardNum = $('#txtEnterCardNumber', AddSafePass.CONTEXT),
                $txtcardNumVal = $txtcardNum.val(),
                $txtcardLbl = $('label[for=txtEnterCardNumber]'),
                $liList = '',
                $UL,
                $errorMsg = $('#clientSideErrors'),
                $primarySPcb = $('#cbAddSPCard3', AddSafePass.CONTEXT).attr('checked'),
                $secondarySPcb = $('#cbAddSPCard4', AddSafePass.CONTEXT).attr('checked'),
                $firstMobHdnVal = $('#txtFirstMob-hidden', AddSafePass.CONTEXT).val(),
                $fstEmpEnrolledHdnValues = $('.sb-First-Mobile'),
                $sndEmpEnrolledHdnValues = $('.sb-Second-Mobile'),
                $empEnrolledNumbers = []
            if ($fstEmpEnrolledHdnValues.length > 0) {
                $fstEmpEnrolledHdnValues.each(function () {
                    $empEnrolledNumbers.push($(this).val())
                })
            }
            if ($sndEmpEnrolledHdnValues.length > 0) {
                $sndEmpEnrolledHdnValues.each(function () {
                    $empEnrolledNumbers.push($(this).val())
                })
            }
            if (!uciPilot) {
                if ($firstMob.length > 0 && $firstMob.is(':visible')) {
                    if ($firstMobval === '') {
                        $liList += '<li>' + mobNumReq + '</li>'
                        $fldMbleOne.addClass('field-level-error')
                    } else {
                        if (!(/^[^\s]*$/.test($firstMobval)) || isNaN($firstMobval.replace(/\-/g, '')) || $firstMobval.indexOf('.') != -1) {
                            $liList += '<li>' + firstMobNospace + '</li>'
                            $fldMbleOne.addClass('field-level-error')
                        } else {
                            if ($firstMobval.length < 12) {
                                $liList += '<li>' + firstMobNospace + '</li>'
                                $fldMbleOne.addClass('field-level-error')
                            } else {
                                if ($.inArray($firstMobval.replace(/\-/g, ''), $empEnrolledNumbers) != -1) {
                                    if (typeof diffPriEmpMobNum != 'undefined') {
                                        $liList += '<li>' + diffPriEmpMobNum + '</li>'
                                    }
                                    $fldMbleOne.addClass('field-level-error')
                                } else {
                                    $fldMbleOne.removeClass('field-level-error')
                                    $errorMsg.addClass('hide')
                                }
                            }
                        }
                    }
                } else {
                    $fldMbleOne.removeClass('field-level-error')
                    $errorMsg.addClass('hide')
                }
                if ($secondMob.length > 0 && $secondMob.is(':visible')) {
                    if ($secondMobVal === '') {
                        $liList += '<li>' + mobNumReq + '</li>'
                        $fldMbleTwo.addClass('field-level-error')
                    } else {
                        if (!(/^[^\s]*$/.test($secondMobVal)) || isNaN($secondMobVal.replace(/\-/g, '')) || $secondMobVal.indexOf('.') != -1) {
                            $liList += '<li>' + secondMobNospace + '</li>'
                            $fldMbleTwo.addClass('field-level-error')
                        } else {
                            if ($secondMobVal.length < 12) {
                                $liList += '<li>' + secondMobNospace + '</li>'
                                $fldMbleTwo.addClass('field-level-error')
                            } else {
                                if ($secondMobVal == $firstMobval || ($firstMobHdnVal != '' && $firstMobHdnVal == $secondMobVal.replace(/\-/g, ''))) {
                                    $liList += '<li>' + twoDifferentNo + '</li>'
                                    $fldMbleTwo.addClass('field-level-error')
                                } else {
                                    if ($.inArray($secondMobVal.replace(/\-/g, ''), $empEnrolledNumbers) != -1) {
                                        if (typeof diffSecEmpMobNum != 'undefined') {
                                            $liList += '<li>' + diffSecEmpMobNum + '</li>'
                                        }
                                        $fldMbleTwo.addClass('field-level-error')
                                    } else {
                                        $fldMbleTwo.removeClass('field-level-error')
                                        $errorMsg.addClass('hide')
                                    }
                                }
                            }
                        }
                    }
                } else {
                    $fldMbleTwo.removeClass('field-level-error')
                    $errorMsg.addClass('hide')
                }
            }
            if (($primarySPcb || $secondarySPcb) && typeof cardEnrollment !== 'undefined' && cardEnrollment !== null && cardEnrollment == 'false') {
                $liList += '<li>' + txtCardNumReq + '</li>'
            }
            if ($liList != '') {
                $liList = '<ul>' + $liList + '</ul>'
            }
            return AddSafePass.fn.displayClientError($liList)
        },
        init: function () {
            $.data(document.body, 'safepass-label', $('label[for=\'cbAddSPCard3\'] .safepass-label').html())
            $.data(document.body, 'selected', $('label[for=\'cbAddSPCard3\'] .selected').html())
            $('label[for="cbAddSPCard3"] .selected').empty()
            $('.safepass-vipaa-module .add-skin .safepass-container:last').addClass('sp-card-lastbrd')
            if (($('#primaryMobile').find('.testMob').length > 0) && ($('#secondaryMobile').find('.testMob').length > 0)) {
                widgetPageCode = 1
            } else {
                widgetPageCode = 0
            }
            $('#btnSubmitCode', AddSafePass.CONTEXT).click(function () {
                var $this = $(this)
                if (!$this.hasClass('btn-disabled')) {
                    AddSafePass.fn.showProcessingWheel()
                    $this.addClass('btn-disabled').removeAttr('href')
                    $this.append(' ' + btnDisable)
                    var $spcode1 = $('#txtSpCode1'),
                        $spcode2 = $('#txtSpCode2')
                    $.ajax({
                        url: languagePrefURLUpdate + 'submitOTPCodes.go',
                        data: {
                            enteredOTPCode1: $spcode1.val(),
                            enteredOTPCode2: $spcode2.val()
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            $('#btnFinishSpCard1', AddSafePass.CONTEXT).removeClass('btn-bofa-blue').addClass('btn-disabled').removeAttr('href')
                            $('#btnFinishSpCard1', AddSafePass.CONTEXT).find('.un-available').remove()
                            $('#btnFinishSpCard1', AddSafePass.CONTEXT).append(' ' + btnDisable)
                            $this.removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                            $this.find('.un-available').remove()
                            $('#sp-status').addClass('inline-error-sm').removeClass('inline-posack-sm').removeClass('hide')
                            $('#sp-status').text(safepassCodeErrmsg)
                            AddSafePass.fn.hideProcessingWheel()
                        },
                        success: function (data) {
                            if (data != '' && data == 'success') {
                                $('#btnFinishSpCard1', AddSafePass.CONTEXT).addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                                $('#btnFinishSpCard1', AddSafePass.CONTEXT).find('.un-available').remove()
                                $this.removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                                $this.find('.un-available').remove()
                                $('#sp-status').removeClass('inline-error-sm').addClass('inline-posack-sm').removeClass('hide')
                                $('#sp-status').text(safepassCodeSucsmsg)
                            } else {
                                $('#btnFinishSpCard1', AddSafePass.CONTEXT).removeClass('btn-bofa-blue').addClass('btn-disabled').removeAttr('href')
                                $('#btnFinishSpCard1', AddSafePass.CONTEXT).find('.un-available').remove()
                                $('#btnFinishSpCard1', AddSafePass.CONTEXT).append(' ' + btnDisable)
                                $this.removeClass('btn-disabled').removeAttr('href')
                                $this.find('.un-available').remove()
                                $('#sp-status').addClass('inline-error-sm').removeClass('inline-posack-sm').removeClass('hide')
                                $('#sp-status').text(safepassCodeErrmsg)
                            }
                            AddSafePass.fn.hideProcessingWheel()
                        }
                    })
                }
            })
            $('#txtSpCode1,#txtSpCode2', AddSafePass.CONTEXT).keyup(function () {
                var $this = $(this),
                    $spcode1 = $('#txtSpCode1'),
                    $spcode2 = $('#txtSpCode2'),
                    $spcodeVal1 = $spcode1.val(),
                    $spcodeVal2 = $spcode2.val(),
                    $btnSubmitCode = $('#btnSubmitCode', AddSafePass.CONTEXT)
                if ($spcodeVal1 != '' && $spcodeVal1.length == 6 && $spcodeVal2 != '' && $spcodeVal2.length == 6) {
                    $btnSubmitCode.removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                    $btnSubmitCode.find('.un-available').remove()
                } else {
                    $btnSubmitCode.addClass('btn-disabled').removeAttr('href')
                    $btnSubmitCode.find('.un-available').remove()
                    $btnSubmitCode.append(' ' + btnDisable)
                }
            })
            if ($('.btnFinishSpCard', AddSafePass.CONTEXT).hasClass('btn-disabled')) {
                $('.btnFinishSpCard', AddSafePass.CONTEXT).removeAttr('href')
            } else {
                $('.btnFinishSpCard', AddSafePass.CONTEXT).attr('href', 'javascript:void(0);')
            }
            $('.btnFinishSpCard', AddSafePass.CONTEXT).click(function () {
                var $this = $(this)
                if (!$this.hasClass('btn-disabled')) {
                    $this.addClass('btn-disabled').removeClass('btn-bofa-blue')
                    var $form = $this.closest('form')
                    $form.attr('action', languagePrefURLUpdate + 'activateCardFinish.go')
                    $form.submit()
                }
            })
            $('.activateMob', AddSafePass.CONTEXT).click(function () {
                var $this = $(this)
                var $activateSection = $this.closest('.safepass-container')
                var $selectDevice = $this.closest('.select-device')
                var $count = $('.safepassWidget', AddSafePass.CONTEXT).index($activateSection.find('.safepassWidget'))
                $('.btnActivateCancel', AddSafePass.CONTEXT).click()
                $('.btnCloseTestMob', AddSafePass.CONTEXT).click()
                $('.safepass-vipaa-module .settings-skin').addClass('hide')
                if (!$this.hasClass('activated')) {
                    $this.addClass('activated')
                    $activateSection.find('.safepassWidget').attr('id', 'safepassWidget' + $count)
                    if ($activateSection.attr('id') == 'primaryMobile') {
                        AddSafePass.primaryIndicator = true
                        if (uciPilot) {
                            AddSafePass.primaryDeviceVerified = $('input[name=\'primaryDeviceVerified\']').val()
                        }
                    } else {
                        AddSafePass.secondaryIndicator = true
                        if (uciPilot) {
                            AddSafePass.secondaryDeviceVerified = $('input[name=\'secondaryDeviceVerified\']').val()
                        }
                    }
                    $activateSection.data('containerID', 'safepassWidget' + $count)
                    $activateSection.data('btnToEnable', $activateSection.find('.btnActivateMob'))
                    AddSafePass.fn.getSafePassWidget('safepassWidget' + $count, $activateSection.find('.btnActivateMob'), spwPageName, '-1')
                    if (!$('.otp-sp-add-modal').is(':visible')) {
                        $activateSection.find('.activate-mobile').removeClass('hide')
                    }
                    $selectDevice.find('.place-request .activateMob').addClass('hide')
                    $selectDevice.find('.place-request .editMob').removeClass('hide')
                    $selectDevice.find('.place-request .removeMob').addClass('hide')
                    $selectDevice.find('.place-request .seperator').addClass('hide')
                    $this.removeClass('activated')
                }
            })
            $('#primaryMobile .editMob', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $selectDevice = $this.closest('.select-device'),
                    $hiddenNum = $('#txteditMob1').val()
                $('#txtactivateMob1').val($hiddenNum).blur()
                $selectDevice.find('.btnsave').data('mobileNum', $hiddenNum)
                $selectDevice.find('.device-content, .place-request').addClass('hide')
                $selectDevice.find('.device-content-form, .place-request-buttons').removeClass('hide')
            })
            $('#secondaryMobile .editMob', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $selectDevice = $this.closest('.select-device'),
                    $hiddenNum1 = $('#txteditMob2').val()
                $selectDevice.find('.btnsave').data('mobileNum', $hiddenNum1)
                $('#txtactivateMob2').val($hiddenNum1).blur()
                $selectDevice.find('.device-content, .place-request').addClass('hide')
                $selectDevice.find('.device-content-form, .place-request-buttons').removeClass('hide')
            })
            $('.activateSafepass', AddSafePass.CONTEXT).click(function () {
                var $this = $(this)
                var $safePassContainer = $this.closest('.safepass-container')
                $safePassContainer.find('.activate-safepass, .activate-safepass .step-one').removeClass('hide')
                $safePassContainer.find('.step1').show()
                $safePassContainer.find('.step2').hide()
                $safePassContainer.find('.activateSafepass, .sp-remove, .seperator, .step-two').addClass('hide')
            })
            if (!uciPilot) {
                $('#txtFirstMob', AddSafePass.CONTEXT).blur(function () {
                    var $this = $(this),
                        $fldMbleOne = $('label[for=cbAddMobile1]'),
                        $firstMobval = $this.val()
                    if ($firstMobval !== '' && (/^[^\s]*$/.test($firstMobval)) && $firstMobval.length > 11) {
                        $fldMbleOne.removeClass('field-level-error')
                    }
                })
                $('#txtSecondMob', AddSafePass.CONTEXT).blur(function () {
                    var $this = $(this),
                        $fldMbleTwo = $('label[for=cbAddMobile2]'),
                        $sndMobval = $this.val()
                    if ($sndMobval !== '' && (/^[^\s]*$/.test($sndMobval)) && $sndMobval.length > 11) {
                        $fldMbleTwo.removeClass('field-level-error')
                    }
                })
            }
            $('#txtEnterCardNumber', AddSafePass.CONTEXT).blur(function () {
                var $this = $(this),
                    $safepassNumber = $('#txtEnterCardNumber', AddSafePass.CONTEXT).val(),
                    $safepassNumberLbl = $('label[for="txtEnterCardNumber"]', AddSafePass.CONTEXT)
                if ($safepassNumber.length != 0 && $safepassNumber.length > 11 || ($safepassNumber.replace(/\-/g, '').match(/^\w+$/))) {
                    $safepassNumberLbl.removeClass('field-level-error')
                    AddSafePass.fn.displayClientError('')
                }
            })
            $('.btnActivateSpCard', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $activateSafepass = $this.closest('.activate-safepass'),
                    $safepassNumber = $('#txtEnterCardNumber', AddSafePass.CONTEXT).val(),
                    $safepassNumberLbl = $('label[for="txtEnterCardNumber"]', AddSafePass.CONTEXT)
                if ($safepassNumber.length == 0 || $safepassNumber.length < 12 || !($safepassNumber.replace(/\-/g, '').match(/^\w+$/))) {
                    $safepassNumberLbl.addClass('field-level-error')
                    AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + safepassCardSerialErrMsg + '</p>')
                } else {
                    AddSafePass.fn.showProcessingWheel()
                    $safepassNumberLbl.removeClass('field-level-error')
                    AddSafePass.fn.displayClientError('')
                    var $indexToAct = $this.closest('.safepass-container').find('input.indexToActOn').val()
                    $.ajax({
                        url: languagePrefURLUpdate + 'validateSerialNumber.go',
                        data: {
                            serialNumberEntered: $safepassNumber,
                            indexToActOn: $indexToAct
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            $safepassNumberLbl.addClass('field-level-error')
                            AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + safepassCardSerialErrMsg + '</p>')
                            $this.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                            $this.find('.un-available').remove()
                            AddSafePass.fn.hideProcessingWheel()
                        },
                        success: function (data) {
                            data = $.parseJSON(data)
                            if (data != '' && data.result == 'success') {
                                $activateSafepass.find('.step-one').addClass('hide')
                                $activateSafepass.find('.step-two').removeClass('hide')
                                $activateSafepass.prev('.select-device').find('.step1').hide()
                                $activateSafepass.prev('.select-device').find('.step2').show()
                            } else {
                                $activateSafepass.find('.step-one').removeClass('hide')
                                $activateSafepass.find('.step-two').addClass('hide')
                                $activateSafepass.prev('.select-device').find('.step1').show()
                                $activateSafepass.prev('.select-device').find('.step2').hide()
                                $safepassNumberLbl.addClass('field-level-error')
                                AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + safepassCardSerialErrMsg + '</p>')
                            }
                            $this.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                            $this.find('.un-available').remove()
                            AddSafePass.fn.hideProcessingWheel()
                        }
                    })
                    spwPageName = 'AuthHub-Safepass-CardActivate'
                    AddSafePass.fn.getSafePassWidget('safepass-card-widget', $('#btnFinishSpCard1'), spwPageName, '-1')
                }
            })
            $('.btnCancelSpCard, .btnCancelFinish', AddSafePass.CONTEXT).click(function () {
                var $activateSafepass = $(this).closest('.activate-safepass')
                var $selectDevice = $activateSafepass.prev('.select-device')
                var $safepassLabel = $activateSafepass.find('.serial-card label')
                $.post(languagePrefURLUpdate + 'cancelSafepassCard.go')
                if ($safepassLabel.hasClass('field-error')) {
                    $safepassLabel.removeClass('field-error')
                }
                $activateSafepass.addClass('hide')
                $activateSafepass.find(':text').val('')
                $selectDevice.find('.step1, .step2').hide()
                $selectDevice.find('.place-request .sp-remove, .place-request .activateSafepass, .place-request .seperator').removeClass('hide')
            })
            $('.btnActivateMob', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $form = $this.closest('form')
                if ($(this).hasClass('btn-disabled')) {
                    event.preventDefault()
                } else {
                    $('<input>').attr({
                        type: 'hidden',
                        id: 'artifact',
                        name: 'artifact',
                        value: $this.data('artifactVal')
                    }).appendTo($form)
                    $form.attr('action', languagePrefURLUpdate + 'validateMobile.go')
                    $form.submit()
                }
            })
            $('.btnActivateCancel', AddSafePass.CONTEXT).click(function () {
                var $this = $(this)
                var $activateMobile = $this.closest('.activate-mobile')
                var $selectDevice = $activateMobile.prev('.select-device')
                $('.safepass-vipaa-module .settings-skin').removeClass('hide')
                $selectDevice.find('.field-level-error').removeClass('field-level-error')
                $selectDevice.find('.device-content, .place-request, .place-request .activateMob, .place-request .removeMob').removeClass('hide')
                $selectDevice.find('.place-request .editMob, .device-content-form, .place-request-buttons').addClass('hide')
                $activateMobile.addClass('hide')
                $selectDevice.find('.place-request .seperator').removeClass('hide')
            })
            $('.testMob', AddSafePass.CONTEXT).click(function () {
                $('.btnCloseTestMob', AddSafePass.CONTEXT).click()
                AddSafePass.fn.doTestMobile($(this))
            })
            $('.btnCancel', AddSafePass.CONTEXT).click(function () {
                var $this = $(this)
                var $selectDevice = $this.closest('.select-device')
                $selectDevice.find('.field-level-error').removeClass('field-level-error')
                $selectDevice.find('.place-request-buttons, .device-content-form').addClass('hide')
                $selectDevice.find('.device-content, .place-request').removeClass('hide')
            })
            if ($('.first-mobile').length > 0) {
                $('.second-mobile').removeAttr('checked').attr('disabled', true)
            } else {
                $('.second-mobile').removeAttr('disabled')
            }
            if ($('.first-safepass').length > 0) {
                $('.second-safepass').removeAttr('checked').attr('disabled', true)
            } else {
                $('.second-safepass').removeAttr('disabled')
            }
            $('input:checkbox', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $selectDevice = $this.closest('.select-device'),
                    $sdTextInput = $selectDevice.find('input[type="text"]'),
                    $continuebtn = $('#btnAddPass', AddSafePass.CONTEXT)
                $continuebtn.find('.un-available').remove()
                var $firstMobile = $('.first-mobile', AddSafePass.CONTEXT)
                var $secondMobile = $('.second-mobile', AddSafePass.CONTEXT)
                if ($firstMobile.size() > 0) {
                    if ($firstMobile.attr('checked')) {
                    } else {
                        if (!uciPilot) {
                            var $smSelectDevice = $secondMobile.closest('.select-device')
                            $secondMobile.removeAttr('checked').attr('disabled', true)
                            $smSelectDevice.find('input[type="text"]').val('')
                            $smSelectDevice.find('.mobile-number').addClass('hide')
                            $continuebtn.removeClass('btn-bofa-blue').addClass('btn-disabled').removeAttr('href')
                            $continuebtn.append(' ' + btnDisable)
                            $('.select-device label[for=cbAddMobile1],.select-device label[for=cbAddMobile2]', AddSafePass.CONTEXT).removeClass('field-level-error')
                            $continuebtn.append(' ' + btnDisable)
                            $secondMobile.closest('.select-device').find('.normal-img').addClass('hide')
                            $secondMobile.closest('.select-device').find('.shade-img').removeClass('hide')
                            $secondMobile.closest('.select-device').find('label').addClass('inactive')
                        }
                    }
                } else {
                    if (!uciPilot) {
                        if ($secondMobile.attr('checked')) {
                            $continuebtn.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                            $continuebtn.find('.un-available').remove()
                        } else {
                            $continuebtn.removeClass('btn-bofa-blue').addClass('btn-disabled').removeAttr('href')
                            $continuebtn.find('.un-available').remove()
                            $continuebtn.append(' ' + btnDisable)
                        }
                    }
                }
                if ($('input:checked', AddSafePass.CONTEXT).length === 0) {
                    $continuebtn.removeClass('btn-bofa-blue').addClass('btn-disabled').removeAttr('href')
                    $continuebtn.find('.un-available').remove()
                    $continuebtn.append(' ' + btnDisable)
                } else {
                    if (!uciPilot) {
                        $continuebtn.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                        $continuebtn.find('.un-available').remove()
                    }
                }
                if ($this.hasClass('select-mobile') && $this.is(':checked')) {
                    $sdTextInput.parent().removeClass('hide')
                } else {
                    $sdTextInput.val('').parent().addClass('hide')
                    if (!uciPilot) {
                        $('.select-device label[for=cbAddMobile2]', AddSafePass.CONTEXT).removeClass('field-level-error')
                    }
                }
                if ($this.hasClass('safepass-card') && $this.is(':checked')) {
                    $('label[for="cbAddSPCard3"] .safepass-label').empty()
                    $('label[for="cbAddSPCard3"] .selected').empty().append($.data(document.body, 'selected'))
                    $('.footnote3').addClass('hide')
                    $('label[for="cbAddSPCard3"] .safepass-label, .dispatch-time').addClass('hide')
                    $('label[for="cbAddSPCard3"] .selected').removeClass('hide')
                    $continuebtn.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                    $continuebtn.find('.un-available').remove()
                } else {
                    $('label[for="cbAddSPCard3"] .selected').empty()
                    $('label[for="cbAddSPCard3"] .safepass-label').empty().append($.data(document.body, 'safepass-label'))
                    $('.footnote3').removeClass('hide')
                    $('label[for="cbAddSPCard3"] .selected').append($.data(document.body, 'selected'))
                    $selectDevice.find('.safepass-label, .dispatch-time').removeClass('hide')
                    $selectDevice.find('.selected, .safepass-fee').addClass('hide')
                }
                $('label[for=' + $this.attr('id') + ']').toggleClass('ada-buffer')
            })
            if (!uciPilot) {
                if ($('.first-mobile', AddSafePass.CONTEXT).length > 0) {
                    if (!$('.first-mobile').is(':checked')) {
                        var $secondMobileDisableIMG = $('.second-mobile', AddSafePass.CONTEXT)
                        $('.first-mobile', AddSafePass.CONTEXT).attr('checked', true)
                        $secondMobileDisableIMG.removeAttr('disabled')
                        $secondMobileDisableIMG.closest('.select-device').find('.normal-img').removeClass('hide')
                        $secondMobileDisableIMG.closest('.select-device').find('.shade-img').addClass('hide')
                        $secondMobileDisableIMG.closest('.select-device').find('label').removeClass('inactive')
                    }
                    $('#btnAddPass').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                    $('#btnAddPass').find('.un-available').remove()
                } else {
                    $('#btnAddPass').addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                    $('#btnAddPass').find('.un-available').remove()
                    $('#btnAddPass').append(' ' + btnDisable)
                }
            }
            $('#btnAddPass', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $inactive = $this.hasClass('btn-disabled')
                if (!$inactive) {
                    $this.addClass('btn-disabled').removeClass('btn-bofa-blue')
                    $this.find('.un-available').remove()
                    $this.append(' ' + btnDisable)
                    if (AddSafePass.fn.cntFormvalid()) {
                        AddSafePass.fn.showProcessingWheel()
                        var postURL = languagePrefURLUpdate + 'firstContinue.go?'
                        if (!uciPilot) {
                            var postData = {
                                primaryMobileNumber: $('#txtFirstMob', AddSafePass.CONTEXT).val(),
                                secondaryMobileNumber: $('#txtSecondMob', AddSafePass.CONTEXT).val(),
                                primarySafePassCardCheck: $('#cbAddSPCard3', AddSafePass.CONTEXT).prop('checked') ? true : false,
                                secondarySafePassCardCheck: $('#cbAddSPCard4', AddSafePass.CONTEXT).prop('checked') ? true : false
                            }
                        } else {
                            var postData = {
                                primaryMobileNumber: $('#firstMobileNumber', AddSafePass.CONTEXT).val(),
                                secondaryMobileNumber: $('#secondMobileNumber', AddSafePass.CONTEXT).val(),
                                primarySafePassCardCheck: $('#cbAddSPCard3', AddSafePass.CONTEXT).prop('checked') ? true : false,
                                secondarySafePassCardCheck: $('#cbAddSPCard4', AddSafePass.CONTEXT).prop('checked') ? true : false
                            }
                        }
                        $.post(languagePrefURLUpdate + 'continueSafepassEnroll.go', postData)
                        setTimeout(function () {
                            placeOrderNavigation(postData)
                        }, 300)
                    } else {
                        $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                        $this.find('.un-available').remove()
                    }
                }
            })
            $('#btnCancelPass').click(function () {
                $.post(languagePrefURLUpdate + 'cancelSafepassEnroll.go')
            })
            var $btnInactive = $('.btn-disabled', AddSafePass.CONTEXT)
            $btnInactive.removeAttr('href')
            $btnInactive.find('.un-available').remove()
            $btnInactive.append(' ' + btnDisable)
        },
        textbtn: function () {
            $('.select-device .place-request a.sp-test', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $spContainer = $this.closest('div.safepass-container')
                var $cardName = $spContainer.find('div.device-content p .mobile-num').text()
                var $adaTxt = $spContainer.find('div.device-content p .mobile-num a').text()
                $this.closest('div.place-request').prev('div.device-content-form').removeClass('hide')
                $spContainer.find('div.device-content').addClass('hide')
                $spContainer.find('div.place-request-buttons').removeClass('hide')
                $spContainer.find('div.place-request').addClass('hide')
                if (!isNaN($cardName.substring($cardName.length - ($adaTxt.length + 4), $cardName.length - ($adaTxt.length)))) {
                    $spContainer.find('div.device-content-form input').val($cardName.substring(0, $cardName.length - ($adaTxt.length + 5)))
                } else {
                    $spContainer.find('div.device-content-form input').val($cardName.substring(0, $cardName.length - $adaTxt.length))
                }
            })
            $('.select-device .nickname-cancel', AddSafePass.CONTEXT).click(function () {
                var $this = $(this)
                var $safepassContainer = $this.closest('div.safepass-container')
                $safepassContainer.find('div.device-content-form, div.place-request-buttons').addClass('hide')
                $safepassContainer.find('div.device-content-form').find('label').removeClass('field-level-error')
                $safepassContainer.find('div.device-content, div.place-request').removeClass('hide')
            })
            $('#primaryMobile a.btnsave', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $spcontainer = $this.closest('div.safepass-container'),
                    $primarymobileNum = $('#txtactivateMob1').data('phoneNum'),
                    $primarymobileNumLbl = $('label[for=txtactivateMob1]'),
                    $selectDevice = $this.closest('.select-device'),
                    $extMobileNum = $this.data('mobileNum'),
                    $secondaryMobileNumber = $('#txtSecondMob-hidden', AddSafePass.CONTEXT).val()
                $this.addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                $this.find('.un-available').remove()
                $this.append(' ' + btnDisable)
                if (($primarymobileNum.length == 0) || ($primarymobileNum.length < 10) || !($primarymobileNum.replace(/\-/g, '').match(/^\d+$/))) {
                    if (typeof spSaveSettingsErrMsg != 'undefined') {
                        AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spSaveSettingsErrMsg + '</p>')
                    }
                    $primarymobileNumLbl.addClass('field-level-error')
                    $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                    $this.find('.un-available').remove()
                    return false
                } else {
                    if ($secondaryMobileNumber != '' && $secondaryMobileNumber == $primarymobileNum.replace(/\-/g, '')) {
                        if (typeof twoDifferentNo != 'undefined') {
                            AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + twoDifferentNo + '</p>')
                        }
                        $primarymobileNumLbl.addClass('field-level-error')
                        $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                        $this.find('.un-available').remove()
                        return false
                    } else {
                        AddSafePass.fn.showProcessingWheel()
                        var indexTAO = $this.closest('.safepass-container').find('input.indexToActOn')
                        var index = indexTAO.val()
                        $.ajax({
                            url: languagePrefURLUpdate + 'editMobileNumber.go',
                            data: {
                                indexToActOn: index,
                                mobileNumToEdit: $primarymobileNum
                            },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {
                                if (typeof spSaveSettingsErrMsg != 'undefined') {
                                    AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spSaveSettingsErrMsg + '</p>')
                                }
                                $primarymobileNumLbl.addClass('field-level-error')
                                $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                                $this.find('.un-available').remove()
                                AddSafePass.fn.hideProcessingWheel()
                            },
                            success: function (data) {
                                if (data != '' && data.result == 'success') {
                                    $primarymobileNumLbl.removeClass('field-level-error')
                                    AddSafePass.fn.displayClientError('')
                                    $spcontainer.find('div.device-content-form, div.place-request-buttons').addClass('hide')
                                    $spcontainer.find('div.device-content, div.place-request').removeClass('hide')
                                    $selectDevice.find('#txteditMob1').val($primarymobileNum)
                                    $selectDevice.find('div.device-content span.mobile-num').html('***-***-' + $primarymobileNum.substring($primarymobileNum.length - 4))
                                    $selectDevice.find('div.place-request input.mobile-number').val('***-***-' + $primarymobileNum.substring($primarymobileNum.length - 4))
                                    indexTAO.val(data.indexToActOn)
                                    $('#txtFirstMob-hidden', AddSafePass.CONTEXT).val($primarymobileNum.replace(/\-/g, ''))
                                    var $activateSection = $this.closest('.safepass-container')
                                    var $count = $('.safepassWidget', AddSafePass.CONTEXT).index($activateSection.find('.safepassWidget'))
                                    $activateSection.find('.safepassWidget').attr('id', 'safepassWidget' + $count)
                                    $activateSection.data('containerID', 'safepassWidget' + $count)
                                    $activateSection.data('btnToEnable', $activateSection.find('.btnActivateMob'))
                                    AddSafePass.fn.getSafePassWidget('safepassWidget' + $count, $activateSection.find('.btnActivateMob'), spwPageName, '-1')
                                } else {
                                    if (typeof spTechnicalErrmsg != 'undefined') {
                                        AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spTechnicalErrmsg + '</p>')
                                    }
                                    $primarymobileNumLbl.addClass('field-level-error')
                                }
                                $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                                $this.find('.un-available').remove()
                                AddSafePass.fn.hideProcessingWheel()
                            }
                        })
                    }
                }
            })
            $('#secondaryMobile a.btnsave', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $spcontainer = $this.closest('div.safepass-container'),
                    $secondarymobileNum = $('#txtactivateMob2').data('phoneNum'),
                    $secondarymobileNumLbl = $('label[for=txtactivateMob2]'),
                    $selectDevice = $this.closest('.select-device'),
                    $extMobileNum = $this.data('mobileNum'),
                    $primaryMobileNumber = $('#txtFirstMob-hidden', AddSafePass.CONTEXT).val()
                $this.addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                $this.append(' ' + btnDisable)
                if (($secondarymobileNum.length == 0) || ($secondarymobileNum.length < 10) || !($secondarymobileNum.replace(/\-/g, '').match(/^\d+$/))) {
                    if (typeof spSaveSettingsErrMsg != 'undefined') {
                        AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spSaveSettingsErrMsg + '</p>')
                    }
                    $secondarymobileNumLbl.addClass('field-level-error')
                    $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                    $this.find('.un-available').remove()
                    return false
                } else {
                    if ($primaryMobileNumber != '' && $primaryMobileNumber == $secondarymobileNum.replace(/\-/g, '')) {
                        if (typeof twoDifferentNo != 'undefined') {
                            AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + twoDifferentNo + '</p>')
                        }
                        $secondarymobileNumLbl.addClass('field-level-error')
                        $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                        $this.find('.un-available').remove()
                        return false
                    } else {
                        AddSafePass.fn.showProcessingWheel()
                        var indexTAO = $this.closest('.safepass-container').find('input.indexToActOn')
                        var index = indexTAO.val()
                        $.ajax({
                            url: languagePrefURLUpdate + 'editMobileNumber.go',
                            data: {
                                indexToActOn: index,
                                mobileNumToEdit: $secondarymobileNum
                            },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {
                                if (typeof spSaveSettingsErrMsg != 'undefined') {
                                    AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spSaveSettingsErrMsg + '</p>')
                                }
                                $secondarymobileNumLbl.addClass('field-level-error')
                                $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                                $this.find('.un-available').remove()
                                AddSafePass.fn.hideProcessingWheel()
                            },
                            success: function (data) {
                                if (data != '' && data.result == 'success') {
                                    $secondarymobileNumLbl.removeClass('field-level-error')
                                    AddSafePass.fn.displayClientError('')
                                    $spcontainer.find('div.device-content-form, div.place-request-buttons').addClass('hide')
                                    $spcontainer.find('div.device-content, div.place-request').removeClass('hide')
                                    $selectDevice.find('#txteditMob2').val($secondarymobileNum)
                                    $selectDevice.find('div.device-content span.mobile-num').html('***-***-' + $secondarymobileNum.substring($secondarymobileNum.length - 4))
                                    $selectDevice.find('div.place-request input.mobile-number').val('***-***-' + $secondarymobileNum.substring($secondarymobileNum.length - 4))
                                    indexTAO.val(data.indexToActOn)
                                    $('#txtSecondMob-hidden', AddSafePass.CONTEXT).val($secondarymobileNum.replace(/\-/g, ''))
                                    var $activateSection = $this.closest('.safepass-container')
                                    var $count = $('.safepassWidget', AddSafePass.CONTEXT).index($activateSection.find('.safepassWidget'))
                                    $activateSection.find('.safepassWidget').attr('id', 'safepassWidget' + $count)
                                    $activateSection.data('containerID', 'safepassWidget' + $count)
                                    $activateSection.data('btnToEnable', $activateSection.find('.btnActivateMob'))
                                    AddSafePass.fn.getSafePassWidget('safepassWidget' + $count, $activateSection.find('.btnActivateMob'), spwPageName, '-1')
                                } else {
                                    if (typeof spTechnicalErrmsg != 'undefined') {
                                        AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spTechnicalErrmsg + '</p>')
                                    }
                                    $secondarymobileNumLbl.addClass('field-level-error')
                                }
                                $this.removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                                $this.find('.un-available').remove()
                                AddSafePass.fn.hideProcessingWheel()
                            }
                        })
                    }
                }
            })
            $('.txtNickname', AddSafePass.CONTEXT).blur(function () {
                var $this = $(this),
                    $spcontainer = $this.closest('div.safepass-container')
                $modifiedName = $this.val(),
                    $modifiedNameLbl = $('label[for=' + $this.attr('id') + ']')
                if ($.trim($modifiedName) != '' && $.trim($modifiedName).length < 16 && $modifiedName.match(/^[a-z0-9'\s]{1,50}$/)) {
                    $modifiedNameLbl.removeClass('field-level-error')
                }
            })
            $('.select-device .rename', AddSafePass.CONTEXT).click(function () {
                var $this = $(this),
                    $spcontainer = $this.closest('div.safepass-container'),
                    $modifiedName = $spcontainer.find('div.device-content-form input').val(),
                    $modifiedNameLbl = $spcontainer.find('div.device-content-form label')
                if ($this.hasClass('btn-disabled')) {
                    return false
                }
                if ($.trim($modifiedName) == '') {
                    $modifiedNameLbl.addClass('field-level-error')
                    AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spCardNameEmptyMsg + '</p>')
                } else {
                    if ($.trim($modifiedName).length > 15 || !$modifiedName.match(/^[a-zA-Z0-9'\s]{1,50}$/)) {
                        $modifiedNameLbl.addClass('field-level-error')
                        AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spCardNameInvalidMsg + '</p>')
                    } else {
                        AddSafePass.fn.showProcessingWheel()
                        $modifiedNameLbl.removeClass('field-level-error')
                        var $indexToAct = $this.closest('div.safepass-container').find('input.indexToActOn').val()
                        $this.addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                        $this.find('.un-available').remove()
                        $this.append(' ' + btnDisable)
                        $.ajax({
                            url: languagePrefURLUpdate + 'renameSafepassCard.go',
                            data: {
                                safePassChangedName: $modifiedName,
                                indexToActOn: $indexToAct
                            },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {
                                $modifiedNameLbl.addClass('field-level-error')
                                AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spCardNameInvalidMsg + '</p>')
                                $this.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                                $this.find('.un-available').remove()
                                AddSafePass.fn.hideProcessingWheel()
                            },
                            success: function (data) {
                                stat = JSON.parse(data)
                                if (stat != '' && stat.result == 'success') {
                                    $modifiedNameLbl.removeClass('field-level-error')
                                    AddSafePass.fn.displayClientError('')
                                    $spcontainer.find('div.device-content-form, div.place-request-buttons').addClass('hide')
                                    $spcontainer.find('div.device-content, div.place-request').removeClass('hide')
                                    $spcontainer.find('div.device-content p .mobile-num').html(stat.deviceAlias)
                                } else {
                                    $modifiedNameLbl.addClass('field-level-error')
                                    AddSafePass.fn.displayClientError('<p class=\'aspErrMsg\'>' + spCardNameInvalidMsg + '</p>')
                                }
                                $this.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                                $this.find('.un-available').remove()
                                AddSafePass.fn.hideProcessingWheel()
                            }
                        })
                    }
                }
            })
        },
        formatPhoneNumber: function () {
            $('input.txtMobileNum').blur(function () {
                var $this = $(this),
                    $val = $this.val(),
                    $val = $val.replace(/\-/g, ''),
                    $len = $val.length
                if ($len > 6) {
                    $this.val($val.substring(0, 3) + '-' + $val.substring(3, 6) + '-' + $val.substring(6))
                } else {
                    if ($len > 3) {
                        $this.val($val.substring(0, 3) + '-' + $val.substring(3))
                    }
                }
            }).focus(function () {
                var $this = $(this),
                    $val = $this.val(),
                    $val = $val.replace(/\-/g, '')
                $this.val($val)
            }).keyup(function () {
                var $this = $(this),
                    $val = $this.val()
                if (isNaN($val) || $val.indexOf('.') != -1) {
                    $this.val($val.replace(new RegExp('[^0-9]+', 'g'), ''))
                }
            })
        },
        formatPhoneNumberEdit: function () {
            $('input.txtMobileNumEdit').blur(function () {
                var $this = $(this),
                    $val = $this.val(),
                    $val = $val.replace(/\-/g, ''),
                    $len = $val.length
                AddSafePass.fn.maskPhonNum($this)
                $val = $this.val()
                if ($len > 6) {
                    $this.val($val.substring(0, 3) + '-' + $val.substring(3, 6) + '-' + $val.substring(6))
                } else {
                    if ($len > 3) {
                        $this.val($val.substring(0, 3) + '-' + $val.substring(3))
                    }
                }
            }).focus(function () {
                var $this = $(this)
                $this.val($this.data('phoneNum'))
            })
        },
        maskPhonNum: function ($this) {
            var attrVal = $this.val()
            var attrId = $this.attr('id')
            var maskVal = ''
            if (attrVal.indexOf('x') == -1) {
                $this.data('phoneNum', attrVal)
            }
            for (var i = 0; i < 6; i++) {
                maskVal += 'x'
            }
            if (attrVal.length == 10) {
                maskVal = maskVal + attrVal.substring(6)
            }
            $this.val(maskVal)
        }
    }
}
var SafePassMobileUpdateModal = {
    CONTEXT: '.asa-modal-content-module .add-safe-pass-skin',
    CheckboxCheck: '',
    $selValue: '',
    $mobFileVal: '',
    $mobFileStatus: '',
    $selExistNewMobile: false,
    checkboxEventClick: false,
    $primarySelRadioMobile: false,
    $secondarySelRadioMobile: false,
    displayClientError: function (errorContent) {
        var $errorMsg = $('.error-message', '#clientSideModalErrors')
        $errorMsg.find('#commonError').removeClass('hide')
        $('.messaging-module').addClass('hide')
        if (errorContent === '') {
            $('#clientSideModalErrors').addClass('hide')
            return true
        } else {
            if ($errorMsg.length > 0 && errorContent != '') {
                $errorMsg.find('ul').remove()
                $errorMsg.find('p.aspErrMsg').remove()
                $errorMsg.append(errorContent)
                $('#clientSideModalErrors').removeClass('hide').attr('aria-live', 'rude').attr('tabindex', '-1').focus()
                return false
            }
        }
        return false
    },
    clientMobileValidate: function () {
        var $firstMob = $('#txtNewNumber', SafePassMobileUpdateModal.CONTEXT),
            $firstMobval = $firstMob.val(),
            $fldMbleNum = $('label[for=txtNewNumber]'),
            $liList = '',
            $UL,
            $errorMsg = $('#clientSideModalErrors'),
            $checkedBox = CheckboxCheck,
            $firstMobHdnVal = $('#firstMobileNumber').val(),
            $secondMobHdnVal = $('#secondMobileNumber').val(),
            $fstEmpEnrolledHdnValues = $('.sb-First-Mobile'),
            $sndEmpEnrolledHdnValues = $('.sb-Second-Mobile'),
            $empEnrolledNumbers = []
        if ($fstEmpEnrolledHdnValues.length > 0) {
            $fstEmpEnrolledHdnValues.each(function () {
                $empEnrolledNumbers.push($(this).val())
            })
        }
        if ($sndEmpEnrolledHdnValues.length > 0) {
            $sndEmpEnrolledHdnValues.each(function () {
                $empEnrolledNumbers.push($(this).val())
            })
        }
        if ($firstMob.length > 0 && $firstMob.is(':visible')) {
            if ($firstMobval === '') {
                $liList += '<li>' + mobNumReq + '</li>'
                $fldMbleNum.addClass('field-level-error')
            } else {
                if (!(/^[^\s]*$/.test($firstMobval)) || isNaN($firstMobval.replace(/\-/g, '')) || $firstMobval.indexOf('.') != -1) {
                    if (CheckboxCheck == 'cbAddMobilePilot1') {
                        $liList += '<li>' + firstMobNospace + '</li>'
                    } else {
                        if (CheckboxCheck == 'cbAddMobilePilot2') {
                            $liList += '<li>' + secondMobNospace + '</li>'
                        }
                    }
                    $fldMbleNum.addClass('field-level-error')
                } else {
                    if ($firstMobval.length < 12) {
                        if (CheckboxCheck == 'cbAddMobilePilot1') {
                            $liList += '<li>' + firstMobNospace + '</li>'
                        } else {
                            if (CheckboxCheck == 'cbAddMobilePilot2') {
                                $liList += '<li>' + secondMobNospace + '</li>'
                            }
                        }
                        $fldMbleNum.addClass('field-level-error')
                    } else {
                        if ($checkedBox == 'cbAddMobilePilot2' && checkboxEventClick == true && ($firstMobHdnVal == $firstMobval || ($firstMobHdnVal != '' && $firstMobHdnVal == $firstMobval.replace(/\-/g, '')))) {
                            $liList += '<li>' + twoDifferentNo + '</li>'
                            $fldMbleNum.addClass('field-level-error')
                        } else {
                            if (checkboxEventClick == false && (($selValue == 'editFirstmobile' && ($secondMobHdnVal == $firstMobval || $secondMobHdnVal == $firstMobval.replace(/\-/g, ''))) || ($selValue == 'editSecondMobile' && ($firstMobHdnVal == $firstMobval || $firstMobHdnVal == $firstMobval.replace(/\-/g, ''))))) {
                                $liList += '<li>' + twoDifferentNo + '</li>'
                                $fldMbleNum.addClass('field-level-error')
                            } else {
                                if ($('#txtFirstMob-hidden').length > 0 && $('#txtFirstMob-hidden').val() == $firstMobval.replace(/\-/g, '')) {
                                    $liList += '<li>' + twoDifferentNo + '</li>'
                                    $fldMbleNum.addClass('field-level-error')
                                } else {
                                    if ($.inArray($firstMobval.replace(/\-/g, ''), $empEnrolledNumbers) != -1) {
                                        if (typeof diffPriEmpMobNum != 'undefined') {
                                            $liList += '<li>' + diffPriEmpMobNum + '</li>'
                                        }
                                        $fldMbleNum.addClass('field-level-error')
                                    } else {
                                        if (primaryPhoneNumber == $firstMobval.replace(/\-/g, '')) {
                                            $liList += '<li>' + primaryDuplicationNo + '</li>'
                                            $fldMbleNum.addClass('field-level-error')
                                        } else {
                                            if (secondaryPhoneNumber == $firstMobval.replace(/\-/g, '')) {
                                                $liList += '<li>' + secondaryDuplicationNo + '</li>'
                                                $fldMbleNum.addClass('field-level-error')
                                            } else {
                                                $fldMbleNum.removeClass('field-level-error')
                                                $errorMsg.addClass('hide')
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        } else {
            if ($('#divRadioContent').is(':visible')) {
                if ($('#rbExistMobile').is(':checked') && $('input[id^=rbMobNum]').is(':visible') && !$('input[id^=rbMobNum]').is(':checked')) {
                    $liList += '<li>' + spSelectMobile + '</li>'
                } else {
                    if ($firstMobHdnVal != '' && checkboxEventClick == true && $firstMobHdnVal == SafePassMobileUpdateModal.mobileEditInput(SafePassMobileUpdateModal.$mobFileVal)) {
                        $liList += '<li>' + twoDifferentNo + '</li>'
                    } else {
                        if (checkboxEventClick == false && ($selValue == 'editFirstmobile' && $secondMobHdnVal == SafePassMobileUpdateModal.mobileEditInput(SafePassMobileUpdateModal.$mobFileVal) || $selValue == 'editSecondMobile' && $firstMobHdnVal == SafePassMobileUpdateModal.mobileEditInput(SafePassMobileUpdateModal.$mobFileVal))) {
                            $liList += '<li>' + twoDifferentNo + '</li>'
                        } else {
                            if ($('#txtFirstMob-hidden').length > 0 && $('#txtFirstMob-hidden').val() == SafePassMobileUpdateModal.$mobFileVal.replace(/\-/g, '')) {
                                $liList += '<li>' + twoDifferentNo + '</li>'
                            }
                        }
                    }
                }
            } else {
                $fldMbleNum.removeClass('field-level-error')
                $errorMsg.addClass('hide')
            }
        }
        if ($liList != '') {
            $liList = '<ul class=\'field-level-error\'>' + $liList + '</ul>'
        }
        return SafePassMobileUpdateModal.displayClientError($liList)
    },
    mobileTextInput: function () {
        $('input.input-new-number').blur(function () {
            var $this = $(this),
                $val = $this.val(),
                $val = $val.replace(/\-/g, ''),
                $len = $val.length
            if ($len > 6) {
                $this.val($val.substring(0, 3) + '-' + $val.substring(3, 6) + '-' + $val.substring(6))
            } else {
                if ($len > 3) {
                    $this.val($val.substring(0, 3) + '-' + $val.substring(3))
                }
            }
        }).focus(function () {
            var $this = $(this),
                $val = $this.val(),
                $val = $val.replace(/\-/g, '')
            $this.val($val)
        }).keyup(function () {
            var $this = $(this),
                $val = $this.val()
            if (isNaN($val) || $val.indexOf('.') != -1) {
                $this.val($val.replace(new RegExp('[^0-9]+', 'g'), ''))
            }
        })
    },
    mobileEditInput: function ($mobNumber) {
        var $val = $mobNumber.replace(/\-/g, ''),
            $len = $val.length
        if ($len > 6) {
            $val = $val.substring(0, 3) + '-' + $val.substring(3, 6) + '-' + $val.substring(6)
        } else {
            if ($len > 3) {
                $val = $val.substring(0, 3) + '-' + $val.substring(3)
            }
        }
        return $val
    },
    formatmobile: function (mobileNumber) {
        var formattedMobile = mobileNumber.replace(/\-/g, '')
        var $len = formattedMobile.length
        if ($len == 10) {
            formattedMobile = '******' + formattedMobile.substring(6)
        }
        return (formattedMobile.substring(0, 3) + '-' + formattedMobile.substring(3, 6) + '-' + formattedMobile.substring(6, 10))
    },
    resetSafePassModal: function () {
        if ($('.safepass-radio-content').length > 0) {
            $('.safepass-radio-content').show()
            $('input[type="radio"]').removeAttr('checked')
            $('input[type="text"]').val('')
            if (!($('.new-mobile-number').css('display') == 'none')) {
                $('.new-mobile-number').hide()
            }
            $('.select-default-number').hide()
        }
        if ($('input.input-new-number', '.safepass-content').val().length > 0) {
            $('input.input-new-number', '.safepass-content').val('')
        }
        if (!$('#clientSideModalErrors').hasClass('hide')) {
            $('#clientSideModalErrors').addClass('hide')
        }
        if ($('label').hasClass('field-level-error')) {
            $('label').removeClass('field-level-error')
        }
        $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
        $('a[name="sp-as-learnmore-sp"]').focus()
    },
    init: function () {
        if ($('input[type="radio"][name="def-mob-num"]', SafePassMobileUpdateModal.CONTEXT).length > 0) {
            $('input[type="radio"][name="def-mob-num"]', SafePassMobileUpdateModal.CONTEXT).bind('click', function () {
                SafePassMobileUpdateModal.$mobFileVal = $(this).val()
                SafePassMobileUpdateModal.$mobFileStatus = $(this).parent().find('[type=hidden]').val()
            })
        }
        if ($('.single-number', SafePassMobileUpdateModal.CONTEXT).length > 0) {
            SafePassMobileUpdateModal.$mobFileVal = $('.single-number').text()
        }
        $('#txtNewNumber', SafePassMobileUpdateModal.CONTEXT).blur(function () {
            var $this = $(this),
                $fldMbleOne = $('label[for=txtNewNumber]'),
                $firstMobval = $this.val(),
                $firstMobile = $('#firstMobileNumber').val(),
                $secondMobile = $('#secondMobileNumber').val()
            if ($firstMobval !== '' && (/^[^\s]*$/.test($firstMobval)) && $firstMobval.length > 11) {
                $fldMbleOne.removeClass('field-level-error')
            }
            if (($firstMobile !== $firstMobval) && ($secondMobile !== $firstMobval)) {
                $('#btnSaveMobChanges').addClass('btn-bofa-blue').removeClass('btn-disabled')
            }
        })
        $('input:checkbox').bind('click', function () {
            checkboxEventClick = true
            CheckboxCheck = $(this).attr('id')
            if (!$('.new-mobile-number').hasClass('hide')) {
                $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
            }
            if ($(this).is(':checked') && (CheckboxCheck == 'cbAddMobilePilot1' || CheckboxCheck == 'cbAddMobilePilot2')) {
                $('input[id^=rbMobNum]').each(function () {
                    $(this).closest('div').show()
                })
                var options = {
                    skin: 'modal-flex',
                    width: 680,
                    closeOnEscape: false,
                    onClose: SafePassMobileUpdateModal.resetSafePassModal
                }
                $('#add-safe-pass-modal').boaFlexModal(options)
                $('<span class=\'ada-hidden\'></span>').text(' Unavailable: Once a number is provided the button will be Enabled. ').appendTo('#btnSaveMobChanges')
            }
            $('#add-safe-pass-modal-modalClose').bind('click', function () {
                $('#' + CheckboxCheck).removeAttr('checked')
                if (CheckboxCheck == 'cbAddMobilePilot1' && checkboxEventClick) {
                    $('.second-mobile').attr('disabled', 'disabled')
                    $('.second-mobile').closest('.select-device').find('.normal-img').addClass('hide')
                    $('.second-mobile').closest('.select-device').find('.shade-img').removeClass('hide')
                    $('.second-mobile').closest('.select-device').find('label').addClass('inactive')
                }
            })
        })
        $('.editMobileNumber').bind('click', function () {
            checkboxEventClick = false
            $selValue = $(this).attr('id')
            if ($selValue == 'editFirstmobile') {
                if ($primarySelRadioMobile) {
                    $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                    $('#rbExistMobile').attr('checked', 'checked')
                    $('.select-default-number').show()
                    $('input[id^=rbMobNum]').each(function () {
                        if (SafePassMobileUpdateModal.mobileEditInput($(this).val()) == $('input[name="firstMobileNumber"]').val()) {
                            $(this).closest('div').hide()
                        } else {
                            $(this).closest('div').show()
                        }
                    })
                } else {
                    $('input[id^=rbMobNum]').each(function () {
                        $(this).closest('div').show()
                    })
                    $('.asa-modal-content-module .new-mobile-number .input-new-number').val($('input[name="firstMobileNumber"]').val())
                    $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                    if (typeof existingPhoneNumbers === 'undefined' || existingPhoneNumbers === '') {
                        $('.asa-modal-content-module #divNewMobile').show()
                        $('#btnSaveMobChanges').addClass('btn-bofa-blue').removeClass('btn-disabled')
                        $('#divRadioContent').hide()
                    }
                }
            } else {
                if ($secondarySelRadioMobile) {
                    $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                    $('#rbExistMobile').attr('checked', 'checked')
                    $('.select-default-number').show()
                    $('input[id^=rbMobNum]').each(function () {
                        if (SafePassMobileUpdateModal.mobileEditInput($(this).val()) == $('input[name="secondMobileNumber"]').val()) {
                            $(this).closest('div').hide()
                        } else {
                            $(this).closest('div').show()
                        }
                    })
                } else {
                    $('input[id^=rbMobNum]').each(function () {
                        $(this).closest('div').show()
                    })
                    $('.asa-modal-content-module .new-mobile-number .input-new-number').val($('input[name="secondMobileNumber"]').val())
                    $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                }
            }
            $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
            var options = {
                skin: 'modal-flex',
                width: 680,
                onClose: SafePassMobileUpdateModal.resetSafePassModal
            }
            $('#add-safe-pass-modal').boaFlexModal(options)
        })
        $('#rbExistMobile').bind('click', function () {
            $('.select-default-number').show()
            $('.new-mobile-number').hide()
            $selExistNewMobile = false
            $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
            $('#btnSaveMobChanges span.ada-hidden').remove()
        })
        $('#rbNewMobile').bind('click', function () {
            $selExistNewMobile = true
            $('.select-default-number').hide()
            $('.new-mobile-number').show()
            $('#btnSaveMobChanges', '.add-safe-pass-skin').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
            $('#btnSaveMobChanges span.ada-hidden').remove()
        })
        $('#btnSaveMobChanges').bind('click', function () {
            var $btnInactive = $(this).hasClass('btn-disabled')
            if (!$btnInactive) {
                if (checkboxEventClick) {
                    var $completedChangedNumber = $('#' + CheckboxCheck).closest('.select-device').next('.changed-mobile')
                    if (SafePassMobileUpdateModal.clientMobileValidate()) {
                        if (SafePassMobileUpdateModal.$mobFileVal.length > 0 && $selExistNewMobile == false) {
                            if (CheckboxCheck == 'cbAddMobilePilot1') {
                                $primarySelRadioMobile = true
                                $('#firstMobileNumberStatus').html(SafePassMobileUpdateModal.$mobFileStatus)
                                $('#cbAddMobilePilot2').attr('disabled', false)
                                $('#divSecondMobile .image-container .shade-img').addClass('hide')
                                $('#divSecondMobile .image-container .normal-img').removeClass('hide')
                            } else {
                                if (CheckboxCheck == 'cbAddMobilePilot2') {
                                    $secondarySelRadioMobile = true
                                    $('#secondMobileNumberStatus').html(SafePassMobileUpdateModal.$mobFileStatus)
                                }
                            }
                            $completedChangedNumber.find('.mobile-num').html(SafePassMobileUpdateModal.formatmobile(SafePassMobileUpdateModal.$mobFileVal))
                            $completedChangedNumber.find('input[type="hidden"]').val(SafePassMobileUpdateModal.mobileEditInput(SafePassMobileUpdateModal.$mobFileVal))
                            $completedChangedNumber.find('.hiddenMobileNumber').html(SafePassMobileUpdateModal.formatmobile(SafePassMobileUpdateModal.$mobFileVal))
                        } else {
                            if ($('.asa-modal-content-module .new-mobile-number .input-new-number').val().length > 0) {
                                if (CheckboxCheck == 'cbAddMobilePilot1') {
                                    $primarySelRadioMobile = false
                                    $('#firstMobileNumberStatus').html('Not Yet Verified')
                                    $('#cbAddMobilePilot2').attr('disabled', false)
                                    $('#divSecondMobile .image-container .shade-img').addClass('hide')
                                    $('#divSecondMobile .image-container .normal-img').removeClass('hide')
                                } else {
                                    if (CheckboxCheck == 'cbAddMobilePilot2') {
                                        $secondarySelRadioMobile = false
                                        $('#secondMobileNumberStatus').html('Not Yet Verified')
                                    }
                                }
                                $completedChangedNumber.find('.mobile-num').html(SafePassMobileUpdateModal.formatmobile($('.asa-modal-content-module .new-mobile-number .input-new-number').val()))
                                $completedChangedNumber.find('input[type="hidden"]').val($('.asa-modal-content-module .new-mobile-number .input-new-number').val())
                                $completedChangedNumber.find('.hiddenMobileNumber').html(SafePassMobileUpdateModal.formatmobile($('.asa-modal-content-module .new-mobile-number .input-new-number').val()))
                            }
                        }
                        $('#add-safe-pass-modal').dialog('close')
                        $('a[name="sp-as-learnmore-sp"]').focus()
                        $('#' + CheckboxCheck).closest('.select-device').hide()
                        $completedChangedNumber.show()
                        $('#btnAddPass', AddSafePass.CONTEXT).removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                        $('#btnAddPass', AddSafePass.CONTEXT).find('.un-available').remove()
                    }
                } else {
                    if (SafePassMobileUpdateModal.clientMobileValidate()) {
                        var $updateVal = ''
                        if (SafePassMobileUpdateModal.$mobFileVal.length > 0 && $selExistNewMobile == false) {
                            if ($selValue == 'editFirstmobile') {
                                $primarySelRadioMobile = true
                                $updateVal = $('#firstMobileNumber')
                                $('#firstMobileNumberStatus').html(SafePassMobileUpdateModal.$mobFileStatus)
                                $.post(languagePrefURLUpdate + 'editSafepassDevice.go', {
                                    selectedMobileNumber: 'primary'
                                })
                                $('#editFirstmobile').find('.hiddenMobileNumber').html(SafePassMobileUpdateModal.formatmobile(SafePassMobileUpdateModal.$mobFileVal))
                            } else {
                                if ($selValue == 'editSecondMobile') {
                                    $secondarySelRadioMobile = true
                                    $updateVal = $('#secondMobileNumber')
                                    $('#secondMobileNumberStatus').html(SafePassMobileUpdateModal.$mobFileStatus)
                                    $.post(languagePrefURLUpdate + 'editSafepassDevice.go', {
                                        selectedMobileNumber: 'secondary'
                                    })
                                    $('#editSecondMobile').find('.hiddenMobileNumber').html(SafePassMobileUpdateModal.formatmobile(SafePassMobileUpdateModal.$mobFileVal))
                                }
                            }
                            $updateVal.val(SafePassMobileUpdateModal.mobileEditInput(SafePassMobileUpdateModal.$mobFileVal))
                            $updateVal.parent().find('span.mobile-num').html(SafePassMobileUpdateModal.formatmobile(SafePassMobileUpdateModal.$mobFileVal))
                        } else {
                            if ($('.asa-modal-content-module .new-mobile-number .input-new-number').val().length > 0) {
                                if ($selValue == 'editFirstmobile') {
                                    $primarySelRadioMobile = false
                                    $updateVal = $('#firstMobileNumber')
                                    $('#firstMobileNumberStatus').html('Not Yet Verified')
                                    $.post(languagePrefURLUpdate + 'editSafepassDevice.go', {
                                        selectedMobileNumber: 'primary'
                                    })
                                    $('#editFirstmobile').find('.hiddenMobileNumber').html(SafePassMobileUpdateModal.formatmobile($('.asa-modal-content-module .new-mobile-number .input-new-number').val()))
                                } else {
                                    if ($selValue == 'editSecondMobile') {
                                        $secondarySelRadioMobile = false
                                        $updateVal = $('#secondMobileNumber')
                                        $('#secondMobileNumberStatus').html('Not Yet Verified')
                                        $.post(languagePrefURLUpdate + 'editSafepassDevice.go', {
                                            selectedMobileNumber: 'secondary'
                                        })
                                        $('#editSecondMobile').find('.hiddenMobileNumber').html(SafePassMobileUpdateModal.formatmobile($('.asa-modal-content-module .new-mobile-number .input-new-number').val()))
                                    }
                                }
                                $updateVal.val($('.asa-modal-content-module .new-mobile-number .input-new-number').val())
                                $updateVal.parent().find('span.mobile-num').html(SafePassMobileUpdateModal.formatmobile($('.asa-modal-content-module .new-mobile-number .input-new-number').val()))
                            }
                        }
                        $('#add-safe-pass-modal').dialog('close')
                    }
                }
            }
        })
        $('#btnCancelMobChanges').bind('click', function () {
            if (checkboxEventClick == true) {
                $('#' + CheckboxCheck).removeAttr('checked')
                if (CheckboxCheck == 'cbAddMobilePilot1') {
                    $('.second-mobile').attr('disabled', 'disabled')
                    $('.second-mobile').closest('.select-device').find('.normal-img').addClass('hide')
                    $('.second-mobile').closest('.select-device').find('.shade-img').removeClass('hide')
                    $('.second-mobile').closest('.select-device').find('label').addClass('inactive')
                }
            } else {
                $.post(languagePrefURLUpdate + 'cancelEditSafepassDevice.go')
            }
            $('#add-safe-pass-modal').dialog('close')
        })
    }
}
$(function () {
    if (window.location.pathname == '/login/languageToggle.go') {
        languagePrefURLUpdate = 'safepass/sm/'
    } else {
        languagePrefURLUpdate = ''
    }
    if (typeof existingPhoneNumbers === 'undefined' || existingPhoneNumbers === '') {
        $('#divNewMobile').removeClass('hide')
        $('#btnSaveMobChanges').addClass('btn-bofa-blue').removeClass('btn-disabled')
        $('#divRadioContent').remove()
    } else {
        var HTMLV = ''
        $.each(existingPhoneNumbers, function (index, value) {
            HTMLV += '<div><input type="radio" name="def-mob-num" value="' + value.phoneNumber + '" id="rbMobNum' + (index + 1) + '"><label class="def-first-num TL_NPI_L1" for="rbMobNum' + (index + 1) + '">' + formatPhoneNumber(value.phoneNumber) + '</label><input type="hidden" value="' + value.verificationStatus + '"></div>'
        })
        $('#divRadioContent .select-default-number #nmbr').html(HTMLV)
    }
    $('.safepass-vipaa-module .add-skin .safepass-container').hide()
    if ($('.safepass-vipaa-module .add-skin').length > 0) {
        AddSafePass.fn.init()
        AddSafePass.fn.textbtn()
        AddSafePass.fn.formatPhoneNumber()
        AddSafePass.fn.formatPhoneNumberEdit()
    }
    if ($('.asa-modal-content-module .add-safe-pass-skin').length > 0) {
        if (uciPilot) {
            $('.UCI-pilot .safepass-container').show()
            if ($('#primaryMobile').length > 0) {
                $('#cbAddMobilePilot2').removeAttr('disabled')
                $('#divSecondMobile .image-container').find('.shade-img').addClass('hide')
                $('#divSecondMobile .image-container').find('.normal-img').removeClass('hide')
            }
            SafePassMobileUpdateModal.mobileTextInput()
            SafePassMobileUpdateModal.init()
        }
    }
})

function formatPhoneNumber(s) {
    var s2 = ('' + s).replace(/\D/g, '')
    var m = s2.match(/^(\d{3})(\d{3})(\d{4})$/)
    return (!m) ? null : m[1] + '-' + m[2] + '-' + m[3]
}

function placeOrderNavigation(postData) {
    $('.safepass-vipaa-module .settings-skin').addClass('hide')
    AddSafePass.fn.hideProcessingWheel()
    $('#safePassContainer').addClass('hide')
    $('#manage-safepass').addClass('hide')
    $('#placeOrderContainer').removeClass('hide')
    var mobileNumberSelected = false
    var enteredMobileNumber = '',
        hiddenHTML = ''
    if (typeof postData.primaryMobileNumber != 'undefined' && postData.primaryMobileNumber != '') {
        enteredMobileNumber = postData.primaryMobileNumber
        hiddenHTML = '<input type="hidden" name="primaryMobileCheck" value="true"><input type="hidden" name="primaryMobileNumber" value="' + enteredMobileNumber + '"><input type="hidden" name="primaryMobileVerified" value="false">'
        $('.sp-primary-mbnumber').children('span').html(enteredMobileNumber + ' - no fee')
        $('.sp-secondary-device-row').hide()
        $('.sp-card-row').hide()
        $('.sp-primary-device-row').show()
        if (typeof postData.secondaryMobileNumber != 'undefined' && postData.secondaryMobileNumber != '') {
            enteredMobileNumber1 = postData.secondaryMobileNumber
            hiddenHTML += '<input type="hidden" name="secondaryMobileCheck" value="true"><input type="hidden" name="secondaryMobileNumber" value="' + enteredMobileNumber1 + '"><input type="hidden" name="secondaryMobileVerified" value="false">'
            $('.sp-secondary-mbnumber').children('span').html(enteredMobileNumber1 + ' - no fee')
            $('.sp-secondary-device-row').show()
        }
        if (typeof postData.primarySafePassCardCheck != 'undefined' && postData.primarySafePassCardCheck != '' && postData.primarySafePassCardCheck) {
            hiddenHTML += '<input type="hidden" name="primarySafePassCardCheck" value="true">'
            $('.sp-safeCard').children('span').html('$19.99 one-time fee')
            $('.sp-card-row').show()
        } else {
            hiddenHTML += '<input type="hidden" name="primarySafePassCardCheck" value="false">'
        }
        $('#placeOrder').prepend(hiddenHTML)
        mobileNumberSelected = true
    } else {
        if (typeof postData.secondaryMobileNumber != 'undefined' && postData.secondaryMobileNumber != '') {
            enteredMobileNumber = postData.secondaryMobileNumber
            hiddenHTML = '<input type="hidden" name="secondaryMobileCheck" value="true"><input type="hidden" name="secondaryMobileNumber" value="' + enteredMobileNumber + '"><input type="hidden" name="secondaryMobileVerified" value="false">'
            $('.sp-secondary-mbnumber').children('span').html(enteredMobileNumber + ' - no fee')
            $('.sp-primary-device-row').hide()
            $('.sp-card-row').hide()
            $('.sp-secondary-device-row').show()
            if (typeof postData.primarySafePassCardCheck != 'undefined' && postData.primarySafePassCardCheck != '' && postData.primarySafePassCardCheck) {
                hiddenHTML += '<input type="hidden" name="primarySafePassCardCheck" value="true">'
                $('.sp-safeCard').children('span').html('$19.99 one-time fee')
                $('.sp-card-row').show()
            } else {
                hiddenHTML += '<input type="hidden" name="primarySafePassCardCheck" value="false">'
            }
            $('#placeOrder').prepend(hiddenHTML)
            mobileNumberSelected = true
        } else {
            if (typeof postData.primarySafePassCardCheck != 'undefined' && postData.primarySafePassCardCheck != '' && postData.primarySafePassCardCheck) {
                hiddenHTML = '<input type="hidden" name="primarySafePassCardCheck" value="true">'
                $('#placeOrder').prepend(hiddenHTML)
                $('.sp-safeCard').children('span').html('$19.99 one-time fee')
                $('.sp-primary-device-row').hide()
                $('.sp-secondary-device-row').hide()
                $('.sp-card-row').show()
            }
        }
    }
    AddSafePass.fn.displayClientError('')
    if (typeof displayWidget != 'undefined' && displayWidget == 'true' && mobileNumberSelected) {
        AddSafePass.fn.getSafePassWidget('authenticate-widget', $('#btnPlaceOrder'), spwPageName, '-1')
    } else {
        $('div.place-order-section:eq(1)').addClass('hide')
        $('#btnPlaceOrder').removeClass('btn-disabled').addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
        $('#btnPlaceOrder').find('.un-available').remove()
    }
}

$(document).ready(function () {
    if ($('.safepass-vipaa-module .add-skin').length > 0) {
        if (isOBOUser && isOBOUser === 'true') {
            $('#cbAddMobilePilot1').attr('disabled', 'disabled')
            $('#cbAddMobilePilot2').attr('disabled', 'disabled')
        } else {
            $('#cbAddMobilePilot1').removeAttr('disabled')
            if ($('#cbAddMobilePilot1').length === 0) {
                $('#cbAddMobilePilot2').removeAttr('disabled')
            }
        }
    }
})
var uciPilot = true
var languagePrefURLUpdate = ''
var PlaceOrder = {
    CONTEXT: '.place-order-skin',
    placeOrderResult: '',
    secSafepassVerified: 'false',
    primaryMobileCheck: '',
    primaryMobileNumber: '',
    secondaryMobileCheck: '',
    secondaryMobileNumber: '',
    primarySafePassCardCheck: '',
    authorizationRequired: '',
    primaryMobileVerified: '',
    secondaryMobileVerified: '',
    primaryDeviceRefNo: '',
    secondaryDeviceRefNo: '',
    deviceCount: 1,
    speValidateMobilesCount: 1,
    otpPlaceOrderPage: 'false',
    otpWidgetCall: 'primarymobile',
    placeOrderFormSubmit: 'false',
    fn: {
        init: function () {
            if (!uciPilot) {
                $('#btnPlaceOrder', PlaceOrder.CONTEXT).on('click', function () {
                    var $this = $(this),
                        $inactive = $this.hasClass('btn-disabled')
                    if (!$inactive) {
                        $this.addClass('btn-disabled')
                        var $form = $this.closest('form')
                        $form.attr('action', languagePrefURLUpdate + 'placeOrder.go')
                        $('<input>').attr({
                            type: 'hidden',
                            id: 'artifact',
                            name: 'artifact',
                            value: $this.data('artifactVal')
                        }).appendTo($form)
                        $form.submit()
                    }
                })
            } else {
                if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                    $('#btnPlaceOrder', PlaceOrder.CONTEXT).addClass('btn-bofa-blue').attr('href', 'javascript:void(0);')
                } else {
                    $('#btnPlaceOrder', PlaceOrder.CONTEXT).addClass('btn-disabled').attr('href', 'javascript:void(0);')
                }
                $('#btnPlaceOrder', PlaceOrder.CONTEXT).on('click', function () {
                    var $this = $(this),
                        $inactive = $this.hasClass('btn-disabled')
                    if (!$inactive) {
                        $this.addClass('btn-disabled')
                        if ($('input[name=\'primarySafePassCardCheck\']').val() == 'true' && $('input[name=\'primaryMobileCheck\']').val() == undefined && $('input[name=\'secondaryMobileCheck\']').val() == undefined) {
                            var $form = $this.closest('form')
                            $form.attr('action', 'placeSafepassOrder.go')
                            $('<input>').attr({
                                type: 'hidden',
                                id: 'artifact',
                                name: 'artifact',
                                value: $this.data('artifactVal')
                            }).appendTo($form)
                            $form.submit()
                        } else {
                            PlaceOrder.deviceCount = 1
                            PlaceOrder.speValidateMobilesCount = 1
                            PlaceOrder.otpPlaceOrderPage = 'false'
                            PlaceOrder.otpWidgetCall = 'primarymobile'
                            PlaceOrder.placeOrderFormSubmit = 'false'
                            PlaceOrder.primaryMobileCheck = $('input[name=\'primaryMobileCheck\']').val()
                            PlaceOrder.primaryMobileNumber = $('input[name=\'primaryMobileNumber\']').val()
                            PlaceOrder.secondaryMobileCheck = $('input[name=\'secondaryMobileCheck\']').val()
                            PlaceOrder.secondaryMobileNumber = $('input[name=\'secondaryMobileNumber\']').val()
                            PlaceOrder.primarySafePassCardCheck = $('input[name=\'primarySafePassCardCheck\']').val()
                            PlaceOrder.authorizationRequired = $('input[name=\'authorizationRequired\']').val()
                            PlaceOrder.primaryMobileVerified = $('input[name=\'primaryMobileVerified\']').val()
                            PlaceOrder.secondaryMobileVerified = $('input[name=\'secondaryMobileVerified\']').val()
                            PlaceOrder.primaryMobileStatus = $('#firstMobileNumberStatus').text()
                            PlaceOrder.secondaryMobileStatus = $('#secondMobileNumberStatus').text()
                            if (PlaceOrder.primaryMobileCheck == 'true' && PlaceOrder.secondaryMobileCheck == 'true') {
                                PlaceOrder.speValidateMobilesCount = 2
                            }
                            $.ajax({
                                url: languagePrefURLUpdate + 'placeSafepassOrder.go',
                                type: 'POST',
                                data: {
                                    artifact: $this.data('artifactVal'),
                                    primarySafePassMobileCheck: PlaceOrder.primaryMobileCheck,
                                    primaryMobileNumber: (typeof PlaceOrder.primaryMobileNumber == 'undefined') ? PlaceOrder.primaryMobileNumber : PlaceOrder.primaryMobileNumber.replace(/-/g, ''),
                                    secondarySafePassMobileCheck: PlaceOrder.secondaryMobileCheck,
                                    secondaryMobileNumber: (typeof PlaceOrder.secondaryMobileNumber == 'undefined') ? PlaceOrder.secondaryMobileNumber : PlaceOrder.secondaryMobileNumber.replace(/-/g, ''),
                                    primaryMobileStatus: PlaceOrder.primaryMobileStatus,
                                    secondaryMobileStatus: PlaceOrder.secondaryMobileStatus,
                                    primarySafePassCardCheck: PlaceOrder.primarySafePassCardCheck
                                },
                                error: function (XMLHttpRequest, textStatus, errorThrown) {
                                    PlaceOrder.fn.manageError('enrollFailure')
                                },
                                success: function (data) {
                                    var data = $.parseJSON(data)
                                    if (data.result == 'fraud' || data.result == 'enrollFailure' || data.result == 'exception') {
                                        PlaceOrder.fn.manageError(data.result)
                                    } else {
                                        $('#editOrder', PlaceOrder.CONTEXT).attr('class', 'hide')
                                        PlaceOrder.primaryDeviceRefNo = data.primaryDeviceRefNo
                                        PlaceOrder.secondaryDeviceRefNo = data.secondaryMobileRefNo
                                        PlaceOrder.primaryOtpToken = data.acwEncryptedToken
                                        PlaceOrder.primaryOtpIv = data.acwEncryptedIv
                                        PlaceOrder.secondaryOtpToken = data.acwEncryptedToken2
                                        PlaceOrder.secondaryOtpIv = data.acwEncryptedIv2
                                        PlaceOrder.otpPlaceOrderPage = 'true'
                                        if (PlaceOrder.primaryMobileCheck == 'true' && PlaceOrder.primaryMobileStatus == 'Verified') {
                                            if (PlaceOrder.speValidateMobilesCount == 2) {
                                                var successFunction = function () {
                                                    if (PlaceOrder.secondaryMobileCheck == 'true' && PlaceOrder.secondaryMobileStatus == 'Verified') {
                                                        PlaceOrder.fn.validateMobile(PlaceOrder.secondaryMobileNumber, 'S', PlaceOrder.secondaryDeviceRefNo, 'mobileVerified')
                                                    } else {
                                                        if (PlaceOrder.secondaryMobileCheck == 'true' && PlaceOrder.secondaryMobileStatus == 'Not Yet Verified') {
                                                            PlaceOrder.otpWidgetCall = 'secondarymobile'
                                                            PlaceOrder.fn.getOTPWidget(PlaceOrder.secondaryOtpToken, PlaceOrder.secondaryOtpIv)
                                                        }
                                                    }
                                                }
                                                PlaceOrder.fn.validateMultipleMobile(PlaceOrder.primaryMobileNumber, 'P', PlaceOrder.primaryDeviceRefNo, 'mobileVerified', successFunction)
                                            } else {
                                                PlaceOrder.fn.validateMobile(PlaceOrder.primaryMobileNumber, 'P', PlaceOrder.primaryDeviceRefNo, 'mobileVerified')
                                            }
                                        } else {
                                            if (PlaceOrder.primaryMobileCheck == 'true' && PlaceOrder.primaryMobileStatus == 'Not Yet Verified') {
                                                PlaceOrder.otpWidgetCall = 'primarymobile'
                                                PlaceOrder.fn.getOTPWidget(PlaceOrder.primaryOtpToken, PlaceOrder.primaryOtpIv)
                                            } else {
                                                if (PlaceOrder.secondaryMobileCheck == 'true' && PlaceOrder.secondaryMobileStatus == 'Verified') {
                                                    PlaceOrder.fn.validateMobile(PlaceOrder.secondaryMobileNumber, 'S', PlaceOrder.secondaryDeviceRefNo, 'mobileVerified')
                                                } else {
                                                    if (PlaceOrder.secondaryMobileCheck == 'true' && PlaceOrder.secondaryMobileStatus == 'Not Yet Verified') {
                                                        PlaceOrder.otpWidgetCall = 'secondarymobile'
                                                        PlaceOrder.fn.getOTPWidget(PlaceOrder.secondaryOtpToken, PlaceOrder.secondaryOtpIv)
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            })
                        }
                    }
                })
            }
            $('#editOrder', PlaceOrder.CONTEXT).on('click', function () {
                $('.safepass-vipaa-module .settings-skin').removeClass('hide')
                $('#btnAddPass').removeClass('btn-disabled').addClass('btn-bofa-blue')
                $('#placeOrderContainer').addClass('hide')
                $('#manage-safepass').removeClass('hide')
                $('#safePassContainer').removeClass('hide')
                $('#authenticate-widget').html('')
            })
            $('#btnOrderCancel', PlaceOrder.CONTEXT).on('click', function () {
                $.post(languagePrefURLUpdate + 'cancelSafepassOrder.go')
            })
        },
        getOTPWidget: function (acwEncryptedToken, acwEncryptedIv) {
            if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                sendToOTPClientASA('mobileVerified', 'SUCCESS', 'Y')
            } else {
                $('.otp-sp-modal').children().remove()
                showOTPWidget('VIPAA-OTP-SAFEPASS', location.protocol + '//' + location.host, 'acwContainer', acwEncryptedToken, acwEncryptedIv)
                var options = {
                    skin: 'modal-flex',
                    width: 480
                }
                $('.modal-content-vipaa-module').boaFlexModal(options)
                $('.ui-widget-overlay').css('height', $(document).height())
            }
        },
        validateMultipleMobile: function (mobileNumber, rank, indexToActOn, artifact, successFunction) {
            $.ajax({
                url: languagePrefURLUpdate + 'validateMobile.go',
                type: 'POST',
                data: {
                    mobileNumber: mobileNumber.replace(/-/g, ''),
                    rank: rank,
                    indexToActOn: indexToActOn,
                    mobAjaxReq: 'true',
                    artifact: artifact
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    PlaceOrder.fn.manageError('activateFailure')
                },
                success: function (data) {
                    if (data.result == 'error') {
                        PlaceOrder.fn.manageError('activateFailure')
                    } else {
                        successFunction()
                    }
                }
            })
        },
        validateMobile: function (mobileNumber, rank, indexToActOn, artifact) {
            var $valform = $('<form>')
            $valform.attr('action', languagePrefURLUpdate + 'validateMobile.go')
            $valform.attr('method', 'POST')
            $('<input>').attr({
                type: 'hidden',
                id: 'mobileNumber',
                name: 'mobileNumber',
                value: mobileNumber.replace(/-/g, '')
            }).appendTo($valform)
            $('<input>').attr({
                type: 'hidden',
                id: 'rank',
                name: 'rank',
                value: rank
            }).appendTo($valform)
            $('<input>').attr({
                type: 'hidden',
                id: 'indexToActOn',
                name: 'indexToActOn',
                value: indexToActOn
            }).appendTo($valform)
            $('<input>').attr({
                type: 'hidden',
                id: 'mobAjaxReq',
                name: 'mobAjaxReq',
                value: 'false'
            }).appendTo($valform)
            $('<input>').attr({
                type: 'hidden',
                id: 'artifact',
                name: 'artifact',
                value: artifact
            }).appendTo($valform)
            $valform.appendTo(document.body).submit()
        },
        manageError: function (errorResult) {
            var $form = $('<form>')
            $form.attr('action', languagePrefURLUpdate + 'managePlaceOrderError.go')
            $form.attr('method', 'POST')
            $('<input>').attr({
                type: 'hidden',
                id: 'errorResult',
                name: 'errorResult',
                value: errorResult
            }).appendTo($form)
            $form.appendTo(document.body).submit()
        }
    }
}
$(function () {
    if ($('div.safepass-vipaa-module .place-order-skin').length > 0 || $('div.safepass-vipaa-module .add-skin').length > 0) {
        if (window.location.pathname == '/login/languageToggle.go') {
            languagePrefURLUpdate = 'safepass/sm/'
        } else {
            languagePrefURLUpdate = ''
        }
        PlaceOrder.fn.init()
    }
})

function callBackSPOTP(valToken, otpstatus, emtStatus) {
    if ($('div.safepass-vipaa-module .place-order-skin').length > 0 || $('div.safepass-vipaa-module .add-skin').length > 0) {
        if (PlaceOrder.otpPlaceOrderPage == 'true') {
            if ($('.otp-sp-modal').is(':visible')) {
                $('.otp-sp-modal').dialog('close')
            }
            if ((typeof otpstatus != 'undefined') && otpstatus == 'SUCCESS') {
                if (PlaceOrder.otpWidgetCall == 'secondarymobile' && PlaceOrder.secondaryMobileStatus == 'Not Yet Verified') {
                    PlaceOrder.secondaryMobileStatus = 'Verified'
                    PlaceOrder.fn.validateMobile(PlaceOrder.secondaryMobileNumber, 'S', PlaceOrder.secondaryDeviceRefNo, valToken)
                } else {
                    if (PlaceOrder.otpWidgetCall == 'primarymobile' && PlaceOrder.primaryMobileStatus == 'Not Yet Verified') {
                        PlaceOrder.primaryMobileStatus = 'Verified'
                        if (PlaceOrder.speValidateMobilesCount == 2) {
                            var successFunction = function () {
                                if (PlaceOrder.secondaryMobileCheck == 'true' && PlaceOrder.secondaryMobileStatus == 'Verified') {
                                    PlaceOrder.fn.validateMobile(PlaceOrder.secondaryMobileNumber, 'S', PlaceOrder.secondaryDeviceRefNo, valToken)
                                } else {
                                    if (PlaceOrder.secondaryMobileCheck == 'true' && PlaceOrder.secondaryMobileStatus == 'Not Yet Verified') {
                                        PlaceOrder.secondaryMobileStatus = 'Verified'
                                        PlaceOrder.placeOrderFormSubmit = 'true'
                                        PlaceOrder.fn.getOTPWidget(PlaceOrder.secondaryOtpToken, PlaceOrder.secondaryOtpIv)
                                    }
                                }
                            }
                            PlaceOrder.fn.validateMultipleMobile(PlaceOrder.primaryMobileNumber, 'P', PlaceOrder.primaryDeviceRefNo, valToken, successFunction)
                        } else {
                            PlaceOrder.fn.validateMobile(PlaceOrder.primaryMobileNumber, 'P', PlaceOrder.primaryDeviceRefNo, valToken)
                        }
                    } else {
                        if (PlaceOrder.placeOrderFormSubmit == 'true') {
                            PlaceOrder.placeOrderFormSubmit = 'false'
                            PlaceOrder.fn.validateMobile(PlaceOrder.secondaryMobileNumber, 'S', PlaceOrder.secondaryDeviceRefNo, valToken)
                        }
                    }
                }
            }
        } else {
            if ($('.modal-content-vipaa-module').is(':visible')) {
                $('.modal-content-vipaa-module').dialog('close')
            }
            if (typeof AddSafePass != 'undefined') {
                AddSafePass.btnToEnable.data('artifactVal', valToken)
                AddSafePass.btnToEnable.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                AddSafePass.btnToEnable.find('.un-available').remove()
            }
        }
    }
}

var totalNumOfPages = 0
var currentPLPage = 1
var targetPLPage = 0
var settingsaddSafepass = 'Add Safepass'
var languagePrefURLUpdate = ''
var safePassSetSkin = {
    CONTEXT: '.settings-skin',
    fn: {
        getSafePassWidget: function ($widgetContainer, btnToEnable) {
            if (typeof AddSafePass != 'undefined') {
                AddSafePass.btnToEnable = btnToEnable
                AddSafePass.btnToEnable.addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                AddSafePass.btnToEnable.find('.un-available').remove()
                AddSafePass.btnToEnable.append(' ' + btnDisable)
            } else {
                if (typeof ValidateMobile != 'undefined') {
                    ValidateMobile.btnToEnable = btnToEnable
                    ValidateMobile.btnToEnable.addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                    ValidateMobile.btnToEnable.find('.un-available').remove()
                    ValidateMobile.btnToEnable.append(' ' + btnDisable)
                }
            }
            var $count = $('.safepass-widget', safePassSetSkin.CONTEXT).index($widgetContainer)
            $widgetContainer.attr('id', 'spnfwidget' + $count)
            $widgetContainer.children().remove()
            if (typeof VIPAAServer != 'undefined' && typeof spwPageName != 'undefined' && typeof showNonFlashWidget != 'undefined') {
                showNonFlashWidget(spwPageName, '', '-1', VIPAAServer, true, 'spnfwidget' + $count)
            }
            if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                if (typeof AddSafePass != 'undefined') {
                    AddSafePass.fn.doSPWidgetCallback('bypassingwidget')
                } else {
                    ValidateMobile.fn.doSPWidgetCallback('bypassingwidget')
                }
            }
        },
        displayClientError: function (errorContent) {
            var $errorMsg = $('.error-message', '#clientSideErrors')
            $errorMsg.find('#commonError').removeClass('hide')
            if (errorContent === '') {
                $('#clientSideErrors').addClass('hide')
                return true
            } else {
                if ($errorMsg.length > 0 && errorContent != '') {
                    $errorMsg.find('ul').remove()
                    $errorMsg.find('p.aspErrMsg').remove()
                    $errorMsg.append(errorContent)
                    $('#clientSideErrors').removeClass('hide')
                    return false
                }
            }
            return false
        },
        loadcbDefaluts: function () {
            var $current_context = $('#chooseSettings', safePassSetSkin.CONTEXT)
            var $verifyIdentity = $('input.verify-identity', $current_context),
                $requireSafepass = $('input.require-safepass', $current_context)
            $verifyIdentity.data('defaultVal', $verifyIdentity.attr('checked'))
            $requireSafepass.data('defaultVal', $requireSafepass.attr('checked'))
        },
        chkSaveChanges: function () {
            var $current_context = $('#chooseSettings', safePassSetSkin.CONTEXT),
                $hiddenChkbox = $('#spBtnWidget', safePassSetSkin.CONTEXT)
            var $safePassWidget = $('#spBtnWidget', safePassSetSkin.CONTEXT),
                $verifyIdentity = $('input.verify-identity', $current_context),
                $requireSafepass = $('input.require-safepass', $current_context),
                $hiddenVerifyIdentity = $('input.verify-identity', $hiddenChkbox),
                $hiddenRequireSafepass = $('input.require-safepass', $hiddenChkbox),
                $verifyFlag = $verifyIdentity.attr('checked'),
                $requireFlag = $requireSafepass.attr('checked'),
                $saveChngs = $('#msps-submit', safePassSetSkin.CONTEXT)
            if ($verifyFlag == $verifyIdentity.data('defaultVal') && $requireFlag == $requireSafepass.data('defaultVal')) {
                $safePassWidget.addClass('hide')
                $('.safepass-vipaa-module .settings-skin .employee-heading').removeClass('hide')
                $('.safepass-vipaa-module .settings-skin #employee-settings').removeClass('hide')
            } else {
                safePassSetSkin.fn.getSafePassWidget($safePassWidget.find('div.safepass-widget'), $saveChngs)
                $safePassWidget.removeClass('hide')
                $('.safepass-vipaa-module .settings-skin .employee-heading').addClass('hide')
                $('.safepass-vipaa-module .settings-skin #employee-settings').addClass('hide')
                $saveChngs.removeClass('btn-bofa-blue').addClass('btn-disabled').removeAttr('href')
                $saveChngs.find('.un-available').remove()
                $saveChngs.append(' ' + btnDisable)
            }
            if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                $saveChngs.addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                $saveChngs.find('.un-available').remove()
            }
            if ($verifyFlag) {
                $hiddenVerifyIdentity.val('ON')
            } else {
                $hiddenVerifyIdentity.val('OFF')
            }
            if ($requireFlag) {
                $hiddenRequireSafepass.val('ON')
            } else {
                $hiddenRequireSafepass.val('OFF')
            }
        },
        init: function () {
            var $addSafepass = $('.safepass-vipaa-module .settings-skin .accordion .heading')
            $('.first-name:last', safePassSetSkin.CONTEXT).css('border-bottom', 'none')
            $addSafepass.click(function () {
                var $this = $(this),
                    $context = $this.closest('.accordion')
                var $contentArea = $this.closest('li').find('.content-area .device-selection')
                var $language = $('html').attr('lang').toLowerCase()
                $addSafepass.filter(function () {
                    var _this = $(this)
                    var continuTxt = _this.find('span:eq(0)').text().toLowerCase()
                    if ($language == 'es-us') {
                        return continuTxt == 'cancelar'
                    } else {
                        return continuTxt == 'cancel'
                    }
                }).find('span.active-link').text(settingsaddSafepass)
                $('div.content-area:visible', safePassSetSkin.CONTEXT).slideUp()
                $('.first-name .add-safepass-link.hide', safePassSetSkin.CONTEXT).removeClass('hide')
                var $toggleContent = $this.closest('li').find('.content-area')
                if ($toggleContent.is(':hidden')) {
                    $toggleContent.slideDown('slow')
                    $this.find('.active-link').text(settingscancelSafepass)
                    $('li.sp-device-row').find('.first-name').removeClass('first-name-brnone')
                    $this.closest('li.sp-device-row').find('.first-name').addClass('first-name-brnone')
                } else {
                    $toggleContent.slideUp('slow')
                    $this.find('.active-link').text(settingsaddSafepass)
                    $this.closest('li.sp-device-row').find('.first-name').removeClass('first-name-brnone')
                }
                if (!$('.sp-button-container', $contentArea).hasClass('hide')) {
                    $this.closest('li.sp-device-row').find('.add-safepass-link').addClass('hide')
                }
            })
            $('#msps-submit', safePassSetSkin.CONTEXT).click(function () {
                var $this = $(this)
                if (!$this.hasClass('btn-disabled')) {
                    var $current_context = $('#chooseSettings', safePassSetSkin.CONTEXT)
                    $this.addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                    $this.find('.un-available').remove()
                    $this.append(' ' + btnDisable)
                    var $form = $this.closest('form')
                    if ($('input.verify-identity', $current_context).attr('checked')) {
                        $form.find('input.verify-identity').attr('checked', true)
                    } else {
                        $form.find('input.verify-identity').attr('checked', false)
                    }
                    if ($('input.require-safepass', $current_context).attr('checked')) {
                        $form.find('input.require-safepass').attr('checked', true)
                    } else {
                        $form.find('input.require-safepass').attr('checked', false)
                    }
                    $('<input>').attr({
                        type: 'hidden',
                        id: 'artifact',
                        name: 'artifact',
                        value: $this.data('artifactVal')
                    }).appendTo($form)
                    $form.attr('action', languagePrefURLUpdate + 'saveSafePass.go')
                    $form.submit()
                }
            })
            $('a.hd-employees', safePassSetSkin.CONTEXT).click(function () {
                $(this).addClass('hide')
                $('a.show-employees', safePassSetSkin.CONTEXT).removeClass('hide')
                $('#employee-settings', safePassSetSkin.CONTEXT).slideToggle(400)
                return false
            })
            $('a.show-employees', safePassSetSkin.CONTEXT).click(function () {
                $(this).addClass('hide')
                $('a.hd-employees', safePassSetSkin.CONTEXT).removeClass('hide')
                $('#employee-settings', safePassSetSkin.CONTEXT).slideToggle(400)
                return false
            })
            $('.adding-safepass input:checkbox.second-mobile', safePassSetSkin.CONTEXT).each(function () {
                var $this = $(this),
                    $deviceSelection = $this.closest('.device-selection'),
                    $firstMobdevice = $('.first-mobile', $deviceSelection)
                if ($firstMobdevice.size() > 0 && !$firstMobdevice.is(':checked')) {
                } else {
                    $this.closest('.adding-safepass').find('.second-mobile', $deviceSelection).removeAttr('disabled')
                }
            })
            $('.adding-safepass input:checkbox', safePassSetSkin.CONTEXT).click(function () {
                var $this = $(this)
                var $deviceSelection = $this.closest('.device-selection')
                var $secondMob = $('.second-mobile', $deviceSelection).closest('.select-device')
                var $selectdevice = $this.closest('.select-device')
                var $firstMobdevice = $('.first-mobile', $deviceSelection)
                if ($firstMobdevice.size() > 0 && !$firstMobdevice.is(':checked')) {
                    $('.second-mobile', $deviceSelection).removeAttr('checked').attr('disabled', true)
                    $secondMob.find('label').removeClass('field-level-error')
                    $secondMob.find('.device-info, .selected').addClass('hide')
                    $secondMob.find('.safepass-label, .dispatch-time').removeClass('hide')
                    $secondMob.find('.one-time').removeClass('hide')
                    $secondMob.find('.device-info .sp-mobile-fld').val('')
                    $this.closest('.device-info').find(':text, select, textarea', '.adding-safepass').val('')
                } else {
                    $this.closest('.adding-safepass').find('.second-mobile', $deviceSelection).removeAttr('disabled')
                }
                if ($this.hasClass('safepass-card') && $this.is(':checked')) {
                    $selectdevice.find('.safepass-label, .dispatch-time').addClass('hide')
                    $selectdevice.find('.selected, .device-info').removeClass('hide')
                    $selectdevice.find('.select-device, .one-time').addClass('hide')
                    $this.closest('.device-info').find(':text, select, textarea', '.adding-safepass').val('')
                } else {
                    if ($this.hasClass('safepass-card') && !($this.is(':checked'))) {
                        $selectdevice.find(':text, select, textarea', '.adding-safepass').val('')
                        $selectdevice.find('.safepass-label, .dispatch-time').removeClass('hide')
                        $selectdevice.find('.selected, .device-info').addClass('hide')
                        $selectdevice.find('.select-device, .one-time').removeClass('hide')
                        $selectdevice.find('label').removeClass('field-level-error')
                    } else {
                        $selectdevice.find('.safepass-label, .dispatch-time').removeClass('hide')
                        $selectdevice.find('.selected, .device-info').addClass('hide')
                        $selectdevice.find('.select-device, .one-time').removeClass('hide')
                    }
                }
                var $chkBox = $this.closest('.adding-safepass').find('input:checked.safepass-card')
                var chBoxLength = $chkBox.length
                if (chBoxLength > 0) {
                    $this.closest('.sp-device-row').find('.add-safepass-link').addClass('hide')
                    $this.closest('.adding-safepass').find('.device-selection .sp-button-container').removeClass('hide')
                } else {
                    if (!$('.sp-yes').is(':visible')) {
                        $this.closest('.sp-device-row').find('.add-safepass-link').removeClass('hide')
                        $this.closest('.adding-safepass').find('.device-selection .sp-button-container').addClass('hide')
                    }
                }
            })
            $('.btnContinue', safePassSetSkin.CONTEXT).click(function () {
                var $this = $(this),
                    $addsafepass = $this.closest('div.adding-safepass'),
                    $placeOrder = $addsafepass.find('.place-order'),
                    $deviceSelection = $this.closest('.device-selection'),
                    $safepassMob1 = $('.mobile1', $deviceSelection),
                    $safepassMob2 = $('.mobile2', $deviceSelection),
                    $firstMob = $('.txtEditMobileOne', $deviceSelection),
                    $secondMob = $('.txtEditMobileTwo', $deviceSelection),
                    $firstMobHdnVal = $('.sb-First-Mobile', $deviceSelection),
                    errFlag = false,
                    errMsg = '',
                    wgtdisplayflag = false,
                    $empFstEnrolledMobile = $('#txtFirstMob-hidden'),
                    $empSndEnrolledMobile = $('#txtSecondMob-hidden'),
                    $fstEmpEnrolledHdnValues = $('.sb-First-Mobile', safePassSetSkin.CONTEXT),
                    $sndEmpEnrolledHdnValues = $('.sb-Second-Mobile', safePassSetSkin.CONTEXT),
                    $fstOwnEnrolledHndValues = $('#txteditMob1').val()
                $secOwnEnrolledHndValues = $('#txteditMob2').val()
                $empEnrolledNumbers = []
                if ($fstEmpEnrolledHdnValues.length > 0) {
                    $fstEmpEnrolledHdnValues.each(function () {
                        $empEnrolledNumbers.push($(this).val())
                    })
                }
                if ($('#txteditMob1').length > 0 && $('#txteditMob1').val() != '' && $('#txteditMob1').val().length === 10) {
                    $empEnrolledNumbers.push($('#txteditMob1').val())
                }
                if ($sndEmpEnrolledHdnValues.length > 0) {
                    $sndEmpEnrolledHdnValues.each(function () {
                        $empEnrolledNumbers.push($(this).val())
                    })
                }
                if ($('#txteditMob2').length > 0 && $('#txteditMob2').val() != '' && $('#txteditMob2').val().length === 10) {
                    $empEnrolledNumbers.push($('#txteditMob2').val())
                }
                $firstMob.val($safepassMob1.val())
                $secondMob.val($safepassMob2.val())
                if ($safepassMob1.is(':visible') && (isNaN($safepassMob1.val().replace(/\-/g, '')) || $safepassMob1.val().replace(/\-/g, '').length !== 10)) {
                    if (typeof settingsFMNospace != 'undefined') {
                        errMsg = errMsg + '<li>' + settingsFMNospace + '</li>'
                    }
                    $safepassMob1.closest('.select-device').find('label').addClass('field-level-error')
                    errFlag = true
                } else {
                    if ($safepassMob1.is(':visible') && (($empFstEnrolledMobile.length > 0 && $empFstEnrolledMobile.val() === $safepassMob1.val().replace(/\-/g, '')) || ($empSndEnrolledMobile.length > 0 && $empSndEnrolledMobile.val() === $safepassMob1.val().replace(/\-/g, '')) || ($.inArray($safepassMob1.val().replace(/\-/g, ''), $empEnrolledNumbers) != -1))) {
                        if (typeof diffPriMobileNum != 'undefined') {
                            errMsg = errMsg + '<li>' + diffPriMobileNum + '</li>'
                        }
                        $safepassMob1.closest('.select-device').find('label').addClass('field-level-error')
                        errFlag = true
                    } else {
                        $safepassMob1.closest('.select-device').find('label').removeClass('field-level-error')
                    }
                }
                if ($safepassMob2.is(':visible') && (isNaN($safepassMob2.val().replace(/\-/g, '')) || $safepassMob2.val().replace(/\-/g, '').length !== 10)) {
                    if (typeof settingsSMNospace != 'undefined') {
                        errMsg = errMsg + '<li>' + settingsSMNospace + '</li>'
                    }
                    $safepassMob2.closest('.select-device').find('label').addClass('field-level-error')
                    errFlag = true
                } else {
                    if ($safepassMob1.is(':visible') && $safepassMob2.is(':visible') && $safepassMob1.val().replace(/\-/g, '') === $safepassMob2.val().replace(/\-/g, '')) {
                        if (typeof settingsDifferentNos != 'undefined') {
                            errMsg = errMsg + '<li>' + settingsDifferentNos + '</li>'
                        }
                        $safepassMob2.closest('.select-device').find('label').addClass('field-level-error')
                        errFlag = true
                    } else {
                        if ($safepassMob1.is(':visible') && $firstMobHdnVal.length > 0 && $firstMobHdnVal.val().replace(/\-/g, '') === $safepassMob1.val().replace(/\-/g, '')) {
                            if (typeof settingsDifferentNos != 'undefined') {
                                errMsg = errMsg + '<li>' + settingsDifferentNos + '</li>'
                            }
                            $safepassMob1.closest('.select-device').find('label').addClass('field-level-error')
                            errFlag = true
                        } else {
                            if ($safepassMob2.is(':visible') && $firstMobHdnVal.length > 0 && $firstMobHdnVal.val().replace(/\-/g, '') === $safepassMob2.val().replace(/\-/g, '')) {
                                if (typeof settingsDifferentNos != 'undefined') {
                                    errMsg = errMsg + '<li>' + settingsDifferentNos + '</li>'
                                }
                                $safepassMob2.closest('.select-device').find('label').addClass('field-level-error')
                                errFlag = true
                            } else {
                                if ($safepassMob2.is(':visible') && (($empFstEnrolledMobile.length > 0 && $empFstEnrolledMobile.val() === $safepassMob2.val().replace(/\-/g, '')) || ($empSndEnrolledMobile.length > 0 && $empSndEnrolledMobile.val() === $safepassMob2.val().replace(/\-/g, '')) || ($.inArray($safepassMob2.val().replace(/\-/g, ''), $empEnrolledNumbers) != -1))) {
                                    if (typeof diffSecMobileNum != 'undefined') {
                                        errMsg = errMsg + '<li>' + diffSecMobileNum + '</li>'
                                    }
                                    $safepassMob2.closest('.select-device').find('label').addClass('field-level-error')
                                    errFlag = true
                                } else {
                                    $safepassMob2.closest('.select-device').find('label').removeClass('field-level-error')
                                }
                            }
                        }
                    }
                }
                if (errFlag) {
                    safePassSetSkin.fn.displayClientError('<ul>' + errMsg + '</ul>')
                    return false
                }
                if ($('.first-mobile', $deviceSelection).is(':checked')) {
                    $('.name2, div.device-selection', $addsafepass).addClass('hide')
                    $('.place-order', $addsafepass).removeClass('hide')
                    $('.place-order .first-mobile-number', $addsafepass).removeClass('hide')
                    $('.place-order .first-mobile-number span', $addsafepass).text($firstMob.val())
                    $('.first-mobile-settings', $addsafepass).val($firstMob.val())
                    $('.sps-PM-CBVal', $addsafepass).val('true')
                    wgtdisplayflag = true
                } else {
                    $('.place-order .first-mobile-number', $addsafepass).addClass('hide')
                    $('.first-mobile-settings', $addsafepass).val('')
                    $('.sps-PM-CBVal', $addsafepass).val('false')
                }
                if ($('.second-mobile', $deviceSelection).is(':checked')) {
                    $('.name2, div.device-selection', $addsafepass).addClass('hide')
                    $('.place-order', $addsafepass).removeClass('hide')
                    $('.place-order .second-mobile-number', $addsafepass).removeClass('hide')
                    $('.place-order .second-mobile-number span', $addsafepass).text($secondMob.val())
                    $('.second-mobile-settings', $addsafepass).val($secondMob.val())
                    $('.sps-SM-CBVal', $addsafepass).val('true')
                    wgtdisplayflag = true
                } else {
                    $('.place-order .second-mobile-number', $addsafepass).addClass('hide')
                    $('.second-mobile-settings', $addsafepass).val('')
                    $('.sps-SM-CBVal', $addsafepass).val('false')
                }
                if ($('.order-card', $deviceSelection).is(':checked') && $('.order-card', $deviceSelection).size() > 0) {
                    $('.name2, div.device-selection', $addsafepass).addClass('hide')
                    $('.place-order', $addsafepass).removeClass('hide')
                    $('.place-order .enrolled-safepass', $addsafepass).removeClass('hide')
                    $('.safepass-card-settings', $addsafepass).val('true')
                } else {
                    $('.place-order .enrolled-safepass', $addsafepass).addClass('hide')
                    $('.safepass-card-settings', $addsafepass).val('false')
                }
                if (wgtdisplayflag) {
                    $addsafepass.find('.safepass-widget').removeClass('hide')
                    $addsafepass.find('.placeOrder').addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                    $addsafepass.find('.un-available').remove()
                    $addsafepass.append(' ' + btnDisable)
                    safePassSetSkin.fn.getSafePassWidget($addsafepass.find('.safepass-widget'), $addsafepass.find('.placeOrder'))
                } else {
                    $addsafepass.find('.safepass-widget').addClass('hide')
                    $addsafepass.find('.placeOrder').addClass('btn-bofa-blue').removeClass('btn-disabled').attr('href', 'javascript:void(0);')
                    $addsafepass.find('.un-available').remove()
                }
            })
            $('.btnCancel', safePassSetSkin.CONTEXT).click(function () {
                var $this = $(this)
                var $contentArea = $this.closest('li').find('.content-area')
                $contentArea.slideUp()
                var $deviceRow = $this.closest('li.sp-device-row')
                var linkTxt = $('a span.active-link', $deviceRow)
                $('.add-safepass-link', $deviceRow).removeClass('hide')
                var $addsafepass = $this.closest('div.adding-safepass')
                var $firstMobile = $addsafepass.find('.first-mobile')
                $this.closest('li.sp-device-row').find('.first-name').removeClass('first-name-brnone')
                $('input:checkbox', $addsafepass).removeAttr('checked')
                $('label', $addsafepass).removeClass('field-level-error')
                $('.safepass-label.hide, .dispatch-time.hide, .one-time.hide, .device-selection.hide', $addsafepass).removeClass('hide')
                $('.selected, .place-order, .device-info', $addsafepass).addClass('hide')
                $('input:not(":checkbox")', $addsafepass).val('')
                if ($('.sp-yes:visible', $contentArea).length == 0) {
                    $addsafepass.find('.device-selection .sp-button-container').addClass('hide')
                } else {
                    $addsafepass.find('.device-selection .sp-button-container').removeClass('hide')
                }
                if ($('.first-mobile', $addsafepass).length > 0) {
                    $('.second-mobile', $addsafepass).attr('disabled', true)
                }
                linkTxt.text() == settingscancelSafepass ? linkTxt.html(settingsaddSafepass) : ''
            })
            $('.place-order .cancelOrder', safePassSetSkin.CONTEXT).click(function () {
                var $this = $(this)
                var $contentArea = $this.closest('li').find('.content-area')
                $contentArea.slideUp()
                var $deviceRow = $this.closest('li.sp-device-row')
                var linkTxt = $('a span.active-link', $deviceRow)
                $('a.add-safepass', $deviceRow).click()
                $('.add-safepass-link.hide', $deviceRow).removeClass('hide')
                var $addsafepass = $this.closest('div.adding-safepass')
                $('input:not(":checkbox")', $addsafepass).val('')
                $('input:checkbox', $addsafepass).removeAttr('checked')
                $('.safepass-label.hide, .dispatch-time.hide, .one-time.hide, .device-selection.hide', $addsafepass).removeClass('hide')
                $('.selected', $addsafepass).addClass('hide')
                $('.device-info', $addsafepass).addClass('hide')
                $('div.place-order', $contentArea).addClass('hide')
                if ($('.sp-yes:visible', $contentArea).length == 0) {
                    $('.device-selection .sp-button-container', $addsafepass).addClass('hide')
                } else {
                    $('.device-selection .sp-button-container', $addsafepass).removeClass('hide')
                }
                if ($('.first-mobile', $addsafepass).length > 0) {
                    $('.second-mobile', $addsafepass).attr('disabled', true)
                } else {
                    if ($('.first-mobile', $addsafepass).length == 0) {
                        $('.second-mobile', $addsafepass).attr('disabled', false)
                    }
                }
                linkTxt.text() == settingscancelSafepass ? linkTxt.html(settingsaddSafepass) : ''
                $.post(languagePrefURLUpdate + 'sbPlaceOrderCancel.go')
            })
            $('.place-order .editOrder', safePassSetSkin.CONTEXT).click(function () {
                var $this = $(this)
                var $addsafepass = $this.closest('div.adding-safepass')
                $('div.place-order', $addsafepass).addClass('hide')
                $('div.device-selection.hide, .name2.hide', $addsafepass).removeClass('hide')
            })
            $('.place-order .placeOrder', safePassSetSkin.CONTEXT).click(function () {
                var $this = $(this)
                if (!$this.hasClass('btn-disabled')) {
                    $this.addClass('btn-disabled').removeClass('btn-bofa-blue').removeAttr('href')
                    var $form = $this.closest('form')
                    $('<input>').attr({
                        type: 'hidden',
                        id: 'artifact',
                        name: 'artifact',
                        value: $this.data('artifactVal')
                    }).appendTo($form)
                    $form.attr('action', languagePrefURLUpdate + 'subUserPlaceOrder.go')
                    $form.submit()
                }
            })
            $('#chooseSettings input:checkbox', safePassSetSkin.CONTEXT).click(function () {
                safePassSetSkin.fn.chkSaveChanges()
            })
            setTimeout(function () {
                safePassSetSkin.fn.loadcbDefaluts()
                $('#msps-cancel', safePassSetSkin.CONTEXT).click(function () {
                    $('.safepass-vipaa-module .settings-skin .employee-heading').removeClass('hide')
                    $('.safepass-vipaa-module .settings-skin #employee-settings').removeClass('hide')
                    var $current_context = $('#chooseSettings', safePassSetSkin.CONTEXT),
                        $verify_identityflag_check = ($('#sesVerifyIdentity').data('defaultVal') != undefined),
                        $require_safepassflag_check = ($('#sesRequireSafepass').data('defaultVal') != undefined)
                    $('#spBtnWidget', safePassSetSkin.CONTEXT).addClass('hide')
                    $('input.verify-identity', $current_context).attr('checked', $verify_identityflag_check)
                    $('input.require-safepass', $current_context).attr('checked', $require_safepassflag_check)
                    $.post(languagePrefURLUpdate + 'dontSaveSafepassSettings.go')
                })
                $('input.sp-mobile-fld', safePassSetSkin.CONTEXT).blur(function () {
                    var $this = $(this),
                        $val = $this.val(),
                        $val = $val.replace(/\-/g, ''),
                        $len = $val.length
                    if ($len > 6) {
                        $this.val($val.substring(0, 3) + '-' + $val.substring(3, 6) + '-' + $val.substring(6))
                    } else {
                        if ($len > 3) {
                            $this.val($val.substring(0, 3) + '-' + $val.substring(3))
                        }
                    }
                }).focus(function () {
                    var $this = $(this),
                        $val = $this.val(),
                        $val = $val.replace(/\-/g, '')
                    $this.val($val)
                }).keyup(function () {
                    var $this = $(this),
                        $val = $this.val()
                    if (isNaN($val) || $val.indexOf('.') != -1) {
                        $this.val($val.replace(new RegExp('[^0-9]+', 'g'), ''))
                    }
                })
            }, 500)
            setTimeout(function () {
                var $deviceRow = $('li.sp-device-row', safePassSetSkin.CONTEXT)
                var $deviceTotalAccount = $deviceRow.length
                var $devicePageLimit = 20
                $deviceRow.addClass('hide')
                currentPLPage = 1
                for (var i = 0; i < $devicePageLimit; i++) {
                    $deviceRow.eq(i).removeClass('hide')
                }
                var $nomberOfPages = Math.ceil($deviceTotalAccount / $devicePageLimit)
                var $getAllTags = $('#linkFirstBtm,#norFirstBtm,#linkPreviousBtm,#norPreviousBtm,#linkNextBtm,#norNextBtm,#linkLastBtm,#norLastBtm', safePassSetSkin.CONTEXT)
                $getAllTags.addClass('hide')
                if ($deviceTotalAccount <= 20) {
                    $('div.pagination', safePassSetSkin.CONTEXT).addClass('hide')
                } else {
                    $('div.pagination', safePassSetSkin.CONTEXT).removeClass('hide')
                    $('span.current-page', safePassSetSkin.CONTEXT).html(currentPLPage)
                    $('span.total-pages', safePassSetSkin.CONTEXT).html($nomberOfPages)
                    if ($nomberOfPages <= 5) {
                        $('#seperatorPrevBtm,#seperatorNextBtm', safePassSetSkin.CONTEXT).addClass('hide')
                        $('#norPreviousBtm,#linkNextBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                    } else {
                        if ($nomberOfPages > 5) {
                            $('#norFirstBtm,#norPreviousBtm,#linkNextBtm,#linkLastBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                        }
                    }
                }
                $('div.pagination a', safePassSetSkin.CONTEXT).click(function () {
                    var fromVal = 0,
                        toValue = 0,
                        $this = $(this),
                        $linkId = $this.attr('id')
                    if ($linkId.indexOf('Next') != -1) {
                        fromVal = (currentPLPage * $devicePageLimit)
                        toVal = (currentPLPage * $devicePageLimit) + $devicePageLimit - 1
                        currentPLPage++
                    } else {
                        if ($linkId.indexOf('Previous') != -1) {
                            currentPLPage--
                            fromVal = (currentPLPage * $devicePageLimit) - $devicePageLimit
                            toVal = (currentPLPage * $devicePageLimit) - 1
                        } else {
                            if ($linkId.indexOf('First') != -1) {
                                fromVal = 0
                                toVal = $devicePageLimit - 1
                                currentPLPage = 1
                            } else {
                                if ($linkId.indexOf('Last') != -1) {
                                    var modulesVal = $deviceTotalAccount % $devicePageLimit
                                    if (modulesVal == 0) {
                                        fromVal = $deviceTotalAccount - $devicePageLimit
                                    } else {
                                        fromVal = $deviceTotalAccount - modulesVal
                                    }
                                    toVal = $deviceTotalAccount
                                    currentPLPage = $nomberOfPages
                                }
                            }
                        }
                    }
                    $getAllTags.addClass('hide')
                    $('.current-page').html(currentPLPage)
                    var pgflag = ($nomberOfPages <= 5) ? false : true
                    if (currentPLPage == 1) {
                        $('#norPreviousBtm,#linkNextBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                        if (pgflag) {
                            $('#norFirstBtm,#linkLastBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                        }
                        $('#seperatorNextBtm', safePassSetSkin.CONTEXT).addClass('hide')
                    } else {
                        if (currentPLPage > 1 && currentPLPage < $nomberOfPages) {
                            $('#linkPreviousBtm,#linkNextBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                            $('#seperatorNextBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                            if (pgflag) {
                                $('#linkFirstBtm,#linkLastBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                            }
                        } else {
                            if (currentPLPage == $nomberOfPages) {
                                $('#linkPreviousBtm,#norNextBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                                if (pgflag) {
                                    $('#linkFirstBtm,#norLastBtm', safePassSetSkin.CONTEXT).removeClass('hide')
                                }
                                $('#seperatorNextBtm', safePassSetSkin.CONTEXT).addClass('hide')
                            }
                        }
                    }
                    var $deviceAccount = $('li.sp-device-row', safePassSetSkin.CONTEXT)
                    $deviceAccount.addClass('hide')
                    $deviceRow.each(function (index) {
                        if (index >= fromVal && index <= toVal) {
                            $deviceAccount.eq(index).removeClass('hide')
                        }
                    })
                })
                $('.adding-safepass .name', safePassSetSkin.CONTEXT).find('.sp-span-check').closest('.name').addClass('ph-spanish')
            }, 500)
        }
    }
}
$(document).ready(function () {
    if ($('.safepass-vipaa-module .settings-skin').size() > 0) {
        if (window.location.pathname == '/login/languageToggle.go') {
            languagePrefURLUpdate = 'safepass/sm/'
        } else {
            languagePrefURLUpdate = ''
        }
        safePassSetSkin.fn.init()
    }
})
var alertWidgetlanguage = $('html').attr('lang')
$(document).ready(function () {
    if ($('.sc-vipaa-module .security-alerts-skin').length > 0) {
        $('a.aipd-modal').click(function () {
            invokeWidget('Notify', 'Primary', alertWidgetlanguage, widgetURL)
            var targetModalId = $(this).attr('rel')
            var $targetModal = $('.' + targetModalId)
            var options = {
                size: 'flex-width',
                buttons: {},
                width: 980,
                onClose: typeof boa.vipaa === 'object' && typeof boa.vipaa.resetCMParentPageID === 'function' ? boa.vipaa.resetCMParentPageID : function () {
                }
            }
            if (typeof cmCreatePageviewTag == 'function' && cmSecurityAlertsModal !== 'PVParamsMissing' && typeof cmCategoryId !== 'undefined' && typeof cmSessionID !== 'undefined') {
                cmCreatePageviewTag(cmSecurityAlertsModal + locAppendage, null, null, cmCategoryId, false, false, null, false, false, null, null, null, null, cmSessionID, null, null, null, null, null, null, null)
            }
            $targetModal.boaFlexModal(options)
        })
        XEngineWidgetFramework.callWidget('/mycommunications/alerts/alertsSettingsWidget.go?reqType=SEC_CEN_ALERT&caller=vipaa', '/mycommunications/widget/alerts/alert-settings-widget', '', 'alert-acm', alertWidgetlanguage, 'Desktop', 'true', 'widgetDegradedDivId', 10000)

        function invokeWidget(purpose, significance, locale, widgetURL) {
            widgetURL = '/customer/manageContacts/show-contacts-widget.go?purpose=' + purpose + '&significance=' + significance + '&clientType=vipaa'
            var widgetPageLocation = '/customer/manageContacts/update-contact-preferences'
            XEngineWidgetFramework.callWidget(widgetURL, widgetPageLocation, '', 'aipd-content-id', locale, 'Desktop', 'true', 'widget-include-module-FA749A15-32A6-49B9-B390-4535D2DA2DEE', 10000)
        }
    }
})
var printSecurityTipsPDF = function () {
    var mywindow = window.open('', 'my', '')
    if (mywindow.opener.document.getElementsByTagName('html') [0].getAttribute('lang').toLowerCase() === 'en-us') {
        mywindow.document.write('<html><head><title>Bank of America | Online Banking | Security Tips</title><style type="text/css">html,body{height:100%}</style></head><body>')
        mywindow.document.write('<iframe height=\'100%\' width=\'100%\' id=\'securitytipsframe\'  src=\'' + securityTipsPDFFile + '\'></iframe></body>')
    } else {
        mywindow.document.write('<html><head><title>Bank of America | Banca en L&iacute;nea | Consejos sobre seguridad</title><style type="text/css">html,body{height:100%}</style></head><body>')
        mywindow.document.write('<iframe height=\'100%\' width=\'100%\' id=\'securitytipsframe\'  src=\'' + securityTipsPDFFile + '\'></iframe></body>')
    }
    mywindow.document.write('<script type=\'text/javascript\'>var pdfframe = document.getElementById(\'securitytipsframe\'); pdfframe.focus(); pdfframe.contentWindow.print(); </script></html>')
    mywindow.document.close()
    mywindow.focus()
    return true
}
$(document).ready(function () {
    $(document.body).on('click', '.sc-vipaa-module .security-tips-skin .tips-item', function (event) {
        $('.section-heading').removeClass('selected')
        $(this).children('.section-heading').addClass('selected')
        $('.security-advice-section, .how-we-protect-you, .how-to-protect-yourself, .footnote-skin').addClass('hide')
        $('.' + $(this).prop('rel')).removeClass('hide')
        if ($(this).index() == 5) {
            $('.footnote-skin').removeClass('hide')
        }
    })
    $(document.body).on('click', '.sc-vipaa-module .security-tips-skin .tips-print', function (event) {
        printSecurityTipsPDF()
    })
})
$(document).ready(function () {
    var $scVipaaModule = $('.sc-vipaa-module .sign-in-history-skin')
    if ($scVipaaModule.length > 0) {
        $(document.body).on('click', 'a[name^="close-location-layer"]', function (event) {
            var parentId = $(this).attr('rel')
            $('.ui-dialog-content').trigger('dialogclose').parent().remove()
            $('#' + parentId).focus()
        })
        historyArrDateAsc = historyArr.slice().reverse()
        historyArrDeviceAsc = historyArr.slice()
        historyArrDeviceDesc = historyArrDateAsc.slice()
        $.each(historyArrDateAsc, function (i, value) {
            if (i == 0 && multipleYearFlag == true) {
                historyTableDateAsc = historyTableDateAsc + '<tr><td colspan="5" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
            }
            if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                historyTableDateAsc = historyTableDateAsc + '<tr><td class="first-cell"><span class="' + value.access + '"></span></td><td class="TL_NPI_L1 bold">' + value.deviceName + '</td><td>' + value.historyDate + '</td><td>' + value.historyTime + '</td></tr>'
            } else {
                historyTableDateAsc = historyTableDateAsc + '<tr><td class="first-cell"><span class="' + value.access + '"></span></td><td class="TL_NPI_L1 bold">' + value.deviceName + '</td><td>' + value.historyDate + '</td><td>' + value.historyTime + '</td><td>' + value.historyLocation + '<br/>' + value.internetProvider + '</td></tr>'
            }
            if (value.newRowInsert == 'true' && i != 0 && multipleYearFlag == true) {
                if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                    historyTableDateAsc = historyTableDateAsc + '<tr><td colspan="4" class="new-year">' + (parseInt(value.yearValue) + 1) + ' Sign-Ins</td></tr>'
                } else {
                    historyTableDateAsc = historyTableDateAsc + '<tr><td colspan="5" class="new-year">' + (parseInt(value.yearValue) + 1) + ' Sign-Ins</td></tr>'
                }
            }
        })
        historyArrDateDesc = historyArrDateAsc.slice().reverse()
        $.each(historyArrDateDesc, function (i, value) {
            if (i == 0 && multipleYearFlag == true) {
                if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                    historyTableDateDesc = historyTableDateDesc + '<tr><td colspan="4" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                } else {
                    historyTableDateDesc = historyTableDateDesc + '<tr><td colspan="5" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                }
            }
            if (value.newRowInsert == 'true' && i != 0 && multipleYearFlag == true) {
                if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                    historyTableDateDesc = historyTableDateDesc + '<tr><td colspan="4" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                } else {
                    historyTableDateDesc = historyTableDateDesc + '<tr><td colspan="5" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                }
            }
            if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                historyTableDateDesc = historyTableDateDesc + '<tr><td class="first-cell"><span class="' + value.access + '"></span></td><td class="TL_NPI_L1 bold">' + value.deviceName + '</td><td>' + value.historyDate + '</td><td>' + value.historyTime + '</td></tr>'
            } else {
                historyTableDateDesc = historyTableDateDesc + '<tr><td class="first-cell"><span class="' + value.access + '"></span></td><td class="TL_NPI_L1 bold">' + value.deviceName + '</td><td>' + value.historyDate + '</td><td>' + value.historyTime + '</td><td>' + value.historyLocation + '<br/>' + value.internetProvider + '</td></tr>'
            }
        })
        $('.sc-vipaa-module .sign-in-history-skin table tbody').empty().html(historyTableDateDesc)
        historyArrDeviceDesc = historyArrDateDesc.slice()
        $.each(historyArrDeviceDesc, function (i, value) {
            if (i == 0 && multipleYearFlag == true) {
                if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                    historyTableDeviceDesc = historyTableDeviceDesc + '<tr><td colspan="4" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                } else {
                    historyTableDeviceDesc = historyTableDeviceDesc + '<tr><td colspan="5" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                }
            }
            if ((value.newRowInsert == 'true' && i != 0 && multipleYearFlag == true) || (i == (historyArrDeviceDesc.length - 1))) {
                if ((i == (historyArrDeviceDesc.length - 1))) {
                    loginHistoryDeviceYearArr.push(value)
                }
                loginHistoryDeviceYearArr.sort(sc_device_sort_desc)
                $.each(loginHistoryDeviceYearArr, function (i, value) {
                    if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                        historyTableDeviceDesc = historyTableDeviceDesc + '<tr><td class="first-cell"><span class="' + value.access + '"></span></td><td class="TL_NPI_L1 bold">' + value.deviceName + '</td><td>' + value.historyDate + '</td><td>' + value.historyTime + '</td></tr>'
                    } else {
                        historyTableDeviceDesc = historyTableDeviceDesc + '<tr><td class="first-cell"><span class="' + value.access + '"></span></td><td class="TL_NPI_L1 bold">' + value.deviceName + '</td><td>' + value.historyDate + '</td><td>' + value.historyTime + '</td><td>' + value.historyLocation + '<br/>' + value.internetProvider + '</td></tr>'
                    }
                })
                loginHistoryDeviceYearArr = new Array()
                if ((i != (historyArrDeviceDesc.length - 1))) {
                    if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                        historyTableDeviceDesc = historyTableDeviceDesc + '<tr><td colspan="4" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                    } else {
                        historyTableDeviceDesc = historyTableDeviceDesc + '<tr><td colspan="5" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                    }
                }
            }
            if ((i != (historyArrDeviceDesc.length - 1))) {
                loginHistoryDeviceYearArr.push(value)
            }
        })
        $.each(historyArrDeviceDesc, function (i, value) {
            if (i == 0 && multipleYearFlag == true) {
                if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                    historyTableDeviceAsc = historyTableDeviceAsc + '<tr><td colspan="4" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                } else {
                    historyTableDeviceAsc = historyTableDeviceAsc + '<tr><td colspan="5" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                }
            }
            if ((value.newRowInsert == 'true' && i != 0 && multipleYearFlag == true) || (i == (historyArrDeviceDesc.length - 1))) {
                if ((i == (historyArrDeviceDesc.length - 1))) {
                    loginHistoryDeviceYearArr.push(value)
                }
                loginHistoryDeviceYearArr.sort(sc_device_sort_asc)
                $.each(loginHistoryDeviceYearArr, function (i, value) {
                    if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                        historyTableDeviceAsc = historyTableDeviceAsc + '<tr><td class="first-cell"><span class="' + value.access + '"></span></td><td class="TL_NPI_L1 bold">' + value.deviceName + '</td><td>' + value.historyDate + '</td><td>' + value.historyTime + '</td></tr>'
                    } else {
                        historyTableDeviceAsc = historyTableDeviceAsc + '<tr><td class="first-cell"><span class="' + value.access + '"></span></td><td class="TL_NPI_L1 bold">' + value.deviceName + '</td><td>' + value.historyDate + '</td><td>' + value.historyTime + '</td><td>' + value.historyLocation + '<br/>' + value.internetProvider + '</td></tr>'
                    }
                })
                loginHistoryDeviceYearArr = new Array()
                if ((i != (historyArrDeviceDesc.length - 1))) {
                    if (typeof locationDisplaySwitch !== 'undefined' && !locationDisplaySwitch) {
                        historyTableDeviceAsc = historyTableDeviceAsc + '<tr><td colspan="4" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                    } else {
                        historyTableDeviceAsc = historyTableDeviceAsc + '<tr><td colspan="5" class="new-year">' + value.yearValue + ' Sign-Ins</td></tr>'
                    }
                }
            }
            if ((i != (historyArrDeviceDesc.length - 1))) {
                loginHistoryDeviceYearArr.push(value)
            }
        })
        $('.sort-arrows-date').click(function () {
            if ($(this).hasClass('descending') || $(this).hasClass('no-sort')) {
                $('.sc-vipaa-module .sign-in-history-skin table tbody').empty().html(historyTableDateAsc)
                $(this).removeClass('descending').addClass('ascending').removeClass('no-sort')
                $('.sc-date-ada').text(' in descending order')
            } else {
                $('.sc-vipaa-module .sign-in-history-skin table tbody').empty().html(historyTableDateDesc)
                $(this).removeClass('ascending').addClass('descending')
                $('.sc-date-ada').text(' in ascending order')
            }
            $('.sort-arrows-device').removeClass('ascending').removeClass('descending').addClass('no-sort')
            $('.sc-device-ada').text(' in ascending order')
        })
        $('.sort-arrows-device').click(function () {
            if ($(this).hasClass('descending') || $(this).hasClass('no-sort')) {
                $('.sc-vipaa-module .sign-in-history-skin table tbody').empty().html(historyTableDeviceAsc)
                $(this).removeClass('descending').addClass('ascending').removeClass('no-sort')
                $('.sc-device-ada').text(' in descending order')
            } else {
                $('.sc-vipaa-module .sign-in-history-skin table tbody').empty().html(historyTableDeviceDesc)
                $(this).removeClass('ascending').addClass('descending')
                $('.sc-device-ada').text(' in ascending order')
            }
            $('.sort-arrows-date').removeClass('ascending').removeClass('descending').addClass('no-sort')
            $('.sc-date-ada').text(' in ascending order')
        })
    }
})

function sc_device_sort_asc(a, b) {
    if (a.deviceName > b.deviceName) {
        return 1
    }
    if (a.deviceName < b.deviceName) {
        return -1
    }
    return 0
}

function sc_device_sort_desc(a, b) {
    if (a.deviceName > b.deviceName) {
        return -1
    }
    if (a.deviceName < b.deviceName) {
        return 1
    }
    return 0
}

var $quickHelpBoaLangObj = $quickHelpBoaLangObj || {}
$quickHelpBoaLangObj.show = 'Activate to expand. '
$quickHelpBoaLangObj.hide = 'Activate to collapse. '
var csrfTokenHiddenValue = ''
var corsSettings = 'false'
var $scIsIE = false
var corsSupported = $.support.cors
if (navigator.userAgent.indexOf('MSIE') != -1) {
    $scIsIE = true
}
var usePost = false
var savedOIDHtml = ''
var newOnlineID = ''
var offsetFlag = false
var enrollEligible = true
var fpuserID = ''
var fpEnabledStatus = ''
$(document).ready(function () {
    if ($('.sc-vipaa-module .sign-in-settings-skin').length > 0) {
        if ($('.gis-mask').length > 0 && typeof window.boa === 'object' && typeof window.boa.form === 'object' && typeof window.boa.form.init === 'function' && $('.ie-7').length > 0) {
            $(document).trigger('common-form-disable')
            window.boa.form.disable()
        }
        if (!$scIsIE) {
            detectCors()
        }
        $(document.body).on('click', 'a[name^="close-sec-help"]', function (event) {
            var parentId = $(this).attr('rel')
            $('.ui-dialog-content').trigger('dialogclose').parent().remove()
            $('#' + parentId).focus()
        })
        $('#CQModalErrors').removeClass('messaging-vipaa-module').addClass('temp-vipaa-module')
        var selectedanswerVal = '',
            securityquestionVal = '',
            closeAnchor = $('#success_close').children()
        boaEqualHeight($('.sc-vipaa-module .sign-in-settings-skin .sign-in-section'))
        if ($('.sc-vipaa-module .sign-in-settings-skin .preference-section').height() < 259) {
            if ($('html').attr('lang').toLowerCase() == 'es-us') {
                $('#success_close').text('cerrar').append(closeAnchor)
            } else {
                $('#success_close').text('close').append(closeAnchor)
            }
        }
        $('#newOnlineID,#currentPasscode,#newPasscode,#confirmNewPasscode').bind('keypress', function (e) {
            if (e.keyCode == 13) {
                $('#challengeSCSelectForm').submit()
            }
        })
        $('#change-online-id').click(function (event) {
            $('#DashboardIDForm').submit()
        })
        $('#change-passcode').click(function (event) {
            $('#DashboardPwdForm').submit()
        })
        $('#success_close').click(function () {
            $('.messaging-vipaa-module').addClass('hide')
        })
        $('#FP-enroll-preference').on('click', function () {
            $('#fpContainer').removeClass('hidden')
            $('#FP-enroll-preference').attr('disabled', 'disabled')
            var locale = ''
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                locale = 'en'
            } else {
                locale = 'es'
            }
            var datainit = {
                widgetName: 'secure-fingerprint-widget',
                widgetVersion: '1.0.0',
                ContainerId: 'fpContainer',
                widgetEventName: 'AH_FP_ENROLL_INITIALIZE',
                language: locale,
                payload: {
                    isModal: 'true',
                    successCallback: {
                        eligibilitySuccess: function (successData) {
                            $('#FP-enroll-preference').attr('disabled', false)
                            $('#fpContainer').addClass('hidden')
                        },
                        enrollmentSuccess: function (successData) {
                            $('#FP-enroll-preference').attr('disabled', false)
                            $('#fpContainer').addClass('hidden')
                        }
                    },
                    failureCallback: {
                        eligibilityError: function () {
                            $('#FP-disable-preference').attr('disabled', 'false')
                            $('#fpContainer').addClass('hidden')
                        }
                    },
                    enrollEligible: enrollEligible ? enrollEligible : false,
                    OID: fpuserID,
                    source: 'FP-SC'
                }
            }
            var config = datainit
            var fpCustomEvent = new CustomEvent('LOAD_SPARTA_WIDGET', {
                detail: {
                    config: config
                }
            })
            document.dispatchEvent(fpCustomEvent)
            if (window.sparta && window.sparta.widgetLoader) {
                window.sparta.widgetLoader.sub('AH_FP_MODAL_CLOSED', function (event) {
                    $('#FP-enroll-preference').attr('disabled', false)
                })
            }
        })
        $('#FP-disable-preference').click(function (event) {
            var options = {
                size: 'large',
                width: '530',
                buttons: ''
            }
            $('#fingerprint-modal-overlay').boaFlexModal(options)
            $('#disable-click-modal').removeClass('hide')
            $('#on-selecting-yes').addClass('hide')
        })
        $('#disable-modal-no').click(function (event) {
            $('#fingerprint-modal-overlay').dialog('close')
        })
        $('#yes-modal-close').click(function (event) {
            $('#fingerprint-modal-overlay').dialog('close')
        })
        $('#disable-modal-yes').click(function (event) {
            deRegistrationFn()
        })

        function deRegistrationFn(responseMsg) {
            var inputjson = {
                filterRules: [
                    {
                        name: 'USECASE',
                        value: 'INTELFP'
                    }
                ]
            }
            $.ajax({
                type: 'POST',
                url: '/login/rest/sas/sm/uafDeregistration?usecase=INTELFP',
                data: JSON.stringify(inputjson),
                crossDomain: true,
                cache: false,
                timeout: 60000,
                processData: false,
                xhrFields: {
                    withCredentials: true
                },
                dataType: 'json',
                headers: {
                    'content-type': 'application/json',
                    clientAIT: '41339',
                    accept: 'application/json',
                    'cache-control': 'no-cache'
                },
                error: function (XMLHTTPRequest, textStatus, errorThrown) {
                },
                success: function (data) {
                    $('#disable-click-modal').addClass('hide')
                    $('#on-selecting-yes').removeClass('hide')
                },
                complete: function (XMLHTTPRequest, textStatus) {
                }
            })
        }

        $('.remove-safepass-settings').click(function (e) {
            if (!$(this).hasClass('btn-disabled')) {
                var options = {
                    size: 'flex-width',
                    buttons: {},
                    width: 602,
                    closeTriggers: $('.sp-cancel-modal-close-button')
                }
                $('#cancel-sp-preference-modal').boaFlexModal(options)
            }
        })
        $('.remove-otp-settings').click(function (e) {
            if (!$(this).hasClass('btn-disabled')) {
                var options = {
                    size: 'flex-width',
                    buttons: {},
                    width: 602,
                    closeTriggers: $('.otp-cancel-modal-close-button')
                }
                $('#cancel-otp-settings-modal').boaFlexModal(options)
            }
        })
        $('#removeOtpBtn').click(function (e) {
            document.RemoveOtpForm.submit()
        })
        $('#removeSPBtn').click(function (e) {
            document.RemoveSPForm.submit()
        })
        $('#cancel-id-change, #cancel-id-section').click(function (event) {
            $('.id-container,.id-pwd-section').addClass('hide')
            $('label').removeClass('field-level-error')
            $('#newOnlineID').val('')
            $('.id-pwd-section #serverSideErrors').attr('aria-hidden', 'true')
            if ($('.id-pwd-section #clientSideErrors').length > 0) {
                $('.id-pwd-section #clientSideErrors').attr('aria-hidden', 'true')
                $('.id-pwd-section #clientSideErrors').removeAttr('aria-live')
            }
            $('.sign-in-section').removeClass('active-tab')
            $('#show-id-section').removeClass('hide')
            $('#cancel-id-section').addClass('hide')
            $('#show-id-section').focus()
        })
        $('#cancel-pwd-section, #cancel-pwd-change').click(function (event) {
            $('.pwd-container,.id-pwd-section').addClass('hide')
            $('label').removeClass('field-level-error')
            $('.sign-in-section').removeClass('active-tab')
            $('#currentPassCode').val('')
            $('#newPassCode').val('')
            $('#confirmNewPassCode').val('')
            $('.id-pwd-section #serverSideErrors').attr('aria-hidden', 'true')
            if ($('.id-pwd-section #clientSideErrors').length > 0) {
                $('.id-pwd-section #clientSideErrors').attr('aria-hidden', 'true')
                $('.id-pwd-section #clientSideErrors').removeAttr('aria-live')
            }
            $('#show-passcode-section').removeClass('hide')
            $('#cancel-pwd-section').addClass('hide')
            $('#show-passcode-section').focus()
        })
        if (fpEnabledStatus === true) {
            $('#show-id-section').click(function (event) {
                var options = {
                    size: 'large',
                    width: '530',
                    buttons: ''
                }
                $('#change-online-id-modal-overlay').boaFlexModal(options)
            })
            $('#change-online-id-modal-cancel').click(function (event) {
                $('#change-online-id-modal-overlay').dialog('close')
                $('#show-id-section').removeClass('hide')
                $('#cancel-id-section').addClass('hide')
            })
            $('#change-online-id-modal-ok').click(function (event) {
                $('#change-online-id-modal-overlay').dialog('close')
                $('.id-container, .id-pwd-section').removeClass('hide')
                $('.sign-in-section').removeClass('active-tab')
                $(this).parent($('.sign-in-section')).addClass('active-tab')
                $('label').removeClass('field-level-error')
                $('.pwd-container').addClass('hide')
                $('.messaging-vipaa-module').addClass('hide')
                $('#serverSideErrors').addClass('hide')
                $('#clientSideErrors').hide()
                $('#serverSideErrors').hide()
                $('.buttons-container #change-online-id').removeClass('btn-disabled').addClass('btn-bofa-blue')
                $('#cancel-id-section').removeClass('hide')
                $('#show-id-section').addClass('hide')
                $(this).addClass('hide')
                $('#newOnlineID').focus()
                $('#show-passcode-section').removeClass('hide')
                $('#cancel-pwd-section').addClass('hide')
                scRequestJSONP('', 'clickChangeId.go')
            })
        } else {
            $('#show-id-section').click(function (event) {
                if (!$(this).hasClass('btn-disabled')) {
                    $('.id-container, .id-pwd-section').removeClass('hide')
                    $('.sign-in-section').removeClass('active-tab')
                    $(this).parent($('.sign-in-section')).addClass('active-tab')
                    $('label').removeClass('field-level-error')
                    $('.pwd-container').addClass('hide')
                    $('.messaging-vipaa-module').addClass('hide')
                    $('#serverSideErrors').addClass('hide')
                    $('#clientSideErrors').hide()
                    $('#serverSideErrors').hide()
                    $('.buttons-container #change-online-id').removeClass('btn-disabled').addClass('btn-bofa-blue')
                    $('#cancel-id-section').removeClass('hide')
                    $(this).addClass('hide')
                    $('#newOnlineID').focus()
                    $('#show-passcode-section').removeClass('hide')
                    $('#cancel-pwd-section').addClass('hide')
                    scRequestJSONP('', 'clickChangeId.go')
                }
            })
        }
        if (fpEnabledStatus === true) {
            $('#show-passcode-section').click(function (event) {
                var options = {
                    size: 'large',
                    width: '530',
                    buttons: ''
                }
                $('#change-passcode-modal-overlay').boaFlexModal(options)
            })
            $('#change-passcode-modal-ok').click(function (event) {
                $('#change-passcode-modal-overlay').dialog('close')
                $('#show-passcode-section').removeClass('hide')
                $('#cancel-pwd-section').addClass('hide')
            })
        } else {
            $('#show-passcode-section').click(function (event) {
                if (!$(this).hasClass('btn-disabled')) {
                    $('.pwd-container, .id-pwd-section').removeClass('hide')
                    $('.sign-in-section').removeClass('active-tab')
                    $(this).parent($('.sign-in-section')).addClass('active-tab')
                    $('.messaging-vipaa-module').addClass('hide')
                    $('#serverSideErrors').addClass('hide')
                    $('#clientSideErrors').hide()
                    $('#serverSideErrors').hide()
                    $('.buttons-container #change-passcode').removeClass('btn-disabled').addClass('btn-bofa-blue')
                    $('#cancel-pwd-change').removeClass('hide')
                    $('#currentPassCode').focus()
                    $('#Vipaa_Client_0').empty()
                    if ($('html').attr('lang').toLowerCase() == 'es-us') {
                        $('#Vipaa_Client_0').html('<p>Hemos encontrado errores en los elementos resaltados. Por favor, realice los ajustes se&#241;alados para continuar.</p>')
                    } else {
                        $('#Vipaa_Client_0').html('<p>We encountered errors with the highlighted item(s). Please make the noted adjustments to continue.</p>')
                    }
                    $('.id-container').addClass('hide')
                    $('#cancel-pwd-section').removeClass('hide')
                    $(this).addClass('hide')
                    $('#show-id-section').removeClass('hide')
                    $('#cancel-id-section').addClass('hide')
                    scRequestJSONP('', 'clickChangePwd.go')
                }
            })
        }
        $('#show-u2f-register-dialog').click(function (event) {
            var options = {
                size: 'flex-width',
                buttons: {},
                width: 'auto',
                onClose: u2fmodalClose,
                closeTriggers: $('#challengeSCSelectForm a.btn-bofa-gray,#btnCancel')
            }
            $('#u2fregistrationModal .steps-wrapper .steps-list li').removeClass('done').addClass('disabled')
            $('#u2fregistrationModal .steps-wrapper .steps-list li:first').addClass('active').removeClass('disabled')
            $('#u2fregistrationModal #u2fRegsisterBtn').removeClass('hide')
            $('#u2fregistrationModal #modalCancelBtn').removeClass('hide')
            $('#u2fregistrationModal #modalCloseBtn').addClass('hide')
            $('.u2fregistration-overlay-wrapper .u2f-register-client-error').addClass('hide')
            window.currentu2fstep = 'none'
            $('#u2fregistration-modal-overlay').boaFlexModal(options)
        })
        $('#toggle-hotp-activate').click(function (event) {
            $('.hotp-device-activation-container').slideToggle()
        })
        $('#btn-hotp-reset').click(function (event) {
            $('.hotp-device-reset-container').slideToggle()
        })
        $('#btn-hotp-submit').click(function () {
            $('#hotpServerSideErrors_0').html('')
            $('#hotpServerSideErrors').addClass('hide')
            var hotpVal = $('#txtHotp').val(),
                hotpActivateUrl = '/login/edit/sm/otpDeviceActivate.go'
            $.ajax({
                type: 'POST',
                url: hotpActivateUrl,
                dataType: 'json',
                data: {
                    code: hotpVal
                },
                crossDomain: false,
                cache: false,
                timeout: 60000,
                traditional: true,
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                xhrFields: {
                    withCredentials: true
                },
                error: function (XMLHTTPRequest, textStatus, errorThrown) {
                    console.log('Error: ', errorThrown)
                },
                success: function (data, textStatus, XMLHttpRequest) {
                    if (data && data.result) {
                        if (data.result === 'SUCCESS') {
                            fsdgoto('securitycenter')
                        } else {
                            if (data.result === 'FAILURE') {
                            } else {
                                if (data.result === 'INVALID' || data.result === 'error') {
                                    $('#hotpServerSideErrors_0').html(data.errorMessage[0])
                                    $('#hotpServerSideErrors').removeClass('hide')
                                }
                            }
                        }
                    } else {
                        console.log('Handle Error')
                    }
                }
            })
        })
        $('#btn-reset-hotp-submit').click(function () {
            $('#hotpServerSideErrors_0').html('')
            $('#hotpServerSideErrors').addClass('hide')
            $('#hotpResetSuccess').addClass('hide')
            var txtResetHotp1 = $('#txtResetHotp1').val(),
                txtResetHotp2 = $('#txtResetHotp2').val(),
                hotpResetUrl = '/login/edit/sm/otpDeviceSynchronize.go'
            $.ajax({
                type: 'POST',
                url: hotpResetUrl,
                dataType: 'json',
                data: {
                    code1: txtResetHotp1,
                    code2: txtResetHotp2
                },
                crossDomain: false,
                cache: false,
                timeout: 60000,
                traditional: true,
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                xhrFields: {
                    withCredentials: true
                },
                error: function (XMLHTTPRequest, textStatus, errorThrown) {
                    console.log('Error: ', errorThrown)
                },
                success: function (data, textStatus, XMLHttpRequest) {
                    if (data && data.result) {
                        if (data.result === 'SUCCESS') {
                            $('#hotpResetSuccess').removeClass('hide').show()
                        } else {
                            if (data.result === 'FAILURE') {
                            } else {
                                if (data.result === 'INVALID' || data.result === 'error') {
                                    $('#hotpServerSideErrors_0').html(data.errorMessage)
                                    $('#hotpServerSideErrors').removeClass('hide')
                                }
                            }
                        }
                    } else {
                        console.log('Handle Error')
                    }
                }
            })
        })
        $('#btn-hotp-deactivate, #toggle-hotp-deactivate').click(function () {
            $('#hotpServerSideErrors_0').html('')
            $('#hotpServerSideErrors').addClass('hide')
            var options = {
                size: 'flex-width',
                buttons: {},
                width: 'auto',
                closeTriggers: $('#hotpDeactivateModal #modalCloseBtn,#btnCancel')
            }
            $('#hotpDeactivateModal').boaFlexModal(options)
        })
        $('#btn-hotp-deactivate-confirm').click(function () {
            $('#hotpServerSideErrors_0').html('')
            $('#hotpServerSideErrors').addClass('hide')
            var hotpDeActivateUrl = '/login/edit/sm/otpDeviceDeactivate.go'
            $.ajax({
                type: 'POST',
                url: hotpDeActivateUrl,
                dataType: 'json',
                crossDomain: false,
                cache: false,
                timeout: 60000,
                traditional: true,
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                xhrFields: {
                    withCredentials: true
                },
                error: function (XMLHTTPRequest, textStatus, errorThrown) {
                    console.log('Error: ', errorThrown)
                },
                success: function (data, textStatus, XMLHttpRequest) {
                    if (data && data.result) {
                        if (data.result === 'SUCCESS') {
                            fsdgoto('securitycenter')
                        } else {
                            if (data.result === 'FAILURE') {
                                $('#hotpDeactivateModal #modalCloseBtn').click()
                            } else {
                                if (data.result === 'INVALID' || data.result === 'error') {
                                    $('#hotpServerSideErrors_0').html(data.errorMessage[0])
                                    $('#hotpServerSideErrors').removeClass('hide')
                                    $('#hotpDeactivateModal #modalCloseBtn').click()
                                }
                            }
                        }
                    } else {
                        console.log('Handle Error')
                    }
                }
            })
        })
        $('a.show-challenge-modal').click(function () {
            if (!$(this).hasClass('btn-disabled')) {
                $('#clientSideErrors').removeClass('messaging-vipaa-module').addClass('temp-class')
                $('.id-pwd-section .temp-class').attr('id', 'idpwdError')
                $('#CQModalErrors').removeClass('temp-vipaa-module').addClass('messaging-vipaa-module')
                $('.personal-challenge-section .messaging-vipaa-module').hide()
                $('#verifyCASubmit').removeClass('btn-disabled').addClass('btn-bofa-blue')
                $('#sc-continue-questions-submit').addClass('btn-bofa-blue').removeClass('btn-disabled')
                var targetModalId = $(this).attr('rel')
                var $targetModal = $('.' + targetModalId)
                var options = {
                    size: 'flex-width',
                    buttons: {},
                    width: 980,
                    onClose: oncloseFunc,
                    closeTriggers: $('#challengeSCSelectForm a.btn-bofa-gray,#btnCancel')
                }
                if (typeof cmCreatePageviewTag == 'function' && cmPageIdCQModal !== 'PVParamsMissing' && typeof cmCategoryId !== 'undefined' && typeof cmSessionID !== 'undefined') {
                    cmCreatePageviewTag(cmPageIdCQModal + locAppendage, null, null, cmCategoryId, false, false, null, false, false, null, null, null, null, cmSessionID, null, null, null, null, null, null, null)
                }
                $targetModal.boaFlexModal(options)
                $('#question1, #question2, #question3').prop('selectedIndex', 0)
                $('#answer1, #answer2, #answer3, #answer1-masked, #answer2-masked, #answer3-masked').val('')
                $('#challengeSCSelectForm').removeClass('hide')
                $('.reviewAnswer, .challenge-qns').addClass('hide')
                $('.sd-quick-help').removeClass('hide')
                scRequestJSONP('', 'securityCenterDisplayQandA.go')
            }
        })
        $('#sc-continue-questions-submit').click(function () {
            $('#challengeSCSelectForm').submit()
        })
        $('#btnGoback').click(function () {
            $('#sc-continue-questions-submit').addClass('btn-bofa-blue').removeClass('btn-disabled')
            $('#challengeSCSelectForm').removeClass('hide')
            $('.reviewAnswer').addClass('hide')
            $('#challenge-qns-modal-modalClose').focus()
            $('span.bac-dialog-open').html('&nbsp;  layer: Change your challenge questions')
            scRequestJSONP({
                nextAction: 'Back',
                csrfTokenHidden: csrfTokenHiddenValue
            }, 'securityCenterReSelectSecurityQandA.go')
        })
        $('#btnCancel').click(function () {
            $('#challengeSCSelectForm').removeClass('hide')
            $('.reviewAnswer').addClass('hide')
        })
        $('a[name=cancel-questions-submit]').click(function () {
            $('#chalServerSideErrors').addClass('hide')
            $('.personal-challenge-section #clientSideErrors').attr('id', 'CQModalErrors').hide()
            $('.personal-challenge-section #CQModalErrors').removeClass('messaging-vipaa-module').addClass('temp-vipaa-module')
            $('#idpwdError').attr('id', 'clientSideErrors')
            $('#clientSideErrors').addClass('messaging-vipaa-module')
            $('.personal-challenge-section label').removeClass('field-level-error')
            $('a[name=personal-challenge-questions]').focus()
        })
        $('#verifyCASubmit').click(function () {
            $('#verifyCASubmit').removeClass('btn-bofa-blue').addClass('btn-disabled')
            scRequestJSONP({
                nextAction: 'Continue',
                csrfTokenHidden: csrfTokenHiddenValue
            }, 'securityCenterConfirmQandA.go')
        })
        $('a[name="edit-saved-ids"]').click(function () {
            $.data(document.body, 'clearIdADA', $('#clear-savedid .ada-hidden').html())
            var $targetModal = $('.edit-savedId-section')
            var options = {
                size: 'flex-width',
                buttons: {},
                width: 340,
                onClose: typeof boa.vipaa === 'object' && typeof boa.vipaa.resetCMParentPageID === 'function' ? boa.vipaa.resetCMParentPageID : function () {
                },
                closeTriggers: $('#challengeSCSelectForm a.btn-bofa-gray,a.cancel-savedid')
            }
            if (typeof cmCreatePageviewTag == 'function' && cmPageIdSavedIDModal !== 'PVParamsMissing' && typeof cmCategoryId !== 'undefined' && typeof cmSessionID !== 'undefined') {
                cmCreatePageviewTag(cmPageIdSavedIDModal + locAppendage, null, null, cmCategoryId, false, false, null, false, false, null, null, null, null, cmSessionID, null, null, null, null, null, null, null)
            }
            $targetModal.boaFlexModal(options)
            $('.edit-savedId-btnPin').removeClass('hide')
            $('.edit-closeID-btnPin').addClass('hide')
            $('.displaySavedID').removeClass('hide')
            $('.clearedSavedID').addClass('hide')
            $('#savedoId legend').removeClass('hide')
            var savedOIDHtml = ''
            if (typeof savedIdListJson == 'object') {
                $.each(savedIdListJson.savedIdList, function (i, val) {
                    savedOIDHtml += '<div class="saved-id-list"><input  id="saved-oid-chk' + val.maskedId + '" class="saved-oid-chk" type="checkbox" value="' + val.decryptedOid + '" name="' + val.maskedId + '"><label for="saved-oid-chk' + val.maskedId + '">' + val.maskedId + '</label></div>'
                })
                $('#clear-savedid').addClass('btn-disabled').removeClass('btn-bofa-blue')
                $('#savedoIdDisplay').html(savedOIDHtml)
            }
        })
        $(document).on('click', '.saved-oid-chk', function (e) {
            if ($('.saved-oid-chk').is(':checked')) {
                $('#clear-savedid').addClass('btn-bofa-blue').removeClass('btn-disabled')
                $('#clear-savedid .ada-hidden').empty()
                $('#clear-savedid .ada-hidden').html('&nbsp; Saved Online IDs layer')
            } else {
                $('#clear-savedid').addClass('btn-disabled').removeClass('btn-bofa-blue')
                $('#clear-savedid .ada-hidden').html($.data(document.body, 'clearIdADA'))
            }
        })
        $('#clear-savedid').click(function () {
            var selectedOID = $('.saved-oid-chk:checked'),
                selectedOIDValue = []
            $.each(selectedOID, function (i, value) {
                selectedOIDValue.push($(value).attr('value'))
            })
            csrfTokenHiddenValue = $('#csrfTokenHidden').val()
            scRequestJSONP({
                clearIdList: selectedOIDValue,
                csrfTokenHidden: csrfTokenHiddenValue
            }, 'clearSavedId.go')
        })
        $('.cancel-savedid').click(function () {
            $('.edit-oid').focus()
        })
        $('[name="change-security-preference"]').click(function () {
            if (!$(this).hasClass('btn-disabled')) {
                scRequestJSONP({
                    rembComp: $('#tlpvt-recognize').is(':checked') ? 'Y' : $('#tlpvt-challenge').is(':checked') ? 'N' : 'NA',
                    csrfTokenHidden: $('#csrfTokenHidden').val()
                }, 'editSecurityPreference.go')
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#DashboardIDForm').validate({
                includeFieldLabel: false,
                customSelects: false,
                messages: {
                    newOnlineID: {
                        required: 'Create an Online ID that is 6 to 32 characters in length.',
                        nodigits: 'Create an Online ID that does not contain all numbers.',
                        rangelength: $.validator.format('Create an Online ID that is {0} to {1} characters in length.'),
                        letterNumberSpecialCombo: 'Enter an Online ID with no spaces and using only the allowed special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    }
                },
                rules: {
                    newOnlineID: {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    }
                },
                submitHandler: function (form) {
                    if (typeof vipaaPublicKey !== 'undefined') {
                        var newOId = $('#newOnlineID').val()
                        newOnlineID = newOId
                        var encOID = encryptA(newOId, vipaaPublicKey)
                        $('#encOnlineID').val(encOID)
                    }
                    scRequestJSONP($('#DashboardIDForm').serialize(), 'securityCenterChangeId.go')
                }
            })
            $('#DashboardPwdForm').validate({
                includeFieldLabel: false,
                customSelects: false,
                messages: {
                    currentPassCode: {
                        required: 'Please enter your current Passcode correctly.',
                        nospacesnospecial: 'Please enter your current Passcode without spaces or these special characters: $ & ^ < > ! [ ]'
                    },
                    newPassCode: {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    confirmNewPassCode: {
                        required: 'Re-enter your Passcode correctly to continue.',
                        equalTo: 'Re-enter your Passcode correctly to continue.'
                    }
                },
                rules: {
                    currentPassCode: {
                        required: true,
                        nospacesnospecial: '$<>&\\^![\\]'
                    },
                    newPassCode: {
                        required: {
                            depends: function (element) {
                                return (($('#newPassCode').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    confirmNewPassCode: {
                        required: {
                            depends: function (element) {
                                return (($('#confirmNewPassCode').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#newPassCode')
                    }
                },
                submitHandler: function (form) {
                    if (typeof vipaaPublicKey !== 'undefined') {
                        var oldPass = $('#currentPassCode').val(),
                            newPass = $('#newPassCode').val(),
                            confnewPass = $('#confirmNewPassCode').val()
                        var encoldPass = encryptA(oldPass, vipaaPublicKey),
                            encnewPass = encryptA(newPass, vipaaPublicKey),
                            encconfnewPass = encryptA(confnewPass, vipaaPublicKey)
                        $('#enccurrentPassCode').val(encoldPass)
                        $('#encnewPassCode').val(encnewPass)
                        $('#encconfirmNewPassCode').val(encconfnewPass)
                    }
                    scRequestJSONP($('#DashboardPwdForm').serialize(), 'securityCenterChangePwd.go')
                    offsetFlag = false
                    offsetTooltips(offsetFlag)
                },
                invalidHandler: function (event, validator) {
                    offsetFlag = true
                    offsetTooltips(offsetFlag)
                }
            })
            $('#challengeSCSelectForm').validate({
                includeFieldLabel: false,
                customSelects: false,
                errorContainerId: 'CQModalErrors',
                errorLabelContainer: '#CQModalErrors .error-message ul',
                messages: {
                    question1: {
                        required: 'Please complete all 3 questions and answers.'
                    },
                    question2: {
                        required: 'Please complete all 3 questions and answers.'
                    },
                    question3: {
                        required: 'Please complete all 3 questions and answers.'
                    },
                    answer1: {
                        required: 'Please complete all of the required field(s).',
                        alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &).'
                    },
                    answer2: {
                        required: 'Please complete all of the required field(s).',
                        alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &).'
                    },
                    answer3: {
                        required: 'Please complete all of the required field(s).',
                        alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &).'
                    }
                },
                rules: {
                    question1: {
                        required: true
                    },
                    question2: {
                        required: true
                    },
                    question3: {
                        required: true
                    },
                    answer1: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    },
                    answer2: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    },
                    answer3: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    }
                },
                submitHandler: function (form) {
                    selectedanswerVal = {
                        questionId1: $('#question1').val(),
                        questionId2: $('#question2').val(),
                        questionId3: $('#question3').val(),
                        questionText1: $('#question1 option:selected').text(),
                        questionText2: $('#question2 option:selected').text(),
                        questionText3: $('#question3 option:selected').text(),
                        actualAnswer1: encryptA($('#answer1').val(), vipaaPublicKey),
                        actualAnswer2: encryptA($('#answer2').val(), vipaaPublicKey),
                        actualAnswer3: encryptA($('#answer3').val(), vipaaPublicKey),
                        csrfTokenHidden: csrfTokenHiddenValue,
                        nextAction: 'Continue'
                    }
                    scRequestJSONP(selectedanswerVal, 'securityCenterValidateQandA.go')
                }
            })
        } else {
            $('#DashboardIDForm').validate({
                includeFieldLabel: false,
                customSelects: false,
                messages: {
                    newOnlineID: {
                        required: 'Cree una Identificaci&#243;n en l&#237;nea que tenga entre 6 y 32 caracteres de longitud.',
                        nodigits: 'Cree una Identificaci&#243;n en l&#237;nea que no contenga s&#243;lo n&#250;meros.',
                        rangelength: $.validator.format('Cree una Identificaci&#243;n en l&#237;nea que tenga entre {0} y {1} caracteres de longitud.'),
                        letterNumberSpecialCombo: 'Indique una Identificaci&#243;n en L&#237;nea sin espacios y usando s&#243;lo los caracteres especiales permitidos: @ # * ( ) + = { } / ? ~ ; , . - _'
                    }
                },
                rules: {
                    newOnlineID: {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    }
                },
                submitHandler: function (form) {
                    if (typeof vipaaPublicKey !== 'undefined') {
                        var newOId = $('#newOnlineID').val()
                        newOnlineID = newOId
                        var encOID = encryptA(newOId, vipaaPublicKey)
                        $('#encOnlineID').val(encOID)
                        $('#newOnlineID').val('')
                    }
                    scRequestJSONP($('#DashboardIDForm').serialize(), 'securityCenterChangeId.go')
                }
            })
            $('#DashboardPwdForm').validate({
                includeFieldLabel: false,
                customSelects: false,
                messages: {
                    currentPassCode: {
                        required: 'Por favor, indique su Contrase&#241;a actual correctamente.',
                        nospacesnospecial: 'Por favor, introduzca su contrase&#241;a actual, sin espacios ni los caracteres especiales : $ & ^ < > ! [ ]'
                    },
                    newPassCode: {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        passcodeSpecialCombo: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    confirmNewPassCode: {
                        required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                        equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                    }
                },
                rules: {
                    currentPassCode: {
                        required: true,
                        nospacesnospecial: '$<>&\\^![\\]'
                    },
                    newPassCode: {
                        required: {
                            depends: function (element) {
                                return (($('#newPassCode').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    confirmNewPassCode: {
                        required: {
                            depends: function (element) {
                                return (($('#confirmNewPassCode').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#newPassCode')
                    }
                },
                submitHandler: function (form) {
                    if (typeof vipaaPublicKey !== 'undefined') {
                        var oldPass = $('#currentPassCode').val(),
                            newPass = $('#newPassCode').val(),
                            confnewPass = $('#confirmNewPassCode').val()
                        var encoldPass = encryptA(oldPass, vipaaPublicKey),
                            encnewPass = encryptA(newPass, vipaaPublicKey),
                            encconfnewPass = encryptA(confnewPass, vipaaPublicKey)
                        $('#enccurrentPassCode').val(encoldPass)
                        $('#encnewPassCode').val(encnewPass)
                        $('#encconfirmNewPassCode').val(encconfnewPass)
                        $('#currentPassCode').val('')
                        $('#newPassCode').val('')
                        $('#confirmNewPassCode').val('')
                    }
                    scRequestJSONP($('#DashboardPwdForm').serialize(), 'securityCenterChangePwd.go')
                }
            })
            $('#challengeSCSelectForm').validate({
                includeFieldLabel: false,
                customSelects: false,
                errorContainerId: 'CQModalErrors',
                errorLabelContainer: '#CQModalErrors .error-message ul',
                messages: {
                    question1: {
                        required: 'Por favor, complete todas las preguntas y respuestas.'
                    },
                    question2: {
                        required: 'Por favor, complete todas las preguntas y respuestas.'
                    },
                    question3: {
                        required: 'Por favor, complete todas las preguntas y respuestas.'
                    },
                    answer1: {
                        required: 'Por favor, complete todos los campos obligatorios.',
                        alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &, &aacute;, &ntilde;).'
                    },
                    answer2: {
                        required: 'Por favor, complete todos los campos obligatorios.',
                        alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &, &aacute;, &ntilde;).'
                    },
                    answer3: {
                        required: 'Por favor, complete todos los campos obligatorios.',
                        alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &, &aacute;, &ntilde;).'
                    }
                },
                rules: {
                    question1: {
                        required: true
                    },
                    question2: {
                        required: true
                    },
                    question3: {
                        required: true
                    },
                    answer1: {
                        required: true,
                        alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                    },
                    answer2: {
                        required: true,
                        alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                    },
                    answer3: {
                        required: true,
                        alphanumericspace: '$%&\\^#ÃÂ¡ÃÂ±'
                    }
                },
                submitHandler: function (form) {
                    selectedanswerVal = {
                        questionId1: $('#question1').val(),
                        questionId2: $('#question2').val(),
                        questionId3: $('#question3').val(),
                        questionText1: $('#question1 option:selected').text(),
                        questionText2: $('#question2 option:selected').text(),
                        questionText3: $('#question3 option:selected').text(),
                        actualAnswer1: encryptA($('#answer1').val(), vipaaPublicKey),
                        actualAnswer2: encryptA($('#answer2').val(), vipaaPublicKey),
                        actualAnswer3: encryptA($('#answer3').val(), vipaaPublicKey),
                        csrfTokenHidden: csrfTokenHiddenValue,
                        nextAction: 'Continue'
                    }
                    scRequestJSONP(selectedanswerVal, 'securityCenterValidateQandA.go')
                }
            })
        }
        if ($scIsIE) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#confirmNewPassCode').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'newPassCode',
                    tooltipLeft: 441,
                    tooltipTop: 145,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#confirmNewPassCode').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'newPassCode',
                    tooltipLeft: 506,
                    tooltipTop: 145,
                    matchText: 'Las Contrase&#241;as coinciden',
                    notMatchText: 'Las Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            }
        } else {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#confirmNewPassCode').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'newPassCode',
                    tooltipLeft: 441,
                    tooltipTop: 145,
                    matchText: 'Passcodes match',
                    notMatchText: 'Passcodes do not match',
                    formatCheckerCallback: function () {
                    }
                })
            } else {
                $('#confirmNewPassCode').fieldMatcher({
                    tooltipID: 'confirm-new-pass-tooltip',
                    originFieldID: 'newPassCode',
                    tooltipLeft: 506,
                    tooltipTop: 145,
                    matchText: 'Las Contrase&#241;as coinciden',
                    notMatchText: 'Las Contrase&#241;as no coinciden',
                    formatCheckerCallback: function () {
                    }
                })
            }
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#newOnlineID').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Between 6 and 32 characters'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Spaces'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Special Characters EXCEPT <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -78,
                tooltipLeft: 390
            })
        } else {
            $('#newOnlineID').formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Entre 6 y 32 caracteres'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Espacios'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Caracteres especiales EXCEPTO <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'enter-new-olb-id-tooltip',
                tooltipTop: -78,
                tooltipLeft: 390
            })
        }
        if ($scIsIE) {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#newPassCode').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Between 8 - 20 characters'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: '1 upper case letter, 1 lower case letter, 1 number'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Use only these special characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: -39,
                    tooltipLeft: 441
                })
            } else {
                $('#newPassCode').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Entre 8 y 20 caracteres'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Tener s&#243;lo estos caracteres especiales <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: -39,
                    tooltipLeft: 506
                })
            }
        } else {
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                $('#newPassCode').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Between 8 - 20 characters'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: '1 upper case letter, 1 lower case letter, 1 number'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Use only these special characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: -39,
                    tooltipLeft: 441
                })
            } else {
                $('#newPassCode').formatChecker({
                    minMaxCharRule: {
                        applyRule: true,
                        minChar: 8,
                        maxChar: 20,
                        ruleText: 'Entre 8 y 20 caracteres'
                    },
                    oneUpCaseOneLowCaseOneNumberRule: {
                        applyRule: true,
                        ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                    },
                    nonRepeating3CharRule: {
                        applyRule: true,
                        ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                    },
                    allowedSpecialCharsRule: {
                        applyRule: true,
                        ruleText: 'Tener s&#243;lo estos caracteres especiales <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    tooltipID: 'password-tooltip',
                    tooltipTop: -39,
                    tooltipLeft: 506
                })
            }
        }
        if (typeof post_deviceprint === 'function') {
            post_deviceprint()
        }
        if ($('.ad-summary-container').length > 0) {
            $('.ad-summary-container').append('<div class="ad-acct-summary-module-deposit-skin hide"><div class="ada-action"></div></div>')
        }
        if ($('.personal-challenge-section .sd-quick-help').length > 0) {
            $quickHelp = $('.personal-challenge-section .sd-quick-help .help-link .heading')
            $('.personal-challenge-section .sd-quick-help .help-link').addClass('collapsed')
            $('.personal-challenge-section .sd-quick-help .help-link .ada-hidden').text($quickHelpBoaLangObj.show + ' ')
            $('.personal-challenge-section .sd-quick-help .help-link').click(function (event) {
                event.preventDefault()
                var $this = $(this),
                    $toggleADA = $this.find('span.ada-hidden')
                var $thisLinkState = $this.hasClass('collapsed') ? 'Collapsed' : 'Expanded'
                $('.personal-challenge-section .sd-quick-help .help-link-answer').addClass('hide').removeAttr('aria-live')
                $('.personal-challenge-section .sd-quick-help .help-link .ada-hidden').text($quickHelpBoaLangObj.show + ' ')
                $('.personal-challenge-section .sd-quick-help .help-link').attr('aria-expanded', false).addClass('collapsed').removeClass('expanded')
                if ($thisLinkState == 'Collapsed') {
                    $toggleADA.text($quickHelpBoaLangObj.hide + ' ')
                    $this.attr('aria-expanded', true)
                    $this.next('.help-link-answer').removeClass('hide').attr('aria-live', 'rude').focus()
                    $this.addClass('expanded').removeClass('collapsed')
                } else {
                    if ($thisLinkState == 'Expanded') {
                        $toggleADA.text($quickHelpBoaLangObj.show + ' ')
                        $this.attr('aria-expanded', false)
                        $this.next('.help-link-answer').addClass('hide').removeAttr('aria-live')
                        $this.addClass('collapsed').removeClass('expanded')
                    }
                }
                if (typeof quickHelpRequestURL != 'undefined' && quickHelpRequestURL !== null && quickHelpRequestURL.length > 0) {
                    var name = $.trim($this.text())
                    var length = name.length
                    var link = name.substr(5, length)
                    $.post(quickHelpRequestURL + '&linkName=' + link)
                }
            })
            $quickHelp.on('keyup', function (event) {
                if (event.keyCode == 13) {
                    event.preventDefault()
                    $quickHelp.removeAttr('tabindex')
                }
            })
        }
        $('#sc-video').click(function () {
            var options = {
                skin: 'modal-flex',
                onClose: function () {
                    $('#video_player_wrapper').empty()
                    $('.video-control-bar').remove()
                    if (typeof boa.vipaa === 'object' && typeof boa.vipaa.resetCMParentPageID === 'function') {
                        boa.vipaa.resetCMParentPageID()
                    }
                },
                width: 660
            }
            EmbedVideoPlayerUtil.init()
            if (typeof cmCreatePageviewTag == 'function' && cmSecurityVideoModal !== 'PVParamsMissing' && typeof cmCategoryId !== 'undefined' && typeof cmSessionID !== 'undefined') {
                cmCreatePageviewTag(cmSecurityVideoModal + locAppendage, null, null, cmCategoryId, false, false, null, false, false, null, null, null, null, cmSessionID, null, null, null, null, null, null, null)
            }
            $('#sc-video-modal').boaFlexModal(options)
        })
        if (((window.location.href).search('=changeonlineid') >= 0)) {
            $('#show-id-section').trigger('click')
        } else {
            if (((window.location.href).search('=changepasscode') >= 0)) {
                $('#show-passcode-section').trigger('click')
            } else {
                if (((window.location.href).search('=challengequestion') >= 0)) {
                    $('a.show-challenge-modal').trigger('click')
                } else {
                    if (((window.location.href).search('=editsavedid') >= 0)) {
                        $('a[name="edit-saved-ids"]').trigger('click')
                    } else {
                        if (((window.location.href).search('security_video') >= 0)) {
                            $('#sc-video').trigger('click')
                        }
                    }
                }
            }
        }
        $('#link-content-yes').on('click', function () {
            var setTop = $('#link-content-yes').offset().top - 75 + 'px'
            $('#recognize-trust-help').parents().find('.ui-dialog').css('position', 'absolute').css('top', setTop)
        })
        $('#fp-link-content-yes').on('click', function () {
            var setTop = $('#fp-link-content-yes').offset().top - 75 + 'px'
            if ($('#FP-enroll-preference').is(':visible')) {
                $('#fp-link-content-yes').attr('rel', 'fp-trust-help-enable')
                $('#fp-trust-help-enable').parents().find('.ui-dialog').css('position', 'absolute').css('top', setTop)
            } else {
                if ($('#FP-disable-preference').is(':visible')) {
                    $('#fp-link-content-yes').attr('rel', 'fp-trust-help-disable')
                    $('#fp-trust-help-disable').parents().find('.ui-dialog').css('position', 'absolute').css('top', setTop)
                }
            }
        })
        try {
            if (typeof chrome != 'undefined' && chrome.runtime) {
                var EXTENSION_ID = 'kmendfapggjehodndflmmgagdbamhnfd'
                chrome.runtime.sendMessage(EXTENSION_ID, {}, function (r) {
                    if (r) {
                    } else {
                        $('.u2f-device-section').remove()
                    }
                })
            } else {
                $('.u2f-device-section').remove()
            }
        } catch (e) {
            $('.u2f-device-section').remove()
            console.log('Failed. ' + e)
        }
    }
})

function fidofpCheck() {
    (function () {
        if (typeof window.CustomEvent === 'function') {
            return false
        }

        function CustomEvent(event, params) {
            params = params || {
                bubbles: false,
                cancelable: false,
                detail: undefined
            }
            var evt = document.createEvent('CustomEvent')
            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)
            return evt
        }

        CustomEvent.prototype = window.Event.prototype
        window.CustomEvent = CustomEvent
    })()
    if (window.navigator && window.navigator.fido && window.navigator.fido.uaf && window.navigator.fido.uaf.discover !== 'undefined') {
        window.navigator.fido.uaf.discover(function (data) {
            var aaIDString = ''
            if (typeof data !== 'undefined' && typeof data.availableAuthenticators !== 'undefined' && data.availableAuthenticators.length > 0) {
                for (i = 0; i < data.availableAuthenticators.length; i++) {
                    if (aaIDString !== '') {
                        aaIDString = aaIDString + '|' + data.availableAuthenticators[i].aaid
                    } else {
                        aaIDString = aaIDString + data.availableAuthenticators[i].aaid
                    }
                }
                aaIDString = aaIDString.replace(/[#]/gi, '@')
            }
            if (aaIDString.length > 0) {
            } else {
                $('.FP-section').removeClass('hidden')
                $('.dashboard-container').addClass('fp-active')
                $('#FP-enroll-preference').addClass('hide')
                $('#FP-disable-preference').removeClass('hide')
            }
        }, function () {
        })
    }
}

function checkFpEligibilityFn() {
    var inputjson = {}
    $.ajax({
        type: 'POST',
        url: '/login/rest/sas/sm/uafRetrieveRegistrationStatus',
        data: JSON.stringify(inputjson),
        crossDomain: true,
        cache: false,
        timeout: 60000,
        processData: false,
        xhrFields: {
            withCredentials: true
        },
        dataType: 'json',
        headers: {
            'content-type': 'application/json',
            clientAIT: '41339',
            accept: 'application/json',
            'cache-control': 'no-cache'
        },
        error: function (XMLHTTPRequest, textStatus, errorThrown) {
        },
        success: function (successData) {
            if (successData && successData.onlineId) {
                fpuserID = successData.onlineId
                var fp = fpuserID.trim().substring(0, 3)
                var sp = '*****'
                var maskedId = fp + sp
                $('#userData').text(maskedId)
            }
        },
        complete: function (XMLHTTPRequest, textStatus) {
        }
    })
}

function paintFpSection(successData) {
    var data = successData
    if (data.status === 'ENROLL_ELIGIBLE') {
        $('.FP-section').removeClass('hidden')
        $('.dashboard-container').addClass('fp-active')
        $('#FP-enroll-preference').removeClass('hide')
        $('#FP-disable-preference').addClass('hide')
        $('#FP-TnC').removeClass('hide')
        $('#FP-enroll-preference').removeClass('btn-bofa-noRight')
        fpEnabledStatus = true
    } else {
        if (data.status === 'UNENROLL_ELIGIBLE') {
            $('.FP-section').removeClass('hidden')
            $('.dashboard-container').addClass('fp-active')
            $('#FP-enroll-preference').addClass('hide')
            $('#FP-disable-preference').removeClass('hide')
            $('#FP-TnC').addClass('hide')
            fpEnabledStatus = true
        } else {
            if (data.status === 'NON_PILOT') {
            } else {
                enrollEligible = false
                $('.FP-section').removeClass('hidden')
                $('.dashboard-container').addClass('fp-active')
                $('#FP-enroll-preference').removeClass('hide')
                $('#FP-disable-preference').addClass('hide')
                $('#FP-TnC').removeClass('hide')
                $('#FP-enroll-preference').removeClass('btn-bofa-noRight')
                fpEnabledStatus = true
            }
        }
    }
}

function callToeach(obj) {
    var optionValueHTML = ''
    $.each(obj, function (i, val) {
        optionValueHTML += '<option value="' + val.questionId + '" class="TL_NPI_ChallengeAnswer">' + val.questionText + '</option>'
    })
    return optionValueHTML
}

function detectCors() {
    if (corsSupported === false) {
        $.ajax({
            type: 'POST',
            url: '/login/sign-in/crosSupportCheck.go',
            crossDomain: false,
            cache: false,
            async: false,
            timeout: 60000,
            xhrFields: {
                withCredentials: true
            },
            error: function (XMLHTTPRequest, textStatus, errorThrown) {
                window.location.reload()
            },
            success: function (data) {
                if ('SUCCESS' === data) {
                    usePost = true
                    corsSupported = true
                    return corsSupported
                } else {
                    return false
                }
            },
            complete: function (XMLHTTPRequest, textStatus) {
            }
        })
    } else {
        usePost = corsSupported
        return corsSupported
    }
}

function scRequestJSONPPOST(submitParams, scTargetState) {
    $.ajax({
        type: 'POST',
        url: scTargetURL + scTargetState,
        dataType: 'json',
        data: submitParams,
        crossDomain: false,
        cache: false,
        timeout: 60000,
        traditional: true,
        contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
        xhrFields: {
            withCredentials: true
        },
        error: function (XMLHTTPRequest, textStatus, errorThrown) {
            window.location.reload()
        },
        success: function (data, textStatus, XMLHttpRequest) {
            jsonpRequestCallBack(data, scTargetState)
        },
        complete: function (XMLHTTPRequest, textStatus) {
        }
    })
}

function scRequestJSONP(submitParams, scTargetState) {
    if (usePost == true) {
        scRequestJSONPPOST(submitParams, scTargetState)
    } else {
        $.support.cors = true
        $.ajax({
            url: scTargetURL + scTargetState,
            type: 'POST',
            dataType: 'json',
            data: submitParams,
            crossDomain: true,
            cache: false,
            timeout: 60000,
            traditional: true,
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            xhrFields: {
                withCredentials: true
            },
            beforeSend: function () {
            },
            error: function (XMLHTTPRequest, textStatus, errorThrown) {
                window.location.reload()
            },
            success: function (msg, textStatus, XMLHttpRequest) {
                jsonpRequestCallBack(msg, scTargetState)
            },
            complete: function (XMLHTTPRequest, textStatus) {
            }
        })
    }
}

function jsonpRequestCallBack(msg, scTargetState) {
    if (scTargetState === 'securityCenterChangeId.go') {
        securityCenterChangeId(msg)
    } else {
        if (scTargetState === 'securityCenterChangePwd.go') {
            securityCenterChangePwd(msg)
        } else {
            if (scTargetState === 'clickChangeId.go') {
                clickChangeId(msg)
            } else {
                if (scTargetState === 'clickChangePwd.go') {
                    clickChangePwd(msg)
                } else {
                    if (scTargetState === 'securityCenterDisplayQandA.go') {
                        securityCenterDisplayQandA(msg)
                    } else {
                        if (scTargetState === 'securityCenterValidateQandA.go') {
                            securityCenterValidateQandA(msg)
                        } else {
                            if (scTargetState === 'securityCenterConfirmQandA.go') {
                                securityCenterConfirmQandA(msg)
                            } else {
                                if (scTargetState === 'clearSavedId.go') {
                                    clearSavedId(msg)
                                } else {
                                    if (scTargetState === 'editSecurityPreference.go') {
                                        editSecurityPreference(msg)
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

function securityCenterChangeId(msg) {
    try {
        msgObj = msg
        $('#newOnlineID').val('')
        message = msgObj.result
        if (message === 'success') {
            $('.messaging-vipaa-module').removeClass('hide')
            $('.id-container, .id-pwd-section, .pwd-container').addClass('hide')
            $('.id-pwd-section label').removeClass('field-level-error')
            $('#clientSideErrors').hide()
            $('.successMsg').html(label_online_id_success)
            $('.sucess-signin-setting .pos-ack-message').focus()
            $('.current-id').html(newOnlineID)
            $('#change-online-id').removeClass('btn-disabled').addClass('btn-bofa-blue')
            $('#serverSideErrors').attr('aria-hidden', 'true')
            $('#clientSideErrors').attr('aria-hidden', 'true')
            $('.id-pwd-section #clientSideErrors').removeAttr('aria-live')
            $('.sign-in-section').removeClass('active-tab')
            $('#show-id-section').removeClass('hide')
            $('#cancel-id-section').addClass('hide')
            $('#fingerPrintDisplay').hide()
        } else {
            if (message === 'error') {
                if ($('#serverSideErrors').length == 0) {
                    $('.id-pwd-section').prepend('<div class="messaging-vipaa-module hide" aria-live="polite" id="serverSideErrors"><a class="ada-hidden" name="error-message-ada-focus" id="server-error-message-ada-focus">Error Message</a><div class="error-skin" tabindex="0" aria-live="rude"><div class="error-message"><p id="Vipaa_Action_0" class="title-msg TLu_ERROR"></p>\t</div></div></div>')
                }
                $('#serverSideErrors').attr('aria-hidden', 'false')
                $('#serverSideErrors').attr('aria-live', 'polite')
                $('#clientSideErrors').attr('aria-hidden', 'true')
                $('.id-pwd-section #clientSideErrors').removeAttr('aria-live')
                $('.id-container label').addClass('field-level-error')
                $('#clientSideErrors').hide()
                $('#Vipaa_Action_0').html(msgObj.errorMessage[0])
                $('#serverSideErrors').show()
                csrfTokenHiddenValue = msgObj.csrfTokenHidden
                $('#change-online-id').removeClass('btn-disabled').addClass('btn-bofa-blue')
                newOnlineID = ''
            }
        }
    } catch (exception) {
        window.location.reload()
    }
}

function securityCenterChangePwd(msg) {
    try {
        passcodeObj = msg
        $('#currentPassCode').val('')
        $('#newPassCode').val('')
        $('#confirmNewPassCode').val('')
        message = passcodeObj.result
        if (message === 'success') {
            var dateDisplay = new Date(),
                monthString = [
                    'January',
                    'February',
                    'March',
                    'April',
                    'May',
                    'June',
                    'July',
                    'August',
                    'September',
                    'October',
                    'November',
                    'December'
                ],
                UTCTime = dateDisplay.getTime() + (dateDisplay.getTimezoneOffset() * 60000),
                ESTTime = new Date(UTCTime - (3600000 * 5)),
                currentDate = monthString[ESTTime.getMonth()] + ' ' + ESTTime.getDate() + ', ' + ESTTime.getFullYear()
            $('.password-last-update').html(currentDate)
            $('.password-last-update, .changed-title').removeClass('hide')
            $('.sc-pwd-section .tab-content').removeClass('no-inner-content')
            $('.messaging-vipaa-module').removeClass('hide')
            $('.sign-in-section').removeClass('active-tab')
            $('#show-passcode-section').removeClass('hide')
            $('#cancel-pwd-section').addClass('hide')
            $('.id-container, .id-pwd-section, .pwd-container').addClass('hide')
            $('.id-pwd-section label').removeClass('field-level-error')
            $('#clientSideErrors').hide()
            $('.successMsg').html(label_passcode_success)
            $('.sucess-signin-setting .pos-ack-message').focus()
            $('#change-passcode').removeClass('btn-disabled').addClass('btn-bofa-blue')
            $('#serverSideErrors').attr('aria-hidden', 'true')
            $('#clientSideErrors').attr('aria-hidden', 'true')
            $('.id-pwd-section #clientSideErrors').removeAttr('aria-live')
        } else {
            if (message === 'error') {
                if ($('#serverSideErrors').length == 0) {
                    $('.id-pwd-section').prepend('<div class="messaging-vipaa-module hide" aria-live="polite" id="serverSideErrors"><a class="ada-hidden" name="error-message-ada-focus" id="server-error-message-ada-focus">Error Message</a><div class="error-skin" tabindex="0" aria-live="rude"><div class="error-message"><p id="Vipaa_Action_0" class="title-msg TLu_ERROR"></p>\t</div></div></div>')
                }
                $('#serverSideErrors').attr('aria-hidden', 'false')
                $('#serverSideErrors').attr('aria-live', 'polite')
                $('.pwd-container label').addClass('field-level-error')
                if (typeof passcodeObj.errorMessage !== 'undefined') {
                    $('#Vipaa_Action_0').html(passcodeObj.errorMessage[0])
                    $('#serverSideErrors').show()
                    $('#change-passcode').removeClass('btn-disabled').addClass('btn-bofa-blue')
                } else {
                    $('#change-passcode').removeClass('btn-disabled').addClass('btn-bofa-blue')
                }
                csrfTokenHiddenValue = passcodeObj.csrfTokenHidden
            }
        }
    } catch (exception) {
        window.location.reload()
    }
}

function clickChangeId(msg) {
    csrfTokenHiddenValue = msg.csrfTokenHidden
    $('.csrfTokenHiddenOID').val(csrfTokenHiddenValue)
}

function clickChangePwd(msg) {
    csrfTokenHiddenValue = msg.csrfTokenHidden
    $('.csrfTokenHiddenPasscode').val(csrfTokenHiddenValue)
}

function securityCenterDisplayQandA(msg) {
    message = msg.result
    securityquestionVal = msg
    $('#question1,#question2,#question3').html($('#question1 option:first'))
    if (message === 'displayQuestions') {
        $('#question1').append(callToeach(msg.challQuesGroups[0].questionList))
        $('#question2').append(callToeach(msg.challQuesGroups[1].questionList))
        $('#question3').append(callToeach(msg.challQuesGroups[2].questionList))
        csrfTokenHiddenValue = msg.csrfTokenHidden
    } else {
        if (message === 'degradedAuthAjax') {
            if ($('.personal-challenge-section #chalServerSideErrors').length == 0) {
                $('.personal-challenge-section').prepend('<div class="messaging-vipaa-module hide" aria-live="polite" id="chalServerSideErrors"><a class="ada-hidden" name="error-message-ada-focus" id="server-error-message-ada-focus">Error Message</a><div class="error-skin" tabindex="0" aria-live="rude"><div class="error-message"><p id="Vipaa_Action_0" class="title-msg TLu_ERROR"></p>\t</div></div></div>')
            }
            $('.personal-challenge-section label').addClass('field-level-error')
            if (typeof msg.errorMessage !== 'undefined') {
                $('.personal-challenge-section #chalServerSideErrors #Vipaa_Action_0').html(msg.errorMessage[0])
                $('#chalServerSideErrors').show()
                $('#sc-continue-questions-submit').removeClass('btn-disabled').addClass('btn-bofa-blue')
                $('#answer1').val('')
                $('#answer2').val('')
                $('#answer3').val('')
                $('#challengeSCSelectForm').addClass('hide')
                $('.sd-quick-help').addClass('hide')
            }
        }
    }
}

function securityCenterValidateQandA(msg) {
    message = msg.result
    if (message === 'reviewQuestions') {
        var enteredanswer1 = $('#answer1').val().replace(/[^\s]/g, '*'),
            enteredanswer2 = $('#answer2').val().replace(/[^\s]/g, '*'),
            enteredanswer3 = $('#answer3').val().replace(/[^\s]/g, '*')
        $('#show-unmasked-answer1').click(function (event) {
            $('.displayans1').html($('#answer1').val())
            $('#show-unmasked-answer1').css('display', 'none')
            $('#hide-unmasked-answer1').css('display', 'inline-block')
        })
        $('#hide-unmasked-answer1').click(function (event) {
            $('.displayans1').html($('#answer1').val().replace(/[^\s]/g, '*'))
            $('#show-unmasked-answer1').css('display', 'inline-block')
            $('#hide-unmasked-answer1').css('display', 'none')
        })
        $('#show-unmasked-answer2').click(function (event) {
            $('.displayans2').html($('#answer2').val())
            $('#show-unmasked-answer2').css('display', 'none')
            $('#hide-unmasked-answer2').css('display', 'inline-block')
        })
        $('#hide-unmasked-answer2').click(function (event) {
            $('.displayans2').html($('#answer2').val().replace(/[^\s]/g, '*'))
            $('#show-unmasked-answer2').css('display', 'inline-block')
            $('#hide-unmasked-answer2').css('display', 'none')
        })
        $('#show-unmasked-answer3').click(function (event) {
            $('.displayans3').html($('#answer3').val())
            $('#show-unmasked-answer3').css('display', 'none')
            $('#hide-unmasked-answer3').css('display', 'inline-block')
        })
        $('#hide-unmasked-answer3').click(function (event) {
            $('.displayans3').html($('#answer3').val().replace(/[^\s]/g, '*'))
            $('#show-unmasked-answer3').css('display', 'inline-block')
            $('#hide-unmasked-answer3').css('display', 'none')
        })
        selectedanswerVal = {
            questionId1: $('#question1').val(),
            questionId2: $('#question2').val(),
            questionId3: $('#question3').val(),
            questionText1: $('#question1 option:selected').text(),
            questionText2: $('#question2 option:selected').text(),
            questionText3: $('#question3 option:selected').text(),
            actualAnswer1: encryptA($('#answer2').val(), vipaaPublicKey),
            actualAnswer2: encryptA($('#answer2').val(), vipaaPublicKey),
            actualAnswer3: encryptA($('#answer3').val(), vipaaPublicKey),
            csrfTokenHidden: csrfTokenHiddenValue,
            nextAction: 'Continue'
        }
        $('#challengeSCSelectForm').addClass('hide')
        $('.reviewAnswer').removeClass('hide')
        $('span.bac-dialog-open').html('&nbsp;  layer: Confirm change to challenge questions and answers')
        $('.displayque1').html(selectedanswerVal.questionText1)
        $('.displayque2').html(selectedanswerVal.questionText2)
        $('.displayque3').html(selectedanswerVal.questionText3)
        $('.displayans1').html(enteredanswer1)
        $('.displayans2').html(enteredanswer2)
        $('.displayans3').html(enteredanswer3)
        csrfTokenHiddenValue = msg.csrfTokenHidden
    } else {
        if (message === 'displayQuestions') {
            $('#question1, #question2, #question3').prop('selectedIndex', 0)
            $('#question1,#question2,#question3').html($('#question1 option:first'))
            $('#question1').append(callToeach(msg.challQuesGroups[0].questionList))
            $('#question2').append(callToeach(msg.challQuesGroups[1].questionList))
            $('#question3').append(callToeach(msg.challQuesGroups[2].questionList))
            csrfTokenHiddenValue = msg.csrfTokenHidden
            if ($('.personal-challenge-section #chalServerSideErrors').length == 0) {
                $('.personal-challenge-section').prepend('<div class="messaging-vipaa-module hide" aria-live="polite" id="chalServerSideErrors"><a class="ada-hidden" name="error-message-ada-focus" id="server-error-message-ada-focus">Error Message</a><div class="error-skin" tabindex="0" aria-live="rude"><div class="error-message"><p id="Vipaa_Action_0" class="title-msg TLu_ERROR"></p>\t</div></div></div>')
            }
            $('.personal-challenge-section label').addClass('field-level-error')
            if (typeof msg.errorMessage !== 'undefined') {
                $('.personal-challenge-section #chalServerSideErrors #Vipaa_Action_0').html(msg.errorMessage[0])
                $('#chalServerSideErrors').show()
                $('#sc-continue-questions-submit').removeClass('btn-disabled').addClass('btn-bofa-blue')
                $('#answer1').val('')
                $('#answer2').val('')
                $('#answer3').val('')
            }
        } else {
            if (message === 'failed') {
                $('.personal-challenge-section label').removeClass('field-level-error')
                if (typeof msg.errorMessage !== 'undefined') {
                    if ($('#serverSideErrors').length == 0) {
                        $('.personal-challenge-section').prepend('<div class="messaging-vipaa-module hide" aria-live="polite" id="serverSideErrors"><a class="ada-hidden" name="error-message-ada-focus" id="server-error-message-ada-focus">Error Message</a><div class="error-skin" tabindex="0" aria-live="rude"><div class="error-message"><p id="Vipaa_Action_0" class="title-msg TLu_ERROR"></p>\t</div></div></div>')
                    }
                    $('.personal-challenge-section label').addClass('field-level-error')
                    $('#Vipaa_Action_0').html(msg.errorMessage[0])
                    $('#serverSideErrors').show()
                    $('#change-passcode').removeClass('btn-disabled').addClass('btn-bofa-blue')
                }
            } else {
                if ($('#serverSideErrors').length == 0) {
                    $('.personal-challenge-section').prepend('<div class="messaging-vipaa-module hide" aria-live="polite" id="serverSideErrors"><a class="ada-hidden" name="error-message-ada-focus" id="server-error-message-ada-focus">Error Message</a><div class="error-skin" tabindex="0" aria-live="rude"><div class="error-message"><p id="Vipaa_Action_0" class="title-msg TLu_ERROR"></p>\t</div></div></div>')
                }
                $('.personal-challenge-section label').addClass('field-level-error')
                if (typeof msg.errorMessage !== 'undefined') {
                    $('#Vipaa_Action_0').html(msg.errorMessage[0])
                    $('#serverSideErrors').show()
                    $('#change-passcode').removeClass('btn-disabled').addClass('btn-bofa-blue')
                } else {
                    $('#change-passcode').removeClass('btn-disabled').addClass('btn-bofa-blue')
                }
            }
        }
    }
    $('#challenge-qns-modal-modalClose').focus()
}

function securityCenterConfirmQandA(msg) {
    message = msg.result
    if (message === 'displayConfirmAck') {
        $('.messaging-vipaa-module').removeClass('hide')
        $('.successMsg').html(label_challenge_questions_success)
        $('#challenge-qns-modal-modalClose').click()
        $('.sucess-signin-setting .pos-ack-message').focus()
    } else {
        if (message === 'displayQuestions') {
            $('#challengeSCSelectForm').removeClass('hide')
            $('.reviewAnswer').addClass('hide')
            $('#question1, #question2, #question3').prop('selectedIndex', 0)
            $('#question1,#question2,#question3').html($('#question1 option:first'))
            $('#question1').append(callToeach(msg.challQuesGroups[0].questionList))
            $('#question2').append(callToeach(msg.challQuesGroups[1].questionList))
            $('#question3').append(callToeach(msg.challQuesGroups[2].questionList))
            csrfTokenHiddenValue = msg.csrfTokenHidden
        } else {
            if (message === 'degradedAuthAjax') {
                if ($('.personal-challenge-section #chalServerSideErrors').length == 0) {
                    $('.personal-challenge-section').prepend('<div class="messaging-vipaa-module hide" aria-live="polite" id="chalServerSideErrors"><a class="ada-hidden" name="error-message-ada-focus" id="server-error-message-ada-focus">Error Message</a><div class="error-skin" tabindex="0" aria-live="rude"><div class="error-message"><p id="Vipaa_Action_0" class="title-msg TLu_ERROR"></p>\t</div></div></div>')
                }
                $('.personal-challenge-section label').addClass('field-level-error')
                if (typeof msg.errorMessage !== 'undefined') {
                    $('.personal-challenge-section #chalServerSideErrors #Vipaa_Action_0').html(msg.errorMessage[0])
                    $('#chalServerSideErrors').show()
                    $('#sc-continue-questions-submit').removeClass('btn-disabled').addClass('btn-bofa-blue')
                    $('#answer1').val('')
                    $('#answer2').val('')
                    $('#answer3').val('')
                    $('#challengeSCSelectForm').addClass('hide')
                    $('.sd-quick-help').addClass('hide')
                }
            } else {
                if (message === 'success') {
                }
            }
        }
    }
}

function clearSavedId(msg) {
    savedOIDobj = msg
    message = savedOIDobj.result
    savedOIDHtml = ''
    if (message === 'success') {
        $.each(savedOIDobj.clearedIdList, function (i, val) {
            savedOIDHtml += '<div class="saved-id-list">' + val.maskedId + '</div>'
        })
        $('#savedoIdDisplay').html(savedOIDHtml)
        $('#savedoId legend').addClass('hide')
        $('.displaySavedID').addClass('hide')
        $('.clearedSavedID').removeClass('hide')
        savedIdListJson.savedIdList = savedOIDobj.savedIdList
        $('.edit-savedId-btnPin').addClass('hide')
        $('.edit-closeID-btnPin').removeClass('hide')
        if (savedOIDobj.savedIdCount < 1 && $('html').attr('lang').toLowerCase() == 'en-us') {
            $('.edit-oid').hide()
            $('.onlineID-content').html('You have 0 saved<br>Online IDs ')
        } else {
            if (savedOIDobj.savedIdCount < 1 && $('html').attr('lang').toLowerCase() == 'es-us') {
                $('.edit-oid').hide()
                $('.onlineID-content').html('Tiene 0 guardadas<br>Identificaciones en l&#237;nea')
            } else {
                $('.onlineID-content').html('You have ' + savedOIDobj.savedIdCount + ' saved<br>Online IDs ')
            }
        }
    } else {
        if (message == 'error') {
        }
    }
}

function editSecurityPreference(msg) {
    secPreDobj = msg
    message = secPreDobj.result
    savedOIDHtml = ''
    if (message === 'success') {
        $('.messaging-vipaa-module').removeClass('hide')
        $('.successMsg').html(label_security_preference_success)
        $('.sucess-signin-setting .pos-ack-message').focus()
    } else {
        if (message === 'error') {
        }
    }
}

function oncloseFunc() {
    $('#chalServerSideErrors').addClass('hide')
    $('.personal-challenge-section #CQModalErrors').removeClass('messaging-vipaa-module').addClass('temp-vipaa-module')
    $('#idpwdError').attr('id', 'clientSideErrors')
    $('#clientSideErrors').addClass('messaging-vipaa-module')
    $('.personal-challenge-section label').removeClass('field-level-error')
    typeof boa.vipaa === 'object' && typeof boa.vipaa.resetCMParentPageID === 'function' ? boa.vipaa.resetCMParentPageID : function () {
    }
}

function u2fmodalClose() {
    if (window.currentu2fstep === 'finish') {
        if (fsdgoto && typeof fsdgoto === 'function') {
            fsdgoto('securitycenter')
        }
    }
}

function offsetTooltips(offsetFlag) {
    var newPasswordTooltipPos = $('#password-tooltip').offset()
    var confirmPasswordTooltipPos = $('#confirm-new-pass-tooltip').offset()
    if (typeof offsetFlag !== 'undefined' && offsetFlag) {
        if ($('label').prop('for', 'newPassCode').hasClass('field-level-error')) {
            $('#password-tooltip').css('margin-left', '30px')
        }
        if ($('label').prop('for', 'confirmNewPassCode').hasClass('field-level-error')) {
            $('#confirm-new-pass-tooltip').css('margin-left', '30px')
        }
    } else {
        $('#password-tooltip').css('margin-left', '-30px')
        $('#confirm-new-pass-tooltip').css('margin-left', '-30px')
    }
}

$(document).ready(function () {
    if ($('.sc-vipaa-module .xtra-security-skin').length > 0) {
        $('.try-it').click(function (e) {
            if (extraSecurityOTPLocked === 'true') {
                $('#lockout-error-div').removeClass('hide')
            } else {
                $('#acwContainer,.otp-step-section').removeClass('hide')
            }
            $(this).addClass('hide')
        })
        $('#addXtraSecurityBtn').click(function (e) {
            if (!$(this).hasClass('btn-disabled')) {
                document.XtraSecurityForm.submit()
            }
        })
    }
})

function addServiceADAText() {
    var maxIndex = $('div.carousel-slide').length - 1
    if ($('.carousel-slide:visible').index() == 0) {
        $('.prev').html('<span class="ada-hidden">previous banner ' + $('.carousel-slide').eq(maxIndex).children('h2').text() + '</span>')
        $('.next').html('<span class="ada-hidden">next banner ' + $('.carousel-slide:visible').next().find('h2').text() + '</span>')
    } else {
        if ($('.carousel-slide:visible').index() == maxIndex) {
            $('.prev').html('<span class="ada-hidden">previous banner ' + $('.carousel-slide:visible').prev().find('h2').text() + '</span>')
            $('.next').html('<span class="ada-hidden">next banner ' + $('.carousel-slide').eq('0').children('h2').text() + '</span>')
        } else {
            $('.prev').html('<span class="ada-hidden">previous banner ' + $('.carousel-slide:visible').prev().find('h2').text() + '</span>')
            $('.next').html('<span class="ada-hidden">next banner ' + $('.carousel-slide:visible').next().find('h2').text() + '</span>')
        }
    }
    $('.prev').attr('name', 'previous-slide')
    $('.next').attr('name', 'next-slide')
}

$(document).ready(function () {
    if ($('.side-well-vipaa-module .sb-carousel-skin').length > 0) {
        $('#banner-slides').slides({
            container: 'banner-slides-container',
            prependNextPrev: true,
            paginationAdaPrep: 'of',
            paginationClass: 'pagination',
            prependPagination: true,
            generateNextPrev: true,
            effect: 'fade',
            crossfade: true,
            bigTarget: true,
            slidesLoaded: function () {
                addServiceADAText()
            },
            animationComplete: function () {
                addServiceADAText()
            }
        }).find('.prev,.next').text(' ')
        var services
        $('.learnmore').click(function () {
            var id = $(this).attr('id')
            var href = $(this).attr('href')
            if (href == 'javascript:void(0);') {
                var id = $(this).attr('id')
                if (id == 'learn_more1') {
                    services = 'PayrollService'
                }
                if (id == 'learn_more2') {
                    services = 'DirectPayments'
                }
                if (id == 'learn_more3') {
                    services = 'ExpressInvoicing'
                }
                $(this).attr('href', '/customer/adminenrollments/enroll/businessToolsUpsell.go')
                window.location.href = '/customer/adminenrollments/enroll/businessToolsUpsell.go'
            }
        })
    }
})
var $sideWellHelpBoaLangObj = $sideWellHelpBoaLangObj || {}
$sideWellHelpBoaLangObj.show = 'Activate to expand. '
$sideWellHelpBoaLangObj.hide = 'Activate to collapse. '
$(document).ready(function () {
    if ($('.side-well-vipaa-module .sc-skin').length > 0) {
        $('.side-well-vipaa-module .sc-skin ul li a:first-child span.ada-hidden').html($sideWellHelpBoaLangObj.show)
        $('a.sw-item').click(function (e) {
            var $thisLinkState = $(this).parents('li, h3').hasClass('selected') ? 'Expanded' : 'Collapsed'
            $('.side-well-vipaa-module .sc-skin ul li div.sw-content:not(\'report-issue\')').addClass('hide')
            $('.side-well-vipaa-module .sc-skin ul li, .side-well-vipaa-module .sc-skin h3').removeClass('selected')
            $('.report-issue').parent().addClass('hide')
            $('.side-well-vipaa-module .sc-skin ul li a:first-child span.ada-hidden').html($sideWellHelpBoaLangObj.show)
            if ($thisLinkState === 'Collapsed') {
                $(this).parents('li, h3').addClass('selected')
                $(this).children('span.ada-hidden').html($sideWellHelpBoaLangObj.hide)
                $(this).attr('aria-expanded', true)
                $(this).next('.sw-content').removeClass('hide').attr('aria-live', 'rude').focus()
                if ($(this).parents('h3').length > 0) {
                    $('.report-issue').removeClass('hide').attr('aria-live', 'rude').focus()
                    $('.report-issue').parent().removeClass('hide')
                }
            } else {
                $(this).parents('li, h3').removeClass('selected')
                $(this).children('span.ada-hidden').html($sideWellHelpBoaLangObj.show)
                $(this).attr('aria-expanded', false)
                $(this).next('.sw-content').addClass('hide').removeAttr('aria-live')
                if ($(this).parents('h3').length > 0) {
                    $('.report-issue').addClass('hide').removeAttr('aria-live')
                    $('.report-issue').parent().addClass('hide')
                }
            }
        })
        if (((window.location.href).search('=reportproblem') >= 0)) {
            $('.side-well-vipaa-module .sc-skin h3 a.sw-item').trigger('click')
        }
        $(document.body).on('click', '.fraud-report-problem', function (event) {
            $('.side-well-vipaa-module .sc-skin h3 a.sw-item').trigger('click')
        })
    }
})
var questionValue = ''
var duplicateExists = false
var lpfielderror = 0
$(document).ready(function () {
    if ($('.sk-vipaa-module .qanda-skin').length > 0) {
        $('#answer1,#answer2,#answer3').bind('keypress', function (e) {
            if (e.keyCode == 13) {
                $('#challengeSelectForm').submit()
            }
        })
        if ($('.gis-mask').length > 0 && typeof window.boa === 'object' && typeof window.boa.form === 'object' && typeof window.boa.form.init === 'function' && $('.ie-7').length > 0) {
            $(document).trigger('common-form-disable')
            window.boa.form.disable()
        }
        $('#continue-questions-submit').click(function (event) {
            if ($('label[for=\'question1\'],label[for=\'question2\'],label[for=\'question3\'],label[for=\'answer1\'],label[for=\'answer2\'],label[for=\'answer3\']').hasClass('field-level-error')) {
                if (typeof lpSendData == 'function') {
                    lpfielderror++
                    lpSendData('page', 'ErrorCounter', lpfielderror)
                    lpSendData('page', 'FieldErrorCounter', lpfielderror)
                }
            }
            $('#challengeSelectForm').submit()
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#challengeSelectForm').validate({
                includeFieldLabel: false,
                customSelects: false,
                messages: {
                    question1: {
                        required: 'Please complete all 3 questions and answers.'
                    },
                    question2: {
                        required: 'Please complete all 3 questions and answers.'
                    },
                    question3: {
                        required: 'Please complete all 3 questions and answers.'
                    },
                    answer1: {
                        required: 'Please complete all of the required field(s).',
                        alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &).'
                    },
                    answer2: {
                        required: 'Please complete all of the required field(s).',
                        alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &).'
                    },
                    answer3: {
                        required: 'Please complete all of the required field(s).',
                        alphanumericspace: 'Please only use letters, numbers and spaces, and remove any special characters (#, $, %, ^, &).'
                    }
                },
                rules: {
                    question1: {
                        required: true
                    },
                    question2: {
                        required: true
                    },
                    question3: {
                        required: true
                    },
                    answer1: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    },
                    answer2: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    },
                    answer3: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    }
                }
            })
        } else {
            $('#challengeSelectForm').validate({
                includeFieldLabel: false,
                customSelects: false,
                messages: {
                    question1: {
                        required: 'Por favor, complete todas las preguntas y respuestas.'
                    },
                    question2: {
                        required: 'Por favor, complete todas las preguntas y respuestas.'
                    },
                    question3: {
                        required: 'Por favor, complete todas las preguntas y respuestas.'
                    },
                    answer1: {
                        required: 'Por favor, complete todos los campos obligatorios.',
                        alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &).'
                    },
                    answer2: {
                        required: 'Por favor, complete todos los campos obligatorios.',
                        alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &).'
                    },
                    answer3: {
                        required: 'Por favor, complete todos los campos obligatorios.',
                        alphanumericspace: 'Por favor, utilice s&#243;lo letras, n&#250;meros y espacios, y elimine cualquier car&#225;cter especial (#, $, %, ^, &).'
                    }
                },
                rules: {
                    question1: {
                        required: true
                    },
                    question2: {
                        required: true
                    },
                    question3: {
                        required: true
                    },
                    answer1: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    },
                    answer2: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    },
                    answer3: {
                        required: true,
                        alphanumericspace: '$%&\\^#'
                    }
                }
            })
        }
        $('#answer1,#answer2,#answer3').focus(function () {
            if ($('#continue-questions-submit').hasClass('btn-disabled')) {
                $('#continue-questions-submit').removeClass('btn-disabled').addClass('btn-bofa-blue')
            }
        })
        $('select').change(function () {
            questionValue = $('option:selected', this).text()
            duplicateExists = false
            $('select').not('#' + $(this).attr('id')).each(function () {
                if (!$('option:eq(0)', this).attr('selected')) {
                    if ($('option:selected', this).text() == questionValue) {
                        $('option:eq(0)', this).attr('selected', 'selected')
                        $('label[for=\'' + $(this).attr('id') + '\']').addClass('field-level-error')
                        duplicateExists = true
                    } else {
                        $('label[for=\'' + $(this).attr('id') + '\']').removeClass('field-level-error')
                    }
                }
            })
            if (!duplicateExists) {
                $('label[for=\'' + $(this).attr('id') + '\']').removeClass('field-level-error')
                $('.messaging-module#clientSideErrors').css('display', 'none')
            } else {
                $('.messaging-module#clientSideErrors').css('display', 'block')
                if ($('html').attr('lang').toLowerCase() == 'en-us') {
                    $('.messaging-module#clientSideErrors .error-message ul').empty().append('<li><span style="display: block;">Please select 3 different questions.</span></li>')
                } else {
                    $('.messaging-module#clientSideErrors .error-message ul').empty().append('<li><span style="display: block;">Por favor, complete las 3 preguntas y respuestas.</span></li>')
                }
            }
        })
        post_deviceprint()
    }
})
$(document).ready(function () {
    if ($('.sk-vipaa-module .safepass-skin').length > 0) {
        $(document.body).on('click', 'a[name^="close-sec-help"]', function (event) {
            var parentId = $(this).attr('rel')
            $('.ui-dialog-content').trigger('dialogclose').parent().remove()
            $('#' + parentId).focus()
        })
        $('a[name=\'safepass-submit\']').click(function () {
            if ($(this).hasClass('btn-bofa-blue')) {
                $(this).removeClass('btn-bofa-blue').addClass('btn-disabled')
                $('#ConfirmSitekeySafePassForm').submit()
            } else {
                return false
            }
        })
        $('#ConfirmSitekeySafePassForm').removeAttr('novalidate')
    }
})
$(document).ready(function () {
    if ($('.sk-vipaa-module .verify-comp-skin').length > 0) {
        $(document.body).on('click', 'a[name^="close-sec-help"]', function (event) {
            var parentId = $(this).attr('rel')
            $('.ui-dialog-content').trigger('dialogclose').parent().remove()
            $('#' + parentId).focus()
        })
        if ($('.gis-mask').length > 0 && typeof window.boa.form.init !== 'undefined' && $('.ie-7').length > 0) {
            boa.form.disable()
        }
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#VerifyCompForm').validate({
                messages: {
                    'tlpvt-challenge-answer': {
                        required: 'Please provide an answer to your challenge question'
                    },
                    'yes-recognize': {
                        required: 'Please select a Security Preference.'
                    }
                },
                rules: {
                    'tlpvt-challenge-answer': {
                        required: true
                    },
                    'yes-recognize': {
                        required: {
                            depends: function (element) {
                                return !$('input:radio').is(':checked')
                            }
                        }
                    }
                },
                disableButtonBlueId: 'verify-cq-submit',
                includeFieldLabel: false,
                invalidHandler: function (event, validator) {
                    if (!$('input:radio').is(':checked')) {
                        $('legend.sec-pref').addClass('field-level-error')
                    } else {
                        $('legend.sec-pref').removeClass('field-level-error')
                    }
                }
            })
        } else {
            $('#VerifyCompForm').validate({
                messages: {
                    'tlpvt-challenge-answer': {
                        required: 'Por favor, proporcione una respuesta para su pregunta de seguridad'
                    },
                    'yes-recognize': {
                        required: 'Por favor, seleccione una Preferencia de seguridad.'
                    }
                },
                rules: {
                    'tlpvt-challenge-answer': {
                        required: true
                    },
                    'yes-recognize': {
                        required: {
                            depends: function (element) {
                                return !$('input:radio').is(':checked')
                            }
                        }
                    }
                },
                disableButtonBlueId: 'verify-cq-submit',
                includeFieldLabel: false,
                invalidHandler: function (event, validator) {
                    if (!$('input:radio').is(':checked')) {
                        $('legend.sec-pref').addClass('field-level-error')
                    } else {
                        $('legend.sec-pref').removeClass('field-level-error')
                    }
                }
            })
        }
        $('#tlpvt-challenge-answer', '.sk-vipaa-module .verify-comp-skin').focus().keypress(function (e) {
            if (e.keyCode == 13) {
                $(this).closest('form').find('.btn-bofa-blue').click()
            }
        })
        $('#link-content-yes').on('click', function () {
            var setTop = $('#link-content-yes').offset().top - 65 + 'px'
            var setTopArrow = $('#link-content-yes').offset().top - 385 + 'px'
            $('#help-content-yes').parents().find('.ui-dialog').css('position', 'absolute').css('top', setTop)
            $('#help-content-yes').parents().find('.dialog-arrow').css('position', 'absolute').css('top', setTopArrow)
        })
    }
})
/*! JSEncrypt v2.3.1 | https://npmcdn.com/jsencrypt@2.3.1/LICENSE.txt */
!function (t, e) {
    'function' == typeof define && define.amd ? define(['exports'], e) : e('object' == typeof exports && 'string' != typeof exports.nodeName ? module.exports : t)
}(this, function (t) {
    function e(t, e, i) {
        null != t && ('number' == typeof t ? this.fromNumber(t, e, i) : null == e && 'string' != typeof t ? this.fromString(t, 256) : this.fromString(t, e))
    }

    function i() {
        return new e(null)
    }

    function r(t, e, i, r, s, n) {
        for (; --n >= 0;) {
            var o = e * this[t++] + i[r] + s
            s = Math.floor(o / 67108864),
                i[r++] = 67108863 & o
        }
        return s
    }

    function s(t, e, i, r, s, n) {
        for (var o = 32767 & e, h = e >> 15; --n >= 0;) {
            var a = 32767 & this[t],
                u = this[t++] >> 15,
                c = h * a + u * o
            a = o * a + ((32767 & c) << 15) + i[r] + (1073741823 & s),
                s = (a >>> 30) + (c >>> 15) + h * u + (s >>> 30),
                i[r++] = 1073741823 & a
        }
        return s
    }

    function n(t, e, i, r, s, n) {
        for (var o = 16383 & e, h = e >> 14; --n >= 0;) {
            var a = 16383 & this[t],
                u = this[t++] >> 14,
                c = h * a + u * o
            a = o * a + ((16383 & c) << 14) + i[r] + s,
                s = (a >> 28) + (c >> 14) + h * u,
                i[r++] = 268435455 & a
        }
        return s
    }

    function o(t) {
        return Be.charAt(t)
    }

    function h(t, e) {
        var i = Ke[t.charCodeAt(e)]
        return null == i ? -1 : i
    }

    function a(t) {
        for (var e = this.t - 1; e >= 0; --e) {
            t[e] = this[e]
        }
        t.t = this.t,
            t.s = this.s
    }

    function u(t) {
        this.t = 1,
            this.s = 0 > t ? -1 : 0,
            t > 0 ? this[0] = t : -1 > t ? this[0] = t + this.DV : this.t = 0
    }

    function c(t) {
        var e = i()
        return e.fromInt(t),
            e
    }

    function f(t, i) {
        var r
        if (16 == i) {
            r = 4
        } else {
            if (8 == i) {
                r = 3
            } else {
                if (256 == i) {
                    r = 8
                } else {
                    if (2 == i) {
                        r = 1
                    } else {
                        if (32 == i) {
                            r = 5
                        } else {
                            if (4 != i) {
                                return void this.fromRadix(t, i)
                            }
                            r = 2
                        }
                    }
                }
            }
        }
        this.t = 0,
            this.s = 0
        for (var s = t.length, n = !1, o = 0; --s >= 0;) {
            var a = 8 == r ? 255 & t[s] : h(t, s)
            0 > a ? '-' == t.charAt(s) && (n = !0) : (n = !1, 0 == o ? this[this.t++] = a : o + r > this.DB ? (this[this.t - 1] |= (a & (1 << this.DB - o) - 1) << o, this[this.t++] = a >> this.DB - o) : this[this.t - 1] |= a << o, o += r, o >= this.DB && (o -= this.DB))
        }
        8 == r && 0 != (128 & t[0]) && (this.s = -1, o > 0 && (this[this.t - 1] |= (1 << this.DB - o) - 1 << o)),
            this.clamp(),
        n && e.ZERO.subTo(this, this)
    }

    function p() {
        for (var t = this.s & this.DM; this.t > 0 && this[this.t - 1] == t;) {
            --this.t
        }
    }

    function l(t) {
        if (this.s < 0) {
            return '-' + this.negate().toString(t)
        }
        var e
        if (16 == t) {
            e = 4
        } else {
            if (8 == t) {
                e = 3
            } else {
                if (2 == t) {
                    e = 1
                } else {
                    if (32 == t) {
                        e = 5
                    } else {
                        if (4 != t) {
                            return this.toRadix(t)
                        }
                        e = 2
                    }
                }
            }
        }
        var i,
            r = (1 << e) - 1,
            s = !1,
            n = '',
            h = this.t,
            a = this.DB - h * this.DB % e
        if (h-- > 0) {
            for (a < this.DB && (i = this[h] >> a) > 0 && (s = !0, n = o(i)); h >= 0;) {
                e > a ? (i = (this[h] & (1 << a) - 1) << e - a, i |= this[--h] >> (a += this.DB - e)) : (i = this[h] >> (a -= e) & r, 0 >= a && (a += this.DB, --h)),
                i > 0 && (s = !0),
                s && (n += o(i))
            }
        }
        return s ? n : '0'
    }

    function d() {
        var t = i()
        return e.ZERO.subTo(this, t),
            t
    }

    function g() {
        return this.s < 0 ? this.negate() : this
    }

    function m(t) {
        var e = this.s - t.s
        if (0 != e) {
            return e
        }
        var i = this.t
        if (e = i - t.t, 0 != e) {
            return this.s < 0 ? -e : e
        }
        for (; --i >= 0;) {
            if (0 != (e = this[i] - t[i])) {
                return e
            }
        }
        return 0
    }

    function y(t) {
        var e,
            i = 1
        return 0 != (e = t >>> 16) && (t = e, i += 16),
        0 != (e = t >> 8) && (t = e, i += 8),
        0 != (e = t >> 4) && (t = e, i += 4),
        0 != (e = t >> 2) && (t = e, i += 2),
        0 != (e = t >> 1) && (t = e, i += 1),
            i
    }

    function b() {
        return this.t <= 0 ? 0 : this.DB * (this.t - 1) + y(this[this.t - 1] ^ this.s & this.DM)
    }

    function T(t, e) {
        var i
        for (i = this.t - 1; i >= 0; --i) {
            e[i + t] = this[i]
        }
        for (i = t - 1; i >= 0; --i) {
            e[i] = 0
        }
        e.t = this.t + t,
            e.s = this.s
    }

    function S(t, e) {
        for (var i = t; i < this.t; ++i) {
            e[i - t] = this[i]
        }
        e.t = Math.max(this.t - t, 0),
            e.s = this.s
    }

    function R(t, e) {
        var i,
            r = t % this.DB,
            s = this.DB - r,
            n = (1 << s) - 1,
            o = Math.floor(t / this.DB),
            h = this.s << r & this.DM
        for (i = this.t - 1; i >= 0; --i) {
            e[i + o + 1] = this[i] >> s | h,
                h = (this[i] & n) << r
        }
        for (i = o - 1; i >= 0; --i) {
            e[i] = 0
        }
        e[o] = h,
            e.t = this.t + o + 1,
            e.s = this.s,
            e.clamp()
    }

    function E(t, e) {
        e.s = this.s
        var i = Math.floor(t / this.DB)
        if (i >= this.t) {
            return void (e.t = 0)
        }
        var r = t % this.DB,
            s = this.DB - r,
            n = (1 << r) - 1
        e[0] = this[i] >> r
        for (var o = i + 1; o < this.t; ++o) {
            e[o - i - 1] |= (this[o] & n) << s,
                e[o - i] = this[o] >> r
        }
        r > 0 && (e[this.t - i - 1] |= (this.s & n) << s),
            e.t = this.t - i,
            e.clamp()
    }

    function D(t, e) {
        for (var i = 0, r = 0, s = Math.min(t.t, this.t); s > i;) {
            r += this[i] - t[i],
                e[i++] = r & this.DM,
                r >>= this.DB
        }
        if (t.t < this.t) {
            for (r -= t.s; i < this.t;) {
                r += this[i],
                    e[i++] = r & this.DM,
                    r >>= this.DB
            }
            r += this.s
        } else {
            for (r += this.s; i < t.t;) {
                r -= t[i],
                    e[i++] = r & this.DM,
                    r >>= this.DB
            }
            r -= t.s
        }
        e.s = 0 > r ? -1 : 0,
            -1 > r ? e[i++] = this.DV + r : r > 0 && (e[i++] = r),
            e.t = i,
            e.clamp()
    }

    function w(t, i) {
        var r = this.abs(),
            s = t.abs(),
            n = r.t
        for (i.t = n + s.t; --n >= 0;) {
            i[n] = 0
        }
        for (n = 0; n < s.t; ++n) {
            i[n + r.t] = r.am(0, s[n], i, n, 0, r.t)
        }
        i.s = 0,
            i.clamp(),
        this.s != t.s && e.ZERO.subTo(i, i)
    }

    function x(t) {
        for (var e = this.abs(), i = t.t = 2 * e.t; --i >= 0;) {
            t[i] = 0
        }
        for (i = 0; i < e.t - 1; ++i) {
            var r = e.am(i, e[i], t, 2 * i, 0, 1);
            (t[i + e.t] += e.am(i + 1, 2 * e[i], t, 2 * i + 1, r, e.t - i - 1)) >= e.DV && (t[i + e.t] -= e.DV, t[i + e.t + 1] = 1)
        }
        t.t > 0 && (t[t.t - 1] += e.am(i, e[i], t, 2 * i, 0, 1)),
            t.s = 0,
            t.clamp()
    }

    function B(t, r, s) {
        var n = t.abs()
        if (!(n.t <= 0)) {
            var o = this.abs()
            if (o.t < n.t) {
                return null != r && r.fromInt(0),
                    void (null != s && this.copyTo(s))
            }
            null == s && (s = i())
            var h = i(),
                a = this.s,
                u = t.s,
                c = this.DB - y(n[n.t - 1])
            c > 0 ? (n.lShiftTo(c, h), o.lShiftTo(c, s)) : (n.copyTo(h), o.copyTo(s))
            var f = h.t,
                p = h[f - 1]
            if (0 != p) {
                var l = p * (1 << this.F1) + (f > 1 ? h[f - 2] >> this.F2 : 0),
                    d = this.FV / l,
                    g = (1 << this.F1) / l,
                    m = 1 << this.F2,
                    v = s.t,
                    b = v - f,
                    T = null == r ? i() : r
                for (h.dlShiftTo(b, T), s.compareTo(T) >= 0 && (s[s.t++] = 1, s.subTo(T, s)), e.ONE.dlShiftTo(f, T), T.subTo(h, h); h.t < f;) {
                    h[h.t++] = 0
                }
                for (; --b >= 0;) {
                    var S = s[--v] == p ? this.DM : Math.floor(s[v] * d + (s[v - 1] + m) * g)
                    if ((s[v] += h.am(0, S, s, b, 0, f)) < S) {
                        for (h.dlShiftTo(b, T), s.subTo(T, s); s[v] < --S;) {
                            s.subTo(T, s)
                        }
                    }
                }
                null != r && (s.drShiftTo(f, r), a != u && e.ZERO.subTo(r, r)),
                    s.t = f,
                    s.clamp(),
                c > 0 && s.rShiftTo(c, s),
                0 > a && e.ZERO.subTo(s, s)
            }
        }
    }

    function K(t) {
        var r = i()
        return this.abs().divRemTo(t, null, r),
        this.s < 0 && r.compareTo(e.ZERO) > 0 && t.subTo(r, r),
            r
    }

    function A(t) {
        this.m = t
    }

    function U(t) {
        return t.s < 0 || t.compareTo(this.m) >= 0 ? t.mod(this.m) : t
    }

    function O(t) {
        return t
    }

    function V(t) {
        t.divRemTo(this.m, null, t)
    }

    function N(t, e, i) {
        t.multiplyTo(e, i),
            this.reduce(i)
    }

    function J(t, e) {
        t.squareTo(e),
            this.reduce(e)
    }

    function I() {
        if (this.t < 1) {
            return 0
        }
        var t = this[0]
        if (0 == (1 & t)) {
            return 0
        }
        var e = 3 & t
        return e = e * (2 - (15 & t) * e) & 15,
            e = e * (2 - (255 & t) * e) & 255,
            e = e * (2 - ((65535 & t) * e & 65535)) & 65535,
            e = e * (2 - t * e % this.DV) % this.DV,
            e > 0 ? this.DV - e : -e
    }

    function P(t) {
        this.m = t,
            this.mp = t.invDigit(),
            this.mpl = 32767 & this.mp,
            this.mph = this.mp >> 15,
            this.um = (1 << t.DB - 15) - 1,
            this.mt2 = 2 * t.t
    }

    function M(t) {
        var r = i()
        return t.abs().dlShiftTo(this.m.t, r),
            r.divRemTo(this.m, null, r),
        t.s < 0 && r.compareTo(e.ZERO) > 0 && this.m.subTo(r, r),
            r
    }

    function L(t) {
        var e = i()
        return t.copyTo(e),
            this.reduce(e),
            e
    }

    function q(t) {
        for (; t.t <= this.mt2;) {
            t[t.t++] = 0
        }
        for (var e = 0; e < this.m.t; ++e) {
            var i = 32767 & t[e],
                r = i * this.mpl + ((i * this.mph + (t[e] >> 15) * this.mpl & this.um) << 15) & t.DM
            for (i = e + this.m.t, t[i] += this.m.am(0, r, t, e, 0, this.m.t); t[i] >= t.DV;) {
                t[i] -= t.DV,
                    t[++i]++
            }
        }
        t.clamp(),
            t.drShiftTo(this.m.t, t),
        t.compareTo(this.m) >= 0 && t.subTo(this.m, t)
    }

    function C(t, e) {
        t.squareTo(e),
            this.reduce(e)
    }

    function H(t, e, i) {
        t.multiplyTo(e, i),
            this.reduce(i)
    }

    function j() {
        return 0 == (this.t > 0 ? 1 & this[0] : this.s)
    }

    function k(t, r) {
        if (t > 4294967295 || 1 > t) {
            return e.ONE
        }
        var s = i(),
            n = i(),
            o = r.convert(this),
            h = y(t) - 1
        for (o.copyTo(s); --h >= 0;) {
            if (r.sqrTo(s, n), (t & 1 << h) > 0) {
                r.mulTo(n, o, s)
            } else {
                var a = s
                s = n,
                    n = a
            }
        }
        return r.revert(s)
    }

    function F(t, e) {
        var i
        return i = 256 > t || e.isEven() ? new A(e) : new P(e),
            this.exp(t, i)
    }

    function _() {
        var t = i()
        return this.copyTo(t),
            t
    }

    function z() {
        if (this.s < 0) {
            if (1 == this.t) {
                return this[0] - this.DV
            }
            if (0 == this.t) {
                return -1
            }
        } else {
            if (1 == this.t) {
                return this[0]
            }
            if (0 == this.t) {
                return 0
            }
        }
        return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0]
    }

    function Z() {
        return 0 == this.t ? this.s : this[0] << 24 >> 24
    }

    function G() {
        return 0 == this.t ? this.s : this[0] << 16 >> 16
    }

    function $(t) {
        return Math.floor(Math.LN2 * this.DB / Math.log(t))
    }

    function Y() {
        return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1
    }

    function W(t) {
        if (null == t && (t = 10), 0 == this.signum() || 2 > t || t > 36) {
            return '0'
        }
        var e = this.chunkSize(t),
            r = Math.pow(t, e),
            s = c(r),
            n = i(),
            o = i(),
            h = ''
        for (this.divRemTo(s, n, o); n.signum() > 0;) {
            h = (r + o.intValue()).toString(t).substr(1) + h,
                n.divRemTo(s, n, o)
        }
        return o.intValue().toString(t) + h
    }

    function Q(t, i) {
        this.fromInt(0),
        null == i && (i = 10)
        for (var r = this.chunkSize(i), s = Math.pow(i, r), n = !1, o = 0, a = 0, u = 0; u < t.length; ++u) {
            var c = h(t, u)
            0 > c ? '-' == t.charAt(u) && 0 == this.signum() && (n = !0) : (a = i * a + c, ++o >= r && (this.dMultiply(s), this.dAddOffset(a, 0), o = 0, a = 0))
        }
        o > 0 && (this.dMultiply(Math.pow(i, o)), this.dAddOffset(a, 0)),
        n && e.ZERO.subTo(this, this)
    }

    function X(t, i, r) {
        if ('number' == typeof i) {
            if (2 > t) {
                this.fromInt(1)
            } else {
                for (this.fromNumber(t, r), this.testBit(t - 1) || this.bitwiseTo(e.ONE.shiftLeft(t - 1), ht, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(i);) {
                    this.dAddOffset(2, 0),
                    this.bitLength() > t && this.subTo(e.ONE.shiftLeft(t - 1), this)
                }
            }
        } else {
            var s = new Array,
                n = 7 & t
            s.length = (t >> 3) + 1,
                i.nextBytes(s),
                n > 0 ? s[0] &= (1 << n) - 1 : s[0] = 0,
                this.fromString(s, 256)
        }
    }

    function tt() {
        var t = this.t,
            e = new Array
        e[0] = this.s
        var i,
            r = this.DB - t * this.DB % 8,
            s = 0
        if (t-- > 0) {
            for (r < this.DB && (i = this[t] >> r) != (this.s & this.DM) >> r && (e[s++] = i | this.s << this.DB - r); t >= 0;) {
                8 > r ? (i = (this[t] & (1 << r) - 1) << 8 - r, i |= this[--t] >> (r += this.DB - 8)) : (i = this[t] >> (r -= 8) & 255, 0 >= r && (r += this.DB, --t)),
                0 != (128 & i) && (i |= -256),
                0 == s && (128 & this.s) != (128 & i) && ++s,
                (s > 0 || i != this.s) && (e[s++] = i)
            }
        }
        return e
    }

    function et(t) {
        return 0 == this.compareTo(t)
    }

    function it(t) {
        return this.compareTo(t) < 0 ? this : t
    }

    function rt(t) {
        return this.compareTo(t) > 0 ? this : t
    }

    function st(t, e, i) {
        var r,
            s,
            n = Math.min(t.t, this.t)
        for (r = 0; n > r; ++r) {
            i[r] = e(this[r], t[r])
        }
        if (t.t < this.t) {
            for (s = t.s & this.DM, r = n; r < this.t; ++r) {
                i[r] = e(this[r], s)
            }
            i.t = this.t
        } else {
            for (s = this.s & this.DM, r = n; r < t.t; ++r) {
                i[r] = e(s, t[r])
            }
            i.t = t.t
        }
        i.s = e(this.s, t.s),
            i.clamp()
    }

    function nt(t, e) {
        return t & e
    }

    function ot(t) {
        var e = i()
        return this.bitwiseTo(t, nt, e),
            e
    }

    function ht(t, e) {
        return t | e
    }

    function at(t) {
        var e = i()
        return this.bitwiseTo(t, ht, e),
            e
    }

    function ut(t, e) {
        return t ^ e
    }

    function ct(t) {
        var e = i()
        return this.bitwiseTo(t, ut, e),
            e
    }

    function ft(t, e) {
        return t & ~e
    }

    function pt(t) {
        var e = i()
        return this.bitwiseTo(t, ft, e),
            e
    }

    function lt() {
        for (var t = i(), e = 0; e < this.t; ++e) {
            t[e] = this.DM & ~this[e]
        }
        return t.t = this.t,
            t.s = ~this.s,
            t
    }

    function dt(t) {
        var e = i()
        return 0 > t ? this.rShiftTo(-t, e) : this.lShiftTo(t, e),
            e
    }

    function gt(t) {
        var e = i()
        return 0 > t ? this.lShiftTo(-t, e) : this.rShiftTo(t, e),
            e
    }

    function mt(t) {
        if (0 == t) {
            return -1
        }
        var e = 0
        return 0 == (65535 & t) && (t >>= 16, e += 16),
        0 == (255 & t) && (t >>= 8, e += 8),
        0 == (15 & t) && (t >>= 4, e += 4),
        0 == (3 & t) && (t >>= 2, e += 2),
        0 == (1 & t) && ++e,
            e
    }

    function yt() {
        for (var t = 0; t < this.t; ++t) {
            if (0 != this[t]) {
                return t * this.DB + mt(this[t])
            }
        }
        return this.s < 0 ? this.t * this.DB : -1
    }

    function vt(t) {
        for (var e = 0; 0 != t;) {
            t &= t - 1,
                ++e
        }
        return e
    }

    function bt() {
        for (var t = 0, e = this.s & this.DM, i = 0; i < this.t; ++i) {
            t += vt(this[i] ^ e)
        }
        return t
    }

    function Tt(t) {
        var e = Math.floor(t / this.DB)
        return e >= this.t ? 0 != this.s : 0 != (this[e] & 1 << t % this.DB)
    }

    function St(t, i) {
        var r = e.ONE.shiftLeft(t)
        return this.bitwiseTo(r, i, r),
            r
    }

    function Rt(t) {
        return this.changeBit(t, ht)
    }

    function Et(t) {
        return this.changeBit(t, ft)
    }

    function Dt(t) {
        return this.changeBit(t, ut)
    }

    function wt(t, e) {
        for (var i = 0, r = 0, s = Math.min(t.t, this.t); s > i;) {
            r += this[i] + t[i],
                e[i++] = r & this.DM,
                r >>= this.DB
        }
        if (t.t < this.t) {
            for (r += t.s; i < this.t;) {
                r += this[i],
                    e[i++] = r & this.DM,
                    r >>= this.DB
            }
            r += this.s
        } else {
            for (r += this.s; i < t.t;) {
                r += t[i],
                    e[i++] = r & this.DM,
                    r >>= this.DB
            }
            r += t.s
        }
        e.s = 0 > r ? -1 : 0,
            r > 0 ? e[i++] = r : -1 > r && (e[i++] = this.DV + r),
            e.t = i,
            e.clamp()
    }

    function xt(t) {
        var e = i()
        return this.addTo(t, e),
            e
    }

    function Bt(t) {
        var e = i()
        return this.subTo(t, e),
            e
    }

    function Kt(t) {
        var e = i()
        return this.multiplyTo(t, e),
            e
    }

    function At() {
        var t = i()
        return this.squareTo(t),
            t
    }

    function Ut(t) {
        var e = i()
        return this.divRemTo(t, e, null),
            e
    }

    function Ot(t) {
        var e = i()
        return this.divRemTo(t, null, e),
            e
    }

    function Vt(t) {
        var e = i(),
            r = i()
        return this.divRemTo(t, e, r),
            new Array(e, r)
    }

    function Nt(t) {
        this[this.t] = this.am(0, t - 1, this, 0, 0, this.t),
            ++this.t,
            this.clamp()
    }

    function Jt(t, e) {
        if (0 != t) {
            for (; this.t <= e;) {
                this[this.t++] = 0
            }
            for (this[e] += t; this[e] >= this.DV;) {
                this[e] -= this.DV,
                ++e >= this.t && (this[this.t++] = 0),
                    ++this[e]
            }
        }
    }

    function It() {
    }

    function Pt(t) {
        return t
    }

    function Mt(t, e, i) {
        t.multiplyTo(e, i)
    }

    function Lt(t, e) {
        t.squareTo(e)
    }

    function qt(t) {
        return this.exp(t, new It)
    }

    function Ct(t, e, i) {
        var r = Math.min(this.t + t.t, e)
        for (i.s = 0, i.t = r; r > 0;) {
            i[--r] = 0
        }
        var s
        for (s = i.t - this.t; s > r; ++r) {
            i[r + this.t] = this.am(0, t[r], i, r, 0, this.t)
        }
        for (s = Math.min(t.t, e); s > r; ++r) {
            this.am(0, t[r], i, r, 0, e - r)
        }
        i.clamp()
    }

    function Ht(t, e, i) {
        --e
        var r = i.t = this.t + t.t - e
        for (i.s = 0; --r >= 0;) {
            i[r] = 0
        }
        for (r = Math.max(e - this.t, 0); r < t.t; ++r) {
            i[this.t + r - e] = this.am(e - r, t[r], i, 0, 0, this.t + r - e)
        }
        i.clamp(),
            i.drShiftTo(1, i)
    }

    function jt(t) {
        this.r2 = i(),
            this.q3 = i(),
            e.ONE.dlShiftTo(2 * t.t, this.r2),
            this.mu = this.r2.divide(t),
            this.m = t
    }

    function kt(t) {
        if (t.s < 0 || t.t > 2 * this.m.t) {
            return t.mod(this.m)
        }
        if (t.compareTo(this.m) < 0) {
            return t
        }
        var e = i()
        return t.copyTo(e),
            this.reduce(e),
            e
    }

    function Ft(t) {
        return t
    }

    function _t(t) {
        for (t.drShiftTo(this.m.t - 1, this.r2), t.t > this.m.t + 1 && (t.t = this.m.t + 1, t.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); t.compareTo(this.r2) < 0;) {
            t.dAddOffset(1, this.m.t + 1)
        }
        for (t.subTo(this.r2, t); t.compareTo(this.m) >= 0;) {
            t.subTo(this.m, t)
        }
    }

    function zt(t, e) {
        t.squareTo(e),
            this.reduce(e)
    }

    function Zt(t, e, i) {
        t.multiplyTo(e, i),
            this.reduce(i)
    }

    function Gt(t, e) {
        var r,
            s,
            n = t.bitLength(),
            o = c(1)
        if (0 >= n) {
            return o
        }
        r = 18 > n ? 1 : 48 > n ? 3 : 144 > n ? 4 : 768 > n ? 5 : 6,
            s = 8 > n ? new A(e) : e.isEven() ? new jt(e) : new P(e)
        var h = new Array,
            a = 3,
            u = r - 1,
            f = (1 << r) - 1
        if (h[1] = s.convert(this), r > 1) {
            var p = i()
            for (s.sqrTo(h[1], p); f >= a;) {
                h[a] = i(),
                    s.mulTo(p, h[a - 2], h[a]),
                    a += 2
            }
        }
        var l,
            d,
            g = t.t - 1,
            m = !0,
            v = i()
        for (n = y(t[g]) - 1; g >= 0;) {
            for (n >= u ? l = t[g] >> n - u & f : (l = (t[g] & (1 << n + 1) - 1) << u - n, g > 0 && (l |= t[g - 1] >> this.DB + n - u)), a = r; 0 == (1 & l);) {
                l >>= 1,
                    --a
            }
            if ((n -= a) < 0 && (n += this.DB, --g), m) {
                h[l].copyTo(o),
                    m = !1
            } else {
                for (; a > 1;) {
                    s.sqrTo(o, v),
                        s.sqrTo(v, o),
                        a -= 2
                }
                a > 0 ? s.sqrTo(o, v) : (d = o, o = v, v = d),
                    s.mulTo(v, h[l], o)
            }
            for (; g >= 0 && 0 == (t[g] & 1 << n);) {
                s.sqrTo(o, v),
                    d = o,
                    o = v,
                    v = d,
                --n < 0 && (n = this.DB - 1, --g)
            }
        }
        return s.revert(o)
    }

    function $t(t) {
        var e = this.s < 0 ? this.negate() : this.clone(),
            i = t.s < 0 ? t.negate() : t.clone()
        if (e.compareTo(i) < 0) {
            var r = e
            e = i,
                i = r
        }
        var s = e.getLowestSetBit(),
            n = i.getLowestSetBit()
        if (0 > n) {
            return e
        }
        for (n > s && (n = s), n > 0 && (e.rShiftTo(n, e), i.rShiftTo(n, i)); e.signum() > 0;) {
            (s = e.getLowestSetBit()) > 0 && e.rShiftTo(s, e),
            (s = i.getLowestSetBit()) > 0 && i.rShiftTo(s, i),
                e.compareTo(i) >= 0 ? (e.subTo(i, e), e.rShiftTo(1, e)) : (i.subTo(e, i), i.rShiftTo(1, i))
        }
        return n > 0 && i.lShiftTo(n, i),
            i
    }

    function Yt(t) {
        if (0 >= t) {
            return 0
        }
        var e = this.DV % t,
            i = this.s < 0 ? t - 1 : 0
        if (this.t > 0) {
            if (0 == e) {
                i = this[0] % t
            } else {
                for (var r = this.t - 1; r >= 0; --r) {
                    i = (e * i + this[r]) % t
                }
            }
        }
        return i
    }

    function Wt(t) {
        var i = t.isEven()
        if (this.isEven() && i || 0 == t.signum()) {
            return e.ZERO
        }
        for (var r = t.clone(), s = this.clone(), n = c(1), o = c(0), h = c(0), a = c(1); 0 != r.signum();) {
            for (; r.isEven();) {
                r.rShiftTo(1, r),
                    i ? (n.isEven() && o.isEven() || (n.addTo(this, n), o.subTo(t, o)), n.rShiftTo(1, n)) : o.isEven() || o.subTo(t, o),
                    o.rShiftTo(1, o)
            }
            for (; s.isEven();) {
                s.rShiftTo(1, s),
                    i ? (h.isEven() && a.isEven() || (h.addTo(this, h), a.subTo(t, a)), h.rShiftTo(1, h)) : a.isEven() || a.subTo(t, a),
                    a.rShiftTo(1, a)
            }
            r.compareTo(s) >= 0 ? (r.subTo(s, r), i && n.subTo(h, n), o.subTo(a, o)) : (s.subTo(r, s), i && h.subTo(n, h), a.subTo(o, a))
        }
        return 0 != s.compareTo(e.ONE) ? e.ZERO : a.compareTo(t) >= 0 ? a.subtract(t) : a.signum() < 0 ? (a.addTo(t, a), a.signum() < 0 ? a.add(t) : a) : a
    }

    function Qt(t) {
        var e,
            i = this.abs()
        if (1 == i.t && i[0] <= Ae[Ae.length - 1]) {
            for (e = 0; e < Ae.length; ++e) {
                if (i[0] == Ae[e]) {
                    return !0
                }
            }
            return !1
        }
        if (i.isEven()) {
            return !1
        }
        for (e = 1; e < Ae.length;) {
            for (var r = Ae[e], s = e + 1; s < Ae.length && Ue > r;) {
                r *= Ae[s++]
            }
            for (r = i.modInt(r); s > e;) {
                if (r % Ae[e++] == 0) {
                    return !1
                }
            }
        }
        return i.millerRabin(t)
    }

    function Xt(t) {
        var r = this.subtract(e.ONE),
            s = r.getLowestSetBit()
        if (0 >= s) {
            return !1
        }
        var n = r.shiftRight(s)
        t = t + 1 >> 1,
        t > Ae.length && (t = Ae.length)
        for (var o = i(), h = 0; t > h; ++h) {
            o.fromInt(Ae[Math.floor(Math.random() * Ae.length)])
            var a = o.modPow(n, this)
            if (0 != a.compareTo(e.ONE) && 0 != a.compareTo(r)) {
                for (var u = 1; u++ < s && 0 != a.compareTo(r);) {
                    if (a = a.modPowInt(2, this), 0 == a.compareTo(e.ONE)) {
                        return !1
                    }
                }
                if (0 != a.compareTo(r)) {
                    return !1
                }
            }
        }
        return !0
    }

    function te() {
        this.i = 0,
            this.j = 0,
            this.S = new Array
    }

    function ee(t) {
        var e,
            i,
            r
        for (e = 0; 256 > e; ++e) {
            this.S[e] = e
        }
        for (i = 0, e = 0; 256 > e; ++e) {
            i = i + this.S[e] + t[e % t.length] & 255,
                r = this.S[e],
                this.S[e] = this.S[i],
                this.S[i] = r
        }
        this.i = 0,
            this.j = 0
    }

    function ie() {
        var t
        return this.i = this.i + 1 & 255,
            this.j = this.j + this.S[this.i] & 255,
            t = this.S[this.i],
            this.S[this.i] = this.S[this.j],
            this.S[this.j] = t,
            this.S[t + this.S[this.i] & 255]
    }

    function re() {
        return new te
    }

    function se() {
        if (null == Oe) {
            for (Oe = re(); Je > Ne;) {
                var t = Math.floor(65536 * Math.random())
                Ve[Ne++] = 255 & t
            }
            for (Oe.init(Ve), Ne = 0; Ne < Ve.length; ++Ne) {
                Ve[Ne] = 0
            }
            Ne = 0
        }
        return Oe.next()
    }

    function ne(t) {
        var e
        for (e = 0; e < t.length; ++e) {
            t[e] = se()
        }
    }

    function oe() {
    }

    function he(t, i) {
        return new e(t, i)
    }

    function ae(t, i) {
        if (i < t.length + 11) {
            return console.error('Message too long for RSA'),
                null
        }
        for (var r = new Array, s = t.length - 1; s >= 0 && i > 0;) {
            var n = t.charCodeAt(s--)
            128 > n ? r[--i] = n : n > 127 && 2048 > n ? (r[--i] = 63 & n | 128, r[--i] = n >> 6 | 192) : (r[--i] = 63 & n | 128, r[--i] = n >> 6 & 63 | 128, r[--i] = n >> 12 | 224)
        }
        r[--i] = 0
        for (var o = new oe, h = new Array; i > 2;) {
            for (h[0] = 0; 0 == h[0];) {
                o.nextBytes(h)
            }
            r[--i] = h[0]
        }
        return r[--i] = 2,
            r[--i] = 0,
            new e(r)
    }

    function ue() {
        this.n = null,
            this.e = 0,
            this.d = null,
            this.p = null,
            this.q = null,
            this.dmp1 = null,
            this.dmq1 = null,
            this.coeff = null
    }

    function ce(t, e) {
        null != t && null != e && t.length > 0 && e.length > 0 ? (this.n = he(t, 16), this.e = parseInt(e, 16)) : console.error('Invalid RSA public key')
    }

    function fe(t) {
        return t.modPowInt(this.e, this.n)
    }

    function pe(t) {
        var e = ae(t, this.n.bitLength() + 7 >> 3)
        if (null == e) {
            return null
        }
        var i = this.doPublic(e)
        if (null == i) {
            return null
        }
        var r = i.toString(16)
        return 0 == (1 & r.length) ? r : '0' + r
    }

    function le(t, e) {
        for (var i = t.toByteArray(), r = 0; r < i.length && 0 == i[r];) {
            ++r
        }
        if (i.length - r != e - 1 || 2 != i[r]) {
            return null
        }
        for (++r; 0 != i[r];) {
            if (++r >= i.length) {
                return null
            }
        }
        for (var s = ''; ++r < i.length;) {
            var n = 255 & i[r]
            128 > n ? s += String.fromCharCode(n) : n > 191 && 224 > n ? (s += String.fromCharCode((31 & n) << 6 | 63 & i[r + 1]), ++r) : (s += String.fromCharCode((15 & n) << 12 | (63 & i[r + 1]) << 6 | 63 & i[r + 2]), r += 2)
        }
        return s
    }

    function de(t, e, i) {
        null != t && null != e && t.length > 0 && e.length > 0 ? (this.n = he(t, 16), this.e = parseInt(e, 16), this.d = he(i, 16)) : console.error('Invalid RSA private key')
    }

    function ge(t, e, i, r, s, n, o, h) {
        null != t && null != e && t.length > 0 && e.length > 0 ? (this.n = he(t, 16), this.e = parseInt(e, 16), this.d = he(i, 16), this.p = he(r, 16), this.q = he(s, 16), this.dmp1 = he(n, 16), this.dmq1 = he(o, 16), this.coeff = he(h, 16)) : console.error('Invalid RSA private key')
    }

    function me(t, i) {
        var r = new oe,
            s = t >> 1
        this.e = parseInt(i, 16)
        for (var n = new e(i, 16); ;) {
            for (; this.p = new e(t - s, 1, r), 0 != this.p.subtract(e.ONE).gcd(n).compareTo(e.ONE) || !this.p.isProbablePrime(10);) {
            }
            for (; this.q = new e(s, 1, r), 0 != this.q.subtract(e.ONE).gcd(n).compareTo(e.ONE) || !this.q.isProbablePrime(10);) {
            }
            if (this.p.compareTo(this.q) <= 0) {
                var o = this.p
                this.p = this.q,
                    this.q = o
            }
            var h = this.p.subtract(e.ONE),
                a = this.q.subtract(e.ONE),
                u = h.multiply(a)
            if (0 == u.gcd(n).compareTo(e.ONE)) {
                this.n = this.p.multiply(this.q),
                    this.d = n.modInverse(u),
                    this.dmp1 = this.d.mod(h),
                    this.dmq1 = this.d.mod(a),
                    this.coeff = this.q.modInverse(this.p)
                break
            }
        }
    }

    function ye(t) {
        if (null == this.p || null == this.q) {
            return t.modPow(this.d, this.n)
        }
        for (var e = t.mod(this.p).modPow(this.dmp1, this.p), i = t.mod(this.q).modPow(this.dmq1, this.q); e.compareTo(i) < 0;) {
            e = e.add(this.p)
        }
        return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)
    }

    function ve(t) {
        var e = he(t, 16),
            i = this.doPrivate(e)
        return null == i ? null : le(i, this.n.bitLength() + 7 >> 3)
    }

    function be(t) {
        var e,
            i,
            r = ''
        for (e = 0; e + 3 <= t.length; e += 3) {
            i = parseInt(t.substring(e, e + 3), 16),
                r += Le.charAt(i >> 6) + Le.charAt(63 & i)
        }
        for (e + 1 == t.length ? (i = parseInt(t.substring(e, e + 1), 16), r += Le.charAt(i << 2)) : e + 2 == t.length && (i = parseInt(t.substring(e, e + 2), 16), r += Le.charAt(i >> 2) + Le.charAt((3 & i) << 4)); (3 & r.length) > 0;) {
            r += qe
        }
        return r
    }

    function Te(t) {
        var e,
            i,
            r = '',
            s = 0
        for (e = 0; e < t.length && t.charAt(e) != qe; ++e) {
            v = Le.indexOf(t.charAt(e)),
            v < 0 || (0 == s ? (r += o(v >> 2), i = 3 & v, s = 1) : 1 == s ? (r += o(i << 2 | v >> 4), i = 15 & v, s = 2) : 2 == s ? (r += o(i), r += o(v >> 2), i = 3 & v, s = 3) : (r += o(i << 2 | v >> 4), r += o(15 & v), s = 0))
        }
        return 1 == s && (r += o(i << 2)),
            r
    }

    var Se,
        Re = 244837814094590,
        Ee = 15715070 == (16777215 & Re)
    Ee && 'Microsoft Internet Explorer' == navigator.appName ? (e.prototype.am = s, Se = 30) : Ee && 'Netscape' != navigator.appName ? (e.prototype.am = r, Se = 26) : (e.prototype.am = n, Se = 28),
        e.prototype.DB = Se,
        e.prototype.DM = (1 << Se) - 1,
        e.prototype.DV = 1 << Se
    var De = 52
    e.prototype.FV = Math.pow(2, De),
        e.prototype.F1 = De - Se,
        e.prototype.F2 = 2 * Se - De
    var we,
        xe,
        Be = '0123456789abcdefghijklmnopqrstuvwxyz',
        Ke = new Array
    for (we = '0'.charCodeAt(0), xe = 0; 9 >= xe; ++xe) {
        Ke[we++] = xe
    }
    for (we = 'a'.charCodeAt(0), xe = 10; 36 > xe; ++xe) {
        Ke[we++] = xe
    }
    for (we = 'A'.charCodeAt(0), xe = 10; 36 > xe; ++xe) {
        Ke[we++] = xe
    }
    A.prototype.convert = U,
        A.prototype.revert = O,
        A.prototype.reduce = V,
        A.prototype.mulTo = N,
        A.prototype.sqrTo = J,
        P.prototype.convert = M,
        P.prototype.revert = L,
        P.prototype.reduce = q,
        P.prototype.mulTo = H,
        P.prototype.sqrTo = C,
        e.prototype.copyTo = a,
        e.prototype.fromInt = u,
        e.prototype.fromString = f,
        e.prototype.clamp = p,
        e.prototype.dlShiftTo = T,
        e.prototype.drShiftTo = S,
        e.prototype.lShiftTo = R,
        e.prototype.rShiftTo = E,
        e.prototype.subTo = D,
        e.prototype.multiplyTo = w,
        e.prototype.squareTo = x,
        e.prototype.divRemTo = B,
        e.prototype.invDigit = I,
        e.prototype.isEven = j,
        e.prototype.exp = k,
        e.prototype.toString = l,
        e.prototype.negate = d,
        e.prototype.abs = g,
        e.prototype.compareTo = m,
        e.prototype.bitLength = b,
        e.prototype.mod = K,
        e.prototype.modPowInt = F,
        e.ZERO = c(0),
        e.ONE = c(1),
        It.prototype.convert = Pt,
        It.prototype.revert = Pt,
        It.prototype.mulTo = Mt,
        It.prototype.sqrTo = Lt,
        jt.prototype.convert = kt,
        jt.prototype.revert = Ft,
        jt.prototype.reduce = _t,
        jt.prototype.mulTo = Zt,
        jt.prototype.sqrTo = zt
    var Ae = [
            2,
            3,
            5,
            7,
            11,
            13,
            17,
            19,
            23,
            29,
            31,
            37,
            41,
            43,
            47,
            53,
            59,
            61,
            67,
            71,
            73,
            79,
            83,
            89,
            97,
            101,
            103,
            107,
            109,
            113,
            127,
            131,
            137,
            139,
            149,
            151,
            157,
            163,
            167,
            173,
            179,
            181,
            191,
            193,
            197,
            199,
            211,
            223,
            227,
            229,
            233,
            239,
            241,
            251,
            257,
            263,
            269,
            271,
            277,
            281,
            283,
            293,
            307,
            311,
            313,
            317,
            331,
            337,
            347,
            349,
            353,
            359,
            367,
            373,
            379,
            383,
            389,
            397,
            401,
            409,
            419,
            421,
            431,
            433,
            439,
            443,
            449,
            457,
            461,
            463,
            467,
            479,
            487,
            491,
            499,
            503,
            509,
            521,
            523,
            541,
            547,
            557,
            563,
            569,
            571,
            577,
            587,
            593,
            599,
            601,
            607,
            613,
            617,
            619,
            631,
            641,
            643,
            647,
            653,
            659,
            661,
            673,
            677,
            683,
            691,
            701,
            709,
            719,
            727,
            733,
            739,
            743,
            751,
            757,
            761,
            769,
            773,
            787,
            797,
            809,
            811,
            821,
            823,
            827,
            829,
            839,
            853,
            857,
            859,
            863,
            877,
            881,
            883,
            887,
            907,
            911,
            919,
            929,
            937,
            941,
            947,
            953,
            967,
            971,
            977,
            983,
            991,
            997
        ],
        Ue = (1 << 26) / Ae[Ae.length - 1]
    e.prototype.chunkSize = $,
        e.prototype.toRadix = W,
        e.prototype.fromRadix = Q,
        e.prototype.fromNumber = X,
        e.prototype.bitwiseTo = st,
        e.prototype.changeBit = St,
        e.prototype.addTo = wt,
        e.prototype.dMultiply = Nt,
        e.prototype.dAddOffset = Jt,
        e.prototype.multiplyLowerTo = Ct,
        e.prototype.multiplyUpperTo = Ht,
        e.prototype.modInt = Yt,
        e.prototype.millerRabin = Xt,
        e.prototype.clone = _,
        e.prototype.intValue = z,
        e.prototype.byteValue = Z,
        e.prototype.shortValue = G,
        e.prototype.signum = Y,
        e.prototype.toByteArray = tt,
        e.prototype.equals = et,
        e.prototype.min = it,
        e.prototype.max = rt,
        e.prototype.and = ot,
        e.prototype.or = at,
        e.prototype.xor = ct,
        e.prototype.andNot = pt,
        e.prototype.not = lt,
        e.prototype.shiftLeft = dt,
        e.prototype.shiftRight = gt,
        e.prototype.getLowestSetBit = yt,
        e.prototype.bitCount = bt,
        e.prototype.testBit = Tt,
        e.prototype.setBit = Rt,
        e.prototype.clearBit = Et,
        e.prototype.flipBit = Dt,
        e.prototype.add = xt,
        e.prototype.subtract = Bt,
        e.prototype.multiply = Kt,
        e.prototype.divide = Ut,
        e.prototype.remainder = Ot,
        e.prototype.divideAndRemainder = Vt,
        e.prototype.modPow = Gt,
        e.prototype.modInverse = Wt,
        e.prototype.pow = qt,
        e.prototype.gcd = $t,
        e.prototype.isProbablePrime = Qt,
        e.prototype.square = At,
        te.prototype.init = ee,
        te.prototype.next = ie
    var Oe,
        Ve,
        Ne,
        Je = 256
    if (null == Ve) {
        Ve = new Array,
            Ne = 0
        var Ie
        if (window.crypto && window.crypto.getRandomValues) {
            var Pe = new Uint32Array(256)
            for (window.crypto.getRandomValues(Pe), Ie = 0; Ie < Pe.length; ++Ie) {
                Ve[Ne++] = 255 & Pe[Ie]
            }
        }
        var Me = function (t) {
            if (this.count = this.count || 0, this.count >= 256 || Ne >= Je) {
                return void (window.removeEventListener ? window.removeEventListener('mousemove', Me, !1) : window.detachEvent && window.detachEvent('onmousemove', Me))
            }
            try {
                var e = t.x + t.y
                Ve[Ne++] = 255 & e,
                    this.count += 1
            } catch (i) {
            }
        }
        window.addEventListener ? window.addEventListener('mousemove', Me, !1) : window.attachEvent && window.attachEvent('onmousemove', Me)
    }
    oe.prototype.nextBytes = ne,
        ue.prototype.doPublic = fe,
        ue.prototype.setPublic = ce,
        ue.prototype.encrypt = pe,
        ue.prototype.doPrivate = ye,
        ue.prototype.setPrivate = de,
        ue.prototype.setPrivateEx = ge,
        ue.prototype.generate = me,
        ue.prototype.decrypt = ve,
        function () {
            var t = function (t, r, s) {
                var n = new oe,
                    o = t >> 1
                this.e = parseInt(r, 16)
                var h = new e(r, 16),
                    a = this,
                    u = function () {
                        var r = function () {
                                if (a.p.compareTo(a.q) <= 0) {
                                    var t = a.p
                                    a.p = a.q,
                                        a.q = t
                                }
                                var i = a.p.subtract(e.ONE),
                                    r = a.q.subtract(e.ONE),
                                    n = i.multiply(r)
                                0 == n.gcd(h).compareTo(e.ONE) ? (a.n = a.p.multiply(a.q), a.d = h.modInverse(n), a.dmp1 = a.d.mod(i), a.dmq1 = a.d.mod(r), a.coeff = a.q.modInverse(a.p), setTimeout(function () {
                                    s()
                                }, 0)) : setTimeout(u, 0)
                            },
                            c = function () {
                                a.q = i(),
                                    a.q.fromNumberAsync(o, 1, n, function () {
                                        a.q.subtract(e.ONE).gcda(h, function (t) {
                                            0 == t.compareTo(e.ONE) && a.q.isProbablePrime(10) ? setTimeout(r, 0) : setTimeout(c, 0)
                                        })
                                    })
                            },
                            f = function () {
                                a.p = i(),
                                    a.p.fromNumberAsync(t - o, 1, n, function () {
                                        a.p.subtract(e.ONE).gcda(h, function (t) {
                                            0 == t.compareTo(e.ONE) && a.p.isProbablePrime(10) ? setTimeout(c, 0) : setTimeout(f, 0)
                                        })
                                    })
                            }
                        setTimeout(f, 0)
                    }
                setTimeout(u, 0)
            }
            ue.prototype.generateAsync = t
            var r = function (t, e) {
                var i = this.s < 0 ? this.negate() : this.clone(),
                    r = t.s < 0 ? t.negate() : t.clone()
                if (i.compareTo(r) < 0) {
                    var s = i
                    i = r,
                        r = s
                }
                var n = i.getLowestSetBit(),
                    o = r.getLowestSetBit()
                if (0 > o) {
                    return void e(i)
                }
                o > n && (o = n),
                o > 0 && (i.rShiftTo(o, i), r.rShiftTo(o, r))
                var h = function () {
                    (n = i.getLowestSetBit()) > 0 && i.rShiftTo(n, i),
                    (n = r.getLowestSetBit()) > 0 && r.rShiftTo(n, r),
                        i.compareTo(r) >= 0 ? (i.subTo(r, i), i.rShiftTo(1, i)) : (r.subTo(i, r), r.rShiftTo(1, r)),
                        i.signum() > 0 ? setTimeout(h, 0) : (o > 0 && r.lShiftTo(o, r), setTimeout(function () {
                            e(r)
                        }, 0))
                }
                setTimeout(h, 10)
            }
            e.prototype.gcda = r
            var s = function (t, i, r, s) {
                if ('number' == typeof i) {
                    if (2 > t) {
                        this.fromInt(1)
                    } else {
                        this.fromNumber(t, r),
                        this.testBit(t - 1) || this.bitwiseTo(e.ONE.shiftLeft(t - 1), ht, this),
                        this.isEven() && this.dAddOffset(1, 0)
                        var n = this,
                            o = function () {
                                n.dAddOffset(2, 0),
                                n.bitLength() > t && n.subTo(e.ONE.shiftLeft(t - 1), n),
                                    n.isProbablePrime(i) ? setTimeout(function () {
                                        s()
                                    }, 0) : setTimeout(o, 0)
                            }
                        setTimeout(o, 0)
                    }
                } else {
                    var h = new Array,
                        a = 7 & t
                    h.length = (t >> 3) + 1,
                        i.nextBytes(h),
                        a > 0 ? h[0] &= (1 << a) - 1 : h[0] = 0,
                        this.fromString(h, 256)
                }
            }
            e.prototype.fromNumberAsync = s
        }()
    var Le = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',
        qe = '=',
        Ce = Ce || {}
    Ce.env = Ce.env || {}
    var He = Ce,
        je = Object.prototype,
        ke = '[object Function]',
        Fe = [
            'toString',
            'valueOf'
        ]
    Ce.env.parseUA = function (t) {
        var e,
            i = function (t) {
                var e = 0
                return parseFloat(t.replace(/\./g, function () {
                    return 1 == e++ ? '' : '.'
                }))
            },
            r = navigator,
            s = {
                ie: 0,
                opera: 0,
                gecko: 0,
                webkit: 0,
                chrome: 0,
                mobile: null,
                air: 0,
                ipad: 0,
                iphone: 0,
                ipod: 0,
                ios: null,
                android: 0,
                webos: 0,
                caja: r && r.cajaVersion,
                secure: !1,
                os: null
            },
            n = t || navigator && navigator.userAgent,
            o = window && window.location,
            h = o && o.href
        return s.secure = h && 0 === h.toLowerCase().indexOf('https'),
        n && (/windows|win32/i.test(n) ? s.os = 'windows' : /macintosh/i.test(n) ? s.os = 'macintosh' : /rhino/i.test(n) && (s.os = 'rhino'), /KHTML/.test(n) && (s.webkit = 1), e = n.match(/AppleWebKit\/([^\s]*)/), e && e[1] && (s.webkit = i(e[1]), / Mobile\//.test(n) ? (s.mobile = 'Apple', e = n.match(/OS ([^\s]*)/), e && e[1] && (e = i(e[1].replace('_', '.'))), s.ios = e, s.ipad = s.ipod = s.iphone = 0, e = n.match(/iPad|iPod|iPhone/), e && e[0] && (s[e[0].toLowerCase()] = s.ios)) : (e = n.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/), e && (s.mobile = e[0]), /webOS/.test(n) && (s.mobile = 'WebOS', e = n.match(/webOS\/([^\s]*);/), e && e[1] && (s.webos = i(e[1]))), / Android/.test(n) && (s.mobile = 'Android', e = n.match(/Android ([^\s]*);/), e && e[1] && (s.android = i(e[1])))), e = n.match(/Chrome\/([^\s]*)/), e && e[1] ? s.chrome = i(e[1]) : (e = n.match(/AdobeAIR\/([^\s]*)/), e && (s.air = e[0]))), s.webkit || (e = n.match(/Opera[\s\/]([^\s]*)/), e && e[1] ? (s.opera = i(e[1]), e = n.match(/Version\/([^\s]*)/), e && e[1] && (s.opera = i(e[1])), e = n.match(/Opera Mini[^;]*/), e && (s.mobile = e[0])) : (e = n.match(/MSIE\s([^;]*)/), e && e[1] ? s.ie = i(e[1]) : (e = n.match(/Gecko\/([^\s]*)/), e && (s.gecko = 1, e = n.match(/rv:([^\s\)]*)/), e && e[1] && (s.gecko = i(e[1]))))))),
            s
    },
        Ce.env.ua = Ce.env.parseUA(),
        Ce.isFunction = function (t) {
            return 'function' == typeof t || je.toString.apply(t) === ke
        },
        Ce._IEEnumFix = Ce.env.ua.ie ? function (t, e) {
                var i,
                    r,
                    s
                for (i = 0; i < Fe.length; i += 1) {
                    r = Fe[i],
                        s = e[r],
                    He.isFunction(s) && s != je[r] && (t[r] = s)
                }
            }
            : function () {
            },
        Ce.extend = function (t, e, i) {
            if (!e || !t) {
                throw new Error('extend failed, please check that all dependencies are included.')
            }
            var r,
                s = function () {
                }
            if (s.prototype = e.prototype, t.prototype = new s, t.prototype.constructor = t, t.superclass = e.prototype, e.prototype.constructor == je.constructor && (e.prototype.constructor = e), i) {
                for (r in i) {
                    He.hasOwnProperty(i, r) && (t.prototype[r] = i[r])
                }
                He._IEEnumFix(t.prototype, i)
            }
        },
    'undefined' != typeof KJUR && KJUR || (KJUR = {}),
    'undefined' != typeof KJUR.asn1 && KJUR.asn1 || (KJUR.asn1 = {}),
        KJUR.asn1.ASN1Util = new function () {
            this.integerToByteHex = function (t) {
                var e = t.toString(16)
                return e.length % 2 == 1 && (e = '0' + e),
                    e
            },
                this.bigIntToMinTwosComplementsHex = function (t) {
                    var i = t.toString(16)
                    if ('-' != i.substr(0, 1)) {
                        i.length % 2 == 1 ? i = '0' + i : i.match(/^[0-7]/) || (i = '00' + i)
                    } else {
                        var r = i.substr(1),
                            s = r.length
                        s % 2 == 1 ? s += 1 : i.match(/^[0-7]/) || (s += 2)
                        for (var n = '', o = 0; s > o; o++) {
                            n += 'f'
                        }
                        var h = new e(n, 16),
                            a = h.xor(t).add(e.ONE)
                        i = a.toString(16).replace(/^-/, '')
                    }
                    return i
                },
                this.getPEMStringFromHex = function (t, e) {
                    var i = CryptoJS.enc.Hex.parse(t),
                        r = CryptoJS.enc.Base64.stringify(i),
                        s = r.replace(/(.{64})/g, '$1\r\n')
                    return s = s.replace(/\r\n$/, ''),
                    '-----BEGIN ' + e + '-----\r\n' + s + '\r\n-----END ' + e + '-----\r\n'
                }
        },
        KJUR.asn1.ASN1Object = function () {
            var t = ''
            this.getLengthHexFromValue = function () {
                if ('undefined' == typeof this.hV || null == this.hV) {
                    throw 'this.hV is null or undefined.'
                }
                if (this.hV.length % 2 == 1) {
                    throw 'value hex must be even length: n=' + t.length + ',v=' + this.hV
                }
                var e = this.hV.length / 2,
                    i = e.toString(16)
                if (i.length % 2 == 1 && (i = '0' + i), 128 > e) {
                    return i
                }
                var r = i.length / 2
                if (r > 15) {
                    throw 'ASN.1 length too long to represent by 8x: n = ' + e.toString(16)
                }
                var s = 128 + r
                return s.toString(16) + i
            },
                this.getEncodedHex = function () {
                    return (null == this.hTLV || this.isModified) && (this.hV = this.getFreshValueHex(), this.hL = this.getLengthHexFromValue(), this.hTLV = this.hT + this.hL + this.hV, this.isModified = !1),
                        this.hTLV
                },
                this.getValueHex = function () {
                    return this.getEncodedHex(),
                        this.hV
                },
                this.getFreshValueHex = function () {
                    return ''
                }
        },
        KJUR.asn1.DERAbstractString = function (t) {
            KJUR.asn1.DERAbstractString.superclass.constructor.call(this)
            this.getString = function () {
                return this.s
            },
                this.setString = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.s = t,
                        this.hV = stohex(this.s)
                },
                this.setStringHex = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.s = null,
                        this.hV = t
                },
                this.getFreshValueHex = function () {
                    return this.hV
                },
            'undefined' != typeof t && ('undefined' != typeof t.str ? this.setString(t.str) : 'undefined' != typeof t.hex && this.setStringHex(t.hex))
        },
        Ce.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object),
        KJUR.asn1.DERAbstractTime = function (t) {
            KJUR.asn1.DERAbstractTime.superclass.constructor.call(this)
            this.localDateToUTC = function (t) {
                utc = t.getTime() + 60000 * t.getTimezoneOffset()
                var e = new Date(utc)
                return e
            },
                this.formatDate = function (t, e) {
                    var i = this.zeroPadding,
                        r = this.localDateToUTC(t),
                        s = String(r.getFullYear())
                    'utc' == e && (s = s.substr(2, 2))
                    var n = i(String(r.getMonth() + 1), 2),
                        o = i(String(r.getDate()), 2),
                        h = i(String(r.getHours()), 2),
                        a = i(String(r.getMinutes()), 2),
                        u = i(String(r.getSeconds()), 2)
                    return s + n + o + h + a + u + 'Z'
                },
                this.zeroPadding = function (t, e) {
                    return t.length >= e ? t : new Array(e - t.length + 1).join('0') + t
                },
                this.getString = function () {
                    return this.s
                },
                this.setString = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.s = t,
                        this.hV = stohex(this.s)
                },
                this.setByDateValue = function (t, e, i, r, s, n) {
                    var o = new Date(Date.UTC(t, e - 1, i, r, s, n, 0))
                    this.setByDate(o)
                },
                this.getFreshValueHex = function () {
                    return this.hV
                }
        },
        Ce.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object),
        KJUR.asn1.DERAbstractStructured = function (t) {
            KJUR.asn1.DERAbstractString.superclass.constructor.call(this)
            this.setByASN1ObjectArray = function (t) {
                this.hTLV = null,
                    this.isModified = !0,
                    this.asn1Array = t
            },
                this.appendASN1Object = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.asn1Array.push(t)
                },
                this.asn1Array = new Array,
            'undefined' != typeof t && 'undefined' != typeof t.array && (this.asn1Array = t.array)
        },
        Ce.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object),
        KJUR.asn1.DERBoolean = function () {
            KJUR.asn1.DERBoolean.superclass.constructor.call(this),
                this.hT = '01',
                this.hTLV = '0101ff'
        },
        Ce.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object),
        KJUR.asn1.DERInteger = function (t) {
            KJUR.asn1.DERInteger.superclass.constructor.call(this),
                this.hT = '02',
                this.setByBigInteger = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)
                },
                this.setByInteger = function (t) {
                    var i = new e(String(t), 10)
                    this.setByBigInteger(i)
                },
                this.setValueHex = function (t) {
                    this.hV = t
                },
                this.getFreshValueHex = function () {
                    return this.hV
                },
            'undefined' != typeof t && ('undefined' != typeof t.bigint ? this.setByBigInteger(t.bigint) : 'undefined' != typeof t['int'] ? this.setByInteger(t['int']) : 'undefined' != typeof t.hex && this.setValueHex(t.hex))
        },
        Ce.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object),
        KJUR.asn1.DERBitString = function (t) {
            KJUR.asn1.DERBitString.superclass.constructor.call(this),
                this.hT = '03',
                this.setHexValueIncludingUnusedBits = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.hV = t
                },
                this.setUnusedBitsAndHexValue = function (t, e) {
                    if (0 > t || t > 7) {
                        throw 'unused bits shall be from 0 to 7: u = ' + t
                    }
                    var i = '0' + t
                    this.hTLV = null,
                        this.isModified = !0,
                        this.hV = i + e
                },
                this.setByBinaryString = function (t) {
                    t = t.replace(/0+$/, '')
                    var e = 8 - t.length % 8
                    8 == e && (e = 0)
                    for (var i = 0; e >= i; i++) {
                        t += '0'
                    }
                    for (var r = '', i = 0; i < t.length - 1; i += 8) {
                        var s = t.substr(i, 8),
                            n = parseInt(s, 2).toString(16)
                        1 == n.length && (n = '0' + n),
                            r += n
                    }
                    this.hTLV = null,
                        this.isModified = !0,
                        this.hV = '0' + e + r
                },
                this.setByBooleanArray = function (t) {
                    for (var e = '', i = 0; i < t.length; i++) {
                        e += 1 == t[i] ? '1' : '0'
                    }
                    this.setByBinaryString(e)
                },
                this.newFalseArray = function (t) {
                    for (var e = new Array(t), i = 0; t > i; i++) {
                        e[i] = !1
                    }
                    return e
                },
                this.getFreshValueHex = function () {
                    return this.hV
                },
            'undefined' != typeof t && ('undefined' != typeof t.hex ? this.setHexValueIncludingUnusedBits(t.hex) : 'undefined' != typeof t.bin ? this.setByBinaryString(t.bin) : 'undefined' != typeof t.array && this.setByBooleanArray(t.array))
        },
        Ce.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object),
        KJUR.asn1.DEROctetString = function (t) {
            KJUR.asn1.DEROctetString.superclass.constructor.call(this, t),
                this.hT = '04'
        },
        Ce.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString),
        KJUR.asn1.DERNull = function () {
            KJUR.asn1.DERNull.superclass.constructor.call(this),
                this.hT = '05',
                this.hTLV = '0500'
        },
        Ce.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object),
        KJUR.asn1.DERObjectIdentifier = function (t) {
            var i = function (t) {
                    var e = t.toString(16)
                    return 1 == e.length && (e = '0' + e),
                        e
                },
                r = function (t) {
                    var r = '',
                        s = new e(t, 10),
                        n = s.toString(2),
                        o = 7 - n.length % 7
                    7 == o && (o = 0)
                    for (var h = '', a = 0; o > a; a++) {
                        h += '0'
                    }
                    n = h + n
                    for (var a = 0; a < n.length - 1; a += 7) {
                        var u = n.substr(a, 7)
                        a != n.length - 7 && (u = '1' + u),
                            r += i(parseInt(u, 2))
                    }
                    return r
                }
            KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),
                this.hT = '06',
                this.setValueHex = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.s = null,
                        this.hV = t
                },
                this.setValueOidString = function (t) {
                    if (!t.match(/^[0-9.]+$/)) {
                        throw 'malformed oid string: ' + t
                    }
                    var e = '',
                        s = t.split('.'),
                        n = 40 * parseInt(s[0]) + parseInt(s[1])
                    e += i(n),
                        s.splice(0, 2)
                    for (var o = 0; o < s.length; o++) {
                        e += r(s[o])
                    }
                    this.hTLV = null,
                        this.isModified = !0,
                        this.s = null,
                        this.hV = e
                },
                this.setValueName = function (t) {
                    if ('undefined' == typeof KJUR.asn1.x509.OID.name2oidList[t]) {
                        throw 'DERObjectIdentifier oidName undefined: ' + t
                    }
                    var e = KJUR.asn1.x509.OID.name2oidList[t]
                    this.setValueOidString(e)
                },
                this.getFreshValueHex = function () {
                    return this.hV
                },
            'undefined' != typeof t && ('undefined' != typeof t.oid ? this.setValueOidString(t.oid) : 'undefined' != typeof t.hex ? this.setValueHex(t.hex) : 'undefined' != typeof t.name && this.setValueName(t.name))
        },
        Ce.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object),
        KJUR.asn1.DERUTF8String = function (t) {
            KJUR.asn1.DERUTF8String.superclass.constructor.call(this, t),
                this.hT = '0c'
        },
        Ce.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString),
        KJUR.asn1.DERNumericString = function (t) {
            KJUR.asn1.DERNumericString.superclass.constructor.call(this, t),
                this.hT = '12'
        },
        Ce.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString),
        KJUR.asn1.DERPrintableString = function (t) {
            KJUR.asn1.DERPrintableString.superclass.constructor.call(this, t),
                this.hT = '13'
        },
        Ce.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString),
        KJUR.asn1.DERTeletexString = function (t) {
            KJUR.asn1.DERTeletexString.superclass.constructor.call(this, t),
                this.hT = '14'
        },
        Ce.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString),
        KJUR.asn1.DERIA5String = function (t) {
            KJUR.asn1.DERIA5String.superclass.constructor.call(this, t),
                this.hT = '16'
        },
        Ce.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString),
        KJUR.asn1.DERUTCTime = function (t) {
            KJUR.asn1.DERUTCTime.superclass.constructor.call(this, t),
                this.hT = '17',
                this.setByDate = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.date = t,
                        this.s = this.formatDate(this.date, 'utc'),
                        this.hV = stohex(this.s)
                },
            'undefined' != typeof t && ('undefined' != typeof t.str ? this.setString(t.str) : 'undefined' != typeof t.hex ? this.setStringHex(t.hex) : 'undefined' != typeof t.date && this.setByDate(t.date))
        },
        Ce.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime),
        KJUR.asn1.DERGeneralizedTime = function (t) {
            KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, t),
                this.hT = '18',
                this.setByDate = function (t) {
                    this.hTLV = null,
                        this.isModified = !0,
                        this.date = t,
                        this.s = this.formatDate(this.date, 'gen'),
                        this.hV = stohex(this.s)
                },
            'undefined' != typeof t && ('undefined' != typeof t.str ? this.setString(t.str) : 'undefined' != typeof t.hex ? this.setStringHex(t.hex) : 'undefined' != typeof t.date && this.setByDate(t.date))
        },
        Ce.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime),
        KJUR.asn1.DERSequence = function (t) {
            KJUR.asn1.DERSequence.superclass.constructor.call(this, t),
                this.hT = '30',
                this.getFreshValueHex = function () {
                    for (var t = '', e = 0; e < this.asn1Array.length; e++) {
                        var i = this.asn1Array[e]
                        t += i.getEncodedHex()
                    }
                    return this.hV = t,
                        this.hV
                }
        },
        Ce.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured),
        KJUR.asn1.DERSet = function (t) {
            KJUR.asn1.DERSet.superclass.constructor.call(this, t),
                this.hT = '31',
                this.getFreshValueHex = function () {
                    for (var t = new Array, e = 0; e < this.asn1Array.length; e++) {
                        var i = this.asn1Array[e]
                        t.push(i.getEncodedHex())
                    }
                    return t.sort(),
                        this.hV = t.join(''),
                        this.hV
                }
        },
        Ce.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured),
        KJUR.asn1.DERTaggedObject = function (t) {
            KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),
                this.hT = 'a0',
                this.hV = '',
                this.isExplicit = !0,
                this.asn1Object = null,
                this.setASN1Object = function (t, e, i) {
                    this.hT = e,
                        this.isExplicit = t,
                        this.asn1Object = i,
                        this.isExplicit ? (this.hV = this.asn1Object.getEncodedHex(), this.hTLV = null, this.isModified = !0) : (this.hV = null, this.hTLV = i.getEncodedHex(), this.hTLV = this.hTLV.replace(/^../, e), this.isModified = !1)
                },
                this.getFreshValueHex = function () {
                    return this.hV
                },
            'undefined' != typeof t && ('undefined' != typeof t.tag && (this.hT = t.tag), 'undefined' != typeof t.explicit && (this.isExplicit = t.explicit), 'undefined' != typeof t.obj && (this.asn1Object = t.obj, this.setASN1Object(this.isExplicit, this.hT, this.asn1Object)))
        },
        Ce.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object),
        function (t) {
            var e,
                i = {}
            i.decode = function (i) {
                var r
                if (e === t) {
                    var s = '0123456789ABCDEF',
                        n = ' \f\n\r\t â¨â©'
                    for (e = [], r = 0; 16 > r; ++r) {
                        e[s.charAt(r)] = r
                    }
                    for (s = s.toLowerCase(), r = 10; 16 > r; ++r) {
                        e[s.charAt(r)] = r
                    }
                    for (r = 0; r < n.length; ++r) {
                        e[n.charAt(r)] = -1
                    }
                }
                var o = [],
                    h = 0,
                    a = 0
                for (r = 0; r < i.length; ++r) {
                    var u = i.charAt(r)
                    if ('=' == u) {
                        break
                    }
                    if (u = e[u], -1 != u) {
                        if (u === t) {
                            throw 'Illegal character at offset ' + r
                        }
                        h |= u,
                            ++a >= 2 ? (o[o.length] = h, h = 0, a = 0) : h <<= 4
                    }
                }
                if (a) {
                    throw 'Hex encoding incomplete: 4 bits missing'
                }
                return o
            },
                window.Hex = i
        }(),
        function (t) {
            var e,
                i = {}
            i.decode = function (i) {
                var r
                if (e === t) {
                    var s = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',
                        n = '= \f\n\r\t â¨â©'
                    for (e = [], r = 0; 64 > r; ++r) {
                        e[s.charAt(r)] = r
                    }
                    for (r = 0; r < n.length; ++r) {
                        e[n.charAt(r)] = -1
                    }
                }
                var o = [],
                    h = 0,
                    a = 0
                for (r = 0; r < i.length; ++r) {
                    var u = i.charAt(r)
                    if ('=' == u) {
                        break
                    }
                    if (u = e[u], -1 != u) {
                        if (u === t) {
                            throw 'Illegal character at offset ' + r
                        }
                        h |= u,
                            ++a >= 4 ? (o[o.length] = h >> 16, o[o.length] = h >> 8 & 255, o[o.length] = 255 & h, h = 0, a = 0) : h <<= 6
                    }
                }
                switch (a) {
                    case 1:
                        throw 'Base64 encoding incomplete: at least 2 bits missing'
                    case 2:
                        o[o.length] = h >> 10
                        break
                    case 3:
                        o[o.length] = h >> 16,
                            o[o.length] = h >> 8 & 255
                }
                return o
            },
                i.re = /-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,
                i.unarmor = function (t) {
                    var e = i.re.exec(t)
                    if (e) {
                        if (e[1]) {
                            t = e[1]
                        } else {
                            if (!e[2]) {
                                throw 'RegExp out of sync'
                            }
                            t = e[2]
                        }
                    }
                    return i.decode(t)
                },
                window.Base64 = i
        }(),
        function (t) {
            function e(t, i) {
                t instanceof e ? (this.enc = t.enc, this.pos = t.pos) : (this.enc = t, this.pos = i)
            }

            function i(t, e, i, r, s) {
                this.stream = t,
                    this.header = e,
                    this.length = i,
                    this.tag = r,
                    this.sub = s
            }

            var r = 100,
                s = 'Ã¢â¬Â¦',
                n = {
                    tag: function (t, e) {
                        var i = document.createElement(t)
                        return i.className = e,
                            i
                    },
                    text: function (t) {
                        return document.createTextNode(t)
                    }
                }
            e.prototype.get = function (e) {
                if (e === t && (e = this.pos++), e >= this.enc.length) {
                    throw 'Requesting byte offset ' + e + ' on a stream of length ' + this.enc.length
                }
                return this.enc[e]
            },
                e.prototype.hexDigits = '0123456789ABCDEF',
                e.prototype.hexByte = function (t) {
                    return this.hexDigits.charAt(t >> 4 & 15) + this.hexDigits.charAt(15 & t)
                },
                e.prototype.hexDump = function (t, e, i) {
                    for (var r = '', s = t; e > s; ++s) {
                        if (r += this.hexByte(this.get(s)), i !== !0) {
                            switch (15 & s) {
                                case 7:
                                    r += '  '
                                    break
                                case 15:
                                    r += '\n'
                                    break
                                default:
                                    r += ' '
                            }
                        }
                    }
                    return r
                },
                e.prototype.parseStringISO = function (t, e) {
                    for (var i = '', r = t; e > r; ++r) {
                        i += String.fromCharCode(this.get(r))
                    }
                    return i
                },
                e.prototype.parseStringUTF = function (t, e) {
                    for (var i = '', r = t; e > r;) {
                        var s = this.get(r++)
                        i += 128 > s ? String.fromCharCode(s) : s > 191 && 224 > s ? String.fromCharCode((31 & s) << 6 | 63 & this.get(r++)) : String.fromCharCode((15 & s) << 12 | (63 & this.get(r++)) << 6 | 63 & this.get(r++))
                    }
                    return i
                },
                e.prototype.parseStringBMP = function (t, e) {
                    for (var i = '', r = t; e > r; r += 2) {
                        var s = this.get(r),
                            n = this.get(r + 1)
                        i += String.fromCharCode((s << 8) + n)
                    }
                    return i
                },
                e.prototype.reTime = /^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,
                e.prototype.parseTime = function (t, e) {
                    var i = this.parseStringISO(t, e),
                        r = this.reTime.exec(i)
                    return r ? (i = r[1] + '-' + r[2] + '-' + r[3] + ' ' + r[4], r[5] && (i += ':' + r[5], r[6] && (i += ':' + r[6], r[7] && (i += '.' + r[7]))), r[8] && (i += ' UTC', 'Z' != r[8] && (i += r[8], r[9] && (i += ':' + r[9]))), i) : 'Unrecognized time: ' + i
                },
                e.prototype.parseInteger = function (t, e) {
                    var i = e - t
                    if (i > 4) {
                        i <<= 3
                        var r = this.get(t)
                        if (0 === r) {
                            i -= 8
                        } else {
                            for (; 128 > r;) {
                                r <<= 1,
                                    --i
                            }
                        }
                        return '(' + i + ' bit)'
                    }
                    for (var s = 0, n = t; e > n; ++n) {
                        s = s << 8 | this.get(n)
                    }
                    return s
                },
                e.prototype.parseBitString = function (t, e) {
                    var i = this.get(t),
                        r = (e - t - 1 << 3) - i,
                        s = '(' + r + ' bit)'
                    if (20 >= r) {
                        var n = i
                        s += ' '
                        for (var o = e - 1; o > t; --o) {
                            for (var h = this.get(o), a = n; 8 > a; ++a) {
                                s += h >> a & 1 ? '1' : '0'
                            }
                            n = 0
                        }
                    }
                    return s
                },
                e.prototype.parseOctetString = function (t, e) {
                    var i = e - t,
                        n = '(' + i + ' byte) '
                    i > r && (e = t + r)
                    for (var o = t; e > o; ++o) {
                        n += this.hexByte(this.get(o))
                    }
                    return i > r && (n += s),
                        n
                },
                e.prototype.parseOID = function (t, e) {
                    for (var i = '', r = 0, s = 0, n = t; e > n; ++n) {
                        var o = this.get(n)
                        if (r = r << 7 | 127 & o, s += 7, !(128 & o)) {
                            if ('' === i) {
                                var h = 80 > r ? 40 > r ? 0 : 1 : 2
                                i = h + '.' + (r - 40 * h)
                            } else {
                                i += '.' + (s >= 31 ? 'bigint' : r)
                            }
                            r = s = 0
                        }
                    }
                    return i
                },
                i.prototype.typeName = function () {
                    if (this.tag === t) {
                        return 'unknown'
                    }
                    var e = this.tag >> 6,
                        i = (this.tag >> 5 & 1, 31 & this.tag)
                    switch (e) {
                        case 0:
                            switch (i) {
                                case 0:
                                    return 'EOC'
                                case 1:
                                    return 'BOOLEAN'
                                case 2:
                                    return 'INTEGER'
                                case 3:
                                    return 'BIT_STRING'
                                case 4:
                                    return 'OCTET_STRING'
                                case 5:
                                    return 'NULL'
                                case 6:
                                    return 'OBJECT_IDENTIFIER'
                                case 7:
                                    return 'ObjectDescriptor'
                                case 8:
                                    return 'EXTERNAL'
                                case 9:
                                    return 'REAL'
                                case 10:
                                    return 'ENUMERATED'
                                case 11:
                                    return 'EMBEDDED_PDV'
                                case 12:
                                    return 'UTF8String'
                                case 16:
                                    return 'SEQUENCE'
                                case 17:
                                    return 'SET'
                                case 18:
                                    return 'NumericString'
                                case 19:
                                    return 'PrintableString'
                                case 20:
                                    return 'TeletexString'
                                case 21:
                                    return 'VideotexString'
                                case 22:
                                    return 'IA5String'
                                case 23:
                                    return 'UTCTime'
                                case 24:
                                    return 'GeneralizedTime'
                                case 25:
                                    return 'GraphicString'
                                case 26:
                                    return 'VisibleString'
                                case 27:
                                    return 'GeneralString'
                                case 28:
                                    return 'UniversalString'
                                case 30:
                                    return 'BMPString'
                                default:
                                    return 'Universal_' + i.toString(16)
                            }
                        case 1:
                            return 'Application_' + i.toString(16)
                        case 2:
                            return '[' + i + ']'
                        case 3:
                            return 'Private_' + i.toString(16)
                    }
                },
                i.prototype.reSeemsASCII = /^[ -~]+$/,
                i.prototype.content = function () {
                    if (this.tag === t) {
                        return null
                    }
                    var e = this.tag >> 6,
                        i = 31 & this.tag,
                        n = this.posContent(),
                        o = Math.abs(this.length)
                    if (0 !== e) {
                        if (null !== this.sub) {
                            return '(' + this.sub.length + ' elem)'
                        }
                        var h = this.stream.parseStringISO(n, n + Math.min(o, r))
                        return this.reSeemsASCII.test(h) ? h.substring(0, 2 * r) + (h.length > 2 * r ? s : '') : this.stream.parseOctetString(n, n + o)
                    }
                    switch (i) {
                        case 1:
                            return 0 === this.stream.get(n) ? 'false' : 'true'
                        case 2:
                            return this.stream.parseInteger(n, n + o)
                        case 3:
                            return this.sub ? '(' + this.sub.length + ' elem)' : this.stream.parseBitString(n, n + o)
                        case 4:
                            return this.sub ? '(' + this.sub.length + ' elem)' : this.stream.parseOctetString(n, n + o)
                        case 6:
                            return this.stream.parseOID(n, n + o)
                        case 16:
                        case 17:
                            return '(' + this.sub.length + ' elem)'
                        case 12:
                            return this.stream.parseStringUTF(n, n + o)
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 26:
                            return this.stream.parseStringISO(n, n + o)
                        case 30:
                            return this.stream.parseStringBMP(n, n + o)
                        case 23:
                        case 24:
                            return this.stream.parseTime(n, n + o)
                    }
                    return null
                },
                i.prototype.toString = function () {
                    return this.typeName() + '@' + this.stream.pos + '[header:' + this.header + ',length:' + this.length + ',sub:' + (null === this.sub ? 'null' : this.sub.length) + ']'
                },
                i.prototype.print = function (e) {
                    if (e === t && (e = ''), document.writeln(e + this), null !== this.sub) {
                        e += '  '
                        for (var i = 0, r = this.sub.length; r > i; ++i) {
                            this.sub[i].print(e)
                        }
                    }
                },
                i.prototype.toPrettyString = function (e) {
                    e === t && (e = '')
                    var i = e + this.typeName() + ' @' + this.stream.pos
                    if (this.length >= 0 && (i += '+'), i += this.length, 32 & this.tag ? i += ' (constructed)' : 3 != this.tag && 4 != this.tag || null === this.sub || (i += ' (encapsulates)'), i += '\n', null !== this.sub) {
                        e += '  '
                        for (var r = 0, s = this.sub.length; s > r; ++r) {
                            i += this.sub[r].toPrettyString(e)
                        }
                    }
                    return i
                },
                i.prototype.toDOM = function () {
                    var t = n.tag('div', 'node')
                    t.asn1 = this
                    var e = n.tag('div', 'head'),
                        i = this.typeName().replace(/_/g, ' ')
                    e.innerHTML = i
                    var r = this.content()
                    if (null !== r) {
                        r = String(r).replace(/</g, '&lt;')
                        var s = n.tag('span', 'preview')
                        s.appendChild(n.text(r)),
                            e.appendChild(s)
                    }
                    t.appendChild(e),
                        this.node = t,
                        this.head = e
                    var o = n.tag('div', 'value')
                    if (i = 'Offset: ' + this.stream.pos + '<br/>', i += 'Length: ' + this.header + '+', i += this.length >= 0 ? this.length : -this.length + ' (undefined)', 32 & this.tag ? i += '<br/>(constructed)' : 3 != this.tag && 4 != this.tag || null === this.sub || (i += '<br/>(encapsulates)'), null !== r && (i += '<br/>Value:<br/><b>' + r + '</b>', 'object' == typeof oids && 6 == this.tag)) {
                        var h = oids[r]
                        h && (h.d && (i += '<br/>' + h.d), h.c && (i += '<br/>' + h.c), h.w && (i += '<br/>(warning!)'))
                    }
                    o.innerHTML = i,
                        t.appendChild(o)
                    var a = n.tag('div', 'sub')
                    if (null !== this.sub) {
                        for (var u = 0, c = this.sub.length; c > u; ++u) {
                            a.appendChild(this.sub[u].toDOM())
                        }
                    }
                    return t.appendChild(a),
                        e.onclick = function () {
                            t.className = 'node collapsed' == t.className ? 'node' : 'node collapsed'
                        },
                        t
                },
                i.prototype.posStart = function () {
                    return this.stream.pos
                },
                i.prototype.posContent = function () {
                    return this.stream.pos + this.header
                },
                i.prototype.posEnd = function () {
                    return this.stream.pos + this.header + Math.abs(this.length)
                },
                i.prototype.fakeHover = function (t) {
                    this.node.className += ' hover',
                    t && (this.head.className += ' hover')
                },
                i.prototype.fakeOut = function (t) {
                    var e = / ?hover/
                    this.node.className = this.node.className.replace(e, ''),
                    t && (this.head.className = this.head.className.replace(e, ''))
                },
                i.prototype.toHexDOM_sub = function (t, e, i, r, s) {
                    if (!(r >= s)) {
                        var o = n.tag('span', e)
                        o.appendChild(n.text(i.hexDump(r, s))),
                            t.appendChild(o)
                    }
                },
                i.prototype.toHexDOM = function (e) {
                    var i = n.tag('span', 'hex')
                    if (e === t && (e = i), this.head.hexNode = i, this.head.onmouseover = function () {
                        this.hexNode.className = 'hexCurrent'
                    }, this.head.onmouseout = function () {
                        this.hexNode.className = 'hex'
                    }, i.asn1 = this, i.onmouseover = function () {
                        var t = !e.selected
                        t && (e.selected = this.asn1, this.className = 'hexCurrent'),
                            this.asn1.fakeHover(t)
                    }, i.onmouseout = function () {
                        var t = e.selected == this.asn1
                        this.asn1.fakeOut(t),
                        t && (e.selected = null, this.className = 'hex')
                    }, this.toHexDOM_sub(i, 'tag', this.stream, this.posStart(), this.posStart() + 1), this.toHexDOM_sub(i, this.length >= 0 ? 'dlen' : 'ulen', this.stream, this.posStart() + 1, this.posContent()), null === this.sub) {
                        i.appendChild(n.text(this.stream.hexDump(this.posContent(), this.posEnd())))
                    } else {
                        if (this.sub.length > 0) {
                            var r = this.sub[0],
                                s = this.sub[this.sub.length - 1]
                            this.toHexDOM_sub(i, 'intro', this.stream, this.posContent(), r.posStart())
                            for (var o = 0, h = this.sub.length; h > o; ++o) {
                                i.appendChild(this.sub[o].toHexDOM(e))
                            }
                            this.toHexDOM_sub(i, 'outro', this.stream, s.posEnd(), this.posEnd())
                        }
                    }
                    return i
                },
                i.prototype.toHexString = function (t) {
                    return this.stream.hexDump(this.posStart(), this.posEnd(), !0)
                },
                i.decodeLength = function (t) {
                    var e = t.get(),
                        i = 127 & e
                    if (i == e) {
                        return i
                    }
                    if (i > 3) {
                        throw 'Length over 24 bits not supported at position ' + (t.pos - 1)
                    }
                    if (0 === i) {
                        return -1
                    }
                    e = 0
                    for (var r = 0; i > r; ++r) {
                        e = e << 8 | t.get()
                    }
                    return e
                },
                i.hasContent = function (t, r, s) {
                    if (32 & t) {
                        return !0
                    }
                    if (3 > t || t > 4) {
                        return !1
                    }
                    var n = new e(s)
                    3 == t && n.get()
                    var o = n.get()
                    if (o >> 6 & 1) {
                        return !1
                    }
                    try {
                        var h = i.decodeLength(n)
                        return n.pos - s.pos + h == r
                    } catch (a) {
                        return !1
                    }
                },
                i.decode = function (t) {
                    t instanceof e || (t = new e(t, 0))
                    var r = new e(t),
                        s = t.get(),
                        n = i.decodeLength(t),
                        o = t.pos - r.pos,
                        h = null
                    if (i.hasContent(s, n, t)) {
                        var a = t.pos
                        if (3 == s && t.get(), h = [], n >= 0) {
                            for (var u = a + n; t.pos < u;) {
                                h[h.length] = i.decode(t)
                            }
                            if (t.pos != u) {
                                throw 'Content size is not correct for container starting at offset ' + a
                            }
                        } else {
                            try {
                                for (; ;) {
                                    var c = i.decode(t)
                                    if (0 === c.tag) {
                                        break
                                    }
                                    h[h.length] = c
                                }
                                n = a - t.pos
                            } catch (f) {
                                throw 'Exception while decoding undefined length content: ' + f
                            }
                        }
                    } else {
                        t.pos += n
                    }
                    return new i(r, o, n, s, h)
                },
                i.test = function () {
                    for (var t = [
                        {
                            value: [
                                39
                            ],
                            expected: 39
                        },
                        {
                            value: [
                                129,
                                201
                            ],
                            expected: 201
                        },
                        {
                            value: [
                                131,
                                254,
                                220,
                                186
                            ],
                            expected: 16702650
                        }
                    ], r = 0, s = t.length; s > r; ++r) {
                        var n = new e(t[r].value, 0),
                            o = i.decodeLength(n)
                        o != t[r].expected && document.write('In test[' + r + '] expected ' + t[r].expected + ' got ' + o + '\n')
                    }
                },
                window.ASN1 = i
        }(),
        ASN1.prototype.getHexStringValue = function () {
            var t = this.toHexString(),
                e = 2 * this.header,
                i = 2 * this.length
            return t.substr(e, i)
        },
        ue.prototype.parseKey = function (t) {
            try {
                var e = 0,
                    i = 0,
                    r = /^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,
                    s = r.test(t) ? Hex.decode(t) : Base64.unarmor(t),
                    n = ASN1.decode(s)
                if (3 === n.sub.length && (n = n.sub[2].sub[0]), 9 === n.sub.length) {
                    e = n.sub[1].getHexStringValue(),
                        this.n = he(e, 16),
                        i = n.sub[2].getHexStringValue(),
                        this.e = parseInt(i, 16)
                    var o = n.sub[3].getHexStringValue()
                    this.d = he(o, 16)
                    var h = n.sub[4].getHexStringValue()
                    this.p = he(h, 16)
                    var a = n.sub[5].getHexStringValue()
                    this.q = he(a, 16)
                    var u = n.sub[6].getHexStringValue()
                    this.dmp1 = he(u, 16)
                    var c = n.sub[7].getHexStringValue()
                    this.dmq1 = he(c, 16)
                    var f = n.sub[8].getHexStringValue()
                    this.coeff = he(f, 16)
                } else {
                    if (2 !== n.sub.length) {
                        return !1
                    }
                    var p = n.sub[1],
                        l = p.sub[0]
                    e = l.sub[0].getHexStringValue(),
                        this.n = he(e, 16),
                        i = l.sub[1].getHexStringValue(),
                        this.e = parseInt(i, 16)
                }
                return !0
            } catch (d) {
                return !1
            }
        },
        ue.prototype.getPrivateBaseKey = function () {
            var t = {
                    array: [
                        new KJUR.asn1.DERInteger({
                            'int': 0
                        }),
                        new KJUR.asn1.DERInteger({
                            bigint: this.n
                        }),
                        new KJUR.asn1.DERInteger({
                            'int': this.e
                        }),
                        new KJUR.asn1.DERInteger({
                            bigint: this.d
                        }),
                        new KJUR.asn1.DERInteger({
                            bigint: this.p
                        }),
                        new KJUR.asn1.DERInteger({
                            bigint: this.q
                        }),
                        new KJUR.asn1.DERInteger({
                            bigint: this.dmp1
                        }),
                        new KJUR.asn1.DERInteger({
                            bigint: this.dmq1
                        }),
                        new KJUR.asn1.DERInteger({
                            bigint: this.coeff
                        })
                    ]
                },
                e = new KJUR.asn1.DERSequence(t)
            return e.getEncodedHex()
        },
        ue.prototype.getPrivateBaseKeyB64 = function () {
            return be(this.getPrivateBaseKey())
        },
        ue.prototype.getPublicBaseKey = function () {
            var t = {
                    array: [
                        new KJUR.asn1.DERObjectIdentifier({
                            oid: '1.2.840.113549.1.1.1'
                        }),
                        new KJUR.asn1.DERNull
                    ]
                },
                e = new KJUR.asn1.DERSequence(t)
            t = {
                array: [
                    new KJUR.asn1.DERInteger({
                        bigint: this.n
                    }),
                    new KJUR.asn1.DERInteger({
                        'int': this.e
                    })
                ]
            }
            var i = new KJUR.asn1.DERSequence(t)
            t = {
                hex: '00' + i.getEncodedHex()
            }
            var r = new KJUR.asn1.DERBitString(t)
            t = {
                array: [
                    e,
                    r
                ]
            }
            var s = new KJUR.asn1.DERSequence(t)
            return s.getEncodedHex()
        },
        ue.prototype.getPublicBaseKeyB64 = function () {
            return be(this.getPublicBaseKey())
        },
        ue.prototype.wordwrap = function (t, e) {
            if (e = e || 64, !t) {
                return t
            }
            var i = '(.{1,' + e + '})( +|$\n?)|(.{1,' + e + '})'
            return t.match(RegExp(i, 'g')).join('\n')
        },
        ue.prototype.getPrivateKey = function () {
            var t = '-----BEGIN RSA PRIVATE KEY-----\n'
            return t += this.wordwrap(this.getPrivateBaseKeyB64()) + '\n',
                t += '-----END RSA PRIVATE KEY-----'
        },
        ue.prototype.getPublicKey = function () {
            var t = '-----BEGIN PUBLIC KEY-----\n'
            return t += this.wordwrap(this.getPublicBaseKeyB64()) + '\n',
                t += '-----END PUBLIC KEY-----'
        },
        ue.prototype.hasPublicKeyProperty = function (t) {
            return t = t || {},
            t.hasOwnProperty('n') && t.hasOwnProperty('e')
        },
        ue.prototype.hasPrivateKeyProperty = function (t) {
            return t = t || {},
            t.hasOwnProperty('n') && t.hasOwnProperty('e') && t.hasOwnProperty('d') && t.hasOwnProperty('p') && t.hasOwnProperty('q') && t.hasOwnProperty('dmp1') && t.hasOwnProperty('dmq1') && t.hasOwnProperty('coeff')
        },
        ue.prototype.parsePropertiesFrom = function (t) {
            this.n = t.n,
                this.e = t.e,
            t.hasOwnProperty('d') && (this.d = t.d, this.p = t.p, this.q = t.q, this.dmp1 = t.dmp1, this.dmq1 = t.dmq1, this.coeff = t.coeff)
        }
    var _e = function (t) {
        ue.call(this),
        t && ('string' == typeof t ? this.parseKey(t) : (this.hasPrivateKeyProperty(t) || this.hasPublicKeyProperty(t)) && this.parsePropertiesFrom(t))
    }
    _e.prototype = new ue,
        _e.prototype.constructor = _e
    var ze = function (t) {
        t = t || {},
            this.default_key_size = parseInt(t.default_key_size) || 1024,
            this.default_public_exponent = t.default_public_exponent || '010001',
            this.log = t.log || !1,
            this.key = null
    }
    ze.prototype.setKey = function (t) {
        this.log && this.key && console.warn('A key was already set, overriding existing.'),
            this.key = new _e(t)
    },
        ze.prototype.setPrivateKey = function (t) {
            this.setKey(t)
        },
        ze.prototype.setPublicKey = function (t) {
            this.setKey(t)
        },
        ze.prototype.decrypt = function (t) {
            try {
                return this.getKey().decrypt(Te(t))
            } catch (e) {
                return !1
            }
        },
        ze.prototype.encrypt = function (t) {
            try {
                return be(this.getKey().encrypt(t))
            } catch (e) {
                return !1
            }
        },
        ze.prototype.getKey = function (t) {
            if (!this.key) {
                if (this.key = new _e, t && '[object Function]' === {}.toString.call(t)) {
                    return void this.key.generateAsync(this.default_key_size, this.default_public_exponent, t)
                }
                this.key.generate(this.default_key_size, this.default_public_exponent)
            }
            return this.key
        },
        ze.prototype.getPrivateKey = function () {
            return this.getKey().getPrivateKey()
        },
        ze.prototype.getPrivateKeyB64 = function () {
            return this.getKey().getPrivateBaseKeyB64()
        },
        ze.prototype.getPublicKey = function () {
            return this.getKey().getPublicKey()
        },
        ze.prototype.getPublicKeyB64 = function () {
            return this.getKey().getPublicBaseKeyB64()
        },
        ze.version = '2.3.1',
        t.JSEncrypt = ze
})
var cipLabelErrorText = ' Error in '
var cipSubmitButtonADAText = ' button will be enabled when all the required fields are filled with valid entries'
var cipButtonEnabledADAText = '. submits your information'
var cipButtonSubmittedADAText = '. button is disabled after submitting the request'
var cipDOBFormatValid = true
if ($('html').attr('lang').toLowerCase() != 'en-us') {
    cipSubmitButtonADAText = ' bot&#243;n se activa cuando todos los campos obligatorios tienen datos v&#225;lidos '
    cipButtonEnabledADAText = '. Env&#237;a su informaci&#243;n'
    cipButtonSubmittedADAText = '. El bot&#243;n se desactiva despu&#233;s de que usted env&#237;a la solicitud'
    cipLabelErrorText = ' Error en '
}
var vipaaSubUserAMLCIPSkin = {
    fn: {
        init: function () {
            vipaaSubUserAMLCIPSkin.fn.eventListeners()
            vipaaSubUserAMLCIPSkin.fn.validateForm()
            vipaaSubUserAMLCIPSkin.fn.formatDOB('txtDOB-val')
            vipaaSubUserAMLCIPSkin.fn.fetchCIPUserData()
            jQuery.data(document.body, 'ppwMinAge', 15)
        },
        eventListeners: function () {
            $('#txtDOB-val').on('keypress', function (e) {
                var dobKeyPressed = e.which || e.keyCode
                if (dobKeyPressed > 46 && dobKeyPressed < 58) {
                } else {
                    e.preventDefault()
                }
            })
            $('#txtSSN-val').on('keypress', function (e) {
                var ssnKeyPressed = e.which || e.keyCode
                if (ssnKeyPressed > 46 && ssnKeyPressed < 58) {
                    if ($(this).val().length == 8) {
                        setTimeout(function () {
                            $('#sb-aml-cip-submit').focus()
                        }, 0)
                    } else {
                        vipaaSubUserAMLCIPSkin.fn.updateSubmitButtonState(null, true)
                    }
                } else {
                    e.preventDefault()
                }
            })
            $('#sb-aml-cip-submit').on('click', function (e) {
                $('#sb-aml-cip-form').submit()
            })
            $('#sb-aml-cip-submit').removeClass('btn-bofa-blue').addClass('btn-disabled')
            $('#sb-aml-cip-submit span.ada-hidden').remove()
            $('#sb-aml-cip-submit').append('<span class="ada-hidden">' + cipSubmitButtonADAText + '</span>')
            $('.sub-user-vipaa-module .aml-cip-skin label span.ada-hidden').remove()
            $('.sub-user-vipaa-module .aml-cip-skin label').prepend('<span class="ada-hidden"></span>')
        },
        validateForm: function () {
            $('#sb-aml-cip-form').validate({
                includeFieldLabel: false,
                disableButtonBlueId: 'sb-aml-cip-submit',
                messages: {
                    txtFirstName: {
                        alphawithspacetrim: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a valid first name.' : 'Indique un nombre de pila v&aacute;lido.',
                        minlength: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a valid first name.' : 'Indique un nombre de pila v&aacute;lido.'
                    },
                    txtMiddleInitial: {
                        lettersonly: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a valid middle initial.' : 'Indique una inicial del 2.&ordm; nombre v&aacute;lida',
                        rangelength: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a valid middle initial.' : 'Indique una inicial del 2.&ordm; nombre v&aacute;lida'
                    },
                    txtLastName: {
                        alphawithspacetrim: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a valid last name.' : 'Indique un apellido v&aacute;lido.',
                        minlength: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a valid last name.' : 'Indique un apellido v&aacute;lido.'
                    },
                    txtSuffix: {
                        rangelength: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a valid suffix.' : 'Indique un sufijo v&aacute;lido.',
                        suffixrule: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a valid suffix.' : 'Indique un sufijo v&aacute;lido.'
                    },
                    'txtDOB-val': {
                        validateCIPDOB: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a properly formatted date of birth.' : 'Indique una fecha de nacimiento con el formato correcto.',
                        validateCIPMinAge: $('html').attr('lang').toLowerCase() == 'en-us' ? 'You must be at least fifteen years of age to have access to this account.' : 'Debe tener como m&iacute;nimo quince a&ntilde;os de edad para acceder a esta cuenta.',
                        nospacesnospecial: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a properly formatted date of birth.' : 'Indique una fecha de nacimiento con el formato correcto.'
                    },
                    'txtSSN-val': {
                        integer: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a properly formatted/valid social security number or ITIN.' : 'Indique un n&#250;mero de seguro social o ITIN con el formato correcto/v&#225;lido.',
                        minlength: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a properly formatted/valid social security number or ITIN.' : 'Indique un n&#250;mero de seguro social o ITIN con el formato correcto/v&#225;lido.',
                        nospacesnospecial: $('html').attr('lang').toLowerCase() == 'en-us' ? 'Enter a properly formatted/valid social security number or ITIN.' : 'Indique un n&#250;mero de seguro social o ITIN con el formato correcto/v&#225;lido.'
                    }
                },
                rules: {
                    txtFirstName: {
                        alphawithspacetrim: true,
                        minlength: 2
                    },
                    txtMiddleInitial: {
                        lettersonly: true,
                        rangelength: [
                            0,
                            1
                        ]
                    },
                    txtLastName: {
                        alphawithspacetrim: true,
                        minlength: 2
                    },
                    txtSuffix: {
                        rangelength: [
                            0,
                            4
                        ],
                        suffixrule: true
                    },
                    'txtDOB-val': {
                        validateCIPDOB: {
                            depends: function (element) {
                                return ($('#txtDOB-val').val() != 'MM/DD/YYYY' && $('#txtDOB-val').val() != '')
                            }
                        },
                        validateCIPMinAge: {
                            depends: function (element) {
                                return ($('#txtDOB-val').val() != 'MM/DD/YYYY' && $('#txtDOB-val').val() != '')
                            }
                        },
                        nospacesnospecial: '*<>@{}"\'%;)(&+:#'
                    },
                    'txtSSN-val': {
                        integer: true,
                        minlength: 9,
                        nospacesnospecial: '*<>@{}"\'%;)(&+:#'
                    }
                },
                onfocusout: function (element, event) {
                    vipaaSubUserAMLCIPSkin.fn.resetCIPErrors()
                    if ($(element).attr('id').indexOf('masked') !== -1) {
                        return false
                    }
                    $(element).valid()
                    if (this.errorList[0] != null) {
                        $('label[for=\'' + $(element).attr('id') + '\'] span.ada-hidden:eq(0)').text(cipLabelErrorText)
                        $('label[for=\'' + $(element).attr('id') + '\']').addClass('ada-buffer')
                        if ($(element).attr('id') === 'txtDOB-val') {
                            setTimeout(function () {
                                $('#txtDOB-val-masked').addClass('hidden')
                                $('#txtDOB-val').removeClass('hidden')
                                $('#lblDOB').attr('for', 'txtDOB-val')
                                $('#txtDOB-val').focus()
                            }, 200)
                        } else {
                            setTimeout(function () {
                                $(element).focus()
                            }, 200)
                        }
                        if (!$(element).hasClass('sb-aml-cip-required')) {
                            vipaaSubUserAMLCIPSkin.fn.updateSubmitButtonState(null, true)
                        } else {
                            vipaaSubUserAMLCIPSkin.fn.updateSubmitButtonState(this.errorList[0], false)
                        }
                        $('.spa-input-error-message').attr('tabindex', 0).focus()
                    } else {
                        if (!$('.sub-user-vipaa-module .aml-cip-skin label').hasClass('field-level-error')) {
                            vipaaSubUserAMLCIPSkin.fn.resetCIPErrors()
                            vipaaSubUserAMLCIPSkin.fn.updateSubmitButtonState(null, false)
                            var fieldValue = $.trim($(element).val())
                            $(element).val(fieldValue)
                        }
                    }
                },
                submitHandler: function (form) {
                    $('#sb-aml-cip-submit span.ada-hidden').text(cipButtonSubmittedADAText)
                    var dobValue = ssnValue = ''
                    dobValue = $.trim($('#txtDOB-val').val())
                    ssnValue = $.trim($('#txtSSN-val').val())
                    if (typeof (vipaaKeys.publicKey) !== 'undefined') {
                        var encDOB = encryptA(dobValue, vipaaKeys.publicKey)
                        var encSSN = encryptA(ssnValue, vipaaKeys.publicKey)
                        $('#txtDOB').val(encDOB)
                        $('#txtSSN').val(encSSN)
                        $('#txtDOB-val').val('')
                        $('#txtSSN-val').val('')
                    }
                    form.submit()
                },
                invalidHandler: function (form, validator) {
                }
            })
        },
        formatDOB: function (currentEle) {
            var $currentElement = $('#' + currentEle)
            var $currTxtVal
            $currentElement.keyup(function (e) {
                var $keyID = (window.event) ? event.keyCode : e.keyCode
                if (($currentElement.val().length == 2 || $currentElement.val().length == 5) && (($keyID >= 48 && $keyID <= 57) || ($keyID >= 96 && $keyID <= 105))) {
                    $currTxtVal = $currentElement.val()
                    $currentElement.val($currTxtVal + '/')
                }
            })
        },
        fetchCIPUserData: function () {
            if (typeof cipUserData !== 'undefined' && cipUserData !== null && cipUserData !== '' && typeof vipaaKeys.privateKey !== 'undefined') {
                $('#sb-aml-cip-form') [0].reset()
                var decryptedCipUserData = decryptA(cipUserData, vipaaKeys.privateKey)
                if (typeof decryptedCipUserData !== 'undefined' && decryptedCipUserData !== false) {
                    var cipUserDataArray = decryptedCipUserData.split('&')
                    for (var i in cipUserDataArray) {
                        var cipUserDataKey = cipUserDataArray[i].split('=') [0]
                        var cipUserDataValue = cipUserDataArray[i].split('=') [1]
                        if (cipUserDataKey === 'firstName') {
                            $('#txtFirstName').val(cipUserDataValue)
                        } else {
                            if (cipUserDataKey === 'middleName') {
                                $('#txtMiddleInitial').val(cipUserDataValue)
                            } else {
                                if (cipUserDataKey === 'lastName') {
                                    $('#txtLastName').val(cipUserDataValue)
                                } else {
                                    if (cipUserDataKey === 'suffix') {
                                        $('#txtSuffix').val(cipUserDataValue)
                                    } else {
                                        if (cipUserDataKey === 'dateOfBirth') {
                                            $('#txtDOB-val').val(cipUserDataValue)
                                        } else {
                                            if (cipUserDataKey === 'taxId') {
                                                $('#txtSSN-val').val(cipUserDataValue)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    if (typeof vipaaKeys.privateKey !== 'undefined') {
                        delete vipaaKeys.privateKey
                    }
                    $('#error-message-ada-focus').attr('tabindex', 0).attr('aria-live', 'rude').focus()
                }
            }
        },
        resetCIPErrors: function () {
            $('.sub-user-vipaa-module .aml-cip-skin label').removeClass('field-level-error')
            $('.sub-user-vipaa-module .aml-cip-skin label').removeClass('ada-buffer')
            $('.spa-input-error-message').remove()
            $('.sub-user-vipaa-module .aml-cip-skin label span.ada-hidden:eq(0)').text('')
        },
        updateSubmitButtonState: function (errorList, disableButton) {
            cipNonBlankFieldCount = 0
            $('.sub-user-vipaa-module .aml-cip-skin .sb-aml-cip-required:visible').each(function () {
                if ($(this).val() != '' && $.trim($(this).val()) != '' && !$('label[for=\'' + $(this).attr('id') + '\']').hasClass('field-level-error')) {
                    cipNonBlankFieldCount++
                }
            })
            if (disableButton) {
                cipNonBlankFieldCount = cipNonBlankFieldCount - 1
            }
            if ((cipNonBlankFieldCount == $('.sub-user-vipaa-module .aml-cip-skin .sb-aml-cip-required:visible').length) && errorList == null) {
                $('#sb-aml-cip-submit').removeClass('btn-disabled').addClass('btn-bofa-blue')
                $('#sb-aml-cip-submit span.ada-hidden').text(cipButtonEnabledADAText).toggleClass('ada-buffer')
            } else {
                $('#sb-aml-cip-submit').removeClass('btn-bofa-blue').addClass('btn-disabled')
                $('#sb-aml-cip-submit span.ada-hidden').text(cipSubmitButtonADAText)
            }
        }
    }
}
$(document).ready(function () {
    if ($('.sub-user-vipaa-module .aml-cip-skin').length > 0) {
        var $sbAMLCIPSkin = $('.sub-user-vipaa-module .aml-cip-skin')
        if ($('.gis-mask').length > 0 && typeof window.boa === 'object' && typeof window.boa.form === 'object' && typeof window.boa.form.init === 'function' && $('.ie-7').length > 0) {
            $(document).trigger('common-form-disable')
            window.boa.form.disable()
        } else {
            window.boa.form.init()
        }
        vipaaSubUserAMLCIPSkin.fn.init()
    }
})
var vipaaSubUserEditProfileSkin = {
    fn: {
        validateData: '',
        errorHelp: '',
        validatePhoneData: ''
    }
}
var currentDeviceId = ''
var safePassFlag = false

function validateEmail($email) {
    var $emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/
    if (!$emailReg.test($email)) {
        return false
    } else {
        return true
    }
}

vipaaSubUserEditProfileSkin.fn.validateData = function () {
}

function validateEditProfPhone(phoneNo, id) {
    var $phoneReg = /^(\d{3})?[-]?(\d{3})[-]?(\d{4})$/
    var $numReg = /^(\d{10})$/
    if (!$phoneReg.test(phoneNo)) {
        return false
    } else {
        if ($numReg.test(phoneNo)) {
            var mobileNum = phoneNo
            var hypenMobile = mobileNum.substring(0, 3) + '-' + mobileNum.substring(3, 6) + '-' + mobileNum.substring(6, 10)
            $('#' + id).val(hypenMobile)
        } else {
            $('#' + id).val(phoneNo)
        }
        return true
    }
}

vipaaSubUserEditProfileSkin.fn.validatePhoneData = function () {
    var inputTagobject1 = $(this)
    var $val = inputTagobject1.val()
    if (isNaN($val) || $val.indexOf('.') != -1) {
        inputTagobject1.val($val.replace(new RegExp('[^0-9]+', 'g'), ''))
    }
}
$(document).ready(function () {
    var $EditProfileSkin = $('.sub-user-vipaa-module .details-skin')
    if ($('.sub-user-vipaa-module .details-skin').length > 0) {
        if ($('.gis-mask').length > 0 && typeof window.boa === 'object' && typeof window.boa.form === 'object' && typeof window.boa.form.init === 'function' && $('.ie-7').length > 0) {
            $(document).trigger('common-form-disable')
            window.boa.form.disable()
        }
        $('#tlpvt-emailAddress').fieldMatcher({
            tooltipID: 'tlpvt-emailAddress-tooltip',
            originFieldID: 'tlpvt-emailAddress',
            tooltipLeft: 286,
            tooltipTop: 272,
            matchText: '<p id=\'tlpvt-emailAddress-error-info\'><span class=\'bold\'>Correct Format</span><br/>name@mail.com</p>',
            notMatchText: '',
            formatCheckerCallback: function () {
                if ((validateEmail($('#tlpvt-emailAddress').val()) === false)) {
                    $('#tlpvt-emailAddress-tooltip').css('top', ($('#tlpvt-emailAddress').position().top - 18) + 'px')
                    $('#tlpvt-emailAddress-tooltip').css('left', ($('#tlpvt-emailAddress').position().left + 270) + 'px')
                    $('#tlpvt-emailAddress-tooltip .match .field-matcher-match').remove()
                } else {
                    $('#tlpvt-emailAddress-tooltip').css('display', 'none')
                }
            }
        })
        $('#deviceinput1').fieldMatcher({
            tooltipID: 'deviceinput1-tooltip',
            originFieldID: 'deviceinput1',
            tooltipLeft: 270,
            tooltipTop: 952,
            matchText: '<p id=\'tlpvt-phoneNumber-error-info\'><span class=\'bold\'>Format Checker</span><br/>XXX-XXX-XXXX </p>',
            notMatchText: '',
            formatCheckerCallback: function () {
                if ((validateEditProfPhone($('#deviceinput1').val(), 'deviceinput1') === false)) {
                    $('#deviceinput1-tooltip').css('top', ($('#deviceinput1').position().top - 38) + 'px')
                    $('#deviceinput1-tooltip').css('left', ($('#deviceinput1').position().left + 270) + 'px')
                    $('#deviceinput1-tooltip .match .field-matcher-match').remove()
                } else {
                    $('#deviceinput1-tooltip').css('display', 'none')
                }
            }
        })
        $('#deviceinput2').fieldMatcher({
            tooltipID: 'deviceinput2-tooltip',
            originFieldID: 'deviceinput2',
            tooltipLeft: 286,
            tooltipTop: 272,
            matchText: '<p><span class=\'bold\'>Format Checker</span><br/>XXX-XXX-XXXX </p>',
            notMatchText: '',
            formatCheckerCallback: function () {
                if ((validateEditProfPhone($('#deviceinput2').val(), 'deviceinput2') === false)) {
                    $('#deviceinput2-tooltip').css('top', ($('#deviceinput2').position().top - 38) + 'px')
                    $('#deviceinput2-tooltip').css('left', ($('#deviceinput2').position().left + 270) + 'px')
                    $('#deviceinput2-tooltip .match .field-matcher-match').remove()
                } else {
                    $('#deviceinput2-tooltip').css('display', 'none')
                }
            }
        })
        if ($('html').attr('lang').toLowerCase() == 'en-us') {
            $('#editUserNameForm').validate({
                messages: {
                    userName: {
                        required: 'Please enter a new user name to continue.',
                        nodigits: 'Please create an user name that does not contain any numbers.',
                        alphawithspace: 'Please create an user name that does not contain any numbers.',
                        nospecial: 'Please enter an user name without spaces or these special characters: ` ! $ % ^ & [ ]  | " \' : < > ',
                        rangelength: $.validator.format('Please create an user name between 6-30 characters in length.')
                    }
                },
                rules: {
                    userName: {
                        required: true,
                        nospecial: '%"<>&^![\\]:',
                        nodigits: true,
                        alphawithspace: true,
                        rangelength: [
                            6,
                            30
                        ]
                    },
                    includeFieldLabel: false
                }
            })
            $('#editOnlineIdForm', $EditProfileSkin).validate({
                messages: {
                    onlineId: {
                        required: 'Create an Online ID that is 6 to 32 characters in length.',
                        nodigits: 'Create an Online ID that does not contain all numbers.',
                        rangelength: $.validator.format('Create an Online ID that is {0} to {1} characters in length.'),
                        letterNumberSpecialCombo: 'Enter an Online ID with no spaces and using only the allowed special characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    passcode: {
                        required: 'Enter a new Passcode to continue.',
                        rangelength: $.validator.format('Your Passcode must be {0} to {1} characters in length.'),
                        passcodeSpecialCombo: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Your Passcode must have at least 1 letter and 1 number.',
                        allowedSpecialChars: 'Your Passcode must not contain spaces, and may only use these characters: <br/>@ # * ( ) + = { } / ? ~ ; , . - _',
                        oneNumOneUpOneLow: 'Your Passcode must have 1 upper case letter, 1 lower case letter, and 1 number.',
                        nonRepeat3Chars: 'Your Passcode must not repeat the same number or letter more than 3 times in a row.'
                    },
                    confPasscode: {
                        required: 'Re-enter your Passcode correctly to continue.',
                        equalTo: 'Re-enter your Passcode correctly to continue.'
                    }
                },
                rules: {
                    onlineId: {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    },
                    passcode: {
                        required: {
                            depends: function (element) {
                                return (($('#passcode').val().length === 0) ? true : false)
                            }
                        },
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    confPasscode: {
                        required: {
                            depends: function (element) {
                                return (($('#confPasscode').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#passcode')
                    }
                },
                includeFieldLabel: false
            })
            $('#editEmailForm').validate({
                messages: {
                    'tlpvt-emailAddress': {
                        required: 'Please enter your email id to continue.',
                        nospacesnospecial: 'Please enter your valid email address.',
                        email: 'Please provide email id in proper format',
                        rangelength: $.validator.format('Please create an email maximum of 63 characters in length.')
                    }
                },
                rules: {
                    'tlpvt-emailAddress': {
                        required: true,
                        nospacesnospecial: '$%<>&\\^![\\]',
                        email: true,
                        rangelength: [
                            3,
                            63
                        ]
                    },
                    includeFieldLabel: false
                }
            })
            $('#onlineId', $EditProfileSkin).formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Between 6 to 32 characters'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'A combination of 2 character<br/>&nbsp;&nbsp;&nbsp;&nbsp;types (letters, numbers and <br/>&nbsp;&nbsp;&nbsp;&nbsp;special) or be all letters'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Spaces'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Special Characters EXCEPT <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'onlineId-tooltip',
                tooltipTop: -114,
                tooltipLeft: 272,
                formatCheckerCallback: function () {
                }
            })
            $('#confPasscode', $EditProfileSkin).fieldMatcher({
                tooltipID: 'confPasscode-tooltip',
                originFieldID: 'passcode',
                tooltipLeft: $('#confPasscode').offset().left + $('#confPasscode').width() + 85,
                tooltipTop: $('#confPasscode').offset().top + 370,
                matchText: 'Passcodes match',
                notMatchText: 'Passcodes do not match',
                formatCheckerCallback: function () {
                    var $tooltip = $('#confPasscode-tooltip')
                    $tooltip.css('top', $('#confPasscode').position().top - ($tooltip.height() / 2 - 13) + 'px')
                    $tooltip.css('left', $('#confPasscode').position().left + ($tooltip.width() / 2 + 144) + 'px')
                }
            })
            $('#passcode', $EditProfileSkin).formatChecker({
                tooltipID: 'passcode-tooltip',
                tooltipTop: -74,
                tooltipLeft: 272,
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Be 8 to 20 characters'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Use at least 1 upper case letter, 1 lower case letter, and 1 number'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'Not repeat the same number or letter more than 3 times in a row'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Not contain spaces, and may only use these characters<br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                },
                formatCheckerCallback: function () {
                }
            })
        } else {
            $('#editUserNameForm', $EditProfileSkin).validate({
                messages: {
                    userName: {
                        required: 'Please enter a new user name to continue.',
                        nodigits: 'Please create an user name that does not contain any numbers.',
                        alphawithspace: 'Please create an user name that does not contain any numbers.',
                        nospecial: 'Please enter an user name without spaces or these special characters: ` ! $ % ^ & [ ]  | " \' : < > ',
                        rangelength: $.validator.format('Please create an user name between 6-30 characters in length.')
                    }
                },
                rules: {
                    userName: {
                        required: true,
                        nospecial: '%"<>&^![\\]:',
                        nodigits: true,
                        alphawithspace: true,
                        rangelength: [
                            6,
                            30
                        ]
                    },
                    includeFieldLabel: false
                }
            })
            $('#editOnlineIdForm', $EditProfileSkin).validate({
                messages: {
                    onlineId: {
                        required: 'Cree una Identificaci&#243;n en l&#237;nea que tenga entre 6 y 32 caracteres de longitud.',
                        nodigits: 'Cree una Identificaci&#243;n en l&#237;nea que no contenga s&#243;lo n&#250;meros.',
                        rangelength: $.validator.format('Cree una Identificaci&#243;n en l&#237;nea que tenga entre {0} y {1} caracteres de longitud.'),
                        letterNumberSpecialCombo: 'Indique una Identificaci&#243;n en L&#237;nea sin espacios y usando s&#243;lo los caracteres especiales permitidos: @ # * ( ) + = { } / ? ~ ; , . - _'
                    },
                    passcode: {
                        required: 'Indique una nueva Contrase&#241;a para continuar.',
                        rangelength: $.validator.format('Su Contrase&#241;a debe tener entre {0} y {1} caracteres de longitud.'),
                        passcodeSpecialCombo: 'Cree una Contrase&#241;a sin espacios y usando s&#243;lo estos caracteres especiales: @ # * ( ) + = { } / ? ~ ; , . - _',
                        allowedSpecialChars: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres: @ # * ( ) + = { } / ? ~ ; , . - _',
                        onenumberoneletter: 'Su Contrase&#241;a debe tener al menos una letra y un n&#250;mero.',
                        oneNumOneUpOneLow: 'Su Contrase&#241;a debe de tener 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero.',
                        nonRepeat3Chars: 'Su Contrase&#241;a no debe repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas.'
                    },
                    confPasscode: {
                        required: 'Vuelva a indicar su Contrase&#241;a para continuar.',
                        equalTo: 'Vuelva a indicar su Contrase&#241;a para continuar.'
                    }
                },
                rules: {
                    onlineId: {
                        required: true,
                        nodigits: true,
                        rangelength: [
                            6,
                            32
                        ],
                        letterNumberSpecialCombo: true
                    },
                    passcode: {
                        required: {
                            depends: function (element) {
                                return (($('#passcode').val().length === 0) ? true : false)
                            }
                        },
                        nospacesnospecial: '$<>&\\^![\\]',
                        rangelength: [
                            8,
                            20
                        ],
                        oneNumOneUpOneLow: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        nonRepeat3Chars: (typeof newPwdStandardSwitch !== 'undefined' && newPwdStandardSwitch == 'true') ? true : false,
                        allowedSpecialChars: true,
                        onenumberoneletter: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false,
                        passcodeSpecialCombo: (typeof pwdRegexSwitch !== 'undefined' && pwdRegexSwitch == 'true') ? true : false
                    },
                    confPasscode: {
                        required: {
                            depends: function (element) {
                                return (($('#confPasscode').val().length === 0) ? true : false)
                            }
                        },
                        equalTo: $('#passcode')
                    }
                },
                includeFieldLabel: false
            })
            $('#onlineId', $EditProfileSkin).formatChecker({
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 6,
                    maxChar: 32,
                    ruleText: 'Entre 6 y 32 caracteres'
                },
                letterNumberSpecialComboRule: {
                    applyRule: true,
                    ruleText: 'Una combinaci&#243;n de 2 tipos de caracteres (letras, n&#250;meros y especiales) o tener s&#243;lo letras'
                },
                noSpacesRule: {
                    applyRule: true,
                    ruleText: 'Espacios'
                },
                noSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Caracteres especiales EXCEPTO <br/> &nbsp;&nbsp;&nbsp;&nbsp;@ # * ( ) + = { } / ? ~ ; , . - _',
                    excludedChars: '!%&\\^"<>:[\\]\'`$\\\\|'
                },
                noAllNumbersRule: {
                    applyRule: true,
                    ruleText: 'All numbers'
                },
                tooltipID: 'onlineId-tooltip',
                tooltipTop: -114,
                tooltipLeft: 272,
                formatCheckerCallback: function () {
                }
            })
            $('#confPasscode', $EditProfileSkin).fieldMatcher({
                tooltipID: 'confPasscode-tooltip',
                originFieldID: 'passcode',
                tooltipLeft: $('#confPasscode').offset().left + $('#confPasscode').width() + 85,
                tooltipTop: $('#confPasscode').offset().top + 370,
                matchText: 'Contrase&#241;as coinciden',
                notMatchText: 'Contrase&#241;as no coinciden',
                formatCheckerCallback: function () {
                    var $tooltip = $('#confPasscode-tooltip')
                    $tooltip.css('top', $('#confPasscode').position().top - ($tooltip.height() / 2 - 13) + 'px')
                    $tooltip.css('left', $('#confPasscode').position().left + ($tooltip.width() / 2 + 154) + 'px')
                }
            })
            $('#passcode', $EditProfileSkin).formatChecker({
                tooltipID: 'passcode-tooltip',
                tooltipTop: -74,
                tooltipLeft: 272,
                minMaxCharRule: {
                    applyRule: true,
                    minChar: 8,
                    maxChar: 20,
                    ruleText: 'Tener entre 8 y 20 caracteres'
                },
                oneUpCaseOneLowCaseOneNumberRule: {
                    applyRule: true,
                    ruleText: 'Usar al menos 1 letra en may&#250;scula, 1 letra en min&#250;scula y 1 n&#250;mero'
                },
                nonRepeating3CharRule: {
                    applyRule: true,
                    ruleText: 'No repetir el mismo n&#250;mero o letra m&#225;s de 3 veces seguidas'
                },
                allowedSpecialCharsRule: {
                    applyRule: true,
                    ruleText: 'Su Contrase&#241;a no puede contener espacios, y s&#243;lo puede tener estos caracteres <br/>@ # * ( ) + = { } / ? ~ ; , . - _'
                },
                formatCheckerCallback: function () {
                    var $tooltip = $('#passcode-tooltip')
                    if ($tooltip.data('height') == undefined) {
                        $tooltip.data('height', $tooltip.height())
                    }
                    $('#passcode-tooltip .tooltip-carat').css('top', ($tooltip.data('height') / 2 - 15) + 'px')
                    $tooltip.css('top', $('#passcode').position().top - ($tooltip.data('height') / 2) - 33 + 'px')
                    $tooltip.css('left', $('#passcode').position().left + ($tooltip.width() / 2) + 173 + 'px')
                }
            })
            $('#editEmailForm', $EditProfileSkin).validate({
                messages: {
                    'tlpvt-emailAddress': {
                        required: 'Please enter your email id to continue.',
                        email: 'Please provide email id in proper format',
                        rangelength: $.validator.format('Please create an email maximum of 63 characters in length.')
                    }
                },
                rules: {
                    'tlpvt-emailAddress': {
                        required: true,
                        email: true,
                        rangelength: [
                            3,
                            63
                        ]
                    },
                    includeFieldLabel: false
                }
            })
        }
        $('table', $EditProfileSkin).find('tbody:odd').addClass('even')
        if ($('#safepass-device-settings').prev('tbody').hasClass('even')) {
            $('#safepass-device-settings').addClass('even')
            $('#safepass-device-settings').next('tbody').removeClass('even')
        } else {
            $('#safepass-device-settings').removeClass('even')
            $('#safepass-device-settings').next('tbody').addClass('even')
        }
        var adminOffText = 'turn off Admin rights for '
        var adminOnText = 'turn on admin rights for '
        var safePassOffText = 'turn off the SafePass for '
        var safePassOnText = 'turn on the SafePass for '
        var url = ''
        var validationError = false
        var onlineIdValidationError = false
        var userName = userNameVar
        $('[id^=cont-with-acct-serv]').click(function (e) {
            $('[id^=cont-with-acct-serv]').removeClass('btn-bofa-blue').addClass('btn-bofa-inactive').addClass('btn-disabled')
            $('[id^=cont-with-acct-serv]').unbind(e)
        })
        $('[id^=done-]').click(function (e) {
            $('[id^=done-]').removeClass('btn-bofa-blue').addClass('btn-bofa-inactive').addClass('btn-disabled')
            $('[id^=done-]').unbind(e)
        })
        $('[id^=profSettingSaveModalSave]').click(function (e) {
            $('[id^=profSettingSaveModalSave]').removeClass('btn-bofa-blue').addClass('btn-bofa-inactive').addClass('btn-disabled')
            $('[id^=profSettingSaveModalSave]').unbind(e)
        })
        $('#confPasscode', $EditProfileSkin).bind('paste', function (e) {
            e.preventDefault()
        })
        if ($('#primaryMobileDevice').length > 0) {
            $('#device-2').removeAttr('disabled')
        }
        $('#safepass-on-off', $EditProfileSkin).click(function () {
            var $currRow = $(this).parents('tr')
            if ($(this).hasClass('button-off')) {
                if ($('#editSafepass').length > 0) {
                    $('.editSafepass', $currRow).show().focus()
                    if (!$('.editSafepass').is(':visible')) {
                        $('#safepass-device-settings').removeClass('hide').removeAttr('aria-hidden').attr('aria-live', 'rude')
                    }
                } else {
                    $('#safepass-device-settings').removeClass('hide')
                }
                $(this).removeClass('button-off').addClass('button-on').children('span:first').text(safePassOffText)
                $('input[name=safepassStatus]:hidden').val('ON')
                $('input[name=safepassOffStatus]:hidden').val('ON')
                $('#safepass-device-settings').removeAttr('aria-hidden')
            } else {
                if ($(this).hasClass('button-on')) {
                    if ($('#editSafepass').length > 0) {
                        $('#safepass-device-settings input[type=\'text\']', $EditProfileSkin).val('').hide()
                        $('#safepass-device-settings input[type=\'checkbox\']', $EditProfileSkin).removeAttr('checked')
                        $('#safepass-device-settings input[type=\'checkbox\']', $EditProfileSkin).removeAttr('disabled')
                        $('.editSafepass', $currRow).hide()
                        $('table.select-matrix').css('borderCollapse', 'separate')
                        $('#safepass-device-settings').addClass('hide').removeAttr('aria-live').attr('aria-hidden', 'true')
                        $('table.select-matrix').css('borderCollapse', 'collapse')
                    } else {
                        $('table.select-matrix').css('borderCollapse', 'separate')
                        $('#safepass-device-settings').addClass('hide').removeAttr('aria-live').attr('aria-hidden', 'true')
                        $('table.select-matrix').css('borderCollapse', 'collapse')
                    }
                    $(this).removeClass('button-on').addClass('button-off').children('span:first').text(safePassOnText)
                    $('input[name=safepassStatus]:hidden').val('OFF')
                    $('input[name=safepassOffStatus]:hidden').val('OFF')
                }
            }
        })
        $('.editSafepass', $EditProfileSkin).click(function () {
            $(this).hide()
            $('#safepass-device-settings').removeClass('hide').removeAttr('aria-hidden').attr('aria-live', 'rude')
        })
        $('#btn-save1', $EditProfileSkin).click(function (e) {
            validationError = false
            if (!$('#editUserNameForm').valid()) {
                validationError = true
            }
            if (validationError) {
                var nameValue = $('#userName').val()
                callCoreMetricErrorLib(cmPageId, cmCategoryId, cmSessionID)
            } else {
                $('#editUserNameForm').attr('action', '/login/sub-user/sm/editSubUserName.go')
                $('#editUserNameForm').submit()
                $('#btn-save1').removeClass('btn-bofa-blue').addClass('btn-bofa-inactive').addClass('btn-disabled')
                $('#btn-save1').unbind(e)
            }
        })

        function validOidNumeriChars(str) {
            var $numericOid = str.replace(/\D/g, '')
            if ($numericOid.length <= 8) {
                return true
            }
            return false
        }

        $('#btn-save2', $EditProfileSkin).click(function (e) {
            validationError = false
            onlineIdValidationError = false
            oneNumberOneLetterRegex = new RegExp('(?=.*\\d)(?=.*[a-zA-Z])')
            if (!$('#editOnlineIdForm').valid()) {
                validationError = true
            }
            if (onlineIdValidationError) {
                var oidValue = $('#onlineId').val()
                $('.global-messaging-module').hide()
                $('#onlineIdValidationError').show()
                $('.error-text').each(function () {
                    $(this).css('width', $(this).closest('.global-messaging-module .page-error-skin').width() - 60).boaVertAlign()
                })
                callCoreMetricErrorLib(cmPageId, cmCategoryId, cmSessionID)
                $('#onlineIdValidationError').focus()
            } else {
                if (validationError) {
                    var oidValue = $('#onlineId').val()
                    $('.global-messaging-module').hide()
                    $('#profValidationError').show()
                    $('.error-text').each(function () {
                        $(this).css('width', $(this).closest('.global-messaging-module .page-error-skin').width() - 60).boaVertAlign()
                    })
                    callCoreMetricErrorLib(cmPageId, cmCategoryId, cmSessionID)
                    $('#profValidationError').focus()
                } else {
                    $('#profValidationError').hide()
                    $('#onlineIdValidationError').hide()
                    $('#editOnlineIdForm').attr('action', '/login/sub-user/sm/editSUOnlineIdPasscode.go')
                    $('#editOnlineIdForm').submit()
                    $('#btn-save2').removeClass('btn-bofa-blue').addClass('btn-bofa-inactive').addClass('btn-disabled')
                    $('#btn-save2').unbind(e)
                }
            }
        })
        $('#btn-save3', $EditProfileSkin).click(function (e) {
            validationError = false
            if (!$('#editEmailForm').valid()) {
                validationError = true
            }
            if (validationError) {
                var emailValue = $('#tlpvt-emailAddress').val()
                addFormatError($('#tlpvt-emailAddress'))
                $('.global-messaging-module').hide()
                $('#profValidationError').show()
                $('.error-text').each(function () {
                    $(this).css('width', $(this).closest('.global-messaging-module .page-error-skin').width() - 60).boaVertAlign()
                })
                callCoreMetricErrorLib(cmPageId, cmCategoryId, cmSessionID)
                $('#profValidationError').focus()
            } else {
                $('#profValidationError').hide()
                removeFormatError($('#tlpvt-emailAddress'))
                $('#editEmailForm').attr('action', '/login/sub-user/sm/editSubUserEmail.go')
                $('#editEmailForm').submit()
                $('#btn-save3').removeClass('btn-bofa-blue').addClass('btn-bofa-inactive').addClass('btn-disabled')
                $('#btn-save3').unbind(e)
            }
        })
        if ($('#btn-save4', $EditProfileSkin).hasClass('btn-disabled')) {
            $('#btn-save4', $EditProfileSkin).children('span.ada-hidden').text(' SafePass Setting Unavailable')
        }
        $('#btn-save4', $EditProfileSkin).click(function (e) {
            if ($(this).hasClass('btn-disabled')) {
                e.preventDefault()
            }
        })
        $('#onlineId,#passcode,#confPasscode').blur(function () {
            $(this).next().fadeOut()
        })
        $('#device-1').click(function () {
            if ($(this).is(':checked')) {
                $('#deviceinput1').show()
            } else {
                $('[id^=\'device_input\']', $EditProfileSkin).val('')
                $('[id^=\'device_input\']', $EditProfileSkin).hide()
                $('label[for^=\'device-\']', $EditProfileSkin).removeClass('field-error')
                $('#device-2').attr('disabled', true).removeAttr('checked')
                $('label[for=\'device-2\'] span').text(' Unavailable')
            }
        })
        $('#device-2').click(function () {
            if ($(this).is(':checked')) {
                $('#deviceinput2').show()
            } else {
                $('#deviceinput2').val('')
                $('#deviceinput2').hide()
                $(this).next().removeClass('field-error')
            }
        })
        $('#safepass_card', $EditProfileSkin).click(function () {
            if ($('#safepass_card').is(':checked')) {
                if (typeof VIPAAServer != 'undefined' && typeof showNonFlashWidget != 'undefined' && safePassFlag == false) {
                    safePassFlag = true
                    showNonFlashWidget('VIPAA-SB-Safepass', '', -1, VIPAAServer, true, 'safepassNonFlashwidget')
                }
                $('input[name=safepassStatus]:hidden').val('ON')
                if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                    doSPWidgetCallback('byPassSafePassWidget', $('#btn-save4'))
                }
                $.post('/login/sub-user/sm/sbUserEventLog.go?Action=Addcard')
            } else {
            }
        })
        $('input[type=checkbox]', $EditProfileSkin).click(function () {
            if (!($('#device-1').is(':checked') || $('device-2').is(':checked') || $('#safepass_card').is(':checked'))) {
                safePassFlag = false
                $('#safepassNonFlashwidget').hide()
            }
        })
        $('.remove-device', $EditProfileSkin).click(function () {
            var options = {
                width: 550,
                buttons: ''
            }
            currentDeviceId = $(this).attr('id')
            var mobileText = $(this).parent('td').children('span:first').text()
            $('#safePassDeviceMobile').text(mobileText)
            if (typeof VIPAAServer != 'undefined' && typeof showNonFlashWidget != 'undefined') {
                showNonFlashWidget('VIPAA-SB-Safepass', 'removeSafepassForm', -1, VIPAAServer, true, 'safepassNonFlashwidgetModal')
            }
            if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                doSPWidgetCallback('byPassSafePassWidget', $('#btn-remove-safepass'))
            }
            var tempCurrentDeviceId = currentDeviceId.substring(currentDeviceId.indexOf('.') + 1, currentDeviceId.length)
            $('#remove-safepass-alerts-content-ModalContainer').remove()
            $('#remove-safepass-alerts-content').boaFlexModal(options)
        })
        if ($('#btn-remove-safepass', $EditProfileSkin).hasClass('btn-disabled')) {
            $('#btn-remove-safepass', $EditProfileSkin).children('span.ada-hidden').text(' button Unavailable')
        }
        $('#btn-close').on('click', function () {
            $('#remove-safepass-alerts-content').dialog('close')
        })
        $('#btn-remove-safepass', $EditProfileSkin).click(function () {
            if (!$(this).hasClass('btn-disabled')) {
                var tempCurrentDeviceId = currentDeviceId.substring(currentDeviceId.indexOf('.') + 1, currentDeviceId.length)
                $('#devicevalue').attr('value', tempCurrentDeviceId)
                $unsubscribeMobileNo = tempCurrentDeviceId
                var rmvSpform = $('#removeSafepassForm')
                var artifactsp = $('input[id^=\'artifactModal\']', rmvSpform).val()
                $.ajax({
                    url: '/login/safepass/sm/safePassUnsubscribe.go',
                    data: {
                        phoneNumber: $unsubscribeMobileNo,
                        artifact: artifactsp
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        $('#remove-safepass-alerts-content').dialog('close')
                        window.location = '/login/sub-user/sm/subuserMaint.go?sourcePage=deleteSPModal&updateStatus=spupdatefail'
                    },
                    success: function (data) {
                        data = $.parseJSON(data)
                        if (null != data.result && data.result == 'success') {
                            $('#divUnsubscribeMobile').hide()
                            $('#divSuccessUnsubscribe').show()
                            window.location = '/login/sub-user/sm/subuserMaint.go?sourcePage=deleteSPModal&updateStatus=UPDATE_SUCCESS'
                        } else {
                            $('#remove-safepass-alerts-content').dialog('close')
                            window.location = '/login/sub-user/sm/subuserMaint.go?sourcePage=deleteSPModal&updateStatus=spupdatefail'
                        }
                    }
                })
            }
        })
        $('#admin-settings', $EditProfileSkin).click(function () {
            if ($(this).hasClass('button-off')) {
                $(this).removeClass('button-off').addClass('button-on').children('span:first').text(adminOffText)
                adminAccess = 'on'
                $('input[name=accessLevel]:hidden').val('M')
            } else {
                if ($(this).hasClass('button-on')) {
                    $(this).removeClass('button-on').addClass('button-off').children('span:first').text(adminOnText)
                    adminAccess = 'off'
                    $('input[name=accessLevel]:hidden').val('I')
                }
            }
            $.post('/login/sub-user/sm/sbUserEventLog.go?Action=Edit&Flow=EditAuthLevel&accessLevel=' + (adminAccess == 'on' ? 'Sub-user' : 'Admin'))
        })
        $('.select-matrix .edit', $EditProfileSkin).click(function () {
            var currRow = $(this).parents('tr')
            var nxtRow = $(this).parents('tr').next()
            $(currRow).hide()
            $(nxtRow).removeAttr('aria-hidden').attr('aria-live', 'rude').show().focus()
        })
        $('.select-matrix .cancel', $EditProfileSkin).click(function () {
            var currRow = $(this).parents('tr')
            var prevRow = $(this).parents('tr').prev()
            var userName = '',
                onlineId = '',
                emailAddr = ''
            userName = $(currRow).find('input[id="userName"]').val()
            onlineId = $(currRow).find('input[id="onlineId"]').val()
            emailAddr = $(currRow).find('input[id="tlpvt-emailAddress"]').val()
            $(currRow).find('input[type="text"]').val('').prev('label').removeClass('field-level-error')
            $(currRow).find('input[type="password"]').val('').prev('label').removeClass('field-level-error')
            $(currRow).find('input[type="checkbox"]').val('').prev('label').removeClass('field-level-error')
            $(currRow).hide().removeAttr('aria-live').attr('aria-hidden', 'true')
            $(prevRow).show().focus()
            cG7.cM0[cm_ClientID] = cmPageId
            var formId = $(this).closest('form').attr('id')
            var flowName = ''
            if (formId === 'editUserNameForm') {
                flowName = 'EditName'
                $.post('/login/sub-user/sm/sbUserEventLog.go?Action=Edit&Flow=' + flowName + '&name=' + userName)
            } else {
                if (formId === 'editOnlineIdForm') {
                    flowName = 'EditOnlineId'
                    $.post('/login/sub-user/sm/sbUserEventLog.go?Action=Edit&Flow=' + flowName + '&onlineId=' + onlineId)
                } else {
                    if (formId === 'editEmailForm') {
                        flowName = 'EditEmail'
                        $.post('/login/sub-user/sm/sbUserEventLog.go?Action=Edit&Flow=' + flowName + '&emailAddress=' + emailAddr)
                    }
                }
            }
        })
        $('a', $EditProfileSkin).click(function (event) {
            $('.format-checker-tooltip,.field-matcher-tooltip').fadeOut()
        })
        $('.safepass-devices #reset', $EditProfileSkin).click(function () {
            var safepassGAIStatus = $('input[name=safepassGAIStatus]:hidden').val()
            var $currRow = $('#safepass-on-off').parents('tr')
            if (safepassGAIStatus == 'OFF') {
                $('#safepass-on-off').removeClass('button-on').addClass('button-off').children('span:first').text(safePassOffText + userNameVar)
            } else {
                $('.editSafepass', $currRow).show()
            }
            if ($('#safepass-device-settings .safepass-input').find('input').parent().prev().find('label').hasClass('field-error')) {
                $('#safepass-device-settings .safepass-input').find('input[type="text"]').val('').parent().prev().find('label').removeClass('field-error')
                $('#safepass-device-settings .safepass-input').find('input[type="checkbox"]').val('').parent().prev().find('label').removeClass('field-error')
            }
            $('table.select-matrix').css('borderCollapse', 'separate')
            $('#safepass-device-settings').addClass('hide').removeAttr('aria-live').attr('aria-hidden', 'true')
            $('table.select-matrix').css('borderCollapse', 'collapse')
            $('#safepass-on-off').removeClass('button-on').addClass('button-off').children('span:first').text(safePassOnText)
            $.post('/login/sub-user/sm/sbUserEventLog.go?Action=Edit')
            cG7.cM0[cm_ClientID] = cmPageId
        })
        $('#deviceinput1,#deviceinput2').blur(function () {
            $('#txtPhoneNumber-tooltip').hide()
            var device1Number = ''
            var device2Number = ''
            if ($('#deviceinput1').length > 0) {
                device1Number = $('#deviceinput1').val().replace(/-/g, '')
            }
            if ($('#deviceinput2').length > 0) {
                device2Number = $('#deviceinput2').val().replace(/-/g, '')
            }
            if ((validateEditProfPhone($(this).val(), $(this).attr('id')) === false) || $(this).val().length === 0) {
                $(this).parent('td').prev('td').find('label').addClass('field-error')
                $('#clientSideErrors ul').html('<li>Please enter a valid 10-digit phone number for your primary mobile device.</li><li>Please enter the phone number of your mobile device.</li>')
                $('div.messaging-vipaa-module#clientSideErrors').removeClass('hide').focus()
                $('#btn-save4').removeClass('btn-bofa-blue').addClass('btn-disabled')
                $('#btn-save4').children('span.ada-hidden').text(' SafePass Setting Unavailable')
                $('#safepassNonFlashwidget').hide()
                if ($(this).attr('Id') == 'deviceinput1') {
                    if ($('#secondaryMobileDevice').length <= 0) {
                        $('#deviceinput2').hide()
                        $('#device-2').attr('disabled', true)
                        $('label[for=\'device-2\'] span').text(' Unavailable')
                    }
                }
                callCoreMetricErrorLib(cmPageId, cmCategoryId, cmSessionID)
            } else {
                if ($('#deviceinput1').val() == $('#deviceinput2').val() || $('#primaryMobileDevice').val() == device2Number || $('#secondaryMobileDevice').val() == device1Number) {
                    $(this).parent('td').prev('td').find('label').addClass('field-error')
                    $('#clientSideErrors ul').html('<li>You entered the same number for both mobile devices. Please enter 2 different mobile numbers</li>')
                    $('div.messaging-vipaa-module#clientSideErrors').removeClass('hide').focus()
                    $('.error-text').each(function () {
                        $(this).css('width', $(this).closest('.global-messaging-module .page-error-skin').width() - 60).boaVertAlign()
                    })
                    $('#btn-save4').removeClass('btn-bofa-blue').addClass('btn-disabled')
                    $('#btn-save4').children('span.ada-hidden').text(' SafePass Setting Unavailable')
                    $('#safepassNonFlashwidget').hide()
                    safePassFlag = false
                    callCoreMetricErrorLib(cmPageId, cmCategoryId, cmSessionID)
                } else {
                    if ($(this).parent('td').prev('td').find('label').hasClass('field-error')) {
                        $(this).parent('td').prev('td').find('label').removeClass('field-error')
                        $('#deviceError').hide()
                        $('#samedeviceNoError').hide()
                    }
                    if (typeof VIPAAServer != 'undefined' && typeof showNonFlashWidget != 'undefined' && safePassFlag == false) {
                        safePassFlag = true
                        showNonFlashWidget('VIPAA-SB-Safepass', '', -1, VIPAAServer, true, 'safepassNonFlashwidget')
                    }
                    $('input[name=safepassStatus]:hidden').val('ON')
                    if ($('#displayWidget').size() == 1 && $('#displayWidget').val() == 'N') {
                        doSPWidgetCallback('byPassSafePassWidget', $('#btn-save4'))
                    }
                    if ($(this).attr('Id') == 'deviceinput1') {
                        if ($('#secondaryMobileDevice').length <= 0) {
                            $('#device-2').removeAttr('disabled')
                        }
                    }
                }
            }
        })
        $('#tlpvt-emailAddress').bind('keyup', vipaaSubUserEditProfileSkin.fn.validateData)
        $('#deviceinput1, #deviceinput2').bind('keyup', vipaaSubUserEditProfileSkin.fn.validatePhoneData)
        $('#deviceinput1, #deviceinput2').focus(function () {
            var $this = $(this),
                $val = $this.val(),
                $val = $val.replace(/\-/g, '')
            $this.val($val)
        })
        $('.button', $EditProfileSkin).each(function (i) {
            if ($(this).hasClass('button-off')) {
                $(this).data('initial_value', 'button-off')
            } else {
                if ($(this).hasClass('button-on')) {
                    $(this).data('initial_value', 'button-on')
                }
            }
        })
        $('#profSettingSaveModalCancel').click(function () {
            if ($(this).attr('href') == 'javascript:void(0);') {
                $('#profSettingSaveModal').dialog('close')
                loadmodallayer()
                currentId = $('[id^=\'copy-settings\']').attr('id')
                index = currentId.slice(13)
                index++
                adaText = 'copy setting of '
                $('#chkCopyAcctAccess', '.modal-content-vipaa-module .create-user-skin').attr('checked', true)
                $('.modal-content-vipaa-module .create-user-skin .divSelectUser').show()
                $('.modal-content-vipaa-module .create-user-skin .divSelectUser .existing-user') [0].selectedIndex = index
                $('.modal-content-vipaa-module .create-user-skin .divSelectUser .existing-user').prev('label').children('span.ada-hidden').text(adaText)
            }
        })
    }
})

function loadServicesURL(url) {
    window.location.href = url
}

function doSPWidgetCallback(value, btnToEnable) {
    if (value == 'byPassSafePassWidget') {
        btnToEnable.removeClass('btn-disabled').addClass('btn-bofa-blue')
        btnToEnable.children('span.ada-hidden').text(' SafePass setting')
    } else {
        if ($('#remove-safepass-alerts-content:visible').length > 0) {
            $('#artifactModal').val(value)
        } else {
            $('#artifact').val(value)
        }
        btnToEnable.removeClass('btn-disabled').addClass('btn-bofa-blue')
        btnToEnable.children('span.ada-hidden').text(' SafePass setting')
    }
}

$(function () {
    if ($('.sub-user-vipaa-module .details-skin').length > 0) {
        $('.field-error').each(function () {
            $(this).parents('tr').show()
            $(this).parents('tr').prev().hide()
        })
        var $currRow = $('#safepass-on-off').parents('tr')
        if ($('#safepass-on-off').hasClass('button-on')) {
            $('.editSafepass', $currRow).removeClass('hide')
        } else {
            if ($('#safepass-on-off').hasClass('button-off')) {
                $('.editSafepass', $currRow).addClass('hide')
                $('#safepass-device-settings').addClass('hide')
            }
        }
    }
})

function addFormatError(context) {
    if ($('.sub-user-vipaa-module .details-skin').length > 0) {
        $errorLabel = $(context).prev('label')
        if (!$errorLabel.hasClass('field-error')) {
            $errorLabel.addClass('field-error')
        }
    }
}

function removeFormatError(context) {
    if ($('.sub-user-vipaa-module .details-skin').length > 0) {
        $errorLabel = $(context).prev('label')
        if ($errorLabel.hasClass('field-error')) {
            $errorLabel.removeClass('field-error')
        }
    }
}

function callCoreMetricErrorLib(passedPageID, passedCatID, cmPageViewSessionIDForConf) {
    var errorCodeCounter = 0
    var cmErrorMsg = ''
    var errorMessage = ''
    var errorMsg = ''
    var errorCnt = 1
    passedPageID = passedPageID + '-error'
    if (typeof (cmCreatePageviewTag) === 'function') {
        cmCreatePageviewTag(passedPageID, null, null, passedCatID, false, false, null, false, false, null, null, null, null, cmPageViewSessionIDForConf, null, null, null, null, null, null, null)
    }
    cmErrorMsg = $('.messaging-vipaa-module .error-skin .error-message:visible ul li')
    if (cmErrorMsg.length > 0) {
        for (var errorMsgsCnt = 0; errorMsgsCnt < cmErrorMsg.length; errorMsgsCnt++) {
            errorMsg = $('span', cmErrorMsg[errorMsgsCnt]).text().replace('\n', '')
            if (typeof (cmCreateCustomError) === 'function') {
                cmCreateCustomError(passedPageID, null, null, null, 'OLBS_' + errorMsg.length, passedCatID, errorMsg)
            }
        }
    } else {
        $('.global-messaging-module .page-error-skin:visible .error-text').each(function () {
            errorMessage = $(this).html()
            errorMsg = errorMessage
        })
    }
}

function sendToJavaScript(value) {
    if ($('#remove-safepass-alerts-content:visible').length > 0) {
        doSPWidgetCallback(value, $('#btn-remove-safepass'))
    } else {
        doSPWidgetCallback(value, $('#btn-save4'))
    }
}

$(document).ready(function () {
    var $subUserVipaaContentModuleHubSkin = $('.sub-user-vipaa-module .list-skin')
    if ($subUserVipaaContentModuleHubSkin.length > 0) {
        var sortingOrder
        var headerName
        if ($('#tblSubUserInfo tr').length > 2) {
            $('#tblSubUserInfo').tablesorter({
                headers: {
                    5: {
                        sorter: false
                    }
                },
                widgets: [
                    'zebra'
                ],
                widgetZebra: {
                    css: [
                        'even',
                        'odd'
                    ]
                },
                sortList: [
                    [0,
                        0]
                ]
            })
        }
        $('#tblSubUserInfo th').click(function () {
            var $this = $(this).find('a')
            changeUpandDownArrow($this)
        })
    }
})

function changeUpandDownArrow($this) {
    if ($this.attr('id') != undefined) {
        $('[id^=\'tableheaderid\']').each(function () {
            if ($(this).attr('id') != $this.attr('id')) {
                $(this).next().hide()
            } else {
                $(this).next().show()
            }
        })
        var ascADAText = ' in ascending order'
        var descADAText = ' in descending order'
        headerName = $this.attr('name')
        if ($this.next().hasClass('sort-arrow-up')) {
            sortingOrder = 'D'
            $.post('/login/sub-user/sm/sbUserEventLog.go?ColSortName=' + headerName + '&ColSortOrder=' + sortingOrder + '&StatusCode=100&Action=Sort')
            $this.next().removeClass('sort-arrow-up').addClass('sort-arrow-down')
            $this.children('span:last').text(descADAText)
        } else {
            sortingOrder = 'A'
            $.post('/login/sub-user/sm/sbUserEventLog.go?ColSortName=' + headerName + '&ColSortOrder=' + sortingOrder + '&StatusCode=100&Action=Sort')
            $this.next().removeClass('sort-arrow-down').addClass('sort-arrow-up')
            $this.children('span:last').text(ascADAText)
        }
    }
}

$(document).ready(function () {
    if ($('.sub-user-vipaa-module .nav-skin').length > 0) {
        $('.sub-user-vipaa-module .nav-skin li').each(function () {
            if ($(this).height() > 40) {
                $(this).addClass('lengthy-text')
            }
        })
    }
})
$(function () {
    var timeoutInterval = 600

    function readCookie(name) {
        var nameEQ = name + '='
        var ca = document.cookie.split(';')
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i]
            while (c.charAt(0) == ' ') {
                c = c.substring(1, c.length)
            }
            if (c.indexOf(nameEQ) == 0) {
                return c.substring(nameEQ.length, c.length)
            }
        }
        return null
    }

    function createCookie(name, value, days) {
        if (days) {
            var date = new Date()
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000))
            var expires = '; expires=' + date.toGMTString()
        } else {
            var expires = ''
        }
        document.cookie = name + '=' + value + expires + '; path=/'
    }

    if ($('div.timeout-vipaa-module').length > 0 && (typeof fsdNavClientOptions === 'undefined')) {
        setupTimeOut()
    }
    if ($('div.timeout-vipaa-module').length > 0 && (typeof extraSecurityURL !== 'undefined') && (extraSecurityURL === true)) {
        setupTimeOut()
    }

    function setupTimeOut() {
        SessionTimeout.init(myWarnFunction, myTimeOut, timeoutInterval, continueURL)
    }

    function myWarnFunction() {
        var options = {
            size: 'small',
            buttons: {
                OK: true
            },
            callback: myHandleContinue
        }
        if (readCookie('LPActive') != null && readCookie('LPActive') == 'true') {
            createCookie('LPActive', 'false', 0.002)
        } else {
            $('#timeoutDialog').boaModal(options)
        }
    }

    function myHandleContinue() {
        SessionTimeout.handleContinue()
    }

    function myTimeOut() {
        var options = {
            size: 'small',
            buttons: {
                OK: true
            },
            callback: myUrl
        }
        if (readCookie('LPActive') != null && readCookie('LPActive') == 'true') {
            createCookie('LPActive', 'false', 0.002)
        } else {
            $('#timeoutDialog').dialog('close')
            myUrl()
        }
    }
})
$(document).ready(function () {
    if ($('.eftx-vipaa-module .base-skin').length > 0) {
        $('#btnProceed').click(function () {
            $('#eftx_error_container').html('').parents('.messaging-vipaa-module').addClass('hidden')
            $.ajax({
                url: '/login/sign-in/agreeEftxLogin.go',
                success: function (data) {
                    var jsonData = JSON.parse(data)
                    if (jsonData && jsonData.result) {
                        if (jsonData.result === 'AGREED') {
                            if (window._showAckModal) {
                                window._showAckModal()
                            }
                        } else {
                            if (jsonData.result === 'FAILED' && jsonData.error) {
                                $('#eftx_error_container').html('').html(jsonData.error[0]).parents('.messaging-vipaa-module').removeClass('hidden')
                            } else {
                                console.log('Unknown result')
                            }
                        }
                    } else {
                        console.log('Error')
                    }
                },
                failure: function (a, d) {
                    console.log('Failed')
                },
                complete: function (data) {
                }
            })
        })
    }
})
var csrfTokenHiddenValue = ''
var corsSettings = 'false'
var $scIsIE = false
var isOBO = false
var targetModalId = $(this).attr('rel')
var pageInitialized = false
var corsSupported = $.support.cors
var tpData = []
var revokedId
if (navigator.userAgent.indexOf('MSIE') != -1) {
    $scIsIE = true
}
var tpsLanguage = $('html').attr('lang').toLowerCase()
var tpsRevokeButtonName = 'Revoke'
var tpsActiveStatusName = 'Active'
var tpsRevokedStatusName = 'Revoked'
$(document).ready(function () {
    var $scVipaaModule = $('.sc-vipaa-module .tps-skin')
    if ($scVipaaModule.length > 0) {
        $(document.body).on('click', 'a[name^="close-location-layer"]', function (event) {
            var parentId = $(this).attr('rel')
            $('.ui-dialog-content').trigger('dialogclose').parent().remove()
            $('#' + parentId).focus()
        })
        if (tpsLanguage == 'es-us') {
            tpsRevokeButtonName = 'Revocado'
            tpsActiveStatusName = 'Activa'
            tpsRevokedStatusName = 'Revocado'
        }
        if (!$scIsIE) {
            detectCors()
        }

        function detectCors() {
            if (corsSupported === false) {
                $.ajax({
                    type: 'POST',
                    url: '/login/sign-in/crosSupportCheck.go',
                    crossDomain: false,
                    cache: false,
                    async: false,
                    header: {
                        ClientAIT: '41339'
                    },
                    timeout: 60000,
                    xhrFields: {
                        withCredentials: true
                    },
                    error: function (XMLHTTPRequest, textStatus, errorThrown) {
                        window.location.reload()
                    },
                    success: function (data) {
                        if ('SUCCESS' === data) {
                            usePost = true
                            corsSupported = true
                            return corsSupported
                        } else {
                            return false
                        }
                    },
                    complete: function (XMLHTTPRequest, textStatus) {
                    }
                })
            } else {
                usePost = corsSupported
                return corsSupported
            }
        }

        function populateTable(tpData) {
            var table = $('#loginHistoryInfo')
            for (var i = 0; i < tpData.length; i++) {
                row = $('<tr></tr>')
                var rowData = $('<td class="first-cell TL_NPI_L1"></td>').text(tpData[i].clientName)
                row.append(rowData)
                rowData = $('<td></td>').text(tpData[i].status)
                row.append(rowData)
                console.log('Status:' + tpData[i].status)
                if (tpData[i].regIdList && typeof (tpData[i].regIdList) === 'object' && ((typeof tpData[i].status !== 'undefined') && (tpData[i].status === 'Active' || tpData[i].status === 'Activa'))) {
                    for (var j = 0; j < tpData[i].regIdList.length; j++) {
                        if (j === 0) {
                            var htmlData = '<td>' + tpData[i].regIdList[j].consentDateList[0].consentDate
                        } else {
                            htmlData = htmlData + '<br> <hr>' + tpData[i].regIdList[j].consentDateList[0].consentDate
                        }
                        if (j === tpData[i].regIdList.length - 1) {
                            htmlData = htmlData + '</td>'
                        }
                    }
                    rowData = $(htmlData)
                } else {
                    if (tpData[i].regIdList && typeof (tpData[i].regIdList) === 'object') {
                        for (var j = 0; j < tpData[i].regIdList.length; j++) {
                            if (j === 0) {
                                var htmlData = '<td>' + tpData[i].regIdList[j].revokedDate
                            } else {
                                htmlData = htmlData + '<br> <hr>' + tpData[i].regIdList[j].revokedDate
                            }
                            if (j === tpData[i].regIdList.length - 1) {
                                htmlData = htmlData + '</td>'
                            }
                        }
                        rowData = $(htmlData)
                    } else {
                        if (tpData[i].regIdList) {
                            rowData = $('<td></td>').text(tpData[i].regIdList[0].revokedDate)
                        } else {
                            rowData = $('<td></td>').text(tpData[i].regIdList[0].consentDateList[0].consentDate)
                        }
                    }
                }
                row.append(rowData)
                if ((typeof tpData[i].status !== 'undefined') && (tpData[i].status === 'Revoked' || tpData[i].status === 'Revocado')) {
                    rowData = $('<td></td>')
                } else {
                    var htmlButton = $('<td></td>')
                    if (typeof isOBO !== 'undefined' && isOBO === true) {
                        rowData = htmlButton.html('<a id="btnd_' + i + '" class="btn-bofa btn-bofa-small btn-disabled btn-bofa-noRight" href="javascript:void(0);"><span>' + tpsRevokeButtonName + '</span></a>')
                    } else {
                        rowData = htmlButton.html('<a id="btn_' + i + '" class="btn-bofa btn-bofa-small btn-bofa-blue btn-bofa-noRight" href="javascript:void(0);"><span>' + tpsRevokeButtonName + '</span></a>')
                    }
                }
                row.append(rowData)
                table.append(row)
            }
            if ($('table').length === 0) {
                $('#LHcontainer tr:first').after(row)
            } else {
                $('#LHcontainer').append(table)
            }
        }

        $scVipaaModule.on('click', '[id^="btn_"]', function () {
            openConfirm(this)
        })

        function openConfirm(data) {
            clientName = tpData[parseInt(data.id.split('_') [1])].clientName
            revokedId = data
            var options = {
                skin: 'modal-flex',
                width: 450,
                className: 'some-class-name',
                onOpen: function () {
                },
                onClose: function () {
                },
                closeTriggers: $('#cancelLayer'),
                closeOnEscape: true
            }
            $('#flex-modal-pos-ack-layer').boaFlexModal(options)
            $('#aggInfo_1').html(clientName + '.')
            $('#aggInfo_2').text(clientName)
        }

        $('#confirmed').off('click').on('click', function () {
            revokeAction(revokedId)
        })
        $('#revokeDecline').off('click').on('click', function () {
            $('#flex-modal-pos-ack-layer').dialog('close')
        })

        function revokeAction(data) {
            console.log('Revoke Data:' + JSON.stringify(data))
            var rowIndex = parseInt(data.id.split('_') [1])
            var ClientToRevoke = tpData[parseInt(data.id.split('_') [1])].clientName
            var requestPayload = {
                action: 'revoke',
                customerId: '',
                customerIdType: 'GUID',
                clientOrgId: tpData[parseInt(data.id.split('_') [1])].clientOrgId,
                clientFilteringRule: {
                    filterType: 'group',
                    filterValue: 'AGGREGATOR'
                }
            }
            $.ajax({
                type: 'POST',
                url: '/login/rest/sas/sm/oauth/v2/updateOAuthRegistration',
                dataType: 'json',
                data: JSON.stringify(requestPayload),
                crossDomain: false,
                cache: false,
                timeout: 60000,
                traditional: true,
                contentType: 'application/json; charset=UTF-8',
                xhrFields: {
                    withCredentials: true
                },
                error: function (XMLHTTPRequest, textStatus, errorThrown) {
                    $('#flex-modal-pos-ack-layer').dialog('close')
                    $('.messaging-vipaa-module .error-skin').removeClass('hide')
                },
                success: function (data, textStatus, XMLHttpRequest) {
                    if (typeof data.errorInfo !== 'undefined') {
                        $('#flex-modal-pos-ack-layer').dialog('close')
                        $('.messaging-vipaa-module .error-skin span').text(data.errorInfo[0].description)
                        $('.messaging-vipaa-module .error-skin').removeClass('hide')
                    } else {
                        $('#flex-modal-pos-ack-layer').dialog('close')
                        tpData = []
                        $('#loginHistoryInfo tbody').empty()
                        prepareList(data)
                        $('.messaging-vipaa-module .error-skin').addClass('hide')
                        $('.messaging-vipaa-module .pos-ack-skin').removeClass('hide')
                        $('#aggrID_1').html(ClientToRevoke + '.')
                        $('#aggrID_2').text(ClientToRevoke)
                    }
                }
            })
        }

        function prepareList(data) {
            console.log('Retrieve OAuth Registrtaion Data:' + JSON.stringify(data))
            if ((data.active && data.active.length > 0) || (data.revoked && data.revoked.length > 0)) {
                if (data.active && data.active.length > 0) {
                    for (var i = 0; i < data.active.length; i++) {
                        data.active[i].status = tpsActiveStatusName
                        tpData.push(data.active[i])
                    }
                }
                if ((data.revoked && data.revoked.length > 0)) {
                    for (var i = 0; i < data.revoked.length; i++) {
                        data.revoked[i].status = tpsRevokedStatusName
                        tpData.push(data.revoked[i])
                    }
                }
            }
            if (tpData.length > 0) {
                populateTable(tpData)
            } else {
                $('#tpListNotEmpty').addClass('hide')
                $('#no_records').removeClass('hide')
            }
        }

        function init() {
            if (pageInitialized) {
                return
            }
            pageInitialized = true
            var retrievePayload = {
                customerId: '',
                customerIdType: 'GUID',
                clientFilteringRule: {
                    filterType: 'group',
                    filterValue: 'AGGREGATOR'
                }
            }
            $.ajax({
                type: 'POST',
                url: '/login/rest/sas/sm/oauth/v2/retrieveOAuthRegistration',
                dataType: 'json',
                data: JSON.stringify(retrievePayload),
                crossDomain: false,
                cache: false,
                timeout: 60000,
                traditional: true,
                header: {
                    ClientAIT: '41339'
                },
                contentType: 'application/json; charset=UTF-8',
                xhrFields: {
                    withCredentials: true
                },
                error: function (XMLHTTPRequest, textStatus, errorThrown) {
                    $('.messaging-vipaa-module .error-skin').removeClass('hide')
                    $('#LHcontainer').addClass('hide')
                    $('#flex-modal-pos-ack-layer').dialog('close')
                },
                success: function (data, textStatus, xhr) {
                    isOBO = false
                    if (xhr.getResponseHeader('OBO_FLOW') !== null) {
                        isOBO = true
                    } else {
                        isOBO = false
                    }
                    if (typeof data.errorInfo !== 'undefined') {
                        $('#flex-modal-pos-ack-layer').dialog('close')
                        $('.messaging-vipaa-module .error-skin span').text(data.errorInfo[0].description)
                        $('.messaging-vipaa-module .error-skin').removeClass('hide')
                    } else {
                        $('.messaging-vipaa-module .error-skin').addClass('hide')
                        prepareList(data)
                    }
                }
            })
        }

        init()
    }
})
$(document).ready(function () {
    if ($('.modal-content-vipaa-module .pos-ack-skin').length > 0) {
        var currentInterval

        function startTimer() {
            var maxtime = '10:00'
            $('#countdown').html('10:00')
            var interval = setInterval(function () {
                var timer = maxtime.split(':')
                var min = parseInt(timer[0], 10)
                var sec = parseInt(timer[1], 10)
                --sec
                min = (sec < 0) ? --min : min
                if (min < 0) {
                    window.clearInterval(interval)
                    min = '0'
                    sec = '0'
                    window.location.href = '/'
                }
                sec = (sec < 0) ? 59 : sec
                sec = (sec < 10) ? '0' + sec : sec
                $('#countdown').html(min + ':' + sec)
                maxtime = min + ':' + sec
            }, 1000)
            currentInterval = interval
        }

        window._showAckModal = function () {
            var options = {
                skin: 'modal-flex',
                width: 800,
                className: 'no-close',
                onOpen: function () {
                    startTimer()
                },
                onClose: function () {
                    window.clearInterval(currentInterval)
                },
                closeTriggers: $('#cancelLayer'),
                closeOnEscape: true
            }
            $('#flex-modal-pos-ack-layer').boaFlexModal(options)
        }
        window._showDeclineModal = function () {
            var options = {
                skin: 'modal-flex',
                width: 800,
                className: 'no-close',
                onOpen: function () {
                },
                onClose: function () {
                },
                closeTriggers: $('#cancelLayer'),
                closeOnEscape: true
            }
            $('#flex-modal-sparta-error-layer').boaFlexModal(options)
        }
        window._showRemindLaterModal = function () {
            var options = {
                skin: 'modal-flex',
                width: 800,
                className: 'no-close',
                onOpen: function () {
                },
                onClose: function () {
                },
                closeTriggers: $('#cancelLayer'),
                closeOnEscape: true
            }
            jQuery('#flex-modal-sparta-timer-layer').boaFlexModal(options)
        }
        $('#btnContinueToOLB').click(function () {
            if ($(this).hasClass('btn-bofa-blue')) {
                $(this).removeClass('btn-bofa-blue').addClass('btn-disabled')
                $('<form action="/login/sign-in/continueLoginEftxSplash.go"></form>').appendTo('body').submit()
            } else {
                event.preventDefault()
                return false
            }
        })
        $('#btnDeclineConfirm').click(function () {
            if ($(this).hasClass('btn-bofa-blue')) {
                $(this).removeClass('btn-bofa-blue').addClass('btn-disabled')
                $('<form action="/login/sign-in/declineEftxLogin.go"></form>').appendTo('body').submit()
            } else {
                event.preventDefault()
                return false
            }
        })
        $('#btnRemindLaterConfirm').click(function () {
            if ($(this).hasClass('btn-bofa-blue')) {
                $(this).removeClass('btn-bofa-blue').addClass('btn-disabled')
                $('<form action="/login/sign-in/remindEftxLogin.go"></form>').appendTo('body').submit()
            } else {
                event.preventDefault()
                return false
            }
        })
        $('.js-goback').click(function () {
            $(this).parents('.modal-content.ui-dialog-content').dialog('close')
        })
        $('.js-show-decline-modal').click(function () {
            window._showDeclineModal()
        })
        $('.js-show-remindlater-modal').click(function () {
            window._showRemindLaterModal()
        })
        $('.js-show-ack-modal').click(function () {
            window._showAckModal()
        })
    }
})
var ModalApsMpModuleGetAppSkin = {
    selectedDevice: '',
    init: function () {
        var $ModalBox = $('#mobile-app-download-flex-modal')
        var selectedDeviceConf = {}

        function onDialogOpen(selectedDevice) {
            bindEvents()
            $('#mobile-app-download-flex-modal-ModalContainer').removeAttr('aria-describedby')
            ModalApsMpModuleGetAppSkin.selectedDevice = selectedDevice
            selectedDeviceConf = GetAppDownloadConfig[selectedDevice]
            ModalApsMpModuleGetAppSkin.triggerPageViewTag(selectedDeviceConf.pageId)
            boaEqualHeight($ModalBox.find('.column'))
            if (selectedDevice == 'iPod Touch') {
                $('.content-wrapper', $ModalBox).children().addClass('ipod')
            }
            var mobileAppSendBtn = $('#mobile_app_download_send_button', $ModalBox)
            if (mobileAppSendBtn.is(':visible')) {
                var sendButtonNameAttr = typeof selectedDeviceConf.email != 'undefined' && selectedDeviceConf.email ? 'anc-send-email-button' : 'anc-send-text-button'
                mobileAppSendBtn.attr('name', sendButtonNameAttr)
            }
            cX('onload')
            $('.modal-flex form').attr('id', '').uniqueId().attr('data-common-form', 'gis-mask').data('common-form', 'gis-mask').addClass('common-form')
            $('.modal-flex form .phone-input').prev('label').attr('for', $('.modal-flex form .phone-input').attr('id'))
            $('.modal-flex form .phone-input').attr('id', '').uniqueId().attr('data-field-type', 'phone').data('field-type', 'phone').addClass('gis-mask')
            $('.modal-flex form .email-input').prev('label').attr('for', $('.modal-flex form .email-input').attr('id'))
            $('.modal-flex form .email-input').attr('id', '').uniqueId().attr('data-field-type', 'email').data('field-type', 'email').addClass('gis-mask')
            boa.form.init()
        }

        var ModalContentBox = $('.get-app-skin', '.modal-mobile-module')
        $('body').on('click', '.get-app-modal-trigger', function () {
            var selectedDevice = $(this).attr('rel')
            if (typeof selectedDevice === 'undefined') {
                if ($('.get-app-modal-trigger').parents().is('.oo_bar')) {
                    var selectDeviceDD = $('#device-pulldown', '.oo_bar')
                } else {
                    var selectDeviceDD = $('#device-pulldown', '.fsd-layout-body')
                }
                if (selectDeviceDD[0].selectedIndex > 0) {
                    selectedDevice = selectDeviceDD.val()
                }
            }
            if (typeof selectedDevice !== 'undefined') {
                var selectedDeviceConf = GetAppDownloadConfig[selectedDevice]
                var cookedHTML = ModalContentBox.html().render(selectedDeviceConf)
                $ModalBox.html(cookedHTML)
                $('.ui-dialog:visible').find('.ui-dialog-titlebar-close').click()
                var modalWidth = selectedDevice == 'Other' ? 425 : (selectedDevice == 'iPod Touch' ? 640 : 900)
                var options = {
                    skin: 'get-app-skin',
                    width: modalWidth,
                    className: 'modal-flex',
                    onOpen: function () {
                        onDialogOpen(selectedDevice)
                    },
                    onClose: function () {
                        ModalApsMpModuleGetAppSkin.cm_SetOldPID()
                        ModalApsMpModuleGetAppSkin.selectedDevice = ''
                    },
                    closeTriggers: {},
                    closeOnEscape: true
                }
                $ModalBox.boaFlexModal(options)
            }
        })
        $($ModalBox).on('focus blur', 'input', function (event) {
            var $this = $(this)
            var defaultValue = $this.data('defaultVal')
            var inputVal = $.trim($this.val())
            if (event.type == 'focusout') {
                if (!inputVal.length) {
                    $this.val(defaultValue)
                }
            } else {
                if (event.type == 'focusin') {
                    if (typeof defaultValue == 'undefined') {
                        $this.data('defaultVal', $this.val())
                        defaultValue = $this.val()
                    }
                    if (inputVal == defaultValue) {
                        $this.val('')
                    }
                }
            }
        })

        function bindEvents() {
            $('#confirmModalCloseButton', $ModalBox).on('click', function (event) {
                $ModalBox.dialog('close')
            })
            $('#confirmModalSendAnotherLink', $ModalBox).on('click', function (event) {
                $ModalBox.dialog({
                    width: 900
                })
                if ($('.get-app-modal-trigger').parents().is('.oo_bar')) {
                    var selectedDevice = $('#device-pulldown', '.oo_bar').val()
                } else {
                    var selectedDevice = $('#device-pulldown', '.fsd-layout-body').val()
                }
                if (typeof selectedDevice == 'undefined') {
                    selectedDevice = ModalApsMpModuleGetAppSkin.selectedDevice
                }
                var selectedDeviceConf = GetAppDownloadConfig[selectedDevice]
                var cookedHTML = ModalContentBox.html().render(selectedDeviceConf)
                $ModalBox.html(cookedHTML)
                onDialogOpen(selectedDevice)
            })
            $('#mobile_app_download_send_button', $ModalBox).on('click', function () {
                var $this = $(this).closest('form').find('.true').find('.gis-mask-original')
                var inputVal = $.trim($this.val())
                var errorMsgDiv = $this.closest('.column').find('#field-level-error')
                errorMsgDiv.hide()
                var errIconTxt = '<span class="ada-hidden">Error Icon </span>'
                if ($('.get-app-modal-trigger').parents().is('.oo_bar')) {
                    var selectedDevice = $('#device-pulldown', '.oo_bar').val()
                } else {
                    var selectedDevice = $('#device-pulldown', '.fsd-layout-body').val()
                }
                if (typeof selectedDevice == 'undefined') {
                    selectedDevice = ModalApsMpModuleGetAppSkin.selectedDevice
                }
                var selectedDeviceConf = GetAppDownloadConfig[selectedDevice]
                if ($this.hasClass('phone-input')) {
                    if (ModalApsMpModuleGetAppSkin.phoneNoFormat(inputVal)) {
                        errorMsgDiv.html('')
                        ModalApsMpModuleGetAppSkin.postAjaxRequest(selectedDeviceConf.deviceId, inputVal, '')
                    } else {
                        errorMsgDiv.html(errIconTxt + GetAppDownloadConfig.tenDigitNumberErr).addClass('inline-error-sm')
                        ModalApsMpModuleGetAppSkin.throwCustomError(selectedDeviceConf.pageId, 'APSMPFErr13~' + GetAppDownloadConfig.tenDigitNumberErr)
                    }
                } else {
                    if ($this.hasClass('email-input')) {
                        var $emailAddress = ModalApsMpModuleGetAppSkin.emailFormat(inputVal)
                        var $specialCharacters = /[#$%^&]+/i
                        if ((inputVal).match($specialCharacters)) {
                            errorMsgDiv.html(errIconTxt + GetAppDownloadConfig.splCharEmailErr).addClass('inline-error-sm')
                            ModalApsMpModuleGetAppSkin.throwCustomError(selectedDeviceConf.pageId, 'APSMPFErr14~' + GetAppDownloadConfig.splCharEmailErr)
                        } else {
                            if ($emailAddress.length > 0) {
                                errorMsgDiv.html('')
                                ModalApsMpModuleGetAppSkin.postAjaxRequest(selectedDeviceConf.deviceId, '', inputVal)
                            } else {
                                errorMsgDiv.html(errIconTxt + GetAppDownloadConfig.invalidEmailErr).addClass('inline-error-sm')
                                ModalApsMpModuleGetAppSkin.throwCustomError(selectedDeviceConf.pageId, 'APSMPFErr15~' + GetAppDownloadConfig.invalidEmailErr)
                            }
                        }
                    }
                }
                errorMsgDiv.show()
            })
        }
    },
    phoneNoFormat: function ($phNumber) {
        if (/^[0|1]/.test($phNumber)) {
            return false
        } else {
            var formats = [
                '###-###-####',
                '### ### ####',
                '(###) ###-####',
                '###.###.####',
                '(###) ### ####',
                '(###) ###.####',
                '##########'
            ]
            var format = $.trim($phNumber).replace(/[0-9]/g, '#')
            return ($.inArray(format, formats) == -1) ? false : true
        }
    },
    emailFormat: function ($emailAddress) {
        var $validEmailAddress = /^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i
        if ($emailAddress.match($validEmailAddress)) {
            return $emailAddress
        } else {
            return ''
        }
    },
    postAjaxRequest: function ($deviceId, $smsId, $emailId) {
        var confirmScreen = $('.confirmation-screen', '#mobile-app-download-flex-modal')
        if ($('.get-app-modal-trigger').parents().is('.oo_bar')) {
            var selectedDevice = $('#device-pulldown', '.oo_bar').val()
        } else {
            var selectedDevice = $('#device-pulldown', '.fsd-layout-body').val()
        }
        selectedDevice = typeof selectedDevice == 'undefined' ? ModalApsMpModuleGetAppSkin.selectedDevice : selectedDevice
        var selectedDeviceConf = GetAppDownloadConfig[selectedDevice]
        $.ajax({
            url: $('#mobile-app-download-flex-modal form').attr('action'),
            data: ({
                deviceId: $deviceId,
                smsId: $smsId.replace(/[-. ()]/g, ''),
                emailId: $emailId
            }),
            type: 'POST',
            datatype: 'json',
            timeout: 20000,
            beforeSend: function (XMLHTTPRequest) {
                $('div.processing', '#mobile-app-download-flex-modal').removeClass('hide').siblings().addClass('hide')
            },
            error: function (XMLHTTPRequest, textStatus, errorThrown) {
                var errorMessage = 'AJAX error:  textStatus: ' + textStatus + ' errorThrown: ' + errorThrown
                $('#mobile-app-download-flex-modal').dialog({
                    position: 'center',
                    width: 475
                })
                boaTLAddCustomEvent(errorMessage, 'AJAX Error', 'Get the App')
                confirmScreen.removeClass('hide').siblings().addClass('hide')
                confirmScreen.find('.sprite').removeClass('sprite-D7').addClass('sprite-E7')
                confirmScreen.find('.ada-hidden').html('Error Icon ')
                confirmScreen.find('.message').html(GetAppDownloadConfig.serviceOutageErr)
                confirmScreen.find('#inputHolder').html('')
            },
            success: function (data) {
                if ((data.match(/success/gi)) || (data.match(/ok/gi))) {
                    ModalApsMpModuleGetAppSkin.triggerPageViewTag(selectedDeviceConf.pageId + '-confirmation')
                    $('#mobile-app-download-flex-modal').dialog({
                        position: 'center',
                        width: 475
                    })
                    $('#mobile-app-download-flex-modal-modalClose').focus()
                    confirmScreen.removeClass('hide').siblings().addClass('hide')
                    confirmScreen.find('.sprite').addClass('sprite-D7').removeClass('sprite-E7')
                    confirmScreen.find('.ada-hidden').html('Check Mark Icon ')
                    confirmScreen.find('.inline-ack-msg .message').html($emailId.length ? GetAppDownloadConfig.emailConfirmationTxt + ' ' : GetAppDownloadConfig.textConfirmationTxt + ' ')
                    confirmScreen.find('.inline-ack-msg #inputHolder').html($emailId.length ? $emailId + '.' : $smsId + '.')
                } else {
                    if ((data.match(/quota/gi)) || (data.match(/ok/gi)) || (data.match(/error/gi))) {
                        $('#mobile-app-download-flex-modal').dialog({
                            position: 'center',
                            width: 475
                        })
                        var errorMessage = 'AJAX error:'
                        boaTLAddCustomEvent(errorMessage, 'Send Communication Service Error', 'Get the App')
                        ModalApsMpModuleGetAppSkin.throwCustomError(selectedDeviceConf.pageId, 'APSMPFErr16~' + GetAppDownloadConfig.invalidEmailErr)
                        confirmScreen.removeClass('hide').siblings().addClass('hide')
                        confirmScreen.find('.sprite').removeClass('sprite-D7').addClass('sprite-E7')
                        confirmScreen.find('.ada-hidden').html('Error Icon ')
                        confirmScreen.find('.message').html(GetAppDownloadConfig.serviceOutageErr)
                        confirmScreen.find('#inputHolder').html('')
                    } else {
                        $('#mobile-app-download-flex-modal').dialog({
                            position: 'center',
                            width: 475
                        })
                        ModalApsMpModuleGetAppSkin.throwCustomError(selectedDeviceConf.pageId, 'APSMPFErr16~' + GetAppDownloadConfig.invalidEmailErr)
                        var errorMessage = 'AJAX error:'
                        boaTLAddCustomEvent(errorMessage, 'Send Communication Service Error', 'Get the App')
                        confirmScreen.removeClass('hide').siblings().addClass('hide')
                        confirmScreen.find('.sprite').removeClass('sprite-D7').addClass('sprite-E7')
                        confirmScreen.find('.ada-hidden').html('Error Icon ')
                        confirmScreen.find('.message').html(GetAppDownloadConfig.serviceOutageErr)
                        confirmScreen.find('#inputHolder').html('')
                    }
                }
            },
            complete: function (XMLHTTPRequest, textStatus) {
            }
        })
    },
    throwCustomError: function (pageId, errorText) {
        var errorMessage = ''
        var errorCode = ''
        if (errorText.indexOf('~') > 0) {
            errorMessage = errorText.split('~') [1]
            errorCode = errorText.split('~') [0]
        }
    },
    triggerPageViewTag: function (pageId) {
        if (typeof cmCreatePageviewTag == 'function') {
        }
    },
    cm_SetOldPID: function () {
    },
    Base64: {
        _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',
        encode: function (input) {
            var output = ''
            var chr1,
                chr2,
                chr3,
                enc1,
                enc2,
                enc3,
                enc4
            var i = 0
            input = ModalApsMpModuleGetAppSkin.Base64._utf8_encode(input)
            while (i < input.length) {
                chr1 = input.charCodeAt(i++)
                chr2 = input.charCodeAt(i++)
                chr3 = input.charCodeAt(i++)
                enc1 = chr1 >> 2
                enc2 = ((chr1 & 3) << 4) | (chr2 >> 4)
                enc3 = ((chr2 & 15) << 2) | (chr3 >> 6)
                enc4 = chr3 & 63
                if (isNaN(chr2)) {
                    enc3 = enc4 = 64
                } else {
                    if (isNaN(chr3)) {
                        enc4 = 64
                    }
                }
                output = output + this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) + this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4)
            }
            return output
        },
        decode: function (input) {
            var output = ''
            var chr1,
                chr2,
                chr3
            var enc1,
                enc2,
                enc3,
                enc4
            var i = 0
            input = input.replace(/[^A-Za-z0-9\+\/\=]/g, '')
            while (i < input.length) {
                enc1 = this._keyStr.indexOf(input.charAt(i++))
                enc2 = this._keyStr.indexOf(input.charAt(i++))
                enc3 = this._keyStr.indexOf(input.charAt(i++))
                enc4 = this._keyStr.indexOf(input.charAt(i++))
                chr1 = (enc1 << 2) | (enc2 >> 4)
                chr2 = ((enc2 & 15) << 4) | (enc3 >> 2)
                chr3 = ((enc3 & 3) << 6) | enc4
                output = output + String.fromCharCode(chr1)
                if (enc3 != 64) {
                    output = output + String.fromCharCode(chr2)
                }
                if (enc4 != 64) {
                    output = output + String.fromCharCode(chr3)
                }
            }
            output = ModalApsMpModuleGetAppSkin.Base64._utf8_decode(output)
            return output
        },
        _utf8_encode: function (string) {
            string = string.replace(/\r\n/g, '\n')
            var utftext = ''
            for (var n = 0; n < string.length; n++) {
                var c = string.charCodeAt(n)
                if (c < 128) {
                    utftext += String.fromCharCode(c)
                } else {
                    if ((c > 127) && (c < 2048)) {
                        utftext += String.fromCharCode((c >> 6) | 192)
                        utftext += String.fromCharCode((c & 63) | 128)
                    } else {
                        utftext += String.fromCharCode((c >> 12) | 224)
                        utftext += String.fromCharCode(((c >> 6) & 63) | 128)
                        utftext += String.fromCharCode((c & 63) | 128)
                    }
                }
            }
            return utftext
        },
        _utf8_decode: function (utftext) {
            var string = ''
            var i = 0
            var c = c1 = c2 = 0
            while (i < utftext.length) {
                c = utftext.charCodeAt(i)
                if (c < 128) {
                    string += String.fromCharCode(c)
                    i++
                } else {
                    if ((c > 191) && (c < 224)) {
                        c2 = utftext.charCodeAt(i + 1)
                        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63))
                        i += 2
                    } else {
                        c2 = utftext.charCodeAt(i + 1)
                        c3 = utftext.charCodeAt(i + 2)
                        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63))
                        i += 3
                    }
                }
            }
            return string
        }
    }
}
String.prototype.render = function (object) {
    if (typeof object != 'undefined') {
        return this.replace(/\{(.*?).(.*?)\}/g, function (match) {
            attr = match.replace(/[{}]/g, '')
            return typeof object[attr] == 'undefined' ? 'hide' : object[attr]
        })
    }
}
$.fn.injectSprite = function (options) {
    var defaults = {
        targetClass: 'sprite',
        markerClass: 'spr',
        completeClass: 'sprited',
        location: 'last'
    }
    options = $.extend(true, {}, defaults, options)
    var $this = $(this)
    var $container = $('.' + options.targetClass, $this)
    switch (true) {
        case $container.hasClass('sprite-first') :
            options.location = 'first'
            break
    }
    $.each($container.not('.' + options.completeClass), function (i) {
        var $sprite = $('<div/>').addClass(options.markerClass)
        switch (options.location) {
            case 'first':
                $sprite.prependTo(this)
                break
            case 'last':
                $sprite.appendTo(this)
                break
        }
    })
    $container.addClass(options.targetClass).addClass(options.completeClass)
    return this
}
$(document).on('ready', function (e) {
    $('.aps-mobile-products').injectSprite()
})
$(document).ready(function () {
    if ($('.mobile-app-download-module .choose-device-modal-skin').length > 0) {
        var $chooseDeviceBtn = $('#choose-device')
        var selectedDevice
        $('a.choose-device-get-the-app-modal').click(function () {
            var targetModalId = $(this).attr('rel')
            var $targetModal = $('#' + targetModalId)
            var options = {
                skin: 'modal-flex',
                buttons: {},
                width: 450,
                closeTriggers: $('#mobile-app-download-choose-device-modalClose')
            }
            $targetModal.boaFlexModal(options)
        })
        $('#device-pulldown').on('change', function () {
            var $this = $(this)
            selectedDevice = $this.val()
            $chooseDeviceBtn.attr('rel', selectedDevice)
            if ($this[0].selectedIndex != 0) {
                $chooseDeviceBtn.removeClass('btn-disabled')
            } else {
                $chooseDeviceBtn.addClass('btn-disabled')
            }
        })
        $chooseDeviceBtn.on('click', function (e) {
            if ($(this).hasClass('btn-disabled')) {
                e.preventDefault()
                return false
            }
        })
    }
})
$(document).ready(function () {
    var fpuserID = ''
    if ($('.fp-vipaa-module .enroll-skin').length > 0) {
        (function () {
            if (typeof window.CustomEvent === 'function') {
                return false
            }

            function CustomEvent(event, params) {
                params = params || {
                    bubbles: false,
                    cancelable: false,
                    detail: undefined
                }
                var evt = document.createEvent('CustomEvent')
                evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)
                return evt
            }

            CustomEvent.prototype = window.Event.prototype
            window.CustomEvent = CustomEvent
        })()
        if (typeof username !== 'undefined') {
            $('.oid').empty().html(username)
        }
        $('#FP-remind-me').on('click', function () {
            var redirectToRemind = 'https://' + window.location.host + '/login/sign-in/remindFPSplash.go'
            window.location.replace(redirectToRemind)
        })
        $('#FP-no-thanks').on('click', function () {
            var redirectToDecline = 'https://' + window.location.host + '/login/sign-in/declineFPEnrollment.go'
            window.location.replace(redirectToDecline)
        })
        $('#setup-FP-Signin').on('click', function () {
            $('#fpContainer').removeClass('hidden')
            $('#setup-FP-Signin').attr('disabled', 'disabled')
            var locale = ''
            if ($('html').attr('lang').toLowerCase() == 'en-us') {
                locale = 'en'
            } else {
                locale = 'es'
            }
            if (locale === 'es') {
                $('#success-done').text('Continue to Accounts')
            } else {
                $('#success-done').text('Continue to Accounts')
            }
            var datainit = {
                widgetName: 'secure-fingerprint-widget',
                widgetVersion: '1.0.0',
                ContainerId: 'fpContainer',
                widgetEventName: 'AH_FP_ENROLL_INITIALIZE',
                language: locale,
                payload: {
                    isModal: 'true',
                    successCallback: {
                        eligibilitySuccess: function (successData) {
                            $('#FP-enroll-preference').attr('disabled', false)
                            $('#fpContainer').addClass('hidden')
                        },
                        enrollmentSuccess: function (successData) {
                            $('#FP-enroll-preference').attr('disabled', false)
                            $('#fpContainer').addClass('hidden')
                            var redirectTo = 'https://' + window.location.host + '/login/sign-in/continueToOlbOnSplash.go'
                            window.location.replace(redirectTo)
                        }
                    },
                    failureCallback: {
                        eligibilityError: function () {
                            $('#FP-disable-preference').attr('disabled', 'false')
                            $('#fpContainer').addClass('hidden')
                        }
                    },
                    enrollEligible: true,
                    OID: fpuserID,
                    source: 'FP-SPL'
                }
            }
            var config = datainit
            var fpCustomEvent = new CustomEvent('LOAD_SPARTA_WIDGET', {
                detail: {
                    config: config
                }
            })
            document.dispatchEvent(fpCustomEvent)
            if (window.sparta && window.sparta.widgetLoader) {
                window.sparta.widgetLoader.sub('AH_FP_MODAL_OPENED', function (event) {
                    $('#fp-modal-contentSpartaUILayerClose').off('click').on('click', function () {
                        var redirectToRemind = 'https://' + window.location.host + '/login/sign-in/remindFPSplash.go'
                        window.location.replace(redirectToRemind)
                    })
                })
            }
        })
        $('#fp-scan-help').on('click', function () {
            var setTop = $('#fp-scan-help').offset().top - 75 + 'px'
            $('#fp-scan-help-content').parents().find('.ui-dialog').css('position', 'absolute').css('top', setTop)
        })
    }
})
$(document).ready(function () {
    $('a.auth-lang-interstitial-modal-link').on('click', function (e) {
        e.preventDefault()
        var options = {
            skin: 'modal-flex',
            width: 500,
            onClose: function () {
            }
        }
        var $modal = $('.auth-lang-interstitial-modal')
        $modal.boaFlexModal(options)
        $('#ui-id-1-ModalContainer').css('left', '40px')
        $('#ui-id-1-ModalContainer .ui-button-text').text('cerrar')
        $('.auth-lang-interstitial-modal .flex-modal-buttons a.cancel-OOL-button').click(function () {
            $('div.auth-lang-interstitial-modal').dialog('close')
        })
        $('.auth-lang-interstitial-modal .flex-modal-buttons a.continue-OOL-button').click(function () {
            $('div.auth-lang-interstitial-modal').dialog('close')
        })
        if ($(this).attr('rel').length > 0) {
            $('a.continue-OOL-button').attr({
                href: $(this).attr('rel'),
                target: '_blank'
            })
        }
    })
})


(function () {
  var key = process.argv[2];
  var userpass = process.argv[3];

  var jsEncrypt = new JSEncrypt();
  jsEncrypt.setPublicKey(key);
  var encrypted = jsEncrypt.encrypt(userpass);

  console.log(encrypted);
})();
